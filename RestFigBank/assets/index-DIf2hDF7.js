const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AboutView-CFNM5kzu.js","assets/AboutView-CSIvawM9.css"])))=>i.map(i=>d[i]);
var E1=Object.defineProperty;var py=i=>{throw TypeError(i)};var S1=(i,t,e)=>t in i?E1(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var Z=(i,t,e)=>S1(i,typeof t!="symbol"?t+"":t,e),Zg=(i,t,e)=>t.has(i)||py("Cannot "+e);var l=(i,t,e)=>(Zg(i,t,"read from private field"),e?e.call(i):t.get(i)),w=(i,t,e)=>t.has(i)?py("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(i):t.set(i,e),b=(i,t,e,s)=>(Zg(i,t,"write to private field"),s?s.call(i,e):t.set(i,e),e),A=(i,t,e)=>(Zg(i,t,"access private method"),e);var Bs=(i,t,e,s)=>({set _(n){b(i,t,n,e)},get _(){return l(i,t,s)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function e(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=e(n);fetch(n.href,r)}})();var If={exports:{}};/*!
  * Bootstrap v5.3.6 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var x1=If.exports,gy;function C1(){return gy||(gy=1,function(i,t){(function(e,s){i.exports=s()})(x1,function(){const e=new Map,s={set(y,d,m){e.has(y)||e.set(y,new Map);const x=e.get(y);x.has(d)||x.size===0?x.set(d,m):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(x.keys())[0]}.`)},get:(y,d)=>e.has(y)&&e.get(y).get(d)||null,remove(y,d){if(!e.has(y))return;const m=e.get(y);m.delete(d),m.size===0&&e.delete(y)}},n="transitionend",r=y=>(y&&window.CSS&&window.CSS.escape&&(y=y.replace(/#([^\s"#']+)/g,(d,m)=>`#${CSS.escape(m)}`)),y),o=y=>{y.dispatchEvent(new Event(n))},a=y=>!(!y||typeof y!="object")&&(y.jquery!==void 0&&(y=y[0]),y.nodeType!==void 0),c=y=>a(y)?y.jquery?y[0]:y:typeof y=="string"&&y.length>0?document.querySelector(r(y)):null,h=y=>{if(!a(y)||y.getClientRects().length===0)return!1;const d=getComputedStyle(y).getPropertyValue("visibility")==="visible",m=y.closest("details:not([open])");if(!m)return d;if(m!==y){const x=y.closest("summary");if(x&&x.parentNode!==m||x===null)return!1}return d},u=y=>!y||y.nodeType!==Node.ELEMENT_NODE||!!y.classList.contains("disabled")||(y.disabled!==void 0?y.disabled:y.hasAttribute("disabled")&&y.getAttribute("disabled")!=="false"),f=y=>{if(!document.documentElement.attachShadow)return null;if(typeof y.getRootNode=="function"){const d=y.getRootNode();return d instanceof ShadowRoot?d:null}return y instanceof ShadowRoot?y:y.parentNode?f(y.parentNode):null},p=()=>{},g=y=>{y.offsetHeight},_=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,v=[],E=()=>document.documentElement.dir==="rtl",S=y=>{var d;d=()=>{const m=_();if(m){const x=y.NAME,D=m.fn[x];m.fn[x]=y.jQueryInterface,m.fn[x].Constructor=y,m.fn[x].noConflict=()=>(m.fn[x]=D,y.jQueryInterface)}},document.readyState==="loading"?(v.length||document.addEventListener("DOMContentLoaded",()=>{for(const m of v)m()}),v.push(d)):d()},C=(y,d=[],m=y)=>typeof y=="function"?y.call(...d):m,T=(y,d,m=!0)=>{if(!m)return void C(y);const x=(j=>{if(!j)return 0;let{transitionDuration:G,transitionDelay:nt}=window.getComputedStyle(j);const ft=Number.parseFloat(G),gt=Number.parseFloat(nt);return ft||gt?(G=G.split(",")[0],nt=nt.split(",")[0],1e3*(Number.parseFloat(G)+Number.parseFloat(nt))):0})(d)+5;let D=!1;const O=({target:j})=>{j===d&&(D=!0,d.removeEventListener(n,O),C(y))};d.addEventListener(n,O),setTimeout(()=>{D||o(d)},x)},R=(y,d,m,x)=>{const D=y.length;let O=y.indexOf(d);return O===-1?!m&&x?y[D-1]:y[0]:(O+=m?1:-1,x&&(O=(O+D)%D),y[Math.max(0,Math.min(O,D-1))])},I=/[^.]*(?=\..*)\.|.*/,F=/\..*/,N=/::\d+$/,H={};let U=1;const Q={mouseenter:"mouseover",mouseleave:"mouseout"},tt=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Et(y,d){return d&&`${d}::${U++}`||y.uidEvent||U++}function At(y){const d=Et(y);return y.uidEvent=d,H[d]=H[d]||{},H[d]}function Rt(y,d,m=null){return Object.values(y).find(x=>x.callable===d&&x.delegationSelector===m)}function oe(y,d,m){const x=typeof d=="string",D=x?m:d||m;let O=Y(y);return tt.has(O)||(O=y),[x,D,O]}function J(y,d,m,x,D){if(typeof d!="string"||!y)return;let[O,j,G]=oe(d,m,x);d in Q&&(j=(Mt=>function(It){if(!It.relatedTarget||It.relatedTarget!==It.delegateTarget&&!It.delegateTarget.contains(It.relatedTarget))return Mt.call(this,It)})(j));const nt=At(y),ft=nt[G]||(nt[G]={}),gt=Rt(ft,j,O?m:null);if(gt)return void(gt.oneOff=gt.oneOff&&D);const ct=Et(j,d.replace(I,"")),Bt=O?function(kt,Mt,It){return function Dt(ue){const ye=kt.querySelectorAll(Mt);for(let{target:Vt}=ue;Vt&&Vt!==this;Vt=Vt.parentNode)for(const ee of ye)if(ee===Vt)return bt(ue,{delegateTarget:Vt}),Dt.oneOff&&M.off(kt,ue.type,Mt,It),It.apply(Vt,[ue])}}(y,m,j):function(kt,Mt){return function It(Dt){return bt(Dt,{delegateTarget:kt}),It.oneOff&&M.off(kt,Dt.type,Mt),Mt.apply(kt,[Dt])}}(y,j);Bt.delegationSelector=O?m:null,Bt.callable=j,Bt.oneOff=D,Bt.uidEvent=ct,ft[ct]=Bt,y.addEventListener(G,Bt,O)}function X(y,d,m,x,D){const O=Rt(d[m],x,D);O&&(y.removeEventListener(m,O,!!D),delete d[m][O.uidEvent])}function et(y,d,m,x){const D=d[m]||{};for(const[O,j]of Object.entries(D))O.includes(x)&&X(y,d,m,j.callable,j.delegationSelector)}function Y(y){return y=y.replace(F,""),Q[y]||y}const M={on(y,d,m,x){J(y,d,m,x,!1)},one(y,d,m,x){J(y,d,m,x,!0)},off(y,d,m,x){if(typeof d!="string"||!y)return;const[D,O,j]=oe(d,m,x),G=j!==d,nt=At(y),ft=nt[j]||{},gt=d.startsWith(".");if(O===void 0){if(gt)for(const ct of Object.keys(nt))et(y,nt,ct,d.slice(1));for(const[ct,Bt]of Object.entries(ft)){const kt=ct.replace(N,"");G&&!d.includes(kt)||X(y,nt,j,Bt.callable,Bt.delegationSelector)}}else{if(!Object.keys(ft).length)return;X(y,nt,j,O,D?m:null)}},trigger(y,d,m){if(typeof d!="string"||!y)return null;const x=_();let D=null,O=!0,j=!0,G=!1;d!==Y(d)&&x&&(D=x.Event(d,m),x(y).trigger(D),O=!D.isPropagationStopped(),j=!D.isImmediatePropagationStopped(),G=D.isDefaultPrevented());const nt=bt(new Event(d,{bubbles:O,cancelable:!0}),m);return G&&nt.preventDefault(),j&&y.dispatchEvent(nt),nt.defaultPrevented&&D&&D.preventDefault(),nt}};function bt(y,d={}){for(const[m,x]of Object.entries(d))try{y[m]=x}catch{Object.defineProperty(y,m,{configurable:!0,get:()=>x})}return y}function Ct(y){if(y==="true")return!0;if(y==="false")return!1;if(y===Number(y).toString())return Number(y);if(y===""||y==="null")return null;if(typeof y!="string")return y;try{return JSON.parse(decodeURIComponent(y))}catch{return y}}function Gt(y){return y.replace(/[A-Z]/g,d=>`-${d.toLowerCase()}`)}const xe={setDataAttribute(y,d,m){y.setAttribute(`data-bs-${Gt(d)}`,m)},removeDataAttribute(y,d){y.removeAttribute(`data-bs-${Gt(d)}`)},getDataAttributes(y){if(!y)return{};const d={},m=Object.keys(y.dataset).filter(x=>x.startsWith("bs")&&!x.startsWith("bsConfig"));for(const x of m){let D=x.replace(/^bs/,"");D=D.charAt(0).toLowerCase()+D.slice(1),d[D]=Ct(y.dataset[x])}return d},getDataAttribute:(y,d)=>Ct(y.getAttribute(`data-bs-${Gt(d)}`))};class Be{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(d){return d=this._mergeConfigObj(d),d=this._configAfterMerge(d),this._typeCheckConfig(d),d}_configAfterMerge(d){return d}_mergeConfigObj(d,m){const x=a(m)?xe.getDataAttribute(m,"config"):{};return{...this.constructor.Default,...typeof x=="object"?x:{},...a(m)?xe.getDataAttributes(m):{},...typeof d=="object"?d:{}}}_typeCheckConfig(d,m=this.constructor.DefaultType){for(const[D,O]of Object.entries(m)){const j=d[D],G=a(j)?"element":(x=j)==null?`${x}`:Object.prototype.toString.call(x).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(O).test(G))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${D}" provided type "${G}" but expected type "${O}".`)}var x}}class Xt extends Be{constructor(d,m){super(),(d=c(d))&&(this._element=d,this._config=this._getConfig(m),s.set(this._element,this.constructor.DATA_KEY,this))}dispose(){s.remove(this._element,this.constructor.DATA_KEY),M.off(this._element,this.constructor.EVENT_KEY);for(const d of Object.getOwnPropertyNames(this))this[d]=null}_queueCallback(d,m,x=!0){T(d,m,x)}_getConfig(d){return d=this._mergeConfigObj(d,this._element),d=this._configAfterMerge(d),this._typeCheckConfig(d),d}static getInstance(d){return s.get(c(d),this.DATA_KEY)}static getOrCreateInstance(d,m={}){return this.getInstance(d)||new this(d,typeof m=="object"?m:null)}static get VERSION(){return"5.3.6"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(d){return`${d}${this.EVENT_KEY}`}}const B=y=>{let d=y.getAttribute("data-bs-target");if(!d||d==="#"){let m=y.getAttribute("href");if(!m||!m.includes("#")&&!m.startsWith("."))return null;m.includes("#")&&!m.startsWith("#")&&(m=`#${m.split("#")[1]}`),d=m&&m!=="#"?m.trim():null}return d?d.split(",").map(m=>r(m)).join(","):null},V={find:(y,d=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(d,y)),findOne:(y,d=document.documentElement)=>Element.prototype.querySelector.call(d,y),children:(y,d)=>[].concat(...y.children).filter(m=>m.matches(d)),parents(y,d){const m=[];let x=y.parentNode.closest(d);for(;x;)m.push(x),x=x.parentNode.closest(d);return m},prev(y,d){let m=y.previousElementSibling;for(;m;){if(m.matches(d))return[m];m=m.previousElementSibling}return[]},next(y,d){let m=y.nextElementSibling;for(;m;){if(m.matches(d))return[m];m=m.nextElementSibling}return[]},focusableChildren(y){const d=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(m=>`${m}:not([tabindex^="-"])`).join(",");return this.find(d,y).filter(m=>!u(m)&&h(m))},getSelectorFromElement(y){const d=B(y);return d&&V.findOne(d)?d:null},getElementFromSelector(y){const d=B(y);return d?V.findOne(d):null},getMultipleElementsFromSelector(y){const d=B(y);return d?V.find(d):[]}},st=(y,d="hide")=>{const m=`click.dismiss${y.EVENT_KEY}`,x=y.NAME;M.on(document,m,`[data-bs-dismiss="${x}"]`,function(D){if(["A","AREA"].includes(this.tagName)&&D.preventDefault(),u(this))return;const O=V.getElementFromSelector(this)||this.closest(`.${x}`);y.getOrCreateInstance(O)[d]()})},ht=".bs.alert",$t=`close${ht}`,P=`closed${ht}`;class k extends Xt{static get NAME(){return"alert"}close(){if(M.trigger(this._element,$t).defaultPrevented)return;this._element.classList.remove("show");const d=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,d)}_destroyElement(){this._element.remove(),M.trigger(this._element,P),this.dispose()}static jQueryInterface(d){return this.each(function(){const m=k.getOrCreateInstance(this);if(typeof d=="string"){if(m[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);m[d](this)}})}}st(k,"close"),S(k);const $='[data-bs-toggle="button"]';class z extends Xt{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(d){return this.each(function(){const m=z.getOrCreateInstance(this);d==="toggle"&&m[d]()})}}M.on(document,"click.bs.button.data-api",$,y=>{y.preventDefault();const d=y.target.closest($);z.getOrCreateInstance(d).toggle()}),S(z);const q=".bs.swipe",W=`touchstart${q}`,at=`touchmove${q}`,rt=`touchend${q}`,it=`pointerdown${q}`,K=`pointerup${q}`,St={endCallback:null,leftCallback:null,rightCallback:null},lt={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class yt extends Be{constructor(d,m){super(),this._element=d,d&&yt.isSupported()&&(this._config=this._getConfig(m),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return St}static get DefaultType(){return lt}static get NAME(){return"swipe"}dispose(){M.off(this._element,q)}_start(d){this._supportPointerEvents?this._eventIsPointerPenTouch(d)&&(this._deltaX=d.clientX):this._deltaX=d.touches[0].clientX}_end(d){this._eventIsPointerPenTouch(d)&&(this._deltaX=d.clientX-this._deltaX),this._handleSwipe(),C(this._config.endCallback)}_move(d){this._deltaX=d.touches&&d.touches.length>1?0:d.touches[0].clientX-this._deltaX}_handleSwipe(){const d=Math.abs(this._deltaX);if(d<=40)return;const m=d/this._deltaX;this._deltaX=0,m&&C(m>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(M.on(this._element,it,d=>this._start(d)),M.on(this._element,K,d=>this._end(d)),this._element.classList.add("pointer-event")):(M.on(this._element,W,d=>this._start(d)),M.on(this._element,at,d=>this._move(d)),M.on(this._element,rt,d=>this._end(d)))}_eventIsPointerPenTouch(d){return this._supportPointerEvents&&(d.pointerType==="pen"||d.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const xt=".bs.carousel",qt=".data-api",he="ArrowLeft",te="ArrowRight",Je="next",He="prev",ds="left",Ms="right",Ko=`slide${xt}`,Il=`slid${xt}`,Ds=`keydown${xt}`,Ti=`mouseenter${xt}`,ef=`mouseleave${xt}`,vS=`dragstart${xt}`,_S=`load${xt}${qt}`,yS=`click${xt}${qt}`,Bv="carousel",sf="active",Hv=".active",jv=".carousel-item",wS=Hv+jv,AS={[he]:Ms,[te]:ds},ES={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},SS={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Ll extends Xt{constructor(d,m){super(d,m),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=V.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Bv&&this.cycle()}static get Default(){return ES}static get DefaultType(){return SS}static get NAME(){return"carousel"}next(){this._slide(Je)}nextWhenVisible(){!document.hidden&&h(this._element)&&this.next()}prev(){this._slide(He)}pause(){this._isSliding&&o(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?M.one(this._element,Il,()=>this.cycle()):this.cycle())}to(d){const m=this._getItems();if(d>m.length-1||d<0)return;if(this._isSliding)return void M.one(this._element,Il,()=>this.to(d));const x=this._getItemIndex(this._getActive());if(x===d)return;const D=d>x?Je:He;this._slide(D,m[d])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(d){return d.defaultInterval=d.interval,d}_addEventListeners(){this._config.keyboard&&M.on(this._element,Ds,d=>this._keydown(d)),this._config.pause==="hover"&&(M.on(this._element,Ti,()=>this.pause()),M.on(this._element,ef,()=>this._maybeEnableCycle())),this._config.touch&&yt.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const m of V.find(".carousel-item img",this._element))M.on(m,vS,x=>x.preventDefault());const d={leftCallback:()=>this._slide(this._directionToOrder(ds)),rightCallback:()=>this._slide(this._directionToOrder(Ms)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new yt(this._element,d)}_keydown(d){if(/input|textarea/i.test(d.target.tagName))return;const m=AS[d.key];m&&(d.preventDefault(),this._slide(this._directionToOrder(m)))}_getItemIndex(d){return this._getItems().indexOf(d)}_setActiveIndicatorElement(d){if(!this._indicatorsElement)return;const m=V.findOne(Hv,this._indicatorsElement);m.classList.remove(sf),m.removeAttribute("aria-current");const x=V.findOne(`[data-bs-slide-to="${d}"]`,this._indicatorsElement);x&&(x.classList.add(sf),x.setAttribute("aria-current","true"))}_updateInterval(){const d=this._activeElement||this._getActive();if(!d)return;const m=Number.parseInt(d.getAttribute("data-bs-interval"),10);this._config.interval=m||this._config.defaultInterval}_slide(d,m=null){if(this._isSliding)return;const x=this._getActive(),D=d===Je,O=m||R(this._getItems(),x,D,this._config.wrap);if(O===x)return;const j=this._getItemIndex(O),G=ct=>M.trigger(this._element,ct,{relatedTarget:O,direction:this._orderToDirection(d),from:this._getItemIndex(x),to:j});if(G(Ko).defaultPrevented||!x||!O)return;const nt=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(j),this._activeElement=O;const ft=D?"carousel-item-start":"carousel-item-end",gt=D?"carousel-item-next":"carousel-item-prev";O.classList.add(gt),g(O),x.classList.add(ft),O.classList.add(ft),this._queueCallback(()=>{O.classList.remove(ft,gt),O.classList.add(sf),x.classList.remove(sf,gt,ft),this._isSliding=!1,G(Il)},x,this._isAnimated()),nt&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return V.findOne(wS,this._element)}_getItems(){return V.find(jv,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(d){return E()?d===ds?He:Je:d===ds?Je:He}_orderToDirection(d){return E()?d===He?ds:Ms:d===He?Ms:ds}static jQueryInterface(d){return this.each(function(){const m=Ll.getOrCreateInstance(this,d);if(typeof d!="number"){if(typeof d=="string"){if(m[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);m[d]()}}else m.to(d)})}}M.on(document,yS,"[data-bs-slide], [data-bs-slide-to]",function(y){const d=V.getElementFromSelector(this);if(!d||!d.classList.contains(Bv))return;y.preventDefault();const m=Ll.getOrCreateInstance(d),x=this.getAttribute("data-bs-slide-to");return x?(m.to(x),void m._maybeEnableCycle()):xe.getDataAttribute(this,"slide")==="next"?(m.next(),void m._maybeEnableCycle()):(m.prev(),void m._maybeEnableCycle())}),M.on(window,_S,()=>{const y=V.find('[data-bs-ride="carousel"]');for(const d of y)Ll.getOrCreateInstance(d)}),S(Ll);const Ah=".bs.collapse",xS=`show${Ah}`,CS=`shown${Ah}`,TS=`hide${Ah}`,PS=`hidden${Ah}`,RS=`click${Ah}.data-api`,wg="show",Ml="collapse",nf="collapsing",kS=`:scope .${Ml} .${Ml}`,Ag='[data-bs-toggle="collapse"]',IS={parent:null,toggle:!0},LS={parent:"(null|element)",toggle:"boolean"};class Dl extends Xt{constructor(d,m){super(d,m),this._isTransitioning=!1,this._triggerArray=[];const x=V.find(Ag);for(const D of x){const O=V.getSelectorFromElement(D),j=V.find(O).filter(G=>G===this._element);O!==null&&j.length&&this._triggerArray.push(D)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return IS}static get DefaultType(){return LS}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let d=[];if(this._config.parent&&(d=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(D=>D!==this._element).map(D=>Dl.getOrCreateInstance(D,{toggle:!1}))),d.length&&d[0]._isTransitioning||M.trigger(this._element,xS).defaultPrevented)return;for(const D of d)D.hide();const m=this._getDimension();this._element.classList.remove(Ml),this._element.classList.add(nf),this._element.style[m]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const x=`scroll${m[0].toUpperCase()+m.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(nf),this._element.classList.add(Ml,wg),this._element.style[m]="",M.trigger(this._element,CS)},this._element,!0),this._element.style[m]=`${this._element[x]}px`}hide(){if(this._isTransitioning||!this._isShown()||M.trigger(this._element,TS).defaultPrevented)return;const d=this._getDimension();this._element.style[d]=`${this._element.getBoundingClientRect()[d]}px`,g(this._element),this._element.classList.add(nf),this._element.classList.remove(Ml,wg);for(const m of this._triggerArray){const x=V.getElementFromSelector(m);x&&!this._isShown(x)&&this._addAriaAndCollapsedClass([m],!1)}this._isTransitioning=!0,this._element.style[d]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(nf),this._element.classList.add(Ml),M.trigger(this._element,PS)},this._element,!0)}_isShown(d=this._element){return d.classList.contains(wg)}_configAfterMerge(d){return d.toggle=!!d.toggle,d.parent=c(d.parent),d}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const d=this._getFirstLevelChildren(Ag);for(const m of d){const x=V.getElementFromSelector(m);x&&this._addAriaAndCollapsedClass([m],this._isShown(x))}}_getFirstLevelChildren(d){const m=V.find(kS,this._config.parent);return V.find(d,this._config.parent).filter(x=>!m.includes(x))}_addAriaAndCollapsedClass(d,m){if(d.length)for(const x of d)x.classList.toggle("collapsed",!m),x.setAttribute("aria-expanded",m)}static jQueryInterface(d){const m={};return typeof d=="string"&&/show|hide/.test(d)&&(m.toggle=!1),this.each(function(){const x=Dl.getOrCreateInstance(this,m);if(typeof d=="string"){if(x[d]===void 0)throw new TypeError(`No method named "${d}"`);x[d]()}})}}M.on(document,RS,Ag,function(y){(y.target.tagName==="A"||y.delegateTarget&&y.delegateTarget.tagName==="A")&&y.preventDefault();for(const d of V.getMultipleElementsFromSelector(this))Dl.getOrCreateInstance(d,{toggle:!1}).toggle()}),S(Dl);var Os="top",ii="bottom",ni="right",Ns="left",rf="auto",Ol=[Os,ii,ni,Ns],Yo="start",Nl="end",Vv="clippingParents",Eg="viewport",Fl="popper",Uv="reference",Sg=Ol.reduce(function(y,d){return y.concat([d+"-"+Yo,d+"-"+Nl])},[]),xg=[].concat(Ol,[rf]).reduce(function(y,d){return y.concat([d,d+"-"+Yo,d+"-"+Nl])},[]),zv="beforeRead",qv="read",Wv="afterRead",Gv="beforeMain",Xv="main",Kv="afterMain",Yv="beforeWrite",Qv="write",Jv="afterWrite",Zv=[zv,qv,Wv,Gv,Xv,Kv,Yv,Qv,Jv];function gn(y){return y?(y.nodeName||"").toLowerCase():null}function ri(y){if(y==null)return window;if(y.toString()!=="[object Window]"){var d=y.ownerDocument;return d&&d.defaultView||window}return y}function Qo(y){return y instanceof ri(y).Element||y instanceof Element}function Pi(y){return y instanceof ri(y).HTMLElement||y instanceof HTMLElement}function Cg(y){return typeof ShadowRoot<"u"&&(y instanceof ri(y).ShadowRoot||y instanceof ShadowRoot)}const Tg={name:"applyStyles",enabled:!0,phase:"write",fn:function(y){var d=y.state;Object.keys(d.elements).forEach(function(m){var x=d.styles[m]||{},D=d.attributes[m]||{},O=d.elements[m];Pi(O)&&gn(O)&&(Object.assign(O.style,x),Object.keys(D).forEach(function(j){var G=D[j];G===!1?O.removeAttribute(j):O.setAttribute(j,G===!0?"":G)}))})},effect:function(y){var d=y.state,m={popper:{position:d.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(d.elements.popper.style,m.popper),d.styles=m,d.elements.arrow&&Object.assign(d.elements.arrow.style,m.arrow),function(){Object.keys(d.elements).forEach(function(x){var D=d.elements[x],O=d.attributes[x]||{},j=Object.keys(d.styles.hasOwnProperty(x)?d.styles[x]:m[x]).reduce(function(G,nt){return G[nt]="",G},{});Pi(D)&&gn(D)&&(Object.assign(D.style,j),Object.keys(O).forEach(function(G){D.removeAttribute(G)}))})}},requires:["computeStyles"]};function mn(y){return y.split("-")[0]}var Jo=Math.max,of=Math.min,$l=Math.round;function Pg(){var y=navigator.userAgentData;return y!=null&&y.brands&&Array.isArray(y.brands)?y.brands.map(function(d){return d.brand+"/"+d.version}).join(" "):navigator.userAgent}function t_(){return!/^((?!chrome|android).)*safari/i.test(Pg())}function Bl(y,d,m){d===void 0&&(d=!1),m===void 0&&(m=!1);var x=y.getBoundingClientRect(),D=1,O=1;d&&Pi(y)&&(D=y.offsetWidth>0&&$l(x.width)/y.offsetWidth||1,O=y.offsetHeight>0&&$l(x.height)/y.offsetHeight||1);var j=(Qo(y)?ri(y):window).visualViewport,G=!t_()&&m,nt=(x.left+(G&&j?j.offsetLeft:0))/D,ft=(x.top+(G&&j?j.offsetTop:0))/O,gt=x.width/D,ct=x.height/O;return{width:gt,height:ct,top:ft,right:nt+gt,bottom:ft+ct,left:nt,x:nt,y:ft}}function Rg(y){var d=Bl(y),m=y.offsetWidth,x=y.offsetHeight;return Math.abs(d.width-m)<=1&&(m=d.width),Math.abs(d.height-x)<=1&&(x=d.height),{x:y.offsetLeft,y:y.offsetTop,width:m,height:x}}function e_(y,d){var m=d.getRootNode&&d.getRootNode();if(y.contains(d))return!0;if(m&&Cg(m)){var x=d;do{if(x&&y.isSameNode(x))return!0;x=x.parentNode||x.host}while(x)}return!1}function Xn(y){return ri(y).getComputedStyle(y)}function MS(y){return["table","td","th"].indexOf(gn(y))>=0}function zr(y){return((Qo(y)?y.ownerDocument:y.document)||window.document).documentElement}function af(y){return gn(y)==="html"?y:y.assignedSlot||y.parentNode||(Cg(y)?y.host:null)||zr(y)}function s_(y){return Pi(y)&&Xn(y).position!=="fixed"?y.offsetParent:null}function Eh(y){for(var d=ri(y),m=s_(y);m&&MS(m)&&Xn(m).position==="static";)m=s_(m);return m&&(gn(m)==="html"||gn(m)==="body"&&Xn(m).position==="static")?d:m||function(x){var D=/firefox/i.test(Pg());if(/Trident/i.test(Pg())&&Pi(x)&&Xn(x).position==="fixed")return null;var O=af(x);for(Cg(O)&&(O=O.host);Pi(O)&&["html","body"].indexOf(gn(O))<0;){var j=Xn(O);if(j.transform!=="none"||j.perspective!=="none"||j.contain==="paint"||["transform","perspective"].indexOf(j.willChange)!==-1||D&&j.willChange==="filter"||D&&j.filter&&j.filter!=="none")return O;O=O.parentNode}return null}(y)||d}function kg(y){return["top","bottom"].indexOf(y)>=0?"x":"y"}function Sh(y,d,m){return Jo(y,of(d,m))}function i_(y){return Object.assign({},{top:0,right:0,bottom:0,left:0},y)}function n_(y,d){return d.reduce(function(m,x){return m[x]=y,m},{})}const r_={name:"arrow",enabled:!0,phase:"main",fn:function(y){var d,m=y.state,x=y.name,D=y.options,O=m.elements.arrow,j=m.modifiersData.popperOffsets,G=mn(m.placement),nt=kg(G),ft=[Ns,ni].indexOf(G)>=0?"height":"width";if(O&&j){var gt=function(de,le){return i_(typeof(de=typeof de=="function"?de(Object.assign({},le.rects,{placement:le.placement})):de)!="number"?de:n_(de,Ol))}(D.padding,m),ct=Rg(O),Bt=nt==="y"?Os:Ns,kt=nt==="y"?ii:ni,Mt=m.rects.reference[ft]+m.rects.reference[nt]-j[nt]-m.rects.popper[ft],It=j[nt]-m.rects.reference[nt],Dt=Eh(O),ue=Dt?nt==="y"?Dt.clientHeight||0:Dt.clientWidth||0:0,ye=Mt/2-It/2,Vt=gt[Bt],ee=ue-ct[ft]-gt[kt],Ht=ue/2-ct[ft]/2+ye,Kt=Sh(Vt,Ht,ee),ae=nt;m.modifiersData[x]=((d={})[ae]=Kt,d.centerOffset=Kt-Ht,d)}},effect:function(y){var d=y.state,m=y.options.element,x=m===void 0?"[data-popper-arrow]":m;x!=null&&(typeof x!="string"||(x=d.elements.popper.querySelector(x)))&&e_(d.elements.popper,x)&&(d.elements.arrow=x)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Hl(y){return y.split("-")[1]}var DS={top:"auto",right:"auto",bottom:"auto",left:"auto"};function o_(y){var d,m=y.popper,x=y.popperRect,D=y.placement,O=y.variation,j=y.offsets,G=y.position,nt=y.gpuAcceleration,ft=y.adaptive,gt=y.roundOffsets,ct=y.isFixed,Bt=j.x,kt=Bt===void 0?0:Bt,Mt=j.y,It=Mt===void 0?0:Mt,Dt=typeof gt=="function"?gt({x:kt,y:It}):{x:kt,y:It};kt=Dt.x,It=Dt.y;var ue=j.hasOwnProperty("x"),ye=j.hasOwnProperty("y"),Vt=Ns,ee=Os,Ht=window;if(ft){var Kt=Eh(m),ae="clientHeight",de="clientWidth";Kt===ri(m)&&Xn(Kt=zr(m)).position!=="static"&&G==="absolute"&&(ae="scrollHeight",de="scrollWidth"),(D===Os||(D===Ns||D===ni)&&O===Nl)&&(ee=ii,It-=(ct&&Kt===Ht&&Ht.visualViewport?Ht.visualViewport.height:Kt[ae])-x.height,It*=nt?1:-1),D!==Ns&&(D!==Os&&D!==ii||O!==Nl)||(Vt=ni,kt-=(ct&&Kt===Ht&&Ht.visualViewport?Ht.visualViewport.width:Kt[de])-x.width,kt*=nt?1:-1)}var le,je=Object.assign({position:G},ft&&DS),oi=gt===!0?function(Gi,Fs){var ki=Gi.x,Ii=Gi.y,Ne=Fs.devicePixelRatio||1;return{x:$l(ki*Ne)/Ne||0,y:$l(Ii*Ne)/Ne||0}}({x:kt,y:It},ri(m)):{x:kt,y:It};return kt=oi.x,It=oi.y,nt?Object.assign({},je,((le={})[ee]=ye?"0":"",le[Vt]=ue?"0":"",le.transform=(Ht.devicePixelRatio||1)<=1?"translate("+kt+"px, "+It+"px)":"translate3d("+kt+"px, "+It+"px, 0)",le)):Object.assign({},je,((d={})[ee]=ye?It+"px":"",d[Vt]=ue?kt+"px":"",d.transform="",d))}const Ig={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(y){var d=y.state,m=y.options,x=m.gpuAcceleration,D=x===void 0||x,O=m.adaptive,j=O===void 0||O,G=m.roundOffsets,nt=G===void 0||G,ft={placement:mn(d.placement),variation:Hl(d.placement),popper:d.elements.popper,popperRect:d.rects.popper,gpuAcceleration:D,isFixed:d.options.strategy==="fixed"};d.modifiersData.popperOffsets!=null&&(d.styles.popper=Object.assign({},d.styles.popper,o_(Object.assign({},ft,{offsets:d.modifiersData.popperOffsets,position:d.options.strategy,adaptive:j,roundOffsets:nt})))),d.modifiersData.arrow!=null&&(d.styles.arrow=Object.assign({},d.styles.arrow,o_(Object.assign({},ft,{offsets:d.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:nt})))),d.attributes.popper=Object.assign({},d.attributes.popper,{"data-popper-placement":d.placement})},data:{}};var lf={passive:!0};const Lg={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(y){var d=y.state,m=y.instance,x=y.options,D=x.scroll,O=D===void 0||D,j=x.resize,G=j===void 0||j,nt=ri(d.elements.popper),ft=[].concat(d.scrollParents.reference,d.scrollParents.popper);return O&&ft.forEach(function(gt){gt.addEventListener("scroll",m.update,lf)}),G&&nt.addEventListener("resize",m.update,lf),function(){O&&ft.forEach(function(gt){gt.removeEventListener("scroll",m.update,lf)}),G&&nt.removeEventListener("resize",m.update,lf)}},data:{}};var OS={left:"right",right:"left",bottom:"top",top:"bottom"};function cf(y){return y.replace(/left|right|bottom|top/g,function(d){return OS[d]})}var NS={start:"end",end:"start"};function a_(y){return y.replace(/start|end/g,function(d){return NS[d]})}function Mg(y){var d=ri(y);return{scrollLeft:d.pageXOffset,scrollTop:d.pageYOffset}}function Dg(y){return Bl(zr(y)).left+Mg(y).scrollLeft}function Og(y){var d=Xn(y),m=d.overflow,x=d.overflowX,D=d.overflowY;return/auto|scroll|overlay|hidden/.test(m+D+x)}function l_(y){return["html","body","#document"].indexOf(gn(y))>=0?y.ownerDocument.body:Pi(y)&&Og(y)?y:l_(af(y))}function xh(y,d){var m;d===void 0&&(d=[]);var x=l_(y),D=x===((m=y.ownerDocument)==null?void 0:m.body),O=ri(x),j=D?[O].concat(O.visualViewport||[],Og(x)?x:[]):x,G=d.concat(j);return D?G:G.concat(xh(af(j)))}function Ng(y){return Object.assign({},y,{left:y.x,top:y.y,right:y.x+y.width,bottom:y.y+y.height})}function c_(y,d,m){return d===Eg?Ng(function(x,D){var O=ri(x),j=zr(x),G=O.visualViewport,nt=j.clientWidth,ft=j.clientHeight,gt=0,ct=0;if(G){nt=G.width,ft=G.height;var Bt=t_();(Bt||!Bt&&D==="fixed")&&(gt=G.offsetLeft,ct=G.offsetTop)}return{width:nt,height:ft,x:gt+Dg(x),y:ct}}(y,m)):Qo(d)?function(x,D){var O=Bl(x,!1,D==="fixed");return O.top=O.top+x.clientTop,O.left=O.left+x.clientLeft,O.bottom=O.top+x.clientHeight,O.right=O.left+x.clientWidth,O.width=x.clientWidth,O.height=x.clientHeight,O.x=O.left,O.y=O.top,O}(d,m):Ng(function(x){var D,O=zr(x),j=Mg(x),G=(D=x.ownerDocument)==null?void 0:D.body,nt=Jo(O.scrollWidth,O.clientWidth,G?G.scrollWidth:0,G?G.clientWidth:0),ft=Jo(O.scrollHeight,O.clientHeight,G?G.scrollHeight:0,G?G.clientHeight:0),gt=-j.scrollLeft+Dg(x),ct=-j.scrollTop;return Xn(G||O).direction==="rtl"&&(gt+=Jo(O.clientWidth,G?G.clientWidth:0)-nt),{width:nt,height:ft,x:gt,y:ct}}(zr(y)))}function h_(y){var d,m=y.reference,x=y.element,D=y.placement,O=D?mn(D):null,j=D?Hl(D):null,G=m.x+m.width/2-x.width/2,nt=m.y+m.height/2-x.height/2;switch(O){case Os:d={x:G,y:m.y-x.height};break;case ii:d={x:G,y:m.y+m.height};break;case ni:d={x:m.x+m.width,y:nt};break;case Ns:d={x:m.x-x.width,y:nt};break;default:d={x:m.x,y:m.y}}var ft=O?kg(O):null;if(ft!=null){var gt=ft==="y"?"height":"width";switch(j){case Yo:d[ft]=d[ft]-(m[gt]/2-x[gt]/2);break;case Nl:d[ft]=d[ft]+(m[gt]/2-x[gt]/2)}}return d}function jl(y,d){d===void 0&&(d={});var m=d,x=m.placement,D=x===void 0?y.placement:x,O=m.strategy,j=O===void 0?y.strategy:O,G=m.boundary,nt=G===void 0?Vv:G,ft=m.rootBoundary,gt=ft===void 0?Eg:ft,ct=m.elementContext,Bt=ct===void 0?Fl:ct,kt=m.altBoundary,Mt=kt!==void 0&&kt,It=m.padding,Dt=It===void 0?0:It,ue=i_(typeof Dt!="number"?Dt:n_(Dt,Ol)),ye=Bt===Fl?Uv:Fl,Vt=y.rects.popper,ee=y.elements[Mt?ye:Bt],Ht=function(Fs,ki,Ii,Ne){var bn=ki==="clippingParents"?function(be){var $s=xh(af(be)),Li=["absolute","fixed"].indexOf(Xn(be).position)>=0&&Pi(be)?Eh(be):be;return Qo(Li)?$s.filter(function(Wr){return Qo(Wr)&&e_(Wr,Li)&&gn(Wr)!=="body"}):[]}(Fs):[].concat(ki),vn=[].concat(bn,[Ii]),zl=vn[0],rs=vn.reduce(function(be,$s){var Li=c_(Fs,$s,Ne);return be.top=Jo(Li.top,be.top),be.right=of(Li.right,be.right),be.bottom=of(Li.bottom,be.bottom),be.left=Jo(Li.left,be.left),be},c_(Fs,zl,Ne));return rs.width=rs.right-rs.left,rs.height=rs.bottom-rs.top,rs.x=rs.left,rs.y=rs.top,rs}(Qo(ee)?ee:ee.contextElement||zr(y.elements.popper),nt,gt,j),Kt=Bl(y.elements.reference),ae=h_({reference:Kt,element:Vt,placement:D}),de=Ng(Object.assign({},Vt,ae)),le=Bt===Fl?de:Kt,je={top:Ht.top-le.top+ue.top,bottom:le.bottom-Ht.bottom+ue.bottom,left:Ht.left-le.left+ue.left,right:le.right-Ht.right+ue.right},oi=y.modifiersData.offset;if(Bt===Fl&&oi){var Gi=oi[D];Object.keys(je).forEach(function(Fs){var ki=[ni,ii].indexOf(Fs)>=0?1:-1,Ii=[Os,ii].indexOf(Fs)>=0?"y":"x";je[Fs]+=Gi[Ii]*ki})}return je}function FS(y,d){d===void 0&&(d={});var m=d,x=m.placement,D=m.boundary,O=m.rootBoundary,j=m.padding,G=m.flipVariations,nt=m.allowedAutoPlacements,ft=nt===void 0?xg:nt,gt=Hl(x),ct=gt?G?Sg:Sg.filter(function(Mt){return Hl(Mt)===gt}):Ol,Bt=ct.filter(function(Mt){return ft.indexOf(Mt)>=0});Bt.length===0&&(Bt=ct);var kt=Bt.reduce(function(Mt,It){return Mt[It]=jl(y,{placement:It,boundary:D,rootBoundary:O,padding:j})[mn(It)],Mt},{});return Object.keys(kt).sort(function(Mt,It){return kt[Mt]-kt[It]})}const u_={name:"flip",enabled:!0,phase:"main",fn:function(y){var d=y.state,m=y.options,x=y.name;if(!d.modifiersData[x]._skip){for(var D=m.mainAxis,O=D===void 0||D,j=m.altAxis,G=j===void 0||j,nt=m.fallbackPlacements,ft=m.padding,gt=m.boundary,ct=m.rootBoundary,Bt=m.altBoundary,kt=m.flipVariations,Mt=kt===void 0||kt,It=m.allowedAutoPlacements,Dt=d.options.placement,ue=mn(Dt),ye=nt||(ue!==Dt&&Mt?function(be){if(mn(be)===rf)return[];var $s=cf(be);return[a_(be),$s,a_($s)]}(Dt):[cf(Dt)]),Vt=[Dt].concat(ye).reduce(function(be,$s){return be.concat(mn($s)===rf?FS(d,{placement:$s,boundary:gt,rootBoundary:ct,padding:ft,flipVariations:Mt,allowedAutoPlacements:It}):$s)},[]),ee=d.rects.reference,Ht=d.rects.popper,Kt=new Map,ae=!0,de=Vt[0],le=0;le<Vt.length;le++){var je=Vt[le],oi=mn(je),Gi=Hl(je)===Yo,Fs=[Os,ii].indexOf(oi)>=0,ki=Fs?"width":"height",Ii=jl(d,{placement:je,boundary:gt,rootBoundary:ct,altBoundary:Bt,padding:ft}),Ne=Fs?Gi?ni:Ns:Gi?ii:Os;ee[ki]>Ht[ki]&&(Ne=cf(Ne));var bn=cf(Ne),vn=[];if(O&&vn.push(Ii[oi]<=0),G&&vn.push(Ii[Ne]<=0,Ii[bn]<=0),vn.every(function(be){return be})){de=je,ae=!1;break}Kt.set(je,vn)}if(ae)for(var zl=function(be){var $s=Vt.find(function(Li){var Wr=Kt.get(Li);if(Wr)return Wr.slice(0,be).every(function(vf){return vf})});if($s)return de=$s,"break"},rs=Mt?3:1;rs>0&&zl(rs)!=="break";rs--);d.placement!==de&&(d.modifiersData[x]._skip=!0,d.placement=de,d.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function d_(y,d,m){return m===void 0&&(m={x:0,y:0}),{top:y.top-d.height-m.y,right:y.right-d.width+m.x,bottom:y.bottom-d.height+m.y,left:y.left-d.width-m.x}}function f_(y){return[Os,ni,ii,Ns].some(function(d){return y[d]>=0})}const p_={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(y){var d=y.state,m=y.name,x=d.rects.reference,D=d.rects.popper,O=d.modifiersData.preventOverflow,j=jl(d,{elementContext:"reference"}),G=jl(d,{altBoundary:!0}),nt=d_(j,x),ft=d_(G,D,O),gt=f_(nt),ct=f_(ft);d.modifiersData[m]={referenceClippingOffsets:nt,popperEscapeOffsets:ft,isReferenceHidden:gt,hasPopperEscaped:ct},d.attributes.popper=Object.assign({},d.attributes.popper,{"data-popper-reference-hidden":gt,"data-popper-escaped":ct})}},g_={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(y){var d=y.state,m=y.options,x=y.name,D=m.offset,O=D===void 0?[0,0]:D,j=xg.reduce(function(gt,ct){return gt[ct]=function(Bt,kt,Mt){var It=mn(Bt),Dt=[Ns,Os].indexOf(It)>=0?-1:1,ue=typeof Mt=="function"?Mt(Object.assign({},kt,{placement:Bt})):Mt,ye=ue[0],Vt=ue[1];return ye=ye||0,Vt=(Vt||0)*Dt,[Ns,ni].indexOf(It)>=0?{x:Vt,y:ye}:{x:ye,y:Vt}}(ct,d.rects,O),gt},{}),G=j[d.placement],nt=G.x,ft=G.y;d.modifiersData.popperOffsets!=null&&(d.modifiersData.popperOffsets.x+=nt,d.modifiersData.popperOffsets.y+=ft),d.modifiersData[x]=j}},Fg={name:"popperOffsets",enabled:!0,phase:"read",fn:function(y){var d=y.state,m=y.name;d.modifiersData[m]=h_({reference:d.rects.reference,element:d.rects.popper,placement:d.placement})},data:{}},m_={name:"preventOverflow",enabled:!0,phase:"main",fn:function(y){var d=y.state,m=y.options,x=y.name,D=m.mainAxis,O=D===void 0||D,j=m.altAxis,G=j!==void 0&&j,nt=m.boundary,ft=m.rootBoundary,gt=m.altBoundary,ct=m.padding,Bt=m.tether,kt=Bt===void 0||Bt,Mt=m.tetherOffset,It=Mt===void 0?0:Mt,Dt=jl(d,{boundary:nt,rootBoundary:ft,padding:ct,altBoundary:gt}),ue=mn(d.placement),ye=Hl(d.placement),Vt=!ye,ee=kg(ue),Ht=ee==="x"?"y":"x",Kt=d.modifiersData.popperOffsets,ae=d.rects.reference,de=d.rects.popper,le=typeof It=="function"?It(Object.assign({},d.rects,{placement:d.placement})):It,je=typeof le=="number"?{mainAxis:le,altAxis:le}:Object.assign({mainAxis:0,altAxis:0},le),oi=d.modifiersData.offset?d.modifiersData.offset[d.placement]:null,Gi={x:0,y:0};if(Kt){if(O){var Fs,ki=ee==="y"?Os:Ns,Ii=ee==="y"?ii:ni,Ne=ee==="y"?"height":"width",bn=Kt[ee],vn=bn+Dt[ki],zl=bn-Dt[Ii],rs=kt?-de[Ne]/2:0,be=ye===Yo?ae[Ne]:de[Ne],$s=ye===Yo?-de[Ne]:-ae[Ne],Li=d.elements.arrow,Wr=kt&&Li?Rg(Li):{width:0,height:0},vf=d.modifiersData["arrow#persistent"]?d.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},sy=vf[ki],iy=vf[Ii],_f=Sh(0,ae[Ne],Wr[Ne]),g1=Vt?ae[Ne]/2-rs-_f-sy-je.mainAxis:be-_f-sy-je.mainAxis,m1=Vt?-ae[Ne]/2+rs+_f+iy+je.mainAxis:$s+_f+iy+je.mainAxis,Yg=d.elements.arrow&&Eh(d.elements.arrow),b1=Yg?ee==="y"?Yg.clientTop||0:Yg.clientLeft||0:0,ny=(Fs=oi==null?void 0:oi[ee])!=null?Fs:0,v1=bn+m1-ny,ry=Sh(kt?of(vn,bn+g1-ny-b1):vn,bn,kt?Jo(zl,v1):zl);Kt[ee]=ry,Gi[ee]=ry-bn}if(G){var oy,_1=ee==="x"?Os:Ns,y1=ee==="x"?ii:ni,oa=Kt[Ht],yf=Ht==="y"?"height":"width",ay=oa+Dt[_1],ly=oa-Dt[y1],Qg=[Os,Ns].indexOf(ue)!==-1,cy=(oy=oi==null?void 0:oi[Ht])!=null?oy:0,hy=Qg?ay:oa-ae[yf]-de[yf]-cy+je.altAxis,uy=Qg?oa+ae[yf]+de[yf]-cy-je.altAxis:ly,dy=kt&&Qg?function(w1,A1,Jg){var fy=Sh(w1,A1,Jg);return fy>Jg?Jg:fy}(hy,oa,uy):Sh(kt?hy:ay,oa,kt?uy:ly);Kt[Ht]=dy,Gi[Ht]=dy-oa}d.modifiersData[x]=Gi}},requiresIfExists:["offset"]};function $S(y,d,m){m===void 0&&(m=!1);var x,D,O=Pi(d),j=Pi(d)&&function(ct){var Bt=ct.getBoundingClientRect(),kt=$l(Bt.width)/ct.offsetWidth||1,Mt=$l(Bt.height)/ct.offsetHeight||1;return kt!==1||Mt!==1}(d),G=zr(d),nt=Bl(y,j,m),ft={scrollLeft:0,scrollTop:0},gt={x:0,y:0};return(O||!O&&!m)&&((gn(d)!=="body"||Og(G))&&(ft=(x=d)!==ri(x)&&Pi(x)?{scrollLeft:(D=x).scrollLeft,scrollTop:D.scrollTop}:Mg(x)),Pi(d)?((gt=Bl(d,!0)).x+=d.clientLeft,gt.y+=d.clientTop):G&&(gt.x=Dg(G))),{x:nt.left+ft.scrollLeft-gt.x,y:nt.top+ft.scrollTop-gt.y,width:nt.width,height:nt.height}}function BS(y){var d=new Map,m=new Set,x=[];function D(O){m.add(O.name),[].concat(O.requires||[],O.requiresIfExists||[]).forEach(function(j){if(!m.has(j)){var G=d.get(j);G&&D(G)}}),x.push(O)}return y.forEach(function(O){d.set(O.name,O)}),y.forEach(function(O){m.has(O.name)||D(O)}),x}var b_={placement:"bottom",modifiers:[],strategy:"absolute"};function v_(){for(var y=arguments.length,d=new Array(y),m=0;m<y;m++)d[m]=arguments[m];return!d.some(function(x){return!(x&&typeof x.getBoundingClientRect=="function")})}function hf(y){y===void 0&&(y={});var d=y,m=d.defaultModifiers,x=m===void 0?[]:m,D=d.defaultOptions,O=D===void 0?b_:D;return function(j,G,nt){nt===void 0&&(nt=O);var ft,gt,ct={placement:"bottom",orderedModifiers:[],options:Object.assign({},b_,O),modifiersData:{},elements:{reference:j,popper:G},attributes:{},styles:{}},Bt=[],kt=!1,Mt={state:ct,setOptions:function(Dt){var ue=typeof Dt=="function"?Dt(ct.options):Dt;It(),ct.options=Object.assign({},O,ct.options,ue),ct.scrollParents={reference:Qo(j)?xh(j):j.contextElement?xh(j.contextElement):[],popper:xh(G)};var ye,Vt,ee=function(Ht){var Kt=BS(Ht);return Zv.reduce(function(ae,de){return ae.concat(Kt.filter(function(le){return le.phase===de}))},[])}((ye=[].concat(x,ct.options.modifiers),Vt=ye.reduce(function(Ht,Kt){var ae=Ht[Kt.name];return Ht[Kt.name]=ae?Object.assign({},ae,Kt,{options:Object.assign({},ae.options,Kt.options),data:Object.assign({},ae.data,Kt.data)}):Kt,Ht},{}),Object.keys(Vt).map(function(Ht){return Vt[Ht]})));return ct.orderedModifiers=ee.filter(function(Ht){return Ht.enabled}),ct.orderedModifiers.forEach(function(Ht){var Kt=Ht.name,ae=Ht.options,de=ae===void 0?{}:ae,le=Ht.effect;if(typeof le=="function"){var je=le({state:ct,name:Kt,instance:Mt,options:de});Bt.push(je||function(){})}}),Mt.update()},forceUpdate:function(){if(!kt){var Dt=ct.elements,ue=Dt.reference,ye=Dt.popper;if(v_(ue,ye)){ct.rects={reference:$S(ue,Eh(ye),ct.options.strategy==="fixed"),popper:Rg(ye)},ct.reset=!1,ct.placement=ct.options.placement,ct.orderedModifiers.forEach(function(le){return ct.modifiersData[le.name]=Object.assign({},le.data)});for(var Vt=0;Vt<ct.orderedModifiers.length;Vt++)if(ct.reset!==!0){var ee=ct.orderedModifiers[Vt],Ht=ee.fn,Kt=ee.options,ae=Kt===void 0?{}:Kt,de=ee.name;typeof Ht=="function"&&(ct=Ht({state:ct,options:ae,name:de,instance:Mt})||ct)}else ct.reset=!1,Vt=-1}}},update:(ft=function(){return new Promise(function(Dt){Mt.forceUpdate(),Dt(ct)})},function(){return gt||(gt=new Promise(function(Dt){Promise.resolve().then(function(){gt=void 0,Dt(ft())})})),gt}),destroy:function(){It(),kt=!0}};if(!v_(j,G))return Mt;function It(){Bt.forEach(function(Dt){return Dt()}),Bt=[]}return Mt.setOptions(nt).then(function(Dt){!kt&&nt.onFirstUpdate&&nt.onFirstUpdate(Dt)}),Mt}}var HS=hf(),jS=hf({defaultModifiers:[Lg,Fg,Ig,Tg]}),$g=hf({defaultModifiers:[Lg,Fg,Ig,Tg,g_,u_,m_,r_,p_]});const __=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Kv,afterRead:Wv,afterWrite:Jv,applyStyles:Tg,arrow:r_,auto:rf,basePlacements:Ol,beforeMain:Gv,beforeRead:zv,beforeWrite:Yv,bottom:ii,clippingParents:Vv,computeStyles:Ig,createPopper:$g,createPopperBase:HS,createPopperLite:jS,detectOverflow:jl,end:Nl,eventListeners:Lg,flip:u_,hide:p_,left:Ns,main:Xv,modifierPhases:Zv,offset:g_,placements:xg,popper:Fl,popperGenerator:hf,popperOffsets:Fg,preventOverflow:m_,read:qv,reference:Uv,right:ni,start:Yo,top:Os,variationPlacements:Sg,viewport:Eg,write:Qv},Symbol.toStringTag,{value:"Module"})),y_="dropdown",Zo=".bs.dropdown",Bg=".data-api",VS="ArrowUp",w_="ArrowDown",US=`hide${Zo}`,zS=`hidden${Zo}`,qS=`show${Zo}`,WS=`shown${Zo}`,A_=`click${Zo}${Bg}`,E_=`keydown${Zo}${Bg}`,GS=`keyup${Zo}${Bg}`,Vl="show",ta='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',XS=`${ta}.${Vl}`,uf=".dropdown-menu",KS=E()?"top-end":"top-start",YS=E()?"top-start":"top-end",QS=E()?"bottom-end":"bottom-start",JS=E()?"bottom-start":"bottom-end",ZS=E()?"left-start":"right-start",tx=E()?"right-start":"left-start",ex={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},sx={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Wi extends Xt{constructor(d,m){super(d,m),this._popper=null,this._parent=this._element.parentNode,this._menu=V.next(this._element,uf)[0]||V.prev(this._element,uf)[0]||V.findOne(uf,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return ex}static get DefaultType(){return sx}static get NAME(){return y_}toggle(){return this._isShown()?this.hide():this.show()}show(){if(u(this._element)||this._isShown())return;const d={relatedTarget:this._element};if(!M.trigger(this._element,qS,d).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const m of[].concat(...document.body.children))M.on(m,"mouseover",p);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Vl),this._element.classList.add(Vl),M.trigger(this._element,WS,d)}}hide(){if(u(this._element)||!this._isShown())return;const d={relatedTarget:this._element};this._completeHide(d)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(d){if(!M.trigger(this._element,US,d).defaultPrevented){if("ontouchstart"in document.documentElement)for(const m of[].concat(...document.body.children))M.off(m,"mouseover",p);this._popper&&this._popper.destroy(),this._menu.classList.remove(Vl),this._element.classList.remove(Vl),this._element.setAttribute("aria-expanded","false"),xe.removeDataAttribute(this._menu,"popper"),M.trigger(this._element,zS,d),this._element.focus()}}_getConfig(d){if(typeof(d=super._getConfig(d)).reference=="object"&&!a(d.reference)&&typeof d.reference.getBoundingClientRect!="function")throw new TypeError(`${y_.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return d}_createPopper(){if(__===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let d=this._element;this._config.reference==="parent"?d=this._parent:a(this._config.reference)?d=c(this._config.reference):typeof this._config.reference=="object"&&(d=this._config.reference);const m=this._getPopperConfig();this._popper=$g(d,this._menu,m)}_isShown(){return this._menu.classList.contains(Vl)}_getPlacement(){const d=this._parent;if(d.classList.contains("dropend"))return ZS;if(d.classList.contains("dropstart"))return tx;if(d.classList.contains("dropup-center"))return"top";if(d.classList.contains("dropdown-center"))return"bottom";const m=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return d.classList.contains("dropup")?m?YS:KS:m?JS:QS}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:d}=this._config;return typeof d=="string"?d.split(",").map(m=>Number.parseInt(m,10)):typeof d=="function"?m=>d(m,this._element):d}_getPopperConfig(){const d={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(xe.setDataAttribute(this._menu,"popper","static"),d.modifiers=[{name:"applyStyles",enabled:!1}]),{...d,...C(this._config.popperConfig,[void 0,d])}}_selectMenuItem({key:d,target:m}){const x=V.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(D=>h(D));x.length&&R(x,m,d===w_,!x.includes(m)).focus()}static jQueryInterface(d){return this.each(function(){const m=Wi.getOrCreateInstance(this,d);if(typeof d=="string"){if(m[d]===void 0)throw new TypeError(`No method named "${d}"`);m[d]()}})}static clearMenus(d){if(d.button===2||d.type==="keyup"&&d.key!=="Tab")return;const m=V.find(XS);for(const x of m){const D=Wi.getInstance(x);if(!D||D._config.autoClose===!1)continue;const O=d.composedPath(),j=O.includes(D._menu);if(O.includes(D._element)||D._config.autoClose==="inside"&&!j||D._config.autoClose==="outside"&&j||D._menu.contains(d.target)&&(d.type==="keyup"&&d.key==="Tab"||/input|select|option|textarea|form/i.test(d.target.tagName)))continue;const G={relatedTarget:D._element};d.type==="click"&&(G.clickEvent=d),D._completeHide(G)}}static dataApiKeydownHandler(d){const m=/input|textarea/i.test(d.target.tagName),x=d.key==="Escape",D=[VS,w_].includes(d.key);if(!D&&!x||m&&!x)return;d.preventDefault();const O=this.matches(ta)?this:V.prev(this,ta)[0]||V.next(this,ta)[0]||V.findOne(ta,d.delegateTarget.parentNode),j=Wi.getOrCreateInstance(O);if(D)return d.stopPropagation(),j.show(),void j._selectMenuItem(d);j._isShown()&&(d.stopPropagation(),j.hide(),O.focus())}}M.on(document,E_,ta,Wi.dataApiKeydownHandler),M.on(document,E_,uf,Wi.dataApiKeydownHandler),M.on(document,A_,Wi.clearMenus),M.on(document,GS,Wi.clearMenus),M.on(document,A_,ta,function(y){y.preventDefault(),Wi.getOrCreateInstance(this).toggle()}),S(Wi);const S_="backdrop",x_="show",C_=`mousedown.bs.${S_}`,ix={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},nx={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class T_ extends Be{constructor(d){super(),this._config=this._getConfig(d),this._isAppended=!1,this._element=null}static get Default(){return ix}static get DefaultType(){return nx}static get NAME(){return S_}show(d){if(!this._config.isVisible)return void C(d);this._append();const m=this._getElement();this._config.isAnimated&&g(m),m.classList.add(x_),this._emulateAnimation(()=>{C(d)})}hide(d){this._config.isVisible?(this._getElement().classList.remove(x_),this._emulateAnimation(()=>{this.dispose(),C(d)})):C(d)}dispose(){this._isAppended&&(M.off(this._element,C_),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const d=document.createElement("div");d.className=this._config.className,this._config.isAnimated&&d.classList.add("fade"),this._element=d}return this._element}_configAfterMerge(d){return d.rootElement=c(d.rootElement),d}_append(){if(this._isAppended)return;const d=this._getElement();this._config.rootElement.append(d),M.on(d,C_,()=>{C(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(d){T(d,this._getElement(),this._config.isAnimated)}}const df=".bs.focustrap",rx=`focusin${df}`,ox=`keydown.tab${df}`,P_="backward",ax={autofocus:!0,trapElement:null},lx={autofocus:"boolean",trapElement:"element"};class R_ extends Be{constructor(d){super(),this._config=this._getConfig(d),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return ax}static get DefaultType(){return lx}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),M.off(document,df),M.on(document,rx,d=>this._handleFocusin(d)),M.on(document,ox,d=>this._handleKeydown(d)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,M.off(document,df))}_handleFocusin(d){const{trapElement:m}=this._config;if(d.target===document||d.target===m||m.contains(d.target))return;const x=V.focusableChildren(m);x.length===0?m.focus():this._lastTabNavDirection===P_?x[x.length-1].focus():x[0].focus()}_handleKeydown(d){d.key==="Tab"&&(this._lastTabNavDirection=d.shiftKey?P_:"forward")}}const k_=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",I_=".sticky-top",ff="padding-right",L_="margin-right";class Hg{constructor(){this._element=document.body}getWidth(){const d=document.documentElement.clientWidth;return Math.abs(window.innerWidth-d)}hide(){const d=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,ff,m=>m+d),this._setElementAttributes(k_,ff,m=>m+d),this._setElementAttributes(I_,L_,m=>m-d)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,ff),this._resetElementAttributes(k_,ff),this._resetElementAttributes(I_,L_)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(d,m,x){const D=this.getWidth();this._applyManipulationCallback(d,O=>{if(O!==this._element&&window.innerWidth>O.clientWidth+D)return;this._saveInitialAttribute(O,m);const j=window.getComputedStyle(O).getPropertyValue(m);O.style.setProperty(m,`${x(Number.parseFloat(j))}px`)})}_saveInitialAttribute(d,m){const x=d.style.getPropertyValue(m);x&&xe.setDataAttribute(d,m,x)}_resetElementAttributes(d,m){this._applyManipulationCallback(d,x=>{const D=xe.getDataAttribute(x,m);D!==null?(xe.removeDataAttribute(x,m),x.style.setProperty(m,D)):x.style.removeProperty(m)})}_applyManipulationCallback(d,m){if(a(d))m(d);else for(const x of V.find(d,this._element))m(x)}}const Ri=".bs.modal",cx=`hide${Ri}`,hx=`hidePrevented${Ri}`,M_=`hidden${Ri}`,D_=`show${Ri}`,ux=`shown${Ri}`,dx=`resize${Ri}`,fx=`click.dismiss${Ri}`,px=`mousedown.dismiss${Ri}`,gx=`keydown.dismiss${Ri}`,mx=`click${Ri}.data-api`,O_="modal-open",N_="show",jg="modal-static",bx={backdrop:!0,focus:!0,keyboard:!0},vx={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class ea extends Xt{constructor(d,m){super(d,m),this._dialog=V.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Hg,this._addEventListeners()}static get Default(){return bx}static get DefaultType(){return vx}static get NAME(){return"modal"}toggle(d){return this._isShown?this.hide():this.show(d)}show(d){this._isShown||this._isTransitioning||M.trigger(this._element,D_,{relatedTarget:d}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(O_),this._adjustDialog(),this._backdrop.show(()=>this._showElement(d)))}hide(){this._isShown&&!this._isTransitioning&&(M.trigger(this._element,cx).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(N_),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){M.off(window,Ri),M.off(this._dialog,Ri),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new T_({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new R_({trapElement:this._element})}_showElement(d){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const m=V.findOne(".modal-body",this._dialog);m&&(m.scrollTop=0),g(this._element),this._element.classList.add(N_),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,M.trigger(this._element,ux,{relatedTarget:d})},this._dialog,this._isAnimated())}_addEventListeners(){M.on(this._element,gx,d=>{d.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),M.on(window,dx,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),M.on(this._element,px,d=>{M.one(this._element,fx,m=>{this._element===d.target&&this._element===m.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(O_),this._resetAdjustments(),this._scrollBar.reset(),M.trigger(this._element,M_)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(M.trigger(this._element,hx).defaultPrevented)return;const d=this._element.scrollHeight>document.documentElement.clientHeight,m=this._element.style.overflowY;m==="hidden"||this._element.classList.contains(jg)||(d||(this._element.style.overflowY="hidden"),this._element.classList.add(jg),this._queueCallback(()=>{this._element.classList.remove(jg),this._queueCallback(()=>{this._element.style.overflowY=m},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const d=this._element.scrollHeight>document.documentElement.clientHeight,m=this._scrollBar.getWidth(),x=m>0;if(x&&!d){const D=E()?"paddingLeft":"paddingRight";this._element.style[D]=`${m}px`}if(!x&&d){const D=E()?"paddingRight":"paddingLeft";this._element.style[D]=`${m}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(d,m){return this.each(function(){const x=ea.getOrCreateInstance(this,d);if(typeof d=="string"){if(x[d]===void 0)throw new TypeError(`No method named "${d}"`);x[d](m)}})}}M.on(document,mx,'[data-bs-toggle="modal"]',function(y){const d=V.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&y.preventDefault(),M.one(d,D_,x=>{x.defaultPrevented||M.one(d,M_,()=>{h(this)&&this.focus()})});const m=V.findOne(".modal.show");m&&ea.getInstance(m).hide(),ea.getOrCreateInstance(d).toggle(this)}),st(ea),S(ea);const Kn=".bs.offcanvas",F_=".data-api",_x=`load${Kn}${F_}`,$_="show",B_="showing",H_="hiding",j_=".offcanvas.show",yx=`show${Kn}`,wx=`shown${Kn}`,Ax=`hide${Kn}`,V_=`hidePrevented${Kn}`,U_=`hidden${Kn}`,Ex=`resize${Kn}`,Sx=`click${Kn}${F_}`,xx=`keydown.dismiss${Kn}`,Cx={backdrop:!0,keyboard:!0,scroll:!1},Tx={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Yn extends Xt{constructor(d,m){super(d,m),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Cx}static get DefaultType(){return Tx}static get NAME(){return"offcanvas"}toggle(d){return this._isShown?this.hide():this.show(d)}show(d){this._isShown||M.trigger(this._element,yx,{relatedTarget:d}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new Hg().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(B_),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add($_),this._element.classList.remove(B_),M.trigger(this._element,wx,{relatedTarget:d})},this._element,!0))}hide(){this._isShown&&(M.trigger(this._element,Ax).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(H_),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove($_,H_),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Hg().reset(),M.trigger(this._element,U_)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const d=!!this._config.backdrop;return new T_({className:"offcanvas-backdrop",isVisible:d,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:d?()=>{this._config.backdrop!=="static"?this.hide():M.trigger(this._element,V_)}:null})}_initializeFocusTrap(){return new R_({trapElement:this._element})}_addEventListeners(){M.on(this._element,xx,d=>{d.key==="Escape"&&(this._config.keyboard?this.hide():M.trigger(this._element,V_))})}static jQueryInterface(d){return this.each(function(){const m=Yn.getOrCreateInstance(this,d);if(typeof d=="string"){if(m[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);m[d](this)}})}}M.on(document,Sx,'[data-bs-toggle="offcanvas"]',function(y){const d=V.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&y.preventDefault(),u(this))return;M.one(d,U_,()=>{h(this)&&this.focus()});const m=V.findOne(j_);m&&m!==d&&Yn.getInstance(m).hide(),Yn.getOrCreateInstance(d).toggle(this)}),M.on(window,_x,()=>{for(const y of V.find(j_))Yn.getOrCreateInstance(y).show()}),M.on(window,Ex,()=>{for(const y of V.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(y).position!=="fixed"&&Yn.getOrCreateInstance(y).hide()}),st(Yn),S(Yn);const z_={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Px=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Rx=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,kx=(y,d)=>{const m=y.nodeName.toLowerCase();return d.includes(m)?!Px.has(m)||!!Rx.test(y.nodeValue):d.filter(x=>x instanceof RegExp).some(x=>x.test(m))},Ix={allowList:z_,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Lx={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Mx={entry:"(string|element|function|null)",selector:"(string|element)"};class Dx extends Be{constructor(d){super(),this._config=this._getConfig(d)}static get Default(){return Ix}static get DefaultType(){return Lx}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(d=>this._resolvePossibleFunction(d)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(d){return this._checkContent(d),this._config.content={...this._config.content,...d},this}toHtml(){const d=document.createElement("div");d.innerHTML=this._maybeSanitize(this._config.template);for(const[D,O]of Object.entries(this._config.content))this._setContent(d,O,D);const m=d.children[0],x=this._resolvePossibleFunction(this._config.extraClass);return x&&m.classList.add(...x.split(" ")),m}_typeCheckConfig(d){super._typeCheckConfig(d),this._checkContent(d.content)}_checkContent(d){for(const[m,x]of Object.entries(d))super._typeCheckConfig({selector:m,entry:x},Mx)}_setContent(d,m,x){const D=V.findOne(x,d);D&&((m=this._resolvePossibleFunction(m))?a(m)?this._putElementInTemplate(c(m),D):this._config.html?D.innerHTML=this._maybeSanitize(m):D.textContent=m:D.remove())}_maybeSanitize(d){return this._config.sanitize?function(m,x,D){if(!m.length)return m;if(D&&typeof D=="function")return D(m);const O=new window.DOMParser().parseFromString(m,"text/html"),j=[].concat(...O.body.querySelectorAll("*"));for(const G of j){const nt=G.nodeName.toLowerCase();if(!Object.keys(x).includes(nt)){G.remove();continue}const ft=[].concat(...G.attributes),gt=[].concat(x["*"]||[],x[nt]||[]);for(const ct of ft)kx(ct,gt)||G.removeAttribute(ct.nodeName)}return O.body.innerHTML}(d,this._config.allowList,this._config.sanitizeFn):d}_resolvePossibleFunction(d){return C(d,[void 0,this])}_putElementInTemplate(d,m){if(this._config.html)return m.innerHTML="",void m.append(d);m.textContent=d.textContent}}const Ox=new Set(["sanitize","allowList","sanitizeFn"]),Vg="fade",pf="show",Nx=".tooltip-inner",q_=".modal",W_="hide.bs.modal",Ch="hover",Ug="focus",Fx={AUTO:"auto",TOP:"top",RIGHT:E()?"left":"right",BOTTOM:"bottom",LEFT:E()?"right":"left"},$x={allowList:z_,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Bx={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class sa extends Xt{constructor(d,m){if(__===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(d,m),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return $x}static get DefaultType(){return Bx}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),M.off(this._element.closest(q_),W_,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const d=M.trigger(this._element,this.constructor.eventName("show")),m=(f(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(d.defaultPrevented||!m)return;this._disposePopper();const x=this._getTipElement();this._element.setAttribute("aria-describedby",x.getAttribute("id"));const{container:D}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(D.append(x),M.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(x),x.classList.add(pf),"ontouchstart"in document.documentElement)for(const O of[].concat(...document.body.children))M.on(O,"mouseover",p);this._queueCallback(()=>{M.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!M.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(pf),"ontouchstart"in document.documentElement)for(const d of[].concat(...document.body.children))M.off(d,"mouseover",p);this._activeTrigger.click=!1,this._activeTrigger[Ug]=!1,this._activeTrigger[Ch]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),M.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(d){const m=this._getTemplateFactory(d).toHtml();if(!m)return null;m.classList.remove(Vg,pf),m.classList.add(`bs-${this.constructor.NAME}-auto`);const x=(D=>{do D+=Math.floor(1e6*Math.random());while(document.getElementById(D));return D})(this.constructor.NAME).toString();return m.setAttribute("id",x),this._isAnimated()&&m.classList.add(Vg),m}setContent(d){this._newContent=d,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(d){return this._templateFactory?this._templateFactory.changeContent(d):this._templateFactory=new Dx({...this._config,content:d,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Nx]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(d){return this.constructor.getOrCreateInstance(d.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Vg)}_isShown(){return this.tip&&this.tip.classList.contains(pf)}_createPopper(d){const m=C(this._config.placement,[this,d,this._element]),x=Fx[m.toUpperCase()];return $g(this._element,d,this._getPopperConfig(x))}_getOffset(){const{offset:d}=this._config;return typeof d=="string"?d.split(",").map(m=>Number.parseInt(m,10)):typeof d=="function"?m=>d(m,this._element):d}_resolvePossibleFunction(d){return C(d,[this._element,this._element])}_getPopperConfig(d){const m={placement:d,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:x=>{this._getTipElement().setAttribute("data-popper-placement",x.state.placement)}}]};return{...m,...C(this._config.popperConfig,[void 0,m])}}_setListeners(){const d=this._config.trigger.split(" ");for(const m of d)if(m==="click")M.on(this._element,this.constructor.eventName("click"),this._config.selector,x=>{this._initializeOnDelegatedTarget(x).toggle()});else if(m!=="manual"){const x=m===Ch?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),D=m===Ch?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");M.on(this._element,x,this._config.selector,O=>{const j=this._initializeOnDelegatedTarget(O);j._activeTrigger[O.type==="focusin"?Ug:Ch]=!0,j._enter()}),M.on(this._element,D,this._config.selector,O=>{const j=this._initializeOnDelegatedTarget(O);j._activeTrigger[O.type==="focusout"?Ug:Ch]=j._element.contains(O.relatedTarget),j._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},M.on(this._element.closest(q_),W_,this._hideModalHandler)}_fixTitle(){const d=this._element.getAttribute("title");d&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",d),this._element.setAttribute("data-bs-original-title",d),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(d,m){clearTimeout(this._timeout),this._timeout=setTimeout(d,m)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(d){const m=xe.getDataAttributes(this._element);for(const x of Object.keys(m))Ox.has(x)&&delete m[x];return d={...m,...typeof d=="object"&&d?d:{}},d=this._mergeConfigObj(d),d=this._configAfterMerge(d),this._typeCheckConfig(d),d}_configAfterMerge(d){return d.container=d.container===!1?document.body:c(d.container),typeof d.delay=="number"&&(d.delay={show:d.delay,hide:d.delay}),typeof d.title=="number"&&(d.title=d.title.toString()),typeof d.content=="number"&&(d.content=d.content.toString()),d}_getDelegateConfig(){const d={};for(const[m,x]of Object.entries(this._config))this.constructor.Default[m]!==x&&(d[m]=x);return d.selector=!1,d.trigger="manual",d}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(d){return this.each(function(){const m=sa.getOrCreateInstance(this,d);if(typeof d=="string"){if(m[d]===void 0)throw new TypeError(`No method named "${d}"`);m[d]()}})}}S(sa);const Hx=".popover-header",jx=".popover-body",Vx={...sa.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Ux={...sa.DefaultType,content:"(null|string|element|function)"};class gf extends sa{static get Default(){return Vx}static get DefaultType(){return Ux}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Hx]:this._getTitle(),[jx]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(d){return this.each(function(){const m=gf.getOrCreateInstance(this,d);if(typeof d=="string"){if(m[d]===void 0)throw new TypeError(`No method named "${d}"`);m[d]()}})}}S(gf);const zg=".bs.scrollspy",zx=`activate${zg}`,G_=`click${zg}`,qx=`load${zg}.data-api`,Ul="active",qg="[href]",X_=".nav-link",Wx=`${X_}, .nav-item > ${X_}, .list-group-item`,Gx={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Xx={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Th extends Xt{constructor(d,m){super(d,m),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Gx}static get DefaultType(){return Xx}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const d of this._observableSections.values())this._observer.observe(d)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(d){return d.target=c(d.target)||document.body,d.rootMargin=d.offset?`${d.offset}px 0px -30%`:d.rootMargin,typeof d.threshold=="string"&&(d.threshold=d.threshold.split(",").map(m=>Number.parseFloat(m))),d}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(M.off(this._config.target,G_),M.on(this._config.target,G_,qg,d=>{const m=this._observableSections.get(d.target.hash);if(m){d.preventDefault();const x=this._rootElement||window,D=m.offsetTop-this._element.offsetTop;if(x.scrollTo)return void x.scrollTo({top:D,behavior:"smooth"});x.scrollTop=D}}))}_getNewObserver(){const d={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(m=>this._observerCallback(m),d)}_observerCallback(d){const m=j=>this._targetLinks.get(`#${j.target.id}`),x=j=>{this._previousScrollData.visibleEntryTop=j.target.offsetTop,this._process(m(j))},D=(this._rootElement||document.documentElement).scrollTop,O=D>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=D;for(const j of d){if(!j.isIntersecting){this._activeTarget=null,this._clearActiveClass(m(j));continue}const G=j.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(O&&G){if(x(j),!D)return}else O||G||x(j)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const d=V.find(qg,this._config.target);for(const m of d){if(!m.hash||u(m))continue;const x=V.findOne(decodeURI(m.hash),this._element);h(x)&&(this._targetLinks.set(decodeURI(m.hash),m),this._observableSections.set(m.hash,x))}}_process(d){this._activeTarget!==d&&(this._clearActiveClass(this._config.target),this._activeTarget=d,d.classList.add(Ul),this._activateParents(d),M.trigger(this._element,zx,{relatedTarget:d}))}_activateParents(d){if(d.classList.contains("dropdown-item"))V.findOne(".dropdown-toggle",d.closest(".dropdown")).classList.add(Ul);else for(const m of V.parents(d,".nav, .list-group"))for(const x of V.prev(m,Wx))x.classList.add(Ul)}_clearActiveClass(d){d.classList.remove(Ul);const m=V.find(`${qg}.${Ul}`,d);for(const x of m)x.classList.remove(Ul)}static jQueryInterface(d){return this.each(function(){const m=Th.getOrCreateInstance(this,d);if(typeof d=="string"){if(m[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);m[d]()}})}}M.on(window,qx,()=>{for(const y of V.find('[data-bs-spy="scroll"]'))Th.getOrCreateInstance(y)}),S(Th);const ia=".bs.tab",Kx=`hide${ia}`,Yx=`hidden${ia}`,Qx=`show${ia}`,Jx=`shown${ia}`,Zx=`click${ia}`,t1=`keydown${ia}`,e1=`load${ia}`,s1="ArrowLeft",K_="ArrowRight",i1="ArrowUp",Y_="ArrowDown",Wg="Home",Q_="End",na="active",J_="fade",Gg="show",Z_=".dropdown-toggle",Xg=`:not(${Z_})`,ty='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Kg=`.nav-link${Xg}, .list-group-item${Xg}, [role="tab"]${Xg}, ${ty}`,n1=`.${na}[data-bs-toggle="tab"], .${na}[data-bs-toggle="pill"], .${na}[data-bs-toggle="list"]`;class ra extends Xt{constructor(d){super(d),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),M.on(this._element,t1,m=>this._keydown(m)))}static get NAME(){return"tab"}show(){const d=this._element;if(this._elemIsActive(d))return;const m=this._getActiveElem(),x=m?M.trigger(m,Kx,{relatedTarget:d}):null;M.trigger(d,Qx,{relatedTarget:m}).defaultPrevented||x&&x.defaultPrevented||(this._deactivate(m,d),this._activate(d,m))}_activate(d,m){d&&(d.classList.add(na),this._activate(V.getElementFromSelector(d)),this._queueCallback(()=>{d.getAttribute("role")==="tab"?(d.removeAttribute("tabindex"),d.setAttribute("aria-selected",!0),this._toggleDropDown(d,!0),M.trigger(d,Jx,{relatedTarget:m})):d.classList.add(Gg)},d,d.classList.contains(J_)))}_deactivate(d,m){d&&(d.classList.remove(na),d.blur(),this._deactivate(V.getElementFromSelector(d)),this._queueCallback(()=>{d.getAttribute("role")==="tab"?(d.setAttribute("aria-selected",!1),d.setAttribute("tabindex","-1"),this._toggleDropDown(d,!1),M.trigger(d,Yx,{relatedTarget:m})):d.classList.remove(Gg)},d,d.classList.contains(J_)))}_keydown(d){if(![s1,K_,i1,Y_,Wg,Q_].includes(d.key))return;d.stopPropagation(),d.preventDefault();const m=this._getChildren().filter(D=>!u(D));let x;if([Wg,Q_].includes(d.key))x=m[d.key===Wg?0:m.length-1];else{const D=[K_,Y_].includes(d.key);x=R(m,d.target,D,!0)}x&&(x.focus({preventScroll:!0}),ra.getOrCreateInstance(x).show())}_getChildren(){return V.find(Kg,this._parent)}_getActiveElem(){return this._getChildren().find(d=>this._elemIsActive(d))||null}_setInitialAttributes(d,m){this._setAttributeIfNotExists(d,"role","tablist");for(const x of m)this._setInitialAttributesOnChild(x)}_setInitialAttributesOnChild(d){d=this._getInnerElement(d);const m=this._elemIsActive(d),x=this._getOuterElement(d);d.setAttribute("aria-selected",m),x!==d&&this._setAttributeIfNotExists(x,"role","presentation"),m||d.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(d,"role","tab"),this._setInitialAttributesOnTargetPanel(d)}_setInitialAttributesOnTargetPanel(d){const m=V.getElementFromSelector(d);m&&(this._setAttributeIfNotExists(m,"role","tabpanel"),d.id&&this._setAttributeIfNotExists(m,"aria-labelledby",`${d.id}`))}_toggleDropDown(d,m){const x=this._getOuterElement(d);if(!x.classList.contains("dropdown"))return;const D=(O,j)=>{const G=V.findOne(O,x);G&&G.classList.toggle(j,m)};D(Z_,na),D(".dropdown-menu",Gg),x.setAttribute("aria-expanded",m)}_setAttributeIfNotExists(d,m,x){d.hasAttribute(m)||d.setAttribute(m,x)}_elemIsActive(d){return d.classList.contains(na)}_getInnerElement(d){return d.matches(Kg)?d:V.findOne(Kg,d)}_getOuterElement(d){return d.closest(".nav-item, .list-group-item")||d}static jQueryInterface(d){return this.each(function(){const m=ra.getOrCreateInstance(this);if(typeof d=="string"){if(m[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);m[d]()}})}}M.on(document,Zx,ty,function(y){["A","AREA"].includes(this.tagName)&&y.preventDefault(),u(this)||ra.getOrCreateInstance(this).show()}),M.on(window,e1,()=>{for(const y of V.find(n1))ra.getOrCreateInstance(y)}),S(ra);const qr=".bs.toast",r1=`mouseover${qr}`,o1=`mouseout${qr}`,a1=`focusin${qr}`,l1=`focusout${qr}`,c1=`hide${qr}`,h1=`hidden${qr}`,u1=`show${qr}`,d1=`shown${qr}`,ey="hide",mf="show",bf="showing",f1={animation:"boolean",autohide:"boolean",delay:"number"},p1={animation:!0,autohide:!0,delay:5e3};class Ph extends Xt{constructor(d,m){super(d,m),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return p1}static get DefaultType(){return f1}static get NAME(){return"toast"}show(){M.trigger(this._element,u1).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(ey),g(this._element),this._element.classList.add(mf,bf),this._queueCallback(()=>{this._element.classList.remove(bf),M.trigger(this._element,d1),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(M.trigger(this._element,c1).defaultPrevented||(this._element.classList.add(bf),this._queueCallback(()=>{this._element.classList.add(ey),this._element.classList.remove(bf,mf),M.trigger(this._element,h1)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(mf),super.dispose()}isShown(){return this._element.classList.contains(mf)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(d,m){switch(d.type){case"mouseover":case"mouseout":this._hasMouseInteraction=m;break;case"focusin":case"focusout":this._hasKeyboardInteraction=m}if(m)return void this._clearTimeout();const x=d.relatedTarget;this._element===x||this._element.contains(x)||this._maybeScheduleHide()}_setListeners(){M.on(this._element,r1,d=>this._onInteraction(d,!0)),M.on(this._element,o1,d=>this._onInteraction(d,!1)),M.on(this._element,a1,d=>this._onInteraction(d,!0)),M.on(this._element,l1,d=>this._onInteraction(d,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(d){return this.each(function(){const m=Ph.getOrCreateInstance(this,d);if(typeof d=="string"){if(m[d]===void 0)throw new TypeError(`No method named "${d}"`);m[d](this)}})}}return st(Ph),S(Ph),{Alert:k,Button:z,Carousel:Ll,Collapse:Dl,Dropdown:Wi,Modal:ea,Offcanvas:Yn,Popover:gf,ScrollSpy:Th,Tab:ra,Toast:Ph,Tooltip:sa}})}(If)),If.exports}C1();/**
* @vue/shared v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function tv(i){const t=Object.create(null);for(const e of i.split(","))t[e]=1;return e=>e in t}const ve={},oc=[],Un=()=>{},T1=()=>!1,tg=i=>i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&(i.charCodeAt(2)>122||i.charCodeAt(2)<97),ev=i=>i.startsWith("onUpdate:"),Ls=Object.assign,sv=(i,t)=>{const e=i.indexOf(t);e>-1&&i.splice(e,1)},P1=Object.prototype.hasOwnProperty,ne=(i,t)=>P1.call(i,t),Tt=Array.isArray,ac=i=>Ud(i)==="[object Map]",eg=i=>Ud(i)==="[object Set]",my=i=>Ud(i)==="[object Date]",Nt=i=>typeof i=="function",Qe=i=>typeof i=="string",zn=i=>typeof i=="symbol",_e=i=>i!==null&&typeof i=="object",Nw=i=>(_e(i)||Nt(i))&&Nt(i.then)&&Nt(i.catch),Fw=Object.prototype.toString,Ud=i=>Fw.call(i),R1=i=>Ud(i).slice(8,-1),$w=i=>Ud(i)==="[object Object]",iv=i=>Qe(i)&&i!=="NaN"&&i[0]!=="-"&&""+parseInt(i,10)===i,eu=tv(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),sg=i=>{const t=Object.create(null);return e=>t[e]||(t[e]=i(e))},k1=/-(\w)/g,qi=sg(i=>i.replace(k1,(t,e)=>e?e.toUpperCase():"")),I1=/\B([A-Z])/g,Xo=sg(i=>i.replace(I1,"-$1").toLowerCase()),ig=sg(i=>i.charAt(0).toUpperCase()+i.slice(1)),tm=sg(i=>i?`on${ig(i)}`:""),Fo=(i,t)=>!Object.is(i,t),Lf=(i,...t)=>{for(let e=0;e<i.length;e++)i[e](...t)},Bw=(i,t,e,s=!1)=>{Object.defineProperty(i,t,{configurable:!0,enumerable:!1,writable:s,value:e})},wm=i=>{const t=parseFloat(i);return isNaN(t)?i:t};let by;const ng=()=>by||(by=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function rg(i){if(Tt(i)){const t={};for(let e=0;e<i.length;e++){const s=i[e],n=Qe(s)?O1(s):rg(s);if(n)for(const r in n)t[r]=n[r]}return t}else if(Qe(i)||_e(i))return i}const L1=/;(?![^(]*\))/g,M1=/:([^]+)/,D1=/\/\*[^]*?\*\//g;function O1(i){const t={};return i.replace(D1,"").split(L1).forEach(e=>{if(e){const s=e.split(M1);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function Ho(i){let t="";if(Qe(i))t=i;else if(Tt(i))for(let e=0;e<i.length;e++){const s=Ho(i[e]);s&&(t+=s+" ")}else if(_e(i))for(const e in i)i[e]&&(t+=e+" ");return t.trim()}const N1="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",F1=tv(N1);function Hw(i){return!!i||i===""}function $1(i,t){if(i.length!==t.length)return!1;let e=!0;for(let s=0;e&&s<i.length;s++)e=og(i[s],t[s]);return e}function og(i,t){if(i===t)return!0;let e=my(i),s=my(t);if(e||s)return e&&s?i.getTime()===t.getTime():!1;if(e=zn(i),s=zn(t),e||s)return i===t;if(e=Tt(i),s=Tt(t),e||s)return e&&s?$1(i,t):!1;if(e=_e(i),s=_e(t),e||s){if(!e||!s)return!1;const n=Object.keys(i).length,r=Object.keys(t).length;if(n!==r)return!1;for(const o in i){const a=i.hasOwnProperty(o),c=t.hasOwnProperty(o);if(a&&!c||!a&&c||!og(i[o],t[o]))return!1}}return String(i)===String(t)}function jw(i,t){return i.findIndex(e=>og(e,t))}const Vw=i=>!!(i&&i.__v_isRef===!0),Re=i=>Qe(i)?i:i==null?"":Tt(i)||_e(i)&&(i.toString===Fw||!Nt(i.toString))?Vw(i)?Re(i.value):JSON.stringify(i,Uw,2):String(i),Uw=(i,t)=>Vw(t)?Uw(i,t.value):ac(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[s,n],r)=>(e[em(s,r)+" =>"]=n,e),{})}:eg(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>em(e))}:zn(t)?em(t):_e(t)&&!Tt(t)&&!$w(t)?String(t):t,em=(i,t="")=>{var e;return zn(i)?`Symbol(${(e=i.description)!=null?e:t})`:i};/**
* @vue/reactivity v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ks;class zw{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ks,!t&&ks&&(this.index=(ks.scopes||(ks.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].pause();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].resume();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].resume()}}run(t){if(this._active){const e=ks;try{return ks=this,t()}finally{ks=e}}}on(){++this._on===1&&(this.prevScope=ks,ks=this)}off(){this._on>0&&--this._on===0&&(ks=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let e,s;for(e=0,s=this.effects.length;e<s;e++)this.effects[e].stop();for(this.effects.length=0,e=0,s=this.cleanups.length;e<s;e++)this.cleanups[e]();if(this.cleanups.length=0,this.scopes){for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function qw(i){return new zw(i)}function Ww(){return ks}function B1(i,t=!1){ks&&ks.cleanups.push(i)}let Ae;const sm=new WeakSet;class Gw{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ks&&ks.active&&ks.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,sm.has(this)&&(sm.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Kw(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,vy(this),Yw(this);const t=Ae,e=hn;Ae=this,hn=!0;try{return this.fn()}finally{Qw(this),Ae=t,hn=e,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)ov(t);this.deps=this.depsTail=void 0,vy(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?sm.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Am(this)&&this.run()}get dirty(){return Am(this)}}let Xw=0,su,iu;function Kw(i,t=!1){if(i.flags|=8,t){i.next=iu,iu=i;return}i.next=su,su=i}function nv(){Xw++}function rv(){if(--Xw>0)return;if(iu){let t=iu;for(iu=void 0;t;){const e=t.next;t.next=void 0,t.flags&=-9,t=e}}let i;for(;su;){let t=su;for(su=void 0;t;){const e=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){i||(i=s)}t=e}}if(i)throw i}function Yw(i){for(let t=i.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Qw(i){let t,e=i.depsTail,s=e;for(;s;){const n=s.prevDep;s.version===-1?(s===e&&(e=n),ov(s),H1(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=n}i.deps=t,i.depsTail=e}function Am(i){for(let t=i.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Jw(t.dep.computed)||t.dep.version!==t.version))return!0;return!!i._dirty}function Jw(i){if(i.flags&4&&!(i.flags&16)||(i.flags&=-17,i.globalVersion===hu)||(i.globalVersion=hu,!i.isSSR&&i.flags&128&&(!i.deps&&!i._dirty||!Am(i))))return;i.flags|=2;const t=i.dep,e=Ae,s=hn;Ae=i,hn=!0;try{Yw(i);const n=i.fn(i._value);(t.version===0||Fo(n,i._value))&&(i.flags|=128,i._value=n,t.version++)}catch(n){throw t.version++,n}finally{Ae=e,hn=s,Qw(i),i.flags&=-3}}function ov(i,t=!1){const{dep:e,prevSub:s,nextSub:n}=i;if(s&&(s.nextSub=n,i.prevSub=void 0),n&&(n.prevSub=s,i.nextSub=void 0),e.subs===i&&(e.subs=s,!s&&e.computed)){e.computed.flags&=-5;for(let r=e.computed.deps;r;r=r.nextDep)ov(r,!0)}!t&&!--e.sc&&e.map&&e.map.delete(e.key)}function H1(i){const{prevDep:t,nextDep:e}=i;t&&(t.nextDep=e,i.prevDep=void 0),e&&(e.prevDep=t,i.nextDep=void 0)}let hn=!0;const Zw=[];function Br(){Zw.push(hn),hn=!1}function Hr(){const i=Zw.pop();hn=i===void 0?!0:i}function vy(i){const{cleanup:t}=i;if(i.cleanup=void 0,t){const e=Ae;Ae=void 0;try{t()}finally{Ae=e}}}let hu=0;class j1{constructor(t,e){this.sub=t,this.dep=e,this.version=e.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class av{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!Ae||!hn||Ae===this.computed)return;let e=this.activeLink;if(e===void 0||e.sub!==Ae)e=this.activeLink=new j1(Ae,this),Ae.deps?(e.prevDep=Ae.depsTail,Ae.depsTail.nextDep=e,Ae.depsTail=e):Ae.deps=Ae.depsTail=e,tA(e);else if(e.version===-1&&(e.version=this.version,e.nextDep)){const s=e.nextDep;s.prevDep=e.prevDep,e.prevDep&&(e.prevDep.nextDep=s),e.prevDep=Ae.depsTail,e.nextDep=void 0,Ae.depsTail.nextDep=e,Ae.depsTail=e,Ae.deps===e&&(Ae.deps=s)}return e}trigger(t){this.version++,hu++,this.notify(t)}notify(t){nv();try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{rv()}}}function tA(i){if(i.dep.sc++,i.sub.flags&4){const t=i.dep.computed;if(t&&!i.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)tA(s)}const e=i.dep.subs;e!==i&&(i.prevSub=e,e&&(e.nextSub=i)),i.dep.subs=i}}const gp=new WeakMap,wl=Symbol(""),Em=Symbol(""),uu=Symbol("");function Is(i,t,e){if(hn&&Ae){let s=gp.get(i);s||gp.set(i,s=new Map);let n=s.get(e);n||(s.set(e,n=new av),n.map=s,n.key=e),n.track()}}function Mr(i,t,e,s,n,r){const o=gp.get(i);if(!o){hu++;return}const a=c=>{c&&c.trigger()};if(nv(),t==="clear")o.forEach(a);else{const c=Tt(i),h=c&&iv(e);if(c&&e==="length"){const u=Number(s);o.forEach((f,p)=>{(p==="length"||p===uu||!zn(p)&&p>=u)&&a(f)})}else switch((e!==void 0||o.has(void 0))&&a(o.get(e)),h&&a(o.get(uu)),t){case"add":c?h&&a(o.get("length")):(a(o.get(wl)),ac(i)&&a(o.get(Em)));break;case"delete":c||(a(o.get(wl)),ac(i)&&a(o.get(Em)));break;case"set":ac(i)&&a(o.get(wl));break}}rv()}function V1(i,t){const e=gp.get(i);return e&&e.get(t)}function ql(i){const t=Qt(i);return t===i?t:(Is(t,"iterate",uu),Ui(i)?t:t.map(ys))}function ag(i){return Is(i=Qt(i),"iterate",uu),i}const U1={__proto__:null,[Symbol.iterator](){return im(this,Symbol.iterator,ys)},concat(...i){return ql(this).concat(...i.map(t=>Tt(t)?ql(t):t))},entries(){return im(this,"entries",i=>(i[1]=ys(i[1]),i))},every(i,t){return Qn(this,"every",i,t,void 0,arguments)},filter(i,t){return Qn(this,"filter",i,t,e=>e.map(ys),arguments)},find(i,t){return Qn(this,"find",i,t,ys,arguments)},findIndex(i,t){return Qn(this,"findIndex",i,t,void 0,arguments)},findLast(i,t){return Qn(this,"findLast",i,t,ys,arguments)},findLastIndex(i,t){return Qn(this,"findLastIndex",i,t,void 0,arguments)},forEach(i,t){return Qn(this,"forEach",i,t,void 0,arguments)},includes(...i){return nm(this,"includes",i)},indexOf(...i){return nm(this,"indexOf",i)},join(i){return ql(this).join(i)},lastIndexOf(...i){return nm(this,"lastIndexOf",i)},map(i,t){return Qn(this,"map",i,t,void 0,arguments)},pop(){return Rh(this,"pop")},push(...i){return Rh(this,"push",i)},reduce(i,...t){return _y(this,"reduce",i,t)},reduceRight(i,...t){return _y(this,"reduceRight",i,t)},shift(){return Rh(this,"shift")},some(i,t){return Qn(this,"some",i,t,void 0,arguments)},splice(...i){return Rh(this,"splice",i)},toReversed(){return ql(this).toReversed()},toSorted(i){return ql(this).toSorted(i)},toSpliced(...i){return ql(this).toSpliced(...i)},unshift(...i){return Rh(this,"unshift",i)},values(){return im(this,"values",ys)}};function im(i,t,e){const s=ag(i),n=s[t]();return s!==i&&!Ui(i)&&(n._next=n.next,n.next=()=>{const r=n._next();return r.value&&(r.value=e(r.value)),r}),n}const z1=Array.prototype;function Qn(i,t,e,s,n,r){const o=ag(i),a=o!==i&&!Ui(i),c=o[t];if(c!==z1[t]){const f=c.apply(i,r);return a?ys(f):f}let h=e;o!==i&&(a?h=function(f,p){return e.call(this,ys(f),p,i)}:e.length>2&&(h=function(f,p){return e.call(this,f,p,i)}));const u=c.call(o,h,s);return a&&n?n(u):u}function _y(i,t,e,s){const n=ag(i);let r=e;return n!==i&&(Ui(i)?e.length>3&&(r=function(o,a,c){return e.call(this,o,a,c,i)}):r=function(o,a,c){return e.call(this,o,ys(a),c,i)}),n[t](r,...s)}function nm(i,t,e){const s=Qt(i);Is(s,"iterate",uu);const n=s[t](...e);return(n===-1||n===!1)&&hv(e[0])?(e[0]=Qt(e[0]),s[t](...e)):n}function Rh(i,t,e=[]){Br(),nv();const s=Qt(i)[t].apply(i,e);return rv(),Hr(),s}const q1=tv("__proto__,__v_isRef,__isVue"),eA=new Set(Object.getOwnPropertyNames(Symbol).filter(i=>i!=="arguments"&&i!=="caller").map(i=>Symbol[i]).filter(zn));function W1(i){zn(i)||(i=String(i));const t=Qt(this);return Is(t,"has",i),t.hasOwnProperty(i)}class sA{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,s){if(e==="__v_skip")return t.__v_skip;const n=this._isReadonly,r=this._isShallow;if(e==="__v_isReactive")return!n;if(e==="__v_isReadonly")return n;if(e==="__v_isShallow")return r;if(e==="__v_raw")return s===(n?r?sC:oA:r?rA:nA).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const o=Tt(t);if(!n){let c;if(o&&(c=U1[e]))return c;if(e==="hasOwnProperty")return W1}const a=Reflect.get(t,e,Oe(t)?t:s);return(zn(e)?eA.has(e):q1(e))||(n||Is(t,"get",e),r)?a:Oe(a)?o&&iv(e)?a:a.value:_e(a)?n?lA(a):zd(a):a}}class iA extends sA{constructor(t=!1){super(!1,t)}set(t,e,s,n){let r=t[e];if(!this._isShallow){const c=jo(r);if(!Ui(s)&&!jo(s)&&(r=Qt(r),s=Qt(s)),!Tt(t)&&Oe(r)&&!Oe(s))return c?!1:(r.value=s,!0)}const o=Tt(t)&&iv(e)?Number(e)<t.length:ne(t,e),a=Reflect.set(t,e,s,Oe(t)?t:n);return t===Qt(n)&&(o?Fo(s,r)&&Mr(t,"set",e,s):Mr(t,"add",e,s)),a}deleteProperty(t,e){const s=ne(t,e);t[e];const n=Reflect.deleteProperty(t,e);return n&&s&&Mr(t,"delete",e,void 0),n}has(t,e){const s=Reflect.has(t,e);return(!zn(e)||!eA.has(e))&&Is(t,"has",e),s}ownKeys(t){return Is(t,"iterate",Tt(t)?"length":wl),Reflect.ownKeys(t)}}class G1 extends sA{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const X1=new iA,K1=new G1,Y1=new iA(!0);const Sm=i=>i,wf=i=>Reflect.getPrototypeOf(i);function Q1(i,t,e){return function(...s){const n=this.__v_raw,r=Qt(n),o=ac(r),a=i==="entries"||i===Symbol.iterator&&o,c=i==="keys"&&o,h=n[i](...s),u=e?Sm:t?mp:ys;return!t&&Is(r,"iterate",c?Em:wl),{next(){const{value:f,done:p}=h.next();return p?{value:f,done:p}:{value:a?[u(f[0]),u(f[1])]:u(f),done:p}},[Symbol.iterator](){return this}}}}function Af(i){return function(...t){return i==="delete"?!1:i==="clear"?void 0:this}}function J1(i,t){const e={get(n){const r=this.__v_raw,o=Qt(r),a=Qt(n);i||(Fo(n,a)&&Is(o,"get",n),Is(o,"get",a));const{has:c}=wf(o),h=t?Sm:i?mp:ys;if(c.call(o,n))return h(r.get(n));if(c.call(o,a))return h(r.get(a));r!==o&&r.get(n)},get size(){const n=this.__v_raw;return!i&&Is(Qt(n),"iterate",wl),Reflect.get(n,"size",n)},has(n){const r=this.__v_raw,o=Qt(r),a=Qt(n);return i||(Fo(n,a)&&Is(o,"has",n),Is(o,"has",a)),n===a?r.has(n):r.has(n)||r.has(a)},forEach(n,r){const o=this,a=o.__v_raw,c=Qt(a),h=t?Sm:i?mp:ys;return!i&&Is(c,"iterate",wl),a.forEach((u,f)=>n.call(r,h(u),h(f),o))}};return Ls(e,i?{add:Af("add"),set:Af("set"),delete:Af("delete"),clear:Af("clear")}:{add(n){!t&&!Ui(n)&&!jo(n)&&(n=Qt(n));const r=Qt(this);return wf(r).has.call(r,n)||(r.add(n),Mr(r,"add",n,n)),this},set(n,r){!t&&!Ui(r)&&!jo(r)&&(r=Qt(r));const o=Qt(this),{has:a,get:c}=wf(o);let h=a.call(o,n);h||(n=Qt(n),h=a.call(o,n));const u=c.call(o,n);return o.set(n,r),h?Fo(r,u)&&Mr(o,"set",n,r):Mr(o,"add",n,r),this},delete(n){const r=Qt(this),{has:o,get:a}=wf(r);let c=o.call(r,n);c||(n=Qt(n),c=o.call(r,n)),a&&a.call(r,n);const h=r.delete(n);return c&&Mr(r,"delete",n,void 0),h},clear(){const n=Qt(this),r=n.size!==0,o=n.clear();return r&&Mr(n,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(n=>{e[n]=Q1(n,i,t)}),e}function lv(i,t){const e=J1(i,t);return(s,n,r)=>n==="__v_isReactive"?!i:n==="__v_isReadonly"?i:n==="__v_raw"?s:Reflect.get(ne(e,n)&&n in s?e:s,n,r)}const Z1={get:lv(!1,!1)},tC={get:lv(!1,!0)},eC={get:lv(!0,!1)};const nA=new WeakMap,rA=new WeakMap,oA=new WeakMap,sC=new WeakMap;function iC(i){switch(i){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function nC(i){return i.__v_skip||!Object.isExtensible(i)?0:iC(R1(i))}function zd(i){return jo(i)?i:cv(i,!1,X1,Z1,nA)}function aA(i){return cv(i,!1,Y1,tC,rA)}function lA(i){return cv(i,!0,K1,eC,oA)}function cv(i,t,e,s,n){if(!_e(i)||i.__v_raw&&!(t&&i.__v_isReactive))return i;const r=nC(i);if(r===0)return i;const o=n.get(i);if(o)return o;const a=new Proxy(i,r===2?s:e);return n.set(i,a),a}function Nr(i){return jo(i)?Nr(i.__v_raw):!!(i&&i.__v_isReactive)}function jo(i){return!!(i&&i.__v_isReadonly)}function Ui(i){return!!(i&&i.__v_isShallow)}function hv(i){return i?!!i.__v_raw:!1}function Qt(i){const t=i&&i.__v_raw;return t?Qt(t):i}function uv(i){return!ne(i,"__v_skip")&&Object.isExtensible(i)&&Bw(i,"__v_skip",!0),i}const ys=i=>_e(i)?zd(i):i,mp=i=>_e(i)?lA(i):i;function Oe(i){return i?i.__v_isRef===!0:!1}function zt(i){return cA(i,!1)}function rC(i){return cA(i,!0)}function cA(i,t){return Oe(i)?i:new oC(i,t)}class oC{constructor(t,e){this.dep=new av,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=e?t:Qt(t),this._value=e?t:ys(t),this.__v_isShallow=e}get value(){return this.dep.track(),this._value}set value(t){const e=this._rawValue,s=this.__v_isShallow||Ui(t)||jo(t);t=s?t:Qt(t),Fo(t,e)&&(this._rawValue=t,this._value=s?t:ys(t),this.dep.trigger())}}function De(i){return Oe(i)?i.value:i}const aC={get:(i,t,e)=>t==="__v_raw"?i:De(Reflect.get(i,t,e)),set:(i,t,e,s)=>{const n=i[t];return Oe(n)&&!Oe(e)?(n.value=e,!0):Reflect.set(i,t,e,s)}};function hA(i){return Nr(i)?i:new Proxy(i,aC)}function lC(i){const t=Tt(i)?new Array(i.length):{};for(const e in i)t[e]=uA(i,e);return t}class cC{constructor(t,e,s){this._object=t,this._key=e,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return V1(Qt(this._object),this._key)}}class hC{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function uC(i,t,e){return Oe(i)?i:Nt(i)?new hC(i):_e(i)&&arguments.length>1?uA(i,t,e):zt(i)}function uA(i,t,e){const s=i[t];return Oe(s)?s:new cC(i,t,e)}class dC{constructor(t,e,s){this.fn=t,this.setter=e,this._value=void 0,this.dep=new av(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=hu-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!e,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Ae!==this)return Kw(this,!0),!0}get value(){const t=this.dep.track();return Jw(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function fC(i,t,e=!1){let s,n;return Nt(i)?s=i:(s=i.get,n=i.set),new dC(s,n,e)}const Ef={},bp=new WeakMap;let ha;function pC(i,t=!1,e=ha){if(e){let s=bp.get(e);s||bp.set(e,s=[]),s.push(i)}}function gC(i,t,e=ve){const{immediate:s,deep:n,once:r,scheduler:o,augmentJob:a,call:c}=e,h=R=>n?R:Ui(R)||n===!1||n===0?Dr(R,1):Dr(R);let u,f,p,g,_=!1,v=!1;if(Oe(i)?(f=()=>i.value,_=Ui(i)):Nr(i)?(f=()=>h(i),_=!0):Tt(i)?(v=!0,_=i.some(R=>Nr(R)||Ui(R)),f=()=>i.map(R=>{if(Oe(R))return R.value;if(Nr(R))return h(R);if(Nt(R))return c?c(R,2):R()})):Nt(i)?t?f=c?()=>c(i,2):i:f=()=>{if(p){Br();try{p()}finally{Hr()}}const R=ha;ha=u;try{return c?c(i,3,[g]):i(g)}finally{ha=R}}:f=Un,t&&n){const R=f,I=n===!0?1/0:n;f=()=>Dr(R(),I)}const E=Ww(),S=()=>{u.stop(),E&&E.active&&sv(E.effects,u)};if(r&&t){const R=t;t=(...I)=>{R(...I),S()}}let C=v?new Array(i.length).fill(Ef):Ef;const T=R=>{if(!(!(u.flags&1)||!u.dirty&&!R))if(t){const I=u.run();if(n||_||(v?I.some((F,N)=>Fo(F,C[N])):Fo(I,C))){p&&p();const F=ha;ha=u;try{const N=[I,C===Ef?void 0:v&&C[0]===Ef?[]:C,g];c?c(t,3,N):t(...N),C=I}finally{ha=F}}}else u.run()};return a&&a(T),u=new Gw(f),u.scheduler=o?()=>o(T,!1):T,g=R=>pC(R,!1,u),p=u.onStop=()=>{const R=bp.get(u);if(R){if(c)c(R,4);else for(const I of R)I();bp.delete(u)}},t?s?T(!0):C=u.run():o?o(T.bind(null,!0),!0):u.run(),S.pause=u.pause.bind(u),S.resume=u.resume.bind(u),S.stop=S,S}function Dr(i,t=1/0,e){if(t<=0||!_e(i)||i.__v_skip||(e=e||new Set,e.has(i)))return i;if(e.add(i),t--,Oe(i))Dr(i.value,t,e);else if(Tt(i))for(let s=0;s<i.length;s++)Dr(i[s],t,e);else if(eg(i)||ac(i))i.forEach(s=>{Dr(s,t,e)});else if($w(i)){for(const s in i)Dr(i[s],t,e);for(const s of Object.getOwnPropertySymbols(i))Object.prototype.propertyIsEnumerable.call(i,s)&&Dr(i[s],t,e)}return i}/**
* @vue/runtime-core v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function qd(i,t,e,s){try{return s?i(...s):i()}catch(n){lg(n,t,e)}}function qn(i,t,e,s){if(Nt(i)){const n=qd(i,t,e,s);return n&&Nw(n)&&n.catch(r=>{lg(r,t,e)}),n}if(Tt(i)){const n=[];for(let r=0;r<i.length;r++)n.push(qn(i[r],t,e,s));return n}}function lg(i,t,e,s=!0){const n=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||ve;if(t){let a=t.parent;const c=t.proxy,h=`https://vuejs.org/error-reference/#runtime-${e}`;for(;a;){const u=a.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](i,c,h)===!1)return}a=a.parent}if(r){Br(),qd(r,null,10,[i,c,h]),Hr();return}}mC(i,e,n,s,o)}function mC(i,t,e,s=!0,n=!1){if(n)throw i;console.error(i)}const Xs=[];let En=-1;const lc=[];let Yr=null,Gl=0;const dA=Promise.resolve();let vp=null;function $o(i){const t=vp||dA;return i?t.then(this?i.bind(this):i):t}function bC(i){let t=En+1,e=Xs.length;for(;t<e;){const s=t+e>>>1,n=Xs[s],r=du(n);r<i||r===i&&n.flags&2?t=s+1:e=s}return t}function dv(i){if(!(i.flags&1)){const t=du(i),e=Xs[Xs.length-1];!e||!(i.flags&2)&&t>=du(e)?Xs.push(i):Xs.splice(bC(t),0,i),i.flags|=1,fA()}}function fA(){vp||(vp=dA.then(gA))}function vC(i){Tt(i)?lc.push(...i):Yr&&i.id===-1?Yr.splice(Gl+1,0,i):i.flags&1||(lc.push(i),i.flags|=1),fA()}function yy(i,t,e=En+1){for(;e<Xs.length;e++){const s=Xs[e];if(s&&s.flags&2){if(i&&s.id!==i.uid)continue;Xs.splice(e,1),e--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function pA(i){if(lc.length){const t=[...new Set(lc)].sort((e,s)=>du(e)-du(s));if(lc.length=0,Yr){Yr.push(...t);return}for(Yr=t,Gl=0;Gl<Yr.length;Gl++){const e=Yr[Gl];e.flags&4&&(e.flags&=-2),e.flags&8||e(),e.flags&=-2}Yr=null,Gl=0}}const du=i=>i.id==null?i.flags&2?-1:1/0:i.id;function gA(i){try{for(En=0;En<Xs.length;En++){const t=Xs[En];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),qd(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;En<Xs.length;En++){const t=Xs[En];t&&(t.flags&=-2)}En=-1,Xs.length=0,pA(),vp=null,(Xs.length||lc.length)&&gA()}}let si=null,mA=null;function _p(i){const t=si;return si=i,mA=i&&i.type.__scopeId||null,t}function Bo(i,t=si,e){if(!t||i._n)return i;const s=(...n)=>{s._d&&ky(-1);const r=_p(t);let o;try{o=i(...n)}finally{_p(r),s._d&&ky(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Sn(i,t){if(si===null)return i;const e=dg(si),s=i.dirs||(i.dirs=[]);for(let n=0;n<t.length;n++){let[r,o,a,c=ve]=t[n];r&&(Nt(r)&&(r={mounted:r,updated:r}),r.deep&&Dr(o),s.push({dir:r,instance:e,value:o,oldValue:void 0,arg:a,modifiers:c}))}return i}function aa(i,t,e,s){const n=i.dirs,r=t&&t.dirs;for(let o=0;o<n.length;o++){const a=n[o];r&&(a.oldValue=r[o].value);let c=a.dir[s];c&&(Br(),qn(c,e,8,[i.el,a,i,t]),Hr())}}const _C=Symbol("_vte"),yC=i=>i.__isTeleport;function fv(i,t){i.shapeFlag&6&&i.component?(i.transition=t,fv(i.component.subTree,t)):i.shapeFlag&128?(i.ssContent.transition=t.clone(i.ssContent),i.ssFallback.transition=t.clone(i.ssFallback)):i.transition=t}/*! #__NO_SIDE_EFFECTS__ */function Gn(i,t){return Nt(i)?Ls({name:i.name},t,{setup:i}):i}function bA(i){i.ids=[i.ids[0]+i.ids[2]+++"-",0,0]}function yp(i,t,e,s,n=!1){if(Tt(i)){i.forEach((_,v)=>yp(_,t&&(Tt(t)?t[v]:t),e,s,n));return}if(nu(s)&&!n){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&yp(i,t,e,s.component.subTree);return}const r=s.shapeFlag&4?dg(s.component):s.el,o=n?null:r,{i:a,r:c}=i,h=t&&t.r,u=a.refs===ve?a.refs={}:a.refs,f=a.setupState,p=Qt(f),g=f===ve?()=>!1:_=>ne(p,_);if(h!=null&&h!==c&&(Qe(h)?(u[h]=null,g(h)&&(f[h]=null)):Oe(h)&&(h.value=null)),Nt(c))qd(c,a,12,[o,u]);else{const _=Qe(c),v=Oe(c);if(_||v){const E=()=>{if(i.f){const S=_?g(c)?f[c]:u[c]:c.value;n?Tt(S)&&sv(S,r):Tt(S)?S.includes(r)||S.push(r):_?(u[c]=[r],g(c)&&(f[c]=u[c])):(c.value=[r],i.k&&(u[i.k]=c.value))}else _?(u[c]=o,g(c)&&(f[c]=o)):v&&(c.value=o,i.k&&(u[i.k]=o))};o?(E.id=-1,ai(E,e)):E()}}}ng().requestIdleCallback;ng().cancelIdleCallback;const nu=i=>!!i.type.__asyncLoader,vA=i=>i.type.__isKeepAlive;function wC(i,t){_A(i,"a",t)}function AC(i,t){_A(i,"da",t)}function _A(i,t,e=ws){const s=i.__wdc||(i.__wdc=()=>{let n=e;for(;n;){if(n.isDeactivated)return;n=n.parent}return i()});if(cg(t,s,e),e){let n=e.parent;for(;n&&n.parent;)vA(n.parent.vnode)&&EC(s,t,e,n),n=n.parent}}function EC(i,t,e,s){const n=cg(t,i,s,!0);yA(()=>{sv(s[t],n)},e)}function cg(i,t,e=ws,s=!1){if(e){const n=e[i]||(e[i]=[]),r=t.__weh||(t.__weh=(...o)=>{Br();const a=Gd(e),c=qn(t,e,i,o);return a(),Hr(),c});return s?n.unshift(r):n.push(r),r}}const Ur=i=>(t,e=ws)=>{(!pu||i==="sp")&&cg(i,(...s)=>t(...s),e)},SC=Ur("bm"),Wd=Ur("m"),xC=Ur("bu"),CC=Ur("u"),TC=Ur("bum"),yA=Ur("um"),PC=Ur("sp"),RC=Ur("rtg"),kC=Ur("rtc");function IC(i,t=ws){cg("ec",i,t)}const LC="components";function pv(i,t){return DC(LC,i,!0,t)||i}const MC=Symbol.for("v-ndc");function DC(i,t,e=!0,s=!1){const n=si||ws;if(n){const r=n.type;{const a=wT(r,!1);if(a&&(a===t||a===qi(t)||a===ig(qi(t))))return r}const o=wy(n[i]||r[i],t)||wy(n.appContext[i],t);return!o&&s?r:o}}function wy(i,t){return i&&(i[t]||i[qi(t)]||i[ig(qi(t))])}function Xi(i,t,e,s){let n;const r=e,o=Tt(i);if(o||Qe(i)){const a=o&&Nr(i);let c=!1,h=!1;a&&(c=!Ui(i),h=jo(i),i=ag(i)),n=new Array(i.length);for(let u=0,f=i.length;u<f;u++)n[u]=t(c?h?mp(ys(i[u])):ys(i[u]):i[u],u,void 0,r)}else if(typeof i=="number"){n=new Array(i);for(let a=0;a<i;a++)n[a]=t(a+1,a,void 0,r)}else if(_e(i))if(i[Symbol.iterator])n=Array.from(i,(a,c)=>t(a,c,void 0,r));else{const a=Object.keys(i);n=new Array(a.length);for(let c=0,h=a.length;c<h;c++){const u=a[c];n[c]=t(i[u],u,c,r)}}else n=[];return n}const xm=i=>i?jA(i)?dg(i):xm(i.parent):null,ru=Ls(Object.create(null),{$:i=>i,$el:i=>i.vnode.el,$data:i=>i.data,$props:i=>i.props,$attrs:i=>i.attrs,$slots:i=>i.slots,$refs:i=>i.refs,$parent:i=>xm(i.parent),$root:i=>xm(i.root),$host:i=>i.ce,$emit:i=>i.emit,$options:i=>AA(i),$forceUpdate:i=>i.f||(i.f=()=>{dv(i.update)}),$nextTick:i=>i.n||(i.n=$o.bind(i.proxy)),$watch:i=>sT.bind(i)}),rm=(i,t)=>i!==ve&&!i.__isScriptSetup&&ne(i,t),OC={get({_:i},t){if(t==="__v_skip")return!0;const{ctx:e,setupState:s,data:n,props:r,accessCache:o,type:a,appContext:c}=i;let h;if(t[0]!=="$"){const g=o[t];if(g!==void 0)switch(g){case 1:return s[t];case 2:return n[t];case 4:return e[t];case 3:return r[t]}else{if(rm(s,t))return o[t]=1,s[t];if(n!==ve&&ne(n,t))return o[t]=2,n[t];if((h=i.propsOptions[0])&&ne(h,t))return o[t]=3,r[t];if(e!==ve&&ne(e,t))return o[t]=4,e[t];Cm&&(o[t]=0)}}const u=ru[t];let f,p;if(u)return t==="$attrs"&&Is(i.attrs,"get",""),u(i);if((f=a.__cssModules)&&(f=f[t]))return f;if(e!==ve&&ne(e,t))return o[t]=4,e[t];if(p=c.config.globalProperties,ne(p,t))return p[t]},set({_:i},t,e){const{data:s,setupState:n,ctx:r}=i;return rm(n,t)?(n[t]=e,!0):s!==ve&&ne(s,t)?(s[t]=e,!0):ne(i.props,t)||t[0]==="$"&&t.slice(1)in i?!1:(r[t]=e,!0)},has({_:{data:i,setupState:t,accessCache:e,ctx:s,appContext:n,propsOptions:r}},o){let a;return!!e[o]||i!==ve&&ne(i,o)||rm(t,o)||(a=r[0])&&ne(a,o)||ne(s,o)||ne(ru,o)||ne(n.config.globalProperties,o)},defineProperty(i,t,e){return e.get!=null?i._.accessCache[t]=0:ne(e,"value")&&this.set(i,t,e.value,null),Reflect.defineProperty(i,t,e)}};function Ay(i){return Tt(i)?i.reduce((t,e)=>(t[e]=null,t),{}):i}let Cm=!0;function NC(i){const t=AA(i),e=i.proxy,s=i.ctx;Cm=!1,t.beforeCreate&&Ey(t.beforeCreate,i,"bc");const{data:n,computed:r,methods:o,watch:a,provide:c,inject:h,created:u,beforeMount:f,mounted:p,beforeUpdate:g,updated:_,activated:v,deactivated:E,beforeDestroy:S,beforeUnmount:C,destroyed:T,unmounted:R,render:I,renderTracked:F,renderTriggered:N,errorCaptured:H,serverPrefetch:U,expose:Q,inheritAttrs:tt,components:Et,directives:At,filters:Rt}=t;if(h&&FC(h,s,null),o)for(const X in o){const et=o[X];Nt(et)&&(s[X]=et.bind(e))}if(n){const X=n.call(e,e);_e(X)&&(i.data=zd(X))}if(Cm=!0,r)for(const X in r){const et=r[X],Y=Nt(et)?et.bind(e,e):Nt(et.get)?et.get.bind(e,e):Un,M=!Nt(et)&&Nt(et.set)?et.set.bind(e):Un,bt=$e({get:Y,set:M});Object.defineProperty(s,X,{enumerable:!0,configurable:!0,get:()=>bt.value,set:Ct=>bt.value=Ct})}if(a)for(const X in a)wA(a[X],s,e,X);if(c){const X=Nt(c)?c.call(e):c;Reflect.ownKeys(X).forEach(et=>{Mf(et,X[et])})}u&&Ey(u,i,"c");function J(X,et){Tt(et)?et.forEach(Y=>X(Y.bind(e))):et&&X(et.bind(e))}if(J(SC,f),J(Wd,p),J(xC,g),J(CC,_),J(wC,v),J(AC,E),J(IC,H),J(kC,F),J(RC,N),J(TC,C),J(yA,R),J(PC,U),Tt(Q))if(Q.length){const X=i.exposed||(i.exposed={});Q.forEach(et=>{Object.defineProperty(X,et,{get:()=>e[et],set:Y=>e[et]=Y})})}else i.exposed||(i.exposed={});I&&i.render===Un&&(i.render=I),tt!=null&&(i.inheritAttrs=tt),Et&&(i.components=Et),At&&(i.directives=At),U&&bA(i)}function FC(i,t,e=Un){Tt(i)&&(i=Tm(i));for(const s in i){const n=i[s];let r;_e(n)?"default"in n?r=un(n.from||s,n.default,!0):r=un(n.from||s):r=un(n),Oe(r)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[s]=r}}function Ey(i,t,e){qn(Tt(i)?i.map(s=>s.bind(t.proxy)):i.bind(t.proxy),t,e)}function wA(i,t,e,s){let n=s.includes(".")?OA(e,s):()=>e[s];if(Qe(i)){const r=t[i];Nt(r)&&El(n,r)}else if(Nt(i))El(n,i.bind(e));else if(_e(i))if(Tt(i))i.forEach(r=>wA(r,t,e,s));else{const r=Nt(i.handler)?i.handler.bind(e):t[i.handler];Nt(r)&&El(n,r,i)}}function AA(i){const t=i.type,{mixins:e,extends:s}=t,{mixins:n,optionsCache:r,config:{optionMergeStrategies:o}}=i.appContext,a=r.get(t);let c;return a?c=a:!n.length&&!e&&!s?c=t:(c={},n.length&&n.forEach(h=>wp(c,h,o,!0)),wp(c,t,o)),_e(t)&&r.set(t,c),c}function wp(i,t,e,s=!1){const{mixins:n,extends:r}=t;r&&wp(i,r,e,!0),n&&n.forEach(o=>wp(i,o,e,!0));for(const o in t)if(!(s&&o==="expose")){const a=$C[o]||e&&e[o];i[o]=a?a(i[o],t[o]):t[o]}return i}const $C={data:Sy,props:xy,emits:xy,methods:Fh,computed:Fh,beforeCreate:Hs,created:Hs,beforeMount:Hs,mounted:Hs,beforeUpdate:Hs,updated:Hs,beforeDestroy:Hs,beforeUnmount:Hs,destroyed:Hs,unmounted:Hs,activated:Hs,deactivated:Hs,errorCaptured:Hs,serverPrefetch:Hs,components:Fh,directives:Fh,watch:HC,provide:Sy,inject:BC};function Sy(i,t){return t?i?function(){return Ls(Nt(i)?i.call(this,this):i,Nt(t)?t.call(this,this):t)}:t:i}function BC(i,t){return Fh(Tm(i),Tm(t))}function Tm(i){if(Tt(i)){const t={};for(let e=0;e<i.length;e++)t[i[e]]=i[e];return t}return i}function Hs(i,t){return i?[...new Set([].concat(i,t))]:t}function Fh(i,t){return i?Ls(Object.create(null),i,t):t}function xy(i,t){return i?Tt(i)&&Tt(t)?[...new Set([...i,...t])]:Ls(Object.create(null),Ay(i),Ay(t??{})):t}function HC(i,t){if(!i)return t;if(!t)return i;const e=Ls(Object.create(null),i);for(const s in t)e[s]=Hs(i[s],t[s]);return e}function EA(){return{app:null,config:{isNativeTag:T1,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let jC=0;function VC(i,t){return function(s,n=null){Nt(s)||(s=Ls({},s)),n!=null&&!_e(n)&&(n=null);const r=EA(),o=new WeakSet,a=[];let c=!1;const h=r.app={_uid:jC++,_component:s,_props:n,_container:null,_context:r,_instance:null,version:ET,get config(){return r.config},set config(u){},use(u,...f){return o.has(u)||(u&&Nt(u.install)?(o.add(u),u.install(h,...f)):Nt(u)&&(o.add(u),u(h,...f))),h},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),h},component(u,f){return f?(r.components[u]=f,h):r.components[u]},directive(u,f){return f?(r.directives[u]=f,h):r.directives[u]},mount(u,f,p){if(!c){const g=h._ceVNode||Ie(s,n);return g.appContext=r,p===!0?p="svg":p===!1&&(p=void 0),i(g,u,p),c=!0,h._container=u,u.__vue_app__=h,dg(g.component)}},onUnmount(u){a.push(u)},unmount(){c&&(qn(a,h._instance,16),i(null,h._container),delete h._container.__vue_app__)},provide(u,f){return r.provides[u]=f,h},runWithContext(u){const f=Al;Al=h;try{return u()}finally{Al=f}}};return h}}let Al=null;function Mf(i,t){if(ws){let e=ws.provides;const s=ws.parent&&ws.parent.provides;s===e&&(e=ws.provides=Object.create(s)),e[i]=t}}function un(i,t,e=!1){const s=ws||si;if(s||Al){const n=Al?Al._context.provides:s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(n&&i in n)return n[i];if(arguments.length>1)return e&&Nt(t)?t.call(s&&s.proxy):t}}function UC(){return!!(ws||si||Al)}const SA={},xA=()=>Object.create(SA),CA=i=>Object.getPrototypeOf(i)===SA;function zC(i,t,e,s=!1){const n={},r=xA();i.propsDefaults=Object.create(null),TA(i,t,n,r);for(const o in i.propsOptions[0])o in n||(n[o]=void 0);e?i.props=s?n:aA(n):i.type.props?i.props=n:i.props=r,i.attrs=r}function qC(i,t,e,s){const{props:n,attrs:r,vnode:{patchFlag:o}}=i,a=Qt(n),[c]=i.propsOptions;let h=!1;if((s||o>0)&&!(o&16)){if(o&8){const u=i.vnode.dynamicProps;for(let f=0;f<u.length;f++){let p=u[f];if(hg(i.emitsOptions,p))continue;const g=t[p];if(c)if(ne(r,p))g!==r[p]&&(r[p]=g,h=!0);else{const _=qi(p);n[_]=Pm(c,a,_,g,i,!1)}else g!==r[p]&&(r[p]=g,h=!0)}}}else{TA(i,t,n,r)&&(h=!0);let u;for(const f in a)(!t||!ne(t,f)&&((u=Xo(f))===f||!ne(t,u)))&&(c?e&&(e[f]!==void 0||e[u]!==void 0)&&(n[f]=Pm(c,a,f,void 0,i,!0)):delete n[f]);if(r!==a)for(const f in r)(!t||!ne(t,f))&&(delete r[f],h=!0)}h&&Mr(i.attrs,"set","")}function TA(i,t,e,s){const[n,r]=i.propsOptions;let o=!1,a;if(t)for(let c in t){if(eu(c))continue;const h=t[c];let u;n&&ne(n,u=qi(c))?!r||!r.includes(u)?e[u]=h:(a||(a={}))[u]=h:hg(i.emitsOptions,c)||(!(c in s)||h!==s[c])&&(s[c]=h,o=!0)}if(r){const c=Qt(e),h=a||ve;for(let u=0;u<r.length;u++){const f=r[u];e[f]=Pm(n,c,f,h[f],i,!ne(h,f))}}return o}function Pm(i,t,e,s,n,r){const o=i[e];if(o!=null){const a=ne(o,"default");if(a&&s===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Nt(c)){const{propsDefaults:h}=n;if(e in h)s=h[e];else{const u=Gd(n);s=h[e]=c.call(null,t),u()}}else s=c;n.ce&&n.ce._setProp(e,s)}o[0]&&(r&&!a?s=!1:o[1]&&(s===""||s===Xo(e))&&(s=!0))}return s}const WC=new WeakMap;function PA(i,t,e=!1){const s=e?WC:t.propsCache,n=s.get(i);if(n)return n;const r=i.props,o={},a=[];let c=!1;if(!Nt(i)){const u=f=>{c=!0;const[p,g]=PA(f,t,!0);Ls(o,p),g&&a.push(...g)};!e&&t.mixins.length&&t.mixins.forEach(u),i.extends&&u(i.extends),i.mixins&&i.mixins.forEach(u)}if(!r&&!c)return _e(i)&&s.set(i,oc),oc;if(Tt(r))for(let u=0;u<r.length;u++){const f=qi(r[u]);Cy(f)&&(o[f]=ve)}else if(r)for(const u in r){const f=qi(u);if(Cy(f)){const p=r[u],g=o[f]=Tt(p)||Nt(p)?{type:p}:Ls({},p),_=g.type;let v=!1,E=!0;if(Tt(_))for(let S=0;S<_.length;++S){const C=_[S],T=Nt(C)&&C.name;if(T==="Boolean"){v=!0;break}else T==="String"&&(E=!1)}else v=Nt(_)&&_.name==="Boolean";g[0]=v,g[1]=E,(v||ne(g,"default"))&&a.push(f)}}const h=[o,a];return _e(i)&&s.set(i,h),h}function Cy(i){return i[0]!=="$"&&!eu(i)}const gv=i=>i[0]==="_"||i==="$stable",mv=i=>Tt(i)?i.map(jn):[jn(i)],GC=(i,t,e)=>{if(t._n)return t;const s=Bo((...n)=>mv(t(...n)),e);return s._c=!1,s},RA=(i,t,e)=>{const s=i._ctx;for(const n in i){if(gv(n))continue;const r=i[n];if(Nt(r))t[n]=GC(n,r,s);else if(r!=null){const o=mv(r);t[n]=()=>o}}},kA=(i,t)=>{const e=mv(t);i.slots.default=()=>e},IA=(i,t,e)=>{for(const s in t)(e||!gv(s))&&(i[s]=t[s])},XC=(i,t,e)=>{const s=i.slots=xA();if(i.vnode.shapeFlag&32){const n=t._;n?(IA(s,t,e),e&&Bw(s,"_",n,!0)):RA(t,s)}else t&&kA(i,t)},KC=(i,t,e)=>{const{vnode:s,slots:n}=i;let r=!0,o=ve;if(s.shapeFlag&32){const a=t._;a?e&&a===1?r=!1:IA(n,t,e):(r=!t.$stable,RA(t,n)),o=t}else t&&(kA(i,t),o={default:1});if(r)for(const a in n)!gv(a)&&o[a]==null&&delete n[a]},ai=cT;function YC(i){return QC(i)}function QC(i,t){const e=ng();e.__VUE__=!0;const{insert:s,remove:n,patchProp:r,createElement:o,createText:a,createComment:c,setText:h,setElementText:u,parentNode:f,nextSibling:p,setScopeId:g=Un,insertStaticContent:_}=i,v=(P,k,$,z=null,q=null,W=null,at=void 0,rt=null,it=!!k.dynamicChildren)=>{if(P===k)return;P&&!kh(P,k)&&(z=B(P),Ct(P,q,W,!0),P=null),k.patchFlag===-2&&(it=!1,k.dynamicChildren=null);const{type:K,ref:St,shapeFlag:lt}=k;switch(K){case ug:E(P,k,$,z);break;case Vo:S(P,k,$,z);break;case Df:P==null&&C(k,$,z,at);break;case ze:Et(P,k,$,z,q,W,at,rt,it);break;default:lt&1?I(P,k,$,z,q,W,at,rt,it):lt&6?At(P,k,$,z,q,W,at,rt,it):(lt&64||lt&128)&&K.process(P,k,$,z,q,W,at,rt,it,ht)}St!=null&&q&&yp(St,P&&P.ref,W,k||P,!k)},E=(P,k,$,z)=>{if(P==null)s(k.el=a(k.children),$,z);else{const q=k.el=P.el;k.children!==P.children&&h(q,k.children)}},S=(P,k,$,z)=>{P==null?s(k.el=c(k.children||""),$,z):k.el=P.el},C=(P,k,$,z)=>{[P.el,P.anchor]=_(P.children,k,$,z,P.el,P.anchor)},T=({el:P,anchor:k},$,z)=>{let q;for(;P&&P!==k;)q=p(P),s(P,$,z),P=q;s(k,$,z)},R=({el:P,anchor:k})=>{let $;for(;P&&P!==k;)$=p(P),n(P),P=$;n(k)},I=(P,k,$,z,q,W,at,rt,it)=>{k.type==="svg"?at="svg":k.type==="math"&&(at="mathml"),P==null?F(k,$,z,q,W,at,rt,it):U(P,k,q,W,at,rt,it)},F=(P,k,$,z,q,W,at,rt)=>{let it,K;const{props:St,shapeFlag:lt,transition:yt,dirs:xt}=P;if(it=P.el=o(P.type,W,St&&St.is,St),lt&8?u(it,P.children):lt&16&&H(P.children,it,null,z,q,om(P,W),at,rt),xt&&aa(P,null,z,"created"),N(it,P,P.scopeId,at,z),St){for(const he in St)he!=="value"&&!eu(he)&&r(it,he,null,St[he],W,z);"value"in St&&r(it,"value",null,St.value,W),(K=St.onVnodeBeforeMount)&&_n(K,z,P)}xt&&aa(P,null,z,"beforeMount");const qt=JC(q,yt);qt&&yt.beforeEnter(it),s(it,k,$),((K=St&&St.onVnodeMounted)||qt||xt)&&ai(()=>{K&&_n(K,z,P),qt&&yt.enter(it),xt&&aa(P,null,z,"mounted")},q)},N=(P,k,$,z,q)=>{if($&&g(P,$),z)for(let W=0;W<z.length;W++)g(P,z[W]);if(q){let W=q.subTree;if(k===W||FA(W.type)&&(W.ssContent===k||W.ssFallback===k)){const at=q.vnode;N(P,at,at.scopeId,at.slotScopeIds,q.parent)}}},H=(P,k,$,z,q,W,at,rt,it=0)=>{for(let K=it;K<P.length;K++){const St=P[K]=rt?Qr(P[K]):jn(P[K]);v(null,St,k,$,z,q,W,at,rt)}},U=(P,k,$,z,q,W,at)=>{const rt=k.el=P.el;let{patchFlag:it,dynamicChildren:K,dirs:St}=k;it|=P.patchFlag&16;const lt=P.props||ve,yt=k.props||ve;let xt;if($&&la($,!1),(xt=yt.onVnodeBeforeUpdate)&&_n(xt,$,k,P),St&&aa(k,P,$,"beforeUpdate"),$&&la($,!0),(lt.innerHTML&&yt.innerHTML==null||lt.textContent&&yt.textContent==null)&&u(rt,""),K?Q(P.dynamicChildren,K,rt,$,z,om(k,q),W):at||et(P,k,rt,null,$,z,om(k,q),W,!1),it>0){if(it&16)tt(rt,lt,yt,$,q);else if(it&2&&lt.class!==yt.class&&r(rt,"class",null,yt.class,q),it&4&&r(rt,"style",lt.style,yt.style,q),it&8){const qt=k.dynamicProps;for(let he=0;he<qt.length;he++){const te=qt[he],Je=lt[te],He=yt[te];(He!==Je||te==="value")&&r(rt,te,Je,He,q,$)}}it&1&&P.children!==k.children&&u(rt,k.children)}else!at&&K==null&&tt(rt,lt,yt,$,q);((xt=yt.onVnodeUpdated)||St)&&ai(()=>{xt&&_n(xt,$,k,P),St&&aa(k,P,$,"updated")},z)},Q=(P,k,$,z,q,W,at)=>{for(let rt=0;rt<k.length;rt++){const it=P[rt],K=k[rt],St=it.el&&(it.type===ze||!kh(it,K)||it.shapeFlag&70)?f(it.el):$;v(it,K,St,null,z,q,W,at,!0)}},tt=(P,k,$,z,q)=>{if(k!==$){if(k!==ve)for(const W in k)!eu(W)&&!(W in $)&&r(P,W,k[W],null,q,z);for(const W in $){if(eu(W))continue;const at=$[W],rt=k[W];at!==rt&&W!=="value"&&r(P,W,rt,at,q,z)}"value"in $&&r(P,"value",k.value,$.value,q)}},Et=(P,k,$,z,q,W,at,rt,it)=>{const K=k.el=P?P.el:a(""),St=k.anchor=P?P.anchor:a("");let{patchFlag:lt,dynamicChildren:yt,slotScopeIds:xt}=k;xt&&(rt=rt?rt.concat(xt):xt),P==null?(s(K,$,z),s(St,$,z),H(k.children||[],$,St,q,W,at,rt,it)):lt>0&&lt&64&&yt&&P.dynamicChildren?(Q(P.dynamicChildren,yt,$,q,W,at,rt),(k.key!=null||q&&k===q.subTree)&&LA(P,k,!0)):et(P,k,$,St,q,W,at,rt,it)},At=(P,k,$,z,q,W,at,rt,it)=>{k.slotScopeIds=rt,P==null?k.shapeFlag&512?q.ctx.activate(k,$,z,at,it):Rt(k,$,z,q,W,at,it):oe(P,k,it)},Rt=(P,k,$,z,q,W,at)=>{const rt=P.component=mT(P,z,q);if(vA(P)&&(rt.ctx.renderer=ht),bT(rt,!1,at),rt.asyncDep){if(q&&q.registerDep(rt,J,at),!P.el){const it=rt.subTree=Ie(Vo);S(null,it,k,$)}}else J(rt,P,k,$,q,W,at)},oe=(P,k,$)=>{const z=k.component=P.component;if(aT(P,k,$))if(z.asyncDep&&!z.asyncResolved){X(z,k,$);return}else z.next=k,z.update();else k.el=P.el,z.vnode=k},J=(P,k,$,z,q,W,at)=>{const rt=()=>{if(P.isMounted){let{next:lt,bu:yt,u:xt,parent:qt,vnode:he}=P;{const Ms=MA(P);if(Ms){lt&&(lt.el=he.el,X(P,lt,at)),Ms.asyncDep.then(()=>{P.isUnmounted||rt()});return}}let te=lt,Je;la(P,!1),lt?(lt.el=he.el,X(P,lt,at)):lt=he,yt&&Lf(yt),(Je=lt.props&&lt.props.onVnodeBeforeUpdate)&&_n(Je,qt,lt,he),la(P,!0);const He=Py(P),ds=P.subTree;P.subTree=He,v(ds,He,f(ds.el),B(ds),P,q,W),lt.el=He.el,te===null&&lT(P,He.el),xt&&ai(xt,q),(Je=lt.props&&lt.props.onVnodeUpdated)&&ai(()=>_n(Je,qt,lt,he),q)}else{let lt;const{el:yt,props:xt}=k,{bm:qt,m:he,parent:te,root:Je,type:He}=P,ds=nu(k);la(P,!1),qt&&Lf(qt),!ds&&(lt=xt&&xt.onVnodeBeforeMount)&&_n(lt,te,k),la(P,!0);{Je.ce&&Je.ce._injectChildStyle(He);const Ms=P.subTree=Py(P);v(null,Ms,$,z,P,q,W),k.el=Ms.el}if(he&&ai(he,q),!ds&&(lt=xt&&xt.onVnodeMounted)){const Ms=k;ai(()=>_n(lt,te,Ms),q)}(k.shapeFlag&256||te&&nu(te.vnode)&&te.vnode.shapeFlag&256)&&P.a&&ai(P.a,q),P.isMounted=!0,k=$=z=null}};P.scope.on();const it=P.effect=new Gw(rt);P.scope.off();const K=P.update=it.run.bind(it),St=P.job=it.runIfDirty.bind(it);St.i=P,St.id=P.uid,it.scheduler=()=>dv(St),la(P,!0),K()},X=(P,k,$)=>{k.component=P;const z=P.vnode.props;P.vnode=k,P.next=null,qC(P,k.props,z,$),KC(P,k.children,$),Br(),yy(P),Hr()},et=(P,k,$,z,q,W,at,rt,it=!1)=>{const K=P&&P.children,St=P?P.shapeFlag:0,lt=k.children,{patchFlag:yt,shapeFlag:xt}=k;if(yt>0){if(yt&128){M(K,lt,$,z,q,W,at,rt,it);return}else if(yt&256){Y(K,lt,$,z,q,W,at,rt,it);return}}xt&8?(St&16&&Xt(K,q,W),lt!==K&&u($,lt)):St&16?xt&16?M(K,lt,$,z,q,W,at,rt,it):Xt(K,q,W,!0):(St&8&&u($,""),xt&16&&H(lt,$,z,q,W,at,rt,it))},Y=(P,k,$,z,q,W,at,rt,it)=>{P=P||oc,k=k||oc;const K=P.length,St=k.length,lt=Math.min(K,St);let yt;for(yt=0;yt<lt;yt++){const xt=k[yt]=it?Qr(k[yt]):jn(k[yt]);v(P[yt],xt,$,null,q,W,at,rt,it)}K>St?Xt(P,q,W,!0,!1,lt):H(k,$,z,q,W,at,rt,it,lt)},M=(P,k,$,z,q,W,at,rt,it)=>{let K=0;const St=k.length;let lt=P.length-1,yt=St-1;for(;K<=lt&&K<=yt;){const xt=P[K],qt=k[K]=it?Qr(k[K]):jn(k[K]);if(kh(xt,qt))v(xt,qt,$,null,q,W,at,rt,it);else break;K++}for(;K<=lt&&K<=yt;){const xt=P[lt],qt=k[yt]=it?Qr(k[yt]):jn(k[yt]);if(kh(xt,qt))v(xt,qt,$,null,q,W,at,rt,it);else break;lt--,yt--}if(K>lt){if(K<=yt){const xt=yt+1,qt=xt<St?k[xt].el:z;for(;K<=yt;)v(null,k[K]=it?Qr(k[K]):jn(k[K]),$,qt,q,W,at,rt,it),K++}}else if(K>yt)for(;K<=lt;)Ct(P[K],q,W,!0),K++;else{const xt=K,qt=K,he=new Map;for(K=qt;K<=yt;K++){const Ds=k[K]=it?Qr(k[K]):jn(k[K]);Ds.key!=null&&he.set(Ds.key,K)}let te,Je=0;const He=yt-qt+1;let ds=!1,Ms=0;const Ko=new Array(He);for(K=0;K<He;K++)Ko[K]=0;for(K=xt;K<=lt;K++){const Ds=P[K];if(Je>=He){Ct(Ds,q,W,!0);continue}let Ti;if(Ds.key!=null)Ti=he.get(Ds.key);else for(te=qt;te<=yt;te++)if(Ko[te-qt]===0&&kh(Ds,k[te])){Ti=te;break}Ti===void 0?Ct(Ds,q,W,!0):(Ko[Ti-qt]=K+1,Ti>=Ms?Ms=Ti:ds=!0,v(Ds,k[Ti],$,null,q,W,at,rt,it),Je++)}const Il=ds?ZC(Ko):oc;for(te=Il.length-1,K=He-1;K>=0;K--){const Ds=qt+K,Ti=k[Ds],ef=Ds+1<St?k[Ds+1].el:z;Ko[K]===0?v(null,Ti,$,ef,q,W,at,rt,it):ds&&(te<0||K!==Il[te]?bt(Ti,$,ef,2):te--)}}},bt=(P,k,$,z,q=null)=>{const{el:W,type:at,transition:rt,children:it,shapeFlag:K}=P;if(K&6){bt(P.component.subTree,k,$,z);return}if(K&128){P.suspense.move(k,$,z);return}if(K&64){at.move(P,k,$,ht);return}if(at===ze){s(W,k,$);for(let lt=0;lt<it.length;lt++)bt(it[lt],k,$,z);s(P.anchor,k,$);return}if(at===Df){T(P,k,$);return}if(z!==2&&K&1&&rt)if(z===0)rt.beforeEnter(W),s(W,k,$),ai(()=>rt.enter(W),q);else{const{leave:lt,delayLeave:yt,afterLeave:xt}=rt,qt=()=>{P.ctx.isUnmounted?n(W):s(W,k,$)},he=()=>{lt(W,()=>{qt(),xt&&xt()})};yt?yt(W,qt,he):he()}else s(W,k,$)},Ct=(P,k,$,z=!1,q=!1)=>{const{type:W,props:at,ref:rt,children:it,dynamicChildren:K,shapeFlag:St,patchFlag:lt,dirs:yt,cacheIndex:xt}=P;if(lt===-2&&(q=!1),rt!=null&&(Br(),yp(rt,null,$,P,!0),Hr()),xt!=null&&(k.renderCache[xt]=void 0),St&256){k.ctx.deactivate(P);return}const qt=St&1&&yt,he=!nu(P);let te;if(he&&(te=at&&at.onVnodeBeforeUnmount)&&_n(te,k,P),St&6)Be(P.component,$,z);else{if(St&128){P.suspense.unmount($,z);return}qt&&aa(P,null,k,"beforeUnmount"),St&64?P.type.remove(P,k,$,ht,z):K&&!K.hasOnce&&(W!==ze||lt>0&&lt&64)?Xt(K,k,$,!1,!0):(W===ze&&lt&384||!q&&St&16)&&Xt(it,k,$),z&&Gt(P)}(he&&(te=at&&at.onVnodeUnmounted)||qt)&&ai(()=>{te&&_n(te,k,P),qt&&aa(P,null,k,"unmounted")},$)},Gt=P=>{const{type:k,el:$,anchor:z,transition:q}=P;if(k===ze){xe($,z);return}if(k===Df){R(P);return}const W=()=>{n($),q&&!q.persisted&&q.afterLeave&&q.afterLeave()};if(P.shapeFlag&1&&q&&!q.persisted){const{leave:at,delayLeave:rt}=q,it=()=>at($,W);rt?rt(P.el,W,it):it()}else W()},xe=(P,k)=>{let $;for(;P!==k;)$=p(P),n(P),P=$;n(k)},Be=(P,k,$)=>{const{bum:z,scope:q,job:W,subTree:at,um:rt,m:it,a:K,parent:St,slots:{__:lt}}=P;Ty(it),Ty(K),z&&Lf(z),St&&Tt(lt)&&lt.forEach(yt=>{St.renderCache[yt]=void 0}),q.stop(),W&&(W.flags|=8,Ct(at,P,k,$)),rt&&ai(rt,k),ai(()=>{P.isUnmounted=!0},k),k&&k.pendingBranch&&!k.isUnmounted&&P.asyncDep&&!P.asyncResolved&&P.suspenseId===k.pendingId&&(k.deps--,k.deps===0&&k.resolve())},Xt=(P,k,$,z=!1,q=!1,W=0)=>{for(let at=W;at<P.length;at++)Ct(P[at],k,$,z,q)},B=P=>{if(P.shapeFlag&6)return B(P.component.subTree);if(P.shapeFlag&128)return P.suspense.next();const k=p(P.anchor||P.el),$=k&&k[_C];return $?p($):k};let V=!1;const st=(P,k,$)=>{P==null?k._vnode&&Ct(k._vnode,null,null,!0):v(k._vnode||null,P,k,null,null,null,$),k._vnode=P,V||(V=!0,yy(),pA(),V=!1)},ht={p:v,um:Ct,m:bt,r:Gt,mt:Rt,mc:H,pc:et,pbc:Q,n:B,o:i};return{render:st,hydrate:void 0,createApp:VC(st)}}function om({type:i,props:t},e){return e==="svg"&&i==="foreignObject"||e==="mathml"&&i==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:e}function la({effect:i,job:t},e){e?(i.flags|=32,t.flags|=4):(i.flags&=-33,t.flags&=-5)}function JC(i,t){return(!i||i&&!i.pendingBranch)&&t&&!t.persisted}function LA(i,t,e=!1){const s=i.children,n=t.children;if(Tt(s)&&Tt(n))for(let r=0;r<s.length;r++){const o=s[r];let a=n[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[r]=Qr(n[r]),a.el=o.el),!e&&a.patchFlag!==-2&&LA(o,a)),a.type===ug&&(a.el=o.el),a.type===Vo&&!a.el&&(a.el=o.el)}}function ZC(i){const t=i.slice(),e=[0];let s,n,r,o,a;const c=i.length;for(s=0;s<c;s++){const h=i[s];if(h!==0){if(n=e[e.length-1],i[n]<h){t[s]=n,e.push(s);continue}for(r=0,o=e.length-1;r<o;)a=r+o>>1,i[e[a]]<h?r=a+1:o=a;h<i[e[r]]&&(r>0&&(t[s]=e[r-1]),e[r]=s)}}for(r=e.length,o=e[r-1];r-- >0;)e[r]=o,o=t[o];return e}function MA(i){const t=i.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:MA(t)}function Ty(i){if(i)for(let t=0;t<i.length;t++)i[t].flags|=8}const tT=Symbol.for("v-scx"),eT=()=>un(tT);function El(i,t,e){return DA(i,t,e)}function DA(i,t,e=ve){const{immediate:s,deep:n,flush:r,once:o}=e,a=Ls({},e),c=t&&s||!t&&r!=="post";let h;if(pu){if(r==="sync"){const g=eT();h=g.__watcherHandles||(g.__watcherHandles=[])}else if(!c){const g=()=>{};return g.stop=Un,g.resume=Un,g.pause=Un,g}}const u=ws;a.call=(g,_,v)=>qn(g,u,_,v);let f=!1;r==="post"?a.scheduler=g=>{ai(g,u&&u.suspense)}:r!=="sync"&&(f=!0,a.scheduler=(g,_)=>{_?g():dv(g)}),a.augmentJob=g=>{t&&(g.flags|=4),f&&(g.flags|=2,u&&(g.id=u.uid,g.i=u))};const p=gC(i,t,a);return pu&&(h?h.push(p):c&&p()),p}function sT(i,t,e){const s=this.proxy,n=Qe(i)?i.includes(".")?OA(s,i):()=>s[i]:i.bind(s,s);let r;Nt(t)?r=t:(r=t.handler,e=t);const o=Gd(this),a=DA(n,r.bind(s),e);return o(),a}function OA(i,t){const e=t.split(".");return()=>{let s=i;for(let n=0;n<e.length&&s;n++)s=s[e[n]];return s}}const iT=(i,t)=>t==="modelValue"||t==="model-value"?i.modelModifiers:i[`${t}Modifiers`]||i[`${qi(t)}Modifiers`]||i[`${Xo(t)}Modifiers`];function nT(i,t,...e){if(i.isUnmounted)return;const s=i.vnode.props||ve;let n=e;const r=t.startsWith("update:"),o=r&&iT(s,t.slice(7));o&&(o.trim&&(n=e.map(u=>Qe(u)?u.trim():u)),o.number&&(n=e.map(wm)));let a,c=s[a=tm(t)]||s[a=tm(qi(t))];!c&&r&&(c=s[a=tm(Xo(t))]),c&&qn(c,i,6,n);const h=s[a+"Once"];if(h){if(!i.emitted)i.emitted={};else if(i.emitted[a])return;i.emitted[a]=!0,qn(h,i,6,n)}}function NA(i,t,e=!1){const s=t.emitsCache,n=s.get(i);if(n!==void 0)return n;const r=i.emits;let o={},a=!1;if(!Nt(i)){const c=h=>{const u=NA(h,t,!0);u&&(a=!0,Ls(o,u))};!e&&t.mixins.length&&t.mixins.forEach(c),i.extends&&c(i.extends),i.mixins&&i.mixins.forEach(c)}return!r&&!a?(_e(i)&&s.set(i,null),null):(Tt(r)?r.forEach(c=>o[c]=null):Ls(o,r),_e(i)&&s.set(i,o),o)}function hg(i,t){return!i||!tg(t)?!1:(t=t.slice(2).replace(/Once$/,""),ne(i,t[0].toLowerCase()+t.slice(1))||ne(i,Xo(t))||ne(i,t))}function Py(i){const{type:t,vnode:e,proxy:s,withProxy:n,propsOptions:[r],slots:o,attrs:a,emit:c,render:h,renderCache:u,props:f,data:p,setupState:g,ctx:_,inheritAttrs:v}=i,E=_p(i);let S,C;try{if(e.shapeFlag&4){const R=n||s,I=R;S=jn(h.call(I,R,u,f,g,p,_)),C=a}else{const R=t;S=jn(R.length>1?R(f,{attrs:a,slots:o,emit:c}):R(f,null)),C=t.props?a:rT(a)}}catch(R){ou.length=0,lg(R,i,1),S=Ie(Vo)}let T=S;if(C&&v!==!1){const R=Object.keys(C),{shapeFlag:I}=T;R.length&&I&7&&(r&&R.some(ev)&&(C=oT(C,r)),T=_h(T,C,!1,!0))}return e.dirs&&(T=_h(T,null,!1,!0),T.dirs=T.dirs?T.dirs.concat(e.dirs):e.dirs),e.transition&&fv(T,e.transition),S=T,_p(E),S}const rT=i=>{let t;for(const e in i)(e==="class"||e==="style"||tg(e))&&((t||(t={}))[e]=i[e]);return t},oT=(i,t)=>{const e={};for(const s in i)(!ev(s)||!(s.slice(9)in t))&&(e[s]=i[s]);return e};function aT(i,t,e){const{props:s,children:n,component:r}=i,{props:o,children:a,patchFlag:c}=t,h=r.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&c>=0){if(c&1024)return!0;if(c&16)return s?Ry(s,o,h):!!o;if(c&8){const u=t.dynamicProps;for(let f=0;f<u.length;f++){const p=u[f];if(o[p]!==s[p]&&!hg(h,p))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?Ry(s,o,h):!0:!!o;return!1}function Ry(i,t,e){const s=Object.keys(t);if(s.length!==Object.keys(i).length)return!0;for(let n=0;n<s.length;n++){const r=s[n];if(t[r]!==i[r]&&!hg(e,r))return!0}return!1}function lT({vnode:i,parent:t},e){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===i&&(s.el=i.el),s===i)(i=t.vnode).el=e,t=t.parent;else break}}const FA=i=>i.__isSuspense;function cT(i,t){t&&t.pendingBranch?Tt(i)?t.effects.push(...i):t.effects.push(i):vC(i)}const ze=Symbol.for("v-fgt"),ug=Symbol.for("v-txt"),Vo=Symbol.for("v-cmt"),Df=Symbol.for("v-stc"),ou=[];let xi=null;function pt(i=!1){ou.push(xi=i?null:[])}function hT(){ou.pop(),xi=ou[ou.length-1]||null}let fu=1;function ky(i,t=!1){fu+=i,i<0&&xi&&t&&(xi.hasOnce=!0)}function $A(i){return i.dynamicChildren=fu>0?xi||oc:null,hT(),fu>0&&xi&&xi.push(i),i}function vt(i,t,e,s,n,r){return $A(L(i,t,e,s,n,r,!0))}function BA(i,t,e,s,n){return $A(Ie(i,t,e,s,n,!0))}function Ap(i){return i?i.__v_isVNode===!0:!1}function kh(i,t){return i.type===t.type&&i.key===t.key}const HA=({key:i})=>i??null,Of=({ref:i,ref_key:t,ref_for:e})=>(typeof i=="number"&&(i=""+i),i!=null?Qe(i)||Oe(i)||Nt(i)?{i:si,r:i,k:t,f:!!e}:i:null);function L(i,t=null,e=null,s=0,n=null,r=i===ze?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:i,props:t,key:t&&HA(t),ref:t&&Of(t),scopeId:mA,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:si};return a?(bv(c,e),r&128&&i.normalize(c)):e&&(c.shapeFlag|=Qe(e)?8:16),fu>0&&!o&&xi&&(c.patchFlag>0||r&6)&&c.patchFlag!==32&&xi.push(c),c}const Ie=uT;function uT(i,t=null,e=null,s=0,n=null,r=!1){if((!i||i===MC)&&(i=Vo),Ap(i)){const a=_h(i,t,!0);return e&&bv(a,e),fu>0&&!r&&xi&&(a.shapeFlag&6?xi[xi.indexOf(i)]=a:xi.push(a)),a.patchFlag=-2,a}if(AT(i)&&(i=i.__vccOpts),t){t=dT(t);let{class:a,style:c}=t;a&&!Qe(a)&&(t.class=Ho(a)),_e(c)&&(hv(c)&&!Tt(c)&&(c=Ls({},c)),t.style=rg(c))}const o=Qe(i)?1:FA(i)?128:yC(i)?64:_e(i)?4:Nt(i)?2:0;return L(i,t,e,s,n,o,r,!0)}function dT(i){return i?hv(i)||CA(i)?Ls({},i):i:null}function _h(i,t,e=!1,s=!1){const{props:n,ref:r,patchFlag:o,children:a,transition:c}=i,h=t?fT(n||{},t):n,u={__v_isVNode:!0,__v_skip:!0,type:i.type,props:h,key:h&&HA(h),ref:t&&t.ref?e&&r?Tt(r)?r.concat(Of(t)):[r,Of(t)]:Of(t):r,scopeId:i.scopeId,slotScopeIds:i.slotScopeIds,children:a,target:i.target,targetStart:i.targetStart,targetAnchor:i.targetAnchor,staticCount:i.staticCount,shapeFlag:i.shapeFlag,patchFlag:t&&i.type!==ze?o===-1?16:o|16:o,dynamicProps:i.dynamicProps,dynamicChildren:i.dynamicChildren,appContext:i.appContext,dirs:i.dirs,transition:c,component:i.component,suspense:i.suspense,ssContent:i.ssContent&&_h(i.ssContent),ssFallback:i.ssFallback&&_h(i.ssFallback),el:i.el,anchor:i.anchor,ctx:i.ctx,ce:i.ce};return c&&s&&fv(u,c.clone(u)),u}function Ee(i=" ",t=0){return Ie(ug,null,i,t)}function Sl(i,t){const e=Ie(Df,null,i);return e.staticCount=t,e}function is(i="",t=!1){return t?(pt(),BA(Vo,null,i)):Ie(Vo,null,i)}function jn(i){return i==null||typeof i=="boolean"?Ie(Vo):Tt(i)?Ie(ze,null,i.slice()):Ap(i)?Qr(i):Ie(ug,null,String(i))}function Qr(i){return i.el===null&&i.patchFlag!==-1||i.memo?i:_h(i)}function bv(i,t){let e=0;const{shapeFlag:s}=i;if(t==null)t=null;else if(Tt(t))e=16;else if(typeof t=="object")if(s&65){const n=t.default;n&&(n._c&&(n._d=!1),bv(i,n()),n._c&&(n._d=!0));return}else{e=32;const n=t._;!n&&!CA(t)?t._ctx=si:n===3&&si&&(si.slots._===1?t._=1:(t._=2,i.patchFlag|=1024))}else Nt(t)?(t={default:t,_ctx:si},e=32):(t=String(t),s&64?(e=16,t=[Ee(t)]):e=8);i.children=t,i.shapeFlag|=e}function fT(...i){const t={};for(let e=0;e<i.length;e++){const s=i[e];for(const n in s)if(n==="class")t.class!==s.class&&(t.class=Ho([t.class,s.class]));else if(n==="style")t.style=rg([t.style,s.style]);else if(tg(n)){const r=t[n],o=s[n];o&&r!==o&&!(Tt(r)&&r.includes(o))&&(t[n]=r?[].concat(r,o):o)}else n!==""&&(t[n]=s[n])}return t}function _n(i,t,e,s=null){qn(i,t,7,[e,s])}const pT=EA();let gT=0;function mT(i,t,e){const s=i.type,n=(t?t.appContext:i.appContext)||pT,r={uid:gT++,vnode:i,type:s,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new zw(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:PA(s,n),emitsOptions:NA(s,n),emit:null,emitted:null,propsDefaults:ve,inheritAttrs:s.inheritAttrs,ctx:ve,data:ve,props:ve,attrs:ve,slots:ve,refs:ve,setupState:ve,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=nT.bind(null,r),i.ce&&i.ce(r),r}let ws=null,Ep,Rm;{const i=ng(),t=(e,s)=>{let n;return(n=i[e])||(n=i[e]=[]),n.push(s),r=>{n.length>1?n.forEach(o=>o(r)):n[0](r)}};Ep=t("__VUE_INSTANCE_SETTERS__",e=>ws=e),Rm=t("__VUE_SSR_SETTERS__",e=>pu=e)}const Gd=i=>{const t=ws;return Ep(i),i.scope.on(),()=>{i.scope.off(),Ep(t)}},Iy=()=>{ws&&ws.scope.off(),Ep(null)};function jA(i){return i.vnode.shapeFlag&4}let pu=!1;function bT(i,t=!1,e=!1){t&&Rm(t);const{props:s,children:n}=i.vnode,r=jA(i);zC(i,s,r,t),XC(i,n,e||t);const o=r?vT(i,t):void 0;return t&&Rm(!1),o}function vT(i,t){const e=i.type;i.accessCache=Object.create(null),i.proxy=new Proxy(i.ctx,OC);const{setup:s}=e;if(s){Br();const n=i.setupContext=s.length>1?yT(i):null,r=Gd(i),o=qd(s,i,0,[i.props,n]),a=Nw(o);if(Hr(),r(),(a||i.sp)&&!nu(i)&&bA(i),a){if(o.then(Iy,Iy),t)return o.then(c=>{Ly(i,c)}).catch(c=>{lg(c,i,0)});i.asyncDep=o}else Ly(i,o)}else VA(i)}function Ly(i,t,e){Nt(t)?i.type.__ssrInlineRender?i.ssrRender=t:i.render=t:_e(t)&&(i.setupState=hA(t)),VA(i)}function VA(i,t,e){const s=i.type;i.render||(i.render=s.render||Un);{const n=Gd(i);Br();try{NC(i)}finally{Hr(),n()}}}const _T={get(i,t){return Is(i,"get",""),i[t]}};function yT(i){const t=e=>{i.exposed=e||{}};return{attrs:new Proxy(i.attrs,_T),slots:i.slots,emit:i.emit,expose:t}}function dg(i){return i.exposed?i.exposeProxy||(i.exposeProxy=new Proxy(hA(uv(i.exposed)),{get(t,e){if(e in t)return t[e];if(e in ru)return ru[e](i)},has(t,e){return e in t||e in ru}})):i.proxy}function wT(i,t=!0){return Nt(i)?i.displayName||i.name:i.name||t&&i.__name}function AT(i){return Nt(i)&&"__vccOpts"in i}const $e=(i,t)=>fC(i,t,pu);function UA(i,t,e){const s=arguments.length;return s===2?_e(t)&&!Tt(t)?Ap(t)?Ie(i,null,[t]):Ie(i,t):Ie(i,null,t):(s>3?e=Array.prototype.slice.call(arguments,2):s===3&&Ap(e)&&(e=[e]),Ie(i,t,e))}const ET="3.5.14";/**
* @vue/runtime-dom v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let km;const My=typeof window<"u"&&window.trustedTypes;if(My)try{km=My.createPolicy("vue",{createHTML:i=>i})}catch{}const zA=km?i=>km.createHTML(i):i=>i,ST="http://www.w3.org/2000/svg",xT="http://www.w3.org/1998/Math/MathML",sr=typeof document<"u"?document:null,Dy=sr&&sr.createElement("template"),CT={insert:(i,t,e)=>{t.insertBefore(i,e||null)},remove:i=>{const t=i.parentNode;t&&t.removeChild(i)},createElement:(i,t,e,s)=>{const n=t==="svg"?sr.createElementNS(ST,i):t==="mathml"?sr.createElementNS(xT,i):e?sr.createElement(i,{is:e}):sr.createElement(i);return i==="select"&&s&&s.multiple!=null&&n.setAttribute("multiple",s.multiple),n},createText:i=>sr.createTextNode(i),createComment:i=>sr.createComment(i),setText:(i,t)=>{i.nodeValue=t},setElementText:(i,t)=>{i.textContent=t},parentNode:i=>i.parentNode,nextSibling:i=>i.nextSibling,querySelector:i=>sr.querySelector(i),setScopeId(i,t){i.setAttribute(t,"")},insertStaticContent(i,t,e,s,n,r){const o=e?e.previousSibling:t.lastChild;if(n&&(n===r||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),e),!(n===r||!(n=n.nextSibling)););else{Dy.innerHTML=zA(s==="svg"?`<svg>${i}</svg>`:s==="mathml"?`<math>${i}</math>`:i);const a=Dy.content;if(s==="svg"||s==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}t.insertBefore(a,e)}return[o?o.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}},TT=Symbol("_vtc");function PT(i,t,e){const s=i[TT];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?i.removeAttribute("class"):e?i.setAttribute("class",t):i.className=t}const Sp=Symbol("_vod"),qA=Symbol("_vsh"),RT={beforeMount(i,{value:t},{transition:e}){i[Sp]=i.style.display==="none"?"":i.style.display,e&&t?e.beforeEnter(i):Ih(i,t)},mounted(i,{value:t},{transition:e}){e&&t&&e.enter(i)},updated(i,{value:t,oldValue:e},{transition:s}){!t!=!e&&(s?t?(s.beforeEnter(i),Ih(i,!0),s.enter(i)):s.leave(i,()=>{Ih(i,!1)}):Ih(i,t))},beforeUnmount(i,{value:t}){Ih(i,t)}};function Ih(i,t){i.style.display=t?i[Sp]:"none",i[qA]=!t}const kT=Symbol(""),IT=/(^|;)\s*display\s*:/;function LT(i,t,e){const s=i.style,n=Qe(e);let r=!1;if(e&&!n){if(t)if(Qe(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();e[a]==null&&Nf(s,a,"")}else for(const o in t)e[o]==null&&Nf(s,o,"");for(const o in e)o==="display"&&(r=!0),Nf(s,o,e[o])}else if(n){if(t!==e){const o=s[kT];o&&(e+=";"+o),s.cssText=e,r=IT.test(e)}}else t&&i.removeAttribute("style");Sp in i&&(i[Sp]=r?s.display:"",i[qA]&&(s.display="none"))}const Oy=/\s*!important$/;function Nf(i,t,e){if(Tt(e))e.forEach(s=>Nf(i,t,s));else if(e==null&&(e=""),t.startsWith("--"))i.setProperty(t,e);else{const s=MT(i,t);Oy.test(e)?i.setProperty(Xo(s),e.replace(Oy,""),"important"):i[s]=e}}const Ny=["Webkit","Moz","ms"],am={};function MT(i,t){const e=am[t];if(e)return e;let s=qi(t);if(s!=="filter"&&s in i)return am[t]=s;s=ig(s);for(let n=0;n<Ny.length;n++){const r=Ny[n]+s;if(r in i)return am[t]=r}return t}const Fy="http://www.w3.org/1999/xlink";function $y(i,t,e,s,n,r=F1(t)){s&&t.startsWith("xlink:")?e==null?i.removeAttributeNS(Fy,t.slice(6,t.length)):i.setAttributeNS(Fy,t,e):e==null||r&&!Hw(e)?i.removeAttribute(t):i.setAttribute(t,r?"":zn(e)?String(e):e)}function By(i,t,e,s,n){if(t==="innerHTML"||t==="textContent"){e!=null&&(i[t]=t==="innerHTML"?zA(e):e);return}const r=i.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?i.getAttribute("value")||"":i.value,c=e==null?i.type==="checkbox"?"on":"":String(e);(a!==c||!("_value"in i))&&(i.value=c),e==null&&i.removeAttribute(t),i._value=e;return}let o=!1;if(e===""||e==null){const a=typeof i[t];a==="boolean"?e=Hw(e):e==null&&a==="string"?(e="",o=!0):a==="number"&&(e=0,o=!0)}try{i[t]=e}catch{}o&&i.removeAttribute(n||t)}function pa(i,t,e,s){i.addEventListener(t,e,s)}function DT(i,t,e,s){i.removeEventListener(t,e,s)}const Hy=Symbol("_vei");function OT(i,t,e,s,n=null){const r=i[Hy]||(i[Hy]={}),o=r[t];if(s&&o)o.value=s;else{const[a,c]=NT(t);if(s){const h=r[t]=BT(s,n);pa(i,a,h,c)}else o&&(DT(i,a,o,c),r[t]=void 0)}}const jy=/(?:Once|Passive|Capture)$/;function NT(i){let t;if(jy.test(i)){t={};let s;for(;s=i.match(jy);)i=i.slice(0,i.length-s[0].length),t[s[0].toLowerCase()]=!0}return[i[2]===":"?i.slice(3):Xo(i.slice(2)),t]}let lm=0;const FT=Promise.resolve(),$T=()=>lm||(FT.then(()=>lm=0),lm=Date.now());function BT(i,t){const e=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=e.attached)return;qn(HT(s,e.value),t,5,[s])};return e.value=i,e.attached=$T(),e}function HT(i,t){if(Tt(t)){const e=i.stopImmediatePropagation;return i.stopImmediatePropagation=()=>{e.call(i),i._stopped=!0},t.map(s=>n=>!n._stopped&&s&&s(n))}else return t}const Vy=i=>i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&i.charCodeAt(2)>96&&i.charCodeAt(2)<123,jT=(i,t,e,s,n,r)=>{const o=n==="svg";t==="class"?PT(i,s,o):t==="style"?LT(i,e,s):tg(t)?ev(t)||OT(i,t,e,s,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):VT(i,t,s,o))?(By(i,t,s),!i.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&$y(i,t,s,o,r,t!=="value")):i._isVueCE&&(/[A-Z]/.test(t)||!Qe(s))?By(i,qi(t),s,r,t):(t==="true-value"?i._trueValue=s:t==="false-value"&&(i._falseValue=s),$y(i,t,s,o))};function VT(i,t,e,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in i&&Vy(t)&&Nt(e));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&i.tagName==="INPUT"||t==="type"&&i.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const n=i.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return Vy(t)&&Qe(e)?!1:t in i}const xp=i=>{const t=i.props["onUpdate:modelValue"]||!1;return Tt(t)?e=>Lf(t,e):t};function UT(i){i.target.composing=!0}function Uy(i){const t=i.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const cc=Symbol("_assign"),WA={created(i,{modifiers:{lazy:t,trim:e,number:s}},n){i[cc]=xp(n);const r=s||n.props&&n.props.type==="number";pa(i,t?"change":"input",o=>{if(o.target.composing)return;let a=i.value;e&&(a=a.trim()),r&&(a=wm(a)),i[cc](a)}),e&&pa(i,"change",()=>{i.value=i.value.trim()}),t||(pa(i,"compositionstart",UT),pa(i,"compositionend",Uy),pa(i,"change",Uy))},mounted(i,{value:t}){i.value=t??""},beforeUpdate(i,{value:t,oldValue:e,modifiers:{lazy:s,trim:n,number:r}},o){if(i[cc]=xp(o),i.composing)return;const a=(r||i.type==="number")&&!/^0\d/.test(i.value)?wm(i.value):i.value,c=t??"";a!==c&&(document.activeElement===i&&i.type!=="range"&&(s&&t===e||n&&i.value.trim()===c)||(i.value=c))}},ca={deep:!0,created(i,t,e){i[cc]=xp(e),pa(i,"change",()=>{const s=i._modelValue,n=zT(i),r=i.checked,o=i[cc];if(Tt(s)){const a=jw(s,n),c=a!==-1;if(r&&!c)o(s.concat(n));else if(!r&&c){const h=[...s];h.splice(a,1),o(h)}}else if(eg(s)){const a=new Set(s);r?a.add(n):a.delete(n),o(a)}else o(GA(i,r))})},mounted:zy,beforeUpdate(i,t,e){i[cc]=xp(e),zy(i,t,e)}};function zy(i,{value:t,oldValue:e},s){i._modelValue=t;let n;if(Tt(t))n=jw(t,s.props.value)>-1;else if(eg(t))n=t.has(s.props.value);else{if(t===e)return;n=og(t,GA(i,!0))}i.checked!==n&&(i.checked=n)}function zT(i){return"_value"in i?i._value:i.value}function GA(i,t){const e=t?"_trueValue":"_falseValue";return e in i?i[e]:t}const qT=["ctrl","shift","alt","meta"],WT={stop:i=>i.stopPropagation(),prevent:i=>i.preventDefault(),self:i=>i.target!==i.currentTarget,ctrl:i=>!i.ctrlKey,shift:i=>!i.shiftKey,alt:i=>!i.altKey,meta:i=>!i.metaKey,left:i=>"button"in i&&i.button!==0,middle:i=>"button"in i&&i.button!==1,right:i=>"button"in i&&i.button!==2,exact:(i,t)=>qT.some(e=>i[`${e}Key`]&&!t.includes(e))},qy=(i,t)=>{const e=i._withMods||(i._withMods={}),s=t.join(".");return e[s]||(e[s]=(n,...r)=>{for(let o=0;o<t.length;o++){const a=WT[t[o]];if(a&&a(n,t))return}return i(n,...r)})},GT={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},XT=(i,t)=>{const e=i._withKeys||(i._withKeys={}),s=t.join(".");return e[s]||(e[s]=n=>{if(!("key"in n))return;const r=Xo(n.key);if(t.some(o=>o===r||GT[o]===r))return i(n)})},KT=Ls({patchProp:jT},CT);let Wy;function YT(){return Wy||(Wy=YC(KT))}const QT=(...i)=>{const t=YT().createApp(...i),{mount:e}=t;return t.mount=s=>{const n=ZT(s);if(!n)return;const r=t._component;!Nt(r)&&!r.render&&!r.template&&(r.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const o=e(n,!1,JT(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},t};function JT(i){if(i instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&i instanceof MathMLElement)return"mathml"}function ZT(i){return Qe(i)?document.querySelector(i):i}/*!
 * pinia v3.0.2
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let XA;const fg=i=>XA=i,KA=Symbol();function Im(i){return i&&typeof i=="object"&&Object.prototype.toString.call(i)==="[object Object]"&&typeof i.toJSON!="function"}var au;(function(i){i.direct="direct",i.patchObject="patch object",i.patchFunction="patch function"})(au||(au={}));function tP(){const i=qw(!0),t=i.run(()=>zt({}));let e=[],s=[];const n=uv({install(r){fg(n),n._a=r,r.provide(KA,n),r.config.globalProperties.$pinia=n,s.forEach(o=>e.push(o)),s=[]},use(r){return this._a?e.push(r):s.push(r),this},_p:e,_a:null,_e:i,_s:new Map,state:t});return n}const YA=()=>{};function Gy(i,t,e,s=YA){i.push(t);const n=()=>{const r=i.indexOf(t);r>-1&&(i.splice(r,1),s())};return!e&&Ww()&&B1(n),n}function Wl(i,...t){i.slice().forEach(e=>{e(...t)})}const eP=i=>i(),Xy=Symbol(),cm=Symbol();function Lm(i,t){i instanceof Map&&t instanceof Map?t.forEach((e,s)=>i.set(s,e)):i instanceof Set&&t instanceof Set&&t.forEach(i.add,i);for(const e in t){if(!t.hasOwnProperty(e))continue;const s=t[e],n=i[e];Im(n)&&Im(s)&&i.hasOwnProperty(e)&&!Oe(s)&&!Nr(s)?i[e]=Lm(n,s):i[e]=s}return i}const sP=Symbol();function iP(i){return!Im(i)||!Object.prototype.hasOwnProperty.call(i,sP)}const{assign:Xr}=Object;function nP(i){return!!(Oe(i)&&i.effect)}function rP(i,t,e,s){const{state:n,actions:r,getters:o}=t,a=e.state.value[i];let c;function h(){a||(e.state.value[i]=n?n():{});const u=lC(e.state.value[i]);return Xr(u,r,Object.keys(o||{}).reduce((f,p)=>(f[p]=uv($e(()=>{fg(e);const g=e._s.get(i);return o[p].call(g,g)})),f),{}))}return c=QA(i,h,t,e,s,!0),c}function QA(i,t,e={},s,n,r){let o;const a=Xr({actions:{}},e),c={deep:!0};let h,u,f=[],p=[],g;const _=s.state.value[i];!r&&!_&&(s.state.value[i]={}),zt({});let v;function E(H){let U;h=u=!1,typeof H=="function"?(H(s.state.value[i]),U={type:au.patchFunction,storeId:i,events:g}):(Lm(s.state.value[i],H),U={type:au.patchObject,payload:H,storeId:i,events:g});const Q=v=Symbol();$o().then(()=>{v===Q&&(h=!0)}),u=!0,Wl(f,U,s.state.value[i])}const S=r?function(){const{state:U}=e,Q=U?U():{};this.$patch(tt=>{Xr(tt,Q)})}:YA;function C(){o.stop(),f=[],p=[],s._s.delete(i)}const T=(H,U="")=>{if(Xy in H)return H[cm]=U,H;const Q=function(){fg(s);const tt=Array.from(arguments),Et=[],At=[];function Rt(X){Et.push(X)}function oe(X){At.push(X)}Wl(p,{args:tt,name:Q[cm],store:I,after:Rt,onError:oe});let J;try{J=H.apply(this&&this.$id===i?this:I,tt)}catch(X){throw Wl(At,X),X}return J instanceof Promise?J.then(X=>(Wl(Et,X),X)).catch(X=>(Wl(At,X),Promise.reject(X))):(Wl(Et,J),J)};return Q[Xy]=!0,Q[cm]=U,Q},R={_p:s,$id:i,$onAction:Gy.bind(null,p),$patch:E,$reset:S,$subscribe(H,U={}){const Q=Gy(f,H,U.detached,()=>tt()),tt=o.run(()=>El(()=>s.state.value[i],Et=>{(U.flush==="sync"?u:h)&&H({storeId:i,type:au.direct,events:g},Et)},Xr({},c,U)));return Q},$dispose:C},I=zd(R);s._s.set(i,I);const N=(s._a&&s._a.runWithContext||eP)(()=>s._e.run(()=>(o=qw()).run(()=>t({action:T}))));for(const H in N){const U=N[H];if(Oe(U)&&!nP(U)||Nr(U))r||(_&&iP(U)&&(Oe(U)?U.value=_[H]:Lm(U,_[H])),s.state.value[i][H]=U);else if(typeof U=="function"){const Q=T(U,H);N[H]=Q,a.actions[H]=U}}return Xr(I,N),Xr(Qt(I),N),Object.defineProperty(I,"$state",{get:()=>s.state.value[i],set:H=>{E(U=>{Xr(U,H)})}}),s._p.forEach(H=>{Xr(I,o.run(()=>H({store:I,app:s._a,pinia:s,options:a})))}),_&&r&&e.hydrate&&e.hydrate(I.$state,_),h=!0,u=!0,I}/*! #__NO_SIDE_EFFECTS__ */function oP(i,t,e){let s;const n=typeof t=="function";s=n?e:t;function r(o,a){const c=UC();return o=o||(c?un(KA,null):null),o&&fg(o),o=XA,o._s.has(i)||(n?QA(i,t,s,o):rP(i,s,o)),o._s.get(i)}return r.$id=i,r}function aP(i){const t=Qt(i),e={};for(const s in t){const n=t[s];n.effect?e[s]=$e({get:()=>i[s],set(r){i[s]=r}}):(Oe(n)||Nr(n))&&(e[s]=uC(i,s))}return e}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const Xl=typeof document<"u";function JA(i){return typeof i=="object"||"displayName"in i||"props"in i||"__vccOpts"in i}function lP(i){return i.__esModule||i[Symbol.toStringTag]==="Module"||i.default&&JA(i.default)}const ie=Object.assign;function hm(i,t){const e={};for(const s in t){const n=t[s];e[s]=dn(n)?n.map(i):i(n)}return e}const lu=()=>{},dn=Array.isArray,ZA=/#/g,cP=/&/g,hP=/\//g,uP=/=/g,dP=/\?/g,t0=/\+/g,fP=/%5B/g,pP=/%5D/g,e0=/%5E/g,gP=/%60/g,s0=/%7B/g,mP=/%7C/g,i0=/%7D/g,bP=/%20/g;function vv(i){return encodeURI(""+i).replace(mP,"|").replace(fP,"[").replace(pP,"]")}function vP(i){return vv(i).replace(s0,"{").replace(i0,"}").replace(e0,"^")}function Mm(i){return vv(i).replace(t0,"%2B").replace(bP,"+").replace(ZA,"%23").replace(cP,"%26").replace(gP,"`").replace(s0,"{").replace(i0,"}").replace(e0,"^")}function _P(i){return Mm(i).replace(uP,"%3D")}function yP(i){return vv(i).replace(ZA,"%23").replace(dP,"%3F")}function wP(i){return i==null?"":yP(i).replace(hP,"%2F")}function gu(i){try{return decodeURIComponent(""+i)}catch{}return""+i}const AP=/\/$/,EP=i=>i.replace(AP,"");function um(i,t,e="/"){let s,n={},r="",o="";const a=t.indexOf("#");let c=t.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(s=t.slice(0,c),r=t.slice(c+1,a>-1?a:t.length),n=i(r)),a>-1&&(s=s||t.slice(0,a),o=t.slice(a,t.length)),s=TP(s??t,e),{fullPath:s+(r&&"?")+r+o,path:s,query:n,hash:gu(o)}}function SP(i,t){const e=t.query?i(t.query):"";return t.path+(e&&"?")+e+(t.hash||"")}function Ky(i,t){return!t||!i.toLowerCase().startsWith(t.toLowerCase())?i:i.slice(t.length)||"/"}function xP(i,t,e){const s=t.matched.length-1,n=e.matched.length-1;return s>-1&&s===n&&yh(t.matched[s],e.matched[n])&&n0(t.params,e.params)&&i(t.query)===i(e.query)&&t.hash===e.hash}function yh(i,t){return(i.aliasOf||i)===(t.aliasOf||t)}function n0(i,t){if(Object.keys(i).length!==Object.keys(t).length)return!1;for(const e in i)if(!CP(i[e],t[e]))return!1;return!0}function CP(i,t){return dn(i)?Yy(i,t):dn(t)?Yy(t,i):i===t}function Yy(i,t){return dn(t)?i.length===t.length&&i.every((e,s)=>e===t[s]):i.length===1&&i[0]===t}function TP(i,t){if(i.startsWith("/"))return i;if(!i)return t;const e=t.split("/"),s=i.split("/"),n=s[s.length-1];(n===".."||n===".")&&s.push("");let r=e.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")r>1&&r--;else break;return e.slice(0,r).join("/")+"/"+s.slice(o).join("/")}const Gr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var mu;(function(i){i.pop="pop",i.push="push"})(mu||(mu={}));var cu;(function(i){i.back="back",i.forward="forward",i.unknown=""})(cu||(cu={}));function PP(i){if(!i)if(Xl){const t=document.querySelector("base");i=t&&t.getAttribute("href")||"/",i=i.replace(/^\w+:\/\/[^\/]+/,"")}else i="/";return i[0]!=="/"&&i[0]!=="#"&&(i="/"+i),EP(i)}const RP=/^[^#]+#/;function kP(i,t){return i.replace(RP,"#")+t}function IP(i,t){const e=document.documentElement.getBoundingClientRect(),s=i.getBoundingClientRect();return{behavior:t.behavior,left:s.left-e.left-(t.left||0),top:s.top-e.top-(t.top||0)}}const pg=()=>({left:window.scrollX,top:window.scrollY});function LP(i){let t;if("el"in i){const e=i.el,s=typeof e=="string"&&e.startsWith("#"),n=typeof e=="string"?s?document.getElementById(e.slice(1)):document.querySelector(e):e;if(!n)return;t=IP(n,i)}else t=i;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Qy(i,t){return(history.state?history.state.position-t:-1)+i}const Dm=new Map;function MP(i,t){Dm.set(i,t)}function DP(i){const t=Dm.get(i);return Dm.delete(i),t}let OP=()=>location.protocol+"//"+location.host;function r0(i,t){const{pathname:e,search:s,hash:n}=t,r=i.indexOf("#");if(r>-1){let a=n.includes(i.slice(r))?i.slice(r).length:1,c=n.slice(a);return c[0]!=="/"&&(c="/"+c),Ky(c,"")}return Ky(e,i)+s+n}function NP(i,t,e,s){let n=[],r=[],o=null;const a=({state:p})=>{const g=r0(i,location),_=e.value,v=t.value;let E=0;if(p){if(e.value=g,t.value=p,o&&o===_){o=null;return}E=v?p.position-v.position:0}else s(g);n.forEach(S=>{S(e.value,_,{delta:E,type:mu.pop,direction:E?E>0?cu.forward:cu.back:cu.unknown})})};function c(){o=e.value}function h(p){n.push(p);const g=()=>{const _=n.indexOf(p);_>-1&&n.splice(_,1)};return r.push(g),g}function u(){const{history:p}=window;p.state&&p.replaceState(ie({},p.state,{scroll:pg()}),"")}function f(){for(const p of r)p();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:c,listen:h,destroy:f}}function Jy(i,t,e,s=!1,n=!1){return{back:i,current:t,forward:e,replaced:s,position:window.history.length,scroll:n?pg():null}}function FP(i){const{history:t,location:e}=window,s={value:r0(i,e)},n={value:t.state};n.value||r(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(c,h,u){const f=i.indexOf("#"),p=f>-1?(e.host&&document.querySelector("base")?i:i.slice(f))+c:OP()+i+c;try{t[u?"replaceState":"pushState"](h,"",p),n.value=h}catch(g){console.error(g),e[u?"replace":"assign"](p)}}function o(c,h){const u=ie({},t.state,Jy(n.value.back,c,n.value.forward,!0),h,{position:n.value.position});r(c,u,!0),s.value=c}function a(c,h){const u=ie({},n.value,t.state,{forward:c,scroll:pg()});r(u.current,u,!0);const f=ie({},Jy(s.value,c,null),{position:u.position+1},h);r(c,f,!1),s.value=c}return{location:s,state:n,push:a,replace:o}}function $P(i){i=PP(i);const t=FP(i),e=NP(i,t.state,t.location,t.replace);function s(r,o=!0){o||e.pauseListeners(),history.go(r)}const n=ie({location:"",base:i,go:s,createHref:kP.bind(null,i)},t,e);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>t.state.value}),n}function BP(i){return i=location.host?i||location.pathname+location.search:"",i.includes("#")||(i+="#"),$P(i)}function HP(i){return typeof i=="string"||i&&typeof i=="object"}function o0(i){return typeof i=="string"||typeof i=="symbol"}const a0=Symbol("");var Zy;(function(i){i[i.aborted=4]="aborted",i[i.cancelled=8]="cancelled",i[i.duplicated=16]="duplicated"})(Zy||(Zy={}));function wh(i,t){return ie(new Error,{type:i,[a0]:!0},t)}function Jn(i,t){return i instanceof Error&&a0 in i&&(t==null||!!(i.type&t))}const tw="[^/]+?",jP={sensitive:!1,strict:!1,start:!0,end:!0},VP=/[.+*?^${}()[\]/\\]/g;function UP(i,t){const e=ie({},jP,t),s=[];let n=e.start?"^":"";const r=[];for(const h of i){const u=h.length?[]:[90];e.strict&&!h.length&&(n+="/");for(let f=0;f<h.length;f++){const p=h[f];let g=40+(e.sensitive?.25:0);if(p.type===0)f||(n+="/"),n+=p.value.replace(VP,"\\$&"),g+=40;else if(p.type===1){const{value:_,repeatable:v,optional:E,regexp:S}=p;r.push({name:_,repeatable:v,optional:E});const C=S||tw;if(C!==tw){g+=10;try{new RegExp(`(${C})`)}catch(R){throw new Error(`Invalid custom RegExp for param "${_}" (${C}): `+R.message)}}let T=v?`((?:${C})(?:/(?:${C}))*)`:`(${C})`;f||(T=E&&h.length<2?`(?:/${T})`:"/"+T),E&&(T+="?"),n+=T,g+=20,E&&(g+=-8),v&&(g+=-20),C===".*"&&(g+=-50)}u.push(g)}s.push(u)}if(e.strict&&e.end){const h=s.length-1;s[h][s[h].length-1]+=.7000000000000001}e.strict||(n+="/?"),e.end?n+="$":e.strict&&!n.endsWith("/")&&(n+="(?:/|$)");const o=new RegExp(n,e.sensitive?"":"i");function a(h){const u=h.match(o),f={};if(!u)return null;for(let p=1;p<u.length;p++){const g=u[p]||"",_=r[p-1];f[_.name]=g&&_.repeatable?g.split("/"):g}return f}function c(h){let u="",f=!1;for(const p of i){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const g of p)if(g.type===0)u+=g.value;else if(g.type===1){const{value:_,repeatable:v,optional:E}=g,S=_ in h?h[_]:"";if(dn(S)&&!v)throw new Error(`Provided param "${_}" is an array but it is not repeatable (* or + modifiers)`);const C=dn(S)?S.join("/"):S;if(!C)if(E)p.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${_}"`);u+=C}}return u||"/"}return{re:o,score:s,keys:r,parse:a,stringify:c}}function zP(i,t){let e=0;for(;e<i.length&&e<t.length;){const s=t[e]-i[e];if(s)return s;e++}return i.length<t.length?i.length===1&&i[0]===80?-1:1:i.length>t.length?t.length===1&&t[0]===80?1:-1:0}function l0(i,t){let e=0;const s=i.score,n=t.score;for(;e<s.length&&e<n.length;){const r=zP(s[e],n[e]);if(r)return r;e++}if(Math.abs(n.length-s.length)===1){if(ew(s))return 1;if(ew(n))return-1}return n.length-s.length}function ew(i){const t=i[i.length-1];return i.length>0&&t[t.length-1]<0}const qP={type:0,value:""},WP=/[a-zA-Z0-9_]/;function GP(i){if(!i)return[[]];if(i==="/")return[[qP]];if(!i.startsWith("/"))throw new Error(`Invalid path "${i}"`);function t(g){throw new Error(`ERR (${e})/"${h}": ${g}`)}let e=0,s=e;const n=[];let r;function o(){r&&n.push(r),r=[]}let a=0,c,h="",u="";function f(){h&&(e===0?r.push({type:0,value:h}):e===1||e===2||e===3?(r.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:h,regexp:u,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),h="")}function p(){h+=c}for(;a<i.length;){if(c=i[a++],c==="\\"&&e!==2){s=e,e=4;continue}switch(e){case 0:c==="/"?(h&&f(),o()):c===":"?(f(),e=1):p();break;case 4:p(),e=s;break;case 1:c==="("?e=2:WP.test(c)?p():(f(),e=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+c:e=3:u+=c;break;case 3:f(),e=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,u="";break;default:t("Unknown state");break}}return e===2&&t(`Unfinished custom RegExp for param "${h}"`),f(),o(),n}function XP(i,t,e){const s=UP(GP(i.path),e),n=ie(s,{record:i,parent:t,children:[],alias:[]});return t&&!n.record.aliasOf==!t.record.aliasOf&&t.children.push(n),n}function KP(i,t){const e=[],s=new Map;t=rw({strict:!1,end:!0,sensitive:!1},t);function n(f){return s.get(f)}function r(f,p,g){const _=!g,v=iw(f);v.aliasOf=g&&g.record;const E=rw(t,f),S=[v];if("alias"in f){const R=typeof f.alias=="string"?[f.alias]:f.alias;for(const I of R)S.push(iw(ie({},v,{components:g?g.record.components:v.components,path:I,aliasOf:g?g.record:v})))}let C,T;for(const R of S){const{path:I}=R;if(p&&I[0]!=="/"){const F=p.record.path,N=F[F.length-1]==="/"?"":"/";R.path=p.record.path+(I&&N+I)}if(C=XP(R,p,E),g?g.alias.push(C):(T=T||C,T!==C&&T.alias.push(C),_&&f.name&&!nw(C)&&o(f.name)),c0(C)&&c(C),v.children){const F=v.children;for(let N=0;N<F.length;N++)r(F[N],C,g&&g.children[N])}g=g||C}return T?()=>{o(T)}:lu}function o(f){if(o0(f)){const p=s.get(f);p&&(s.delete(f),e.splice(e.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=e.indexOf(f);p>-1&&(e.splice(p,1),f.record.name&&s.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function a(){return e}function c(f){const p=JP(f,e);e.splice(p,0,f),f.record.name&&!nw(f)&&s.set(f.record.name,f)}function h(f,p){let g,_={},v,E;if("name"in f&&f.name){if(g=s.get(f.name),!g)throw wh(1,{location:f});E=g.record.name,_=ie(sw(p.params,g.keys.filter(T=>!T.optional).concat(g.parent?g.parent.keys.filter(T=>T.optional):[]).map(T=>T.name)),f.params&&sw(f.params,g.keys.map(T=>T.name))),v=g.stringify(_)}else if(f.path!=null)v=f.path,g=e.find(T=>T.re.test(v)),g&&(_=g.parse(v),E=g.record.name);else{if(g=p.name?s.get(p.name):e.find(T=>T.re.test(p.path)),!g)throw wh(1,{location:f,currentLocation:p});E=g.record.name,_=ie({},p.params,f.params),v=g.stringify(_)}const S=[];let C=g;for(;C;)S.unshift(C.record),C=C.parent;return{name:E,path:v,params:_,matched:S,meta:QP(S)}}i.forEach(f=>r(f));function u(){e.length=0,s.clear()}return{addRoute:r,resolve:h,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:n}}function sw(i,t){const e={};for(const s of t)s in i&&(e[s]=i[s]);return e}function iw(i){const t={path:i.path,redirect:i.redirect,name:i.name,meta:i.meta||{},aliasOf:i.aliasOf,beforeEnter:i.beforeEnter,props:YP(i),children:i.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in i?i.components||null:i.component&&{default:i.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function YP(i){const t={},e=i.props||!1;if("component"in i)t.default=e;else for(const s in i.components)t[s]=typeof e=="object"?e[s]:e;return t}function nw(i){for(;i;){if(i.record.aliasOf)return!0;i=i.parent}return!1}function QP(i){return i.reduce((t,e)=>ie(t,e.meta),{})}function rw(i,t){const e={};for(const s in i)e[s]=s in t?t[s]:i[s];return e}function JP(i,t){let e=0,s=t.length;for(;e!==s;){const r=e+s>>1;l0(i,t[r])<0?s=r:e=r+1}const n=ZP(i);return n&&(s=t.lastIndexOf(n,s-1)),s}function ZP(i){let t=i;for(;t=t.parent;)if(c0(t)&&l0(i,t)===0)return t}function c0({record:i}){return!!(i.name||i.components&&Object.keys(i.components).length||i.redirect)}function tR(i){const t={};if(i===""||i==="?")return t;const s=(i[0]==="?"?i.slice(1):i).split("&");for(let n=0;n<s.length;++n){const r=s[n].replace(t0," "),o=r.indexOf("="),a=gu(o<0?r:r.slice(0,o)),c=o<0?null:gu(r.slice(o+1));if(a in t){let h=t[a];dn(h)||(h=t[a]=[h]),h.push(c)}else t[a]=c}return t}function ow(i){let t="";for(let e in i){const s=i[e];if(e=_P(e),s==null){s!==void 0&&(t+=(t.length?"&":"")+e);continue}(dn(s)?s.map(r=>r&&Mm(r)):[s&&Mm(s)]).forEach(r=>{r!==void 0&&(t+=(t.length?"&":"")+e,r!=null&&(t+="="+r))})}return t}function eR(i){const t={};for(const e in i){const s=i[e];s!==void 0&&(t[e]=dn(s)?s.map(n=>n==null?null:""+n):s==null?s:""+s)}return t}const sR=Symbol(""),aw=Symbol(""),_v=Symbol(""),yv=Symbol(""),Om=Symbol("");function Lh(){let i=[];function t(s){return i.push(s),()=>{const n=i.indexOf(s);n>-1&&i.splice(n,1)}}function e(){i=[]}return{add:t,list:()=>i.slice(),reset:e}}function Jr(i,t,e,s,n,r=o=>o()){const o=s&&(s.enterCallbacks[n]=s.enterCallbacks[n]||[]);return()=>new Promise((a,c)=>{const h=p=>{p===!1?c(wh(4,{from:e,to:t})):p instanceof Error?c(p):HP(p)?c(wh(2,{from:t,to:p})):(o&&s.enterCallbacks[n]===o&&typeof p=="function"&&o.push(p),a())},u=r(()=>i.call(s&&s.instances[n],t,e,h));let f=Promise.resolve(u);i.length<3&&(f=f.then(h)),f.catch(p=>c(p))})}function dm(i,t,e,s,n=r=>r()){const r=[];for(const o of i)for(const a in o.components){let c=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(JA(c)){const u=(c.__vccOpts||c)[t];u&&r.push(Jr(u,e,s,o,a,n))}else{let h=c();r.push(()=>h.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const f=lP(u)?u.default:u;o.mods[a]=u,o.components[a]=f;const g=(f.__vccOpts||f)[t];return g&&Jr(g,e,s,o,a,n)()}))}}return r}function lw(i){const t=un(_v),e=un(yv),s=$e(()=>{const c=De(i.to);return t.resolve(c)}),n=$e(()=>{const{matched:c}=s.value,{length:h}=c,u=c[h-1],f=e.matched;if(!u||!f.length)return-1;const p=f.findIndex(yh.bind(null,u));if(p>-1)return p;const g=cw(c[h-2]);return h>1&&cw(u)===g&&f[f.length-1].path!==g?f.findIndex(yh.bind(null,c[h-2])):p}),r=$e(()=>n.value>-1&&oR(e.params,s.value.params)),o=$e(()=>n.value>-1&&n.value===e.matched.length-1&&n0(e.params,s.value.params));function a(c={}){if(rR(c)){const h=t[De(i.replace)?"replace":"push"](De(i.to)).catch(lu);return i.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>h),h}return Promise.resolve()}return{route:s,href:$e(()=>s.value.href),isActive:r,isExactActive:o,navigate:a}}function iR(i){return i.length===1?i[0]:i}const nR=Gn({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:lw,setup(i,{slots:t}){const e=zd(lw(i)),{options:s}=un(_v),n=$e(()=>({[hw(i.activeClass,s.linkActiveClass,"router-link-active")]:e.isActive,[hw(i.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:e.isExactActive}));return()=>{const r=t.default&&iR(t.default(e));return i.custom?r:UA("a",{"aria-current":e.isExactActive?i.ariaCurrentValue:null,href:e.href,onClick:e.navigate,class:n.value},r)}}}),Ff=nR;function rR(i){if(!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)&&!i.defaultPrevented&&!(i.button!==void 0&&i.button!==0)){if(i.currentTarget&&i.currentTarget.getAttribute){const t=i.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return i.preventDefault&&i.preventDefault(),!0}}function oR(i,t){for(const e in t){const s=t[e],n=i[e];if(typeof s=="string"){if(s!==n)return!1}else if(!dn(n)||n.length!==s.length||s.some((r,o)=>r!==n[o]))return!1}return!0}function cw(i){return i?i.aliasOf?i.aliasOf.path:i.path:""}const hw=(i,t,e)=>i??t??e,aR=Gn({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(i,{attrs:t,slots:e}){const s=un(Om),n=$e(()=>i.route||s.value),r=un(aw,0),o=$e(()=>{let h=De(r);const{matched:u}=n.value;let f;for(;(f=u[h])&&!f.components;)h++;return h}),a=$e(()=>n.value.matched[o.value]);Mf(aw,$e(()=>o.value+1)),Mf(sR,a),Mf(Om,n);const c=zt();return El(()=>[c.value,a.value,i.name],([h,u,f],[p,g,_])=>{u&&(u.instances[f]=h,g&&g!==u&&h&&h===p&&(u.leaveGuards.size||(u.leaveGuards=g.leaveGuards),u.updateGuards.size||(u.updateGuards=g.updateGuards))),h&&u&&(!g||!yh(u,g)||!p)&&(u.enterCallbacks[f]||[]).forEach(v=>v(h))},{flush:"post"}),()=>{const h=n.value,u=i.name,f=a.value,p=f&&f.components[u];if(!p)return uw(e.default,{Component:p,route:h});const g=f.props[u],_=g?g===!0?h.params:typeof g=="function"?g(h):g:null,E=UA(p,ie({},_,t,{onVnodeUnmounted:S=>{S.component.isUnmounted&&(f.instances[u]=null)},ref:c}));return uw(e.default,{Component:E,route:h})||E}}});function uw(i,t){if(!i)return null;const e=i(t);return e.length===1?e[0]:e}const h0=aR;function lR(i){const t=KP(i.routes,i),e=i.parseQuery||tR,s=i.stringifyQuery||ow,n=i.history,r=Lh(),o=Lh(),a=Lh(),c=rC(Gr);let h=Gr;Xl&&i.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=hm.bind(null,B=>""+B),f=hm.bind(null,wP),p=hm.bind(null,gu);function g(B,V){let st,ht;return o0(B)?(st=t.getRecordMatcher(B),ht=V):ht=B,t.addRoute(ht,st)}function _(B){const V=t.getRecordMatcher(B);V&&t.removeRoute(V)}function v(){return t.getRoutes().map(B=>B.record)}function E(B){return!!t.getRecordMatcher(B)}function S(B,V){if(V=ie({},V||c.value),typeof B=="string"){const $=um(e,B,V.path),z=t.resolve({path:$.path},V),q=n.createHref($.fullPath);return ie($,z,{params:p(z.params),hash:gu($.hash),redirectedFrom:void 0,href:q})}let st;if(B.path!=null)st=ie({},B,{path:um(e,B.path,V.path).path});else{const $=ie({},B.params);for(const z in $)$[z]==null&&delete $[z];st=ie({},B,{params:f($)}),V.params=f(V.params)}const ht=t.resolve(st,V),$t=B.hash||"";ht.params=u(p(ht.params));const P=SP(s,ie({},B,{hash:vP($t),path:ht.path})),k=n.createHref(P);return ie({fullPath:P,hash:$t,query:s===ow?eR(B.query):B.query||{}},ht,{redirectedFrom:void 0,href:k})}function C(B){return typeof B=="string"?um(e,B,c.value.path):ie({},B)}function T(B,V){if(h!==B)return wh(8,{from:V,to:B})}function R(B){return N(B)}function I(B){return R(ie(C(B),{replace:!0}))}function F(B){const V=B.matched[B.matched.length-1];if(V&&V.redirect){const{redirect:st}=V;let ht=typeof st=="function"?st(B):st;return typeof ht=="string"&&(ht=ht.includes("?")||ht.includes("#")?ht=C(ht):{path:ht},ht.params={}),ie({query:B.query,hash:B.hash,params:ht.path!=null?{}:B.params},ht)}}function N(B,V){const st=h=S(B),ht=c.value,$t=B.state,P=B.force,k=B.replace===!0,$=F(st);if($)return N(ie(C($),{state:typeof $=="object"?ie({},$t,$.state):$t,force:P,replace:k}),V||st);const z=st;z.redirectedFrom=V;let q;return!P&&xP(s,ht,st)&&(q=wh(16,{to:z,from:ht}),bt(ht,ht,!0,!1)),(q?Promise.resolve(q):Q(z,ht)).catch(W=>Jn(W)?Jn(W,2)?W:M(W):et(W,z,ht)).then(W=>{if(W){if(Jn(W,2))return N(ie({replace:k},C(W.to),{state:typeof W.to=="object"?ie({},$t,W.to.state):$t,force:P}),V||z)}else W=Et(z,ht,!0,k,$t);return tt(z,ht,W),W})}function H(B,V){const st=T(B,V);return st?Promise.reject(st):Promise.resolve()}function U(B){const V=xe.values().next().value;return V&&typeof V.runWithContext=="function"?V.runWithContext(B):B()}function Q(B,V){let st;const[ht,$t,P]=cR(B,V);st=dm(ht.reverse(),"beforeRouteLeave",B,V);for(const $ of ht)$.leaveGuards.forEach(z=>{st.push(Jr(z,B,V))});const k=H.bind(null,B,V);return st.push(k),Xt(st).then(()=>{st=[];for(const $ of r.list())st.push(Jr($,B,V));return st.push(k),Xt(st)}).then(()=>{st=dm($t,"beforeRouteUpdate",B,V);for(const $ of $t)$.updateGuards.forEach(z=>{st.push(Jr(z,B,V))});return st.push(k),Xt(st)}).then(()=>{st=[];for(const $ of P)if($.beforeEnter)if(dn($.beforeEnter))for(const z of $.beforeEnter)st.push(Jr(z,B,V));else st.push(Jr($.beforeEnter,B,V));return st.push(k),Xt(st)}).then(()=>(B.matched.forEach($=>$.enterCallbacks={}),st=dm(P,"beforeRouteEnter",B,V,U),st.push(k),Xt(st))).then(()=>{st=[];for(const $ of o.list())st.push(Jr($,B,V));return st.push(k),Xt(st)}).catch($=>Jn($,8)?$:Promise.reject($))}function tt(B,V,st){a.list().forEach(ht=>U(()=>ht(B,V,st)))}function Et(B,V,st,ht,$t){const P=T(B,V);if(P)return P;const k=V===Gr,$=Xl?history.state:{};st&&(ht||k?n.replace(B.fullPath,ie({scroll:k&&$&&$.scroll},$t)):n.push(B.fullPath,$t)),c.value=B,bt(B,V,st,k),M()}let At;function Rt(){At||(At=n.listen((B,V,st)=>{if(!Be.listening)return;const ht=S(B),$t=F(ht);if($t){N(ie($t,{replace:!0,force:!0}),ht).catch(lu);return}h=ht;const P=c.value;Xl&&MP(Qy(P.fullPath,st.delta),pg()),Q(ht,P).catch(k=>Jn(k,12)?k:Jn(k,2)?(N(ie(C(k.to),{force:!0}),ht).then($=>{Jn($,20)&&!st.delta&&st.type===mu.pop&&n.go(-1,!1)}).catch(lu),Promise.reject()):(st.delta&&n.go(-st.delta,!1),et(k,ht,P))).then(k=>{k=k||Et(ht,P,!1),k&&(st.delta&&!Jn(k,8)?n.go(-st.delta,!1):st.type===mu.pop&&Jn(k,20)&&n.go(-1,!1)),tt(ht,P,k)}).catch(lu)}))}let oe=Lh(),J=Lh(),X;function et(B,V,st){M(B);const ht=J.list();return ht.length?ht.forEach($t=>$t(B,V,st)):console.error(B),Promise.reject(B)}function Y(){return X&&c.value!==Gr?Promise.resolve():new Promise((B,V)=>{oe.add([B,V])})}function M(B){return X||(X=!B,Rt(),oe.list().forEach(([V,st])=>B?st(B):V()),oe.reset()),B}function bt(B,V,st,ht){const{scrollBehavior:$t}=i;if(!Xl||!$t)return Promise.resolve();const P=!st&&DP(Qy(B.fullPath,0))||(ht||!st)&&history.state&&history.state.scroll||null;return $o().then(()=>$t(B,V,P)).then(k=>k&&LP(k)).catch(k=>et(k,B,V))}const Ct=B=>n.go(B);let Gt;const xe=new Set,Be={currentRoute:c,listening:!0,addRoute:g,removeRoute:_,clearRoutes:t.clearRoutes,hasRoute:E,getRoutes:v,resolve:S,options:i,push:R,replace:I,go:Ct,back:()=>Ct(-1),forward:()=>Ct(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:J.add,isReady:Y,install(B){const V=this;B.component("RouterLink",Ff),B.component("RouterView",h0),B.config.globalProperties.$router=V,Object.defineProperty(B.config.globalProperties,"$route",{enumerable:!0,get:()=>De(c)}),Xl&&!Gt&&c.value===Gr&&(Gt=!0,R(n.location).catch($t=>{}));const st={};for(const $t in Gr)Object.defineProperty(st,$t,{get:()=>c.value[$t],enumerable:!0});B.provide(_v,V),B.provide(yv,aA(st)),B.provide(Om,c);const ht=B.unmount;xe.add(B),B.unmount=function(){xe.delete(B),xe.size<1&&(h=Gr,At&&At(),At=null,c.value=Gr,Gt=!1,X=!1),ht()}}};function Xt(B){return B.reduce((V,st)=>V.then(()=>U(st)),Promise.resolve())}return Be}function cR(i,t){const e=[],s=[],n=[],r=Math.max(t.matched.length,i.matched.length);for(let o=0;o<r;o++){const a=t.matched[o];a&&(i.matched.find(h=>yh(h,a))?s.push(a):e.push(a));const c=i.matched[o];c&&(t.matched.find(h=>yh(h,c))||n.push(c))}return[e,s,n]}function hR(i){return un(yv)}const bu="https://backend-seven-gamma-52.vercel.app",uR=oP("documents",{state:()=>({documents:[],isLoading:!1,error:null}),actions:{async loadDocuments(){this.isLoading=!0,this.error=null;try{const i=await fetch(`${bu}/api/documents`);if(!i.ok)throw new Error(`Erreur HTTP: ${i.status}`);const t=await i.json();if(Array.isArray(t))this.documents=t;else if(Array.isArray(t.documents))this.documents=t.documents;else throw new Error("Format de données invalide")}catch(i){console.error("Erreur:",i),this.error=i instanceof Error?i.message:"Une erreur est survenue",this.documents=[]}finally{this.isLoading=!1}}}}),Ws=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Nm=[.001,0,0,.001,0,0],fm=1.35,Ai={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Zr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},dR="pdfjs_internal_editor_",Lt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},Yt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},fR={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Ss={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},$f={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Ge={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Kl={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},gg={ERRORS:0,WARNINGS:1,INFOS:5},Cp={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Sf={moveTo:0,lineTo:1,curveTo:2,closePath:3},pR={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let mg=gg.WARNINGS;function gR(i){Number.isInteger(i)&&(mg=i)}function mR(){return mg}function bg(i){mg>=gg.INFOS&&console.log(`Info: ${i}`)}function Ot(i){mg>=gg.WARNINGS&&console.log(`Warning: ${i}`)}function ge(i){throw new Error(i)}function Ke(i,t){i||ge(t)}function bR(i){switch(i==null?void 0:i.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function u0(i,t=null,e=null){if(!i)return null;if(e&&typeof i=="string"){if(e.addDefaultProtocol&&i.startsWith("www.")){const n=i.match(/\./g);(n==null?void 0:n.length)>=2&&(i=`http://${i}`)}if(e.tryConvertEncoding)try{i=AR(i)}catch{}}const s=t?URL.parse(i,t):URL.parse(i);return bR(s)?s:null}function d0(i,t,e=!1){const s=URL.parse(i);return s?(s.hash=t,s.href):e&&u0(i,"http://example.com")?i.split("#",1)[0]+`${t?`#${t}`:""}`:""}function Wt(i,t,e,s=!1){return Object.defineProperty(i,t,{value:e,enumerable:!s,configurable:!0,writable:!1}),e}const Pl=function(){function t(e,s){this.message=e,this.name=s}return t.prototype=new Error,t.constructor=t,t}();class dw extends Pl{constructor(t,e){super(t,"PasswordException"),this.code=e}}class pm extends Pl{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class Fm extends Pl{constructor(t){super(t,"InvalidPDFException")}}class Tp extends Pl{constructor(t,e,s){super(t,"ResponseException"),this.status=e,this.missing=s}}class vR extends Pl{constructor(t){super(t,"FormatError")}}class Uo extends Pl{constructor(t){super(t,"AbortException")}}function f0(i){(typeof i!="object"||(i==null?void 0:i.length)===void 0)&&ge("Invalid argument for bytesToString");const t=i.length,e=8192;if(t<e)return String.fromCharCode.apply(null,i);const s=[];for(let n=0;n<t;n+=e){const r=Math.min(n+e,t),o=i.subarray(n,r);s.push(String.fromCharCode.apply(null,o))}return s.join("")}function Xd(i){typeof i!="string"&&ge("Invalid argument for stringToBytes");const t=i.length,e=new Uint8Array(t);for(let s=0;s<t;++s)e[s]=i.charCodeAt(s)&255;return e}function _R(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function yR(){const i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function wR(){try{return new Function(""),!0}catch{return!1}}class Es{static get isLittleEndian(){return Wt(this,"isLittleEndian",yR())}static get isEvalSupported(){return Wt(this,"isEvalSupported",wR())}static get isOffscreenCanvasSupported(){return Wt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Wt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){if(typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"){const{platform:t,userAgent:e}=navigator;return Wt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}return Wt(this,"platform",{isAndroid:!1,isLinux:!1,isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var t,e;return Wt(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const gm=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0"));var Fr,Bf,$m;class _t{static makeHexColor(t,e,s){return`#${gm[t]}${gm[e]}${gm[s]}`}static scaleMinMax(t,e){let s;t[0]?(t[0]<0&&(s=e[0],e[0]=e[2],e[2]=s),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(s=e[1],e[1]=e[3],e[3]=s),e[1]*=t[3],e[3]*=t[3]):(s=e[0],e[0]=e[1],e[1]=s,s=e[2],e[2]=e[3],e[3]=s,t[1]<0&&(s=e[1],e[1]=e[3],e[3]=s),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(s=e[0],e[0]=e[2],e[2]=s),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e,s=0){const n=t[s],r=t[s+1];t[s]=n*e[0]+r*e[2]+e[4],t[s+1]=n*e[1]+r*e[3]+e[5]}static applyTransformToBezier(t,e,s=0){const n=e[0],r=e[1],o=e[2],a=e[3],c=e[4],h=e[5];for(let u=0;u<6;u+=2){const f=t[s+u],p=t[s+u+1];t[s+u]=f*n+p*o+c,t[s+u+1]=f*r+p*a+h}}static applyInverseTransform(t,e){const s=t[0],n=t[1],r=e[0]*e[3]-e[1]*e[2];t[0]=(s*e[3]-n*e[2]+e[2]*e[5]-e[4]*e[3])/r,t[1]=(-s*e[1]+n*e[0]+e[4]*e[1]-e[5]*e[0])/r}static axialAlignedBoundingBox(t,e,s){const n=e[0],r=e[1],o=e[2],a=e[3],c=e[4],h=e[5],u=t[0],f=t[1],p=t[2],g=t[3];let _=n*u+c,v=_,E=n*p+c,S=E,C=a*f+h,T=C,R=a*g+h,I=R;if(r!==0||o!==0){const F=r*u,N=r*p,H=o*f,U=o*g;_+=H,S+=H,E+=U,v+=U,C+=F,I+=F,R+=N,T+=N}s[0]=Math.min(s[0],_,E,v,S),s[1]=Math.min(s[1],C,R,T,I),s[2]=Math.max(s[2],_,E,v,S),s[3]=Math.max(s[3],C,R,T,I)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const s=t[0],n=t[1],r=t[2],o=t[3],a=s**2+n**2,c=s*r+n*o,h=r**2+o**2,u=(a+h)/2,f=Math.sqrt(u**2-(a*h-c**2));e[0]=Math.sqrt(u+f||1),e[1]=Math.sqrt(u-f||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const s=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),n=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(s>n)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>o?null:[s,r,n,o]}static pointBoundingBox(t,e,s){s[0]=Math.min(s[0],t),s[1]=Math.min(s[1],e),s[2]=Math.max(s[2],t),s[3]=Math.max(s[3],e)}static rectBoundingBox(t,e,s,n,r){r[0]=Math.min(r[0],t,s),r[1]=Math.min(r[1],e,n),r[2]=Math.max(r[2],t,s),r[3]=Math.max(r[3],e,n)}static bezierBoundingBox(t,e,s,n,r,o,a,c,h){h[0]=Math.min(h[0],t,a),h[1]=Math.min(h[1],e,c),h[2]=Math.max(h[2],t,a),h[3]=Math.max(h[3],e,c),A(this,Fr,$m).call(this,t,s,r,a,e,n,o,c,3*(-t+3*(s-r)+a),6*(t-2*s+r),3*(s-t),h),A(this,Fr,$m).call(this,t,s,r,a,e,n,o,c,3*(-e+3*(n-o)+c),6*(e-2*n+o),3*(n-e),h)}}Fr=new WeakSet,Bf=function(t,e,s,n,r,o,a,c,h,u){if(h<=0||h>=1)return;const f=1-h,p=h*h,g=p*h,_=f*(f*(f*t+3*h*e)+3*p*s)+g*n,v=f*(f*(f*r+3*h*o)+3*p*a)+g*c;u[0]=Math.min(u[0],_),u[1]=Math.min(u[1],v),u[2]=Math.max(u[2],_),u[3]=Math.max(u[3],v)},$m=function(t,e,s,n,r,o,a,c,h,u,f,p){if(Math.abs(h)<1e-12){Math.abs(u)>=1e-12&&A(this,Fr,Bf).call(this,t,e,s,n,r,o,a,c,-f/u,p);return}const g=u**2-4*f*h;if(g<0)return;const _=Math.sqrt(g),v=2*h;A(this,Fr,Bf).call(this,t,e,s,n,r,o,a,c,(-u+_)/v,p),A(this,Fr,Bf).call(this,t,e,s,n,r,o,a,c,(-u-_)/v,p)},w(_t,Fr);function AR(i){return decodeURIComponent(escape(i))}let mm=null,fw=null;function ER(i){return mm||(mm=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,fw=new Map([["ﬅ","ſt"]])),i.replaceAll(mm,(t,e,s)=>e?e.normalize("NFKC"):fw.get(s))}function p0(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const i=new Uint8Array(32);return crypto.getRandomValues(i),f0(i)}const wv="pdfjs_internal_id_";function SR(i,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[s,n,...r]=e;if(!i(s)&&!Number.isInteger(s)||!t(n))return!1;const o=r.length;let a=!0;switch(n.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;a=!1;break;default:return!1}for(const c of r)if(!(typeof c=="number"||a&&c===null))return!1;return!0}function Gs(i,t,e){return Math.min(Math.max(i,t),e)}function g0(i){return Uint8Array.prototype.toBase64?i.toBase64():btoa(f0(i))}function xR(i){return Uint8Array.fromBase64?Uint8Array.fromBase64(i):Xd(atob(i))}typeof Promise.try!="function"&&(Promise.try=function(i,...t){return new Promise(e=>{e(i(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(i){return i.reduce((t,e)=>t+e,0)});const Zn="http://www.w3.org/2000/svg",ga=class ga{};Z(ga,"CSS",96),Z(ga,"PDF",72),Z(ga,"PDF_TO_CSS_UNITS",ga.CSS/ga.PDF);let zo=ga;async function Kd(i,t="text"){if(Yl(i,document.baseURI)){const e=await fetch(i);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,s)=>{const n=new XMLHttpRequest;n.open("GET",i,!0),n.responseType=t,n.onreadystatechange=()=>{if(n.readyState===XMLHttpRequest.DONE){if(n.status===200||n.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(n.response);return}e(n.responseText);return}s(new Error(n.statusText))}},n.send(null)})}class Yd{constructor({viewBox:t,userUnit:e,scale:s,rotation:n,offsetX:r=0,offsetY:o=0,dontFlip:a=!1}){this.viewBox=t,this.userUnit=e,this.scale=s,this.rotation=n,this.offsetX=r,this.offsetY=o,s*=e;const c=(t[2]+t[0])/2,h=(t[3]+t[1])/2;let u,f,p,g;switch(n%=360,n<0&&(n+=360),n){case 180:u=-1,f=0,p=0,g=1;break;case 90:u=0,f=1,p=1,g=0;break;case 270:u=0,f=-1,p=-1,g=0;break;case 0:u=1,f=0,p=0,g=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(p=-p,g=-g);let _,v,E,S;u===0?(_=Math.abs(h-t[1])*s+r,v=Math.abs(c-t[0])*s+o,E=(t[3]-t[1])*s,S=(t[2]-t[0])*s):(_=Math.abs(c-t[0])*s+r,v=Math.abs(h-t[1])*s+o,E=(t[2]-t[0])*s,S=(t[3]-t[1])*s),this.transform=[u*s,f*s,p*s,g*s,_-u*s*c-p*s*h,v-f*s*c-g*s*h],this.width=E,this.height=S}get rawDims(){const t=this.viewBox;return Wt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:s=this.offsetX,offsetY:n=this.offsetY,dontFlip:r=!1}={}){return new Yd({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:s,offsetY:n,dontFlip:r})}convertToViewportPoint(t,e){const s=[t,e];return _t.applyTransform(s,this.transform),s}convertToViewportRectangle(t){const e=[t[0],t[1]];_t.applyTransform(e,this.transform);const s=[t[2],t[3]];return _t.applyTransform(s,this.transform),[e[0],e[1],s[0],s[1]]}convertToPdfPoint(t,e){const s=[t,e];return _t.applyInverseTransform(s,this.transform),s}}class Av extends Pl{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function vg(i){const t=i.length;let e=0;for(;e<t&&i[e].trim()==="";)e++;return i.substring(e,e+5).toLowerCase()==="data:"}function Ev(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function CR(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function TR(i,t="document.pdf"){if(typeof i!="string")return t;if(vg(i))return Ot('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,s=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,n=e.exec(i);let r=s.exec(n[1])||s.exec(n[2])||s.exec(n[3]);if(r&&(r=r[0],r.includes("%")))try{r=s.exec(decodeURIComponent(r))[0]}catch{}return r||t}class pw{constructor(){Z(this,"started",Object.create(null));Z(this,"times",[])}time(t){t in this.started&&Ot(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Ot(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:s}of this.times)e=Math.max(s.length,e);for(const{name:s,start:n,end:r}of this.times)t.push(`${s.padEnd(e)} ${r-n}ms
`);return t.join("")}}function Yl(i,t){const e=t?URL.parse(i,t):URL.parse(i);return(e==null?void 0:e.protocol)==="http:"||(e==null?void 0:e.protocol)==="https:"}function fn(i){i.preventDefault()}function Xe(i){i.preventDefault(),i.stopPropagation()}var yu;class Sv{static toDateObject(t){if(!t||typeof t!="string")return null;l(this,yu)||b(this,yu,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=l(this,yu).exec(t);if(!e)return null;const s=parseInt(e[1],10);let n=parseInt(e[2],10);n=n>=1&&n<=12?n-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(e[5],10);a=a>=0&&a<=59?a:0;let c=parseInt(e[6],10);c=c>=0&&c<=59?c:0;const h=e[7]||"Z";let u=parseInt(e[8],10);u=u>=0&&u<=23?u:0;let f=parseInt(e[9],10)||0;return f=f>=0&&f<=59?f:0,h==="-"?(o+=u,a+=f):h==="+"&&(o-=u,a-=f),new Date(Date.UTC(s,n,r,o,a,c))}}yu=new WeakMap,w(Sv,yu);function PR(i,{scale:t=1,rotation:e=0}){const{width:s,height:n}=i.attributes.style,r=[0,0,parseInt(s),parseInt(n)];return new Yd({viewBox:r,userUnit:1,scale:t,rotation:e})}function xv(i){if(i.startsWith("#")){const t=parseInt(i.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(t=>parseInt(t)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Ot(`Not a valid color format: "${i}"`),[0,0,0])}function RR(i){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of i.keys()){t.style.color=e;const s=window.getComputedStyle(t).color;i.set(e,xv(s))}t.remove()}function Me(i){const{a:t,b:e,c:s,d:n,e:r,f:o}=i.getTransform();return[t,e,s,n,r,o]}function yn(i){const{a:t,b:e,c:s,d:n,e:r,f:o}=i.getTransform().invertSelf();return[t,e,s,n,r,o]}function xl(i,t,e=!1,s=!0){if(t instanceof Yd){const{pageWidth:n,pageHeight:r}=t.rawDims,{style:o}=i,a=Es.isCSSRoundSupported,c=`var(--total-scale-factor) * ${n}px`,h=`var(--total-scale-factor) * ${r}px`,u=a?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,f=a?`round(down, ${h}, var(--scale-round-y))`:`calc(${h})`;!e||t.rotation%180===0?(o.width=u,o.height=f):(o.width=f,o.height=u)}s&&i.setAttribute("data-main-rotation",t.rotation)}class jr{constructor(){const{pixelRatio:t}=jr;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,s,n){let r=1/0,o=1/0,a=1/0;s>0&&(r=Math.sqrt(s/(t*e))),n!==-1&&(o=n/t,a=n/e);const c=Math.min(r,o,a);return this.sx>c||this.sy>c?(this.sx=c,this.sy=c,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}}const Bm=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var to,ba,Di,eo,wu,dc,Au,Op,m0,As,b0,v0,$h,_0,Hf;const ir=class ir{constructor(t){w(this,As);w(this,to,null);w(this,ba,null);w(this,Di);w(this,eo,null);w(this,wu,null);w(this,dc,null);b(this,Di,t),l(ir,Au)||b(ir,Au,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=b(this,to,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=l(this,Di)._uiManager._signal;t.addEventListener("contextmenu",fn,{signal:e}),t.addEventListener("pointerdown",A(ir,Op,m0),{signal:e});const s=b(this,eo,document.createElement("div"));s.className="buttons",t.append(s);const n=l(this,Di).toolbarPosition;if(n){const{style:r}=t,o=l(this,Di)._uiManager.direction==="ltr"?1-n[0]:n[0];r.insetInlineEnd=`${100*o}%`,r.top=`calc(${100*n[1]}% + var(--editor-toolbar-vert-offset))`}return A(this,As,_0).call(this),t}get div(){return l(this,to)}hide(){var t;l(this,to).classList.add("hidden"),(t=l(this,ba))==null||t.hideDropdown()}show(){var t;l(this,to).classList.remove("hidden"),(t=l(this,wu))==null||t.shown()}async addAltText(t){const e=await t.render();A(this,As,$h).call(this,e),l(this,eo).prepend(e,l(this,As,Hf)),b(this,wu,t)}addColorPicker(t){b(this,ba,t);const e=t.renderButton();A(this,As,$h).call(this,e),l(this,eo).prepend(e,l(this,As,Hf))}async addEditSignatureButton(t){const e=b(this,dc,await t.renderEditButton(l(this,Di)));A(this,As,$h).call(this,e),l(this,eo).prepend(e,l(this,As,Hf))}updateEditSignatureButton(t){l(this,dc)&&(l(this,dc).title=t)}remove(){var t;l(this,to).remove(),(t=l(this,ba))==null||t.destroy(),b(this,ba,null)}};to=new WeakMap,ba=new WeakMap,Di=new WeakMap,eo=new WeakMap,wu=new WeakMap,dc=new WeakMap,Au=new WeakMap,Op=new WeakSet,m0=function(t){t.stopPropagation()},As=new WeakSet,b0=function(t){l(this,Di)._focusEventsAllowed=!1,Xe(t)},v0=function(t){l(this,Di)._focusEventsAllowed=!0,Xe(t)},$h=function(t){const e=l(this,Di)._uiManager._signal;t.addEventListener("focusin",A(this,As,b0).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",A(this,As,v0).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",fn,{signal:e})},_0=function(){const{editorType:t,_uiManager:e}=l(this,Di),s=document.createElement("button");s.className="delete",s.tabIndex=0,s.setAttribute("data-l10n-id",l(ir,Au)[t]),A(this,As,$h).call(this,s),s.addEventListener("click",n=>{e.delete()},{signal:e._signal}),l(this,eo).append(s)},Hf=function(){const t=document.createElement("div");return t.className="divider",t},w(ir,Op),w(ir,Au,null);let Hm=ir;var Eu,va,_a,qo,y0,w0,A0;class kR{constructor(t){w(this,qo);w(this,Eu,null);w(this,va,null);w(this,_a);b(this,_a,t)}show(t,e,s){const[n,r]=A(this,qo,w0).call(this,e,s),{style:o}=l(this,va)||b(this,va,A(this,qo,y0).call(this));t.append(l(this,va)),o.insetInlineEnd=`${100*n}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){l(this,va).remove()}}Eu=new WeakMap,va=new WeakMap,_a=new WeakMap,qo=new WeakSet,y0=function(){const t=b(this,va,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",fn,{signal:l(this,_a)._signal});const e=b(this,Eu,document.createElement("div"));return e.className="buttons",t.append(e),A(this,qo,A0).call(this),t},w0=function(t,e){let s=0,n=0;for(const r of t){const o=r.y+r.height;if(o<s)continue;const a=r.x+(e?r.width:0);if(o>s){n=a,s=o;continue}e?a>n&&(n=a):a<n&&(n=a)}return[e?1-n:n,s]},A0=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const s=l(this,_a)._signal;t.addEventListener("contextmenu",fn,{signal:s}),t.addEventListener("click",()=>{l(this,_a).highlightSelection("floating_button")},{signal:s}),l(this,Eu).append(t)};function Cv(i,t,e){for(const s of e)t.addEventListener(s,i[s].bind(i))}var Np;class IR{constructor(){w(this,Np,0)}get id(){return`${dR}${Bs(this,Np)._++}`}}Np=new WeakMap;var fc,Su,Cs,pc,jf;const Dv=class Dv{constructor(){w(this,pc);w(this,fc,p0());w(this,Su,0);w(this,Cs,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),n=new Image;n.src=t;const r=n.decode().then(()=>(s.drawImage(n,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return Wt(this,"_isSVGFittingCanvas",r)}async getFromFile(t){const{lastModified:e,name:s,size:n,type:r}=t;return A(this,pc,jf).call(this,`${e}_${s}_${n}_${r}`,t)}async getFromUrl(t){return A(this,pc,jf).call(this,t,t)}async getFromBlob(t,e){const s=await e;return A(this,pc,jf).call(this,t,s)}async getFromId(t){l(this,Cs)||b(this,Cs,new Map);const e=l(this,Cs).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:s}=e;return delete e.blobPromise,this.getFromBlob(e.id,s)}return this.getFromUrl(e.url)}getFromCanvas(t,e){l(this,Cs)||b(this,Cs,new Map);let s=l(this,Cs).get(t);if(s!=null&&s.bitmap)return s.refCounter+=1,s;const n=new OffscreenCanvas(e.width,e.height);return n.getContext("2d").drawImage(e,0,0),s={bitmap:n.transferToImageBitmap(),id:`image_${l(this,fc)}_${Bs(this,Su)._++}`,refCounter:1,isSvg:!1},l(this,Cs).set(t,s),l(this,Cs).set(s.id,s),s}getSvgUrl(t){const e=l(this,Cs).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var n;l(this,Cs)||b(this,Cs,new Map);const e=l(this,Cs).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:s}=e;if(!e.url&&!e.file){const r=new OffscreenCanvas(s.width,s.height);r.getContext("bitmaprenderer").transferFromImageBitmap(s),e.blobPromise=r.convertToBlob()}(n=s.close)==null||n.call(s),e.bitmap=null}isValidId(t){return t.startsWith(`image_${l(this,fc)}_`)}};fc=new WeakMap,Su=new WeakMap,Cs=new WeakMap,pc=new WeakSet,jf=async function(t,e){l(this,Cs)||b(this,Cs,new Map);let s=l(this,Cs).get(t);if(s===null)return null;if(s!=null&&s.bitmap)return s.refCounter+=1,s;try{s||(s={bitmap:null,id:`image_${l(this,fc)}_${Bs(this,Su)._++}`,refCounter:0,isSvg:!1});let n;if(typeof e=="string"?(s.url=e,n=await Kd(e,"blob")):e instanceof File?n=s.file=e:e instanceof Blob&&(n=e),n.type==="image/svg+xml"){const r=Dv._isSVGFittingCanvas,o=new FileReader,a=new Image,c=new Promise((h,u)=>{a.onload=()=>{s.bitmap=a,s.isSvg=!0,h()},o.onload=async()=>{const f=s.svgUrl=o.result;a.src=await r?`${f}#svgView(preserveAspectRatio(none))`:f},a.onerror=o.onerror=u});o.readAsDataURL(n),await c}else s.bitmap=await createImageBitmap(n);s.refCounter=1}catch(n){Ot(n),s=null}return l(this,Cs).set(t,s),s&&l(this,Cs).set(s.id,s),s};let jm=Dv;var Ve,so,xu,Le;class LR{constructor(t=128){w(this,Ve,[]);w(this,so,!1);w(this,xu);w(this,Le,-1);b(this,xu,t)}add({cmd:t,undo:e,post:s,mustExec:n,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(n&&t(),l(this,so))return;const c={cmd:t,undo:e,post:s,type:r};if(l(this,Le)===-1){l(this,Ve).length>0&&(l(this,Ve).length=0),b(this,Le,0),l(this,Ve).push(c);return}if(o&&l(this,Ve)[l(this,Le)].type===r){a&&(c.undo=l(this,Ve)[l(this,Le)].undo),l(this,Ve)[l(this,Le)]=c;return}const h=l(this,Le)+1;h===l(this,xu)?l(this,Ve).splice(0,1):(b(this,Le,h),h<l(this,Ve).length&&l(this,Ve).splice(h)),l(this,Ve).push(c)}undo(){if(l(this,Le)===-1)return;b(this,so,!0);const{undo:t,post:e}=l(this,Ve)[l(this,Le)];t(),e==null||e(),b(this,so,!1),b(this,Le,l(this,Le)-1)}redo(){if(l(this,Le)<l(this,Ve).length-1){b(this,Le,l(this,Le)+1),b(this,so,!0);const{cmd:t,post:e}=l(this,Ve)[l(this,Le)];t(),e==null||e(),b(this,so,!1)}}hasSomethingToUndo(){return l(this,Le)!==-1}hasSomethingToRedo(){return l(this,Le)<l(this,Ve).length-1}cleanType(t){if(l(this,Le)!==-1){for(let e=l(this,Le);e>=0;e--)if(l(this,Ve)[e].type!==t){l(this,Ve).splice(e+1,l(this,Le)-e),b(this,Le,e);return}l(this,Ve).length=0,b(this,Le,-1)}}destroy(){b(this,Ve,null)}}Ve=new WeakMap,so=new WeakMap,xu=new WeakMap,Le=new WeakMap;var Fp,E0;class Qd{constructor(t){w(this,Fp);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Es.platform;for(const[s,n,r={}]of t)for(const o of s){const a=o.startsWith("mac+");e&&a?(this.callbacks.set(o.slice(4),{callback:n,options:r}),this.allKeys.add(o.split("+").at(-1))):!e&&!a&&(this.callbacks.set(o,{callback:n,options:r}),this.allKeys.add(o.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const s=this.callbacks.get(A(this,Fp,E0).call(this,e));if(!s)return;const{callback:n,options:{bubbles:r=!1,args:o=[],checker:a=null}}=s;a&&!a(t,e)||(n.bind(t,...o,e)(),r||Xe(e))}}Fp=new WeakSet,E0=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const $p=class $p{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return RR(t),Wt(this,"_colors",t)}convert(t){const e=xv(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[s,n]of this._colors)if(n.every((r,o)=>r===e[o]))return $p._colorsMapping.get(s);return e}getHexCode(t){const e=this._colors.get(t);return e?_t.makeHexColor(...e):t}};Z($p,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Vm=$p;var gc,ci,es,fs,mc,rr,bc,Oi,io,no,vc,ya,xn,Yi,wa,Cu,Tu,_c,Pu,Cn,ro,yc,oo,Tn,Bp,ao,Ru,lo,Aa,Ea,co,ku,os,ce,or,ho,Sa,Iu,Lu,uo,Pn,ar,Mu,Ni,ot,Vf,Um,S0,x0,Uf,C0,T0,P0,zm,R0,qm,Wm,k0,js,tr,I0,L0,Gm,M0,Bh,Xm;const nc=class nc{constructor(t,e,s,n,r,o,a,c,h,u,f,p,g,_){w(this,ot);w(this,gc,new AbortController);w(this,ci,null);w(this,es,new Map);w(this,fs,new Map);w(this,mc,null);w(this,rr,null);w(this,bc,null);w(this,Oi,new LR);w(this,io,null);w(this,no,null);w(this,vc,0);w(this,ya,new Set);w(this,xn,null);w(this,Yi,null);w(this,wa,new Set);Z(this,"_editorUndoBar",null);w(this,Cu,!1);w(this,Tu,!1);w(this,_c,!1);w(this,Pu,null);w(this,Cn,null);w(this,ro,null);w(this,yc,null);w(this,oo,!1);w(this,Tn,null);w(this,Bp,new IR);w(this,ao,!1);w(this,Ru,!1);w(this,lo,null);w(this,Aa,null);w(this,Ea,null);w(this,co,null);w(this,ku,null);w(this,os,Lt.NONE);w(this,ce,new Set);w(this,or,null);w(this,ho,null);w(this,Sa,null);w(this,Iu,null);w(this,Lu,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});w(this,uo,[0,0]);w(this,Pn,null);w(this,ar,null);w(this,Mu,null);w(this,Ni,null);const v=this._signal=l(this,gc).signal;b(this,ar,t),b(this,Mu,e),b(this,mc,s),b(this,ho,n),this._eventBus=r,r._on("editingaction",this.onEditingAction.bind(this),{signal:v}),r._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),r._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),r._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),r._on("setpreference",this.onSetPreference.bind(this),{signal:v}),r._on("switchannotationeditorparams",E=>this.updateParams(E.type,E.value),{signal:v}),A(this,ot,C0).call(this),A(this,ot,k0).call(this),A(this,ot,zm).call(this),b(this,rr,o.annotationStorage),b(this,Pu,o.filterFactory),b(this,Sa,a),b(this,yc,c||null),b(this,Cu,h),b(this,Tu,u),b(this,_c,f),b(this,ku,p||null),this.viewParameters={realScale:zo.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=g||null,this._supportsPinchToZoom=_!==!1}static get _keyboardManager(){const t=nc.prototype,e=o=>l(o,ar).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),s=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:c}=a;return c!=="text"&&c!=="number"}return!0},n=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return Wt(this,"_keyboardManager",new Qd([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&l(o,ar).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&l(o,ar).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-n,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[n,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-n],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,n],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}destroy(){var t,e,s,n,r,o,a,c;(t=l(this,Ni))==null||t.resolve(),b(this,Ni,null),(e=l(this,gc))==null||e.abort(),b(this,gc,null),this._signal=null;for(const h of l(this,fs).values())h.destroy();l(this,fs).clear(),l(this,es).clear(),l(this,wa).clear(),(s=l(this,co))==null||s.clear(),b(this,ci,null),l(this,ce).clear(),l(this,Oi).destroy(),(n=l(this,mc))==null||n.destroy(),(r=l(this,ho))==null||r.destroy(),(o=l(this,Tn))==null||o.hide(),b(this,Tn,null),(a=l(this,Ea))==null||a.destroy(),b(this,Ea,null),l(this,Cn)&&(clearTimeout(l(this,Cn)),b(this,Cn,null)),l(this,Pn)&&(clearTimeout(l(this,Pn)),b(this,Pn,null)),(c=this._editorUndoBar)==null||c.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return l(this,ku)}get useNewAltTextFlow(){return l(this,Tu)}get useNewAltTextWhenAddingImage(){return l(this,_c)}get hcmFilter(){return Wt(this,"hcmFilter",l(this,Sa)?l(this,Pu).addHCMFilter(l(this,Sa).foreground,l(this,Sa).background):"none")}get direction(){return Wt(this,"direction",getComputedStyle(l(this,ar)).direction)}get highlightColors(){return Wt(this,"highlightColors",l(this,yc)?new Map(l(this,yc).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return Wt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),b(this,no,t)}setMainHighlightColorPicker(t){b(this,Ea,t)}editAltText(t,e=!1){var s;(s=l(this,mc))==null||s.editAltText(this,t,e)}getSignature(t){var e;(e=l(this,ho))==null||e.getSignature({uiManager:this,editor:t})}get signatureManager(){return l(this,ho)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":b(this,_c,e);break}}onPageChanging({pageNumber:t}){b(this,vc,t-1)}focusMainContainer(){l(this,ar).focus()}findParent(t,e){for(const s of l(this,fs).values()){const{x:n,y:r,width:o,height:a}=s.div.getBoundingClientRect();if(t>=n&&t<=n+o&&e>=r&&e<=r+a)return s}return null}disableUserSelect(t=!1){l(this,Mu).classList.toggle("noUserSelect",t)}addShouldRescale(t){l(this,wa).add(t)}removeShouldRescale(t){l(this,wa).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*zo.PDF_TO_CSS_UNITS;for(const s of l(this,wa))s.onScaleChanging();(e=l(this,no))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:s,anchorOffset:n,focusNode:r,focusOffset:o}=e,a=e.toString(),h=A(this,ot,Vf).call(this,e).closest(".textLayer"),u=this.getSelectionBoxes(h);if(!u)return;e.empty();const f=A(this,ot,Um).call(this,h),p=l(this,os)===Lt.NONE,g=()=>{f==null||f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:u,anchorNode:s,anchorOffset:n,focusNode:r,focusOffset:o,text:a}),p&&this.showAllEditors("highlight",!0,!0)};if(p){this.switchToMode(Lt.HIGHLIGHT,g);return}g()}addToAnnotationStorage(t){!t.isEmpty()&&l(this,rr)&&!l(this,rr).has(t.id)&&l(this,rr).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,l(this,oo)&&(b(this,oo,!1),A(this,ot,Uf).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of l(this,ce))if(e.div.contains(t)){b(this,Aa,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!l(this,Aa))return;const[t,e]=l(this,Aa);b(this,Aa,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){A(this,ot,zm).call(this),A(this,ot,qm).call(this)}removeEditListeners(){A(this,ot,R0).call(this),A(this,ot,Wm).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const s of l(this,Yi))if(s.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const s of l(this,Yi))if(s.isHandlingMimeForPasting(e.type)){s.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var s;if(t.preventDefault(),(s=l(this,ci))==null||s.commitOrRemove(),!this.hasSelection)return;const e=[];for(const n of l(this,ce)){const r=n.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const o of l(this,Yi))if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let s=e.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(r){Ot(`paste: "${r.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const n=this.currentLayer;try{const r=[];for(const c of s){const h=await n.deserialize(c);if(!h)return;r.push(h)}const o=()=>{for(const c of r)A(this,ot,Gm).call(this,c);A(this,ot,Xm).call(this,r)},a=()=>{for(const c of r)c.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(r){Ot(`paste: "${r.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),l(this,os)!==Lt.NONE&&!this.isEditorHandlingKeyboard&&nc._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,l(this,oo)&&(b(this,oo,!1),A(this,ot,Uf).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(A(this,ot,T0).call(this),A(this,ot,qm).call(this),A(this,ot,js).call(this,{isEditing:l(this,os)!==Lt.NONE,isEmpty:A(this,ot,Bh).call(this),hasSomethingToUndo:l(this,Oi).hasSomethingToUndo(),hasSomethingToRedo:l(this,Oi).hasSomethingToRedo(),hasSelectedEditor:!1})):(A(this,ot,P0).call(this),A(this,ot,Wm).call(this),A(this,ot,js).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!l(this,Yi)){b(this,Yi,t);for(const e of l(this,Yi))A(this,ot,tr).call(this,e.defaultPropertiesToUpdate)}}getId(){return l(this,Bp).id}get currentLayer(){return l(this,fs).get(l(this,vc))}getLayer(t){return l(this,fs).get(t)}get currentPageIndex(){return l(this,vc)}addLayer(t){l(this,fs).set(t.pageIndex,t),l(this,ao)?t.enable():t.disable()}removeLayer(t){l(this,fs).delete(t.pageIndex)}async updateMode(t,e=null,s=!1){var n,r,o;if(l(this,os)!==t&&!(l(this,Ni)&&(await l(this,Ni).promise,!l(this,Ni)))){if(b(this,Ni,Promise.withResolvers()),(n=l(this,no))==null||n.commitOrRemove(),b(this,os,t),t===Lt.NONE){this.setEditingState(!1),A(this,ot,L0).call(this),(r=this._editorUndoBar)==null||r.hide(),l(this,Ni).resolve();return}t===Lt.SIGNATURE&&await((o=l(this,ho))==null?void 0:o.loadSignatures()),this.setEditingState(!0),await A(this,ot,I0).call(this),this.unselectAll();for(const a of l(this,fs).values())a.updateMode(t);if(!e){s&&this.addNewEditorFromKeyboard(),l(this,Ni).resolve();return}for(const a of l(this,es).values())a.annotationElementId===e?(this.setSelected(a),a.enterInEditMode()):a.unselect();l(this,Ni).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==l(this,os)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var s;if(l(this,Yi)){switch(t){case Yt.CREATE:this.currentLayer.addNewEditor(e);return;case Yt.HIGHLIGHT_DEFAULT_COLOR:(s=l(this,Ea))==null||s.updateColor(e);break;case Yt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(l(this,Iu)||b(this,Iu,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const n of l(this,ce))n.updateParams(t,e);for(const n of l(this,Yi))n.updateDefaultParams(t,e)}}showAllEditors(t,e,s=!1){var r;for(const o of l(this,es).values())o.editorType===t&&o.show(e);(((r=l(this,Iu))==null?void 0:r.get(Yt.HIGHLIGHT_SHOW_ALL))??!0)!==e&&A(this,ot,tr).call(this,[[Yt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(l(this,Ru)!==t){b(this,Ru,t);for(const e of l(this,fs).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const s of l(this,es).values())s.pageIndex===t&&e.push(s);return e}getEditor(t){return l(this,es).get(t)}addEditor(t){l(this,es).set(t.id,t)}removeEditor(t){var e,s;t.div.contains(document.activeElement)&&(l(this,Cn)&&clearTimeout(l(this,Cn)),b(this,Cn,setTimeout(()=>{this.focusMainContainer(),b(this,Cn,null)},0))),l(this,es).delete(t.id),t.annotationElementId&&((e=l(this,co))==null||e.delete(t.annotationElementId)),this.unselect(t),(!t.annotationElementId||!l(this,ya).has(t.annotationElementId))&&((s=l(this,rr))==null||s.remove(t.id))}addDeletedAnnotationElement(t){l(this,ya).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return l(this,ya).has(t)}removeDeletedAnnotationElement(t){l(this,ya).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){l(this,ci)!==t&&(b(this,ci,t),t&&A(this,ot,tr).call(this,t.propertiesToUpdate))}updateUI(t){l(this,ot,M0)===t&&A(this,ot,tr).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){A(this,ot,tr).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(l(this,ce).has(t)){l(this,ce).delete(t),t.unselect(),A(this,ot,js).call(this,{hasSelectedEditor:this.hasSelection});return}l(this,ce).add(t),t.select(),A(this,ot,tr).call(this,t.propertiesToUpdate),A(this,ot,js).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;(e=l(this,no))==null||e.commitOrRemove();for(const s of l(this,ce))s!==t&&s.unselect();l(this,ce).clear(),l(this,ce).add(t),t.select(),A(this,ot,tr).call(this,t.propertiesToUpdate),A(this,ot,js).call(this,{hasSelectedEditor:!0})}isSelected(t){return l(this,ce).has(t)}get firstSelectedEditor(){return l(this,ce).values().next().value}unselect(t){t.unselect(),l(this,ce).delete(t),A(this,ot,js).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return l(this,ce).size!==0}get isEnterHandled(){return l(this,ce).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;l(this,Oi).undo(),A(this,ot,js).call(this,{hasSomethingToUndo:l(this,Oi).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:A(this,ot,Bh).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){l(this,Oi).redo(),A(this,ot,js).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:l(this,Oi).hasSomethingToRedo(),isEmpty:A(this,ot,Bh).call(this)})}addCommands(t){l(this,Oi).add(t),A(this,ot,js).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:A(this,ot,Bh).call(this)})}cleanUndoStack(t){l(this,Oi).cleanType(t)}delete(){var r;this.commitOrRemove();const t=(r=this.currentLayer)==null?void 0:r.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...l(this,ce)],s=()=>{var o;(o=this._editorUndoBar)==null||o.show(n,e.length===1?e[0].editorType:e.length);for(const a of e)a.remove()},n=()=>{for(const o of e)A(this,ot,Gm).call(this,o)};this.addCommands({cmd:s,undo:n,mustExec:!0})}commitOrRemove(){var t;(t=l(this,ci))==null||t.commitOrRemove()}hasSomethingToControl(){return l(this,ci)||this.hasSelection}selectAll(){for(const t of l(this,ce))t.commit();A(this,ot,Xm).call(this,l(this,es).values())}unselectAll(){var t;if(!(l(this,ci)&&(l(this,ci).commitOrRemove(),l(this,os)!==Lt.NONE))&&!((t=l(this,no))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of l(this,ce))e.unselect();l(this,ce).clear(),A(this,ot,js).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;l(this,uo)[0]+=t,l(this,uo)[1]+=e;const[n,r]=l(this,uo),o=[...l(this,ce)],a=1e3;l(this,Pn)&&clearTimeout(l(this,Pn)),b(this,Pn,setTimeout(()=>{b(this,Pn,null),l(this,uo)[0]=l(this,uo)[1]=0,this.addCommands({cmd:()=>{for(const c of o)l(this,es).has(c.id)&&(c.translateInPage(n,r),c.translationDone())},undo:()=>{for(const c of o)l(this,es).has(c.id)&&(c.translateInPage(-n,-r),c.translationDone())},mustExec:!1})},a));for(const c of o)c.translateInPage(t,e),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),b(this,xn,new Map);for(const t of l(this,ce))l(this,xn).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!l(this,xn))return!1;this.disableUserSelect(!1);const t=l(this,xn);b(this,xn,null);let e=!1;for(const[{x:n,y:r,pageIndex:o},a]of t)a.newX=n,a.newY=r,a.newPageIndex=o,e||(e=n!==a.savedX||r!==a.savedY||o!==a.savedPageIndex);if(!e)return!1;const s=(n,r,o,a)=>{if(l(this,es).has(n.id)){const c=l(this,fs).get(a);c?n._setParentAndPosition(c,r,o):(n.pageIndex=a,n.x=r,n.y=o)}};return this.addCommands({cmd:()=>{for(const[n,{newX:r,newY:o,newPageIndex:a}]of t)s(n,r,o,a)},undo:()=>{for(const[n,{savedX:r,savedY:o,savedPageIndex:a}]of t)s(n,r,o,a)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(l(this,xn))for(const s of l(this,xn).keys())s.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||l(this,ce).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return l(this,ci)===t}getActive(){return l(this,ci)}getMode(){return l(this,os)}get imageManager(){return Wt(this,"imageManager",new jm)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let h=0,u=e.rangeCount;h<u;h++)if(!t.contains(e.getRangeAt(h).commonAncestorContainer))return null;const{x:s,y:n,width:r,height:o}=t.getBoundingClientRect();let a;switch(t.getAttribute("data-main-rotation")){case"90":a=(h,u,f,p)=>({x:(u-n)/o,y:1-(h+f-s)/r,width:p/o,height:f/r});break;case"180":a=(h,u,f,p)=>({x:1-(h+f-s)/r,y:1-(u+p-n)/o,width:f/r,height:p/o});break;case"270":a=(h,u,f,p)=>({x:1-(u+p-n)/o,y:(h-s)/r,width:p/o,height:f/r});break;default:a=(h,u,f,p)=>({x:(h-s)/r,y:(u-n)/o,width:f/r,height:p/o});break}const c=[];for(let h=0,u=e.rangeCount;h<u;h++){const f=e.getRangeAt(h);if(!f.collapsed)for(const{x:p,y:g,width:_,height:v}of f.getClientRects())_===0||v===0||c.push(a(p,g,_,v))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:t,id:e}){(l(this,bc)||b(this,bc,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=l(this,bc))==null||e.delete(t)}renderAnnotationElement(t){var n;const e=(n=l(this,bc))==null?void 0:n.get(t.data.id);if(!e)return;const s=l(this,rr).getRawValue(e);s&&(l(this,os)===Lt.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}setMissingCanvas(t,e,s){var r;const n=(r=l(this,co))==null?void 0:r.get(t);n&&(n.setCanvas(e,s),l(this,co).delete(t))}addMissingCanvas(t,e){(l(this,co)||b(this,co,new Map)).set(t,e)}};gc=new WeakMap,ci=new WeakMap,es=new WeakMap,fs=new WeakMap,mc=new WeakMap,rr=new WeakMap,bc=new WeakMap,Oi=new WeakMap,io=new WeakMap,no=new WeakMap,vc=new WeakMap,ya=new WeakMap,xn=new WeakMap,Yi=new WeakMap,wa=new WeakMap,Cu=new WeakMap,Tu=new WeakMap,_c=new WeakMap,Pu=new WeakMap,Cn=new WeakMap,ro=new WeakMap,yc=new WeakMap,oo=new WeakMap,Tn=new WeakMap,Bp=new WeakMap,ao=new WeakMap,Ru=new WeakMap,lo=new WeakMap,Aa=new WeakMap,Ea=new WeakMap,co=new WeakMap,ku=new WeakMap,os=new WeakMap,ce=new WeakMap,or=new WeakMap,ho=new WeakMap,Sa=new WeakMap,Iu=new WeakMap,Lu=new WeakMap,uo=new WeakMap,Pn=new WeakMap,ar=new WeakMap,Mu=new WeakMap,Ni=new WeakMap,ot=new WeakSet,Vf=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},Um=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const s of l(this,fs).values())if(s.hasTextLayer(t))return s;return null},S0=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const s=A(this,ot,Vf).call(this,t).closest(".textLayer"),n=this.getSelectionBoxes(s);n&&(l(this,Tn)||b(this,Tn,new kR(this)),l(this,Tn).show(s,n,this.direction==="ltr"))},x0=function(){var r,o,a;const t=document.getSelection();if(!t||t.isCollapsed){l(this,or)&&((r=l(this,Tn))==null||r.hide(),b(this,or,null),A(this,ot,js).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===l(this,or))return;const n=A(this,ot,Vf).call(this,t).closest(".textLayer");if(!n){l(this,or)&&((o=l(this,Tn))==null||o.hide(),b(this,or,null),A(this,ot,js).call(this,{hasSelectedText:!1}));return}if((a=l(this,Tn))==null||a.hide(),b(this,or,e),A(this,ot,js).call(this,{hasSelectedText:!0}),!(l(this,os)!==Lt.HIGHLIGHT&&l(this,os)!==Lt.NONE)&&(l(this,os)===Lt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),b(this,oo,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=l(this,os)===Lt.HIGHLIGHT?A(this,ot,Um).call(this,n):null;c==null||c.toggleDrawing();const h=new AbortController,u=this.combinedSignal(h),f=p=>{p.type==="pointerup"&&p.button!==0||(h.abort(),c==null||c.toggleDrawing(!0),p.type==="pointerup"&&A(this,ot,Uf).call(this,"main_toolbar"))};window.addEventListener("pointerup",f,{signal:u}),window.addEventListener("blur",f,{signal:u})}},Uf=function(t=""){l(this,os)===Lt.HIGHLIGHT?this.highlightSelection(t):l(this,Cu)&&A(this,ot,S0).call(this)},C0=function(){document.addEventListener("selectionchange",A(this,ot,x0).bind(this),{signal:this._signal})},T0=function(){if(l(this,ro))return;b(this,ro,new AbortController);const t=this.combinedSignal(l(this,ro));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},P0=function(){var t;(t=l(this,ro))==null||t.abort(),b(this,ro,null)},zm=function(){if(l(this,lo))return;b(this,lo,new AbortController);const t=this.combinedSignal(l(this,lo));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},R0=function(){var t;(t=l(this,lo))==null||t.abort(),b(this,lo,null)},qm=function(){if(l(this,io))return;b(this,io,new AbortController);const t=this.combinedSignal(l(this,io));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},Wm=function(){var t;(t=l(this,io))==null||t.abort(),b(this,io,null)},k0=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},js=function(t){Object.entries(t).some(([s,n])=>l(this,Lu)[s]!==n)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(l(this,Lu),t)}),l(this,os)===Lt.HIGHLIGHT&&t.hasSelectedEditor===!1&&A(this,ot,tr).call(this,[[Yt.HIGHLIGHT_FREE,!0]]))},tr=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},I0=async function(){if(!l(this,ao)){b(this,ao,!0);const t=[];for(const e of l(this,fs).values())t.push(e.enable());await Promise.all(t);for(const e of l(this,es).values())e.enable()}},L0=function(){if(this.unselectAll(),l(this,ao)){b(this,ao,!1);for(const t of l(this,fs).values())t.disable();for(const t of l(this,es).values())t.disable()}},Gm=function(t){const e=l(this,fs).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},M0=function(){let t=null;for(t of l(this,ce));return t},Bh=function(){if(l(this,es).size===0)return!0;if(l(this,es).size===1)for(const t of l(this,es).values())return t.isEmpty();return!1},Xm=function(t){for(const e of l(this,ce))e.unselect();l(this,ce).clear();for(const e of t)e.isEmpty()||(l(this,ce).add(e),e.select());A(this,ot,js).call(this,{hasSelectedEditor:this.hasSelection})},Z(nc,"TRANSLATE_SMALL",1),Z(nc,"TRANSLATE_BIG",10);let Cl=nc;var as,Rn,Qi,wc,kn,hi,Ac,In,Js,lr,xa,Ln,fo,cn,Hh,zf;const Vs=class Vs{constructor(t){w(this,cn);w(this,as,null);w(this,Rn,!1);w(this,Qi,null);w(this,wc,null);w(this,kn,null);w(this,hi,null);w(this,Ac,!1);w(this,In,null);w(this,Js,null);w(this,lr,null);w(this,xa,null);w(this,Ln,!1);b(this,Js,t),b(this,Ln,t._uiManager.useNewAltTextFlow),l(Vs,fo)||b(Vs,fo,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){Vs._l10n??(Vs._l10n=t)}async render(){const t=b(this,Qi,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=b(this,wc,document.createElement("span"));t.append(e),l(this,Ln)?(t.classList.add("new"),t.setAttribute("data-l10n-id",l(Vs,fo).missing),e.setAttribute("data-l10n-id",l(Vs,fo)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=l(this,Js)._uiManager._signal;t.addEventListener("contextmenu",fn,{signal:s}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:s});const n=r=>{r.preventDefault(),l(this,Js)._uiManager.editAltText(l(this,Js)),l(this,Ln)&&l(this,Js)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:l(this,cn,Hh)}})};return t.addEventListener("click",n,{capture:!0,signal:s}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(b(this,Ac,!0),n(r))},{signal:s}),await A(this,cn,zf).call(this),t}finish(){l(this,Qi)&&(l(this,Qi).focus({focusVisible:l(this,Ac)}),b(this,Ac,!1))}isEmpty(){return l(this,Ln)?l(this,as)===null:!l(this,as)&&!l(this,Rn)}hasData(){return l(this,Ln)?l(this,as)!==null||!!l(this,lr):this.isEmpty()}get guessedText(){return l(this,lr)}async setGuessedText(t){l(this,as)===null&&(b(this,lr,t),b(this,xa,await Vs._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),A(this,cn,zf).call(this))}toggleAltTextBadge(t=!1){var e;if(!l(this,Ln)||l(this,as)){(e=l(this,In))==null||e.remove(),b(this,In,null);return}if(!l(this,In)){const s=b(this,In,document.createElement("div"));s.className="noAltTextBadge",l(this,Js).div.append(s)}l(this,In).classList.toggle("hidden",!t)}serialize(t){let e=l(this,as);return!t&&l(this,lr)===e&&(e=l(this,xa)),{altText:e,decorative:l(this,Rn),guessedText:l(this,lr),textWithDisclaimer:l(this,xa)}}get data(){return{altText:l(this,as),decorative:l(this,Rn)}}set data({altText:t,decorative:e,guessedText:s,textWithDisclaimer:n,cancel:r=!1}){s&&(b(this,lr,s),b(this,xa,n)),!(l(this,as)===t&&l(this,Rn)===e)&&(r||(b(this,as,t),b(this,Rn,e)),A(this,cn,zf).call(this))}toggle(t=!1){l(this,Qi)&&(!t&&l(this,hi)&&(clearTimeout(l(this,hi)),b(this,hi,null)),l(this,Qi).disabled=!t)}shown(){l(this,Js)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:l(this,cn,Hh)}})}destroy(){var t,e;(t=l(this,Qi))==null||t.remove(),b(this,Qi,null),b(this,wc,null),b(this,kn,null),(e=l(this,In))==null||e.remove(),b(this,In,null)}};as=new WeakMap,Rn=new WeakMap,Qi=new WeakMap,wc=new WeakMap,kn=new WeakMap,hi=new WeakMap,Ac=new WeakMap,In=new WeakMap,Js=new WeakMap,lr=new WeakMap,xa=new WeakMap,Ln=new WeakMap,fo=new WeakMap,cn=new WeakSet,Hh=function(){return l(this,as)&&"added"||l(this,as)===null&&this.guessedText&&"review"||"missing"},zf=async function(){var n,r,o;const t=l(this,Qi);if(!t)return;if(l(this,Ln)){if(t.classList.toggle("done",!!l(this,as)),t.setAttribute("data-l10n-id",l(Vs,fo)[l(this,cn,Hh)]),(n=l(this,wc))==null||n.setAttribute("data-l10n-id",l(Vs,fo)[`${l(this,cn,Hh)}-label`]),!l(this,as)){(r=l(this,kn))==null||r.remove();return}}else{if(!l(this,as)&&!l(this,Rn)){t.classList.remove("done"),(o=l(this,kn))==null||o.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=l(this,kn);if(!e){b(this,kn,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${l(this,Js).id}`;const a=100,c=l(this,Js)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(l(this,hi)),b(this,hi,null)},{once:!0}),t.addEventListener("mouseenter",()=>{b(this,hi,setTimeout(()=>{b(this,hi,null),l(this,kn).classList.add("show"),l(this,Js)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:c}),t.addEventListener("mouseleave",()=>{var h;l(this,hi)&&(clearTimeout(l(this,hi)),b(this,hi,null)),(h=l(this,kn))==null||h.classList.remove("show")},{signal:c})}l(this,Rn)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=l(this,as)),e.parentNode||t.append(e);const s=l(this,Js).getElementForAltText();s==null||s.setAttribute("aria-describedby",e.id)},w(Vs,fo,null),Z(Vs,"_l10n",null);let Pp=Vs;var Ec,Ca,Du,Ou,Nu,Fu,$u,cr,Ta,hr,Pa,ur,Wo,D0,O0,N0;const Ov=class Ov{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:s=null,onPinchStart:n=null,onPinching:r=null,onPinchEnd:o=null,signal:a}){w(this,Wo);w(this,Ec);w(this,Ca,!1);w(this,Du,null);w(this,Ou);w(this,Nu);w(this,Fu);w(this,$u);w(this,cr,null);w(this,Ta);w(this,hr,null);w(this,Pa);w(this,ur,null);b(this,Ec,t),b(this,Du,s),b(this,Ou,e),b(this,Nu,n),b(this,Fu,r),b(this,$u,o),b(this,Pa,new AbortController),b(this,Ta,AbortSignal.any([a,l(this,Pa).signal])),t.addEventListener("touchstart",A(this,Wo,D0).bind(this),{passive:!1,signal:l(this,Ta)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/jr.pixelRatio}destroy(){var t,e;(t=l(this,Pa))==null||t.abort(),b(this,Pa,null),(e=l(this,cr))==null||e.abort(),b(this,cr,null)}};Ec=new WeakMap,Ca=new WeakMap,Du=new WeakMap,Ou=new WeakMap,Nu=new WeakMap,Fu=new WeakMap,$u=new WeakMap,cr=new WeakMap,Ta=new WeakMap,hr=new WeakMap,Pa=new WeakMap,ur=new WeakMap,Wo=new WeakSet,D0=function(t){var n,r,o;if((n=l(this,Ou))!=null&&n.call(this))return;if(t.touches.length===1){if(l(this,cr))return;const a=b(this,cr,new AbortController),c=AbortSignal.any([l(this,Ta),a.signal]),h=l(this,Ec),u={capture:!0,signal:c,passive:!1},f=p=>{var g;p.pointerType==="touch"&&((g=l(this,cr))==null||g.abort(),b(this,cr,null))};h.addEventListener("pointerdown",p=>{p.pointerType==="touch"&&(Xe(p),f(p))},u),h.addEventListener("pointerup",f,u),h.addEventListener("pointercancel",f,u);return}if(!l(this,ur)){b(this,ur,new AbortController);const a=AbortSignal.any([l(this,Ta),l(this,ur).signal]),c=l(this,Ec),h={signal:a,capture:!1,passive:!1};c.addEventListener("touchmove",A(this,Wo,O0).bind(this),h);const u=A(this,Wo,N0).bind(this);c.addEventListener("touchend",u,h),c.addEventListener("touchcancel",u,h),h.capture=!0,c.addEventListener("pointerdown",Xe,h),c.addEventListener("pointermove",Xe,h),c.addEventListener("pointercancel",Xe,h),c.addEventListener("pointerup",Xe,h),(r=l(this,Nu))==null||r.call(this)}if(Xe(t),t.touches.length!==2||(o=l(this,Du))!=null&&o.call(this)){b(this,hr,null);return}let[e,s]=t.touches;e.identifier>s.identifier&&([e,s]=[s,e]),b(this,hr,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:s.screenX,touch1Y:s.screenY})},O0=function(t){var R;if(!l(this,hr)||t.touches.length!==2)return;Xe(t);let[e,s]=t.touches;e.identifier>s.identifier&&([e,s]=[s,e]);const{screenX:n,screenY:r}=e,{screenX:o,screenY:a}=s,c=l(this,hr),{touch0X:h,touch0Y:u,touch1X:f,touch1Y:p}=c,g=f-h,_=p-u,v=o-n,E=a-r,S=Math.hypot(v,E)||1,C=Math.hypot(g,_)||1;if(!l(this,Ca)&&Math.abs(C-S)<=Ov.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=n,c.touch0Y=r,c.touch1X=o,c.touch1Y=a,!l(this,Ca)){b(this,Ca,!0);return}const T=[(n+o)/2,(r+a)/2];(R=l(this,Fu))==null||R.call(this,T,C,S)},N0=function(t){var e;t.touches.length>=2||(l(this,ur)&&(l(this,ur).abort(),b(this,ur,null),(e=l(this,$u))==null||e.call(this)),l(this,hr)&&(Xe(t),b(this,hr,null),b(this,Ca,!1)))};let Rp=Ov;var Ra,Ji,Ce,Sc,po,Bu,ka,ps,Ia,dr,go,Hu,La,ui,ju,Ma,fr,Mn,xc,Cc,Fi,Da,Vu,Hp,Pt,Km,Uu,Ym,qf,F0,$0,Qm,Wf,Jm,B0,H0,j0,Zm,V0,tb,U0,z0,q0,eb,jh;const jt=class jt{constructor(t){w(this,Pt);w(this,Ra,null);w(this,Ji,null);w(this,Ce,null);w(this,Sc,!1);w(this,po,null);w(this,Bu,"");w(this,ka,!1);w(this,ps,null);w(this,Ia,null);w(this,dr,null);w(this,go,null);w(this,Hu,"");w(this,La,!1);w(this,ui,null);w(this,ju,!1);w(this,Ma,!1);w(this,fr,!1);w(this,Mn,null);w(this,xc,0);w(this,Cc,0);w(this,Fi,null);w(this,Da,null);Z(this,"_isCopy",!1);Z(this,"_editToolbar",null);Z(this,"_initialOptions",Object.create(null));Z(this,"_initialData",null);Z(this,"_isVisible",!0);Z(this,"_uiManager",null);Z(this,"_focusEventsAllowed",!0);w(this,Vu,!1);w(this,Hp,jt._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:s,pageHeight:n,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,n],this.pageTranslation=[r,o];const[a,c]=this.parentDimensions;this.x=t.x/a,this.y=t.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=jt.prototype._resizeWithKeyboard,e=Cl.TRANSLATE_SMALL,s=Cl.TRANSLATE_BIG;return Wt(this,"_resizerKeyboardManager",new Qd([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],jt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return Wt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new MR({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(jt._l10n??(jt._l10n=t),jt._l10nResizer||(jt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),jt._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);jt._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){ge("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return l(this,Vu)}set _isDraggable(t){var e;b(this,Vu,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=l(this,Hp)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):A(this,Pt,jh).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(l(this,La)?b(this,La,!1):this.parent.setSelected(this))}focusout(t){var s;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(s=this.parent)!=null&&s.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,s,n){const[r,o]=this.parentDimensions;[s,n]=this.screenToPageTranslation(s,n),this.x=(t+s)/r,this.y=(e+n)/o,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[s,n]=this.parentDimensions;this.setAt(t*s,e*n,this.width*s,this.height*n),this._onTranslated()}translate(t,e){A(this,Pt,Km).call(this,this.parentDimensions,t,e)}translateInPage(t,e){l(this,ui)||b(this,ui,[this.x,this.y,this.width,this.height]),A(this,Pt,Km).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){l(this,ui)||b(this,ui,[this.x,this.y,this.width,this.height]);const{div:s,parentDimensions:[n,r]}=this;if(this.x+=t/n,this.y+=e/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:f,y:p}=this.div.getBoundingClientRect();this.parent.findNewParent(this,f,p)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:a}=this;const[c,h]=this.getBaseTranslation();o+=c,a+=h;const{style:u}=s;u.left=`${(100*o).toFixed(2)}%`,u.top=`${(100*a).toFixed(2)}%`,this._onTranslating(o,a),s.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!l(this,ui)&&(l(this,ui)[0]!==this.x||l(this,ui)[1]!==this.y)}get _hasBeenResized(){return!!l(this,ui)&&(l(this,ui)[2]!==this.width||l(this,ui)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:s}=jt,n=s/t,r=s/e;switch(this.rotation){case 90:return[-n,r];case 180:return[n,r];case 270:return[n,-r];default:return[-n,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[s,n]}=this;let{x:r,y:o,width:a,height:c}=this;if(a*=s,c*=n,r*=s,o*=n,this._mustFixPosition)switch(t){case 0:r=Gs(r,0,s-a),o=Gs(o,0,n-c);break;case 90:r=Gs(r,0,s-c),o=Gs(o,a,n);break;case 180:r=Gs(r,a,s),o=Gs(o,c,n);break;case 270:r=Gs(r,c,s),o=Gs(o,0,n-a);break}this.x=r/=s,this.y=o/=n;const[h,u]=this.getBaseTranslation();r+=h,o+=u,e.left=`${(100*r).toFixed(2)}%`,e.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var s;return A(s=jt,Uu,Ym).call(s,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var s;return A(s=jt,Uu,Ym).call(s,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,s]}=this;return[e*t,s*t]}setDims(t,e){const[s,n]=this.parentDimensions,{style:r}=this.div;r.width=`${(100*t/s).toFixed(2)}%`,l(this,ka)||(r.height=`${(100*e/n).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:s}=t,n=s.endsWith("%"),r=!l(this,ka)&&e.endsWith("%");if(n&&r)return;const[o,a]=this.parentDimensions;n||(t.width=`${(100*parseFloat(s)/o).toFixed(2)}%`),!l(this,ka)&&!r&&(t.height=`${(100*parseFloat(e)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=l(this,Ce))==null||t.finish()}async addEditToolbar(){return this._editToolbar||l(this,Ma)?this._editToolbar:(this._editToolbar=new Hm(this),this.div.append(this._editToolbar.render()),l(this,Ce)&&await this._editToolbar.addAltText(l(this,Ce)),this._editToolbar)}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=l(this,Ce))==null||t.destroy())}addContainer(t){var s;const e=(s=this._editToolbar)==null?void 0:s.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){l(this,Ce)||(Pp.initialize(jt._l10n),b(this,Ce,new Pp(this)),l(this,Ra)&&(l(this,Ce).data=l(this,Ra),b(this,Ra,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=l(this,Ce))==null?void 0:t.data}set altTextData(t){l(this,Ce)&&(l(this,Ce).data=t)}get guessedAltText(){var t;return(t=l(this,Ce))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=l(this,Ce))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=l(this,Ce))==null?void 0:e.serialize(t)}hasAltText(){return!!l(this,Ce)&&!l(this,Ce).isEmpty()}hasAltTextData(){var t;return((t=l(this,Ce))==null?void 0:t.hasData())??!1}render(){var o;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=l(this,Sc)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),A(this,Pt,tb).call(this);const[e,s]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*s/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/s).toFixed(2)}%`);const[n,r]=this.getInitialTranslation();return this.translate(n,r),Cv(this,t,["keydown","pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(l(this,Da)||b(this,Da,new Rp({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:A(this,Pt,B0).bind(this),onPinching:A(this,Pt,H0).bind(this),onPinchEnd:A(this,Pt,j0).bind(this),signal:this._uiManager._signal}))),(o=this._uiManager._editorUndoBar)==null||o.hide(),t}pointerdown(t){const{isMac:e}=Es.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(b(this,La,!0),this._isDraggable){A(this,Pt,V0).call(this,t);return}A(this,Pt,Zm).call(this,t)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){l(this,Mn)&&clearTimeout(l(this,Mn)),b(this,Mn,setTimeout(()=>{var t;b(this,Mn,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,s){t.changeParent(this),this.x=e,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,s=this.rotation){const n=this.parentScale,[r,o]=this.pageDimensions,[a,c]=this.pageTranslation,h=t/n,u=e/n,f=this.x*r,p=this.y*o,g=this.width*r,_=this.height*o;switch(s){case 0:return[f+h+a,o-p-u-_+c,f+h+g+a,o-p-u+c];case 90:return[f+u+a,o-p+h+c,f+u+_+a,o-p+h+g+c];case 180:return[f-h-g+a,o-p+u+c,f-h+a,o-p+u+_+c];case 270:return[f-u-_+a,o-p-h-g+c,f-u+a,o-p-h+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[s,n,r,o]=t,a=r-s,c=o-n;switch(this.rotation){case 0:return[s,e-o,a,c];case 90:return[s,e-n,c,a];case 180:return[r,e-n,a,c];case 270:return[r,e-o,c,a];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){b(this,Ma,!0)}disableEditMode(){b(this,Ma,!1)}isInEditMode(){return l(this,Ma)}shouldGetKeyboardEvents(){return l(this,fr)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:s,right:n}=this.getClientDimensions(),{innerHeight:r,innerWidth:o}=window;return e<o&&n>0&&t<r&&s>0}rebuild(){A(this,Pt,tb).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){ge("An editor must be serializable")}static async deserialize(t,e,s){const n=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:s});n.rotation=t.rotation,b(n,Ra,t.accessibilityData),n._isCopy=t.isCopy||!1;const[r,o]=n.pageDimensions,[a,c,h,u]=n.getRectInCurrentCoords(t.rect,o);return n.x=a/r,n.y=c/o,n.width=h/r,n.height=u/o,n}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e;if((t=l(this,go))==null||t.abort(),b(this,go,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),l(this,Mn)&&(clearTimeout(l(this,Mn)),b(this,Mn,null)),A(this,Pt,jh).call(this),this.removeEditToolbar(),l(this,Fi)){for(const s of l(this,Fi).values())clearTimeout(s);b(this,Fi,null)}this.parent=null,(e=l(this,Da))==null||e.destroy(),b(this,Da,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(A(this,Pt,F0).call(this),l(this,ps).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),b(this,dr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=l(this,ps).children;if(!l(this,Ji)){b(this,Ji,Array.from(e));const o=A(this,Pt,U0).bind(this),a=A(this,Pt,z0).bind(this),c=this._uiManager._signal;for(const h of l(this,Ji)){const u=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",o,{signal:c}),h.addEventListener("blur",a,{signal:c}),h.addEventListener("focus",A(this,Pt,q0).bind(this,u),{signal:c}),h.setAttribute("data-l10n-id",jt._l10nResizer[u])}}const s=l(this,Ji)[0];let n=0;for(const o of e){if(o===s)break;n++}const r=(360-this.rotation+this.parentRotation)%360/90*(l(this,Ji).length/4);if(r!==n){if(r<n)for(let a=0;a<n-r;a++)l(this,ps).append(l(this,ps).firstChild);else if(r>n)for(let a=0;a<r-n;a++)l(this,ps).firstChild.before(l(this,ps).lastChild);let o=0;for(const a of e){const h=l(this,Ji)[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",jt._l10nResizer[h])}}A(this,Pt,eb).call(this,0),b(this,fr,!0),l(this,ps).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){l(this,fr)&&A(this,Pt,Jm).call(this,l(this,Hu),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){A(this,Pt,jh).call(this),this.div.focus()}select(){var t,e,s;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var n,r;(n=this.div)!=null&&n.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(e=this._editToolbar)==null||e.show(),(s=l(this,Ce))==null||s.toggleAltTextBadge(!1)}unselect(){var t,e,s,n,r;(t=l(this,ps))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(s=this.div)!=null&&s.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(n=this._editToolbar)==null||n.hide(),(r=l(this,Ce))==null||r.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return l(this,ju)}set isEditing(t){b(this,ju,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){b(this,ka,!0);const s=t/e,{style:n}=this.div;n.aspectRatio=s,n.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){l(this,Fi)||b(this,Fi,new Map);const{action:s}=t;let n=l(this,Fi).get(s);n&&clearTimeout(n),n=setTimeout(()=>{this._reportTelemetry(t),l(this,Fi).delete(s),l(this,Fi).size===0&&b(this,Fi,null)},jt._telemetryTimeout),l(this,Fi).set(s,n);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),b(this,Sc,!1)}disable(){this.div&&(this.div.tabIndex=-1),b(this,Sc,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const s=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),s.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};Ra=new WeakMap,Ji=new WeakMap,Ce=new WeakMap,Sc=new WeakMap,po=new WeakMap,Bu=new WeakMap,ka=new WeakMap,ps=new WeakMap,Ia=new WeakMap,dr=new WeakMap,go=new WeakMap,Hu=new WeakMap,La=new WeakMap,ui=new WeakMap,ju=new WeakMap,Ma=new WeakMap,fr=new WeakMap,Mn=new WeakMap,xc=new WeakMap,Cc=new WeakMap,Fi=new WeakMap,Da=new WeakMap,Vu=new WeakMap,Hp=new WeakMap,Pt=new WeakSet,Km=function([t,e],s,n){[s,n]=this.screenToPageTranslation(s,n),this.x+=s/t,this.y+=n/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Uu=new WeakSet,Ym=function(t,e,s){switch(s){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},qf=function(t){switch(t){case 90:{const[e,s]=this.pageDimensions;return[0,-e/s,s/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,s]=this.pageDimensions;return[0,e/s,-s/e,0]}default:return[1,0,0,1]}},F0=function(){if(l(this,ps))return;b(this,ps,document.createElement("div")),l(this,ps).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const s of t){const n=document.createElement("div");l(this,ps).append(n),n.classList.add("resizer",s),n.setAttribute("data-resizer-name",s),n.addEventListener("pointerdown",A(this,Pt,$0).bind(this,s),{signal:e}),n.addEventListener("contextmenu",fn,{signal:e}),n.tabIndex=-1}this.div.prepend(l(this,ps))},$0=function(t,e){var u;e.preventDefault();const{isMac:s}=Es.platform;if(e.button!==0||e.ctrlKey&&s)return;(u=l(this,Ce))==null||u.toggle(!1);const n=this._isDraggable;this._isDraggable=!1,b(this,Ia,[e.screenX,e.screenY]);const r=new AbortController,o=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",A(this,Pt,Jm).bind(this,t),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",Xe,{passive:!1,signal:o}),window.addEventListener("contextmenu",fn,{signal:o}),b(this,dr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const a=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const h=()=>{var f;r.abort(),this.parent.togglePointerEvents(!0),(f=l(this,Ce))==null||f.toggle(!0),this._isDraggable=n,this.parent.div.style.cursor=a,this.div.style.cursor=c,A(this,Pt,Wf).call(this)};window.addEventListener("pointerup",h,{signal:o}),window.addEventListener("blur",h,{signal:o})},Qm=function(t,e,s,n){this.width=s,this.height=n,this.x=t,this.y=e;const[r,o]=this.parentDimensions;this.setDims(r*s,o*n),this.fixAndSetPosition(),this._onResized()},Wf=function(){if(!l(this,dr))return;const{savedX:t,savedY:e,savedWidth:s,savedHeight:n}=l(this,dr);b(this,dr,null);const r=this.x,o=this.y,a=this.width,c=this.height;r===t&&o===e&&a===s&&c===n||this.addCommands({cmd:A(this,Pt,Qm).bind(this,r,o,a,c),undo:A(this,Pt,Qm).bind(this,t,e,s,n),mustExec:!0})},Jm=function(t,e){const[s,n]=this.parentDimensions,r=this.x,o=this.y,a=this.width,c=this.height,h=jt.MIN_SIZE/s,u=jt.MIN_SIZE/n,f=A(this,Pt,qf).call(this,this.rotation),p=(J,X)=>[f[0]*J+f[2]*X,f[1]*J+f[3]*X],g=A(this,Pt,qf).call(this,360-this.rotation),_=(J,X)=>[g[0]*J+g[2]*X,g[1]*J+g[3]*X];let v,E,S=!1,C=!1;switch(t){case"topLeft":S=!0,v=(J,X)=>[0,0],E=(J,X)=>[J,X];break;case"topMiddle":v=(J,X)=>[J/2,0],E=(J,X)=>[J/2,X];break;case"topRight":S=!0,v=(J,X)=>[J,0],E=(J,X)=>[0,X];break;case"middleRight":C=!0,v=(J,X)=>[J,X/2],E=(J,X)=>[0,X/2];break;case"bottomRight":S=!0,v=(J,X)=>[J,X],E=(J,X)=>[0,0];break;case"bottomMiddle":v=(J,X)=>[J/2,X],E=(J,X)=>[J/2,0];break;case"bottomLeft":S=!0,v=(J,X)=>[0,X],E=(J,X)=>[J,0];break;case"middleLeft":C=!0,v=(J,X)=>[0,X/2],E=(J,X)=>[J,X/2];break}const T=v(a,c),R=E(a,c);let I=p(...R);const F=jt._round(r+I[0]),N=jt._round(o+I[1]);let H=1,U=1,Q,tt;if(e.fromKeyboard)({deltaX:Q,deltaY:tt}=e);else{const{screenX:J,screenY:X}=e,[et,Y]=l(this,Ia);[Q,tt]=this.screenToPageTranslation(J-et,X-Y),l(this,Ia)[0]=J,l(this,Ia)[1]=X}if([Q,tt]=_(Q/s,tt/n),S){const J=Math.hypot(a,c);H=U=Math.max(Math.min(Math.hypot(R[0]-T[0]-Q,R[1]-T[1]-tt)/J,1/a,1/c),h/a,u/c)}else C?H=Gs(Math.abs(R[0]-T[0]-Q),h,1)/a:U=Gs(Math.abs(R[1]-T[1]-tt),u,1)/c;const Et=jt._round(a*H),At=jt._round(c*U);I=p(...E(Et,At));const Rt=F-I[0],oe=N-I[1];l(this,ui)||b(this,ui,[this.x,this.y,this.width,this.height]),this.width=Et,this.height=At,this.x=Rt,this.y=oe,this.setDims(s*Et,n*At),this.fixAndSetPosition(),this._onResizing()},B0=function(){var t;b(this,dr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=l(this,Ce))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},H0=function(t,e,s){let r=.7*(s/e)+1-.7;if(r===1)return;const o=A(this,Pt,qf).call(this,this.rotation),a=(F,N)=>[o[0]*F+o[2]*N,o[1]*F+o[3]*N],[c,h]=this.parentDimensions,u=this.x,f=this.y,p=this.width,g=this.height,_=jt.MIN_SIZE/c,v=jt.MIN_SIZE/h;r=Math.max(Math.min(r,1/p,1/g),_/p,v/g);const E=jt._round(p*r),S=jt._round(g*r);if(E===p&&S===g)return;l(this,ui)||b(this,ui,[u,f,p,g]);const C=a(p/2,g/2),T=jt._round(u+C[0]),R=jt._round(f+C[1]),I=a(E/2,S/2);this.x=T-I[0],this.y=R-I[1],this.width=E,this.height=S,this.setDims(c*E,h*S),this.fixAndSetPosition(),this._onResizing()},j0=function(){var t;(t=l(this,Ce))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),A(this,Pt,Wf).call(this)},Zm=function(t){const{isMac:e}=Es.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},V0=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let s=!1;const n=new AbortController,r=this._uiManager.combinedSignal(n),o={capture:!0,passive:!1,signal:r},a=h=>{n.abort(),b(this,po,null),b(this,La,!1),this._uiManager.endDragSession()||A(this,Pt,Zm).call(this,h),s&&this._onStopDragging()};e&&(b(this,xc,t.clientX),b(this,Cc,t.clientY),b(this,po,t.pointerId),b(this,Bu,t.pointerType),window.addEventListener("pointermove",h=>{s||(s=!0,this._onStartDragging());const{clientX:u,clientY:f,pointerId:p}=h;if(p!==l(this,po)){Xe(h);return}const[g,_]=this.screenToPageTranslation(u-l(this,xc),f-l(this,Cc));b(this,xc,u),b(this,Cc,f),this._uiManager.dragSelectedEditors(g,_)},o),window.addEventListener("touchmove",Xe,o),window.addEventListener("pointerdown",h=>{h.pointerType===l(this,Bu)&&(l(this,Da)||h.isPrimary)&&a(h),Xe(h)},o));const c=h=>{if(!l(this,po)||l(this,po)===h.pointerId){a(h);return}Xe(h)};window.addEventListener("pointerup",c,{signal:r}),window.addEventListener("blur",c,{signal:r})},tb=function(){if(l(this,go)||!this.div)return;b(this,go,new AbortController);const t=this._uiManager.combinedSignal(l(this,go));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},U0=function(t){jt._resizerKeyboardManager.exec(this,t)},z0=function(t){var e;l(this,fr)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==l(this,ps)&&A(this,Pt,jh).call(this)},q0=function(t){b(this,Hu,l(this,fr)?t:"")},eb=function(t){if(l(this,Ji))for(const e of l(this,Ji))e.tabIndex=t},jh=function(){b(this,fr,!1),A(this,Pt,eb).call(this,-1),A(this,Pt,Wf).call(this)},w(jt,Uu),Z(jt,"_l10n",null),Z(jt,"_l10nResizer",null),Z(jt,"_borderLineWidth",-1),Z(jt,"_colorManager",new Vm),Z(jt,"_zIndex",1),Z(jt,"_telemetryTimeout",1e3);let Se=jt;class MR extends Se{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const gw=3285377520,Mi=4294901760,wn=65535;class W0{constructor(t){this.h1=t?t&4294967295:gw,this.h2=t?t&4294967295:gw}update(t){let e,s;if(typeof t=="string"){e=new Uint8Array(t.length*2),s=0;for(let v=0,E=t.length;v<E;v++){const S=t.charCodeAt(v);S<=255?e[s++]=S:(e[s++]=S>>>8,e[s++]=S&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),s=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const n=s>>2,r=s-n*4,o=new Uint32Array(e.buffer,0,n);let a=0,c=0,h=this.h1,u=this.h2;const f=3432918353,p=461845907,g=f&wn,_=p&wn;for(let v=0;v<n;v++)v&1?(a=o[v],a=a*f&Mi|a*g&wn,a=a<<15|a>>>17,a=a*p&Mi|a*_&wn,h^=a,h=h<<13|h>>>19,h=h*5+3864292196):(c=o[v],c=c*f&Mi|c*g&wn,c=c<<15|c>>>17,c=c*p&Mi|c*_&wn,u^=c,u=u<<13|u>>>19,u=u*5+3864292196);switch(a=0,r){case 3:a^=e[n*4+2]<<16;case 2:a^=e[n*4+1]<<8;case 1:a^=e[n*4],a=a*f&Mi|a*g&wn,a=a<<15|a>>>17,a=a*p&Mi|a*_&wn,n&1?h^=a:u^=a}this.h1=h,this.h2=u}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Mi|t*36045&wn,e=e*4283543511&Mi|((e<<16|t>>>16)*2950163797&Mi)>>>16,t^=e>>>1,t=t*444984403&Mi|t*60499&wn,e=e*3301882366&Mi|((e<<16|t>>>16)*3120437893&Mi)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const sb=Object.freeze({map:null,hash:"",transfer:void 0});var Oa,Na,gs,jp,G0;class Tv{constructor(){w(this,jp);w(this,Oa,!1);w(this,Na,null);w(this,gs,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const s=l(this,gs).get(t);return s===void 0?e:Object.assign(e,s)}getRawValue(t){return l(this,gs).get(t)}remove(t){if(l(this,gs).delete(t),l(this,gs).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of l(this,gs).values())if(e instanceof Se)return;this.onAnnotationEditor(null)}}setValue(t,e){const s=l(this,gs).get(t);let n=!1;if(s!==void 0)for(const[r,o]of Object.entries(e))s[r]!==o&&(n=!0,s[r]=o);else n=!0,l(this,gs).set(t,e);n&&A(this,jp,G0).call(this),e instanceof Se&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return l(this,gs).has(t)}get size(){return l(this,gs).size}resetModified(){l(this,Oa)&&(b(this,Oa,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new X0(this)}get serializable(){if(l(this,gs).size===0)return sb;const t=new Map,e=new W0,s=[],n=Object.create(null);let r=!1;for(const[o,a]of l(this,gs)){const c=a instanceof Se?a.serialize(!1,n):a;c&&(t.set(o,c),e.update(`${o}:${JSON.stringify(c)}`),r||(r=!!c.bitmap))}if(r)for(const o of t.values())o.bitmap&&s.push(o.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:s}:sb}get editorStats(){let t=null;const e=new Map;for(const s of l(this,gs).values()){if(!(s instanceof Se))continue;const n=s.telemetryFinalData;if(!n)continue;const{type:r}=n;e.has(r)||e.set(r,Object.getPrototypeOf(s).constructor),t||(t=Object.create(null));const o=t[r]||(t[r]=new Map);for(const[a,c]of Object.entries(n)){if(a==="type")continue;let h=o.get(a);h||(h=new Map,o.set(a,h));const u=h.get(c)??0;h.set(c,u+1)}}for(const[s,n]of e)t[s]=n.computeTelemetryFinalData(t[s]);return t}resetModifiedIds(){b(this,Na,null)}get modifiedIds(){if(l(this,Na))return l(this,Na);const t=[];for(const e of l(this,gs).values())!(e instanceof Se)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return b(this,Na,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return l(this,gs).entries()}}Oa=new WeakMap,Na=new WeakMap,gs=new WeakMap,jp=new WeakSet,G0=function(){l(this,Oa)||(b(this,Oa,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var zu;class X0 extends Tv{constructor(e){super();w(this,zu);const{map:s,hash:n,transfer:r}=e.serializable,o=structuredClone(s,r?{transfer:r}:null);b(this,zu,{map:o,hash:n,transfer:r})}get print(){ge("Should not call PrintAnnotationStorage.print")}get serializable(){return l(this,zu)}get modifiedIds(){return Wt(this,"modifiedIds",{ids:new Set,hash:""})}}zu=new WeakMap;var Tc;class DR{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){w(this,Tc,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),l(this,Tc).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:s}){if(!(!t||l(this,Tc).has(t.loadedName))){if(Ke(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:r,style:o}=t,a=new FontFace(n,r,o);this.addNativeFontFace(a);try{await a.load(),l(this,Tc).add(n),s==null||s(t)}catch{Ot(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}ge("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const s=t.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(n){throw Ot(`Failed to load font '${s.family}': '${n}'.`),t.disableFontFace=!0,n}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const n=this._queueLoadingCallback(s);this._prepareFontLoadEvent(t,n)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return Wt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return Wt(this,"isSyncFontLoadingSupported",Ws||Es.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(Ke(!n.done,"completeRequest() cannot be called twice."),n.done=!0;s.length>0&&s[0].done;){const r=s.shift();setTimeout(r.callback,0)}}const{loadingRequests:s}=this,n={done:!1,complete:e,callback:t};return s.push(n),n}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Wt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function s(R,I){return R.charCodeAt(I)<<24|R.charCodeAt(I+1)<<16|R.charCodeAt(I+2)<<8|R.charCodeAt(I+3)&255}function n(R,I,F,N){const H=R.substring(0,I),U=R.substring(I+F);return H+N+U}let r,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const c=a.getContext("2d");let h=0;function u(R,I){if(++h>30){Ot("Load test font never loaded."),I();return}if(c.font="30px "+R,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){I();return}setTimeout(u.bind(null,R,I))}const f=`lt${Date.now()}${this.loadTestFontId++}`;let p=this._loadTestFont;p=n(p,976,f.length,f);const _=16,v=1482184792;let E=s(p,_);for(r=0,o=f.length-3;r<o;r+=4)E=E-v+s(f,r)|0;r<f.length&&(E=E-v+s(f+"XXX",r)|0),p=n(p,_,4,_R(E));const S=`url(data:font/opentype;base64,${btoa(p)});`,C=`@font-face {font-family:"${f}";src:${S}}`;this.insertRule(C);const T=this._document.createElement("div");T.style.visibility="hidden",T.style.width=T.style.height="10px",T.style.position="absolute",T.style.top=T.style.left="0px";for(const R of[t.loadedName,f]){const I=this._document.createElement("span");I.textContent="Hi",I.style.fontFamily=R,T.append(I)}this._document.body.append(T),u(f,()=>{T.remove(),e.complete()})}}Tc=new WeakMap;class OR{constructor(t,e=null){this.compiledGlyphs=Object.create(null);for(const s in t)this[s]=t[s];this._inspectFont=e}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${g0(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${t}}`}return(s=this._inspectFont)==null||s.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const s=this.loadedName+"_path_"+e;let n;try{n=t.get(s)}catch(o){Ot(`getPathGenerator - ignoring character: "${o}".`)}const r=new Path2D(n||"");return this.fontExtraProperties||t.delete(s),this.compiledGlyphs[e]=r}}const xf={DATA:1,ERROR:2},We={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function mw(){}function Ys(i){if(i instanceof Uo||i instanceof Fm||i instanceof dw||i instanceof Tp||i instanceof pm)return i;switch(i instanceof Error||typeof i=="object"&&i!==null||ge('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new Uo(i.message);case"InvalidPDFException":return new Fm(i.message);case"PasswordException":return new dw(i.message,i.code);case"ResponseException":return new Tp(i.message,i.status,i.missing);case"UnknownErrorException":return new pm(i.message,i.details)}return new pm(i.message,i.toString())}var Pc,zi,K0,Y0,Q0,Gf;class Vh{constructor(t,e,s){w(this,zi);w(this,Pc,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",A(this,zi,K0).bind(this),{signal:l(this,Pc).signal})}on(t,e){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=e}send(t,e,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},s)}sendWithPromise(t,e,s){const n=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[n]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:n,data:e},s)}catch(o){r.reject(o)}return r.promise}sendWithStream(t,e,s,n){const r=this.streamId++,o=this.sourceName,a=this.targetName,c=this.comObj;return new ReadableStream({start:h=>{const u=Promise.withResolvers();return this.streamControllers[r]={controller:h,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:a,action:t,streamId:r,data:e,desiredSize:h.desiredSize},n),u.promise},pull:h=>{const u=Promise.withResolvers();return this.streamControllers[r].pullCall=u,c.postMessage({sourceName:o,targetName:a,stream:We.PULL,streamId:r,desiredSize:h.desiredSize}),u.promise},cancel:h=>{Ke(h instanceof Error,"cancel must have a valid reason");const u=Promise.withResolvers();return this.streamControllers[r].cancelCall=u,this.streamControllers[r].isClosed=!0,c.postMessage({sourceName:o,targetName:a,stream:We.CANCEL,streamId:r,reason:Ys(h)}),u.promise}},s)}destroy(){var t;(t=l(this,Pc))==null||t.abort(),b(this,Pc,null)}}Pc=new WeakMap,zi=new WeakSet,K0=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){A(this,zi,Q0).call(this,t);return}if(t.callback){const s=t.callbackId,n=this.callbackCapabilities[s];if(!n)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],t.callback===xf.DATA)n.resolve(t.data);else if(t.callback===xf.ERROR)n.reject(Ys(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const s=this.sourceName,n=t.sourceName,r=this.comObj;Promise.try(e,t.data).then(function(o){r.postMessage({sourceName:s,targetName:n,callback:xf.DATA,callbackId:t.callbackId,data:o})},function(o){r.postMessage({sourceName:s,targetName:n,callback:xf.ERROR,callbackId:t.callbackId,reason:Ys(o)})});return}if(t.streamId){A(this,zi,Y0).call(this,t);return}e(t.data)},Y0=function(t){const e=t.streamId,s=this.sourceName,n=t.sourceName,r=this.comObj,o=this,a=this.actionHandler[t.action],c={enqueue(h,u=1,f){if(this.isCancelled)return;const p=this.desiredSize;this.desiredSize-=u,p>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:s,targetName:n,stream:We.ENQUEUE,streamId:e,chunk:h},f)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:n,stream:We.CLOSE,streamId:e}),delete o.streamSinks[e])},error(h){Ke(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:n,stream:We.ERROR,streamId:e,reason:Ys(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[e]=c,Promise.try(a,t.data,c).then(function(){r.postMessage({sourceName:s,targetName:n,stream:We.START_COMPLETE,streamId:e,success:!0})},function(h){r.postMessage({sourceName:s,targetName:n,stream:We.START_COMPLETE,streamId:e,reason:Ys(h)})})},Q0=function(t){const e=t.streamId,s=this.sourceName,n=t.sourceName,r=this.comObj,o=this.streamControllers[e],a=this.streamSinks[e];switch(t.stream){case We.START_COMPLETE:t.success?o.startCall.resolve():o.startCall.reject(Ys(t.reason));break;case We.PULL_COMPLETE:t.success?o.pullCall.resolve():o.pullCall.reject(Ys(t.reason));break;case We.PULL:if(!a){r.postMessage({sourceName:s,targetName:n,stream:We.PULL_COMPLETE,streamId:e,success:!0});break}a.desiredSize<=0&&t.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=t.desiredSize,Promise.try(a.onPull||mw).then(function(){r.postMessage({sourceName:s,targetName:n,stream:We.PULL_COMPLETE,streamId:e,success:!0})},function(h){r.postMessage({sourceName:s,targetName:n,stream:We.PULL_COMPLETE,streamId:e,reason:Ys(h)})});break;case We.ENQUEUE:if(Ke(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case We.CLOSE:if(Ke(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),A(this,zi,Gf).call(this,o,e);break;case We.ERROR:Ke(o,"error should have stream controller"),o.controller.error(Ys(t.reason)),A(this,zi,Gf).call(this,o,e);break;case We.CANCEL_COMPLETE:t.success?o.cancelCall.resolve():o.cancelCall.reject(Ys(t.reason)),A(this,zi,Gf).call(this,o,e);break;case We.CANCEL:if(!a)break;const c=Ys(t.reason);Promise.try(a.onCancel||mw,c).then(function(){r.postMessage({sourceName:s,targetName:n,stream:We.CANCEL_COMPLETE,streamId:e,success:!0})},function(h){r.postMessage({sourceName:s,targetName:n,stream:We.CANCEL_COMPLETE,streamId:e,reason:Ys(h)})}),a.sinkCapability.reject(c),a.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},Gf=async function(t,e){var s,n,r;await Promise.allSettled([(s=t.startCall)==null?void 0:s.promise,(n=t.pullCall)==null?void 0:n.promise,(r=t.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[e]};var qu;class J0{constructor({enableHWA:t=!1}){w(this,qu,!1);b(this,qu,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(t,e);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!l(this,qu)})}}reset(t,e,s){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){ge("Abstract method `_createCanvas` called.")}}qu=new WeakMap;class NR extends J0{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const s=this._document.createElement("canvas");return s.width=t,s.height=e,s}}class Z0{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){ge("Abstract method `_fetch` called.")}}class bw extends Z0{async _fetch(t){const e=await Kd(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Xd(e)}}class tE{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,s,n,r){return"none"}destroy(t=!1){}}var Fa,Rc,pr,gr,Ts,$a,Ba,ut,xs,Uh,Ql,Xf,Jl,eE,ib,Zl,zh,qh,nb,Wh;class FR extends tE{constructor({docId:e,ownerDocument:s=globalThis.document}){super();w(this,ut);w(this,Fa);w(this,Rc);w(this,pr);w(this,gr);w(this,Ts);w(this,$a);w(this,Ba,0);b(this,gr,e),b(this,Ts,s)}addFilter(e){if(!e)return"none";let s=l(this,ut,xs).get(e);if(s)return s;const[n,r,o]=A(this,ut,Xf).call(this,e),a=e.length===1?n:`${n}${r}${o}`;if(s=l(this,ut,xs).get(a),s)return l(this,ut,xs).set(e,s),s;const c=`g_${l(this,gr)}_transfer_map_${Bs(this,Ba)._++}`,h=A(this,ut,Jl).call(this,c);l(this,ut,xs).set(e,h),l(this,ut,xs).set(a,h);const u=A(this,ut,Zl).call(this,c);return A(this,ut,qh).call(this,n,r,o,u),h}addHCMFilter(e,s){var _;const n=`${e}-${s}`,r="base";let o=l(this,ut,Uh).get(r);if((o==null?void 0:o.key)===n||(o?((_=o.filter)==null||_.remove(),o.key=n,o.url="none",o.filter=null):(o={key:n,url:"none",filter:null},l(this,ut,Uh).set(r,o)),!e||!s))return o.url;const a=A(this,ut,Wh).call(this,e);e=_t.makeHexColor(...a);const c=A(this,ut,Wh).call(this,s);if(s=_t.makeHexColor(...c),l(this,ut,Ql).style.color="",e==="#000000"&&s==="#ffffff"||e===s)return o.url;const h=new Array(256);for(let v=0;v<=255;v++){const E=v/255;h[v]=E<=.03928?E/12.92:((E+.055)/1.055)**2.4}const u=h.join(","),f=`g_${l(this,gr)}_hcm_filter`,p=o.filter=A(this,ut,Zl).call(this,f);A(this,ut,qh).call(this,u,u,u,p),A(this,ut,ib).call(this,p);const g=(v,E)=>{const S=a[v]/255,C=c[v]/255,T=new Array(E+1);for(let R=0;R<=E;R++)T[R]=S+R/E*(C-S);return T.join(",")};return A(this,ut,qh).call(this,g(0,5),g(1,5),g(2,5),p),o.url=A(this,ut,Jl).call(this,f),o.url}addAlphaFilter(e){let s=l(this,ut,xs).get(e);if(s)return s;const[n]=A(this,ut,Xf).call(this,[e]),r=`alpha_${n}`;if(s=l(this,ut,xs).get(r),s)return l(this,ut,xs).set(e,s),s;const o=`g_${l(this,gr)}_alpha_map_${Bs(this,Ba)._++}`,a=A(this,ut,Jl).call(this,o);l(this,ut,xs).set(e,a),l(this,ut,xs).set(r,a);const c=A(this,ut,Zl).call(this,o);return A(this,ut,nb).call(this,n,c),a}addLuminosityFilter(e){let s=l(this,ut,xs).get(e||"luminosity");if(s)return s;let n,r;if(e?([n]=A(this,ut,Xf).call(this,[e]),r=`luminosity_${n}`):r="luminosity",s=l(this,ut,xs).get(r),s)return l(this,ut,xs).set(e,s),s;const o=`g_${l(this,gr)}_luminosity_map_${Bs(this,Ba)._++}`,a=A(this,ut,Jl).call(this,o);l(this,ut,xs).set(e,a),l(this,ut,xs).set(r,a);const c=A(this,ut,Zl).call(this,o);return A(this,ut,eE).call(this,c),e&&A(this,ut,nb).call(this,n,c),a}addHighlightHCMFilter(e,s,n,r,o){var C;const a=`${s}-${n}-${r}-${o}`;let c=l(this,ut,Uh).get(e);if((c==null?void 0:c.key)===a||(c?((C=c.filter)==null||C.remove(),c.key=a,c.url="none",c.filter=null):(c={key:a,url:"none",filter:null},l(this,ut,Uh).set(e,c)),!s||!n))return c.url;const[h,u]=[s,n].map(A(this,ut,Wh).bind(this));let f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),p=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[g,_]=[r,o].map(A(this,ut,Wh).bind(this));p<f&&([f,p,g,_]=[p,f,_,g]),l(this,ut,Ql).style.color="";const v=(T,R,I)=>{const F=new Array(256),N=(p-f)/I,H=T/255,U=(R-T)/(255*I);let Q=0;for(let tt=0;tt<=I;tt++){const Et=Math.round(f+tt*N),At=H+tt*U;for(let Rt=Q;Rt<=Et;Rt++)F[Rt]=At;Q=Et+1}for(let tt=Q;tt<256;tt++)F[tt]=F[Q-1];return F.join(",")},E=`g_${l(this,gr)}_hcm_${e}_filter`,S=c.filter=A(this,ut,Zl).call(this,E);return A(this,ut,ib).call(this,S),A(this,ut,qh).call(this,v(g[0],_[0],5),v(g[1],_[1],5),v(g[2],_[2],5),S),c.url=A(this,ut,Jl).call(this,E),c.url}destroy(e=!1){var s,n,r,o;e&&((s=l(this,$a))!=null&&s.size)||((n=l(this,pr))==null||n.parentNode.parentNode.remove(),b(this,pr,null),(r=l(this,Rc))==null||r.clear(),b(this,Rc,null),(o=l(this,$a))==null||o.clear(),b(this,$a,null),b(this,Ba,0))}}Fa=new WeakMap,Rc=new WeakMap,pr=new WeakMap,gr=new WeakMap,Ts=new WeakMap,$a=new WeakMap,Ba=new WeakMap,ut=new WeakSet,xs=function(){return l(this,Rc)||b(this,Rc,new Map)},Uh=function(){return l(this,$a)||b(this,$a,new Map)},Ql=function(){if(!l(this,pr)){const e=l(this,Ts).createElement("div"),{style:s}=e;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const n=l(this,Ts).createElementNS(Zn,"svg");n.setAttribute("width",0),n.setAttribute("height",0),b(this,pr,l(this,Ts).createElementNS(Zn,"defs")),e.append(n),n.append(l(this,pr)),l(this,Ts).body.append(e)}return l(this,pr)},Xf=function(e){if(e.length===1){const h=e[0],u=new Array(256);for(let p=0;p<256;p++)u[p]=h[p]/255;const f=u.join(",");return[f,f,f]}const[s,n,r]=e,o=new Array(256),a=new Array(256),c=new Array(256);for(let h=0;h<256;h++)o[h]=s[h]/255,a[h]=n[h]/255,c[h]=r[h]/255;return[o.join(","),a.join(","),c.join(",")]},Jl=function(e){if(l(this,Fa)===void 0){b(this,Fa,"");const s=l(this,Ts).URL;s!==l(this,Ts).baseURI&&(vg(s)?Ot('#createUrl: ignore "data:"-URL for performance reasons.'):b(this,Fa,d0(s,"")))}return`url(${l(this,Fa)}#${e})`},eE=function(e){const s=l(this,Ts).createElementNS(Zn,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(s)},ib=function(e){const s=l(this,Ts).createElementNS(Zn,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(s)},Zl=function(e){const s=l(this,Ts).createElementNS(Zn,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",e),l(this,ut,Ql).append(s),s},zh=function(e,s,n){const r=l(this,Ts).createElementNS(Zn,s);r.setAttribute("type","discrete"),r.setAttribute("tableValues",n),e.append(r)},qh=function(e,s,n,r){const o=l(this,Ts).createElementNS(Zn,"feComponentTransfer");r.append(o),A(this,ut,zh).call(this,o,"feFuncR",e),A(this,ut,zh).call(this,o,"feFuncG",s),A(this,ut,zh).call(this,o,"feFuncB",n)},nb=function(e,s){const n=l(this,Ts).createElementNS(Zn,"feComponentTransfer");s.append(n),A(this,ut,zh).call(this,n,"feFuncA",e)},Wh=function(e){return l(this,ut,Ql).style.color=e,xv(getComputedStyle(l(this,ut,Ql)).getPropertyValue("color"))};class sE{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(s=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){ge("Abstract method `_fetch` called.")}}class vw extends sE{async _fetch(t){const e=await Kd(t,"arraybuffer");return new Uint8Array(e)}}class iE{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(s=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){ge("Abstract method `_fetch` called.")}}class _w extends iE{async _fetch(t){const e=await Kd(t,"arraybuffer");return new Uint8Array(e)}}Ws&&Ot("Please use the `legacy` build in Node.js environments.");async function Pv(i){const e=await process.getBuiltinModule("fs").promises.readFile(i);return new Uint8Array(e)}class $R extends tE{}class BR extends J0{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class HR extends Z0{async _fetch(t){return Pv(t)}}class jR extends sE{async _fetch(t){return Pv(t)}}class VR extends iE{async _fetch(t){return Pv(t)}}const vs={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function rb(i,t){if(!t)return;const e=t[2]-t[0],s=t[3]-t[1],n=new Path2D;n.rect(t[0],t[1],e,s),i.clip(n)}class Rv{isModifyingCurrentTransform(){return!1}getPattern(){ge("Abstract method `getPattern` called.")}}class UR extends Rv{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)e.addColorStop(s[0],s[1]);return e}getPattern(t,e,s,n){let r;if(n===vs.STROKE||n===vs.FILL){const o=e.current.getClippedPathBoundingBox(n,Me(t))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,h=e.cachedCanvases.getCanvas("pattern",a,c),u=h.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-o[0],-o[1]),s=_t.transform(s,[1,0,0,1,o[0],o[1]]),u.transform(...e.baseTransform),this.matrix&&u.transform(...this.matrix),rb(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),r=t.createPattern(h.canvas,"no-repeat");const f=new DOMMatrix(s);r.setTransform(f)}else rb(t,this._bbox),r=this._createGradient(t);return r}}function bm(i,t,e,s,n,r,o,a){const c=t.coords,h=t.colors,u=i.data,f=i.width*4;let p;c[e+1]>c[s+1]&&(p=e,e=s,s=p,p=r,r=o,o=p),c[s+1]>c[n+1]&&(p=s,s=n,n=p,p=o,o=a,a=p),c[e+1]>c[s+1]&&(p=e,e=s,s=p,p=r,r=o,o=p);const g=(c[e]+t.offsetX)*t.scaleX,_=(c[e+1]+t.offsetY)*t.scaleY,v=(c[s]+t.offsetX)*t.scaleX,E=(c[s+1]+t.offsetY)*t.scaleY,S=(c[n]+t.offsetX)*t.scaleX,C=(c[n+1]+t.offsetY)*t.scaleY;if(_>=C)return;const T=h[r],R=h[r+1],I=h[r+2],F=h[o],N=h[o+1],H=h[o+2],U=h[a],Q=h[a+1],tt=h[a+2],Et=Math.round(_),At=Math.round(C);let Rt,oe,J,X,et,Y,M,bt;for(let Ct=Et;Ct<=At;Ct++){if(Ct<E){const B=Ct<_?0:(_-Ct)/(_-E);Rt=g-(g-v)*B,oe=T-(T-F)*B,J=R-(R-N)*B,X=I-(I-H)*B}else{let B;Ct>C?B=1:E===C?B=0:B=(E-Ct)/(E-C),Rt=v-(v-S)*B,oe=F-(F-U)*B,J=N-(N-Q)*B,X=H-(H-tt)*B}let Gt;Ct<_?Gt=0:Ct>C?Gt=1:Gt=(_-Ct)/(_-C),et=g-(g-S)*Gt,Y=T-(T-U)*Gt,M=R-(R-Q)*Gt,bt=I-(I-tt)*Gt;const xe=Math.round(Math.min(Rt,et)),Be=Math.round(Math.max(Rt,et));let Xt=f*Ct+xe*4;for(let B=xe;B<=Be;B++)Gt=(Rt-B)/(Rt-et),Gt<0?Gt=0:Gt>1&&(Gt=1),u[Xt++]=oe-(oe-Y)*Gt|0,u[Xt++]=J-(J-M)*Gt|0,u[Xt++]=X-(X-bt)*Gt|0,u[Xt++]=255}}function zR(i,t,e){const s=t.coords,n=t.colors;let r,o;switch(t.type){case"lattice":const a=t.verticesPerRow,c=Math.floor(s.length/a)-1,h=a-1;for(r=0;r<c;r++){let u=r*a;for(let f=0;f<h;f++,u++)bm(i,e,s[u],s[u+1],s[u+a],n[u],n[u+1],n[u+a]),bm(i,e,s[u+a+1],s[u+1],s[u+a],n[u+a+1],n[u+1],n[u+a])}break;case"triangles":for(r=0,o=s.length;r<o;r+=3)bm(i,e,s[r],s[r+1],s[r+2],n[r],n[r+1],n[r+2]);break;default:throw new Error("illegal figure")}}class qR extends Rv{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,s){const a=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-a,u=Math.ceil(this._bounds[3])-c,f=Math.min(Math.ceil(Math.abs(h*t[0]*1.1)),3e3),p=Math.min(Math.ceil(Math.abs(u*t[1]*1.1)),3e3),g=h/f,_=u/p,v={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-c,scaleX:1/g,scaleY:1/_},E=f+2*2,S=p+2*2,C=s.getCanvas("mesh",E,S),T=C.context,R=T.createImageData(f,p);if(e){const F=R.data;for(let N=0,H=F.length;N<H;N+=4)F[N]=e[0],F[N+1]=e[1],F[N+2]=e[2],F[N+3]=255}for(const F of this._figures)zR(R,F,v);return T.putImageData(R,2,2),{canvas:C.canvas,offsetX:a-2*g,offsetY:c-2*_,scaleX:g,scaleY:_}}isModifyingCurrentTransform(){return!0}getPattern(t,e,s,n){rb(t,this._bbox);const r=new Float32Array(2);if(n===vs.SHADING)_t.singularValueDecompose2dScale(Me(t),r);else if(this.matrix){_t.singularValueDecompose2dScale(this.matrix,r);const[a,c]=r;_t.singularValueDecompose2dScale(e.baseTransform,r),r[0]*=a,r[1]*=c}else _t.singularValueDecompose2dScale(e.baseTransform,r);const o=this._createMeshCanvas(r,n===vs.SHADING?null:this._background,e.cachedCanvases);return n!==vs.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(o.offsetX,o.offsetY),t.scale(o.scaleX,o.scaleY),t.createPattern(o.canvas,"no-repeat")}}class WR extends Rv{getPattern(){return"hotpink"}}function GR(i){switch(i[0]){case"RadialAxial":return new UR(i);case"Mesh":return new qR(i);case"Dummy":return new WR}throw new Error(`Unknown IR type: ${i[0]}`)}const yw={COLORED:1,UNCOLORED:2},Vp=class Vp{constructor(t,e,s,n){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=s,this.baseTransform=n}createPatternCanvas(t){const{bbox:e,operatorList:s,paintType:n,tilingType:r,color:o,canvasGraphicsFactory:a}=this;let{xstep:c,ystep:h}=this;c=Math.abs(c),h=Math.abs(h),bg("TilingType: "+r);const u=e[0],f=e[1],p=e[2],g=e[3],_=p-u,v=g-f,E=new Float32Array(2);_t.singularValueDecompose2dScale(this.matrix,E);const[S,C]=E;_t.singularValueDecompose2dScale(this.baseTransform,E);const T=S*E[0],R=C*E[1];let I=_,F=v,N=!1,H=!1;const U=Math.ceil(c*T),Q=Math.ceil(h*R),tt=Math.ceil(_*T),Et=Math.ceil(v*R);U>=tt?I=c:N=!0,Q>=Et?F=h:H=!0;const At=this.getSizeAndScale(I,this.ctx.canvas.width,T),Rt=this.getSizeAndScale(F,this.ctx.canvas.height,R),oe=t.cachedCanvases.getCanvas("pattern",At.size,Rt.size),J=oe.context,X=a.createCanvasGraphics(J);if(X.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(X,n,o),J.translate(-At.scale*u,-Rt.scale*f),X.transform(At.scale,0,0,Rt.scale,0,0),J.save(),this.clipBbox(X,u,f,p,g),X.baseTransform=Me(X.ctx),X.executeOperatorList(s),X.endDrawing(),J.restore(),N||H){const et=oe.canvas;N&&(I=c),H&&(F=h);const Y=this.getSizeAndScale(I,this.ctx.canvas.width,T),M=this.getSizeAndScale(F,this.ctx.canvas.height,R),bt=Y.size,Ct=M.size,Gt=t.cachedCanvases.getCanvas("pattern-workaround",bt,Ct),xe=Gt.context,Be=N?Math.floor(_/c):0,Xt=H?Math.floor(v/h):0;for(let B=0;B<=Be;B++)for(let V=0;V<=Xt;V++)xe.drawImage(et,bt*B,Ct*V,bt,Ct,0,0,bt,Ct);return{canvas:Gt.canvas,scaleX:Y.scale,scaleY:M.scale,offsetX:u,offsetY:f}}return{canvas:oe.canvas,scaleX:At.scale,scaleY:Rt.scale,offsetX:u,offsetY:f}}getSizeAndScale(t,e,s){const n=Math.max(Vp.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*s);return r>=n?r=n:s=r/t,{scale:s,size:r}}clipBbox(t,e,s,n,r){const o=n-e,a=r-s;t.ctx.rect(e,s,o,a),_t.axialAlignedBoundingBox([e,s,n,r],Me(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,s){const n=t.ctx,r=t.current;switch(e){case yw.COLORED:const o=this.ctx;n.fillStyle=o.fillStyle,n.strokeStyle=o.strokeStyle,r.fillColor=o.fillStyle,r.strokeColor=o.strokeStyle;break;case yw.UNCOLORED:const a=_t.makeHexColor(s[0],s[1],s[2]);n.fillStyle=a,n.strokeStyle=a,r.fillColor=a,r.strokeColor=a;break;default:throw new vR(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,s,n){let r=s;n!==vs.SHADING&&(r=_t.transform(r,e.baseTransform),this.matrix&&(r=_t.transform(r,this.matrix)));const o=this.createPatternCanvas(e);let a=new DOMMatrix(r);a=a.translate(o.offsetX,o.offsetY),a=a.scale(1/o.scaleX,1/o.scaleY);const c=t.createPattern(o.canvas,"repeat");return c.setTransform(a),c}};Z(Vp,"MAX_PATTERN_SIZE",3e3);let ob=Vp;function XR({src:i,srcPos:t=0,dest:e,width:s,height:n,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const a=Es.isLittleEndian?4278190080:255,[c,h]=o?[r,a]:[a,r],u=s>>3,f=s&7,p=i.length;e=new Uint32Array(e.buffer);let g=0;for(let _=0;_<n;_++){for(const E=t+u;t<E;t++){const S=t<p?i[t]:255;e[g++]=S&128?h:c,e[g++]=S&64?h:c,e[g++]=S&32?h:c,e[g++]=S&16?h:c,e[g++]=S&8?h:c,e[g++]=S&4?h:c,e[g++]=S&2?h:c,e[g++]=S&1?h:c}if(f===0)continue;const v=t<p?i[t++]:255;for(let E=0;E<f;E++)e[g++]=v&1<<7-E?h:c}return{srcPos:t,destPos:g}}const ww=16,Aw=100,KR=15,Ew=10,ei=16,vm=new DOMMatrix,Ei=new Float32Array(2),ic=new Float32Array([1/0,1/0,-1/0,-1/0]);function YR(i,t){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){t.save(),this.__originalSave()},i.restore=function(){t.restore(),this.__originalRestore()},i.translate=function(e,s){t.translate(e,s),this.__originalTranslate(e,s)},i.scale=function(e,s){t.scale(e,s),this.__originalScale(e,s)},i.transform=function(e,s,n,r,o,a){t.transform(e,s,n,r,o,a),this.__originalTransform(e,s,n,r,o,a)},i.setTransform=function(e,s,n,r,o,a){t.setTransform(e,s,n,r,o,a),this.__originalSetTransform(e,s,n,r,o,a)},i.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},i.rotate=function(e){t.rotate(e),this.__originalRotate(e)},i.clip=function(e){t.clip(e),this.__originalClip(e)},i.moveTo=function(e,s){t.moveTo(e,s),this.__originalMoveTo(e,s)},i.lineTo=function(e,s){t.lineTo(e,s),this.__originalLineTo(e,s)},i.bezierCurveTo=function(e,s,n,r,o,a){t.bezierCurveTo(e,s,n,r,o,a),this.__originalBezierCurveTo(e,s,n,r,o,a)},i.rect=function(e,s,n,r){t.rect(e,s,n,r),this.__originalRect(e,s,n,r)},i.closePath=function(){t.closePath(),this.__originalClosePath()},i.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class QR{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,s){let n;return this.cache[t]!==void 0?(n=this.cache[t],this.canvasFactory.reset(n,e,s)):(n=this.canvasFactory.create(e,s),this.cache[t]=n),n}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Cf(i,t,e,s,n,r,o,a,c,h){const[u,f,p,g,_,v]=Me(i);if(f===0&&p===0){const C=o*u+_,T=Math.round(C),R=a*g+v,I=Math.round(R),F=(o+c)*u+_,N=Math.abs(Math.round(F)-T)||1,H=(a+h)*g+v,U=Math.abs(Math.round(H)-I)||1;return i.setTransform(Math.sign(u),0,0,Math.sign(g),T,I),i.drawImage(t,e,s,n,r,0,0,N,U),i.setTransform(u,f,p,g,_,v),[N,U]}if(u===0&&g===0){const C=a*p+_,T=Math.round(C),R=o*f+v,I=Math.round(R),F=(a+h)*p+_,N=Math.abs(Math.round(F)-T)||1,H=(o+c)*f+v,U=Math.abs(Math.round(H)-I)||1;return i.setTransform(0,Math.sign(f),Math.sign(p),0,T,I),i.drawImage(t,e,s,n,r,0,0,U,N),i.setTransform(u,f,p,g,_,v),[U,N]}i.drawImage(t,e,s,n,r,o,a,c,h);const E=Math.hypot(u,f),S=Math.hypot(p,g);return[E*c,S*h]}class Sw{constructor(t,e){Z(this,"alphaIsShape",!1);Z(this,"fontSize",0);Z(this,"fontSizeScale",1);Z(this,"textMatrix",null);Z(this,"textMatrixScale",1);Z(this,"fontMatrix",Nm);Z(this,"leading",0);Z(this,"x",0);Z(this,"y",0);Z(this,"lineX",0);Z(this,"lineY",0);Z(this,"charSpacing",0);Z(this,"wordSpacing",0);Z(this,"textHScale",1);Z(this,"textRenderingMode",Ss.FILL);Z(this,"textRise",0);Z(this,"fillColor","#000000");Z(this,"strokeColor","#000000");Z(this,"patternFill",!1);Z(this,"patternStroke",!1);Z(this,"fillAlpha",1);Z(this,"strokeAlpha",1);Z(this,"lineWidth",1);Z(this,"activeSMask",null);Z(this,"transferMaps","none");this.clipBox=new Float32Array([0,0,t,e]),this.minMax=ic.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=vs.FILL,e=null){const s=this.minMax.slice();if(t===vs.STROKE){e||ge("Stroke bounding box must include transform."),_t.singularValueDecompose2dScale(e,Ei);const n=Ei[0]*this.lineWidth/2,r=Ei[1]*this.lineWidth/2;s[0]-=n,s[1]-=r,s[2]+=n,s[3]+=r}return s}updateClipFromPath(){const t=_t.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(ic,0)}getClippedPathBoundingBox(t=vs.FILL,e=null){return _t.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function xw(i,t){if(t instanceof ImageData){i.putImageData(t,0,0);return}const e=t.height,s=t.width,n=e%ei,r=(e-n)/ei,o=n===0?r:r+1,a=i.createImageData(s,ei);let c=0,h;const u=t.data,f=a.data;let p,g,_,v;if(t.kind===$f.GRAYSCALE_1BPP){const E=u.byteLength,S=new Uint32Array(f.buffer,0,f.byteLength>>2),C=S.length,T=s+7>>3,R=4294967295,I=Es.isLittleEndian?4278190080:255;for(p=0;p<o;p++){for(_=p<r?ei:n,h=0,g=0;g<_;g++){const F=E-c;let N=0;const H=F>T?s:F*8-7,U=H&-8;let Q=0,tt=0;for(;N<U;N+=8)tt=u[c++],S[h++]=tt&128?R:I,S[h++]=tt&64?R:I,S[h++]=tt&32?R:I,S[h++]=tt&16?R:I,S[h++]=tt&8?R:I,S[h++]=tt&4?R:I,S[h++]=tt&2?R:I,S[h++]=tt&1?R:I;for(;N<H;N++)Q===0&&(tt=u[c++],Q=128),S[h++]=tt&Q?R:I,Q>>=1}for(;h<C;)S[h++]=0;i.putImageData(a,0,p*ei)}}else if(t.kind===$f.RGBA_32BPP){for(g=0,v=s*ei*4,p=0;p<r;p++)f.set(u.subarray(c,c+v)),c+=v,i.putImageData(a,0,g),g+=ei;p<o&&(v=s*n*4,f.set(u.subarray(c,c+v)),i.putImageData(a,0,g))}else if(t.kind===$f.RGB_24BPP)for(_=ei,v=s*_,p=0;p<o;p++){for(p>=r&&(_=n,v=s*_),h=0,g=v;g--;)f[h++]=u[c++],f[h++]=u[c++],f[h++]=u[c++],f[h++]=255;i.putImageData(a,0,p*ei)}else throw new Error(`bad image kind: ${t.kind}`)}function Cw(i,t){if(t.bitmap){i.drawImage(t.bitmap,0,0);return}const e=t.height,s=t.width,n=e%ei,r=(e-n)/ei,o=n===0?r:r+1,a=i.createImageData(s,ei);let c=0;const h=t.data,u=a.data;for(let f=0;f<o;f++){const p=f<r?ei:n;({srcPos:c}=XR({src:h,srcPos:c,dest:u,width:s,height:p,nonBlackColor:0})),i.putImageData(a,0,f*ei)}}function Mh(i,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of e)i[s]!==void 0&&(t[s]=i[s]);i.setLineDash!==void 0&&(t.setLineDash(i.getLineDash()),t.lineDashOffset=i.lineDashOffset)}function Tf(i){i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0);const{filter:t}=i;t!=="none"&&t!==""&&(i.filter="none")}function Tw(i,t){if(t)return!0;_t.singularValueDecompose2dScale(i,Ei);const e=Math.fround(jr.pixelRatio*zo.PDF_TO_CSS_UNITS);return Ei[0]<=e&&Ei[1]<=e}const JR=["butt","round","square"],ZR=["miter","round","bevel"],tk={},Pw={};var pn,ab,lb,cb;const Nv=class Nv{constructor(t,e,s,n,r,{optionalContentConfig:o,markedContentStack:a=null},c,h){w(this,pn);this.ctx=t,this.current=new Sw(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=s,this.canvasFactory=n,this.filterFactory=r,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new QR(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:s=!1,background:n=null}){const r=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=n||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=a,s){const c=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...Me(this.compositeCtx))}this.ctx.save(),Tf(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Me(this.ctx)}executeOperatorList(t,e,s,n){const r=t.argsArray,o=t.fnArray;let a=e||0;const c=r.length;if(c===a)return a;const h=c-a>Ew&&typeof s=="function",u=h?Date.now()+KR:0;let f=0;const p=this.commonObjs,g=this.objs;let _;for(;;){if(n!==void 0&&a===n.nextBreakPoint)return n.breakIt(a,s),a;if(_=o[a],_!==Cp.dependency)this[_].apply(this,r[a]);else for(const v of r[a]){const E=v.startsWith("g_")?p:g;if(!E.has(v))return E.get(v,s),a}if(a++,a===c)return a;if(h&&++f>Ew){if(Date.now()>u)return s(),a;f=0}}}endDrawing(){A(this,pn,ab).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),A(this,pn,lb).call(this)}_scaleImage(t,e){const s=t.width??t.displayWidth,n=t.height??t.displayHeight;let r=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),a=s,c=n,h="prescale1",u,f;for(;r>2&&a>1||o>2&&c>1;){let p=a,g=c;r>2&&a>1&&(p=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),r/=a/p),o>2&&c>1&&(g=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/g),u=this.cachedCanvases.getCanvas(h,p,g),f=u.context,f.clearRect(0,0,p,g),f.drawImage(t,0,0,a,c,0,0,p,g),t=u.canvas,a=p,c=g,h=h==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:a,paintHeight:c}}_createMaskCanvas(t){const e=this.ctx,{width:s,height:n}=t,r=this.current.fillColor,o=this.current.patternFill,a=Me(e);let c,h,u,f;if((t.bitmap||t.data)&&t.count>1){const U=t.bitmap||t.data.buffer;h=JSON.stringify(o?a:[a.slice(0,4),r]),c=this._cachedBitmapsMap.get(U),c||(c=new Map,this._cachedBitmapsMap.set(U,c));const Q=c.get(h);if(Q&&!o){const tt=Math.round(Math.min(a[0],a[2])+a[4]),Et=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:Q,offsetX:tt,offsetY:Et}}u=Q}u||(f=this.cachedCanvases.getCanvas("maskCanvas",s,n),Cw(f.context,t));let p=_t.transform(a,[1/s,0,0,-1/n,0,0]);p=_t.transform(p,[1,0,0,1,0,-n]);const g=ic.slice();_t.axialAlignedBoundingBox([0,0,s,n],p,g);const[_,v,E,S]=g,C=Math.round(E-_)||1,T=Math.round(S-v)||1,R=this.cachedCanvases.getCanvas("fillCanvas",C,T),I=R.context,F=_,N=v;I.translate(-F,-N),I.transform(...p),u||(u=this._scaleImage(f.canvas,yn(I)),u=u.img,c&&o&&c.set(h,u)),I.imageSmoothingEnabled=Tw(Me(I),t.interpolate),Cf(I,u,0,0,u.width,u.height,0,0,s,n),I.globalCompositeOperation="source-in";const H=_t.transform(yn(I),[1,0,0,1,-F,-N]);return I.fillStyle=o?r.getPattern(e,this,H,vs.FILL):r,I.fillRect(0,0,s,n),c&&!o&&(this.cachedCanvases.delete("fillCanvas"),c.set(h,R.canvas)),{canvas:R.canvas,offsetX:Math.round(F),offsetY:Math.round(N)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=JR[t]}setLineJoin(t){this.ctx.lineJoin=ZR[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(t),s.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,s]of t)switch(e){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,n=this.cachedCanvases.getCanvas(s,t,e);this.suspendedCtx=this.ctx;const r=this.ctx=n.context;r.setTransform(this.suspendedCtx.getTransform()),Mh(this.suspendedCtx,r),YR(r,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Mh(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,s,n){const r=n[0],o=n[1],a=n[2]-r,c=n[3]-o;a===0||c===0||(this.genericComposeSMask(e.context,s,a,c,e.subtype,e.backdrop,e.transferMap,r,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(s.canvas,0,0),t.restore())}genericComposeSMask(t,e,s,n,r,o,a,c,h,u,f){let p=t.canvas,g=c-u,_=h-f;if(o){const E=_t.makeHexColor(...o);if(g<0||_<0||g+s>p.width||_+n>p.height){const S=this.cachedCanvases.getCanvas("maskExtension",s,n),C=S.context;C.drawImage(p,-g,-_),C.globalCompositeOperation="destination-atop",C.fillStyle=E,C.fillRect(0,0,s,n),C.globalCompositeOperation="source-over",p=S.canvas,g=_=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const S=new Path2D;S.rect(g,_,s,n),t.clip(S),t.globalCompositeOperation="destination-atop",t.fillStyle=E,t.fillRect(g,_,s,n),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&a?e.filter=this.filterFactory.addAlphaFilter(a):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(a));const v=new Path2D;v.rect(c,h,s,n),e.clip(v),e.globalCompositeOperation="destination-in",e.drawImage(p,g,_,s,n,c,h,s,n),e.restore()}save(){this.inSMaskMode&&Mh(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Mh(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,s,n,r,o){this.ctx.transform(t,e,s,n,r,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,s){let[n]=e;if(!s){n||(n=e[0]=new Path2D),this[t](n);return}if(!(n instanceof Path2D)){const r=e[0]=new Path2D;for(let o=0,a=n.length;o<a;)switch(n[o++]){case Sf.moveTo:r.moveTo(n[o++],n[o++]);break;case Sf.lineTo:r.lineTo(n[o++],n[o++]);break;case Sf.curveTo:r.bezierCurveTo(n[o++],n[o++],n[o++],n[o++],n[o++],n[o++]);break;case Sf.closePath:r.closePath();break;default:Ot(`Unrecognized drawing path operator: ${n[o-1]}`);break}n=r}_t.axialAlignedBoundingBox(s,Me(this.ctx),this.current.minMax),this[t](n)}closePath(){this.ctx.closePath()}stroke(t,e=!0){const s=this.ctx,n=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof n=="object"&&(n!=null&&n.getPattern)){const r=n.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=n.getPattern(s,this,yn(s),vs.STROKE),r){const o=new Path2D;o.addPath(t,s.getTransform().invertSelf().multiplySelf(r)),t=o}this.rescaleAndStroke(t,!1),s.restore()}else this.rescaleAndStroke(t,!0);e&&this.consumePath(t,this.current.getClippedPathBoundingBox(vs.STROKE,Me(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(t){this.stroke(t)}fill(t,e=!0){const s=this.ctx,n=this.current.fillColor,r=this.current.patternFill;let o=!1;if(r){const c=n.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.fillStyle=n.getPattern(s,this,yn(s),vs.FILL),c){const h=new Path2D;h.addPath(t,s.getTransform().invertSelf().multiplySelf(c)),t=h}o=!0}const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(s.fill(t,"evenodd"),this.pendingEOFill=!1):s.fill(t)),o&&s.restore(),e&&this.consumePath(t,a)}eoFill(t){this.pendingEOFill=!0,this.fill(t)}fillStroke(t){this.fill(t,!1),this.stroke(t,!1),this.consumePath(t)}eoFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}closeFillStroke(t){this.fillStroke(t)}closeEOFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}endPath(t){this.consumePath(t)}rawFillPath(t){this.ctx.fill(t)}clip(){this.pendingClip=tk}eoClip(){this.pendingClip=Pw}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0)return;const s=new Path2D,n=e.getTransform().invertSelf();for(const{transform:r,x:o,y:a,fontSize:c,path:h}of t)s.addPath(h,new DOMMatrix(r).preMultiplySelf(n).translate(o,a).scale(c,-c));e.clip(s),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var u;const s=this.commonObjs.get(t),n=this.current;if(!s)throw new Error(`Can't find font for ${t}`);if(n.fontMatrix=s.fontMatrix||Nm,(n.fontMatrix[0]===0||n.fontMatrix[3]===0)&&Ot("Invalid font matrix for font "+t),e<0?(e=-e,n.fontDirection=-1):n.fontDirection=1,this.current.font=s,this.current.fontSize=e,s.isType3Font)return;const r=s.loadedName||"sans-serif",o=((u=s.systemFontInfo)==null?void 0:u.css)||`"${r}", ${s.fallbackName}`;let a="normal";s.black?a="900":s.bold&&(a="bold");const c=s.italic?"italic":"normal";let h=e;e<ww?h=ww:e>Aw&&(h=Aw),this.current.fontSizeScale=e/h,this.ctx.font=`${c} ${a} ${h}px ${o}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t){const{current:e}=this;e.textMatrix=t,e.textMatrixScale=Math.hypot(t[0],t[1]),e.x=e.lineX=0,e.y=e.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,s,n,r){const o=this.ctx,a=this.current,c=a.font,h=a.textRenderingMode,u=a.fontSize/a.fontSizeScale,f=h&Ss.FILL_STROKE_MASK,p=!!(h&Ss.ADD_TO_PATH_FLAG),g=a.patternFill&&!c.missingFile,_=a.patternStroke&&!c.missingFile;let v;if((c.disableFontFace||p||g||_)&&(v=c.getPathGenerator(this.commonObjs,t)),c.disableFontFace||g||_){o.save(),o.translate(e,s),o.scale(u,-u);let E;if((f===Ss.FILL||f===Ss.FILL_STROKE)&&(n?(E=o.getTransform(),o.setTransform(...n),o.fill(A(this,pn,cb).call(this,v,E,n))):o.fill(v)),f===Ss.STROKE||f===Ss.FILL_STROKE)if(r){E||(E=o.getTransform()),o.setTransform(...r);const{a:S,b:C,c:T,d:R}=E,I=_t.inverseTransform(r),F=_t.transform([S,C,T,R,0,0],I);_t.singularValueDecompose2dScale(F,Ei),o.lineWidth*=Math.max(Ei[0],Ei[1])/u,o.stroke(A(this,pn,cb).call(this,v,E,r))}else o.lineWidth/=u,o.stroke(v);o.restore()}else(f===Ss.FILL||f===Ss.FILL_STROKE)&&o.fillText(t,e,s),(f===Ss.STROKE||f===Ss.FILL_STROKE)&&o.strokeText(t,e,s);p&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Me(o),x:e,y:s,fontSize:u,path:v})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let s=!1;for(let n=3;n<e.length;n+=4)if(e[n]>0&&e[n]<255){s=!0;break}return Wt(this,"isFontSubpixelAAEnabled",s)}showText(t){const e=this.current,s=e.font;if(s.isType3Font)return this.showType3Text(t);const n=e.fontSize;if(n===0)return;const r=this.ctx,o=e.fontSizeScale,a=e.charSpacing,c=e.wordSpacing,h=e.fontDirection,u=e.textHScale*h,f=t.length,p=s.vertical,g=p?1:-1,_=s.defaultVMetrics,v=n*e.fontMatrix[0],E=e.textRenderingMode===Ss.FILL&&!s.disableFontFace&&!e.patternFill;r.save(),e.textMatrix&&r.transform(...e.textMatrix),r.translate(e.x,e.y+e.textRise),h>0?r.scale(u,-1):r.scale(u,1);let S,C;if(e.patternFill){r.save();const N=e.fillColor.getPattern(r,this,yn(r),vs.FILL);S=Me(r),r.restore(),r.fillStyle=N}if(e.patternStroke){r.save();const N=e.strokeColor.getPattern(r,this,yn(r),vs.STROKE);C=Me(r),r.restore(),r.strokeStyle=N}let T=e.lineWidth;const R=e.textMatrixScale;if(R===0||T===0){const N=e.textRenderingMode&Ss.FILL_STROKE_MASK;(N===Ss.STROKE||N===Ss.FILL_STROKE)&&(T=this.getSinglePixelWidth())}else T/=R;if(o!==1&&(r.scale(o,o),T/=o),r.lineWidth=T,s.isInvalidPDFjsFont){const N=[];let H=0;for(const U of t)N.push(U.unicode),H+=U.width;r.fillText(N.join(""),0,0),e.x+=H*v*u,r.restore(),this.compose();return}let I=0,F;for(F=0;F<f;++F){const N=t[F];if(typeof N=="number"){I+=g*N*n/1e3;continue}let H=!1;const U=(N.isSpace?c:0)+a,Q=N.fontChar,tt=N.accent;let Et,At,Rt=N.width;if(p){const J=N.vmetric||_,X=-(N.vmetric?J[1]:Rt*.5)*v,et=J[2]*v;Rt=J?-J[0]:Rt,Et=X/o,At=(I+et)/o}else Et=I/o,At=0;if(s.remeasure&&Rt>0){const J=r.measureText(Q).width*1e3/n*o;if(Rt<J&&this.isFontSubpixelAAEnabled){const X=Rt/J;H=!0,r.save(),r.scale(X,1),Et/=X}else Rt!==J&&(Et+=(Rt-J)/2e3*n/o)}if(this.contentVisible&&(N.isInFont||s.missingFile)){if(E&&!tt)r.fillText(Q,Et,At);else if(this.paintChar(Q,Et,At,S,C),tt){const J=Et+n*tt.offset.x/o,X=At-n*tt.offset.y/o;this.paintChar(tt.fontChar,J,X,S,C)}}const oe=p?Rt*v-U*h:Rt*v+U*h;I+=oe,H&&r.restore()}p?e.y-=I:e.x+=I*u,r.restore(),this.compose()}showType3Text(t){const e=this.ctx,s=this.current,n=s.font,r=s.fontSize,o=s.fontDirection,a=n.vertical?1:-1,c=s.charSpacing,h=s.wordSpacing,u=s.textHScale*o,f=s.fontMatrix||Nm,p=t.length,g=s.textRenderingMode===Ss.INVISIBLE;let _,v,E,S;if(!(g||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),s.textMatrix&&e.transform(...s.textMatrix),e.translate(s.x,s.y+s.textRise),e.scale(u,o),_=0;_<p;++_){if(v=t[_],typeof v=="number"){S=a*v*r/1e3,this.ctx.translate(S,0),s.x+=S*u;continue}const C=(v.isSpace?h:0)+c,T=n.charProcOperatorList[v.operatorListId];T?this.contentVisible&&(this.save(),e.scale(r,r),e.transform(...f),this.executeOperatorList(T),this.restore()):Ot(`Type3 character "${v.operatorListId}" is not available.`);const R=[v.width,0];_t.applyTransform(R,f),E=R[0]*r+C,e.translate(E,0),s.x+=E*u}e.restore()}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,s,n,r,o){const a=new Path2D;a.rect(s,n,r-s,o-n),this.ctx.clip(a),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const s=this.baseTransform||Me(this.ctx),n={createCanvasGraphics:r=>new Nv(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new ob(t,this.ctx,n,s)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,s){this.ctx.strokeStyle=this.current.strokeColor=_t.makeHexColor(t,e,s),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e,s){this.ctx.fillStyle=this.current.fillColor=_t.makeHexColor(t,e,s),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let s;return this.cachedPatterns.has(t)?s=this.cachedPatterns.get(t):(s=GR(this.getObject(t)),this.cachedPatterns.set(t,s)),e&&(s.matrix=e),s}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const s=this._getPattern(t);e.fillStyle=s.getPattern(e,this,yn(e),vs.SHADING);const n=yn(e);if(n){const{width:r,height:o}=e.canvas,a=ic.slice();_t.axialAlignedBoundingBox([0,0,r,o],n,a);const[c,h,u,f]=a;this.ctx.fillRect(c,h,u-c,f-h)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){ge("Should not call beginInlineImage")}beginImageData(){ge("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Me(this.ctx),e)){_t.axialAlignedBoundingBox(e,this.baseTransform,this.current.minMax);const[s,n,r,o]=e,a=new Path2D;a.rect(s,n,r-s,o-n),this.ctx.clip(a),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||bg("TODO: Support non-isolated groups."),t.knockout&&Ot("Knockout groups not supported.");const s=Me(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let n=ic.slice();_t.axialAlignedBoundingBox(t.bbox,Me(e),n);const r=[0,0,e.canvas.width,e.canvas.height];n=_t.intersect(n,r)||[0,0,0,0];const o=Math.floor(n[0]),a=Math.floor(n[1]),c=Math.max(Math.ceil(n[2])-o,1),h=Math.max(Math.ceil(n[3])-a,1);this.current.startNewPathAndClipBox([0,0,c,h]);let u="groupAt"+this.groupLevel;t.smask&&(u+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(u,c,h),p=f.context;p.translate(-o,-a),p.transform(...s);let g=new Path2D;const[_,v,E,S]=t.bbox;if(g.rect(_,v,E-_,S-v),t.matrix){const C=new Path2D;C.addPath(g,new DOMMatrix(t.matrix)),g=C}p.clip(g),t.smask?this.smaskStack.push({canvas:f.canvas,context:p,offsetX:o,offsetY:a,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(o,a),e.save()),Mh(e,p),this.ctx=p,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const n=Me(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...n);const r=ic.slice();_t.axialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],n,r),this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(t,e,s,n,r){if(A(this,pn,ab).call(this),Tf(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const o=e[2]-e[0],a=e[3]-e[1];if(r&&this.annotationCanvasMap){s=s.slice(),s[4]-=e[0],s[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=o,e[3]=a,_t.singularValueDecompose2dScale(Me(this.ctx),Ei);const{viewportScale:c}=this,h=Math.ceil(o*this.outputScaleX*c),u=Math.ceil(a*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(h,u);const{canvas:f,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(t,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=p,this.ctx.save(),this.ctx.setTransform(Ei[0],0,0,-Ei[1],0,a*Ei[1]),Tf(this.ctx)}else{Tf(this.ctx),this.endPath();const c=new Path2D;c.rect(e[0],e[1],o,a),this.ctx.clip(c)}}this.current=new Sw(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...n)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),A(this,pn,lb).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const s=this.ctx,n=this._createMaskCanvas(t),r=n.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(r,n.offsetX,n.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,s=0,n=0,r,o){if(!this.contentVisible)return;t=this.getObject(t.data,t);const a=this.ctx;a.save();const c=Me(a);a.transform(e,s,n,r,0,0);const h=this._createMaskCanvas(t);a.setTransform(1,0,0,1,h.offsetX-c[4],h.offsetY-c[5]);for(let u=0,f=o.length;u<f;u+=2){const p=_t.transform(c,[e,s,n,r,o[u],o[u+1]]);a.drawImage(h.canvas,p[4],p[5])}a.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,s=this.current.fillColor,n=this.current.patternFill;for(const r of t){const{data:o,width:a,height:c,transform:h}=r,u=this.cachedCanvases.getCanvas("maskCanvas",a,c),f=u.context;f.save();const p=this.getObject(o,r);Cw(f,p),f.globalCompositeOperation="source-in",f.fillStyle=n?s.getPattern(f,this,yn(e),vs.FILL):s,f.fillRect(0,0,a,c),f.restore(),e.save(),e.transform(...h),e.scale(1,-1),Cf(e,u.canvas,0,0,a,c,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){Ot("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,s,n){if(!this.contentVisible)return;const r=this.getObject(t);if(!r){Ot("Dependent image isn't ready yet");return}const o=r.width,a=r.height,c=[];for(let h=0,u=n.length;h<u;h+=2)c.push({transform:[e,0,0,s,n[h],n[h+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(r,c)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:s,height:n}=t,r=this.cachedCanvases.getCanvas("inlineImage",s,n),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(e,0,0),o.filter="none",r.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,s=t.height,n=this.ctx;this.save();const{filter:r}=n;r!=="none"&&r!==""&&(n.filter="none"),n.scale(1/e,-1/s);let o;if(t.bitmap)o=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)o=t;else{const h=this.cachedCanvases.getCanvas("inlineImage",e,s).context;xw(h,t),o=this.applyTransferMapsToCanvas(h)}const a=this._scaleImage(o,yn(n));n.imageSmoothingEnabled=Tw(Me(n),t.interpolate),Cf(n,a.img,0,0,a.paintWidth,a.paintHeight,0,-s,e,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const s=this.ctx;let n;if(t.bitmap)n=t.bitmap;else{const r=t.width,o=t.height,c=this.cachedCanvases.getCanvas("inlineImage",r,o).context;xw(c,t),n=this.applyTransferMapsToCanvas(c)}for(const r of e)s.save(),s.transform(...r.transform),s.scale(1,-1),Cf(s,n,r.x,r.y,r.w,r.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t,e){const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const n=this.ctx;this.pendingClip&&(s||(this.pendingClip===Pw?n.clip(t,"evenodd"):n.clip(t)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Me(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),n=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,n)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:s,c:n,d:r}=this.ctx.getTransform();let o,a;if(s===0&&n===0){const c=Math.abs(e),h=Math.abs(r);if(c===h)if(t===0)o=a=1/c;else{const u=c*t;o=a=u<1?1/u:1}else if(t===0)o=1/c,a=1/h;else{const u=c*t,f=h*t;o=u<1?1/u:1,a=f<1?1/f:1}}else{const c=Math.abs(e*r-s*n),h=Math.hypot(e,s),u=Math.hypot(n,r);if(t===0)o=u/c,a=h/c;else{const f=t*c;o=u>f?u/f:1,a=h>f?h/f:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:s,current:{lineWidth:n}}=this,[r,o]=this.getScaleForStroking();if(r===o){s.lineWidth=(n||1)*r,s.stroke(t);return}const a=s.getLineDash();e&&s.save(),s.scale(r,o),vm.a=1/r,vm.d=1/o;const c=new Path2D;if(c.addPath(t,vm),a.length>0){const h=Math.max(r,o);s.setLineDash(a.map(u=>u/h)),s.lineDashOffset/=h}s.lineWidth=n||1,s.stroke(c),e&&s.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};pn=new WeakSet,ab=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},lb=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},cb=function(t,e,s){const n=new Path2D;return n.addPath(t,new DOMMatrix(s).invertSelf().multiplySelf(e)),n};let hc=Nv;for(const i in Cp)hc.prototype[i]!==void 0&&(hc.prototype[Cp[i]]=hc.prototype[i]);var Wu,Gu;class Vn{static get workerPort(){return l(this,Wu)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");b(this,Wu,t)}static get workerSrc(){return l(this,Gu)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");b(this,Gu,t)}}Wu=new WeakMap,Gu=new WeakMap,w(Vn,Wu,null),w(Vn,Gu,"");var kc,Xu;class ek{constructor({parsedData:t,rawData:e}){w(this,kc);w(this,Xu);b(this,kc,t),b(this,Xu,e)}getRaw(){return l(this,Xu)}get(t){return l(this,kc).get(t)??null}[Symbol.iterator](){return l(this,kc).entries()}}kc=new WeakMap,Xu=new WeakMap;const tc=Symbol("INTERNAL");var Ku,Yu,Qu,Ic;class sk{constructor(t,{name:e,intent:s,usage:n,rbGroups:r}){w(this,Ku,!1);w(this,Yu,!1);w(this,Qu,!1);w(this,Ic,!0);b(this,Ku,!!(t&Ai.DISPLAY)),b(this,Yu,!!(t&Ai.PRINT)),this.name=e,this.intent=s,this.usage=n,this.rbGroups=r}get visible(){if(l(this,Qu))return l(this,Ic);if(!l(this,Ic))return!1;const{print:t,view:e}=this.usage;return l(this,Ku)?(e==null?void 0:e.viewState)!=="OFF":l(this,Yu)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,s=!1){t!==tc&&ge("Internal method `_setVisible` called."),b(this,Qu,s),b(this,Ic,e)}}Ku=new WeakMap,Yu=new WeakMap,Qu=new WeakMap,Ic=new WeakMap;var mo,fe,Lc,Mc,Ju,hb;class ik{constructor(t,e=Ai.DISPLAY){w(this,Ju);w(this,mo,null);w(this,fe,new Map);w(this,Lc,null);w(this,Mc,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,b(this,Mc,t.order);for(const s of t.groups)l(this,fe).set(s.id,new sk(e,s));if(t.baseState==="OFF")for(const s of l(this,fe).values())s._setVisible(tc,!1);for(const s of t.on)l(this,fe).get(s)._setVisible(tc,!0);for(const s of t.off)l(this,fe).get(s)._setVisible(tc,!1);b(this,Lc,this.getHash())}}isVisible(t){if(l(this,fe).size===0)return!0;if(!t)return bg("Optional content group not defined."),!0;if(t.type==="OCG")return l(this,fe).has(t.id)?l(this,fe).get(t.id).visible:(Ot(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return A(this,Ju,hb).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!l(this,fe).has(e))return Ot(`Optional content group not found: ${e}`),!0;if(l(this,fe).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!l(this,fe).has(e))return Ot(`Optional content group not found: ${e}`),!0;if(!l(this,fe).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!l(this,fe).has(e))return Ot(`Optional content group not found: ${e}`),!0;if(!l(this,fe).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!l(this,fe).has(e))return Ot(`Optional content group not found: ${e}`),!0;if(l(this,fe).get(e).visible)return!1}return!0}return Ot(`Unknown optional content policy ${t.policy}.`),!0}return Ot(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,s=!0){var r;const n=l(this,fe).get(t);if(!n){Ot(`Optional content group not found: ${t}`);return}if(s&&e&&n.rbGroups.length)for(const o of n.rbGroups)for(const a of o)a!==t&&((r=l(this,fe).get(a))==null||r._setVisible(tc,!1,!0));n._setVisible(tc,!!e,!0),b(this,mo,null)}setOCGState({state:t,preserveRB:e}){let s;for(const n of t){switch(n){case"ON":case"OFF":case"Toggle":s=n;continue}const r=l(this,fe).get(n);if(r)switch(s){case"ON":this.setVisibility(n,!0,e);break;case"OFF":this.setVisibility(n,!1,e);break;case"Toggle":this.setVisibility(n,!r.visible,e);break}}b(this,mo,null)}get hasInitialVisibility(){return l(this,Lc)===null||this.getHash()===l(this,Lc)}getOrder(){return l(this,fe).size?l(this,Mc)?l(this,Mc).slice():[...l(this,fe).keys()]:null}getGroup(t){return l(this,fe).get(t)||null}getHash(){if(l(this,mo)!==null)return l(this,mo);const t=new W0;for(const[e,s]of l(this,fe))t.update(`${e}:${s.visible}`);return b(this,mo,t.hexdigest())}[Symbol.iterator](){return l(this,fe).entries()}}mo=new WeakMap,fe=new WeakMap,Lc=new WeakMap,Mc=new WeakMap,Ju=new WeakSet,hb=function(t){const e=t.length;if(e<2)return!0;const s=t[0];for(let n=1;n<e;n++){const r=t[n];let o;if(Array.isArray(r))o=A(this,Ju,hb).call(this,r);else if(l(this,fe).has(r))o=l(this,fe).get(r).visible;else return Ot(`Optional content group not found: ${r}`),!0;switch(s){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return s==="And"};class nk{constructor(t,{disableRange:e=!1,disableStream:s=!1}){Ke(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:n,initialData:r,progressiveDone:o,contentDispositionFilename:a}=t;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(r==null?void 0:r.length)>0){const c=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!s,this._isRangeSupported=!e,this._contentLength=n,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((c,h)=>{this._onReceiveData({begin:c,chunk:h})}),t.addProgressListener((c,h)=>{this._onProgress({loaded:c,total:h})}),t.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const s=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const n=this._rangeReaders.some(function(r){return r._begin!==t?!1:(r._enqueue(s),!0)});Ke(n,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,s,n,r;t.total===void 0?(s=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||s.call(e,{loaded:t.loaded}):(r=(n=this._fullRequestReader)==null?void 0:n.onProgress)==null||r.call(n,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){Ke(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new rk(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new ok(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeReaders.slice(0))s.cancel(t);this._pdfDataRangeTransport.abort()}}class rk{constructor(t,e,s=!1,n=null){this._stream=t,this._done=s||!1,this._filename=Ev(n)?n:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class ok{constructor(t,e,s){this._stream=t,this._begin=e,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function ak(i){let t=!0,e=s("filename\\*","i").exec(i);if(e){e=e[1];let u=a(e);return u=unescape(u),u=c(u),u=h(u),r(u)}if(e=o(i),e){const u=h(e);return r(u)}if(e=s("filename","i").exec(i),e){e=e[1];let u=a(e);return u=h(u),r(u)}function s(u,f){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function n(u,f){if(u){if(!/^[\x00-\xFF]+$/.test(f))return f;try{const p=new TextDecoder(u,{fatal:!0}),g=Xd(f);f=p.decode(g),t=!1}catch{}}return f}function r(u){return t&&/[\x80-\xff]/.test(u)&&(u=n("utf-8",u),t&&(u=n("iso-8859-1",u))),u}function o(u){const f=[];let p;const g=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(p=g.exec(u))!==null;){let[,v,E,S]=p;if(v=parseInt(v,10),v in f){if(v===0)break;continue}f[v]=[E,S]}const _=[];for(let v=0;v<f.length&&v in f;++v){let[E,S]=f[v];S=a(S),E&&(S=unescape(S),v===0&&(S=c(S))),_.push(S)}return _.join("")}function a(u){if(u.startsWith('"')){const f=u.slice(1).split('\\"');for(let p=0;p<f.length;++p){const g=f[p].indexOf('"');g!==-1&&(f[p]=f[p].slice(0,g),f.length=p+1),f[p]=f[p].replaceAll(/\\(.)/g,"$1")}u=f.join('"')}return u}function c(u){const f=u.indexOf("'");if(f===-1)return u;const p=u.slice(0,f),_=u.slice(f+1).replace(/^[^']*'/,"");return n(p,_)}function h(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,p,g,_){if(g==="q"||g==="Q")return _=_.replaceAll("_"," "),_=_.replaceAll(/=([0-9a-fA-F]{2})/g,function(v,E){return String.fromCharCode(parseInt(E,16))}),n(p,_);try{_=atob(_)}catch{}return n(p,_)})}return""}function nE(i,t){const e=new Headers;if(!i||!t||typeof t!="object")return e;for(const s in t){const n=t[s];n!==void 0&&e.append(s,n)}return e}function _g(i){var t;return((t=URL.parse(i))==null?void 0:t.origin)??null}function rE({responseHeaders:i,isHttp:t,rangeChunkSize:e,disableRange:s}){const n={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(i.get("Content-Length"),10);return!Number.isInteger(r)||(n.suggestedLength=r,r<=2*e)||s||!t||i.get("Accept-Ranges")!=="bytes"||(i.get("Content-Encoding")||"identity")!=="identity"||(n.allowRangeRequests=!0),n}function oE(i){const t=i.get("Content-Disposition");if(t){let e=ak(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Ev(e))return e}return null}function Jd(i,t){return new Tp(`Unexpected server response (${i}) while retrieving PDF "${t}".`,i,i===404||i===0&&t.startsWith("file:"))}function aE(i){return i===200||i===206}function lE(i,t,e){return{method:"GET",headers:i,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function cE(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(Ot(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class Rw{constructor(t){Z(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=nE(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Ke(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new lk(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new ck(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class lk{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const s=new Headers(t.headers),n=e.url;fetch(n,lE(s,this._withCredentials,this._abortController)).then(r=>{if(t._responseOrigin=_g(r.url),!aE(r.status))throw Jd(r.status,n);this._reader=r.body.getReader(),this._headersCapability.resolve();const o=r.headers,{allowRangeRequests:a,suggestedLength:c}=rE({responseHeaders:o,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=c||this._contentLength,this._filename=oE(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Uo("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:cE(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class ck{constructor(t,e,s){this._stream=t,this._reader=null,this._loaded=0;const n=t.source;this._withCredentials=n.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!n.disableStream,this._abortController=new AbortController;const r=new Headers(t.headers);r.append("Range",`bytes=${e}-${s-1}`);const o=n.url;fetch(o,lE(r,this._withCredentials,this._abortController)).then(a=>{const c=_g(a.url);if(c!==t._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${t._responseOrigin}".`);if(!aE(a.status))throw Jd(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:cE(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const _m=200,ym=206;function hk(i){const t=i.response;return typeof t!="string"?t:Xd(t).buffer}class uk{constructor({url:t,httpHeaders:e,withCredentials:s}){Z(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=nE(this.isHttp,e),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,s=this.currXhrId++,n=this.pendingRequests[s]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[r,o]of this.headers)e.setRequestHeader(r,o);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),n.expectedStatus=ym):n.expectedStatus=_m,e.responseType="arraybuffer",Ke(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,s),e.onprogress=this.onProgress.bind(this,s),n.onHeadersReceived=t.onHeadersReceived,n.onDone=t.onDone,n.onError=t.onError,n.onProgress=t.onProgress,e.send(null),s}onProgress(t,e){var n;const s=this.pendingRequests[t];s&&((n=s.onProgress)==null||n.call(s,e))}onStateChange(t,e){const s=this.pendingRequests[t];if(!s)return;const n=s.xhr;if(n.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),n.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],n.status===0&&this.isHttp){s.onError(n.status);return}const r=n.status||_m;if(!(r===_m&&s.expectedStatus===ym)&&r!==s.expectedStatus){s.onError(n.status);return}const a=hk(n);if(r===ym){const c=n.getResponseHeader("Content-Range"),h=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);h?s.onDone({begin:parseInt(h[1],10),chunk:a}):(Ot('Missing or invalid "Content-Range" header.'),s.onError(0))}else a?s.onDone({begin:0,chunk:a}):s.onError(n.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class dk{constructor(t){this._source=t,this._manager=new uk(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return Ke(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new fk(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const s=new pk(this._manager,t,e);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class fk{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=_g(e.responseURL);const s=e.getAllResponseHeaders(),n=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{const[c,...h]=a.split(": ");return[c,h.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:o}=rE({responseHeaders:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=oE(n),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Jd(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class pk{constructor(t,e,s){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=_g((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=Jd(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const gk=/^[a-z][a-z0-9\-+.]+:/i;function mk(i){if(gk.test(i))return new URL(i);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(i))}class bk{constructor(t){this.source=t,this.url=mk(t.url),Ke(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Ke(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new vk(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new _k(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class vk{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(n=>{this._contentLength=n.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},n=>{n.code==="ENOENT"&&(n=Jd(0,this._url.href)),this._storedError=n,this._headersCapability.reject(n)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Uo("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class _k{constructor(t,e,s){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const n=t.source;this._isStreamingSupported=!n.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:e,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const yk=1e5,kw=30;var Ow,bo,Zs,Zu,td,Ha,mr,ed,sd,ja,Dc,Oc,vo,Nc,id,Fc,Va,nd,rd,$c,Ua,od,_o,Bc,Vr,hE,uE,ub,Ci,Kf,db,dE,fE;const Ze=class Ze{constructor({textContentSource:t,container:e,viewport:s}){w(this,Vr);w(this,bo,Promise.withResolvers());w(this,Zs,null);w(this,Zu,!1);w(this,td,!!((Ow=globalThis.FontInspector)!=null&&Ow.enabled));w(this,Ha,null);w(this,mr,null);w(this,ed,0);w(this,sd,0);w(this,ja,null);w(this,Dc,null);w(this,Oc,0);w(this,vo,0);w(this,Nc,Object.create(null));w(this,id,[]);w(this,Fc,null);w(this,Va,[]);w(this,nd,new WeakMap);w(this,rd,null);var c;if(t instanceof ReadableStream)b(this,Fc,t);else if(typeof t=="object")b(this,Fc,new ReadableStream({start(h){h.enqueue(t),h.close()}}));else throw new Error('No "textContentSource" parameter specified.');b(this,Zs,b(this,Dc,e)),b(this,vo,s.scale*jr.pixelRatio),b(this,Oc,s.rotation),b(this,mr,{div:null,properties:null,ctx:null});const{pageWidth:n,pageHeight:r,pageX:o,pageY:a}=s.rawDims;b(this,rd,[1,0,0,-1,-o,a+r]),b(this,sd,n),b(this,ed,r),A(c=Ze,Ci,dE).call(c),xl(e,s),l(this,bo).promise.finally(()=>{l(Ze,Bc).delete(this),b(this,mr,null),b(this,Nc,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Es.platform;return Wt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{l(this,ja).read().then(({value:e,done:s})=>{if(s){l(this,bo).resolve();return}l(this,Ha)??b(this,Ha,e.lang),Object.assign(l(this,Nc),e.styles),A(this,Vr,hE).call(this,e.items),t()},l(this,bo).reject)};return b(this,ja,l(this,Fc).getReader()),l(Ze,Bc).add(this),t(),l(this,bo).promise}update({viewport:t,onBefore:e=null}){var r;const s=t.scale*jr.pixelRatio,n=t.rotation;if(n!==l(this,Oc)&&(e==null||e(),b(this,Oc,n),xl(l(this,Dc),{rotation:n})),s!==l(this,vo)){e==null||e(),b(this,vo,s);const o={div:null,properties:null,ctx:A(r=Ze,Ci,Kf).call(r,l(this,Ha))};for(const a of l(this,Va))o.properties=l(this,nd).get(a),o.div=a,A(this,Vr,ub).call(this,o)}}cancel(){var e;const t=new Uo("TextLayer task cancelled.");(e=l(this,ja))==null||e.cancel(t).catch(()=>{}),b(this,ja,null),l(this,bo).reject(t)}get textDivs(){return l(this,Va)}get textContentItemsStr(){return l(this,id)}static cleanup(){if(!(l(this,Bc).size>0)){l(this,$c).clear();for(const{canvas:t}of l(this,Ua).values())t.remove();l(this,Ua).clear()}}};bo=new WeakMap,Zs=new WeakMap,Zu=new WeakMap,td=new WeakMap,Ha=new WeakMap,mr=new WeakMap,ed=new WeakMap,sd=new WeakMap,ja=new WeakMap,Dc=new WeakMap,Oc=new WeakMap,vo=new WeakMap,Nc=new WeakMap,id=new WeakMap,Fc=new WeakMap,Va=new WeakMap,nd=new WeakMap,rd=new WeakMap,$c=new WeakMap,Ua=new WeakMap,od=new WeakMap,_o=new WeakMap,Bc=new WeakMap,Vr=new WeakSet,hE=function(t){var n,r;if(l(this,Zu))return;(r=l(this,mr)).ctx??(r.ctx=A(n=Ze,Ci,Kf).call(n,l(this,Ha)));const e=l(this,Va),s=l(this,id);for(const o of t){if(e.length>yk){Ot("Ignoring additional textDivs for performance reasons."),b(this,Zu,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=l(this,Zs);b(this,Zs,document.createElement("span")),l(this,Zs).classList.add("markedContent"),o.id!==null&&l(this,Zs).setAttribute("id",`${o.id}`),a.append(l(this,Zs))}else o.type==="endMarkedContent"&&b(this,Zs,l(this,Zs).parentNode);continue}s.push(o.str),A(this,Vr,uE).call(this,o)}},uE=function(t){var v;const e=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};l(this,Va).push(e);const n=_t.transform(l(this,rd),t.transform);let r=Math.atan2(n[1],n[0]);const o=l(this,Nc)[t.fontName];o.vertical&&(r+=Math.PI/2);let a=l(this,td)&&o.fontSubstitution||o.fontFamily;a=Ze.fontFamilyMap.get(a)||a;const c=Math.hypot(n[2],n[3]),h=c*A(v=Ze,Ci,fE).call(v,a,o,l(this,Ha));let u,f;r===0?(u=n[4],f=n[5]-h):(u=n[4]+h*Math.sin(r),f=n[5]-h*Math.cos(r));const p="calc(var(--total-scale-factor) *",g=e.style;l(this,Zs)===l(this,Dc)?(g.left=`${(100*u/l(this,sd)).toFixed(2)}%`,g.top=`${(100*f/l(this,ed)).toFixed(2)}%`):(g.left=`${p}${u.toFixed(2)}px)`,g.top=`${p}${f.toFixed(2)}px)`),g.fontSize=`${p}${(l(Ze,_o)*c).toFixed(2)}px)`,g.fontFamily=a,s.fontSize=c,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,l(this,td)&&(e.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),r!==0&&(s.angle=r*(180/Math.PI));let _=!1;if(t.str.length>1)_=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const E=Math.abs(t.transform[0]),S=Math.abs(t.transform[3]);E!==S&&Math.max(E,S)/Math.min(E,S)>1.5&&(_=!0)}if(_&&(s.canvasWidth=o.vertical?t.height:t.width),l(this,nd).set(e,s),l(this,mr).div=e,l(this,mr).properties=s,A(this,Vr,ub).call(this,l(this,mr)),s.hasText&&l(this,Zs).append(e),s.hasEOL){const E=document.createElement("br");E.setAttribute("role","presentation"),l(this,Zs).append(E)}},ub=function(t){var a;const{div:e,properties:s,ctx:n}=t,{style:r}=e;let o="";if(l(Ze,_o)>1&&(o=`scale(${1/l(Ze,_o)})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:c}=r,{canvasWidth:h,fontSize:u}=s;A(a=Ze,Ci,db).call(a,n,u*l(this,vo),c);const{width:f}=n.measureText(e.textContent);f>0&&(o=`scaleX(${h*l(this,vo)/f}) ${o}`)}s.angle!==0&&(o=`rotate(${s.angle}deg) ${o}`),o.length>0&&(r.transform=o)},Ci=new WeakSet,Kf=function(t=null){let e=l(this,Ua).get(t||(t=""));if(!e){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=t,document.body.append(s),e=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),l(this,Ua).set(t,e),l(this,od).set(e,{size:0,family:""})}return e},db=function(t,e,s){const n=l(this,od).get(t);e===n.size&&s===n.family||(t.font=`${e}px ${s}`,n.size=e,n.family=s)},dE=function(){if(l(this,_o)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),b(this,_o,t.getBoundingClientRect().height),t.remove()},fE=function(t,e,s){const n=l(this,$c).get(t);if(n)return n;const r=A(this,Ci,Kf).call(this,s);r.canvas.width=r.canvas.height=kw,A(this,Ci,db).call(this,r,kw,t);const o=r.measureText(""),a=o.fontBoundingBoxAscent,c=Math.abs(o.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let h=.8;return a?h=a/(a+c):(Es.platform.isFirefox&&Ot("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?h=e.ascent:e.descent&&(h=1+e.descent)),l(this,$c).set(t,h),h},w(Ze,Ci),w(Ze,$c,new Map),w(Ze,Ua,new Map),w(Ze,od,new WeakMap),w(Ze,_o,null),w(Ze,Bc,new Set);let vu=Ze;class _u{static textContent(t){const e=[],s={items:e,styles:Object.create(null)};function n(r){var c;if(!r)return;let o=null;const a=r.name;if(a==="#text")o=r.value;else if(_u.shouldBuildText(a))(c=r==null?void 0:r.attributes)!=null&&c.textContent?o=r.attributes.textContent:r.value&&(o=r.value);else return;if(o!==null&&e.push({str:o}),!!r.children)for(const h of r.children)n(h)}return n(t),s}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const wk=65536,Ak=100;function pE(i={}){typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});const t=new pb,{docId:e}=t,s=i.url?Ek(i.url):null,n=i.data?Sk(i.data):null,r=i.httpHeaders||null,o=i.withCredentials===!0,a=i.password??null,c=i.range instanceof gE?i.range:null,h=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:wk;let u=i.worker instanceof uc?i.worker:null;const f=i.verbosity,p=typeof i.docBaseUrl=="string"&&!vg(i.docBaseUrl)?i.docBaseUrl:null,g=Pf(i.cMapUrl),_=i.cMapPacked!==!1,v=i.CMapReaderFactory||(Ws?HR:bw),E=Pf(i.iccUrl),S=Pf(i.standardFontDataUrl),C=i.StandardFontDataFactory||(Ws?jR:vw),T=Pf(i.wasmUrl),R=i.WasmFactory||(Ws?VR:_w),I=i.stopAtErrors!==!0,F=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,N=i.isEvalSupported!==!1,H=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!Ws,U=typeof i.isImageDecoderSupported=="boolean"?i.isImageDecoderSupported:!Ws&&(Es.platform.isFirefox||!globalThis.chrome),Q=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,tt=typeof i.disableFontFace=="boolean"?i.disableFontFace:Ws,Et=i.fontExtraProperties===!0,At=i.enableXfa===!0,Rt=i.ownerDocument||globalThis.document,oe=i.disableRange===!0,J=i.disableStream===!0,X=i.disableAutoFetch===!0,et=i.pdfBug===!0,Y=i.CanvasFactory||(Ws?BR:NR),M=i.FilterFactory||(Ws?$R:FR),bt=i.enableHWA===!0,Ct=i.useWasm!==!1,Gt=c?c.length:i.length??NaN,xe=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!Ws&&!tt,Be=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:!!(v===bw&&C===vw&&R===_w&&g&&S&&T&&Yl(g,document.baseURI)&&Yl(S,document.baseURI)&&Yl(T,document.baseURI)),Xt=null;gR(f);const B={canvasFactory:new Y({ownerDocument:Rt,enableHWA:bt}),filterFactory:new M({docId:e,ownerDocument:Rt}),cMapReaderFactory:Be?null:new v({baseUrl:g,isCompressed:_}),standardFontDataFactory:Be?null:new C({baseUrl:S}),wasmFactory:Be?null:new R({baseUrl:T})};if(!u){const ht={verbosity:f,port:Vn.workerPort};u=ht.port?uc.fromPort(ht):new uc(ht),t._worker=u}const V={docId:e,apiVersion:"5.2.133",data:n,password:a,disableAutoFetch:X,rangeChunkSize:h,length:Gt,docBaseUrl:p,enableXfa:At,evaluatorOptions:{maxImageSize:F,disableFontFace:tt,ignoreErrors:I,isEvalSupported:N,isOffscreenCanvasSupported:H,isImageDecoderSupported:U,canvasMaxAreaInBytes:Q,fontExtraProperties:Et,useSystemFonts:xe,useWasm:Ct,useWorkerFetch:Be,cMapUrl:g,iccUrl:E,standardFontDataUrl:S,wasmUrl:T}},st={ownerDocument:Rt,pdfBug:et,styleElement:Xt,loadingParams:{disableAutoFetch:X,enableXfa:At}};return u.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const ht=u.messageHandler.sendWithPromise("GetDocRequest",V,n?[n.buffer]:null);let $t;if(c)$t=new nk(c,{disableRange:oe,disableStream:J});else if(!n){if(!s)throw new Error("getDocument - no `url` parameter provided.");let P;if(Ws)if(Yl(s)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");P=Rw}else P=bk;else P=Yl(s)?Rw:dk;$t=new P({url:s,length:Gt,httpHeaders:r,withCredentials:o,rangeChunkSize:h,disableRange:oe,disableStream:J})}return ht.then(P=>{if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const k=new Vh(e,P,u.port),$=new kk(k,t,$t,st,B);t._transport=$,k.send("Ready",null)})}).catch(t._capability.reject),t}function Ek(i){if(i instanceof URL)return i.href;if(typeof i=="string"){if(Ws)return i;const t=URL.parse(i,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function Sk(i){if(Ws&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return Xd(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i==null?void 0:i.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Pf(i){if(typeof i!="string")return null;if(i.endsWith("/"))return i;throw new Error(`Invalid factory url: "${i}" must include trailing slash.`)}const fb=i=>typeof i=="object"&&Number.isInteger(i==null?void 0:i.num)&&i.num>=0&&Number.isInteger(i==null?void 0:i.gen)&&i.gen>=0,xk=i=>typeof i=="object"&&typeof(i==null?void 0:i.name)=="string",Ck=SR.bind(null,fb,xk);var Up;const zp=class zp{constructor(){Z(this,"_capability",Promise.withResolvers());Z(this,"_transport",null);Z(this,"_worker",null);Z(this,"docId",`d${Bs(zp,Up)._++}`);Z(this,"destroyed",!1);Z(this,"onPassword",null);Z(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var t,e,s,n;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(r){throw(s=this._worker)!=null&&s.port&&delete this._worker._pendingDestroy,r}this._transport=null,(n=this._worker)==null||n.destroy(),this._worker=null}async getData(){return this._transport.getData()}};Up=new WeakMap,w(zp,Up,0);let pb=zp;class gE{constructor(t,e,s=!1,n=null){this.length=t,this.initialData=e,this.progressiveDone=s,this.contentDispositionFilename=n,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const s of this._rangeListeners)s(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const s of this._progressListeners)s(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){ge("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class Tk{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Wt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var br,za,Gh;class Pk{constructor(t,e,s,n=!1){w(this,za);w(this,br,!1);this._pageIndex=t,this._pageInfo=e,this._transport=s,this._stats=n?new pw:null,this._pdfBug=n,this.commonObjs=s.commonObjs,this.objs=new mE,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:s=0,offsetY:n=0,dontFlip:r=!1}={}){return new Yd({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:s,offsetY:n,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Wt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:s="display",annotationMode:n=Zr.ENABLE,transform:r=null,background:o=null,optionalContentConfigPromise:a=null,annotationCanvasMap:c=null,pageColors:h=null,printAnnotationStorage:u=null,isEditing:f=!1}){var R,I;(R=this._stats)==null||R.time("Overall");const p=this._transport.getRenderingIntent(s,n,u,f),{renderingIntent:g,cacheKey:_}=p;b(this,br,!1),a||(a=this._transport.getOptionalContentConfig(g));let v=this._intentStates.get(_);v||(v=Object.create(null),this._intentStates.set(_,v)),v.streamReaderCancelTimeout&&(clearTimeout(v.streamReaderCancelTimeout),v.streamReaderCancelTimeout=null);const E=!!(g&Ai.PRINT);v.displayReadyCapability||(v.displayReadyCapability=Promise.withResolvers(),v.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(I=this._stats)==null||I.time("Page Request"),this._pumpOperatorList(p));const S=F=>{var N;v.renderTasks.delete(C),E&&b(this,br,!0),A(this,za,Gh).call(this),F?(C.capability.reject(F),this._abortOperatorList({intentState:v,reason:F instanceof Error?F:new Error(F)})):C.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(N=globalThis.Stats)!=null&&N.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},C=new mb({callback:S,params:{canvasContext:t,viewport:e,transform:r,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:v.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!E,pdfBug:this._pdfBug,pageColors:h});(v.renderTasks||(v.renderTasks=new Set)).add(C);const T=C.task;return Promise.all([v.displayReadyCapability.promise,a]).then(([F,N])=>{var H;if(this.destroyed){S();return}if((H=this._stats)==null||H.time("Rendering"),!(N.renderingIntent&g))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");C.initializeGraphics({transparency:F,optionalContentConfig:N}),C.operatorListChanged()}).catch(S),T}getOperatorList({intent:t="display",annotationMode:e=Zr.ENABLE,printAnnotationStorage:s=null,isEditing:n=!1}={}){var h;function r(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(c))}const o=this._transport.getRenderingIntent(t,e,s,n,!0);let a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let c;return a.opListReadCapability||(c=Object.create(null),c.operatorListChanged=r,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(c),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(h=this._stats)==null||h.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(n){return n.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>_u.textContent(s));const e=this.streamTextContent(t);return new Promise(function(s,n){function r(){o.read().then(function({value:c,done:h}){if(h){s(a);return}a.lang??(a.lang=c.lang),Object.assign(a.styles,c.styles),a.items.push(...c.items),r()},n)}const o=e.getReader(),a={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const s of e.renderTasks)t.push(s.completed),s.cancel();return this.objs.clear(),b(this,br,!1),Promise.all(t)}cleanup(t=!1){b(this,br,!0);const e=A(this,za,Gh).call(this);return t&&e&&this._stats&&(this._stats=new pw),e}_startRenderPage(t,e){var n,r;const s=this._intentStates.get(e);s&&((n=this._stats)==null||n.timeEnd("Page Request"),(r=s.displayReadyCapability)==null||r.resolve(t))}_renderPageChunk(t,e){for(let s=0,n=t.length;s<n;s++)e.operatorList.fnArray.push(t.fnArray[s]),e.operatorList.argsArray.push(t.argsArray[s]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const s of e.renderTasks)s.operatorListChanged();t.lastChunk&&A(this,za,Gh).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:s,modifiedIds:n}){const{map:r,transfer:o}=s,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:r,modifiedIds:n},o).getReader(),h=this._intentStates.get(e);h.streamReader=c;const u=()=>{c.read().then(({value:f,done:p})=>{if(p){h.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(f,h),u())},f=>{if(h.streamReader=null,!this._transport.destroyed){if(h.operatorList){h.operatorList.lastChunk=!0;for(const p of h.renderTasks)p.operatorListChanged();A(this,za,Gh).call(this)}if(h.displayReadyCapability)h.displayReadyCapability.reject(f);else if(h.opListReadCapability)h.opListReadCapability.reject(f);else throw f}})};u()}_abortOperatorList({intentState:t,reason:e,force:s=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(e instanceof Av){let n=Ak;e.extraDelay>0&&e.extraDelay<1e3&&(n+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},n);return}}if(t.streamReader.cancel(new Uo(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[n,r]of this._intentStates)if(r===t){this._intentStates.delete(n);break}this.cleanup()}}}get stats(){return this._stats}}br=new WeakMap,za=new WeakSet,Gh=function(){if(!l(this,br)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),b(this,br,!1),!0};var vr,qp;class Rk{constructor(){w(this,vr,new Map);w(this,qp,Promise.resolve())}postMessage(t,e){const s={data:structuredClone(t,e?{transfer:e}:null)};l(this,qp).then(()=>{for(const[n]of l(this,vr))n.call(this,s)})}addEventListener(t,e,s=null){let n=null;if((s==null?void 0:s.signal)instanceof AbortSignal){const{signal:r}=s;if(r.aborted){Ot("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(t,e);n=()=>r.removeEventListener("abort",o),r.addEventListener("abort",o)}l(this,vr).set(e,n)}removeEventListener(t,e){const s=l(this,vr).get(e);s==null||s(),l(this,vr).delete(e)}terminate(){for(const[,t]of l(this,vr))t==null||t();l(this,vr).clear()}}vr=new WeakMap,qp=new WeakMap;var Wp,qa,Wa,Hc,Yf,jc,Qf;const Te=class Te{constructor({name:t=null,port:e=null,verbosity:s=mR()}={}){w(this,Hc);var n;if(this.name=t,this.destroyed=!1,this.verbosity=s,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((n=l(Te,Wa))!=null&&n.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(l(Te,Wa)||b(Te,Wa,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new Vh("main","worker",t),this._messageHandler.on("ready",function(){}),A(this,Hc,Yf).call(this)}_initialize(){if(l(Te,qa)||l(Te,jc,Qf)){this._setupFakeWorker();return}let{workerSrc:t}=Te;try{Te._isSameOrigin(window.location,t)||(t=Te._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),s=new Vh("main","worker",e),n=()=>{r.abort(),s.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;e.addEventListener("error",()=>{this._webWorker||n()},{signal:r.signal}),s.on("test",a=>{if(r.abort(),this.destroyed||!a){n();return}this._messageHandler=s,this._port=e,this._webWorker=e,A(this,Hc,Yf).call(this)}),s.on("ready",a=>{if(r.abort(),this.destroyed){n();return}try{o()}catch{this._setupFakeWorker()}});const o=()=>{const a=new Uint8Array;s.send("test",a,[a.buffer])};o();return}catch{bg("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){l(Te,qa)||(Ot("Setting up fake worker."),b(Te,qa,!0)),Te._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new Rk;this._port=e;const s=`fake${Bs(Te,Wp)._++}`,n=new Vh(s+"_worker",s,e);t.setup(n,e),this._messageHandler=new Vh(s,s+"_worker",e),A(this,Hc,Yf).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t,e,s;this.destroyed=!0,(t=this._webWorker)==null||t.terminate(),this._webWorker=null,(e=l(Te,Wa))==null||e.delete(this._port),this._port=null,(s=this._messageHandler)==null||s.destroy(),this._messageHandler=null}static fromPort(t){var s;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(s=l(this,Wa))==null?void 0:s.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Te(t)}static get workerSrc(){if(Vn.workerSrc)return Vn.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Wt(this,"_setupFakeWorkerGlobal",(async()=>l(this,jc,Qf)?l(this,jc,Qf):(await import(this.workerSrc)).WorkerMessageHandler)())}};Wp=new WeakMap,qa=new WeakMap,Wa=new WeakMap,Hc=new WeakSet,Yf=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},jc=new WeakSet,Qf=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},w(Te,jc),w(Te,Wp,0),w(Te,qa,!1),w(Te,Wa),Ws&&(b(Te,qa,!0),Vn.workerSrc||(Vn.workerSrc="./pdf.worker.mjs")),Te._isSameOrigin=(t,e)=>{const s=URL.parse(t);if(!(s!=null&&s.origin)||s.origin==="null")return!1;const n=new URL(e,s);return s.origin===n.origin},Te._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};let uc=Te;var _r,Dn,Vc,Uc,yr,Ga,Xh;class kk{constructor(t,e,s,n,r){w(this,Ga);w(this,_r,new Map);w(this,Dn,new Map);w(this,Vc,new Map);w(this,Uc,new Map);w(this,yr,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new mE,this.fontLoader=new DR({ownerDocument:n.ownerDocument,styleElement:n.styleElement}),this.loadingParams=n.loadingParams,this._params=n,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.wasmFactory=r.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Wt(this,"annotationStorage",new Tv)}getRenderingIntent(t,e=Zr.ENABLE,s=null,n=!1,r=!1){let o=Ai.DISPLAY,a=sb;switch(t){case"any":o=Ai.ANY;break;case"display":break;case"print":o=Ai.PRINT;break;default:Ot(`getRenderingIntent - invalid intent: ${t}`)}const c=o&Ai.PRINT&&s instanceof X0?s:this.annotationStorage;switch(e){case Zr.DISABLE:o+=Ai.ANNOTATIONS_DISABLE;break;case Zr.ENABLE:break;case Zr.ENABLE_FORMS:o+=Ai.ANNOTATIONS_FORMS;break;case Zr.ENABLE_STORAGE:o+=Ai.ANNOTATIONS_STORAGE,a=c.serializable;break;default:Ot(`getRenderingIntent - invalid annotationMode: ${e}`)}n&&(o+=Ai.IS_EDITING),r&&(o+=Ai.OPLIST);const{ids:h,hash:u}=c.modifiedIds,f=[o,a.hash,u];return{renderingIntent:o,cacheKey:f.join("_"),annotationStorageSerializable:a,modifiedIds:h}}destroy(){var s;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(s=l(this,yr))==null||s.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const n of l(this,Dn).values())t.push(n._destroy());l(this,Dn).clear(),l(this,Vc).clear(),l(this,Uc).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var n,r;this.commonObjs.clear(),this.fontLoader.clear(),l(this,_r).clear(),this.filterFactory.destroy(),vu.cleanup(),(n=this._networkStream)==null||n.cancelAllRequests(new Uo("Worker was terminated.")),(r=this.messageHandler)==null||r.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(s,n)=>{Ke(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},n.onPull=()=>{this._fullReader.read().then(function({value:r,done:o}){if(o){n.close();return}Ke(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{n.error(r)})},n.onCancel=r=>{this._fullReader.cancel(r),n.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",async s=>{var a;await this._fullReader.headersReady;const{isStreamingSupported:n,isRangeSupported:r,contentLength:o}=this._fullReader;return(!n||!r)&&(this._lastProgress&&((a=e.onProgress)==null||a.call(e,this._lastProgress)),this._fullReader.onProgress=c=>{var h;(h=e.onProgress)==null||h.call(e,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:n,isRangeSupported:r,contentLength:o}}),t.on("GetRangeReader",(s,n)=>{Ke(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(s.begin,s.end);if(!r){n.close();return}n.onPull=()=>{r.read().then(function({value:o,done:a}){if(a){n.close();return}Ke(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{n.error(o)})},n.onCancel=o=>{r.cancel(o),n.ready.catch(a=>{if(!this.destroyed)throw a})}}),t.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,e._capability.resolve(new Tk(s,this))}),t.on("DocException",s=>{e._capability.reject(Ys(s))}),t.on("PasswordRequest",s=>{b(this,yr,Promise.withResolvers());try{if(!e.onPassword)throw Ys(s);const n=r=>{r instanceof Error?l(this,yr).reject(r):l(this,yr).resolve({password:r})};e.onPassword(n,s.code)}catch(n){l(this,yr).reject(n)}return l(this,yr).promise}),t.on("DataLoaded",s=>{var n;(n=e.onProgress)==null||n.call(e,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),t.on("StartRenderPage",s=>{if(this.destroyed)return;l(this,Dn).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),t.on("commonobj",([s,n,r])=>{var o;if(this.destroyed||this.commonObjs.has(s))return null;switch(n){case"Font":if("error"in r){const u=r.error;Ot(`Error during font loading: ${u}`),this.commonObjs.resolve(s,u);break}const a=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(u,f)=>globalThis.FontInspector.fontAdded(u,f):null,c=new OR(r,a);this.fontLoader.bind(c).catch(()=>t.sendWithPromise("FontFallback",{id:s})).finally(()=>{!c.fontExtraProperties&&c.data&&(c.data=null),this.commonObjs.resolve(s,c)});break;case"CopyLocalImage":const{imageRef:h}=r;Ke(h,"The imageRef must be defined.");for(const u of l(this,Dn).values())for(const[,f]of u.objs)if((f==null?void 0:f.ref)===h)return f.dataLen?(this.commonObjs.resolve(s,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,r);break;default:throw new Error(`Got unknown common object type ${n}`)}return null}),t.on("obj",([s,n,r,o])=>{var c;if(this.destroyed)return;const a=l(this,Dn).get(n);if(!a.objs.has(s)){if(a._intentStates.size===0){(c=o==null?void 0:o.bitmap)==null||c.close();return}switch(r){case"Image":case"Pattern":a.objs.resolve(s,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",s=>{var n;this.destroyed||(n=e.onProgress)==null||n.call(e,{loaded:s.loaded,total:s.total})}),t.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const n=this[s.type];if(!n)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return n.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;this.annotationStorage.size<=0&&Ot("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((s=this._fullReader)==null?void 0:s.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,s=l(this,Vc).get(e);if(s)return s;const n=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&l(this,Uc).set(r.refStr,t);const o=new Pk(e,r,this,this._params.pdfBug);return l(this,Dn).set(e,o),o});return l(this,Vc).set(e,n),n}getPageIndex(t){return fb(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return A(this,Ga,Xh).call(this,"GetFieldObjects")}hasJSActions(){return A(this,Ga,Xh).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return A(this,Ga,Xh).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return A(this,Ga,Xh).call(this,"GetOptionalContentConfig").then(e=>new ik(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=l(this,_r).get(t);if(e)return e;const s=this.messageHandler.sendWithPromise(t,null).then(n=>{var r,o;return{info:n[0],metadata:n[1]?new ek(n[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return l(this,_r).set(t,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of l(this,Dn).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),l(this,_r).clear(),this.filterFactory.destroy(!0),vu.cleanup()}}cachedPageNumber(t){if(!fb(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return l(this,Uc).get(e)??null}}_r=new WeakMap,Dn=new WeakMap,Vc=new WeakMap,Uc=new WeakMap,yr=new WeakMap,Ga=new WeakSet,Xh=function(t,e=null){const s=l(this,_r).get(t);if(s)return s;const n=this.messageHandler.sendWithPromise(t,e);return l(this,_r).set(t,n),n};const Dh=Symbol("INITIAL_DATA");var di,ad,gb;class mE{constructor(){w(this,ad);w(this,di,Object.create(null))}get(t,e=null){if(e){const n=A(this,ad,gb).call(this,t);return n.promise.then(()=>e(n.data)),null}const s=l(this,di)[t];if(!s||s.data===Dh)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return s.data}has(t){const e=l(this,di)[t];return!!e&&e.data!==Dh}delete(t){const e=l(this,di)[t];return!e||e.data===Dh?!1:(delete l(this,di)[t],!0)}resolve(t,e=null){const s=A(this,ad,gb).call(this,t);s.data=e,s.resolve()}clear(){var t;for(const e in l(this,di)){const{data:s}=l(this,di)[e];(t=s==null?void 0:s.bitmap)==null||t.close()}b(this,di,Object.create(null))}*[Symbol.iterator](){for(const t in l(this,di)){const{data:e}=l(this,di)[t];e!==Dh&&(yield[t,e])}}}di=new WeakMap,ad=new WeakSet,gb=function(t){var e;return(e=l(this,di))[t]||(e[t]={...Promise.withResolvers(),data:Dh})};var yo;class Ik{constructor(t){w(this,yo,null);Z(this,"onContinue",null);Z(this,"onError",null);b(this,yo,t)}get promise(){return l(this,yo).capability.promise}cancel(t=0){l(this,yo).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=l(this,yo).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=l(this,yo);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}yo=new WeakMap;var wo,Xa;const ma=class ma{constructor({callback:t,params:e,objs:s,commonObjs:n,annotationCanvasMap:r,operatorList:o,pageIndex:a,canvasFactory:c,filterFactory:h,useRequestAnimationFrame:u=!1,pdfBug:f=!1,pageColors:p=null}){w(this,wo,null);this.callback=t,this.params=e,this.objs=s,this.commonObjs=n,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=c,this.filterFactory=h,this._pdfBug=f,this.pageColors=p,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Ik(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var a,c;if(this.cancelled)return;if(this._canvas){if(l(ma,Xa).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");l(ma,Xa).add(this._canvas)}this._pdfBug&&((a=globalThis.StepperManager)!=null&&a.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:n,transform:r,background:o}=this.params;this.gfx=new hc(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:n,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(t=null,e=0){var s,n,r;this.running=!1,this.cancelled=!0,(s=this.gfx)==null||s.endDrawing(),l(this,wo)&&(window.cancelAnimationFrame(l(this,wo)),b(this,wo,null)),l(ma,Xa).delete(this._canvas),t||(t=new Av(`Rendering cancelled, page ${this._pageIndex+1}`,e)),this.callback(t),(r=(n=this.task).onError)==null||r.call(n,t)}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?b(this,wo,window.requestAnimationFrame(()=>{b(this,wo,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),l(ma,Xa).delete(this._canvas),this.callback())))}};wo=new WeakMap,Xa=new WeakMap,w(ma,Xa,new WeakSet);let mb=ma;const Lk="5.2.133",Mk="4f7761353";function Iw(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function Oh(i){return Math.max(0,Math.min(255,255*i))}class Lw{static CMYK_G([t,e,s,n]){return["G",1-Math.min(1,.3*t+.59*s+.11*e+n)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Oh(t),[t,t,t]}static G_HTML([t]){const e=Iw(t);return`#${e}${e}${e}`}static RGB_G([t,e,s]){return["G",.3*t+.59*e+.11*s]}static RGB_rgb(t){return t.map(Oh)}static RGB_HTML(t){return`#${t.map(Iw).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,s,n]){return["RGB",1-Math.min(1,t+n),1-Math.min(1,s+n),1-Math.min(1,e+n)]}static CMYK_rgb([t,e,s,n]){return[Oh(1-Math.min(1,t+n)),Oh(1-Math.min(1,s+n)),Oh(1-Math.min(1,e+n))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,s]){const n=1-t,r=1-e,o=1-s,a=Math.min(n,r,o);return["CMYK",n,r,o,a]}}class Dk{create(t,e,s=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const n=this._createSVG("svg:svg");return n.setAttribute("version","1.1"),s||(n.setAttribute("width",`${t}px`),n.setAttribute("height",`${e}px`)),n.setAttribute("preserveAspectRatio","none"),n.setAttribute("viewBox",`0 0 ${t} ${e}`),n}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){ge("Abstract method `_createSVG` called.")}}class kp extends Dk{_createSVG(t){return document.createElementNS(Zn,t)}}class bE{static setupStorage(t,e,s,n,r){const o=n.getValue(e,{value:null});switch(s.name){case"textarea":if(o.value!==null&&(t.textContent=o.value),r==="print")break;t.addEventListener("input",a=>{n.setValue(e,{value:a.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(o.value===s.attributes.xfaOn?t.setAttribute("checked",!0):o.value===s.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",a=>{n.setValue(e,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&t.setAttribute("value",o.value),r==="print")break;t.addEventListener("input",a=>{n.setValue(e,{value:a.target.value})})}break;case"select":if(o.value!==null){t.setAttribute("value",o.value);for(const a of s.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}t.addEventListener("input",a=>{const c=a.target.options,h=c.selectedIndex===-1?"":c[c.selectedIndex].value;n.setValue(e,{value:h})});break}}static setAttributes({html:t,element:e,storage:s=null,intent:n,linkService:r}){const{attributes:o}=e,a=t instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${n}`);for(const[c,h]of Object.entries(o))if(h!=null)switch(c){case"class":h.length&&t.setAttribute(c,h.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",h);break;case"style":Object.assign(t.style,h);break;case"textContent":t.textContent=h;break;default:(!a||c!=="href"&&c!=="newWindow")&&t.setAttribute(c,h)}a&&r.addLinkAttributes(t,o.href,o.newWindow),s&&o.dataId&&this.setupStorage(t,o.dataId,e,s)}static render(t){var f,p;const e=t.annotationStorage,s=t.linkService,n=t.xfaHtml,r=t.intent||"display",o=document.createElement(n.name);n.attributes&&this.setAttributes({html:o,element:n,intent:r,linkService:s});const a=r!=="richText",c=t.div;if(c.append(o),t.viewport){const g=`matrix(${t.viewport.transform.join(",")})`;c.style.transform=g}a&&c.setAttribute("class","xfaLayer xfaFont");const h=[];if(n.children.length===0){if(n.value){const g=document.createTextNode(n.value);o.append(g),a&&_u.shouldBuildText(n.name)&&h.push(g)}return{textDivs:h}}const u=[[n,-1,o]];for(;u.length>0;){const[g,_,v]=u.at(-1);if(_+1===g.children.length){u.pop();continue}const E=g.children[++u.at(-1)[1]];if(E===null)continue;const{name:S}=E;if(S==="#text"){const T=document.createTextNode(E.value);h.push(T),v.append(T);continue}const C=(f=E==null?void 0:E.attributes)!=null&&f.xmlns?document.createElementNS(E.attributes.xmlns,S):document.createElement(S);if(v.append(C),E.attributes&&this.setAttributes({html:C,element:E,storage:e,intent:r,linkService:s}),((p=E.children)==null?void 0:p.length)>0)u.push([E,-1,C]);else if(E.value){const T=document.createTextNode(E.value);a&&_u.shouldBuildText(S)&&h.push(T),C.append(T)}}for(const g of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:h}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Zd=1e3,Ok=9,Tl=new WeakSet;class Mw{static create(t){switch(t.data.annotationType){case Ge.LINK:return new vE(t);case Ge.TEXT:return new Nk(t);case Ge.WIDGET:switch(t.data.fieldType){case"Tx":return new Fk(t);case"Btn":return t.data.radioButton?new wE(t):t.data.checkBox?new Bk(t):new Hk(t);case"Ch":return new jk(t);case"Sig":return new $k(t)}return new Rl(t);case Ge.POPUP:return new vb(t);case Ge.FREETEXT:return new CE(t);case Ge.LINE:return new Uk(t);case Ge.SQUARE:return new zk(t);case Ge.CIRCLE:return new qk(t);case Ge.POLYLINE:return new TE(t);case Ge.CARET:return new Gk(t);case Ge.INK:return new kv(t);case Ge.POLYGON:return new Wk(t);case Ge.HIGHLIGHT:return new PE(t);case Ge.UNDERLINE:return new Xk(t);case Ge.SQUIGGLY:return new Kk(t);case Ge.STRIKEOUT:return new Yk(t);case Ge.STAMP:return new RE(t);case Ge.FILEATTACHMENT:return new Qk(t);default:return new qe(t)}}}var Ka,zc,qc,ld,bb;const Fv=class Fv{constructor(t,{isRenderable:e=!1,ignoreBorder:s=!1,createQuadrilaterals:n=!1}={}){w(this,ld);w(this,Ka,null);w(this,zc,!1);w(this,qc,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(s)),n&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:s}){return!!(t!=null&&t.str||e!=null&&e.str||s!=null&&s.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Fv._hasPopupData(this.data)}updateEdited(t){var s;if(!this.container)return;l(this,Ka)||b(this,Ka,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&A(this,ld,bb).call(this,e),(s=l(this,qc))==null||s.popup.updateEdited(t)}resetEdited(){var t;l(this,Ka)&&(A(this,ld,bb).call(this,l(this,Ka).rect),(t=l(this,qc))==null||t.popup.resetEdited(),b(this,Ka,null))}_createContainer(t){const{data:e,parent:{page:s,viewport:n}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),this instanceof Rl||(r.tabIndex=Zd);const{style:o}=r;if(o.zIndex=this.parent.zIndex++,e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof vb){const{rotation:v}=e;return!e.hasOwnCanvas&&v!==0&&this.setRotation(v,r),r}const{width:a,height:c}=this;if(!t&&e.borderStyle.width>0){o.borderWidth=`${e.borderStyle.width}px`;const v=e.borderStyle.horizontalCornerRadius,E=e.borderStyle.verticalCornerRadius;if(v>0||E>0){const C=`calc(${v}px * var(--total-scale-factor)) / calc(${E}px * var(--total-scale-factor))`;o.borderRadius=C}else if(this instanceof wE){const C=`calc(${a}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;o.borderRadius=C}switch(e.borderStyle.style){case Kl.SOLID:o.borderStyle="solid";break;case Kl.DASHED:o.borderStyle="dashed";break;case Kl.BEVELED:Ot("Unimplemented border style: beveled");break;case Kl.INSET:Ot("Unimplemented border style: inset");break;case Kl.UNDERLINE:o.borderBottomStyle="solid";break}const S=e.borderColor||null;S?(b(this,zc,!0),o.borderColor=_t.makeHexColor(S[0]|0,S[1]|0,S[2]|0)):o.borderWidth=0}const h=_t.normalizeRect([e.rect[0],s.view[3]-e.rect[1]+s.view[1],e.rect[2],s.view[3]-e.rect[3]+s.view[1]]),{pageWidth:u,pageHeight:f,pageX:p,pageY:g}=n.rawDims;o.left=`${100*(h[0]-p)/u}%`,o.top=`${100*(h[1]-g)/f}%`;const{rotation:_}=e;return e.hasOwnCanvas||_===0?(o.width=`${100*a/u}%`,o.height=`${100*c/f}%`):this.setRotation(_,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:n}=this.parent.viewport.rawDims;let{width:r,height:o}=this;t%180!==0&&([r,o]=[o,r]),e.style.width=`${100*r/s}%`,e.style.height=`${100*o/n}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,s,n)=>{const r=n.detail[e],o=r[0],a=r.slice(1);n.target.style[s]=Lw[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[s]:Lw[`${o}_rgb`](a)})};return Wt(this,"_commonActions",{display:e=>{const{display:s}=e.detail,n=s%2===1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:s===1||s===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:s}=e.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const s=e.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(t,e){const s=this._commonActions;for(const n of Object.keys(e.detail)){const r=t[n]||s[n];r==null||r(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const s=this._commonActions;for(const[n,r]of Object.entries(e)){const o=s[n];if(o){const a={detail:{[n]:r},target:t};o(a),delete e[n]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,s,n,r]=this.data.rect.map(v=>Math.fround(v));if(t.length===8){const[v,E,S,C]=t.subarray(2,6);if(n===v&&r===E&&e===S&&s===C)return}const{style:o}=this.container;let a;if(l(this,zc)){const{borderColor:v,borderWidth:E}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${v}" stroke-width="${E}">`],this.container.classList.add("hasBorder")}const c=n-e,h=r-s,{svgFactory:u}=this,f=u.createElement("svg");f.classList.add("quadrilateralsContainer"),f.setAttribute("width",0),f.setAttribute("height",0);const p=u.createElement("defs");f.append(p);const g=u.createElement("clipPath"),_=`clippath_${this.data.id}`;g.setAttribute("id",_),g.setAttribute("clipPathUnits","objectBoundingBox"),p.append(g);for(let v=2,E=t.length;v<E;v+=8){const S=t[v],C=t[v+1],T=t[v+2],R=t[v+3],I=u.createElement("rect"),F=(T-e)/c,N=(r-C)/h,H=(S-T)/c,U=(C-R)/h;I.setAttribute("x",F),I.setAttribute("y",N),I.setAttribute("width",H),I.setAttribute("height",U),g.append(I),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${F}" y="${N}" width="${H}" height="${U}"/>`)}l(this,zc)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(f),this.container.style.clipPath=`url(#${_})`}_createPopup(){const{data:t}=this,e=b(this,qc,new vb({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(e.render())}render(){ge("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const s=[];if(this._fieldObjects){const n=this._fieldObjects[t];if(n)for(const{page:r,id:o,exportValues:a}of n){if(r===-1||o===e)continue;const c=typeof a=="string"?a:null,h=document.querySelector(`[data-element-id="${o}"]`);if(h&&!Tl.has(h)){Ot(`_getElementsByName - element not allowed: ${o}`);continue}s.push({id:o,exportValue:c,domElement:h})}return s}for(const n of document.getElementsByName(t)){const{exportValue:r}=n,o=n.getAttribute("data-element-id");o!==e&&Tl.has(n)&&s.push({id:o,exportValue:r,domElement:n})}return s}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};Ka=new WeakMap,zc=new WeakMap,qc=new WeakMap,ld=new WeakSet,bb=function(t){const{container:{style:e},data:{rect:s,rotation:n},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:o,pageX:a,pageY:c}}}}=this;s==null||s.splice(0,4,...t),e.left=`${100*(t[0]-a)/r}%`,e.top=`${100*(o-t[3]+c)/o}%`,n===0?(e.width=`${100*(t[2]-t[0])/r}%`,e.height=`${100*(t[3]-t[1])/o}%`):this.setRotation(n)};let qe=Fv;var Si,ua,_E,yE;class vE extends qe{constructor(e,s=null){super(e,{isRenderable:!0,ignoreBorder:!!(s!=null&&s.ignoreBorder),createQuadrilaterals:!0});w(this,Si);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:s}=this,n=document.createElement("a");n.setAttribute("data-element-id",e.id);let r=!1;return e.url?(s.addLinkAttributes(n,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(n,e.action),r=!0):e.attachment?(A(this,Si,_E).call(this,n,e.attachment,e.attachmentDest),r=!0):e.setOCGState?(A(this,Si,yE).call(this,n,e.setOCGState),r=!0):e.dest?(this._bindLink(n,e.dest),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,e),r=!0),e.resetForm?(this._bindResetFormAction(n,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(n,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(n),this.container}_bindLink(e,s){e.href=this.linkService.getDestinationHash(s),e.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&A(this,Si,ua).call(this)}_bindNamedAction(e,s){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(s),!1),A(this,Si,ua).call(this)}_bindJSAction(e,s){e.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(s.actions)){const o=n.get(r);o&&(e[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:r}}),!1})}e.onclick||(e.onclick=()=>!1),A(this,Si,ua).call(this)}_bindResetFormAction(e,s){const n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl("")),A(this,Si,ua).call(this),!this._fieldObjects){Ot('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(e.onclick=()=>!1);return}e.onclick=()=>{var f;n==null||n();const{fields:r,refs:o,include:a}=s,c=[];if(r.length!==0||o.length!==0){const p=new Set(o);for(const g of r){const _=this._fieldObjects[g]||[];for(const{id:v}of _)p.add(v)}for(const g of Object.values(this._fieldObjects))for(const _ of g)p.has(_.id)===a&&c.push(_)}else for(const p of Object.values(this._fieldObjects))c.push(...p);const h=this.annotationStorage,u=[];for(const p of c){const{id:g}=p;switch(u.push(g),p.type){case"text":{const v=p.defaultValue||"";h.setValue(g,{value:v});break}case"checkbox":case"radiobutton":{const v=p.defaultValue===p.exportValues;h.setValue(g,{value:v});break}case"combobox":case"listbox":{const v=p.defaultValue||"";h.setValue(g,{value:v});break}default:continue}const _=document.querySelector(`[data-element-id="${g}"]`);if(_){if(!Tl.has(_)){Ot(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;_.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((f=this.linkService.eventBus)==null||f.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:u,name:"ResetForm"}})),!1}}}Si=new WeakSet,ua=function(){this.container.setAttribute("data-internal-link","")},_E=function(e,s,n=null){e.href=this.linkService.getAnchorUrl(""),s.description&&(e.title=s.description),e.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(s.content,s.filename,n),!1},A(this,Si,ua).call(this)},yE=function(e,s){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(s),!1),A(this,Si,ua).call(this)};class Nk extends qe{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Rl extends qe{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Es.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,s,n,r){s.includes("mouse")?t.addEventListener(s,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):t.addEventListener(s,o=>{var a;if(s==="blur"){if(!e.focused||!o.relatedTarget)return;e.focused=!1}else if(s==="focus"){if(e.focused)return;e.focused=!0}r&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:r(o)}}))})}_setEventListeners(t,e,s,n){var r,o,a;for(const[c,h]of s)(h==="Action"||(r=this.data.actions)!=null&&r[h])&&((h==="Focus"||h==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,c,h,n),h==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(t,e,"blur","Blur",null):h==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":_t.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,n=this.data.defaultAppearanceData.fontSize||Ok,r=t.style;let o;const a=2,c=h=>Math.round(10*h)/10;if(this.data.multiLine){const h=Math.abs(this.data.rect[3]-this.data.rect[1]-a),u=Math.round(h/(fm*n))||1,f=h/u;o=Math.min(n,c(f/fm))}else{const h=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(n,c(h/fm))}r.fontSize=`calc(${o}px * var(--total-scale-factor))`,r.color=_t.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class Fk extends Rl{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,s,n){const r=this.annotationStorage;for(const o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=s),r.setValue(o.id,{[n]:s})}render(){var n,r;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const o=t.getValue(e,{value:this.data.fieldValue});let a=o.value||"";const c=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;c&&a.length>c&&(a=a.slice(0,c));let h=o.formattedValue||((n=this.data.textContent)==null?void 0:n.join(`
`))||null;h&&this.data.comb&&(h=h.replaceAll(/\s+/g,""));const u={userValue:a,formattedValue:h,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=h??a,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",h??a),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),Tl.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=Zd,this._setRequired(s,this.data.required),c&&(s.maxLength=c),s.addEventListener("input",p=>{t.setValue(e,{value:p.target.value}),this.setPropertyOnSiblings(s,"value",p.target.value,"value"),u.formattedValue=null}),s.addEventListener("resetform",p=>{const g=this.data.defaultFieldValue??"";s.value=u.userValue=g,u.formattedValue=null});let f=p=>{const{formattedValue:g}=u;g!=null&&(p.target.value=g),p.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",g=>{var v;if(u.focused)return;const{target:_}=g;u.userValue&&(_.value=u.userValue),u.lastCommittedValue=_.value,u.commitKey=1,(v=this.data.actions)!=null&&v.Focus||(u.focused=!0)}),s.addEventListener("updatefromsandbox",g=>{this.showElementAndHideCanvas(g.target);const _={value(v){u.userValue=v.detail.value??"",t.setValue(e,{value:u.userValue.toString()}),v.target.value=u.userValue},formattedValue(v){const{formattedValue:E}=v.detail;u.formattedValue=E,E!=null&&v.target!==document.activeElement&&(v.target.value=E),t.setValue(e,{formattedValue:E})},selRange(v){v.target.setSelectionRange(...v.detail.selRange)},charLimit:v=>{var T;const{charLimit:E}=v.detail,{target:S}=v;if(E===0){S.removeAttribute("maxLength");return}S.setAttribute("maxLength",E);let C=u.userValue;!C||C.length<=E||(C=C.slice(0,E),S.value=u.userValue=C,t.setValue(e,{value:C}),(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:C,willCommit:!0,commitKey:1,selStart:S.selectionStart,selEnd:S.selectionEnd}}))}};this._dispatchEventFromSandbox(_,g)}),s.addEventListener("keydown",g=>{var E;u.commitKey=1;let _=-1;if(g.key==="Escape"?_=0:g.key==="Enter"&&!this.data.multiLine?_=2:g.key==="Tab"&&(u.commitKey=3),_===-1)return;const{value:v}=g.target;u.lastCommittedValue!==v&&(u.lastCommittedValue=v,u.userValue=v,(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:v,willCommit:!0,commitKey:_,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}))});const p=f;f=null,s.addEventListener("blur",g=>{var v,E;if(!u.focused||!g.relatedTarget)return;(v=this.data.actions)!=null&&v.Blur||(u.focused=!1);const{value:_}=g.target;u.userValue=_,u.lastCommittedValue!==_&&((E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:_,willCommit:!0,commitKey:u.commitKey,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}})),p(g)}),(r=this.data.actions)!=null&&r.Keystroke&&s.addEventListener("beforeinput",g=>{var I;u.lastCommittedValue=null;const{data:_,target:v}=g,{value:E,selectionStart:S,selectionEnd:C}=v;let T=S,R=C;switch(g.inputType){case"deleteWordBackward":{const F=E.substring(0,S).match(/\w*[^\w]*$/);F&&(T-=F[0].length);break}case"deleteWordForward":{const F=E.substring(S).match(/^[^\w]*\w*/);F&&(R+=F[0].length);break}case"deleteContentBackward":S===C&&(T-=1);break;case"deleteContentForward":S===C&&(R+=1);break}g.preventDefault(),(I=this.linkService.eventBus)==null||I.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:E,change:_||"",willCommit:!1,selStart:T,selEnd:R}})}),this._setEventListeners(s,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],g=>g.target.value)}if(f&&s.addEventListener("blur",f),this.data.comb){const g=(this.data.rect[2]-this.data.rect[0])/c;s.classList.add("comb"),s.style.letterSpacing=`calc(${g}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class $k extends Rl{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class Bk extends Rl{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,s=e.id;let n=t.getValue(s,{value:e.exportValue===e.fieldValue}).value;typeof n=="string"&&(n=n!=="Off",t.setValue(s,{value:n})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return Tl.add(r),r.setAttribute("data-element-id",s),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,n&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=Zd,r.addEventListener("change",o=>{const{name:a,checked:c}=o.target;for(const h of this._getElementsByName(a,s)){const u=c&&h.exportValue===e.exportValue;h.domElement&&(h.domElement.checked=u),t.setValue(h.id,{value:u})}t.setValue(s,{value:c})}),r.addEventListener("resetform",o=>{const a=e.defaultFieldValue||"Off";o.target.checked=a===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{const a={value(c){c.target.checked=c.detail.value!=="Off",t.setValue(s,{value:c.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class wE extends Rl{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,s=e.id;let n=t.getValue(s,{value:e.fieldValue===e.buttonValue}).value;if(typeof n=="string"&&(n=n!==e.buttonValue,t.setValue(s,{value:n})),n)for(const o of this._getElementsByName(e.fieldName,s))t.setValue(o.id,{value:!1});const r=document.createElement("input");if(Tl.add(r),r.setAttribute("data-element-id",s),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,n&&r.setAttribute("checked",!0),r.tabIndex=Zd,r.addEventListener("change",o=>{const{name:a,checked:c}=o.target;for(const h of this._getElementsByName(a,s))t.setValue(h.id,{value:!1});t.setValue(s,{value:c})}),r.addEventListener("resetform",o=>{const a=e.defaultFieldValue;o.target.checked=a!=null&&a===e.buttonValue}),this.enableScripting&&this.hasJSActions){const o=e.buttonValue;r.addEventListener("updatefromsandbox",a=>{const c={value:h=>{const u=o===h.detail.value;for(const f of this._getElementsByName(h.target.name)){const p=u&&f.id===s;f.domElement&&(f.domElement.checked=p),t.setValue(f.id,{value:p})}}};this._dispatchEventFromSandbox(c,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Hk extends vE{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),t}}class jk extends Rl{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,s=t.getValue(e,{value:this.data.fieldValue}),n=document.createElement("select");Tl.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,this._setRequired(n,this.data.required),n.name=this.data.fieldName,n.tabIndex=Zd;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(n.size=this.data.options.length,this.data.multiSelect&&(n.multiple=!0)),n.addEventListener("resetform",u=>{const f=this.data.defaultFieldValue;for(const p of n.options)p.selected=p.value===f});for(const u of this.data.options){const f=document.createElement("option");f.textContent=u.displayValue,f.value=u.exportValue,s.value.includes(u.exportValue)&&(f.setAttribute("selected",!0),r=!1),n.append(f)}let o=null;if(r){const u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),n.prepend(u),o=()=>{u.remove(),n.removeEventListener("input",o),o=null},n.addEventListener("input",o)}const a=u=>{const f=u?"value":"textContent",{options:p,multiple:g}=n;return g?Array.prototype.filter.call(p,_=>_.selected).map(_=>_[f]):p.selectedIndex===-1?null:p[p.selectedIndex][f]};let c=a(!1);const h=u=>{const f=u.target.options;return Array.prototype.map.call(f,p=>({displayValue:p.textContent,exportValue:p.value}))};return this.enableScripting&&this.hasJSActions?(n.addEventListener("updatefromsandbox",u=>{const f={value(p){o==null||o();const g=p.detail.value,_=new Set(Array.isArray(g)?g:[g]);for(const v of n.options)v.selected=_.has(v.value);t.setValue(e,{value:a(!0)}),c=a(!1)},multipleSelection(p){n.multiple=!0},remove(p){const g=n.options,_=p.detail.remove;g[_].selected=!1,n.remove(_),g.length>0&&Array.prototype.findIndex.call(g,E=>E.selected)===-1&&(g[0].selected=!0),t.setValue(e,{value:a(!0),items:h(p)}),c=a(!1)},clear(p){for(;n.length!==0;)n.remove(0);t.setValue(e,{value:null,items:[]}),c=a(!1)},insert(p){const{index:g,displayValue:_,exportValue:v}=p.detail.insert,E=n.children[g],S=document.createElement("option");S.textContent=_,S.value=v,E?E.before(S):n.append(S),t.setValue(e,{value:a(!0),items:h(p)}),c=a(!1)},items(p){const{items:g}=p.detail;for(;n.length!==0;)n.remove(0);for(const _ of g){const{displayValue:v,exportValue:E}=_,S=document.createElement("option");S.textContent=v,S.value=E,n.append(S)}n.options.length>0&&(n.options[0].selected=!0),t.setValue(e,{value:a(!0),items:h(p)}),c=a(!1)},indices(p){const g=new Set(p.detail.indices);for(const _ of p.target.options)_.selected=g.has(_.index);t.setValue(e,{value:a(!0)}),c=a(!1)},editable(p){p.target.disabled=!p.detail.editable}};this._dispatchEventFromSandbox(f,u)}),n.addEventListener("input",u=>{var g;const f=a(!0),p=a(!1);t.setValue(e,{value:f}),u.preventDefault(),(g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:c,change:p,changeEx:f,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(n,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):n.addEventListener("input",function(u){t.setValue(e,{value:a(!0)})}),this.data.combo&&this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class vb extends qe{constructor(t){const{data:e,elements:s}=t;super(t,{isRenderable:qe._hasPopupData(e)}),this.elements=s,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new Vk({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const s of this.elements)s.popup=t,s.container.ariaHasPopup="dialog",e.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(s=>`${wv}${s}`).join(",")),this.container}}var Wc,Gp,Xp,Gc,Xc,Fe,wr,Kc,cd,hd,Yc,Ar,Zi,Er,ud,Sr,dd,Ya,Qa,me,Jf,_b,AE,EE,SE,xE,Zf,tp,yb;class Vk{constructor({container:t,color:e,elements:s,titleObj:n,modificationDate:r,contentsObj:o,richText:a,parent:c,rect:h,parentRect:u,open:f}){w(this,me);w(this,Wc,A(this,me,SE).bind(this));w(this,Gp,A(this,me,yb).bind(this));w(this,Xp,A(this,me,tp).bind(this));w(this,Gc,A(this,me,Zf).bind(this));w(this,Xc,null);w(this,Fe,null);w(this,wr,null);w(this,Kc,null);w(this,cd,null);w(this,hd,null);w(this,Yc,null);w(this,Ar,!1);w(this,Zi,null);w(this,Er,null);w(this,ud,null);w(this,Sr,null);w(this,dd,null);w(this,Ya,null);w(this,Qa,!1);var p;b(this,Fe,t),b(this,dd,n),b(this,wr,o),b(this,Sr,a),b(this,hd,c),b(this,Xc,e),b(this,ud,h),b(this,Yc,u),b(this,cd,s),b(this,Kc,Sv.toDateObject(r)),this.trigger=s.flatMap(g=>g.getElementsToTriggerPopup());for(const g of this.trigger)g.addEventListener("click",l(this,Gc)),g.addEventListener("mouseenter",l(this,Xp)),g.addEventListener("mouseleave",l(this,Gp)),g.classList.add("popupTriggerArea");for(const g of s)(p=g.container)==null||p.addEventListener("keydown",l(this,Wc));l(this,Fe).hidden=!0,f&&A(this,me,Zf).call(this)}render(){if(l(this,Zi))return;const t=b(this,Zi,document.createElement("div"));if(t.className="popup",l(this,Xc)){const r=t.style.outlineColor=_t.makeHexColor(...l(this,Xc));t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`}const e=document.createElement("span");e.className="header";const s=document.createElement("h1");if(e.append(s),{dir:s.dir,str:s.textContent}=l(this,dd),t.append(e),l(this,Kc)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:l(this,Kc).valueOf()})),e.append(r)}const n=l(this,me,Jf);if(n)bE.render({xfaHtml:n,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(l(this,wr));t.append(r)}l(this,Fe).append(t)}_formatContents({str:t,dir:e}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=e;const n=t.split(/(?:\r\n?|\n)/);for(let r=0,o=n.length;r<o;++r){const a=n[r];s.append(document.createTextNode(a)),r<o-1&&s.append(document.createElement("br"))}return s}updateEdited({rect:t,popupContent:e}){var s;l(this,Ya)||b(this,Ya,{contentsObj:l(this,wr),richText:l(this,Sr)}),t&&b(this,Er,null),e&&(b(this,Sr,A(this,me,EE).call(this,e)),b(this,wr,null)),(s=l(this,Zi))==null||s.remove(),b(this,Zi,null)}resetEdited(){var t;l(this,Ya)&&({contentsObj:Bs(this,wr)._,richText:Bs(this,Sr)._}=l(this,Ya),b(this,Ya,null),(t=l(this,Zi))==null||t.remove(),b(this,Zi,null),b(this,Er,null))}forceHide(){b(this,Qa,this.isVisible),l(this,Qa)&&(l(this,Fe).hidden=!0)}maybeShow(){l(this,Qa)&&(l(this,Zi)||A(this,me,tp).call(this),b(this,Qa,!1),l(this,Fe).hidden=!1)}get isVisible(){return l(this,Fe).hidden===!1}}Wc=new WeakMap,Gp=new WeakMap,Xp=new WeakMap,Gc=new WeakMap,Xc=new WeakMap,Fe=new WeakMap,wr=new WeakMap,Kc=new WeakMap,cd=new WeakMap,hd=new WeakMap,Yc=new WeakMap,Ar=new WeakMap,Zi=new WeakMap,Er=new WeakMap,ud=new WeakMap,Sr=new WeakMap,dd=new WeakMap,Ya=new WeakMap,Qa=new WeakMap,me=new WeakSet,Jf=function(){const t=l(this,Sr),e=l(this,wr);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&l(this,Sr).html||null},_b=function(){var t,e,s;return((s=(e=(t=l(this,me,Jf))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:s.fontSize)||0},AE=function(){var t,e,s;return((s=(e=(t=l(this,me,Jf))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:s.color)||null},EE=function(t){const e=[],s={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},n={style:{color:l(this,me,AE),fontSize:l(this,me,_b)?`calc(${l(this,me,_b)}px * var(--total-scale-factor))`:""}};for(const r of t.split(`
`))e.push({name:"span",value:r,attributes:n});return s},SE=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&l(this,Ar))&&A(this,me,Zf).call(this)},xE=function(){if(l(this,Er)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:s,pageX:n,pageY:r}}}=l(this,hd);let o=!!l(this,Yc),a=o?l(this,Yc):l(this,ud);for(const _ of l(this,cd))if(!a||_t.intersect(_.data.rect,a)!==null){a=_.data.rect,o=!0;break}const c=_t.normalizeRect([a[0],t[3]-a[1]+t[1],a[2],t[3]-a[3]+t[1]]),u=o?a[2]-a[0]+5:0,f=c[0]+u,p=c[1];b(this,Er,[100*(f-n)/e,100*(p-r)/s]);const{style:g}=l(this,Fe);g.left=`${l(this,Er)[0]}%`,g.top=`${l(this,Er)[1]}%`},Zf=function(){b(this,Ar,!l(this,Ar)),l(this,Ar)?(A(this,me,tp).call(this),l(this,Fe).addEventListener("click",l(this,Gc)),l(this,Fe).addEventListener("keydown",l(this,Wc))):(A(this,me,yb).call(this),l(this,Fe).removeEventListener("click",l(this,Gc)),l(this,Fe).removeEventListener("keydown",l(this,Wc)))},tp=function(){l(this,Zi)||this.render(),this.isVisible?l(this,Ar)&&l(this,Fe).classList.add("focused"):(A(this,me,xE).call(this),l(this,Fe).hidden=!1,l(this,Fe).style.zIndex=parseInt(l(this,Fe).style.zIndex)+1e3)},yb=function(){l(this,Fe).classList.remove("focused"),!(l(this,Ar)||!this.isVisible)&&(l(this,Fe).hidden=!0,l(this,Fe).style.zIndex=parseInt(l(this,Fe).style.zIndex)-1e3)};class CE extends qe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Lt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const s=document.createElement("span");s.textContent=e,t.append(s)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var fd;class Uk extends qe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,fd,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:s,height:n}=this,r=this.svgFactory.create(s,n,!0),o=b(this,fd,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),o.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),o.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),o.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),o.setAttribute("stroke-width",e.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,fd)}addHighlightArea(){this.container.classList.add("highlightArea")}}fd=new WeakMap;var pd;class zk extends qe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,pd,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:s,height:n}=this,r=this.svgFactory.create(s,n,!0),o=e.borderStyle.width,a=b(this,pd,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",s-o),a.setAttribute("height",n-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,pd)}addHighlightArea(){this.container.classList.add("highlightArea")}}pd=new WeakMap;var gd;class qk extends qe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,gd,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:s,height:n}=this,r=this.svgFactory.create(s,n,!0),o=e.borderStyle.width,a=b(this,gd,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",s/2),a.setAttribute("cy",n/2),a.setAttribute("rx",s/2-o/2),a.setAttribute("ry",n/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,gd)}addHighlightArea(){this.container.classList.add("highlightArea")}}gd=new WeakMap;var md;class TE extends qe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,md,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:s,borderStyle:n,popupRef:r},width:o,height:a}=this;if(!s)return this.container;const c=this.svgFactory.create(o,a,!0);let h=[];for(let f=0,p=s.length;f<p;f+=2){const g=s[f]-e[0],_=e[3]-s[f+1];h.push(`${g},${_}`)}h=h.join(" ");const u=b(this,md,this.svgFactory.createElement(this.svgElementName));return u.setAttribute("points",h),u.setAttribute("stroke-width",n.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),c.append(u),this.container.append(c),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,md)}addHighlightArea(){this.container.classList.add("highlightArea")}}md=new WeakMap;class Wk extends TE{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class Gk extends qe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var bd,Ja,vd,wb;class kv extends qe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,vd);w(this,bd,null);w(this,Ja,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Lt.HIGHLIGHT:Lt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:s,inkLists:n,borderStyle:r,popupRef:o}}=this,{transform:a,width:c,height:h}=A(this,vd,wb).call(this,s,e),u=this.svgFactory.create(c,h,!0),f=b(this,bd,this.svgFactory.createElement("svg:g"));u.append(f),f.setAttribute("stroke-width",r.width||1),f.setAttribute("stroke-linecap","round"),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-miterlimit",10),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),f.setAttribute("transform",a);for(let p=0,g=n.length;p<g;p++){const _=this.svgFactory.createElement(this.svgElementName);l(this,Ja).push(_),_.setAttribute("points",n[p].join(",")),f.append(_)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(u),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:s,points:n,rect:r}=e,o=l(this,bd);if(s>=0&&o.setAttribute("stroke-width",s||1),n)for(let a=0,c=l(this,Ja).length;a<c;a++)l(this,Ja)[a].setAttribute("points",n[a].join(","));if(r){const{transform:a,width:c,height:h}=A(this,vd,wb).call(this,this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${c} ${h}`),o.setAttribute("transform",a)}}getElementsToTriggerPopup(){return l(this,Ja)}addHighlightArea(){this.container.classList.add("highlightArea")}}bd=new WeakMap,Ja=new WeakMap,vd=new WeakSet,wb=function(e,s){switch(e){case 90:return{transform:`rotate(90) translate(${-s[0]},${s[1]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};case 180:return{transform:`rotate(180) translate(${-s[2]},${s[1]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]};case 270:return{transform:`rotate(270) translate(${-s[2]},${s[3]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};default:return{transform:`translate(${-s[0]},${s[3]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]}}};class PE extends qe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Lt.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class Xk extends qe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Kk extends qe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class Yk extends qe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class RE extends qe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Lt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var _d,yd,Ab;class Qk extends qe{constructor(e){var n;super(e,{isRenderable:!0});w(this,yd);w(this,_d,null);const{file:s}=this.data;this.filename=s.filename,this.content=s.content,(n=this.linkService.eventBus)==null||n.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:s}=this;let n;s.hasAppearance||s.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),n.addEventListener("dblclick",A(this,yd,Ab).bind(this)),b(this,_d,n);const{isMac:r}=Es.platform;return e.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&A(this,yd,Ab).call(this)}),!s.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),e.append(n),e}getElementsToTriggerPopup(){return l(this,_d)}addHighlightArea(){this.container.classList.add("highlightArea")}}_d=new WeakMap,yd=new WeakSet,Ab=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var wd,Za,Ao,Ad,Go,Sb,xb;const $v=class $v{constructor({div:t,accessibilityManager:e,annotationCanvasMap:s,annotationEditorUIManager:n,page:r,viewport:o,structTreeLayer:a}){w(this,Go);w(this,wd,null);w(this,Za,null);w(this,Ao,new Map);w(this,Ad,null);this.div=t,b(this,wd,e),b(this,Za,s),b(this,Ad,a||null),this.page=r,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=n}hasEditableAnnotations(){return l(this,Ao).size>0}async render(t){var o;const{annotations:e}=t,s=this.div;xl(s,this.viewport);const n=new Map,r={data:null,layer:s,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new kp,annotationStorage:t.annotationStorage||new Tv,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const a of e){if(a.noHTML)continue;const c=a.annotationType===Ge.POPUP;if(c){const f=n.get(a.id);if(!f)continue;r.elements=f}else if(a.rect[2]===a.rect[0]||a.rect[3]===a.rect[1])continue;r.data=a;const h=Mw.create(r);if(!h.isRenderable)continue;if(!c&&a.popupRef){const f=n.get(a.popupRef);f?f.push(h):n.set(a.popupRef,[h])}const u=h.render();a.hidden&&(u.style.visibility="hidden"),await A(this,Go,Sb).call(this,u,a.id),h._isEditable&&(l(this,Ao).set(h.data.id,h),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(h))}A(this,Go,xb).call(this)}async addLinkAnnotations(t,e){const s={data:null,layer:this.div,linkService:e,svgFactory:new kp,parent:this};for(const n of t){n.borderStyle||(n.borderStyle=$v._defaultBorderStyle),s.data=n;const r=Mw.create(s);if(!r.isRenderable)continue;const o=r.render();await A(this,Go,Sb).call(this,o,n.id)}}update({viewport:t}){const e=this.div;this.viewport=t,xl(e,{rotation:t.rotation}),A(this,Go,xb).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(l(this,Ao).values())}getEditableAnnotation(t){return l(this,Ao).get(t)}static get _defaultBorderStyle(){return Wt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Kl.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};wd=new WeakMap,Za=new WeakMap,Ao=new WeakMap,Ad=new WeakMap,Go=new WeakSet,Sb=async function(t,e){var o,a;const s=t.firstChild||t,n=s.id=`${wv}${e}`,r=await((o=l(this,Ad))==null?void 0:o.getAriaAttributes(n));if(r)for(const[c,h]of r)s.setAttribute(c,h);this.div.append(t),(a=l(this,wd))==null||a.moveElementInDOM(this.div,t,s,!1)},xb=function(){var e;if(!l(this,Za))return;const t=this.div;for(const[s,n]of l(this,Za)){const r=t.querySelector(`[data-annotation-id="${s}"]`);if(!r)continue;n.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(n):o.classList.contains("annotationContent")?o.after(n):o.before(n):r.append(n);const a=l(this,Ao).get(s);a&&(a._hasNoCanvas?((e=this._annotationEditorUIManager)==null||e.setMissingCanvas(s,r.id,n),a._hasNoCanvas=!1):a.canvas=n)}l(this,Za).clear()};let Eb=$v;const Rf=/\r\n?|\n/g;var tn,fi,Ed,tl,pi,Ye,kE,IE,LE,ep,$r,sp,ip,ME,Tb,DE;const we=class we extends Se{constructor(e){super({...e,name:"freeTextEditor"});w(this,Ye);w(this,tn);w(this,fi,"");w(this,Ed,`${this.id}-editor`);w(this,tl,null);w(this,pi);b(this,tn,e.color||we._defaultColor||Se._defaultLineColor),b(this,pi,e.fontSize||we._defaultFontSize)}static get _keyboardManager(){const e=we.prototype,s=o=>o.isEmpty(),n=Cl.TRANSLATE_SMALL,r=Cl.TRANSLATE_BIG;return Wt(this,"_keyboardManager",new Qd([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:s}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[n,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:s}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:s}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,n],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:s}]]))}static initialize(e,s){Se.initialize(e,s);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,s){switch(e){case Yt.FREETEXT_SIZE:we._defaultFontSize=s;break;case Yt.FREETEXT_COLOR:we._defaultColor=s;break}}updateParams(e,s){switch(e){case Yt.FREETEXT_SIZE:A(this,Ye,kE).call(this,s);break;case Yt.FREETEXT_COLOR:A(this,Ye,IE).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[Yt.FREETEXT_SIZE,we._defaultFontSize],[Yt.FREETEXT_COLOR,we._defaultColor||Se._defaultLineColor]]}get propertiesToUpdate(){return[[Yt.FREETEXT_SIZE,l(this,pi)],[Yt.FREETEXT_COLOR,l(this,tn)]]}_translateEmpty(e,s){this._uiManager.translateSelectedEditors(e,s,!0)}getInitialTranslation(){const e=this.parentScale;return[-we._internalPadding*e,-(we._internalPadding+l(this,pi))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Lt.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),b(this,tl,new AbortController);const e=this._uiManager.combinedSignal(l(this,tl));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){var e;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",l(this,Ed)),this._isDraggable=!0,(e=l(this,tl))==null||e.abort(),b(this,tl,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var s;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(s=this._initialOptions)!=null&&s.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=l(this,fi),s=b(this,fi,A(this,Ye,LE).call(this).trimEnd());if(e===s)return;const n=r=>{if(b(this,fi,r),!r){this.remove();return}A(this,Ye,ip).call(this),this._uiManager.rebuild(this),A(this,Ye,ep).call(this)};this.addCommands({cmd:()=>{n(s)},undo:()=>{n(e)},mustExec:!1}),A(this,Ye,ep).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){we._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,s;(this._isCopy||this.annotationElementId)&&(e=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",l(this,Ed)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${l(this,pi)}px * var(--total-scale-factor))`,n.color=l(this,tn),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Cv(this,this.div,["dblclick","keydown"]),this._isCopy||this.annotationElementId){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[c,h]=this.getInitialTranslation();[c,h]=this.pageTranslationToScreen(c,h);const[u,f]=this.pageDimensions,[p,g]=this.pageTranslation;let _,v;switch(this.rotation){case 0:_=e+(a[0]-p)/u,v=s+this.height-(a[1]-g)/f;break;case 90:_=e+(a[0]-p)/u,v=s-(a[1]-g)/f,[c,h]=[h,-c];break;case 180:_=e-this.width+(a[0]-p)/u,v=s-(a[1]-g)/f,[c,h]=[-c,-h];break;case 270:_=e+(a[0]-p-this.height*f)/u,v=s+(a[1]-g-this.width*u)/f,[c,h]=[-h,c];break}this.setAt(_*r,v*o,c,h)}else this._moveAfterPaste(e,s);A(this,Ye,ip).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var _,v,E;const s=e.clipboardData||window.clipboardData,{types:n}=s;if(n.length===1&&n[0]==="text/plain")return;e.preventDefault();const r=A(_=we,$r,Tb).call(_,s.getData("text")||"").replaceAll(Rf,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!r.includes(`
`)){a.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:h}=a,u=[],f=[];if(c.nodeType===Node.TEXT_NODE){const S=c.parentElement;if(f.push(c.nodeValue.slice(h).replaceAll(Rf,"")),S!==this.editorDiv){let C=u;for(const T of this.editorDiv.childNodes){if(T===S){C=f;continue}C.push(A(v=we,$r,sp).call(v,T))}}u.push(c.nodeValue.slice(0,h).replaceAll(Rf,""))}else if(c===this.editorDiv){let S=u,C=0;for(const T of this.editorDiv.childNodes)C++===h&&(S=f),S.push(A(E=we,$r,sp).call(E,T))}b(this,fi,`${u.join(`
`)}${r}${f.join(`
`)}`),A(this,Ye,ip).call(this);const p=new Range;let g=Math.sumPrecise(u.map(S=>S.length));for(const{firstChild:S}of this.editorDiv.childNodes)if(S.nodeType===Node.TEXT_NODE){const C=S.nodeValue.length;if(g<=C){p.setStart(S,g),p.setEnd(S,g);break}g-=C}o.removeAllRanges(),o.addRange(p)}get contentDiv(){return this.editorDiv}static async deserialize(e,s,n){var a;let r=null;if(e instanceof CE){const{data:{defaultAppearanceData:{fontSize:c,fontColor:h},rect:u,rotation:f,id:p,popupRef:g},textContent:_,textPosition:v,parent:{page:{pageNumber:E}}}=e;if(!_||_.length===0)return null;r=e={annotationType:Lt.FREETEXT,color:Array.from(h),fontSize:c,value:_.join(`
`),position:v,pageIndex:E-1,rect:u.slice(0),rotation:f,id:p,deleted:!1,popupRef:g}}const o=await super.deserialize(e,s,n);return b(o,pi,e.fontSize),b(o,tn,_t.makeHexColor(...e.color)),b(o,fi,A(a=we,$r,Tb).call(a,e.value)),o.annotationElementId=e.id||null,o._initialData=r,o}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=we._internalPadding*this.parentScale,n=this.getRect(s,s),r=Se._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:l(this,tn)),o={annotationType:Lt.FREETEXT,color:r,fontSize:l(this,pi),value:A(this,Ye,ME).call(this),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(o.isCopy=!0,o):this.annotationElementId&&!A(this,Ye,DE).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(e){const s=super.renderAnnotationElement(e);if(this.deleted)return s;const{style:n}=s;n.fontSize=`calc(${l(this,pi)}px * var(--total-scale-factor))`,n.color=l(this,tn),s.replaceChildren();for(const o of l(this,fi).split(`
`)){const a=document.createElement("div");a.append(o?document.createTextNode(o):document.createElement("br")),s.append(a)}const r=we._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(r,r),popupContent:l(this,fi)}),s}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};tn=new WeakMap,fi=new WeakMap,Ed=new WeakMap,tl=new WeakMap,pi=new WeakMap,Ye=new WeakSet,kE=function(e){const s=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-l(this,pi))*this.parentScale),b(this,pi,r),A(this,Ye,ep).call(this)},n=l(this,pi);this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Yt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},IE=function(e){const s=r=>{b(this,tn,this.editorDiv.style.color=r)},n=l(this,tn);this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Yt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},LE=function(){var n;const e=[];this.editorDiv.normalize();let s=null;for(const r of this.editorDiv.childNodes)(s==null?void 0:s.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(e.push(A(n=we,$r,sp).call(n,r)),s=r);return e.join(`
`)},ep=function(){const[e,s]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,a=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),n=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=n.width/e,this.height=n.height/s):(this.width=n.height/e,this.height=n.width/s),this.fixAndSetPosition()},$r=new WeakSet,sp=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Rf,"")},ip=function(){if(this.editorDiv.replaceChildren(),!!l(this,fi))for(const e of l(this,fi).split(`
`)){const s=document.createElement("div");s.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(s)}},ME=function(){return l(this,fi).replaceAll(" "," ")},Tb=function(e){return e.replaceAll(" "," ")},DE=function(e){const{value:s,fontSize:n,color:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||e.value!==s||e.fontSize!==n||e.color.some((a,c)=>a!==r[c])||e.pageIndex!==o},w(we,$r),Z(we,"_freeTextDefaultContent",""),Z(we,"_internalPadding",0),Z(we,"_defaultColor",null),Z(we,"_defaultFontSize",10),Z(we,"_type","freetext"),Z(we,"_editorType",Lt.FREETEXT);let Cb=we;class dt{toSVGPath(){ge("Abstract method `toSVGPath` must be implemented.")}get box(){ge("Abstract getter `box` must be implemented.")}serialize(t,e){ge("Abstract method `serialize` must be implemented.")}static _rescale(t,e,s,n,r,o){o||(o=new Float32Array(t.length));for(let a=0,c=t.length;a<c;a+=2)o[a]=e+t[a]*n,o[a+1]=s+t[a+1]*r;return o}static _rescaleAndSwap(t,e,s,n,r,o){o||(o=new Float32Array(t.length));for(let a=0,c=t.length;a<c;a+=2)o[a]=e+t[a+1]*n,o[a+1]=s+t[a]*r;return o}static _translate(t,e,s,n){n||(n=new Float32Array(t.length));for(let r=0,o=t.length;r<o;r+=2)n[r]=e+t[r],n[r+1]=s+t[r+1];return n}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,s,n,r){switch(r){case 90:return[1-e/s,t/n];case 180:return[1-t/s,1-e/n];case 270:return[e/s,1-t/n];default:return[t/s,e/n]}}static _normalizePagePoint(t,e,s){switch(s){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,s,n,r,o){return[(t+5*s)/6,(e+5*n)/6,(5*s+r)/6,(5*n+o)/6,(s+r)/2,(n+o)/2]}}Z(dt,"PRECISION",1e-4);var gi,en,Qc,Jc,On,Ut,el,sl,Sd,xd,Zc,th,Eo,Cd,Kp,Yp,ns,Kh,OE,NE,FE,$E,BE,HE;const nr=class nr{constructor({x:t,y:e},s,n,r,o,a=0){w(this,ns);w(this,gi);w(this,en,[]);w(this,Qc);w(this,Jc);w(this,On,[]);w(this,Ut,new Float32Array(18));w(this,el);w(this,sl);w(this,Sd);w(this,xd);w(this,Zc);w(this,th);w(this,Eo,[]);b(this,gi,s),b(this,th,r*n),b(this,Jc,o),l(this,Ut).set([NaN,NaN,NaN,NaN,t,e],6),b(this,Qc,a),b(this,xd,l(nr,Cd)*n),b(this,Sd,l(nr,Yp)*n),b(this,Zc,n),l(this,Eo).push(t,e)}isEmpty(){return isNaN(l(this,Ut)[8])}add({x:t,y:e}){var U;b(this,el,t),b(this,sl,e);const[s,n,r,o]=l(this,gi);let[a,c,h,u]=l(this,Ut).subarray(8,12);const f=t-h,p=e-u,g=Math.hypot(f,p);if(g<l(this,Sd))return!1;const _=g-l(this,xd),v=_/g,E=v*f,S=v*p;let C=a,T=c;a=h,c=u,h+=E,u+=S,(U=l(this,Eo))==null||U.push(t,e);const R=-S/_,I=E/_,F=R*l(this,th),N=I*l(this,th);return l(this,Ut).set(l(this,Ut).subarray(2,8),0),l(this,Ut).set([h+F,u+N],4),l(this,Ut).set(l(this,Ut).subarray(14,18),12),l(this,Ut).set([h-F,u-N],16),isNaN(l(this,Ut)[6])?(l(this,On).length===0&&(l(this,Ut).set([a+F,c+N],2),l(this,On).push(NaN,NaN,NaN,NaN,(a+F-s)/r,(c+N-n)/o),l(this,Ut).set([a-F,c-N],14),l(this,en).push(NaN,NaN,NaN,NaN,(a-F-s)/r,(c-N-n)/o)),l(this,Ut).set([C,T,a,c,h,u],6),!this.isEmpty()):(l(this,Ut).set([C,T,a,c,h,u],6),Math.abs(Math.atan2(T-c,C-a)-Math.atan2(S,E))<Math.PI/2?([a,c,h,u]=l(this,Ut).subarray(2,6),l(this,On).push(NaN,NaN,NaN,NaN,((a+h)/2-s)/r,((c+u)/2-n)/o),[a,c,C,T]=l(this,Ut).subarray(14,18),l(this,en).push(NaN,NaN,NaN,NaN,((C+a)/2-s)/r,((T+c)/2-n)/o),!0):([C,T,a,c,h,u]=l(this,Ut).subarray(0,6),l(this,On).push(((C+5*a)/6-s)/r,((T+5*c)/6-n)/o,((5*a+h)/6-s)/r,((5*c+u)/6-n)/o,((a+h)/2-s)/r,((c+u)/2-n)/o),[h,u,a,c,C,T]=l(this,Ut).subarray(12,18),l(this,en).push(((C+5*a)/6-s)/r,((T+5*c)/6-n)/o,((5*a+h)/6-s)/r,((5*c+u)/6-n)/o,((a+h)/2-s)/r,((c+u)/2-n)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const t=l(this,On),e=l(this,en);if(isNaN(l(this,Ut)[6])&&!this.isEmpty())return A(this,ns,OE).call(this);const s=[];s.push(`M${t[4]} ${t[5]}`);for(let n=6;n<t.length;n+=6)isNaN(t[n])?s.push(`L${t[n+4]} ${t[n+5]}`):s.push(`C${t[n]} ${t[n+1]} ${t[n+2]} ${t[n+3]} ${t[n+4]} ${t[n+5]}`);A(this,ns,FE).call(this,s);for(let n=e.length-6;n>=6;n-=6)isNaN(e[n])?s.push(`L${e[n+4]} ${e[n+5]}`):s.push(`C${e[n]} ${e[n+1]} ${e[n+2]} ${e[n+3]} ${e[n+4]} ${e[n+5]}`);return A(this,ns,NE).call(this,s),s.join(" ")}newFreeDrawOutline(t,e,s,n,r,o){return new jE(t,e,s,n,r,o)}getOutlines(){var f;const t=l(this,On),e=l(this,en),s=l(this,Ut),[n,r,o,a]=l(this,gi),c=new Float32Array((((f=l(this,Eo))==null?void 0:f.length)??0)+2);for(let p=0,g=c.length-2;p<g;p+=2)c[p]=(l(this,Eo)[p]-n)/o,c[p+1]=(l(this,Eo)[p+1]-r)/a;if(c[c.length-2]=(l(this,el)-n)/o,c[c.length-1]=(l(this,sl)-r)/a,isNaN(s[6])&&!this.isEmpty())return A(this,ns,$E).call(this,c);const h=new Float32Array(l(this,On).length+24+l(this,en).length);let u=t.length;for(let p=0;p<u;p+=2){if(isNaN(t[p])){h[p]=h[p+1]=NaN;continue}h[p]=t[p],h[p+1]=t[p+1]}u=A(this,ns,HE).call(this,h,u);for(let p=e.length-6;p>=6;p-=6)for(let g=0;g<6;g+=2){if(isNaN(e[p+g])){h[u]=h[u+1]=NaN,u+=2;continue}h[u]=e[p+g],h[u+1]=e[p+g+1],u+=2}return A(this,ns,BE).call(this,h,u),this.newFreeDrawOutline(h,c,l(this,gi),l(this,Zc),l(this,Qc),l(this,Jc))}};gi=new WeakMap,en=new WeakMap,Qc=new WeakMap,Jc=new WeakMap,On=new WeakMap,Ut=new WeakMap,el=new WeakMap,sl=new WeakMap,Sd=new WeakMap,xd=new WeakMap,Zc=new WeakMap,th=new WeakMap,Eo=new WeakMap,Cd=new WeakMap,Kp=new WeakMap,Yp=new WeakMap,ns=new WeakSet,Kh=function(){const t=l(this,Ut).subarray(4,6),e=l(this,Ut).subarray(16,18),[s,n,r,o]=l(this,gi);return[(l(this,el)+(t[0]-e[0])/2-s)/r,(l(this,sl)+(t[1]-e[1])/2-n)/o,(l(this,el)+(e[0]-t[0])/2-s)/r,(l(this,sl)+(e[1]-t[1])/2-n)/o]},OE=function(){const[t,e,s,n]=l(this,gi),[r,o,a,c]=A(this,ns,Kh).call(this);return`M${(l(this,Ut)[2]-t)/s} ${(l(this,Ut)[3]-e)/n} L${(l(this,Ut)[4]-t)/s} ${(l(this,Ut)[5]-e)/n} L${r} ${o} L${a} ${c} L${(l(this,Ut)[16]-t)/s} ${(l(this,Ut)[17]-e)/n} L${(l(this,Ut)[14]-t)/s} ${(l(this,Ut)[15]-e)/n} Z`},NE=function(t){const e=l(this,en);t.push(`L${e[4]} ${e[5]} Z`)},FE=function(t){const[e,s,n,r]=l(this,gi),o=l(this,Ut).subarray(4,6),a=l(this,Ut).subarray(16,18),[c,h,u,f]=A(this,ns,Kh).call(this);t.push(`L${(o[0]-e)/n} ${(o[1]-s)/r} L${c} ${h} L${u} ${f} L${(a[0]-e)/n} ${(a[1]-s)/r}`)},$E=function(t){const e=l(this,Ut),[s,n,r,o]=l(this,gi),[a,c,h,u]=A(this,ns,Kh).call(this),f=new Float32Array(36);return f.set([NaN,NaN,NaN,NaN,(e[2]-s)/r,(e[3]-n)/o,NaN,NaN,NaN,NaN,(e[4]-s)/r,(e[5]-n)/o,NaN,NaN,NaN,NaN,a,c,NaN,NaN,NaN,NaN,h,u,NaN,NaN,NaN,NaN,(e[16]-s)/r,(e[17]-n)/o,NaN,NaN,NaN,NaN,(e[14]-s)/r,(e[15]-n)/o],0),this.newFreeDrawOutline(f,t,l(this,gi),l(this,Zc),l(this,Qc),l(this,Jc))},BE=function(t,e){const s=l(this,en);return t.set([NaN,NaN,NaN,NaN,s[4],s[5]],e),e+=6},HE=function(t,e){const s=l(this,Ut).subarray(4,6),n=l(this,Ut).subarray(16,18),[r,o,a,c]=l(this,gi),[h,u,f,p]=A(this,ns,Kh).call(this);return t.set([NaN,NaN,NaN,NaN,(s[0]-r)/a,(s[1]-o)/c,NaN,NaN,NaN,NaN,h,u,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,(n[0]-r)/a,(n[1]-o)/c],e),e+=24},w(nr,Cd,8),w(nr,Kp,2),w(nr,Yp,l(nr,Cd)+l(nr,Kp));let Ip=nr;var eh,il,xr,Td,mi,Pd,Ue,Qp,VE;class jE extends dt{constructor(e,s,n,r,o,a){super();w(this,Qp);w(this,eh);w(this,il,new Float32Array(4));w(this,xr);w(this,Td);w(this,mi);w(this,Pd);w(this,Ue);b(this,Ue,e),b(this,mi,s),b(this,eh,n),b(this,Pd,r),b(this,xr,o),b(this,Td,a),this.lastPoint=[NaN,NaN],A(this,Qp,VE).call(this,a);const[c,h,u,f]=l(this,il);for(let p=0,g=e.length;p<g;p+=2)e[p]=(e[p]-c)/u,e[p+1]=(e[p+1]-h)/f;for(let p=0,g=s.length;p<g;p+=2)s[p]=(s[p]-c)/u,s[p+1]=(s[p+1]-h)/f}toSVGPath(){const e=[`M${l(this,Ue)[4]} ${l(this,Ue)[5]}`];for(let s=6,n=l(this,Ue).length;s<n;s+=6){if(isNaN(l(this,Ue)[s])){e.push(`L${l(this,Ue)[s+4]} ${l(this,Ue)[s+5]}`);continue}e.push(`C${l(this,Ue)[s]} ${l(this,Ue)[s+1]} ${l(this,Ue)[s+2]} ${l(this,Ue)[s+3]} ${l(this,Ue)[s+4]} ${l(this,Ue)[s+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,s,n,r],o){const a=n-e,c=r-s;let h,u;switch(o){case 0:h=dt._rescale(l(this,Ue),e,r,a,-c),u=dt._rescale(l(this,mi),e,r,a,-c);break;case 90:h=dt._rescaleAndSwap(l(this,Ue),e,s,a,c),u=dt._rescaleAndSwap(l(this,mi),e,s,a,c);break;case 180:h=dt._rescale(l(this,Ue),n,s,-a,c),u=dt._rescale(l(this,mi),n,s,-a,c);break;case 270:h=dt._rescaleAndSwap(l(this,Ue),n,r,-a,-c),u=dt._rescaleAndSwap(l(this,mi),n,r,-a,-c);break}return{outline:Array.from(h),points:[Array.from(u)]}}get box(){return l(this,il)}newOutliner(e,s,n,r,o,a=0){return new Ip(e,s,n,r,o,a)}getNewOutline(e,s){const[n,r,o,a]=l(this,il),[c,h,u,f]=l(this,eh),p=o*u,g=a*f,_=n*u+c,v=r*f+h,E=this.newOutliner({x:l(this,mi)[0]*p+_,y:l(this,mi)[1]*g+v},l(this,eh),l(this,Pd),e,l(this,Td),s??l(this,xr));for(let S=2;S<l(this,mi).length;S+=2)E.add({x:l(this,mi)[S]*p+_,y:l(this,mi)[S+1]*g+v});return E.getOutlines()}}eh=new WeakMap,il=new WeakMap,xr=new WeakMap,Td=new WeakMap,mi=new WeakMap,Pd=new WeakMap,Ue=new WeakMap,Qp=new WeakSet,VE=function(e){const s=l(this,Ue);let n=s[4],r=s[5];const o=[n,r,n,r];let a=n,c=r;const h=e?Math.max:Math.min;for(let f=6,p=s.length;f<p;f+=6){const g=s[f+4],_=s[f+5];if(isNaN(s[f]))_t.pointBoundingBox(g,_,o),c<_?(a=g,c=_):c===_&&(a=h(a,g));else{const v=[1/0,1/0,-1/0,-1/0];_t.bezierBoundingBox(n,r,...s.slice(f,f+6),v),_t.rectBoundingBox(...v,o),c<v[3]?(a=v[2],c=v[3]):c===v[3]&&(a=h(a,v[2]))}n=g,r=_}const u=l(this,il);u[0]=o[0]-l(this,xr),u[1]=o[1]-l(this,xr),u[2]=o[2]-o[0]+2*l(this,xr),u[3]=o[3]-o[1]+2*l(this,xr),this.lastPoint=[a,c]};var Rd,kd,So,sn,Ks,UE,np,zE,qE,Rb;class Pb{constructor(t,e=0,s=0,n=!0){w(this,Ks);w(this,Rd);w(this,kd);w(this,So,[]);w(this,sn,[]);const r=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:g,y:_,width:v,height:E}of t){const S=Math.floor((g-e)/o)*o,C=Math.ceil((g+v+e)/o)*o,T=Math.floor((_-e)/o)*o,R=Math.ceil((_+E+e)/o)*o,I=[S,T,R,!0],F=[C,T,R,!1];l(this,So).push(I,F),_t.rectBoundingBox(S,T,C,R,r)}const a=r[2]-r[0]+2*s,c=r[3]-r[1]+2*s,h=r[0]-s,u=r[1]-s,f=l(this,So).at(n?-1:-2),p=[f[0],f[2]];for(const g of l(this,So)){const[_,v,E]=g;g[0]=(_-h)/a,g[1]=(v-u)/c,g[2]=(E-u)/c}b(this,Rd,new Float32Array([h,u,a,c])),b(this,kd,p)}getOutlines(){l(this,So).sort((e,s)=>e[0]-s[0]||e[1]-s[1]||e[2]-s[2]);const t=[];for(const e of l(this,So))e[3]?(t.push(...A(this,Ks,Rb).call(this,e)),A(this,Ks,zE).call(this,e)):(A(this,Ks,qE).call(this,e),t.push(...A(this,Ks,Rb).call(this,e)));return A(this,Ks,UE).call(this,t)}}Rd=new WeakMap,kd=new WeakMap,So=new WeakMap,sn=new WeakMap,Ks=new WeakSet,UE=function(t){const e=[],s=new Set;for(const o of t){const[a,c,h]=o;e.push([a,c,o],[a,h,o])}e.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=e.length;o<a;o+=2){const c=e[o][2],h=e[o+1][2];c.push(h),h.push(c),s.add(c),s.add(h)}const n=[];let r;for(;s.size>0;){const o=s.values().next().value;let[a,c,h,u,f]=o;s.delete(o);let p=a,g=c;for(r=[a,h],n.push(r);;){let _;if(s.has(u))_=u;else if(s.has(f))_=f;else break;s.delete(_),[a,c,h,u,f]=_,p!==a&&(r.push(p,g,a,g===c?c:h),p=a),g=g===c?h:c}r.push(p,g)}return new Jk(n,l(this,Rd),l(this,kd))},np=function(t){const e=l(this,sn);let s=0,n=e.length-1;for(;s<=n;){const r=s+n>>1,o=e[r][0];if(o===t)return r;o<t?s=r+1:n=r-1}return n+1},zE=function([,t,e]){const s=A(this,Ks,np).call(this,t);l(this,sn).splice(s,0,[t,e])},qE=function([,t,e]){const s=A(this,Ks,np).call(this,t);for(let n=s;n<l(this,sn).length;n++){const[r,o]=l(this,sn)[n];if(r!==t)break;if(r===t&&o===e){l(this,sn).splice(n,1);return}}for(let n=s-1;n>=0;n--){const[r,o]=l(this,sn)[n];if(r!==t)break;if(r===t&&o===e){l(this,sn).splice(n,1);return}}},Rb=function(t){const[e,s,n]=t,r=[[e,s,n]],o=A(this,Ks,np).call(this,n);for(let a=0;a<o;a++){const[c,h]=l(this,sn)[a];for(let u=0,f=r.length;u<f;u++){const[,p,g]=r[u];if(!(h<=p||g<=c)){if(p>=c){if(g>h)r[u][1]=h;else{if(f===1)return[];r.splice(u,1),u--,f--}continue}r[u][2]=c,g>h&&r.push([e,h,g])}}}return r};var Id,sh;class Jk extends dt{constructor(e,s,n){super();w(this,Id);w(this,sh);b(this,sh,e),b(this,Id,s),this.lastPoint=n}toSVGPath(){const e=[];for(const s of l(this,sh)){let[n,r]=s;e.push(`M${n} ${r}`);for(let o=2;o<s.length;o+=2){const a=s[o],c=s[o+1];a===n?(e.push(`V${c}`),r=c):c===r&&(e.push(`H${a}`),n=a)}e.push("Z")}return e.join(" ")}serialize([e,s,n,r],o){const a=[],c=n-e,h=r-s;for(const u of l(this,sh)){const f=new Array(u.length);for(let p=0;p<u.length;p+=2)f[p]=e+u[p]*c,f[p+1]=r-u[p+1]*h;a.push(f)}return a}get box(){return l(this,Id)}get classNamesForOutlining(){return["highlightOutline"]}}Id=new WeakMap,sh=new WeakMap;class kb extends Ip{newFreeDrawOutline(t,e,s,n,r,o){return new Zk(t,e,s,n,r,o)}}class Zk extends jE{newOutliner(t,e,s,n,r,o=0){return new kb(t,e,s,n,r,o)}}var nn,nl,ih,ss,Ld,nh,Md,Dd,xo,rn,rh,Od,pe,Ib,Lb,Mb,da,WE,Kr;const Qs=class Qs{constructor({editor:t=null,uiManager:e=null}){w(this,pe);w(this,nn,null);w(this,nl,null);w(this,ih);w(this,ss,null);w(this,Ld,!1);w(this,nh,!1);w(this,Md,null);w(this,Dd);w(this,xo,null);w(this,rn,null);w(this,rh);var s;t?(b(this,nh,!1),b(this,rh,Yt.HIGHLIGHT_COLOR),b(this,Md,t)):(b(this,nh,!0),b(this,rh,Yt.HIGHLIGHT_DEFAULT_COLOR)),b(this,rn,(t==null?void 0:t._uiManager)||e),b(this,Dd,l(this,rn)._eventBus),b(this,ih,(t==null?void 0:t.color)||((s=l(this,rn))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),l(Qs,Od)||b(Qs,Od,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Wt(this,"_keyboardManager",new Qd([[["Escape","mac+Escape"],Qs.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Qs.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Qs.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Qs.prototype._moveToPrevious],[["Home","mac+Home"],Qs.prototype._moveToBeginning],[["End","mac+End"],Qs.prototype._moveToEnd]]))}renderButton(){const t=b(this,nn,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=l(this,rn)._signal;t.addEventListener("click",A(this,pe,da).bind(this),{signal:e}),t.addEventListener("keydown",A(this,pe,Mb).bind(this),{signal:e});const s=b(this,nl,document.createElement("span"));return s.className="swatch",s.setAttribute("aria-hidden",!0),s.style.backgroundColor=l(this,ih),t.append(s),t}renderMainDropdown(){const t=b(this,ss,A(this,pe,Ib).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===l(this,nn)){A(this,pe,da).call(this,t);return}const e=t.target.getAttribute("data-color");e&&A(this,pe,Lb).call(this,e,t)}_moveToNext(t){var e,s;if(!l(this,pe,Kr)){A(this,pe,da).call(this,t);return}if(t.target===l(this,nn)){(e=l(this,ss).firstChild)==null||e.focus();return}(s=t.target.nextSibling)==null||s.focus()}_moveToPrevious(t){var e,s;if(t.target===((e=l(this,ss))==null?void 0:e.firstChild)||t.target===l(this,nn)){l(this,pe,Kr)&&this._hideDropdownFromKeyboard();return}l(this,pe,Kr)||A(this,pe,da).call(this,t),(s=t.target.previousSibling)==null||s.focus()}_moveToBeginning(t){var e;if(!l(this,pe,Kr)){A(this,pe,da).call(this,t);return}(e=l(this,ss).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!l(this,pe,Kr)){A(this,pe,da).call(this,t);return}(e=l(this,ss).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=l(this,ss))==null||t.classList.add("hidden"),(e=l(this,xo))==null||e.abort(),b(this,xo,null)}_hideDropdownFromKeyboard(){var t;if(!l(this,nh)){if(!l(this,pe,Kr)){(t=l(this,Md))==null||t.unselect();return}this.hideDropdown(),l(this,nn).focus({preventScroll:!0,focusVisible:l(this,Ld)})}}updateColor(t){if(l(this,nl)&&(l(this,nl).style.backgroundColor=t),!l(this,ss))return;const e=l(this,rn).highlightColors.values();for(const s of l(this,ss).children)s.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=l(this,nn))==null||t.remove(),b(this,nn,null),b(this,nl,null),(e=l(this,ss))==null||e.remove(),b(this,ss,null)}};nn=new WeakMap,nl=new WeakMap,ih=new WeakMap,ss=new WeakMap,Ld=new WeakMap,nh=new WeakMap,Md=new WeakMap,Dd=new WeakMap,xo=new WeakMap,rn=new WeakMap,rh=new WeakMap,Od=new WeakMap,pe=new WeakSet,Ib=function(){const t=document.createElement("div"),e=l(this,rn)._signal;t.addEventListener("contextmenu",fn,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[s,n]of l(this,rn).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",n),r.title=s,r.setAttribute("data-l10n-id",l(Qs,Od)[s]);const o=document.createElement("span");r.append(o),o.className="swatch",o.style.backgroundColor=n,r.setAttribute("aria-selected",n===l(this,ih)),r.addEventListener("click",A(this,pe,Lb).bind(this,n),{signal:e}),t.append(r)}return t.addEventListener("keydown",A(this,pe,Mb).bind(this),{signal:e}),t},Lb=function(t,e){e.stopPropagation(),l(this,Dd).dispatch("switchannotationeditorparams",{source:this,type:l(this,rh),value:t})},Mb=function(t){Qs._keyboardManager.exec(this,t)},da=function(t){if(l(this,pe,Kr)){this.hideDropdown();return}if(b(this,Ld,t.detail===0),l(this,xo)||(b(this,xo,new AbortController),window.addEventListener("pointerdown",A(this,pe,WE).bind(this),{signal:l(this,rn).combinedSignal(l(this,xo))})),l(this,ss)){l(this,ss).classList.remove("hidden");return}const e=b(this,ss,A(this,pe,Ib).call(this));l(this,nn).append(e)},WE=function(t){var e;(e=l(this,ss))!=null&&e.contains(t.target)||this.hideDropdown()},Kr=function(){return l(this,ss)&&!l(this,ss).classList.contains("hidden")},w(Qs,Od,null);let Lp=Qs;var oh,Nd,Cr,rl,ah,ti,Fd,$d,ol,$i,bi,ms,lh,Tr,Ps,ch,Bi,Bd,Ft,Db,rp,GE,XE,KE,Ob,fa,Vi,ec,YE,op,Yh,QE,JE,ZE,tS,eS;const se=class se extends Se{constructor(e){super({...e,name:"highlightEditor"});w(this,Ft);w(this,oh,null);w(this,Nd,0);w(this,Cr);w(this,rl,null);w(this,ah,null);w(this,ti,null);w(this,Fd,null);w(this,$d,0);w(this,ol,null);w(this,$i,null);w(this,bi,null);w(this,ms,!1);w(this,lh,null);w(this,Tr);w(this,Ps,null);w(this,ch,"");w(this,Bi);w(this,Bd,"");this.color=e.color||se._defaultColor,b(this,Bi,e.thickness||se._defaultThickness),b(this,Tr,e.opacity||se._defaultOpacity),b(this,Cr,e.boxes||null),b(this,Bd,e.methodOfCreation||""),b(this,ch,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(b(this,ms,!0),A(this,Ft,rp).call(this,e),A(this,Ft,fa).call(this)):l(this,Cr)&&(b(this,oh,e.anchorNode),b(this,Nd,e.anchorOffset),b(this,Fd,e.focusNode),b(this,$d,e.focusOffset),A(this,Ft,Db).call(this),A(this,Ft,fa).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=se.prototype;return Wt(this,"_keyboardManager",new Qd([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:l(this,ms)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:l(this,Bi),methodOfCreation:l(this,Bd)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,s){var n;Se.initialize(e,s),se._defaultColor||(se._defaultColor=((n=s.highlightColors)==null?void 0:n.values().next().value)||"#fff066")}static updateDefaultParams(e,s){switch(e){case Yt.HIGHLIGHT_DEFAULT_COLOR:se._defaultColor=s;break;case Yt.HIGHLIGHT_THICKNESS:se._defaultThickness=s;break}}translateInPage(e,s){}get toolbarPosition(){return l(this,lh)}updateParams(e,s){switch(e){case Yt.HIGHLIGHT_COLOR:A(this,Ft,GE).call(this,s);break;case Yt.HIGHLIGHT_THICKNESS:A(this,Ft,XE).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[Yt.HIGHLIGHT_DEFAULT_COLOR,se._defaultColor],[Yt.HIGHLIGHT_THICKNESS,se._defaultThickness]]}get propertiesToUpdate(){return[[Yt.HIGHLIGHT_COLOR,this.color||se._defaultColor],[Yt.HIGHLIGHT_THICKNESS,l(this,Bi)||se._defaultThickness],[Yt.HIGHLIGHT_FREE,l(this,ms)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(b(this,ah,new Lp({editor:this})),e.addColorPicker(l(this,ah))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(A(this,Ft,Yh).call(this))}getBaseTranslation(){return[0,0]}getRect(e,s){return super.getRect(e,s,A(this,Ft,Yh).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){A(this,Ft,Ob).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(A(this,Ft,fa).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var n;let s=!1;this.parent&&!e?A(this,Ft,Ob).call(this):e&&(A(this,Ft,fa).call(this,e),s=!this.parent&&((n=this.div)==null?void 0:n.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),s&&this.select()}rotate(e){var r,o,a;const{drawLayer:s}=this.parent;let n;l(this,ms)?(e=(e-this.rotation+360)%360,n=A(r=se,Vi,ec).call(r,l(this,$i).box,e)):n=A(o=se,Vi,ec).call(o,[this.x,this.y,this.width,this.height],e),s.updateProperties(l(this,bi),{bbox:n,root:{"data-main-rotation":e}}),s.updateProperties(l(this,Ps),{bbox:A(a=se,Vi,ec).call(a,l(this,ti).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();l(this,ch)&&(e.setAttribute("aria-label",l(this,ch)),e.setAttribute("role","mark")),l(this,ms)?e.classList.add("free"):this.div.addEventListener("keydown",A(this,Ft,YE).bind(this),{signal:this._uiManager._signal});const s=b(this,ol,document.createElement("div"));e.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=l(this,rl);const[n,r]=this.parentDimensions;return this.setDims(this.width*n,this.height*r),Cv(this,l(this,ol),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(l(this,Ps),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(l(this,Ps),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:A(this,Ft,op).call(this,!0);break;case 1:case 3:A(this,Ft,op).call(this,!1);break}}select(){var e;super.select(),l(this,Ps)&&((e=this.parent)==null||e.drawLayer.updateProperties(l(this,Ps),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),l(this,Ps)&&((e=this.parent)==null||e.drawLayer.updateProperties(l(this,Ps),{rootClass:{selected:!1}}),l(this,ms)||A(this,Ft,op).call(this,!1))}get _mustFixPosition(){return!l(this,ms)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(l(this,bi),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(l(this,Ps),{rootClass:{hidden:!e}}))}static startHighlighting(e,s,{target:n,x:r,y:o}){const{x:a,y:c,width:h,height:u}=n.getBoundingClientRect(),f=new AbortController,p=e.combinedSignal(f),g=_=>{f.abort(),A(this,Vi,tS).call(this,e,_)};window.addEventListener("blur",g,{signal:p}),window.addEventListener("pointerup",g,{signal:p}),window.addEventListener("pointerdown",Xe,{capture:!0,passive:!1,signal:p}),window.addEventListener("contextmenu",fn,{signal:p}),n.addEventListener("pointermove",A(this,Vi,ZE).bind(this,e),{signal:p}),this._freeHighlight=new kb({x:r,y:o},[a,c,h,u],e.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,s,n){var v,E,S,C;let r=null;if(e instanceof PE){const{data:{quadPoints:T,rect:R,rotation:I,id:F,color:N,opacity:H,popupRef:U},parent:{page:{pageNumber:Q}}}=e;r=e={annotationType:Lt.HIGHLIGHT,color:Array.from(N),opacity:H,quadPoints:T,boxes:null,pageIndex:Q-1,rect:R.slice(0),rotation:I,id:F,deleted:!1,popupRef:U}}else if(e instanceof kv){const{data:{inkLists:T,rect:R,rotation:I,id:F,color:N,borderStyle:{rawWidth:H},popupRef:U},parent:{page:{pageNumber:Q}}}=e;r=e={annotationType:Lt.HIGHLIGHT,color:Array.from(N),thickness:H,inkLists:T,boxes:null,pageIndex:Q-1,rect:R.slice(0),rotation:I,id:F,deleted:!1,popupRef:U}}const{color:o,quadPoints:a,inkLists:c,opacity:h}=e,u=await super.deserialize(e,s,n);u.color=_t.makeHexColor(...o),b(u,Tr,h||1),c&&b(u,Bi,e.thickness),u.annotationElementId=e.id||null,u._initialData=r;const[f,p]=u.pageDimensions,[g,_]=u.pageTranslation;if(a){const T=b(u,Cr,[]);for(let R=0;R<a.length;R+=8)T.push({x:(a[R]-g)/f,y:1-(a[R+1]-_)/p,width:(a[R+2]-a[R])/f,height:(a[R+1]-a[R+5])/p});A(v=u,Ft,Db).call(v),A(E=u,Ft,fa).call(E),u.rotate(u.rotation)}else if(c){b(u,ms,!0);const T=c[0],R={x:T[0]-g,y:p-(T[1]-_)},I=new kb(R,[0,0,f,p],1,l(u,Bi)/2,!0,.001);for(let H=0,U=T.length;H<U;H+=2)R.x=T[H]-g,R.y=p-(T[H+1]-_),I.add(R);const{id:F,clipPathId:N}=s.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:u.color,"fill-opacity":u._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:I.toSVGPath()}},!0,!0);A(S=u,Ft,rp).call(S,{highlightOutlines:I.getOutlines(),highlightId:F,clipPathId:N}),A(C=u,Ft,fa).call(C),u.rotate(u.parentRotation)}return u}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const s=this.getRect(0,0),n=Se._colorManager.convert(this.color),r={annotationType:Lt.HIGHLIGHT,color:n,opacity:l(this,Tr),thickness:l(this,Bi),quadPoints:A(this,Ft,QE).call(this),outlines:A(this,Ft,JE).call(this,s),pageIndex:this.pageIndex,rect:s,rotation:A(this,Ft,Yh).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!A(this,Ft,eS).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};oh=new WeakMap,Nd=new WeakMap,Cr=new WeakMap,rl=new WeakMap,ah=new WeakMap,ti=new WeakMap,Fd=new WeakMap,$d=new WeakMap,ol=new WeakMap,$i=new WeakMap,bi=new WeakMap,ms=new WeakMap,lh=new WeakMap,Tr=new WeakMap,Ps=new WeakMap,ch=new WeakMap,Bi=new WeakMap,Bd=new WeakMap,Ft=new WeakSet,Db=function(){const e=new Pb(l(this,Cr),.001);b(this,$i,e.getOutlines()),[this.x,this.y,this.width,this.height]=l(this,$i).box;const s=new Pb(l(this,Cr),.0025,.001,this._uiManager.direction==="ltr");b(this,ti,s.getOutlines());const{lastPoint:n}=l(this,ti);b(this,lh,[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height])},rp=function({highlightOutlines:e,highlightId:s,clipPathId:n}){var f,p;if(b(this,$i,e),b(this,ti,e.getNewOutline(l(this,Bi)/2+1.5,.0025)),s>=0)b(this,bi,s),b(this,rl,n),this.parent.drawLayer.finalizeDraw(s,{bbox:e.box,path:{d:e.toSVGPath()}}),b(this,Ps,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:l(this,ti).box,path:{d:l(this,ti).toSVGPath()}},!0));else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(l(this,bi),{bbox:A(f=se,Vi,ec).call(f,l(this,$i).box,(g-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(l(this,Ps),{bbox:A(p=se,Vi,ec).call(p,l(this,ti).box,g),path:{d:l(this,ti).toSVGPath()}})}const[o,a,c,h]=e.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=c,this.height=h;break;case 90:{const[g,_]=this.parentDimensions;this.x=a,this.y=1-o,this.width=c*_/g,this.height=h*g/_;break}case 180:this.x=1-o,this.y=1-a,this.width=c,this.height=h;break;case 270:{const[g,_]=this.parentDimensions;this.x=1-a,this.y=o,this.width=c*_/g,this.height=h*g/_;break}}const{lastPoint:u}=l(this,ti);b(this,lh,[(u[0]-o)/c,(u[1]-a)/h])},GE=function(e){const s=(o,a)=>{var c,h;this.color=o,b(this,Tr,a),(c=this.parent)==null||c.drawLayer.updateProperties(l(this,bi),{root:{fill:o,"fill-opacity":a}}),(h=l(this,ah))==null||h.updateColor(o)},n=this.color,r=l(this,Tr);this.addCommands({cmd:s.bind(this,e,se._defaultOpacity),undo:s.bind(this,n,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Yt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},XE=function(e){const s=l(this,Bi),n=r=>{b(this,Bi,r),A(this,Ft,KE).call(this,r)};this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Yt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},KE=function(e){if(!l(this,ms))return;A(this,Ft,rp).call(this,{highlightOutlines:l(this,$i).getNewOutline(e/2)}),this.fixAndSetPosition();const[s,n]=this.parentDimensions;this.setDims(this.width*s,this.height*n)},Ob=function(){l(this,bi)===null||!this.parent||(this.parent.drawLayer.remove(l(this,bi)),b(this,bi,null),this.parent.drawLayer.remove(l(this,Ps)),b(this,Ps,null))},fa=function(e=this.parent){l(this,bi)===null&&({id:Bs(this,bi)._,clipPathId:Bs(this,rl)._}=e.drawLayer.draw({bbox:l(this,$i).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":l(this,Tr)},rootClass:{highlight:!0,free:l(this,ms)},path:{d:l(this,$i).toSVGPath()}},!1,!0),b(this,Ps,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:l(this,ms)},bbox:l(this,ti).box,path:{d:l(this,ti).toSVGPath()}},l(this,ms))),l(this,ol)&&(l(this,ol).style.clipPath=l(this,rl)))},Vi=new WeakSet,ec=function([e,s,n,r],o){switch(o){case 90:return[1-s-r,e,r,n];case 180:return[1-e-n,1-s-r,n,r];case 270:return[s,1-e-n,r,n]}return[e,s,n,r]},YE=function(e){se._keyboardManager.exec(this,e)},op=function(e){if(!l(this,oh))return;const s=window.getSelection();e?s.setPosition(l(this,oh),l(this,Nd)):s.setPosition(l(this,Fd),l(this,$d))},Yh=function(){return l(this,ms)?this.rotation:0},QE=function(){if(l(this,ms))return null;const[e,s]=this.pageDimensions,[n,r]=this.pageTranslation,o=l(this,Cr),a=new Float32Array(o.length*8);let c=0;for(const{x:h,y:u,width:f,height:p}of o){const g=h*e+n,_=(1-u)*s+r;a[c]=a[c+4]=g,a[c+1]=a[c+3]=_,a[c+2]=a[c+6]=g+f*e,a[c+5]=a[c+7]=_-p*s,c+=8}return a},JE=function(e){return l(this,$i).serialize(e,A(this,Ft,Yh).call(this))},ZE=function(e,s){this._freeHighlight.add(s)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},tS=function(e,s){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},eS=function(e){const{color:s}=this._initialData;return e.color.some((n,r)=>n!==s[r])},w(se,Vi),Z(se,"_defaultColor",null),Z(se,"_defaultOpacity",1),Z(se,"_defaultThickness",12),Z(se,"_type","highlight"),Z(se,"_editorType",Lt.HIGHLIGHT),Z(se,"_freeHighlightId",-1),Z(se,"_freeHighlight",null),Z(se,"_freeHighlightClipId","");let Mp=se;var al;class sS{constructor(){w(this,al,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,s]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,s)}updateSVGProperty(t,e){l(this,al)[t]=e}toSVGProperties(){const t=l(this,al);return b(this,al,Object.create(null)),{root:t}}reset(){b(this,al,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){ge("Not implemented")}}al=new WeakMap;var vi,hh,ls,ll,cl,Co,To,Po,hl,Jt,Nb,Fb,$b,Qh,iS,ap,Jh,sc;const mt=class mt extends Se{constructor(e){super(e);w(this,Jt);w(this,vi,null);w(this,hh);Z(this,"_drawId",null);b(this,hh,e.mustBeCommitted||!1),this._addOutlines(e)}_addOutlines(e){e.drawOutlines&&(A(this,Jt,Nb).call(this,e),A(this,Jt,Qh).call(this))}static _mergeSVGProperties(e,s){const n=new Set(Object.keys(e));for(const[r,o]of Object.entries(s))n.has(r)?Object.assign(e[r],o):e[r]=o;return e}static getDefaultDrawingOptions(e){ge("Not implemented")}static get typesMap(){ge("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,s){const n=this.typesMap.get(e);n&&this._defaultDrawingOptions.updateProperty(n,s),this._currentParent&&(l(mt,ls).updateProperty(n,s),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,s){const n=this.constructor.typesMap.get(e);n&&this._updateProperty(e,n,s)}static get defaultPropertiesToUpdate(){const e=[],s=this._defaultDrawingOptions;for(const[n,r]of this.typesMap)e.push([n,s[r]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:s}=this;for(const[n,r]of this.constructor.typesMap)e.push([n,s[r]]);return e}_updateProperty(e,s,n){const r=this._drawingOptions,o=r[s],a=c=>{var u;r.updateProperty(s,c);const h=l(this,vi).updateProperty(s,c);h&&A(this,Jt,Jh).call(this,h),(u=this.parent)==null||u.drawLayer.updateProperties(this._drawId,r.toSVGProperties())};this.addCommands({cmd:a.bind(this,n),undo:a.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,mt._mergeSVGProperties(l(this,vi).getPathResizingSVGProperties(A(this,Jt,ap).call(this)),{bbox:A(this,Jt,sc).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,mt._mergeSVGProperties(l(this,vi).getPathResizedSVGProperties(A(this,Jt,ap).call(this)),{bbox:A(this,Jt,sc).call(this)}))}_onTranslating(e,s){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,{bbox:A(this,Jt,sc).call(this)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,mt._mergeSVGProperties(l(this,vi).getPathTranslatedSVGProperties(A(this,Jt,ap).call(this),this.parentDimensions),{bbox:A(this,Jt,sc).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,l(this,hh)&&(b(this,hh,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){A(this,Jt,$b).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(A(this,Jt,Qh).call(this),A(this,Jt,Jh).call(this,l(this,vi).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var n;let s=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),A(this,Jt,$b).call(this)):e&&(this._uiManager.addShouldRescale(this),A(this,Jt,Qh).call(this,e),s=!this.parent&&((n=this.div)==null?void 0:n.classList.contains("selectedEditor"))),super.setParent(e),s&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,mt._mergeSVGProperties({bbox:A(this,Jt,sc).call(this)},l(this,vi).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&A(this,Jt,Jh).call(this,l(this,vi).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,s;this._isCopy&&(e=this.x,s=this.y);const n=super.render();n.classList.add("draw");const r=document.createElement("div");n.append(r),r.setAttribute("aria-hidden","true"),r.className="internal";const[o,a]=this.parentDimensions;return this.setDims(this.width*o,this.height*a),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,s),n}static createDrawerInstance(e,s,n,r,o){ge("Not implemented")}static startDrawing(e,s,n,r){var E;const{target:o,offsetX:a,offsetY:c,pointerId:h,pointerType:u}=r;if(l(mt,To)&&l(mt,To)!==u)return;const{viewport:{rotation:f}}=e,{width:p,height:g}=o.getBoundingClientRect(),_=b(mt,ll,new AbortController),v=e.combinedSignal(_);if(l(mt,Co)||b(mt,Co,h),l(mt,To)??b(mt,To,u),window.addEventListener("pointerup",S=>{var C;l(mt,Co)===S.pointerId?this._endDraw(S):(C=l(mt,Po))==null||C.delete(S.pointerId)},{signal:v}),window.addEventListener("pointercancel",S=>{var C;l(mt,Co)===S.pointerId?this._currentParent.endDrawingSession():(C=l(mt,Po))==null||C.delete(S.pointerId)},{signal:v}),window.addEventListener("pointerdown",S=>{l(mt,To)===S.pointerType&&((l(mt,Po)||b(mt,Po,new Set)).add(S.pointerId),l(mt,ls).isCancellable()&&(l(mt,ls).removeLastElement(),l(mt,ls).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",fn,{signal:v}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:v}),o.addEventListener("touchmove",S=>{S.timeStamp===l(mt,hl)&&Xe(S)},{signal:v}),e.toggleDrawing(),(E=s._editorUndoBar)==null||E.hide(),l(mt,ls)){e.drawLayer.updateProperties(this._currentDrawId,l(mt,ls).startNew(a,c,p,g,f));return}s.updateUIForDefaultProperties(this),b(mt,ls,this.createDrawerInstance(a,c,p,g,f)),b(mt,cl,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(l(mt,cl).toSVGProperties(),l(mt,ls).defaultSVGProperties),!0,!1)}static _drawMove(e){var o;if(b(mt,hl,-1),!l(mt,ls))return;const{offsetX:s,offsetY:n,pointerId:r}=e;if(l(mt,Co)===r){if(((o=l(mt,Po))==null?void 0:o.size)>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,l(mt,ls).add(s,n)),b(mt,hl,e.timeStamp),Xe(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,b(mt,ls,null),b(mt,cl,null),b(mt,To,null),b(mt,hl,NaN)),l(mt,ll)&&(l(mt,ll).abort(),b(mt,ll,null),b(mt,Co,NaN),b(mt,Po,null))}static _endDraw(e){const s=this._currentParent;if(s){if(s.toggleDrawing(!0),this._cleanup(!1),(e==null?void 0:e.target)===s.div&&s.drawLayer.updateProperties(this._currentDrawId,l(mt,ls).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const n=l(mt,ls),r=this._currentDrawId,o=n.getLastElement();s.addCommands({cmd:()=>{s.drawLayer.updateProperties(r,n.setLastElement(o))},undo:()=>{s.drawLayer.updateProperties(r,n.removeLastElement())},mustExec:!1,type:Yt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const s=this._currentParent;if(!s)return null;if(s.toggleDrawing(!0),s.cleanUndoStack(Yt.DRAW_STEP),!l(mt,ls).isEmpty()){const{pageDimensions:[n,r],scale:o}=s,a=s.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:l(mt,ls).getOutlines(n*o,r*o,o,this._INNER_MARGIN),drawingOptions:l(mt,cl),mustBeCommitted:!e});return this._cleanup(!0),a}return s.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,s,n,r,o,a){ge("Not implemented")}static async deserialize(e,s,n){var f,p;const{rawDims:{pageWidth:r,pageHeight:o,pageX:a,pageY:c}}=s.viewport,h=this.deserializeDraw(a,c,r,o,this._INNER_MARGIN,e),u=await super.deserialize(e,s,n);return u.createDrawingOptions(e),A(f=u,Jt,Nb).call(f,{drawOutlines:h}),A(p=u,Jt,Qh).call(p),u.onScaleChanging(),u.rotate(),u}serializeDraw(e){const[s,n]=this.pageTranslation,[r,o]=this.pageDimensions;return l(this,vi).serialize([s,n,r,o],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};vi=new WeakMap,hh=new WeakMap,ls=new WeakMap,ll=new WeakMap,cl=new WeakMap,Co=new WeakMap,To=new WeakMap,Po=new WeakMap,hl=new WeakMap,Jt=new WeakSet,Nb=function({drawOutlines:e,drawId:s,drawingOptions:n}){b(this,vi,e),this._drawingOptions||(this._drawingOptions=n),s>=0?(this._drawId=s,this.parent.drawLayer.finalizeDraw(s,e.defaultProperties)):this._drawId=A(this,Jt,Fb).call(this,e,this.parent),A(this,Jt,Jh).call(this,e.box)},Fb=function(e,s){const{id:n}=s.drawLayer.draw(mt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return n},$b=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Qh=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=A(this,Jt,Fb).call(this,l(this,vi),e)}},iS=function([e,s,n,r]){const{parentDimensions:[o,a],rotation:c}=this;switch(c){case 90:return[s,1-e,n*(a/o),r*(o/a)];case 180:return[1-e,1-s,n,r];case 270:return[1-s,e,n*(a/o),r*(o/a)];default:return[e,s,n,r]}},ap=function(){const{x:e,y:s,width:n,height:r,parentDimensions:[o,a],rotation:c}=this;switch(c){case 90:return[1-s,e,n*(o/a),r*(a/o)];case 180:return[1-e,1-s,n,r];case 270:return[s,1-e,n*(o/a),r*(a/o)];default:return[e,s,n,r]}},Jh=function(e){if([this.x,this.y,this.width,this.height]=A(this,Jt,iS).call(this,e),this.div){this.fixAndSetPosition();const[s,n]=this.parentDimensions;this.setDims(this.width*s,this.height*n)}this._onResized()},sc=function(){const{x:e,y:s,width:n,height:r,rotation:o,parentRotation:a,parentDimensions:[c,h]}=this;switch((o*4+a)/90){case 1:return[1-s-r,e,r,n];case 2:return[1-e-n,1-s-r,n,r];case 3:return[s,1-e-n,r,n];case 4:return[e,s-n*(c/h),r*(h/c),n*(c/h)];case 5:return[1-s,e,n*(c/h),r*(h/c)];case 6:return[1-e-r*(h/c),1-s,r*(h/c),n*(c/h)];case 7:return[s-n*(c/h),1-e-r*(h/c),n*(c/h),r*(h/c)];case 8:return[e-n,s-r,n,r];case 9:return[1-s,e-n,r,n];case 10:return[1-e,1-s,n,r];case 11:return[s-r,1-e,r,n];case 12:return[e-r*(h/c),s,r*(h/c),n*(c/h)];case 13:return[1-s-n*(c/h),e-r*(h/c),n*(c/h),r*(h/c)];case 14:return[1-e,1-s-n*(c/h),r*(h/c),n*(c/h)];case 15:return[s,1-e,n*(c/h),r*(h/c)];default:return[e,s,n,r]}},Z(mt,"_currentDrawId",-1),Z(mt,"_currentParent",null),w(mt,ls,null),w(mt,ll,null),w(mt,cl,null),w(mt,Co,NaN),w(mt,To,null),w(mt,Po,null),w(mt,hl,NaN),Z(mt,"_INNER_MARGIN",3);let Dp=mt;var Nn,cs,hs,ul,uh,Us,bs,Hi,dl,fl,pl,dh,lp;class tI{constructor(t,e,s,n,r,o){w(this,dh);w(this,Nn,new Float64Array(6));w(this,cs);w(this,hs);w(this,ul);w(this,uh);w(this,Us);w(this,bs,"");w(this,Hi,0);w(this,dl,new tf);w(this,fl);w(this,pl);b(this,fl,s),b(this,pl,n),b(this,ul,r),b(this,uh,o),[t,e]=A(this,dh,lp).call(this,t,e);const a=b(this,cs,[NaN,NaN,NaN,NaN,t,e]);b(this,Us,[t,e]),b(this,hs,[{line:a,points:l(this,Us)}]),l(this,Nn).set(a,0)}updateProperty(t,e){t==="stroke-width"&&b(this,uh,e)}isEmpty(){return!l(this,hs)||l(this,hs).length===0}isCancellable(){return l(this,Us).length<=10}add(t,e){[t,e]=A(this,dh,lp).call(this,t,e);const[s,n,r,o]=l(this,Nn).subarray(2,6),a=t-r,c=e-o;return Math.hypot(l(this,fl)*a,l(this,pl)*c)<=2?null:(l(this,Us).push(t,e),isNaN(s)?(l(this,Nn).set([r,o,t,e],2),l(this,cs).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(l(this,Nn)[0])&&l(this,cs).splice(6,6),l(this,Nn).set([s,n,r,o,t,e],0),l(this,cs).push(...dt.createBezierPoints(s,n,r,o,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const s=this.add(t,e);return s||(l(this,Us).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,s,n,r){b(this,fl,s),b(this,pl,n),b(this,ul,r),[t,e]=A(this,dh,lp).call(this,t,e);const o=b(this,cs,[NaN,NaN,NaN,NaN,t,e]);b(this,Us,[t,e]);const a=l(this,hs).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),l(this,hs).push({line:o,points:l(this,Us)}),l(this,Nn).set(o,0),b(this,Hi,0),this.toSVGPath(),null}getLastElement(){return l(this,hs).at(-1)}setLastElement(t){return l(this,hs)?(l(this,hs).push(t),b(this,cs,t.line),b(this,Us,t.points),b(this,Hi,0),{path:{d:this.toSVGPath()}}):l(this,dl).setLastElement(t)}removeLastElement(){if(!l(this,hs))return l(this,dl).removeLastElement();l(this,hs).pop(),b(this,bs,"");for(let t=0,e=l(this,hs).length;t<e;t++){const{line:s,points:n}=l(this,hs)[t];b(this,cs,s),b(this,Us,n),b(this,Hi,0),this.toSVGPath()}return{path:{d:l(this,bs)}}}toSVGPath(){const t=dt.svgRound(l(this,cs)[4]),e=dt.svgRound(l(this,cs)[5]);if(l(this,Us).length===2)return b(this,bs,`${l(this,bs)} M ${t} ${e} Z`),l(this,bs);if(l(this,Us).length<=6){const n=l(this,bs).lastIndexOf("M");b(this,bs,`${l(this,bs).slice(0,n)} M ${t} ${e}`),b(this,Hi,6)}if(l(this,Us).length===4){const n=dt.svgRound(l(this,cs)[10]),r=dt.svgRound(l(this,cs)[11]);return b(this,bs,`${l(this,bs)} L ${n} ${r}`),b(this,Hi,12),l(this,bs)}const s=[];l(this,Hi)===0&&(s.push(`M ${t} ${e}`),b(this,Hi,6));for(let n=l(this,Hi),r=l(this,cs).length;n<r;n+=6){const[o,a,c,h,u,f]=l(this,cs).slice(n,n+6).map(dt.svgRound);s.push(`C${o} ${a} ${c} ${h} ${u} ${f}`)}return b(this,bs,l(this,bs)+s.join(" ")),b(this,Hi,l(this,cs).length),l(this,bs)}getOutlines(t,e,s,n){const r=l(this,hs).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),l(this,dl).build(l(this,hs),t,e,s,l(this,ul),l(this,uh),n),b(this,Nn,null),b(this,cs,null),b(this,hs,null),b(this,bs,null),l(this,dl)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Nn=new WeakMap,cs=new WeakMap,hs=new WeakMap,ul=new WeakMap,uh=new WeakMap,Us=new WeakMap,bs=new WeakMap,Hi=new WeakMap,dl=new WeakMap,fl=new WeakMap,pl=new WeakMap,dh=new WeakSet,lp=function(t,e){return dt._normalizePoint(t,e,l(this,fl),l(this,pl),l(this,ul))};var zs,Hd,jd,_i,Fn,$n,fh,ph,gl,_s,er,nS,rS,oS;class tf extends dt{constructor(){super(...arguments);w(this,_s);w(this,zs);w(this,Hd,0);w(this,jd);w(this,_i);w(this,Fn);w(this,$n);w(this,fh);w(this,ph);w(this,gl)}build(e,s,n,r,o,a,c){b(this,Fn,s),b(this,$n,n),b(this,fh,r),b(this,ph,o),b(this,gl,a),b(this,jd,c??0),b(this,_i,e),A(this,_s,rS).call(this)}get thickness(){return l(this,gl)}setLastElement(e){return l(this,_i).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return l(this,_i).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:s}of l(this,_i)){if(e.push(`M${dt.svgRound(s[4])} ${dt.svgRound(s[5])}`),s.length===6){e.push("Z");continue}if(s.length===12&&isNaN(s[6])){e.push(`L${dt.svgRound(s[10])} ${dt.svgRound(s[11])}`);continue}for(let n=6,r=s.length;n<r;n+=6){const[o,a,c,h,u,f]=s.subarray(n,n+6).map(dt.svgRound);e.push(`C${o} ${a} ${c} ${h} ${u} ${f}`)}}return e.join("")}serialize([e,s,n,r],o){const a=[],c=[],[h,u,f,p]=A(this,_s,nS).call(this);let g,_,v,E,S,C,T,R,I;switch(l(this,ph)){case 0:I=dt._rescale,g=e,_=s+r,v=n,E=-r,S=e+h*n,C=s+(1-u-p)*r,T=e+(h+f)*n,R=s+(1-u)*r;break;case 90:I=dt._rescaleAndSwap,g=e,_=s,v=n,E=r,S=e+u*n,C=s+h*r,T=e+(u+p)*n,R=s+(h+f)*r;break;case 180:I=dt._rescale,g=e+n,_=s,v=-n,E=r,S=e+(1-h-f)*n,C=s+u*r,T=e+(1-h)*n,R=s+(u+p)*r;break;case 270:I=dt._rescaleAndSwap,g=e+n,_=s+r,v=-n,E=-r,S=e+(1-u-p)*n,C=s+(1-h-f)*r,T=e+(1-u)*n,R=s+(1-h)*r;break}for(const{line:F,points:N}of l(this,_i))a.push(I(F,g,_,v,E,o?new Array(F.length):null)),c.push(I(N,g,_,v,E,o?new Array(N.length):null));return{lines:a,points:c,rect:[S,C,T,R]}}static deserialize(e,s,n,r,o,{paths:{lines:a,points:c},rotation:h,thickness:u}){const f=[];let p,g,_,v,E;switch(h){case 0:E=dt._rescale,p=-e/n,g=s/r+1,_=1/n,v=-1/r;break;case 90:E=dt._rescaleAndSwap,p=-s/r,g=-e/n,_=1/r,v=1/n;break;case 180:E=dt._rescale,p=e/n+1,g=-s/r,_=-1/n,v=1/r;break;case 270:E=dt._rescaleAndSwap,p=s/r+1,g=e/n+1,_=-1/r,v=-1/n;break}if(!a){a=[];for(const C of c){const T=C.length;if(T===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,C[0],C[1]]));continue}if(T===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,C[0],C[1],NaN,NaN,NaN,NaN,C[2],C[3]]));continue}const R=new Float32Array(3*(T-2));a.push(R);let[I,F,N,H]=C.subarray(0,4);R.set([NaN,NaN,NaN,NaN,I,F],0);for(let U=4;U<T;U+=2){const Q=C[U],tt=C[U+1];R.set(dt.createBezierPoints(I,F,N,H,Q,tt),(U-2)*3),[I,F,N,H]=[N,H,Q,tt]}}}for(let C=0,T=a.length;C<T;C++)f.push({line:E(a[C].map(R=>R??NaN),p,g,_,v),points:E(c[C].map(R=>R??NaN),p,g,_,v)});const S=new this.prototype.constructor;return S.build(f,n,r,1,h,u,o),S}get box(){return l(this,zs)}updateProperty(e,s){return e==="stroke-width"?A(this,_s,oS).call(this,s):null}updateParentDimensions([e,s],n){const[r,o]=A(this,_s,er).call(this);b(this,Fn,e),b(this,$n,s),b(this,fh,n);const[a,c]=A(this,_s,er).call(this),h=a-r,u=c-o,f=l(this,zs);return f[0]-=h,f[1]-=u,f[2]+=2*h,f[3]+=2*u,f}updateRotation(e){return b(this,Hd,e),{path:{transform:this.rotationTransform}}}get viewBox(){return l(this,zs).map(dt.svgRound).join(" ")}get defaultProperties(){const[e,s]=l(this,zs);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${dt.svgRound(e)} ${dt.svgRound(s)}`}}}get rotationTransform(){const[,,e,s]=l(this,zs);let n=0,r=0,o=0,a=0,c=0,h=0;switch(l(this,Hd)){case 90:r=s/e,o=-e/s,c=e;break;case 180:n=-1,a=-1,c=e,h=s;break;case 270:r=-s/e,o=e/s,h=s;break;default:return""}return`matrix(${n} ${r} ${o} ${a} ${dt.svgRound(c)} ${dt.svgRound(h)})`}getPathResizingSVGProperties([e,s,n,r]){const[o,a]=A(this,_s,er).call(this),[c,h,u,f]=l(this,zs);if(Math.abs(u-o)<=dt.PRECISION||Math.abs(f-a)<=dt.PRECISION){const E=e+n/2-(c+u/2),S=s+r/2-(h+f/2);return{path:{"transform-origin":`${dt.svgRound(e)} ${dt.svgRound(s)}`,transform:`${this.rotationTransform} translate(${E} ${S})`}}}const p=(n-2*o)/(u-2*o),g=(r-2*a)/(f-2*a),_=u/n,v=f/r;return{path:{"transform-origin":`${dt.svgRound(c)} ${dt.svgRound(h)}`,transform:`${this.rotationTransform} scale(${_} ${v}) translate(${dt.svgRound(o)} ${dt.svgRound(a)}) scale(${p} ${g}) translate(${dt.svgRound(-o)} ${dt.svgRound(-a)})`}}}getPathResizedSVGProperties([e,s,n,r]){const[o,a]=A(this,_s,er).call(this),c=l(this,zs),[h,u,f,p]=c;if(c[0]=e,c[1]=s,c[2]=n,c[3]=r,Math.abs(f-o)<=dt.PRECISION||Math.abs(p-a)<=dt.PRECISION){const S=e+n/2-(h+f/2),C=s+r/2-(u+p/2);for(const{line:T,points:R}of l(this,_i))dt._translate(T,S,C,T),dt._translate(R,S,C,R);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${dt.svgRound(e)} ${dt.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const g=(n-2*o)/(f-2*o),_=(r-2*a)/(p-2*a),v=-g*(h+o)+e+o,E=-_*(u+a)+s+a;if(g!==1||_!==1||v!==0||E!==0)for(const{line:S,points:C}of l(this,_i))dt._rescale(S,v,E,g,_,S),dt._rescale(C,v,E,g,_,C);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${dt.svgRound(e)} ${dt.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,s],n){const[r,o]=n,a=l(this,zs),c=e-a[0],h=s-a[1];if(l(this,Fn)===r&&l(this,$n)===o)for(const{line:u,points:f}of l(this,_i))dt._translate(u,c,h,u),dt._translate(f,c,h,f);else{const u=l(this,Fn)/r,f=l(this,$n)/o;b(this,Fn,r),b(this,$n,o);for(const{line:p,points:g}of l(this,_i))dt._rescale(p,c,h,u,f,p),dt._rescale(g,c,h,u,f,g);a[2]*=u,a[3]*=f}return a[0]=e,a[1]=s,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${dt.svgRound(e)} ${dt.svgRound(s)}`}}}get defaultSVGProperties(){const e=l(this,zs);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${dt.svgRound(e[0])} ${dt.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}zs=new WeakMap,Hd=new WeakMap,jd=new WeakMap,_i=new WeakMap,Fn=new WeakMap,$n=new WeakMap,fh=new WeakMap,ph=new WeakMap,gl=new WeakMap,_s=new WeakSet,er=function(e=l(this,gl)){const s=l(this,jd)+e/2*l(this,fh);return l(this,ph)%180===0?[s/l(this,Fn),s/l(this,$n)]:[s/l(this,$n),s/l(this,Fn)]},nS=function(){const[e,s,n,r]=l(this,zs),[o,a]=A(this,_s,er).call(this,0);return[e+o,s+a,n-2*o,r-2*a]},rS=function(){const e=b(this,zs,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:r}of l(this,_i)){if(r.length<=12){for(let c=4,h=r.length;c<h;c+=6)_t.pointBoundingBox(r[c],r[c+1],e);continue}let o=r[4],a=r[5];for(let c=6,h=r.length;c<h;c+=6){const[u,f,p,g,_,v]=r.subarray(c,c+6);_t.bezierBoundingBox(o,a,u,f,p,g,_,v,e),o=_,a=v}}const[s,n]=A(this,_s,er).call(this);e[0]=Gs(e[0]-s,0,1),e[1]=Gs(e[1]-n,0,1),e[2]=Gs(e[2]+s,0,1),e[3]=Gs(e[3]+n,0,1),e[2]-=e[0],e[3]-=e[1]},oS=function(e){const[s,n]=A(this,_s,er).call(this);b(this,gl,e);const[r,o]=A(this,_s,er).call(this),[a,c]=[r-s,o-n],h=l(this,zs);return h[0]-=a,h[1]-=c,h[2]+=2*a,h[3]+=2*c,h};class yg extends sS{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:Se._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new yg(this._viewParameters);return t.updateAll(this),t}}var Jp,aS;const rc=class rc extends Dp{constructor(e){super({...e,name:"inkEditor"});w(this,Jp);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,s){Se.initialize(e,s),this._defaultDrawingOptions=new yg(s.viewParameters)}static getDefaultDrawingOptions(e){const s=this._defaultDrawingOptions.clone();return s.updateProperties(e),s}static get supportMultipleDrawings(){return!0}static get typesMap(){return Wt(this,"typesMap",new Map([[Yt.INK_THICKNESS,"stroke-width"],[Yt.INK_COLOR,"stroke"],[Yt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,s,n,r,o){return new tI(e,s,n,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,s,n,r,o,a){return tf.deserialize(e,s,n,r,o,a)}static async deserialize(e,s,n){let r=null;if(e instanceof kv){const{data:{inkLists:a,rect:c,rotation:h,id:u,color:f,opacity:p,borderStyle:{rawWidth:g},popupRef:_},parent:{page:{pageNumber:v}}}=e;r=e={annotationType:Lt.INK,color:Array.from(f),thickness:g,opacity:p,paths:{points:a},boxes:null,pageIndex:v-1,rect:c.slice(0),rotation:h,id:u,deleted:!1,popupRef:_}}const o=await super.deserialize(e,s,n);return o.annotationElementId=e.id||null,o._initialData=r,o}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:s,parent:n}=this;s.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(e,s.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:s,opacity:n}){this._drawingOptions=rc.getDefaultDrawingOptions({stroke:_t.makeHexColor(...e),"stroke-width":s,"stroke-opacity":n})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:s,points:n,rect:r}=this.serializeDraw(e),{_drawingOptions:{stroke:o,"stroke-opacity":a,"stroke-width":c}}=this,h={annotationType:Lt.INK,color:Se._colorManager.convert(o),opacity:a,thickness:c,paths:{lines:s,points:n},pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(h.isCopy=!0,h):this.annotationElementId&&!A(this,Jp,aS).call(this,h)?null:(h.id=this.annotationElementId,h)}renderAnnotationElement(e){const{points:s,rect:n}=this.serializeDraw(!1);return e.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:s}),null}};Jp=new WeakSet,aS=function(e){const{color:s,thickness:n,opacity:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((a,c)=>a!==s[c])||e.thickness!==n||e.opacity!==r||e.pageIndex!==o},Z(rc,"_type","ink"),Z(rc,"_editorType",Lt.INK),Z(rc,"_defaultDrawingOptions",null);let Bb=rc;class Hb extends tf{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const kf=8,Nh=3;var ml,re,jb,on,lS,cS,Vb,cp,hS,uS,dS,Ub,zb,fS;class Or{static extractContoursFromText(t,{fontFamily:e,fontStyle:s,fontWeight:n},r,o,a,c){let h=new OffscreenCanvas(1,1),u=h.getContext("2d",{alpha:!1});const f=200,p=u.font=`${s} ${n} ${f}px ${e}`,{actualBoundingBoxLeft:g,actualBoundingBoxRight:_,actualBoundingBoxAscent:v,actualBoundingBoxDescent:E,fontBoundingBoxAscent:S,fontBoundingBoxDescent:C,width:T}=u.measureText(t),R=1.5,I=Math.ceil(Math.max(Math.abs(g)+Math.abs(_)||0,T)*R),F=Math.ceil(Math.max(Math.abs(v)+Math.abs(E)||f,Math.abs(S)+Math.abs(C)||f)*R);h=new OffscreenCanvas(I,F),u=h.getContext("2d",{alpha:!0,willReadFrequently:!0}),u.font=p,u.filter="grayscale(1)",u.fillStyle="white",u.fillRect(0,0,I,F),u.fillStyle="black",u.fillText(t,I*(R-1)/2,F*(3-R)/2);const N=A(this,re,Ub).call(this,u.getImageData(0,0,I,F).data),H=A(this,re,dS).call(this,N),U=A(this,re,zb).call(this,H),Q=A(this,re,Vb).call(this,N,I,F,U);return this.processDrawnLines({lines:{curves:Q,width:I,height:F},pageWidth:r,pageHeight:o,rotation:a,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(t,e,s,n,r){const[o,a,c]=A(this,re,fS).call(this,t),[h,u]=A(this,re,uS).call(this,o,a,c,Math.hypot(a,c)*l(this,ml).sigmaSFactor,l(this,ml).sigmaR,l(this,ml).kernelSize),f=A(this,re,zb).call(this,u),p=A(this,re,Vb).call(this,h,a,c,f);return this.processDrawnLines({lines:{curves:p,width:a,height:c},pageWidth:e,pageHeight:s,rotation:n,innerMargin:r,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:s,rotation:n,innerMargin:r,mustSmooth:o,areContours:a}){n%180!==0&&([e,s]=[s,e]);const{curves:c,width:h,height:u}=t,f=t.thickness??0,p=[],g=Math.min(e/h,s/u),_=g/e,v=g/s,E=[];for(const{points:C}of c){const T=o?A(this,re,hS).call(this,C):C;if(!T)continue;E.push(T);const R=T.length,I=new Float32Array(R),F=new Float32Array(3*(R===2?2:R-2));if(p.push({line:F,points:I}),R===2){I[0]=T[0]*_,I[1]=T[1]*v,F.set([NaN,NaN,NaN,NaN,I[0],I[1]],0);continue}let[N,H,U,Q]=T;N*=_,H*=v,U*=_,Q*=v,I.set([N,H,U,Q],0),F.set([NaN,NaN,NaN,NaN,N,H],0);for(let tt=4;tt<R;tt+=2){const Et=I[tt]=T[tt]*_,At=I[tt+1]=T[tt+1]*v;F.set(dt.createBezierPoints(N,H,U,Q,Et,At),(tt-2)*3),[N,H,U,Q]=[U,Q,Et,At]}}if(p.length===0)return null;const S=a?new Hb:new tf;return S.build(p,e,s,1,n,a?0:f,r),{outline:S,newCurves:E,areContours:a,thickness:f,width:h,height:u}}static async compressSignature({outlines:t,areContours:e,thickness:s,width:n,height:r}){let o=1/0,a=-1/0,c=0;for(const T of t){c+=T.length;for(let R=2,I=T.length;R<I;R++){const F=T[R]-T[R-2];o=Math.min(o,F),a=Math.max(a,F)}}let h;o>=-128&&a<=127?h=Int8Array:o>=-32768&&a<=32767?h=Int16Array:h=Int32Array;const u=t.length,f=kf+Nh*u,p=new Uint32Array(f);let g=0;p[g++]=f*Uint32Array.BYTES_PER_ELEMENT+(c-2*u)*h.BYTES_PER_ELEMENT,p[g++]=0,p[g++]=n,p[g++]=r,p[g++]=e?0:1,p[g++]=Math.max(0,Math.floor(s??0)),p[g++]=u,p[g++]=h.BYTES_PER_ELEMENT;for(const T of t)p[g++]=T.length-2,p[g++]=T[0],p[g++]=T[1];const _=new CompressionStream("deflate-raw"),v=_.writable.getWriter();await v.ready,v.write(p);const E=h.prototype.constructor;for(const T of t){const R=new E(T.length-2);for(let I=2,F=T.length;I<F;I++)R[I-2]=T[I]-T[I-2];v.write(R)}v.close();const S=await new Response(_.readable).arrayBuffer(),C=new Uint8Array(S);return g0(C)}static async decompressSignature(t){try{const e=xR(t),{readable:s,writable:n}=new DecompressionStream("deflate-raw"),r=n.getWriter();await r.ready,r.write(e).then(async()=>{await r.ready,await r.close()}).catch(()=>{});let o=null,a=0;for await(const T of s)o||(o=new Uint8Array(new Uint32Array(T.buffer,0,4)[0])),o.set(T,a),a+=T.length;const c=new Uint32Array(o.buffer,0,o.length>>2),h=c[1];if(h!==0)throw new Error(`Invalid version: ${h}`);const u=c[2],f=c[3],p=c[4]===0,g=c[5],_=c[6],v=c[7],E=[],S=(kf+Nh*_)*Uint32Array.BYTES_PER_ELEMENT;let C;switch(v){case Int8Array.BYTES_PER_ELEMENT:C=new Int8Array(o.buffer,S);break;case Int16Array.BYTES_PER_ELEMENT:C=new Int16Array(o.buffer,S);break;case Int32Array.BYTES_PER_ELEMENT:C=new Int32Array(o.buffer,S);break}a=0;for(let T=0;T<_;T++){const R=c[Nh*T+kf],I=new Float32Array(R+2);E.push(I);for(let F=0;F<Nh-1;F++)I[F]=c[Nh*T+kf+F+1];for(let F=0;F<R;F++)I[F+2]=I[F]+C[a++]}return{areContours:p,thickness:g,outlines:E,width:u,height:f}}catch(e){return Ot(`decompressSignature: ${e}`),null}}}ml=new WeakMap,re=new WeakSet,jb=function(t,e,s,n){return s-=t,n-=e,s===0?n>0?0:4:s===1?n+6:2-n},on=new WeakMap,lS=function(t,e,s,n,r,o,a){const c=A(this,re,jb).call(this,s,n,r,o);for(let h=0;h<8;h++){const u=(-h+c-a+16)%8,f=l(this,on)[2*u],p=l(this,on)[2*u+1];if(t[(s+f)*e+(n+p)]!==0)return u}return-1},cS=function(t,e,s,n,r,o,a){const c=A(this,re,jb).call(this,s,n,r,o);for(let h=0;h<8;h++){const u=(h+c+a+16)%8,f=l(this,on)[2*u],p=l(this,on)[2*u+1];if(t[(s+f)*e+(n+p)]!==0)return u}return-1},Vb=function(t,e,s,n){const r=t.length,o=new Int32Array(r);for(let u=0;u<r;u++)o[u]=t[u]<=n?1:0;for(let u=1;u<s-1;u++)o[u*e]=o[u*e+e-1]=0;for(let u=0;u<e;u++)o[u]=o[e*s-1-u]=0;let a=1,c;const h=[];for(let u=1;u<s-1;u++){c=1;for(let f=1;f<e-1;f++){const p=u*e+f,g=o[p];if(g===0)continue;let _=u,v=f;if(g===1&&o[p-1]===0)a+=1,v-=1;else if(g>=1&&o[p+1]===0)a+=1,v+=1,g>1&&(c=g);else{g!==1&&(c=Math.abs(g));continue}const E=[f,u],S=v===f+1,C={isHole:S,points:E,id:a,parent:0};h.push(C);let T;for(const tt of h)if(tt.id===c){T=tt;break}T?T.isHole?C.parent=S?T.parent:c:C.parent=S?c:T.parent:C.parent=S?c:0;const R=A(this,re,lS).call(this,o,e,u,f,_,v,0);if(R===-1){o[p]=-a,o[p]!==1&&(c=Math.abs(o[p]));continue}let I=l(this,on)[2*R],F=l(this,on)[2*R+1];const N=u+I,H=f+F;_=N,v=H;let U=u,Q=f;for(;;){const tt=A(this,re,cS).call(this,o,e,U,Q,_,v,1);I=l(this,on)[2*tt],F=l(this,on)[2*tt+1];const Et=U+I,At=Q+F;E.push(At,Et);const Rt=U*e+Q;if(o[Rt+1]===0?o[Rt]=-a:o[Rt]===1&&(o[Rt]=a),Et===u&&At===f&&U===N&&Q===H){o[p]!==1&&(c=Math.abs(o[p]));break}else _=U,v=Q,U=Et,Q=At}}}return h},cp=function(t,e,s,n){if(s-e<=4){for(let N=e;N<s-2;N+=2)n.push(t[N],t[N+1]);return}const r=t[e],o=t[e+1],a=t[s-4]-r,c=t[s-3]-o,h=Math.hypot(a,c),u=a/h,f=c/h,p=u*o-f*r,g=c/a,_=1/h,v=Math.atan(g),E=Math.cos(v),S=Math.sin(v),C=_*(Math.abs(E)+Math.abs(S)),T=_*(1-C+C**2),R=Math.max(Math.atan(Math.abs(S+E)*T),Math.atan(Math.abs(S-E)*T));let I=0,F=e;for(let N=e+2;N<s-2;N+=2){const H=Math.abs(p-u*t[N+1]+f*t[N]);H>I&&(F=N,I=H)}I>(h*R)**2?(A(this,re,cp).call(this,t,e,F+2,n),A(this,re,cp).call(this,t,F,s,n)):n.push(r,o)},hS=function(t){const e=[],s=t.length;return A(this,re,cp).call(this,t,0,s,e),e.push(t[s-2],t[s-1]),e.length<=4?null:e},uS=function(t,e,s,n,r,o){const a=new Float32Array(o**2),c=-2*n**2,h=o>>1;for(let v=0;v<o;v++){const E=(v-h)**2;for(let S=0;S<o;S++)a[v*o+S]=Math.exp((E+(S-h)**2)/c)}const u=new Float32Array(256),f=-2*r**2;for(let v=0;v<256;v++)u[v]=Math.exp(v**2/f);const p=t.length,g=new Uint8Array(p),_=new Uint32Array(256);for(let v=0;v<s;v++)for(let E=0;E<e;E++){const S=v*e+E,C=t[S];let T=0,R=0;for(let F=0;F<o;F++){const N=v+F-h;if(!(N<0||N>=s))for(let H=0;H<o;H++){const U=E+H-h;if(U<0||U>=e)continue;const Q=t[N*e+U],tt=a[F*o+H]*u[Math.abs(Q-C)];T+=Q*tt,R+=tt}}const I=g[S]=Math.round(T/R);_[I]++}return[g,_]},dS=function(t){const e=new Uint32Array(256);for(const s of t)e[s]++;return e},Ub=function(t){const e=t.length,s=new Uint8ClampedArray(e>>2);let n=-1/0,r=1/0;for(let a=0,c=s.length;a<c;a++){if(t[(a<<2)+3]===0){n=s[a]=255;continue}const u=s[a]=t[a<<2];u>n&&(n=u),u<r&&(r=u)}const o=255/(n-r);for(let a=0;a<e;a++)s[a]=(s[a]-r)*o;return s},zb=function(t){let e,s=-1/0,n=-1/0;const r=t.findIndex(c=>c!==0);let o=r,a=r;for(e=r;e<256;e++){const c=t[e];c>s&&(e-o>n&&(n=e-o,a=e-1),s=c,o=e)}for(e=a-1;e>=0&&!(t[e]>t[e+1]);e--);return e},fS=function(t){const e=t,{width:s,height:n}=t,{maxDim:r}=l(this,ml);let o=s,a=n;if(s>r||n>r){let p=s,g=n,_=Math.log2(Math.max(s,n)/r);const v=Math.floor(_);_=_===v?v-1:v;for(let S=0;S<_;S++){o=p,a=g,o>r&&(o=Math.ceil(o/2)),a>r&&(a=Math.ceil(a/2));const C=new OffscreenCanvas(o,a);C.getContext("2d").drawImage(t,0,0,p,g,0,0,o,a),p=o,g=a,t!==e&&t.close(),t=C.transferToImageBitmap()}const E=Math.min(r/o,r/a);o=Math.round(o*E),a=Math.round(a*E)}const h=new OffscreenCanvas(o,a).getContext("2d",{willReadFrequently:!0});h.filter="grayscale(1)",h.drawImage(t,0,0,t.width,t.height,0,0,o,a);const u=h.getImageData(0,0,o,a).data;return[A(this,re,Ub).call(this,u),o,a]},w(Or,re),w(Or,ml,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),w(Or,on,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class Iv extends sS{constructor(){super(),super.updateProperties({fill:Se._defaultLineColor,"stroke-width":0})}clone(){const t=new Iv;return t.updateAll(this),t}}class Lv extends yg{constructor(t){super(t),super.updateProperties({stroke:Se._defaultLineColor,"stroke-width":1})}clone(){const t=new Lv(this._viewParameters);return t.updateAll(this),t}}var Ro,yi,ko,Io;const li=class li extends Dp{constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"});w(this,Ro,!1);w(this,yi,null);w(this,ko,null);w(this,Io,null);this._willKeepAspectRatio=!0,b(this,ko,e.signatureData||null),b(this,yi,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,s){Se.initialize(e,s),this._defaultDrawingOptions=new Iv,this._defaultDrawnSignatureOptions=new Lv(s.viewParameters)}static getDefaultDrawingOptions(e){const s=this._defaultDrawingOptions.clone();return s.updateProperties(e),s}static get supportMultipleDrawings(){return!1}static get typesMap(){return Wt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!l(this,yi)}}static computeTelemetryFinalData(e){const s=e.get("hasDescription");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,s;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,e=this.x,s=this.y),super.render(),this._drawId===null)if(l(this,ko)){const{lines:r,mustSmooth:o,areContours:a,description:c,uuid:h,heightInPage:u}=l(this,ko),{rawDims:{pageWidth:f,pageHeight:p},rotation:g}=this.parent.viewport,_=Or.processDrawnLines({lines:r,pageWidth:f,pageHeight:p,rotation:g,innerMargin:li._INNER_MARGIN,mustSmooth:o,areContours:a});this.addSignature(_,u,c,h)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return n&&(this._isCopy=!0,this._moveAfterPaste(e,s)),this.div}setUuid(e){b(this,Io,e),this.addEditToolbar()}getUuid(){return l(this,Io)}get description(){return l(this,yi)}set description(e){b(this,yi,e),super.addEditToolbar().then(s=>{s==null||s.updateEditSignatureButton(e)})}getSignaturePreview(){const{newCurves:e,areContours:s,thickness:n,width:r,height:o}=l(this,ko),a=Math.max(r,o),c=Or.processDrawnLines({lines:{curves:e.map(h=>({points:h})),thickness:n,width:r,height:o},pageWidth:a,pageHeight:a,rotation:0,innerMargin:0,mustSmooth:!1,areContours:s});return{areContours:s,outline:c.outline}}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.signatureManager&&l(this,yi)!==null&&(await e.addEditSignatureButton(this._uiManager.signatureManager,l(this,Io),l(this,yi)),e.show()),e):null}addSignature(e,s,n,r){const{x:o,y:a}=this,{outline:c}=b(this,ko,e);b(this,Ro,c instanceof Hb),b(this,yi,n),this.div.setAttribute("data-l10n-args",JSON.stringify({description:n}));let h;l(this,Ro)?h=li.getDefaultDrawingOptions():(h=li._defaultDrawnSignatureOptions.clone(),h.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:h});const[u,f]=this.parentDimensions,[,p]=this.pageDimensions;let g=s/p;g=g>=1?.5:g,this.width*=g/this.height,this.width>=1&&(g*=.9/this.width,this.width=.9),this.height=g,this.setDims(u*this.width,f*this.height),this.x=o,this.y=a,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:s,pageHeight:n},rotation:r}=this.parent.viewport;return Or.process(e,s,n,r,li._INNER_MARGIN)}getFromText(e,s){const{rawDims:{pageWidth:n,pageHeight:r},rotation:o}=this.parent.viewport;return Or.extractContoursFromText(e,s,n,r,o,li._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:s,pageHeight:n},rotation:r}=this.parent.viewport;return Or.processDrawnLines({lines:e,pageWidth:s,pageHeight:n,rotation:r,innerMargin:li._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:s}){e?this._drawingOptions=li.getDefaultDrawingOptions():(this._drawingOptions=li._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":s}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:s,points:n,rect:r}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":o}}=this,a={annotationType:Lt.SIGNATURE,isSignature:!0,areContours:l(this,Ro),color:[0,0,0],thickness:l(this,Ro)?0:o,pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(a.paths={lines:s,points:n},a.uuid=l(this,Io),a.isCopy=!0):a.lines=s,l(this,yi)&&(a.accessibilityData={type:"Figure",alt:l(this,yi)}),a}static deserializeDraw(e,s,n,r,o,a){return a.areContours?Hb.deserialize(e,s,n,r,o,a):tf.deserialize(e,s,n,r,o,a)}static async deserialize(e,s,n){var o;const r=await super.deserialize(e,s,n);return b(r,Ro,e.areContours),b(r,yi,((o=e.accessibilityData)==null?void 0:o.alt)||""),b(r,Io,e.uuid),r}};Ro=new WeakMap,yi=new WeakMap,ko=new WeakMap,Io=new WeakMap,Z(li,"_type","signature"),Z(li,"_editorType",Lt.SIGNATURE),Z(li,"_defaultDrawingOptions",null);let qb=li;var Pe,us,Lo,Pr,Mo,gh,Rr,bl,Bn,wi,mh,Zt,Zh,tu,hp,up,dp,Gb,fp,pS;class Wb extends Se{constructor(e){super({...e,name:"stampEditor"});w(this,Zt);w(this,Pe,null);w(this,us,null);w(this,Lo,null);w(this,Pr,null);w(this,Mo,null);w(this,gh,"");w(this,Rr,null);w(this,bl,!1);w(this,Bn,null);w(this,wi,!1);w(this,mh,!1);b(this,Pr,e.bitmapUrl),b(this,Mo,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,s){Se.initialize(e,s)}static isHandlingMimeForPasting(e){return Bm.includes(e)}static paste(e,s){s.pasteEditor(Lt.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const s=e.get("hasAltText");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}async mlGuessAltText(e=null,s=!0){if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:a}=e||this.copyCanvas(null,null,!0).imageData,c=await n.guess({name:"altText",request:{data:r,width:o,height:a,channels:r.length/(o*a)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const h=c.output;return await this.setGuessedAltText(h),s&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}remove(){var e;l(this,us)&&(b(this,Pe,null),this._uiManager.imageManager.deleteId(l(this,us)),(e=l(this,Rr))==null||e.remove(),b(this,Rr,null),l(this,Bn)&&(clearTimeout(l(this,Bn)),b(this,Bn,null))),super.remove()}rebuild(){if(!this.parent){l(this,us)&&A(this,Zt,hp).call(this);return}super.rebuild(),this.div!==null&&(l(this,us)&&l(this,Rr)===null&&A(this,Zt,hp).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(l(this,Lo)||l(this,Pe)||l(this,Pr)||l(this,Mo)||l(this,us)||l(this,bl))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,s;return this._isCopy&&(e=this.x,s=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),l(this,bl)||(l(this,Pe)?A(this,Zt,up).call(this):A(this,Zt,hp).call(this)),this._isCopy&&this._moveAfterPaste(e,s),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,s){const{id:n,bitmap:r}=this._uiManager.imageManager.getFromCanvas(e,s);s.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(b(this,us,n),r&&b(this,Pe,r),b(this,bl,!1),A(this,Zt,up).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;l(this,Bn)!==null&&clearTimeout(l(this,Bn)),b(this,Bn,setTimeout(()=>{b(this,Bn,null),A(this,Zt,Gb).call(this)},200))}copyCanvas(e,s,n=!1){var g;e||(e=224);const{width:r,height:o}=l(this,Pe),a=new jr;let c=l(this,Pe),h=r,u=o,f=null;if(s){if(r>s||o>s){const H=Math.min(s/r,s/o);h=Math.floor(r*H),u=Math.floor(o*H)}f=document.createElement("canvas");const _=f.width=Math.ceil(h*a.sx),v=f.height=Math.ceil(u*a.sy);l(this,wi)||(c=A(this,Zt,dp).call(this,_,v));const E=f.getContext("2d");E.filter=this._uiManager.hcmFilter;let S="white",C="#cfcfd8";this._uiManager.hcmFilter!=="none"?C="black":(g=window.matchMedia)!=null&&g.call(window,"(prefers-color-scheme: dark)").matches&&(S="#8f8f9d",C="#42414d");const T=15,R=T*a.sx,I=T*a.sy,F=new OffscreenCanvas(R*2,I*2),N=F.getContext("2d");N.fillStyle=S,N.fillRect(0,0,R*2,I*2),N.fillStyle=C,N.fillRect(0,0,R,I),N.fillRect(R,I,R,I),E.fillStyle=E.createPattern(F,"repeat"),E.fillRect(0,0,_,v),E.drawImage(c,0,0,c.width,c.height,0,0,_,v)}let p=null;if(n){let _,v;if(a.symmetric&&c.width<e&&c.height<e)_=c.width,v=c.height;else if(c=l(this,Pe),r>e||o>e){const C=Math.min(e/r,e/o);_=Math.floor(r*C),v=Math.floor(o*C),l(this,wi)||(c=A(this,Zt,dp).call(this,_,v))}const S=new OffscreenCanvas(_,v).getContext("2d",{willReadFrequently:!0});S.drawImage(c,0,0,c.width,c.height,0,0,_,v),p={width:_,height:v,data:S.getImageData(0,0,_,v).data}}return{canvas:f,width:h,height:u,imageData:p}}static async deserialize(e,s,n){var E;let r=null,o=!1;if(e instanceof RE){const{data:{rect:S,rotation:C,id:T,structParent:R,popupRef:I},container:F,parent:{page:{pageNumber:N}},canvas:H}=e;let U,Q;H?(delete e.canvas,{id:U,bitmap:Q}=n.imageManager.getFromCanvas(F.id,H),H.remove()):(o=!0,e._hasNoCanvas=!0);const tt=((E=await s._structTree.getAriaAttributes(`${wv}${T}`))==null?void 0:E.get("aria-label"))||"";r=e={annotationType:Lt.STAMP,bitmapId:U,bitmap:Q,pageIndex:N-1,rect:S.slice(0),rotation:C,id:T,deleted:!1,accessibilityData:{decorative:!1,altText:tt},isSvg:!1,structParent:R,popupRef:I}}const a=await super.deserialize(e,s,n),{rect:c,bitmap:h,bitmapUrl:u,bitmapId:f,isSvg:p,accessibilityData:g}=e;o?(n.addMissingCanvas(e.id,a),b(a,bl,!0)):f&&n.imageManager.isValidId(f)?(b(a,us,f),h&&b(a,Pe,h)):b(a,Pr,u),b(a,wi,p);const[_,v]=a.pageDimensions;return a.width=(c[2]-c[0])/_,a.height=(c[3]-c[1])/v,a.annotationElementId=e.id||null,g&&(a.altTextData=g),a._initialData=r,b(a,mh,!!r),a}serialize(e=!1,s=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n={annotationType:Lt.STAMP,bitmapId:l(this,us),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:l(this,wi),structTreeParentId:this._structTreeParentId};if(e)return n.bitmapUrl=A(this,Zt,fp).call(this,!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(n.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const c=A(this,Zt,pS).call(this,n);if(c.isSame)return null;c.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1}if(n.id=this.annotationElementId,s===null)return n;s.stamps||(s.stamps=new Map);const a=l(this,wi)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!s.stamps.has(l(this,us)))s.stamps.set(l(this,us),{area:a,serialized:n}),n.bitmap=A(this,Zt,fp).call(this,!1);else if(l(this,wi)){const c=s.stamps.get(l(this,us));a>c.area&&(c.area=a,c.serialized.bitmap.close(),c.serialized.bitmap=A(this,Zt,fp).call(this,!1))}return n}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}}Pe=new WeakMap,us=new WeakMap,Lo=new WeakMap,Pr=new WeakMap,Mo=new WeakMap,gh=new WeakMap,Rr=new WeakMap,bl=new WeakMap,Bn=new WeakMap,wi=new WeakMap,mh=new WeakMap,Zt=new WeakSet,Zh=function(e,s=!1){if(!e){this.remove();return}b(this,Pe,e.bitmap),s||(b(this,us,e.id),b(this,wi,e.isSvg)),e.file&&b(this,gh,e.file.name),A(this,Zt,up).call(this)},tu=function(){if(b(this,Lo,null),this._uiManager.enableWaiting(!1),!!l(this,Rr)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,Pe)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,Pe)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},hp=function(){if(l(this,us)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(l(this,us)).then(n=>A(this,Zt,Zh).call(this,n,!0)).finally(()=>A(this,Zt,tu).call(this));return}if(l(this,Pr)){const n=l(this,Pr);b(this,Pr,null),this._uiManager.enableWaiting(!0),b(this,Lo,this._uiManager.imageManager.getFromUrl(n).then(r=>A(this,Zt,Zh).call(this,r)).finally(()=>A(this,Zt,tu).call(this)));return}if(l(this,Mo)){const n=l(this,Mo);b(this,Mo,null),this._uiManager.enableWaiting(!0),b(this,Lo,this._uiManager.imageManager.getFromFile(n).then(r=>A(this,Zt,Zh).call(this,r)).finally(()=>A(this,Zt,tu).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=Bm.join(",");const s=this._uiManager._signal;b(this,Lo,new Promise(n=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),A(this,Zt,Zh).call(this,r)}n()},{signal:s}),e.addEventListener("cancel",()=>{this.remove(),n()},{signal:s})}).finally(()=>A(this,Zt,tu).call(this))),e.click()},up=function(){var f;const{div:e}=this;let{width:s,height:n}=l(this,Pe);const[r,o]=this.pageDimensions,a=.75;if(this.width)s=this.width*r,n=this.height*o;else if(s>a*r||n>a*o){const p=Math.min(a*r/s,a*o/n);s*=p,n*=p}const[c,h]=this.parentDimensions;this.setDims(s*c/r,n*h/o),this._uiManager.enableWaiting(!1);const u=b(this,Rr,document.createElement("canvas"));u.setAttribute("role","img"),this.addContainer(u),this.width=s/r,this.height=n/o,(f=this._initialOptions)!=null&&f.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),A(this,Zt,Gb).call(this),l(this,mh)||(this.parent.addUndoableEditor(this),b(this,mh,!0)),this._reportTelemetry({action:"inserted_image"}),l(this,gh)&&this.div.setAttribute("aria-description",l(this,gh))},dp=function(e,s){const{width:n,height:r}=l(this,Pe);let o=n,a=r,c=l(this,Pe);for(;o>2*e||a>2*s;){const h=o,u=a;o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*s&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const f=new OffscreenCanvas(o,a);f.getContext("2d").drawImage(c,0,0,h,u,0,0,o,a),c=f.transferToImageBitmap()}return c},Gb=function(){const[e,s]=this.parentDimensions,{width:n,height:r}=this,o=new jr,a=Math.ceil(n*e*o.sx),c=Math.ceil(r*s*o.sy),h=l(this,Rr);if(!h||h.width===a&&h.height===c)return;h.width=a,h.height=c;const u=l(this,wi)?l(this,Pe):A(this,Zt,dp).call(this,a,c),f=h.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(u,0,0,u.width,u.height,0,0,a,c)},fp=function(e){if(e){if(l(this,wi)){const r=this._uiManager.imageManager.getSvgUrl(l(this,us));if(r)return r}const s=document.createElement("canvas");return{width:s.width,height:s.height}=l(this,Pe),s.getContext("2d").drawImage(l(this,Pe),0,0),s.toDataURL()}if(l(this,wi)){const[s,n]=this.pageDimensions,r=Math.round(this.width*s*zo.PDF_TO_CSS_UNITS),o=Math.round(this.height*n*zo.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(r,o);return a.getContext("2d").drawImage(l(this,Pe),0,0,l(this,Pe).width,l(this,Pe).height,0,0,r,o),a.transferToImageBitmap()}return structuredClone(l(this,Pe))},pS=function(e){var a;const{pageIndex:s,accessibilityData:{altText:n}}=this._initialData,r=e.pageIndex===s,o=(((a=e.accessibilityData)==null?void 0:a.alt)||"")===n;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}},Z(Wb,"_type","stamp"),Z(Wb,"_editorType",Lt.STAMP);var vl,bh,Hn,Do,kr,ji,Oo,vh,_l,an,Ir,Rs,Lr,wt,No,ke,gS,An,Kb,Yb,pp;const Ki=class Ki{constructor({uiManager:t,pageIndex:e,div:s,structTreeLayer:n,accessibilityManager:r,annotationLayer:o,drawLayer:a,textLayer:c,viewport:h,l10n:u}){w(this,ke);w(this,vl);w(this,bh,!1);w(this,Hn,null);w(this,Do,null);w(this,kr,null);w(this,ji,new Map);w(this,Oo,!1);w(this,vh,!1);w(this,_l,!1);w(this,an,null);w(this,Ir,null);w(this,Rs,null);w(this,Lr,null);w(this,wt);const f=[...l(Ki,No).values()];if(!Ki._initialized){Ki._initialized=!0;for(const p of f)p.initialize(u,t)}t.registerEditorTypes(f),b(this,wt,t),this.pageIndex=e,this.div=s,b(this,vl,r),b(this,Hn,o),this.viewport=h,b(this,Rs,c),this.drawLayer=a,this._structTree=n,l(this,wt).addLayer(this)}get isEmpty(){return l(this,ji).size===0}get isInvisible(){return this.isEmpty&&l(this,wt).getMode()===Lt.NONE}updateToolbar(t){l(this,wt).updateToolbar(t)}updateMode(t=l(this,wt).getMode()){switch(A(this,ke,pp).call(this),t){case Lt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Lt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Lt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const s of l(Ki,No).values())e.toggle(`${s._type}Editing`,t===s._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=l(this,Rs))==null?void 0:e.div)}setEditingState(t){l(this,wt).setEditingState(t)}addCommands(t){l(this,wt).addCommands(t)}cleanUndoStack(t){l(this,wt).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=l(this,Hn))==null||e.div.classList.toggle("disabled",!t)}async enable(){b(this,_l,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const s of l(this,ji).values())s.enableEditing(),s.show(!0),s.annotationElementId&&(l(this,wt).removeChangedExistingAnnotation(s),t.add(s.annotationElementId));if(!l(this,Hn)){b(this,_l,!1);return}const e=l(this,Hn).getEditableAnnotations();for(const s of e){if(s.hide(),l(this,wt).isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const n=await this.deserialize(s);n&&(this.addOrRebuild(n),n.enableEditing())}b(this,_l,!1)}disable(){var n;b(this,vh,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const r of l(this,ji).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){t.set(r.annotationElementId,r);continue}else e.set(r.annotationElementId,r);(n=this.getEditableAnnotation(r.annotationElementId))==null||n.show(),r.remove()}if(l(this,Hn)){const r=l(this,Hn).getEditableAnnotations();for(const o of r){const{id:a}=o.data;if(l(this,wt).isDeletedAnnotationElement(a))continue;let c=e.get(a);if(c){c.resetAnnotationElement(o),c.show(!1),o.show();continue}c=t.get(a),c&&(l(this,wt).addChangedExistingAnnotation(c),c.renderAnnotationElement(o)&&c.show(!1)),o.show()}}A(this,ke,pp).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const r of l(Ki,No).values())s.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),b(this,vh,!1)}getEditableAnnotation(t){var e;return((e=l(this,Hn))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){l(this,wt).getActive()!==t&&l(this,wt).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=l(this,Rs))!=null&&t.div&&!l(this,Lr)){b(this,Lr,new AbortController);const e=l(this,wt).combinedSignal(l(this,Lr));l(this,Rs).div.addEventListener("pointerdown",A(this,ke,gS).bind(this),{signal:e}),l(this,Rs).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=l(this,Rs))!=null&&t.div&&l(this,Lr)&&(l(this,Lr).abort(),b(this,Lr,null),l(this,Rs).div.classList.remove("highlighting"))}enableClick(){if(l(this,Do))return;b(this,Do,new AbortController);const t=l(this,wt).combinedSignal(l(this,Do));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=l(this,Do))==null||t.abort(),b(this,Do,null)}attach(t){l(this,ji).set(t.id,t);const{annotationElementId:e}=t;e&&l(this,wt).isDeletedAnnotationElement(e)&&l(this,wt).removeDeletedAnnotationElement(t)}detach(t){var e;l(this,ji).delete(t.id),(e=l(this,vl))==null||e.removePointerInTextLayer(t.contentDiv),!l(this,vh)&&t.annotationElementId&&l(this,wt).addDeletedAnnotationElement(t)}remove(t){this.detach(t),l(this,wt).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(l(this,wt).addDeletedAnnotationElement(t.annotationElementId),Se.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),l(this,wt).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!l(this,_l)),l(this,wt).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var s;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!l(this,kr)&&(t._focusEventsAllowed=!1,b(this,kr,setTimeout(()=>{b(this,kr,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:l(this,wt)._signal}),e.focus())},0))),t._structTreeParentId=(s=l(this,vl))==null?void 0:s.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),s=()=>{t.remove()};this.addCommands({cmd:e,undo:s,mustExec:!1})}getNextId(){return l(this,wt).getId()}combinedSignal(t){return l(this,wt).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=l(this,ke,An))==null?void 0:t.canCreateNewEmptyEditor()}async pasteEditor(t,e){l(this,wt).updateToolbar(t),await l(this,wt).updateMode(t);const{offsetX:s,offsetY:n}=A(this,ke,Yb).call(this),r=this.getNextId(),o=A(this,ke,Kb).call(this,{parent:this,id:r,x:s,y:n,uiManager:l(this,wt),isCentered:!0,...e});o&&this.add(o)}async deserialize(t){var e;return await((e=l(Ki,No).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,l(this,wt)))||null}createAndAddNewEditor(t,e,s={}){const n=this.getNextId(),r=A(this,ke,Kb).call(this,{parent:this,id:n,x:t.offsetX,y:t.offsetY,uiManager:l(this,wt),isCentered:e,...s});return r&&this.add(r),r}addNewEditor(t={}){this.createAndAddNewEditor(A(this,ke,Yb).call(this),!0,t)}setSelected(t){l(this,wt).setSelected(t)}toggleSelected(t){l(this,wt).toggleSelected(t)}unselect(t){l(this,wt).unselect(t)}pointerup(t){var n;const{isMac:e}=Es.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!l(this,Oo)||(b(this,Oo,!1),(n=l(this,ke,An))!=null&&n.isDrawer&&l(this,ke,An).supportMultipleDrawings))return;if(!l(this,bh)){b(this,bh,!0);return}const s=l(this,wt).getMode();if(s===Lt.STAMP||s===Lt.SIGNATURE){l(this,wt).unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){var n;if(l(this,wt).getMode()===Lt.HIGHLIGHT&&this.enableTextSelection(),l(this,Oo)){b(this,Oo,!1);return}const{isMac:e}=Es.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(b(this,Oo,!0),(n=l(this,ke,An))!=null&&n.isDrawer){this.startDrawingSession(t);return}const s=l(this,wt).getActive();b(this,bh,!s||s.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),l(this,an)){l(this,ke,An).startDrawing(this,l(this,wt),!1,t);return}l(this,wt).setCurrentDrawingSession(this),b(this,an,new AbortController);const e=l(this,wt).combinedSignal(l(this,an));this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(b(this,Ir,null),this.commitOrRemove())},{signal:e}),l(this,ke,An).startDrawing(this,l(this,wt),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&b(this,Ir,e);return}l(this,Ir)&&setTimeout(()=>{var e;(e=l(this,Ir))==null||e.focus(),b(this,Ir,null)},0)}endDrawingSession(t=!1){return l(this,an)?(l(this,wt).setCurrentDrawingSession(null),l(this,an).abort(),b(this,an,null),b(this,Ir,null),l(this,ke,An).endDrawing(t)):null}findNewParent(t,e,s){const n=l(this,wt).findParent(e,s);return n===null||n===this?!1:(n.changeParent(t),!0)}commitOrRemove(){return l(this,an)?(this.endDrawingSession(),!0):!1}onScaleChanging(){l(this,an)&&l(this,ke,An).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=l(this,wt).getActive())==null?void 0:t.parent)===this&&(l(this,wt).commitOrRemove(),l(this,wt).setActiveEditor(null)),l(this,kr)&&(clearTimeout(l(this,kr)),b(this,kr,null));for(const s of l(this,ji).values())(e=l(this,vl))==null||e.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,l(this,ji).clear(),l(this,wt).removeLayer(this)}render({viewport:t}){this.viewport=t,xl(this.div,t);for(const e of l(this,wt).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){l(this,wt).commitOrRemove(),A(this,ke,pp).call(this);const e=this.viewport.rotation,s=t.rotation;if(this.viewport=t,xl(this.div,{rotation:s}),e!==s)for(const n of l(this,ji).values())n.rotate(s)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return l(this,wt).viewParameters.realScale}};vl=new WeakMap,bh=new WeakMap,Hn=new WeakMap,Do=new WeakMap,kr=new WeakMap,ji=new WeakMap,Oo=new WeakMap,vh=new WeakMap,_l=new WeakMap,an=new WeakMap,Ir=new WeakMap,Rs=new WeakMap,Lr=new WeakMap,wt=new WeakMap,No=new WeakMap,ke=new WeakSet,gS=function(t){l(this,wt).unselectAll();const{target:e}=t;if(e===l(this,Rs).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&l(this,Rs).div.contains(e)){const{isMac:s}=Es.platform;if(t.button!==0||t.ctrlKey&&s)return;l(this,wt).showAllEditors("highlight",!0,!0),l(this,Rs).div.classList.add("free"),this.toggleDrawing(),Mp.startHighlighting(this,l(this,wt).direction==="ltr",{target:l(this,Rs).div,x:t.x,y:t.y}),l(this,Rs).div.addEventListener("pointerup",()=>{l(this,Rs).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:l(this,wt)._signal}),t.preventDefault()}},An=function(){return l(Ki,No).get(l(this,wt).getMode())},Kb=function(t){const e=l(this,ke,An);return e?new e.prototype.constructor(t):null},Yb=function(){const{x:t,y:e,width:s,height:n}=this.div.getBoundingClientRect(),r=Math.max(0,t),o=Math.max(0,e),a=Math.min(window.innerWidth,t+s),c=Math.min(window.innerHeight,e+n),h=(r+a)/2-t,u=(o+c)/2-e,[f,p]=this.viewport.rotation%180===0?[h,u]:[u,h];return{offsetX:f,offsetY:p}},pp=function(){for(const t of l(this,ji).values())t.isEmpty()&&t.remove()},Z(Ki,"_initialized",!1),w(Ki,No,new Map([Cb,Bb,Wb,Mp,qb].map(t=>[t._editorType,t])));let Xb=Ki;var ln,qs,yl,Vd,Zp,mS,Wn,Jb,bS,Zb;const ts=class ts{constructor({pageIndex:t}){w(this,Wn);w(this,ln,null);w(this,qs,new Map);w(this,yl,new Map);this.pageIndex=t}setParent(t){if(!l(this,ln)){b(this,ln,t);return}if(l(this,ln)!==t){if(l(this,qs).size>0)for(const e of l(this,qs).values())e.remove(),t.append(e);b(this,ln,t)}}static get _svgFactory(){return Wt(this,"_svgFactory",new kp)}draw(t,e=!1,s=!1){const n=Bs(ts,Vd)._++,r=A(this,Wn,Jb).call(this),o=ts._svgFactory.createElement("defs");r.append(o);const a=ts._svgFactory.createElement("path");o.append(a);const c=`path_p${this.pageIndex}_${n}`;a.setAttribute("id",c),a.setAttribute("vector-effect","non-scaling-stroke"),e&&l(this,yl).set(n,a);const h=s?A(this,Wn,bS).call(this,o,c):null,u=ts._svgFactory.createElement("use");return r.append(u),u.setAttribute("href",`#${c}`),this.updateProperties(r,t),l(this,qs).set(n,r),{id:n,clipPathId:`url(#${h})`}}drawOutline(t,e){const s=Bs(ts,Vd)._++,n=A(this,Wn,Jb).call(this),r=ts._svgFactory.createElement("defs");n.append(r);const o=ts._svgFactory.createElement("path");r.append(o);const a=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",a),o.setAttribute("vector-effect","non-scaling-stroke");let c;if(e){const f=ts._svgFactory.createElement("mask");r.append(f),c=`mask_p${this.pageIndex}_${s}`,f.setAttribute("id",c),f.setAttribute("maskUnits","objectBoundingBox");const p=ts._svgFactory.createElement("rect");f.append(p),p.setAttribute("width","1"),p.setAttribute("height","1"),p.setAttribute("fill","white");const g=ts._svgFactory.createElement("use");f.append(g),g.setAttribute("href",`#${a}`),g.setAttribute("stroke","none"),g.setAttribute("fill","black"),g.setAttribute("fill-rule","nonzero"),g.classList.add("mask")}const h=ts._svgFactory.createElement("use");n.append(h),h.setAttribute("href",`#${a}`),c&&h.setAttribute("mask",`url(#${c})`);const u=h.cloneNode();return n.append(u),h.classList.add("mainOutline"),u.classList.add("secondaryOutline"),this.updateProperties(n,t),l(this,qs).set(s,n),s}finalizeDraw(t,e){l(this,yl).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var c;if(!e)return;const{root:s,bbox:n,rootClass:r,path:o}=e,a=typeof t=="number"?l(this,qs).get(t):t;if(a){if(s&&A(this,Wn,Zb).call(this,a,s),n&&A(c=ts,Zp,mS).call(c,a,n),r){const{classList:h}=a;for(const[u,f]of Object.entries(r))h.toggle(u,f)}if(o){const u=a.firstChild.firstChild;A(this,Wn,Zb).call(this,u,o)}}}updateParent(t,e){if(e===this)return;const s=l(this,qs).get(t);s&&(l(e,ln).append(s),l(this,qs).delete(t),l(e,qs).set(t,s))}remove(t){l(this,yl).delete(t),l(this,ln)!==null&&(l(this,qs).get(t).remove(),l(this,qs).delete(t))}destroy(){b(this,ln,null);for(const t of l(this,qs).values())t.remove();l(this,qs).clear(),l(this,yl).clear()}};ln=new WeakMap,qs=new WeakMap,yl=new WeakMap,Vd=new WeakMap,Zp=new WeakSet,mS=function(t,[e,s,n,r]){const{style:o}=t;o.top=`${100*s}%`,o.left=`${100*e}%`,o.width=`${100*n}%`,o.height=`${100*r}%`},Wn=new WeakSet,Jb=function(){const t=ts._svgFactory.create(1,1,!0);return l(this,ln).append(t),t.setAttribute("aria-hidden",!0),t},bS=function(t,e){const s=ts._svgFactory.createElement("clipPath");t.append(s);const n=`clip_${e}`;s.setAttribute("id",n),s.setAttribute("clipPathUnits","objectBoundingBox");const r=ts._svgFactory.createElement("use");return s.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),n},Zb=function(t,e){for(const[s,n]of Object.entries(e))n===null?t.removeAttribute(s):t.setAttribute(s,n)},w(ts,Zp),w(ts,Vd,0);let Qb=ts;globalThis.pdfjsTestingUtils={HighlightOutliner:Pb};globalThis.pdfjsLib={AbortException:Uo,AnnotationEditorLayer:Xb,AnnotationEditorParamsType:Yt,AnnotationEditorType:Lt,AnnotationEditorUIManager:Cl,AnnotationLayer:Eb,AnnotationMode:Zr,AnnotationType:Ge,build:Mk,ColorPicker:Lp,createValidAbsoluteUrl:u0,DOMSVGFactory:kp,DrawLayer:Qb,FeatureTest:Es,fetchData:Kd,getDocument:pE,getFilenameFromUrl:CR,getPdfFilenameFromUrl:TR,getUuid:p0,getXfaPageViewport:PR,GlobalWorkerOptions:Vn,ImageKind:$f,InvalidPDFException:Fm,isDataScheme:vg,isPdfFile:Ev,isValidExplicitDest:Ck,MathClamp:Gs,noContextMenu:fn,normalizeUnicode:ER,OPS:Cp,OutputScale:jr,PasswordResponses:pR,PDFDataRangeTransport:gE,PDFDateString:Sv,PDFWorker:uc,PermissionFlag:fR,PixelsPerInch:zo,RenderingCancelledException:Av,ResponseException:Tp,setLayerDimensions:xl,shadow:Wt,SignatureExtractor:Or,stopEvent:Xe,SupportedImageMimeTypes:Bm,TextLayer:vu,TouchManager:Rp,updateUrlHash:d0,Util:_t,VerbosityLevel:gg,version:Lk,XfaLayer:bE};const eI={key:0,class:"position-absolute top-50 start-50 translate-middle"},sI={key:1,class:"position-absolute top-50 start-50 translate-middle text-center"},iI={class:"text-muted"},nI=Gn({__name:"PDFThumbnail",props:{pdfPath:{}},setup(i){Vn.workerSrc=new URL("/RestFigBank/assets/pdf.worker-DHtGXOM1.mjs",import.meta.url).toString();const t=i,e=zt(null),s=zt(null),n=zt(!0),r=zt(!1),o=zt(""),a=f=>{var p,g;return f.name==="InvalidPDFException"?"Le fichier PDF est invalide ou corrompu":(p=f.message)!=null&&p.includes("404")?"Le fichier PDF est introuvable":(g=f.message)!=null&&g.includes("Network")?"Erreur réseau lors du chargement du PDF":"Erreur lors du chargement du PDF"},c=f=>f.startsWith("/pdfs/")?bu+f:bu+"/pdfs/"+f.replace(/^\//,""),h=async f=>{try{const p=c(f),g=await fetch(p);if(!g.ok)throw new Error("Network response was not ok: "+g.status);const _=await g.arrayBuffer();if(_.byteLength===0)throw new Error("Le fichier PDF est vide");return _}catch(p){throw console.error("Error loading PDF:",p),p}},u=async f=>{try{if(n.value=!0,r.value=!1,o.value="",await $o(),!e.value)throw console.error("Canvas not found in DOM"),new Error("Canvas non initialisé");if(!s.value)throw console.error("Canvas container not found in DOM"),new Error("Conteneur du canvas non initialisé");let p=0;const g=10;for(;s.value.clientWidth===0&&p<g;)await new Promise(N=>setTimeout(N,100)),p++;const _=s.value.clientWidth;if(_===0)throw new Error("Le conteneur du canvas n'a pas de dimensions");const v=await h(f),S=await pE({data:v}).promise;if(S.numPages===0)throw new Error("Le PDF ne contient aucune page");const C=await S.getPage(1),T=C.getViewport({scale:1}),R=_/T.width,I=C.getViewport({scale:R});if(!e.value)throw new Error("Canvas perdu pendant le rendu");e.value.width=I.width,e.value.height=I.height;const F=e.value.getContext("2d");if(!F)throw new Error("Impossible d'obtenir le contexte du canvas");await C.render({canvasContext:F,viewport:I}).promise}catch(p){console.error("Error rendering PDF:",p),r.value=!0,o.value=a(p)}finally{n.value=!1}};return Wd(async()=>{await $o(),u(t.pdfPath)}),El(()=>t.pdfPath,f=>{u(f)}),(f,p)=>(pt(),vt("div",{class:"pdf-thumbnail",ref_key:"canvasContainer",ref:s},[Sn(L("canvas",{ref_key:"canvas",ref:e,class:"w-100 h-100"},null,512),[[RT,!r.value&&!n.value]]),n.value?(pt(),vt("div",eI,p[0]||(p[0]=[L("div",{class:"spinner-border text-primary",role:"status"},[L("span",{class:"visually-hidden"},"Chargement...")],-1)]))):is("",!0),r.value?(pt(),vt("div",sI,[p[1]||(p[1]=L("div",{class:"text-danger mb-2"},[L("i",{class:"bi bi-file-earmark-x fs-1"})],-1)),L("small",iI,Re(o.value),1)])):is("",!0)],512))}}),kl=(i,t)=>{const e=i.__vccOpts||i;for(const[s,n]of t)e[s]=n;return e},rI=kl(nI,[["__scopeId","data-v-09ca12ba"]]),oI=`${bu}/api/openai`;async function aI(i){const t=await fetch(oI,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:i})});if(!t.ok)throw new Error(`Erreur HTTP: ${t.status}`);const e=await t.json();return{documents:e.documents,searchSummary:e.searchSummary,suggestions:e.suggestions||[]}}const lI={class:"card shadow-sm mb-4"},cI={class:"card-body"},hI={key:0,class:"text-center text-muted"},uI={class:"small mb-0 text-start example-list"},dI={key:1,class:"messages"},fI={class:"message-content",style:{"white-space":"pre-line"}},pI=["disabled","onKeydown"],gI=["disabled"],mI={class:"button-content"},bI={key:0,class:"bi bi-arrow-repeat spin"},vI={key:1,class:"bi bi-search"},_I={key:2,class:"button-text"},yI={key:3,class:"button-text"},wI=Gn({__name:"SearchChatbot",props:{documents:{},messages:{},currentCriteria:{}},emits:["updateResults","updateMessages","updateCriteria"],setup(i,{emit:t}){const e=i,s=t,n=zt(""),r=zt(!1),o=zt(null),a=zt("");$e(()=>{var E,S,C,T;const v=e.currentCriteria;return(((E=v.levels)==null?void 0:E.length)??0)>0||(((S=v.vision)==null?void 0:S.length)??0)>0||(((C=v.instruments)==null?void 0:C.length)??0)>0||(((T=v.keywords)==null?void 0:T.length)??0)>0||v.withCost||v.isScaled||v.hasRotation});const c=zt(null),h=()=>{s("updateMessages",[]),s("updateCriteria",{}),s("updateResults",e.documents),n.value="",r.value=!1},u=(v,E)=>[...v.filter(T=>T.type==="user").slice(-9).map(T=>T.text),E].join(" "),f=async()=>{if(!(!n.value.trim()||r.value))try{r.value=!0;const v={text:n.value,type:"user"},E=[...e.messages,v];s("updateMessages",E);const S=u(e.messages,n.value);console.log("Prompt envoyé à l'API:",S);const C=await aI(S);console.log("Réponse de l'API:",C),a.value=C.searchSummary;let T=C.documents.length>0?`J'ai trouvé ${C.documents.length} document${C.documents.length>1?"s":""} correspondant à votre recherche.`:"Je n'ai trouvé aucun document correspondant à votre recherche. Essayez peut-être avec d'autres critères ?";C.suggestions&&C.suggestions.length>0&&(T+=`

`+C.suggestions.map(I=>`• ${I}`).join(`
`));const R={text:T,type:"bot"};s("updateMessages",[...E,R]),s("updateResults",C.documents),n.value=""}catch(v){console.error("Erreur lors de la recherche:",v);const E={text:"Désolé, une erreur est survenue lors de la recherche. Veuillez réessayer.",type:"bot"};s("updateMessages",[...e.messages,E])}finally{r.value=!1}},p=()=>{$o(()=>{const v=o.value;v&&(v.scrollTop=0,setTimeout(()=>{const E=v.scrollHeight-v.clientHeight,S=1e3,C=v.scrollTop,T=performance.now(),R=I=>{const F=I-T,N=Math.min(F/S,1),H=U=>U<.5?2*U*U:-1+(4-2*U)*U;v.scrollTop=C+(E-C)*H(N),N<1&&requestAnimationFrame(R)};requestAnimationFrame(R)},100))})},g=()=>{$o(()=>{const v=o.value;v&&(v.scrollTop=v.scrollHeight)})};El(()=>e.messages,()=>{g()},{deep:!0}),Wd(()=>{e.messages.length>0&&p()});const _=async v=>{n.value=v,$o(()=>{var E;(E=c.value)==null||E.focus()}),await f()};return(v,E)=>(pt(),vt("div",lI,[L("div",cI,[E[10]||(E[10]=L("div",{class:"d-flex align-items-center justify-content-between mb-3"},null,-1)),L("div",{class:"chat-container mb-3",ref_key:"chatContainer",ref:o},[e.messages.length===0?(pt(),vt("div",hI,[E[8]||(E[8]=L("p",null,"Décrivez ce que vous recherchez en langage naturel.",-1)),L("ul",uI,[L("li",{onClick:E[0]||(E[0]=S=>_("Je cherche des situations pour des CE2 qui utilisent une bande de papier")),role:"button"},E[4]||(E[4]=[L("i",{class:"bi bi-lightbulb me-2"},null,-1),Ee('"Je cherche des situations pour des CE2 qui utilisent une bande de papier" ')])),L("li",{onClick:E[1]||(E[1]=S=>_("Je cherche des situations avec un carré")),role:"button"},E[5]||(E[5]=[L("i",{class:"bi bi-lightbulb me-2"},null,-1),Ee('"Je cherche des situations avec un carré" ')])),L("li",{onClick:E[2]||(E[2]=S=>_("Je cherche des situations sur les propriétés")),role:"button"},E[6]||(E[6]=[L("i",{class:"bi bi-lightbulb me-2"},null,-1),Ee('"Je cherche des situations sur les propriétés" ')])),E[7]||(E[7]=L("li",null,[L("i",{class:"bi bi-three-dots me-2"})],-1))])])):(pt(),vt("div",dI,[(pt(!0),vt(ze,null,Xi(e.messages,(S,C)=>(pt(),vt("div",{key:C,class:Ho(["message",S.type])},[L("div",fI,Re(S.text),1)],2))),128))]))],512),L("form",{onSubmit:qy(f,["prevent"]),class:"d-flex gap-2"},[Sn(L("input",{"onUpdate:modelValue":E[3]||(E[3]=S=>n.value=S),type:"text",class:"form-control chatbot-input",placeholder:"Décrivez ce que vous recherchez...",disabled:r.value,onKeydown:XT(qy(f,["prevent"]),["enter"]),ref_key:"inputField",ref:c},null,40,pI),[[WA,n.value]]),L("button",{type:"button",onClick:f,class:Ho(["btn btn-primary send-button",{"is-processing":r.value}]),disabled:!n.value.trim()||r.value},[L("span",mI,[r.value?(pt(),vt("i",bI)):(pt(),vt("i",vI)),r.value?(pt(),vt("span",yI,"Recherche...")):(pt(),vt("span",_I,"Rechercher"))])],10,gI),e.messages.length>0?(pt(),vt("button",{key:0,type:"button",onClick:h,class:"btn btn-outline-secondary",title:"Réinitialiser la conversation"},E[9]||(E[9]=[L("i",{class:"bi bi-arrow-counterclockwise"},null,-1)]))):is("",!0)],32)])]))}}),AI=kl(wI,[["__scopeId","data-v-344a23bd"]]),EI={class:"container"},SI={key:0,class:"alert alert-danger",role:"alert"},xI={key:1,class:"text-center my-5"},CI={key:1,class:"row mb-4"},TI={class:"col-12"},PI={class:"card shadow-sm"},RI={class:"card-body"},kI={class:"mb-3"},II={class:"d-flex gap-3 flex-wrap"},LI=["value"],MI={class:"form-check-label"},DI={class:"mb-3"},OI={class:"d-flex gap-3 flex-wrap"},NI=["value"],FI={class:"form-check-label"},$I={class:"mb-3"},BI={class:"d-flex gap-3 flex-wrap"},HI=["value"],jI={class:"form-check-label"},VI={class:"mb-3"},UI={class:"d-flex gap-3 flex-wrap"},zI={class:"form-check"},qI={class:"form-check"},WI={class:"form-check"},GI={class:"form-check"},XI={class:"mb-3"},KI={class:"text"},YI=["onClick"],QI={key:0,class:"ms-1 small"},JI={class:"text-center mb-3 d-flex align-items-center justify-content-center gap-2"},ZI={class:"text-muted fst-italic"},tL={class:"text-center mt-4"},eL={class:"d-inline-block px-4 py-2 rounded-pill bg-success-subtle border border-success"},sL={class:"fw-semibold text-success"},iL={key:2,class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3"},nL={class:"card shadow-sm h-100"},rL={class:"card-body d-flex flex-column"},oL={class:"card-title"},aL={class:"card-text"},lL={key:0,class:"mb-2"},cL={key:1,class:"mb-2"},hL={key:2,class:"mb-2"},uL={key:3,class:"mb-2"},dL={key:0,class:"badge text-warning-emphasis bg-warning-subtle border border-warning-subtle me-1 mb-1"},fL={key:1,class:"badge text-warning-emphasis bg-warning-subtle border border-warning-subtle me-1 mb-1"},pL={key:2,class:"badge text-warning-emphasis bg-warning-subtle border border-warning-subtle me-1 mb-1"},gL={key:3,class:"badge text-warning-emphasis bg-warning-subtle border border-warning-subtle me-1 mb-1"},mL={class:"mb-3"},bL={class:"d-flex justify-content-center mb-2"},vL=["href"],_L={class:"text-center"},yL=["href"],wL={key:1,class:"text-muted small"},AL={key:3,class:"alert alert-info"},EL=Gn({__name:"PDFLibrary",setup(i){const t=uR(),{documents:e,isLoading:s,error:n}=aP(t),r=[{value:"CE1",label:"CE1"},{value:"CE2",label:"CE2"},{value:"CM1",label:"CM1"},{value:"CM2",label:"CM2"},{value:"6EME",label:"6ème"},{value:"5EME",label:"5ème"}],o=["Surface","Ligne","Point","Loupe"],a=["Ficelle","Règle non informable","Règle informable","Bande de papier","Compas","Gabarit angle droit","Équerre","Autre gabarit","Pochoir"],c=$e(()=>{if(!e.value)return r;const et=new Set;e.value.forEach(M=>{var bt;(bt=M.level)==null||bt.forEach(Ct=>et.add(Ct))});const Y=Array.from(et).filter(M=>!r.some(bt=>bt.value===M)).map(M=>({value:M,label:M}));return[...r,...Y]}),h=$e(()=>{if(!e.value)return o;const et=new Set;e.value.forEach(M=>{var bt;(bt=M.vision)==null||bt.forEach(Ct=>et.add(Ct))});const Y=Array.from(et).filter(M=>!o.some(bt=>bt.toLowerCase()===M.toLowerCase()));return[...o,...Y]}),u=$e(()=>{if(!e.value)return a;const et=new Set;e.value.forEach(M=>{var bt;(bt=M.instruments)==null||bt.forEach(Ct=>et.add(Ct))});const Y=Array.from(et).filter(M=>!a.some(bt=>bt.toLowerCase()===M.toLowerCase()));return[...a,...Y]}),f=zt([]),p=zt([]),g=zt([]),_=zt([]),v=zt(!1),E=zt(!1),S=zt(!1),C=zt(!1),T=zt([]),R=zt(!1),I=zt("filters"),F=zt([]),N=zt({}),H=zt([]);zt({levels:[],visions:[],instruments:[],tags:[],withCost:!1,isScaled:!1,hasRotation:!1,withoutAmorce:!1});const U=et=>{const Y=_.value.indexOf(et);Y===-1?_.value.push(et):_.value.splice(Y,1)},Q=et=>{T.value=et,R.value=!0,I.value==="chatbot"&&(H.value=et)},tt=et=>{F.value=et},Et=et=>{N.value=et},At=$e(()=>I.value==="chatbot"&&R.value?T.value:t.documents?t.documents.filter(et=>{var B,V,st,ht;const Y=f.value.length===0||((B=et.level)==null?void 0:B.some($t=>f.value.includes($t))),M=p.value.length===0||((V=et.vision)==null?void 0:V.some($t=>p.value.some(P=>P.toLowerCase()===$t.toLowerCase()))),bt=g.value.length===0||((st=et.instruments)==null?void 0:st.some($t=>g.value.some(P=>P.toLowerCase()===$t.toLowerCase()))),Ct=_.value.length===0||((ht=et.tags)==null?void 0:ht.some($t=>_.value.includes($t))),Gt=!v.value||et.withCost,xe=!E.value||et.isScaled,Be=!S.value||et.hasRotation,Xt=!C.value||et.withoutAmorce;return Y&&M&&bt&&Ct&&Gt&&xe&&Be&&Xt}):[]),Rt=$e(()=>{const et=[];if(f.value.length>0){const M=f.value.map(bt=>{var Ct;return(Ct=c.value.find(Gt=>Gt.value===bt))==null?void 0:Ct.label}).filter(Boolean);et.push(`en ${M.join(" ou ")}`)}if(p.value.length>0){const M=p.value.map(bt=>bt.toLowerCase());et.push(`utilisant les visions ${M.join(" ou ")}`)}g.value.length>0&&et.push(`nécessitant ${g.value.join(" ou ")}`),_.value.length>0&&(_.value.length===1?et.push(`avec pour mot-clef #${_.value[0]}`):et.push(`avec pour mots-clefs #${_.value.join(" ou #")}`));const Y=[];return v.value&&Y.push("avec coûts"),E.value&&Y.push("pas à l'échelle"),S.value&&Y.push("avec rotation"),C.value&&Y.push("sans amorce"),Y.length>0&&et.push(Y.join(", ")),et.length===0?"Recherche de toutes les situations":`Recherche des situations ${et.join(", ")}`}),oe=$e(()=>{if(!e.value)return[];const et={};return At.value.forEach(Y=>{Y.tags.forEach(M=>{et[M]=(et[M]||0)+1})}),Object.entries(et).sort((Y,M)=>M[1]-Y[1]).map(([Y,M])=>({tag:Y,count:M}))}),J=()=>{f.value=[],p.value=[],g.value=[],_.value=[],v.value=!1,E.value=!1,S.value=!1,C.value=!1},X=$e(()=>f.value.length>0||p.value.length>0||g.value.length>0||_.value.length>0||v.value||E.value||S.value||C.value);return Wd(async()=>{await t.loadDocuments()}),(et,Y)=>(pt(),vt("div",EI,[De(n)?(pt(),vt("div",SI,[Y[7]||(Y[7]=L("i",{class:"bi bi-exclamation-triangle me-2"},null,-1)),Ee(Re(De(n)),1)])):is("",!0),De(s)?(pt(),vt("div",xI,Y[8]||(Y[8]=[L("div",{class:"spinner-border text-primary",role:"status"},[L("span",{class:"visually-hidden"},"Chargement...")],-1),L("div",{class:"mt-2 text-primary"},[L("i",{class:"bi bi-arrow-repeat me-2"}),Ee("Chargement... ")],-1)]))):(pt(),vt(ze,{key:2},[I.value==="chatbot"?(pt(),BA(AI,{key:0,documents:De(e),messages:F.value,"current-criteria":N.value,onUpdateResults:Q,onUpdateMessages:tt,onUpdateCriteria:Et},null,8,["documents","messages","current-criteria"])):(pt(),vt("div",CI,[L("div",TI,[L("div",PI,[L("div",RI,[L("div",kI,[Y[9]||(Y[9]=L("label",{class:"form-label fw-bold badge text-primary-emphasis bg-primary-subtle border border-primary-subtle px-2"},[L("i",{class:"bi bi-mortarboard me-1"}),Ee("Niveau ")],-1)),L("div",II,[(pt(!0),vt(ze,null,Xi(c.value,(M,bt)=>(pt(),vt("div",{class:"form-check",key:bt},[Sn(L("input",{class:"form-check-input",type:"checkbox",value:M.value,"onUpdate:modelValue":Y[0]||(Y[0]=Ct=>f.value=Ct)},null,8,LI),[[ca,f.value]]),L("label",MI,Re(M.label),1)]))),128))])]),L("div",DI,[Y[10]||(Y[10]=L("label",{class:"form-label fw-bold badge text-info-emphasis bg-info-subtle border border-info-subtle px-2"},[L("i",{class:"bi bi-eye me-1"}),Ee("Vision ")],-1)),L("div",OI,[(pt(!0),vt(ze,null,Xi(h.value,(M,bt)=>(pt(),vt("div",{class:"form-check",key:bt},[Sn(L("input",{class:"form-check-input",type:"checkbox",value:M,"onUpdate:modelValue":Y[1]||(Y[1]=Ct=>p.value=Ct)},null,8,NI),[[ca,p.value]]),L("label",FI,Re(M),1)]))),128))])]),L("div",$I,[Y[11]||(Y[11]=L("label",{class:"form-label fw-bold badge text-success-emphasis bg-success-subtle border border-success-subtle px-2"},[L("i",{class:"bi bi-tools me-1"}),Ee("Instruments ")],-1)),L("div",BI,[(pt(!0),vt(ze,null,Xi(u.value,(M,bt)=>(pt(),vt("div",{class:"form-check",key:bt},[Sn(L("input",{class:"form-check-input",type:"checkbox",value:M,"onUpdate:modelValue":Y[2]||(Y[2]=Ct=>g.value=Ct)},null,8,HI),[[ca,g.value]]),L("label",jI,Re(M),1)]))),128))])]),L("div",VI,[Y[16]||(Y[16]=L("label",{class:"form-label fw-bold badge text-warning-emphasis bg-warning-subtle border border-warning-subtle px-2"},[L("i",{class:"bi bi-sliders me-1"}),Ee("Options ")],-1)),L("div",UI,[L("div",zI,[Sn(L("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":Y[3]||(Y[3]=M=>v.value=M)},null,512),[[ca,v.value]]),Y[12]||(Y[12]=L("label",{class:"form-check-label"},"Avec coûts",-1))]),L("div",qI,[Sn(L("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":Y[4]||(Y[4]=M=>E.value=M)},null,512),[[ca,E.value]]),Y[13]||(Y[13]=L("label",{class:"form-check-label"},"Pas à l'échelle",-1))]),L("div",WI,[Sn(L("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":Y[5]||(Y[5]=M=>S.value=M)},null,512),[[ca,S.value]]),Y[14]||(Y[14]=L("label",{class:"form-check-label"},"Avec rotation",-1))]),L("div",GI,[Sn(L("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":Y[6]||(Y[6]=M=>C.value=M)},null,512),[[ca,C.value]]),Y[15]||(Y[15]=L("label",{class:"form-check-label"},"Sans amorce (reproduction simple)",-1))])])]),L("div",XI,[Y[17]||(Y[17]=L("label",{class:"form-label fw-bold badge text-danger-emphasis bg-danger-subtle border border-danger-subtle px-2 mb-2"},[L("i",{class:"bi bi-tags me-1"}),Ee("Mots clefs ")],-1)),L("div",KI,[(pt(!0),vt(ze,null,Xi(oe.value,M=>(pt(),vt("span",{key:M.tag,onClick:bt=>U(M.tag),class:Ho(["badge me-1 mb-1",{"text-danger-emphasis bg-danger-subtle border border-danger-subtle":_.value.includes(M.tag),"text-secondary border":!_.value.includes(M.tag)}]),role:"button",style:{"font-size":"0.8em",padding:"0.3em 0.6em",cursor:"pointer"}},[Ee(Re(M.tag)+" ",1),M.count>1?(pt(),vt("span",QI,"("+Re(M.count)+")",1)):is("",!0)],10,YI))),128))])]),L("div",JI,[L("span",ZI,Re(Rt.value),1),X.value?(pt(),vt("button",{key:0,onClick:J,class:"btn btn-outline-secondary btn-sm",title:"Réinitialiser les filtres"},Y[18]||(Y[18]=[L("i",{class:"bi bi-arrow-counterclockwise"},null,-1)]))):is("",!0)]),L("div",tL,[L("div",eL,[L("span",sL,[Y[19]||(Y[19]=L("i",{class:"bi bi-files me-1"},null,-1)),Ee(Re(At.value.length>0?At.value.length:"Aucune")+" situation"+Re(At.value.length>1?"s":"")+" trouvée"+Re(At.value.length>1?"s":""),1)])])])])])])])),At.value.length?(pt(),vt("div",iL,[(pt(!0),vt(ze,null,Xi(At.value,M=>(pt(),vt("div",{class:"col",key:M.id},[L("div",nL,[Ie(rI,{"pdf-path":M.path,class:"card-img-top"},null,8,["pdf-path"]),L("div",rL,[L("h5",oL,Re(M.title),1),L("p",aL,Re(M.description),1),M.level&&M.level.length>0?(pt(),vt("div",lL,[(pt(!0),vt(ze,null,Xi(M.level,bt=>(pt(),vt("span",{key:bt,class:"badge text-primary-emphasis bg-primary-subtle border border-primary-subtle me-1 mb-1"},Re(bt),1))),128))])):is("",!0),M.vision&&M.vision.length>0?(pt(),vt("div",cL,[(pt(!0),vt(ze,null,Xi(M.vision,bt=>(pt(),vt("span",{key:bt,class:"badge text-info-emphasis bg-info-subtle border border-info-subtle me-1 mb-1"},Re(bt),1))),128))])):is("",!0),M.instruments&&M.instruments.length>0?(pt(),vt("div",hL,[(pt(!0),vt(ze,null,Xi(M.instruments,bt=>(pt(),vt("span",{key:bt,class:"badge text-success-emphasis bg-success-subtle border border-success-subtle me-1 mb-1"},Re(bt),1))),128))])):is("",!0),M.withCost||M.isScaled||M.hasRotation||M.withoutAmorce?(pt(),vt("div",uL,[M.withCost?(pt(),vt("span",dL,"Avec coûts")):is("",!0),M.isScaled?(pt(),vt("span",fL,"Pas à l'échelle")):is("",!0),M.hasRotation?(pt(),vt("span",pL,"Avec rotation")):is("",!0),M.withoutAmorce?(pt(),vt("span",gL,"Sans amorce")):is("",!0)])):is("",!0),L("div",mL,[(pt(!0),vt(ze,null,Xi(M.tags,bt=>(pt(),vt("span",{key:bt,class:"badge text-danger-emphasis bg-danger-subtle border border-danger-subtle me-1 mb-1"},Re(bt),1))),128))]),L("div",bL,[L("a",{href:De(bu)+M.path,target:"_blank",class:"btn btn-sm btn-outline-primary"},Y[20]||(Y[20]=[L("i",{class:"bi bi-file-earmark-pdf me-1"},null,-1),Ee("Ouvrir ")]),8,vL)]),L("div",_L,[M.source_url?(pt(),vt("a",{key:0,href:M.source_url,target:"_blank",class:"text-muted small"},[Y[21]||(Y[21]=L("i",{class:"bi bi-link-45deg me-1"},null,-1)),Ee(Re(M.source_url_title||"Source"),1)],8,yL)):M.source_url_title?(pt(),vt("span",wL,[Y[22]||(Y[22]=L("i",{class:"bi bi-link-45deg me-1"},null,-1)),Ee(Re(M.source_url_title),1)])):is("",!0)])])])]))),128))])):(pt(),vt("div",AL," Aucun document ne correspond aux critères sélectionnés. "))],64))]))}}),SL=kl(EL,[["__scopeId","data-v-1d969bf6"]]),xL={class:"d-flex flex-column min-vh-100"},CL={key:0,"data-bs-theme":"dark",class:"fixed-top"},TL={class:"collapse text-bg-dark",id:"navbarHeader"},PL={class:"container"},RL={class:"row"},kL={class:"col-sm-4 offset-md-1 py-4"},IL={class:"list-unstyled"},LL={class:"navbar navbar-dark bg-dark shadow-sm"},ML={class:"container"},DL={key:1,class:"text-body-secondary py-5 mt-auto"},OL=Gn({__name:"App",setup(i){const t=hR(),e=$e(()=>!["howto","license","instruments","contribute"].includes(t.name));return(s,n)=>(pt(),vt("div",xL,[e.value?(pt(),vt("header",CL,[L("div",TL,[L("div",PL,[L("div",RL,[n[3]||(n[3]=L("div",{class:"col-sm-8 col-md-7 py-4"},[L("h4",{class:"text-white"},"À propos"),L("p",{class:"text-body-secondary"}," Cette banque de figures permet de travailler la restauration de figures géométriques. Vous pouvez filtrer les documents selon différents critères comme le niveau, la vision, les instruments utilisés et d'autres options. ")],-1)),L("div",kL,[L("ul",IL,[L("li",null,[Ie(De(Ff),{to:"/contribuer",class:"text-white",target:"_blank"},{default:Bo(()=>n[0]||(n[0]=[Ee("Comment contribuer ?")])),_:1,__:[0]})]),n[2]||(n[2]=L("li",null,[L("a",{href:"https://arnaud-lierville.github.io/",target:"_blank",class:"text-white"},"Autres outils Maths en classe !")],-1)),L("li",null,[Ie(De(Ff),{to:"/licence",class:"text-white",target:"_blank"},{default:Bo(()=>n[1]||(n[1]=[Ee("Licence")])),_:1,__:[1]})])])])])])]),L("div",LL,[L("div",ML,[Ie(De(Ff),{to:"/",class:"navbar-brand d-flex align-items-center"},{default:Bo(()=>n[4]||(n[4]=[L("strong",null,"RestFigBank",-1)])),_:1,__:[4]}),n[5]||(n[5]=L("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarHeader","aria-controls":"navbarHeader","aria-expanded":"false","aria-label":"Toggle navigation"},[L("span",{class:"navbar-toggler-icon"})],-1))])])])):is("",!0),L("main",{class:Ho(["main-content flex-grow-1",{"no-navbar":!e.value}])},[Ie(De(h0))],2),e.value?(pt(),vt("footer",DL,n[6]||(n[6]=[L("div",{class:"container"},[L("p",{class:"float-end mb-1"},[L("a",{href:"#"},"Retour en haut")]),L("p",{class:"mb-1"},"Cette banque de figures est un outil pédagogique et didactique pour l'enseignement de la géométrie.")],-1)]))):is("",!0)]))}}),NL="modulepreload",FL=function(i){return"/RestFigBank/"+i},Dw={},$L=function(t,e,s){let n=Promise.resolve();if(e&&e.length>0){let o=function(h){return Promise.all(h.map(u=>Promise.resolve(u).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));n=o(e.map(h=>{if(h=FL(h),h in Dw)return;Dw[h]=!0;const u=h.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${f}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":NL,u||(p.as="script"),p.crossOrigin="",p.href=h,c&&p.setAttribute("nonce",c),document.head.appendChild(p),u)return new Promise((g,_)=>{p.addEventListener("load",g),p.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${h}`)))})}))}function r(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return n.then(o=>{for(const a of o||[])a.status==="rejected"&&r(a.reason);return t().catch(r)})},BL={class:"py-3 text-center container"},HL={class:"row py-3"},jL={class:"col-lg-6 col-md-8 mx-auto"},VL={class:"d-flex justify-content-center gap-3 mt-4"},UL={class:"album py-5 bg-body-tertiary"},zL=Gn({__name:"HomeView",setup(i){return(t,e)=>{const s=pv("RouterLink");return pt(),vt("div",null,[L("section",BL,[L("div",HL,[L("div",jL,[e[2]||(e[2]=L("h1",{class:"fw-light"},"Restauration de figures",-1)),e[3]||(e[3]=L("p",{class:"lead text-body-secondary"}," Explorez la collection de figures géométriques à restaurer. Utilisez les filtres ci-dessous et cliquez sur des mots clefs pour trouver les documents adaptés à vos besoins. ",-1)),L("div",VL,[Ie(s,{to:"/mode-emploi",class:"btn btn-outline-primary btn-sm",target:"_blank",rel:"noopener noreferrer"},{default:Bo(()=>e[0]||(e[0]=[L("i",{class:"bi bi-question-circle me-2"},null,-1),Ee("Comment ça marche ? ")])),_:1,__:[0]}),Ie(s,{to:"/instruments",class:"btn btn-outline-success btn-sm",target:"_blank",rel:"noopener noreferrer"},{default:Bo(()=>e[1]||(e[1]=[L("i",{class:"bi bi-tools me-2"},null,-1),Ee("Les instruments ")])),_:1,__:[1]})])])])]),L("div",UL,[Ie(SL)])])}}}),qL="/RestFigBank/assets/fleche-carre-CIKwgwNQ.png",WL={class:"container py-5"},GL={class:"row"},XL={class:"col-12"},KL={class:"card shadow-sm mb-4"},YL={class:"card-body"},QL={class:"alert alert-light border mb-4"},JL={class:"row"},ZL={class:"col-12 text-center"},tM=["src"],eM={class:"card shadow-sm mb-4"},sM={class:"card-body"},iM={class:"mt-3"},nM=Gn({__name:"HowToView",setup(i){return(t,e)=>{const s=pv("RouterLink");return pt(),vt("div",WL,[e[10]||(e[10]=L("h1",{class:"mb-4"},"Comment ça marche ?",-1)),L("div",GL,[L("div",XL,[e[7]||(e[7]=L("div",{class:"card shadow-sm mb-4"},[L("div",{class:"card-body"},[L("h2",{class:"h5 mb-3"},"Objectif général"),L("p",null," L'approche vise à assurer une continuité et une progression cohérentes de l'enseignement de la géométrie du cycle 2 au cycle 4, en transformant progressivement le regard des élèves sur les figures géométriques. ")])],-1)),L("div",KL,[L("div",YL,[e[2]||(e[2]=Sl('<h2 class="h5 mb-3" data-v-2d930c55>La restauration de figures comme levier didactique</h2><div class="mb-4" data-v-2d930c55><p data-v-2d930c55> La restauration de figures est une activité géométrique qui consiste à compléter une figure donnée partiellement appelée &quot;amorce&quot;, à partir d&#39;une figure &quot;modèle&quot;, en utilisant divers instruments de tracé et de prise d&#39;informations (comme la règle non informable, informable, la bande de papier, l&#39;équerre, le compas, des gabarits ou des pochoir). </p></div><div class="mb-4" data-v-2d930c55><h3 class="h6 mb-3" data-v-2d930c55>Objectifs principaux :</h3><div class="list-group" data-v-2d930c55><div class="list-group-item" data-v-2d930c55><strong data-v-2d930c55>Faire évoluer le regard des élèves :</strong> passer d&#39;une perception globale (vision &quot;surface&quot;) à une analyse fine des relations géométriques (alignements, égalités, intersections). </div><div class="list-group-item" data-v-2d930c55><strong data-v-2d930c55>Favoriser le raisonnement géométrique :</strong> les élèves doivent identifier et utiliser les propriétés géométriques implicites dans la figure modèle pour compléter la figure amorce. </div><div class="list-group-item" data-v-2d930c55><strong data-v-2d930c55>Développer des compétences en construction :</strong> cette activité mobilise des gestes précis et des instruments adaptés pour reproduire ou prolonger des traits géométriques. </div></div></div>',3)),L("div",QL,[e[1]||(e[1]=L("h3",{class:"h6 mb-3"},"Exemple :",-1)),L("div",JL,[L("div",ZL,[L("img",{src:De(qL),alt:"Exemple de restauration de figures",class:"img-fluid rounded shadow-sm example-image"},null,8,tM)]),e[0]||(e[0]=Sl('<div class="col-12 mb-3" data-v-2d930c55><p class="mb-2" data-v-2d930c55>Matériel fourni :</p><ul class="mb-0" data-v-2d930c55><li class="mb-2" data-v-2d930c55> Sur la même feuille, la figure modèle et l&#39;amorce à la même échelle mais orientée différemment (pour éviter le transfert par « glissement » de la figure à restaurer). </li><li class="mb-2" data-v-2d930c55> Un gabarit d&#39;angle droit informable (sur lequel on peut prendre et garder des informations pour reporter des longueurs) dont les côtés sont plus longs que ceux du carré. </li><li data-v-2d930c55> Ficelle </li></ul><p class="mt-3 text-muted small" data-v-2d930c55> Source : <a href="https://lea-geometrie.etab.ac-lille.fr/" target="_blank" rel="noopener noreferrer" data-v-2d930c55>LEA Géométrie - Académie de Lille</a></p></div>',1))])])])]),e[8]||(e[8]=Sl('<div class="card shadow-sm mb-4" data-v-2d930c55><div class="card-body" data-v-2d930c55><h2 class="h5 mb-3" data-v-2d930c55>Évolution du regard sur les figures</h2><div class="mb-3" data-v-2d930c55><h3 class="h6 text-primary-emphasis bg-primary-subtle p-2 rounded" data-v-2d930c55>Cycle 2</h3><p data-v-2d930c55> Apprentissage fondé sur la manipulation et la restauration de figures simples (à l&#39;aide de gabarits, descriptions, programmes de construction simples). </p></div><div class="mb-3" data-v-2d930c55><h3 class="h6 text-info-emphasis bg-info-subtle p-2 rounded" data-v-2d930c55>Cycle 3</h3><p data-v-2d930c55> Passage d&#39;une géométrie perceptive à une géométrie instrumentée, puis déductive. </p></div><div class="mb-3" data-v-2d930c55><h3 class="h6 text-success-emphasis bg-success-subtle p-2 rounded" data-v-2d930c55>Cycle 4</h3><p data-v-2d930c55> Accès à une géométrie plus abstraite et théorique, reposant sur des relations entre points, droites, segments, angles, etc. </p></div></div></div><div class="card shadow-sm mb-4" data-v-2d930c55><div class="card-body" data-v-2d930c55><h2 class="h5 mb-3" data-v-2d930c55>Trois types de &quot;regards&quot; à développer</h2><ul class="list-unstyled" data-v-2d930c55><li class="mb-3" data-v-2d930c55><span class="badge text-primary-emphasis bg-primary-subtle" data-v-2d930c55>Vision surface</span><p class="mt-2 mb-0" data-v-2d930c55>Forme globale, aspect visuel</p></li><li class="mb-3" data-v-2d930c55><span class="badge text-info-emphasis bg-info-subtle" data-v-2d930c55>Vision lignes</span><p class="mt-2 mb-0" data-v-2d930c55>Attention portée aux alignements, côtés, segments</p></li><li class="mb-3" data-v-2d930c55><span class="badge text-success-emphasis bg-success-subtle" data-v-2d930c55>Vision points</span><p class="mt-2 mb-0" data-v-2d930c55>Analyse des relations entre les lignes, intersections</p></li></ul><div class="alert alert-info" data-v-2d930c55><p class="mb-0" data-v-2d930c55> 👉 L&#39;objectif est d&#39;acquérir une flexibilité du regard, c&#39;est-à-dire de savoir mobiliser ces différentes visions selon le contexte. </p></div></div></div>',2)),L("div",eM,[L("div",sM,[e[4]||(e[4]=L("h2",{class:"h5 mb-3"},"Rôle des instruments de géométrie",-1)),e[5]||(e[5]=L("p",null,"Les instruments (règle, équerre, compas, bande de papier) permettent :",-1)),e[6]||(e[6]=L("ul",null,[L("li",null,"de tracer des figures,"),L("li",null,"de vérifier des propriétés géométriques,"),L("li",null,"de mobiliser des relations fondamentales : appartenance, égalité, perpendicularité, parallélisme…")],-1)),L("div",iM,[Ie(s,{to:"/instruments",class:"text-decoration-none",target:"_blank"},{default:Bo(()=>e[3]||(e[3]=[Ee(" 👉 Découvrir tous les instruments et leur utilisation ")])),_:1,__:[3]})])])]),e[9]||(e[9]=L("div",{class:"card shadow-sm"},[L("div",{class:"card-body"},[L("h2",{class:"h5 mb-3"},"Conclusion"),L("p",null,"La restauration de figures :"),L("ul",null,[L("li",null,"est une source de problèmes adaptés à différents niveaux,"),L("li",null,"permet d'introduire des notions géométriques progressivement,"),L("li",null,"favorise le passage du dessin à la figure géométrique.")]),L("p",{class:"mb-0"}," Cette approche repose sur une progression graduelle à partir de la perception globale des figures vers une compréhension plus fine et plus abstraite de la géométrie. Le travail sur les restaurations, le choix des outils et le jeu sur les allers et retours entre figure modèle et amorce (prise d'informations, validation) favorisent l'appropriation des concepts géométriques fondamentaux. ")])],-1))])])])}}}),rM=kl(nM,[["__scopeId","data-v-2d930c55"]]),oM={},aM={class:"container py-5"};function lM(i,t){return pt(),vt("div",aM,t[0]||(t[0]=[Sl('<h1 class="mb-4">Licence</h1><div class="row"><div class="col-12"><div class="card shadow-sm mb-4"><div class="card-body"><div class="text-center mb-4"><a href="https://creativecommons.org/licenses/by/4.0/deed.fr" target="_blank" rel="license"><img alt="Licence Creative Commons" style="border-width:0;" src="https://i.creativecommons.org/l/by/4.0/88x31.png"></a></div><p> Cet site est mis à disposition selon les termes de la <a href="https://creativecommons.org/licenses/by/4.0/deed.fr" target="_blank">Licence Creative Commons Attribution 4.0 International</a>. </p><h2 class="h5 mt-4 mb-3">Vous êtes autorisé à :</h2><ul><li><strong>Partager</strong> — copier, distribuer et communiquer le matériel par tous moyens et sous tous formats</li><li><strong>Adapter</strong> — remixer, transformer et créer à partir du matériel pour toute utilisation, y compris commerciale</li></ul><h2 class="h5 mt-4 mb-3">Selon les conditions suivantes :</h2><ul><li><strong>Attribution</strong> — Vous devez créditer l&#39;Œuvre, intégrer un lien vers la licence et indiquer si des modifications ont été effectuées à l&#39;Œuvre. Vous devez indiquer ces informations par tous les moyens raisonnables, sans toutefois suggérer que l&#39;Offrant vous soutient ou soutient la façon dont vous avez utilisé son Œuvre. </li><li><strong>Pas de restrictions complémentaires</strong> — Vous n&#39;êtes pas autorisé à appliquer des conditions légales ou des mesures techniques qui restreindraient légalement autrui à utiliser l&#39;Œuvre dans les conditions décrites par la licence. </li></ul><h2 class="h5 mt-4 mb-3">Notes :</h2><ul><li>Vous n&#39;êtes pas dans l&#39;obligation de respecter la licence pour les éléments ou matériel appartenant au domaine public ou dans le cas où l&#39;utilisation que vous souhaitez faire est couverte par une exception.</li><li>Aucune garantie n&#39;est donnée. Il se peut que la licence ne vous donne pas toutes les permissions nécessaires pour votre utilisation. Par exemple, certains droits comme les droits moraux, le droit des données personnelles et le droit à l&#39;image sont susceptibles de limiter votre utilisation.</li></ul></div></div></div></div>',2)]))}const cM=kl(oM,[["render",lM]]),hM="/RestFigBank/assets/gabarit%20-%20exemple%201-C-Ja61j1.png",uM="/RestFigBank/assets/gabarit%20-%20exemple%202-DXucNH3D.png",dM="/RestFigBank/assets/gabarit%20-%20exemple%203-Chh1wVgl.png",fM="/RestFigBank/assets/gabarit%20-%20exemple%204-coP-T9cZ.png",pM="/RestFigBank/assets/gabarit%20-%20exemple%205-DNmuAQBx.png",gM="/RestFigBank/assets/gabarit%20-%20exemple%206-DlwugcoY.png",mM="/RestFigBank/assets/gabarit%20-%20exemple%207-Dp8Txuq7.png",bM="/RestFigBank/assets/gabarit%20-%20exemple%208-Cnvk_vqU.png",vM="/RestFigBank/assets/gabarit%20-%20exemple%209-DqUNh1K1.png",_M="/RestFigBank/assets/gabarit%20-%20exemple%204-coP-T9cZ.png",yM="/RestFigBank/assets/Regle-non-informable-RR3Hikmg.png",wM="/RestFigBank/assets/equerre1-DydbFGJ7.png",AM="/RestFigBank/assets/equerre2-CLCdw-J7.png",EM="/RestFigBank/assets/compas-CoSNoTS8.png",SM="/RestFigBank/assets/ficelle-CEbd2ffs.png",xM="/RestFigBank/assets/pochoir-CMD66YVv.png",CM={class:"container py-5"},TM={class:"text-center mb-5"},PM={class:"row g-4"},RM={class:"col-md-6"},kM={class:"card h-100"},IM=["src"],LM={class:"col-md-6"},MM={class:"card h-100"},DM={class:"row g-0 p-3 justify-content-center"},OM={class:"col-4"},NM=["src"],FM={class:"col-4"},$M=["src"],BM={class:"col-md-6"},HM={class:"card h-100"},jM={class:"row g-0 p-3 justify-content-center"},VM={class:"col-6"},UM=["src"],zM={class:"col-12"},qM={class:"card h-100"},WM={class:"card-body"},GM={class:"row g-4"},XM=["src","alt"],KM={class:"col-md-6"},YM={class:"card h-100"},QM={class:"row g-0 p-3 justify-content-center"},JM={class:"col-8"},ZM=["src"],tD={class:"col-md-6"},eD={class:"card h-100"},sD={class:"row g-0 p-3 justify-content-center"},iD={class:"col-8"},nD=["src"],rD=Gn({__name:"InstrumentsView",setup(i){const t=Array.from({length:9},(e,s)=>new URL(Object.assign({"../assets/tools-img/gabarit - exemple 1.png":hM,"../assets/tools-img/gabarit - exemple 2.png":uM,"../assets/tools-img/gabarit - exemple 3.png":dM,"../assets/tools-img/gabarit - exemple 4.png":fM,"../assets/tools-img/gabarit - exemple 5.png":pM,"../assets/tools-img/gabarit - exemple 6.png":gM,"../assets/tools-img/gabarit - exemple 7.png":mM,"../assets/tools-img/gabarit - exemple 8.png":bM,"../assets/tools-img/gabarit - exemple 9.png":vM})[`../assets/tools-img/gabarit - exemple ${s+1}.png`],import.meta.url).href);return(e,s)=>{const n=pv("RouterLink");return pt(),vt("div",CM,[s[10]||(s[10]=L("h1",{class:"text-center mb-3"},"Les instruments de géométrie en restauration de figures",-1)),L("div",TM,[Ie(n,{to:"/mode-emploi",class:"text-decoration-none",target:"_blank"},{default:Bo(()=>s[0]||(s[0]=[Ee(" 👉 En savoir plus sur la restauration de figures ")])),_:1,__:[0]})]),L("div",PM,[L("div",RM,[L("div",kM,[L("img",{src:De(yM),class:"card-img-top p-3",alt:"Règle non informable"},null,8,IM),s[1]||(s[1]=L("div",{class:"card-body"},[L("h5",{class:"card-title"},"Règle non informable (RNI)"),L("p",{class:"card-text"},[Ee(" Une règle non informable est une règle sans graduation, avec un seul bord utile et sur laquelle on ne peut pas écrire et ni reporter de marque."),L("br"),Ee(" Elle permet uniquement de tracer des lignes droites et de vérifier l'alignement de points. Elle ne permet pas de mesurer des longueurs. ")]),L("p",null,[L("em",null,"On peut fabriquer des RNI avec des intercalaires transparentes en plastique souple.")])],-1))])]),s[8]||(s[8]=Sl('<div class="col-md-6" data-v-eb5be388><div class="card h-100" data-v-eb5be388><div class="card-body" data-v-eb5be388><h5 class="card-title" data-v-eb5be388>Règle informable (RI)</h5><p class="card-text" data-v-eb5be388> Une règle informable est une règle sans graduation, avec un seul bord utile sur laquelle on reporter des marques.<br data-v-eb5be388> Elle permet de tracer des lignes droites et de vérifier l&#39;alignement de points. Elle permet de reporter et comparer des longueurs. </p><p data-v-eb5be388><em data-v-eb5be388>On peut fabriquer des RI avec des intercalaires transparentes en carton.</em></p></div></div></div>',1)),L("div",LM,[L("div",MM,[L("div",DM,[L("div",OM,[L("img",{src:De(wM),class:"img-fluid rounded equerre-img",alt:"Équerre 1"},null,8,NM)]),L("div",FM,[L("img",{src:De(AM),class:"img-fluid rounded equerre-img",alt:"Équerre 2"},null,8,$M)])]),s[2]||(s[2]=L("div",{class:"card-body"},[L("h5",{class:"card-title"},"Équerre"),L("p",{class:"card-text"}," L'équerre permet de tracer des angles droits (90°) et de vérifier la perpendicularité entre deux droites. ")],-1))])]),L("div",BM,[L("div",HM,[L("div",jM,[L("div",VM,[L("img",{src:De(EM),class:"img-fluid rounded tool-img",alt:"Compas"},null,8,UM)])]),s[3]||(s[3]=L("div",{class:"card-body"},[L("h5",{class:"card-title"},"Compas"),L("p",{class:"card-text"}," Le compas permet de tracer des cercles et des arcs de cercle. Il permet aussi de reporter des distances et de comparer des longueurs. ")],-1))])]),L("div",zM,[L("div",qM,[L("div",WM,[s[4]||(s[4]=L("h5",{class:"card-title"},"Gabarit",-1)),s[5]||(s[5]=L("p",{class:"card-text mb-4"}," Le gabarit est un modèle qui permet de reproduire des formes géométriques spécifiques. Il est particulièrement utile pour tracer des formes complexes ou répétitives. Voici quelques exemples de gabarits utilisés dans les exercices : ",-1)),L("div",GM,[(pt(!0),vt(ze,null,Xi(De(t),(r,o)=>(pt(),vt("div",{class:"col-md-2 col-sm-3 col-4",key:o},[L("img",{src:r,alt:`Exemple de gabarit ${o+1}`,class:"img-fluid rounded shadow-sm gabarit-img"},null,8,XM)]))),128))])])])]),s[9]||(s[9]=Sl('<div class="col-md-6" data-v-eb5be388><div class="card h-100" data-v-eb5be388><div class="row g-0 p-3 justify-content-center" data-v-eb5be388><div class="col-6" data-v-eb5be388><img src="'+_M+'" class="img-fluid rounded tool-img" alt="Gabarit angle droit" data-v-eb5be388></div></div><div class="card-body" data-v-eb5be388><h5 class="card-title" data-v-eb5be388>Gabarit angle droit</h5><p class="card-text" data-v-eb5be388> Le gabarit d&#39;angle droit est un outil qui permet de vérifier ou de tracer des angles droits. </p><p data-v-eb5be388><em data-v-eb5be388>On peut fabriquer gabarit d&#39;angle droit en pliant une feuille A4 en deux selon une diagonale, puis encore en deux.</em></p></div></div></div><div class="col-md-6" data-v-eb5be388><div class="card h-100" data-v-eb5be388><div class="card-body" data-v-eb5be388><h5 class="card-title" data-v-eb5be388>Bande de papier</h5><p class="card-text" data-v-eb5be388> La bande de papier permet de comparer des longueurs, de reporter des longueurs et elle peut être utilisée par pliage pour construire des milieux. </p></div></div></div>',2)),L("div",KM,[L("div",YM,[L("div",QM,[L("div",JM,[L("img",{src:De(SM),class:"img-fluid rounded ficelle-img",alt:"Ficelle"},null,8,ZM)])]),s[6]||(s[6]=L("div",{class:"card-body"},[L("h5",{class:"card-title"},"Ficelle"),L("p",{class:"card-text"}," La ficelle permet de vérifier les alignements. ")],-1))])]),L("div",tD,[L("div",eD,[L("div",sD,[L("div",iD,[L("img",{src:De(xM),class:"img-fluid rounded pochoir-img",alt:"Pochoir"},null,8,nD)])]),s[7]||(s[7]=L("div",{class:"card-body"},[L("h5",{class:"card-title"},"Pochoir"),L("p",{class:"card-text"},` Le pochoir est un gabarit "en creux". Il permet d'analyser la figure modèle et de restaurer la figure en examinant différemment "l'empreinte" de la figure. `)],-1))])])])])}}}),oD=kl(rD,[["__scopeId","data-v-eb5be388"]]),aD="/RestFigBank/assets/img-trapeze-cercle-BdWke2bp.png",lD={class:"container py-5"},cD={class:"row"},hD={class:"col-12"},uD={class:"card shadow-sm mb-4"},dD={class:"card-body"},fD={class:"bg-light p-4 rounded mb-4 position-relative"},pD={key:0},gD={key:1},mD={class:"position-relative"},bD={key:0,class:"text-danger mt-2 small"},vD=Gn({__name:"ContributeView",setup(i){const t=zt(!1),e=zt(""),s=zt(""),n=zt(""),r=zt(""),o=zt(!1),a=zt(0),c=zt(0),h=zt(null);let u=null;const f={id:"trapeze-cercle",title:"Trapèze et cercle",description:"Restauration d'une figure combinant trapèze et cercle",path:"/pdfs/Trapeze-cercle.pdf",level:["CM2","6EME"],vision:["Ligne","Point"],instruments:["Compas","Règle non informable","Équerre","Gabarit angle droit"],withCost:!1,isScaled:!1,hasRotation:!1,withoutAmorce:!1,tags:["trapèze","cercle","centre"],source_url:"https://lea-geometrie.etab.ac-lille.fr/",source_url_title:"LéA géométrie"},p={id:"Identifiant unique de la situation (en minuscules, sans espaces ni caractères spéciaux)",title:"Titre de la situation tel qu'il apparaîtra dans l'interface",description:"Brève description de la situation",path:"Chemin vers le fichier PDF dans le dossier public (/pdfs/nom-du-fichier.pdf)",level:"Liste des niveaux concernés (CE1, CE2, CM1, CM2, 6EME, 5EME)",vision:"Liste des types de vision géométrique (Surface, Ligne, Point)",instruments:"Liste des instruments autorisés (Ficelle, Règle non informable, Règle informable, etc.)",withCost:"Indique si la situation inclut des coûts (true/false)",isScaled:"Indique si l'amorce n'est pas à l'échelle (true/false)",hasRotation:"La figure amorce a subit une rotation par rapport à la figure modèle (true/false)",withoutAmorce:"Avec ou sans amorce - Sans amorce, il s'agit d'une reproduction (true/false)",tags:"Liste de mots-clés pour faciliter la recherche",source_url:"URL de la source (optionnel)",source_url_title:"Titre de la source à afficher (optionnel)"},g=(C,T=2)=>JSON.stringify(C,null,T).replace(/^(\s{2}"[^"]+": \[)([\s\S]*?)(\n\s{2}\])/gm,(I,F,N,H)=>{const U=N.replace(/\n\s{4}/g," ").trim();return`${F}${U}${H}`}).replace(/\n\s{2}],/g,"],");Wd(()=>{s.value=g(f)});const _=()=>{try{JSON.parse(s.value),e.value=""}catch{e.value="JSON invalide"}},v=async()=>{try{const C=JSON.parse(s.value),T=g(C);await navigator.clipboard.writeText(T),t.value=!0,setTimeout(()=>{t.value=!1},2e3)}catch{e.value="Impossible de copier : JSON invalide"}},E=C=>{if(!h.value)return;const T=h.value.getBoundingClientRect(),R=h.value.scrollTop,I=h.value.value;h.value.selectionStart,C.clientX-T.left;const F=C.clientY-T.top+R,N=I.split(`
`);let H="",U=0;const Q=24;for(let Et=0;Et<N.length;Et++){if(U<=F&&F<=U+Q){H=N[Et];break}U+=Q}const tt=/"([^"]+)"\s*:/.exec(H);if(tt){const Et=tt[1],At=p[Et];At?(u&&clearTimeout(u),r.value=Et,n.value=At,o.value=!0,a.value=C.clientX-T.left+10,c.value=C.clientY-T.top-20,u=window.setTimeout(()=>{S(),u=null},1500)):S()}else S()},S=()=>{o.value=!1,r.value="",u&&(clearTimeout(u),u=null)};return(C,T)=>(pt(),vt("div",lD,[T[4]||(T[4]=L("h1",{class:"mb-4"},"Comment contribuer ?",-1)),L("div",cD,[L("div",hD,[L("div",uD,[L("div",dD,[T[2]||(T[2]=L("p",{class:"lead"}," Pour ajouter une nouvelle situation à la bibliothèque, vous devez fournir un fichier PDF et ses métadonnées au format JSON. Voici la structure à suivre, illustrée par un exemple que vous pouvez modifier : ",-1)),L("div",fD,[L("button",{class:Ho(["btn btn-sm btn-outline-primary position-absolute top-0 end-0 m-2",{"btn-success":t.value}]),onClick:v},[t.value?(pt(),vt("span",gD,"Copié !")):(pt(),vt("span",pD,"Copier"))],2),L("div",mD,[Sn(L("textarea",{"onUpdate:modelValue":T[0]||(T[0]=R=>s.value=R),class:"form-control code-editor",rows:"20",spellcheck:"false",onInput:_,onMousemove:E,onMouseout:S,ref_key:"textarea",ref:h},null,544),[[WA,s.value]]),o.value?(pt(),vt("div",{key:0,class:"custom-tooltip",style:rg({top:c.value+"px",left:a.value+"px"})},[L("strong",null,Re(r.value),1),Ee(" : "+Re(n.value),1)],4)):is("",!0)]),e.value?(pt(),vt("div",bD,[T[1]||(T[1]=L("i",{class:"bi bi-exclamation-triangle"},null,-1)),Ee(" "+Re(e.value),1)])):is("",!0)]),T[3]||(T[3]=Sl('<div class="mt-4" data-v-f6b8a5b1><div class="text-center" data-v-f6b8a5b1><img src="'+aD+'" alt="Exemple : Trapèze et cercle" class="img-fluid rounded shadow-sm half-size" data-v-f6b8a5b1></div></div><h2 class="h5 mt-4 mb-3" data-v-f6b8a5b1>Description des champs :</h2><ul class="list-group list-group-flush" data-v-f6b8a5b1><li class="list-group-item" data-v-f6b8a5b1><strong data-v-f6b8a5b1>id</strong> : Identifiant unique de la situation (en minuscules, sans espaces ni caractères spéciaux) </li><li class="list-group-item" data-v-f6b8a5b1><strong data-v-f6b8a5b1>title</strong> : Titre de la situation tel qu&#39;il apparaîtra dans l&#39;interface </li><li class="list-group-item" data-v-f6b8a5b1><strong data-v-f6b8a5b1>description</strong> : Brève description de la situation </li><li class="list-group-item" data-v-f6b8a5b1><strong data-v-f6b8a5b1>path</strong> : Chemin vers le fichier PDF dans le dossier public (/pdfs/nom-du-fichier.pdf) </li><li class="list-group-item" data-v-f6b8a5b1><strong data-v-f6b8a5b1>level</strong> : Liste des niveaux concernés. Valeurs possibles : <ul class="mt-2" data-v-f6b8a5b1><li data-v-f6b8a5b1>CE1</li><li data-v-f6b8a5b1>CE2</li><li data-v-f6b8a5b1>CM1</li><li data-v-f6b8a5b1>CM2</li><li data-v-f6b8a5b1>6EME</li><li data-v-f6b8a5b1>5EME</li></ul></li><li class="list-group-item" data-v-f6b8a5b1><strong data-v-f6b8a5b1>vision</strong> : Liste des types de vision géométrique. Valeurs possibles : <ul class="mt-2" data-v-f6b8a5b1><li data-v-f6b8a5b1>Surface</li><li data-v-f6b8a5b1>Ligne</li><li data-v-f6b8a5b1>Point</li></ul></li><li class="list-group-item" data-v-f6b8a5b1><strong data-v-f6b8a5b1>instruments</strong> : Liste des instruments autorisés. Valeurs possibles : <ul class="mt-2" data-v-f6b8a5b1><li data-v-f6b8a5b1>Ficelle</li><li data-v-f6b8a5b1>Règle non informable</li><li data-v-f6b8a5b1>Règle informable</li><li data-v-f6b8a5b1>Bande de papier</li><li data-v-f6b8a5b1>Compas</li><li data-v-f6b8a5b1>Gabarit angle droit</li><li data-v-f6b8a5b1>Équerre</li><li data-v-f6b8a5b1>Autre gabarit</li><li data-v-f6b8a5b1>Pochoir</li></ul></li><li class="list-group-item" data-v-f6b8a5b1><strong data-v-f6b8a5b1>withCost</strong> : Indique si la situation inclut des coûts (true/false) </li><li class="list-group-item" data-v-f6b8a5b1><strong data-v-f6b8a5b1>isScaled</strong> : Indique si l&#39;amorce n&#39;est pas à l&#39;échelle (true/false) </li><li class="list-group-item" data-v-f6b8a5b1><strong data-v-f6b8a5b1>hasRotation</strong> : La figure amorce a subit une rotation par rapport à la figure modèle (true/false) </li><li class="list-group-item" data-v-f6b8a5b1><strong data-v-f6b8a5b1>withoutAmorce</strong> : Avec ou sans amorce - Sans amorce, il s&#39;agit d&#39;une reproduction (true/false) </li><li class="list-group-item" data-v-f6b8a5b1><strong data-v-f6b8a5b1>tags</strong> : Liste de mots-clés pour faciliter la recherche </li><li class="list-group-item" data-v-f6b8a5b1><strong data-v-f6b8a5b1>source_url</strong> : URL de la source (optionnel) </li><li class="list-group-item" data-v-f6b8a5b1><strong data-v-f6b8a5b1>source_url_title</strong> : Titre de la source à afficher (optionnel) </li></ul><h2 class="h5 mt-4 mb-3" data-v-f6b8a5b1>Comment l&#39;envoyer ?</h2><ol data-v-f6b8a5b1><li data-v-f6b8a5b1>Votre fichier PDF doit contenir une ou deux pages : <ul data-v-f6b8a5b1><li data-v-f6b8a5b1>la première page est la situation avec la figure modèle et l&#39;amorce.</li><li data-v-f6b8a5b1>La deuxième (optionnelle) donne les outils nécessaires à la situation.</li></ul></li><li data-v-f6b8a5b1>Envoyer copier le json dans un mail, joindre le PDF et envoyer à <a href="mailto:restfigbankupload@gmail.com" target="_blank" data-v-f6b8a5b1>restfigbankupload@gmail.com</a></li></ol>',5))])])])])]))}}),_D=kl(vD,[["__scopeId","data-v-f6b8a5b1"]]),yD=lR({history:BP("/RestFigBank/"),routes:[{path:"/",name:"home",component:zL},{path:"/about",name:"about",component:()=>$L(()=>import("./AboutView-CFNM5kzu.js"),__vite__mapDeps([0,1]))},{path:"/mode-emploi",name:"howto",component:rM},{path:"/licence",name:"license",component:cM},{path:"/instruments",name:"instruments",component:oD},{path:"/contribuer",name:"contribute",component:_D}]}),Mv=QT(OL);Mv.use(tP());Mv.use(yD);Mv.mount("#app");export{kl as _,L as a,vt as c,pt as o};
