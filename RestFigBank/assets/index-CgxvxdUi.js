const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AboutView-BiB-7ZFQ.js","assets/AboutView-CSIvawM9.css"])))=>i.map(i=>d[i]);
var _1=Object.defineProperty;var fy=i=>{throw TypeError(i)};var y1=(i,t,e)=>t in i?_1(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var Z=(i,t,e)=>y1(i,typeof t!="symbol"?t+"":t,e),Qg=(i,t,e)=>t.has(i)||fy("Cannot "+e);var l=(i,t,e)=>(Qg(i,t,"read from private field"),e?e.call(i):t.get(i)),w=(i,t,e)=>t.has(i)?fy("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(i):t.set(i,e),b=(i,t,e,s)=>(Qg(i,t,"write to private field"),s?s.call(i,e):t.set(i,e),e),A=(i,t,e)=>(Qg(i,t,"access private method"),e);var Bs=(i,t,e,s)=>({set _(n){b(i,t,n,e)},get _(){return l(i,t,s)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function e(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=e(n);fetch(n.href,r)}})();var Pf={exports:{}};/*!
  * Bootstrap v5.3.6 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var w1=Pf.exports,py;function A1(){return py||(py=1,function(i,t){(function(e,s){i.exports=s()})(w1,function(){const e=new Map,s={set(y,d,m){e.has(y)||e.set(y,new Map);const E=e.get(y);E.has(d)||E.size===0?E.set(d,m):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(E.keys())[0]}.`)},get:(y,d)=>e.has(y)&&e.get(y).get(d)||null,remove(y,d){if(!e.has(y))return;const m=e.get(y);m.delete(d),m.size===0&&e.delete(y)}},n="transitionend",r=y=>(y&&window.CSS&&window.CSS.escape&&(y=y.replace(/#([^\s"#']+)/g,(d,m)=>`#${CSS.escape(m)}`)),y),o=y=>{y.dispatchEvent(new Event(n))},a=y=>!(!y||typeof y!="object")&&(y.jquery!==void 0&&(y=y[0]),y.nodeType!==void 0),c=y=>a(y)?y.jquery?y[0]:y:typeof y=="string"&&y.length>0?document.querySelector(r(y)):null,h=y=>{if(!a(y)||y.getClientRects().length===0)return!1;const d=getComputedStyle(y).getPropertyValue("visibility")==="visible",m=y.closest("details:not([open])");if(!m)return d;if(m!==y){const E=y.closest("summary");if(E&&E.parentNode!==m||E===null)return!1}return d},u=y=>!y||y.nodeType!==Node.ELEMENT_NODE||!!y.classList.contains("disabled")||(y.disabled!==void 0?y.disabled:y.hasAttribute("disabled")&&y.getAttribute("disabled")!=="false"),f=y=>{if(!document.documentElement.attachShadow)return null;if(typeof y.getRootNode=="function"){const d=y.getRootNode();return d instanceof ShadowRoot?d:null}return y instanceof ShadowRoot?y:y.parentNode?f(y.parentNode):null},p=()=>{},g=y=>{y.offsetHeight},_=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,v=[],x=()=>document.documentElement.dir==="rtl",S=y=>{var d;d=()=>{const m=_();if(m){const E=y.NAME,F=m.fn[E];m.fn[E]=y.jQueryInterface,m.fn[E].Constructor=y,m.fn[E].noConflict=()=>(m.fn[E]=F,y.jQueryInterface)}},document.readyState==="loading"?(v.length||document.addEventListener("DOMContentLoaded",()=>{for(const m of v)m()}),v.push(d)):d()},C=(y,d=[],m=y)=>typeof y=="function"?y.call(...d):m,T=(y,d,m=!0)=>{if(!m)return void C(y);const E=(j=>{if(!j)return 0;let{transitionDuration:G,transitionDelay:et}=window.getComputedStyle(j);const ut=Number.parseFloat(G),dt=Number.parseFloat(et);return ut||dt?(G=G.split(",")[0],et=et.split(",")[0],1e3*(Number.parseFloat(G)+Number.parseFloat(et))):0})(d)+5;let F=!1;const N=({target:j})=>{j===d&&(F=!0,d.removeEventListener(n,N),C(y))};d.addEventListener(n,N),setTimeout(()=>{F||o(d)},E)},R=(y,d,m,E)=>{const F=y.length;let N=y.indexOf(d);return N===-1?!m&&E?y[F-1]:y[0]:(N+=m?1:-1,E&&(N=(N+F)%F),y[Math.max(0,Math.min(N,F-1))])},L=/[^.]*(?=\..*)\.|.*/,O=/\..*/,I=/::\d+$/,D={};let B=1;const K={mouseenter:"mouseover",mouseleave:"mouseout"},Q=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function bt(y,d){return d&&`${d}::${B++}`||y.uidEvent||B++}function yt(y){const d=bt(y);return y.uidEvent=d,D[d]=D[d]||{},D[d]}function St(y,d,m=null){return Object.values(y).find(E=>E.callable===d&&E.delegationSelector===m)}function Ut(y,d,m){const E=typeof d=="string",F=E?m:d||m;let N=De(y);return Q.has(N)||(N=y),[E,F,N]}function J(y,d,m,E,F){if(typeof d!="string"||!y)return;let[N,j,G]=Ut(d,m,E);d in K&&(j=(kt=>function(Tt){if(!Tt.relatedTarget||Tt.relatedTarget!==Tt.delegateTarget&&!Tt.delegateTarget.contains(Tt.relatedTarget))return kt.call(this,Tt)})(j));const et=yt(y),ut=et[G]||(et[G]={}),dt=St(ut,j,N?m:null);if(dt)return void(dt.oneOff=dt.oneOff&&F);const at=bt(j,d.replace(L,"")),Ot=N?function(Ct,kt,Tt){return function It(ce){const ve=Ct.querySelectorAll(kt);for(let{target:$t}=ce;$t&&$t!==this;$t=$t.parentNode)for(const Zt of ve)if(Zt===$t)return Ee(ce,{delegateTarget:$t}),It.oneOff&&z.off(Ct,ce.type,kt,Tt),Tt.apply($t,[ce])}}(y,m,j):function(Ct,kt){return function Tt(It){return Ee(It,{delegateTarget:Ct}),Tt.oneOff&&z.off(Ct,It.type,kt),kt.apply(Ct,[It])}}(y,j);Ot.delegationSelector=N?m:null,Ot.callable=j,Ot.oneOff=F,Ot.uidEvent=at,ut[at]=Ot,y.addEventListener(G,Ot,N)}function X(y,d,m,E,F){const N=St(d[m],E,F);N&&(y.removeEventListener(m,N,!!F),delete d[m][N.uidEvent])}function Pt(y,d,m,E){const F=d[m]||{};for(const[N,j]of Object.entries(F))N.includes(E)&&X(y,d,m,j.callable,j.delegationSelector)}function De(y){return y=y.replace(O,""),K[y]||y}const z={on(y,d,m,E){J(y,d,m,E,!1)},one(y,d,m,E){J(y,d,m,E,!0)},off(y,d,m,E){if(typeof d!="string"||!y)return;const[F,N,j]=Ut(d,m,E),G=j!==d,et=yt(y),ut=et[j]||{},dt=d.startsWith(".");if(N===void 0){if(dt)for(const at of Object.keys(et))Pt(y,et,at,d.slice(1));for(const[at,Ot]of Object.entries(ut)){const Ct=at.replace(I,"");G&&!d.includes(Ct)||X(y,et,j,Ot.callable,Ot.delegationSelector)}}else{if(!Object.keys(ut).length)return;X(y,et,j,N,F?m:null)}},trigger(y,d,m){if(typeof d!="string"||!y)return null;const E=_();let F=null,N=!0,j=!0,G=!1;d!==De(d)&&E&&(F=E.Event(d,m),E(y).trigger(F),N=!F.isPropagationStopped(),j=!F.isImmediatePropagationStopped(),G=F.isDefaultPrevented());const et=Ee(new Event(d,{bubbles:N,cancelable:!0}),m);return G&&et.preventDefault(),j&&y.dispatchEvent(et),et.defaultPrevented&&F&&F.preventDefault(),et}};function Ee(y,d={}){for(const[m,E]of Object.entries(d))try{y[m]=E}catch{Object.defineProperty(y,m,{configurable:!0,get:()=>E})}return y}function Vt(y){if(y==="true")return!0;if(y==="false")return!1;if(y===Number(y).toString())return Number(y);if(y===""||y==="null")return null;if(typeof y!="string")return y;try{return JSON.parse(decodeURIComponent(y))}catch{return y}}function Qt(y){return y.replace(/[A-Z]/g,d=>`-${d.toLowerCase()}`)}const Pe={setDataAttribute(y,d,m){y.setAttribute(`data-bs-${Qt(d)}`,m)},removeDataAttribute(y,d){y.removeAttribute(`data-bs-${Qt(d)}`)},getDataAttributes(y){if(!y)return{};const d={},m=Object.keys(y.dataset).filter(E=>E.startsWith("bs")&&!E.startsWith("bsConfig"));for(const E of m){let F=E.replace(/^bs/,"");F=F.charAt(0).toLowerCase()+F.slice(1),d[F]=Vt(y.dataset[E])}return d},getDataAttribute:(y,d)=>Vt(y.getAttribute(`data-bs-${Qt(d)}`))};class Ye{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(d){return d=this._mergeConfigObj(d),d=this._configAfterMerge(d),this._typeCheckConfig(d),d}_configAfterMerge(d){return d}_mergeConfigObj(d,m){const E=a(m)?Pe.getDataAttribute(m,"config"):{};return{...this.constructor.Default,...typeof E=="object"?E:{},...a(m)?Pe.getDataAttributes(m):{},...typeof d=="object"?d:{}}}_typeCheckConfig(d,m=this.constructor.DefaultType){for(const[F,N]of Object.entries(m)){const j=d[F],G=a(j)?"element":(E=j)==null?`${E}`:Object.prototype.toString.call(E).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(N).test(G))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${F}" provided type "${G}" but expected type "${N}".`)}var E}}class qt extends Ye{constructor(d,m){super(),(d=c(d))&&(this._element=d,this._config=this._getConfig(m),s.set(this._element,this.constructor.DATA_KEY,this))}dispose(){s.remove(this._element,this.constructor.DATA_KEY),z.off(this._element,this.constructor.EVENT_KEY);for(const d of Object.getOwnPropertyNames(this))this[d]=null}_queueCallback(d,m,E=!0){T(d,m,E)}_getConfig(d){return d=this._mergeConfigObj(d,this._element),d=this._configAfterMerge(d),this._typeCheckConfig(d),d}static getInstance(d){return s.get(c(d),this.DATA_KEY)}static getOrCreateInstance(d,m={}){return this.getInstance(d)||new this(d,typeof m=="object"?m:null)}static get VERSION(){return"5.3.6"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(d){return`${d}${this.EVENT_KEY}`}}const H=y=>{let d=y.getAttribute("data-bs-target");if(!d||d==="#"){let m=y.getAttribute("href");if(!m||!m.includes("#")&&!m.startsWith("."))return null;m.includes("#")&&!m.startsWith("#")&&(m=`#${m.split("#")[1]}`),d=m&&m!=="#"?m.trim():null}return d?d.split(",").map(m=>r(m)).join(","):null},V={find:(y,d=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(d,y)),findOne:(y,d=document.documentElement)=>Element.prototype.querySelector.call(d,y),children:(y,d)=>[].concat(...y.children).filter(m=>m.matches(d)),parents(y,d){const m=[];let E=y.parentNode.closest(d);for(;E;)m.push(E),E=E.parentNode.closest(d);return m},prev(y,d){let m=y.previousElementSibling;for(;m;){if(m.matches(d))return[m];m=m.previousElementSibling}return[]},next(y,d){let m=y.nextElementSibling;for(;m;){if(m.matches(d))return[m];m=m.nextElementSibling}return[]},focusableChildren(y){const d=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(m=>`${m}:not([tabindex^="-"])`).join(",");return this.find(d,y).filter(m=>!u(m)&&h(m))},getSelectorFromElement(y){const d=H(y);return d&&V.findOne(d)?d:null},getElementFromSelector(y){const d=H(y);return d?V.findOne(d):null},getMultipleElementsFromSelector(y){const d=H(y);return d?V.find(d):[]}},it=(y,d="hide")=>{const m=`click.dismiss${y.EVENT_KEY}`,E=y.NAME;z.on(document,m,`[data-bs-dismiss="${E}"]`,function(F){if(["A","AREA"].includes(this.tagName)&&F.preventDefault(),u(this))return;const N=V.getElementFromSelector(this)||this.closest(`.${E}`);y.getOrCreateInstance(N)[d]()})},ht=".bs.alert",Gt=`close${ht}`,P=`closed${ht}`;class k extends qt{static get NAME(){return"alert"}close(){if(z.trigger(this._element,Gt).defaultPrevented)return;this._element.classList.remove("show");const d=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,d)}_destroyElement(){this._element.remove(),z.trigger(this._element,P),this.dispose()}static jQueryInterface(d){return this.each(function(){const m=k.getOrCreateInstance(this);if(typeof d=="string"){if(m[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);m[d](this)}})}}it(k,"close"),S(k);const $='[data-bs-toggle="button"]';class U extends qt{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(d){return this.each(function(){const m=U.getOrCreateInstance(this);d==="toggle"&&m[d]()})}}z.on(document,"click.bs.button.data-api",$,y=>{y.preventDefault();const d=y.target.closest($);U.getOrCreateInstance(d).toggle()}),S(U);const W=".bs.swipe",q=`touchstart${W}`,rt=`touchmove${W}`,st=`touchend${W}`,tt=`pointerdown${W}`,Y=`pointerup${W}`,vt={endCallback:null,leftCallback:null,rightCallback:null},ot={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class gt extends Ye{constructor(d,m){super(),this._element=d,d&&gt.isSupported()&&(this._config=this._getConfig(m),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return vt}static get DefaultType(){return ot}static get NAME(){return"swipe"}dispose(){z.off(this._element,W)}_start(d){this._supportPointerEvents?this._eventIsPointerPenTouch(d)&&(this._deltaX=d.clientX):this._deltaX=d.touches[0].clientX}_end(d){this._eventIsPointerPenTouch(d)&&(this._deltaX=d.clientX-this._deltaX),this._handleSwipe(),C(this._config.endCallback)}_move(d){this._deltaX=d.touches&&d.touches.length>1?0:d.touches[0].clientX-this._deltaX}_handleSwipe(){const d=Math.abs(this._deltaX);if(d<=40)return;const m=d/this._deltaX;this._deltaX=0,m&&C(m>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(z.on(this._element,tt,d=>this._start(d)),z.on(this._element,Y,d=>this._end(d)),this._element.classList.add("pointer-event")):(z.on(this._element,q,d=>this._start(d)),z.on(this._element,rt,d=>this._move(d)),z.on(this._element,st,d=>this._end(d)))}_eventIsPointerPenTouch(d){return this._supportPointerEvents&&(d.pointerType==="pen"||d.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const _t=".bs.carousel",Ht=".data-api",le="ArrowLeft",Jt="ArrowRight",Qe="next",Ne="prev",ds="left",Ms="right",qo=`slide${_t}`,Tl=`slid${_t}`,Ds=`keydown${_t}`,Ti=`mouseenter${_t}`,Jd=`mouseleave${_t}`,pS=`dragstart${_t}`,gS=`load${_t}${Ht}`,mS=`click${_t}${Ht}`,$v="carousel",Zd="active",Bv=".active",Hv=".carousel-item",bS=Bv+Hv,vS={[le]:Ms,[Jt]:ds},_S={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},yS={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Pl extends qt{constructor(d,m){super(d,m),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=V.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===$v&&this.cycle()}static get Default(){return _S}static get DefaultType(){return yS}static get NAME(){return"carousel"}next(){this._slide(Qe)}nextWhenVisible(){!document.hidden&&h(this._element)&&this.next()}prev(){this._slide(Ne)}pause(){this._isSliding&&o(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?z.one(this._element,Tl,()=>this.cycle()):this.cycle())}to(d){const m=this._getItems();if(d>m.length-1||d<0)return;if(this._isSliding)return void z.one(this._element,Tl,()=>this.to(d));const E=this._getItemIndex(this._getActive());if(E===d)return;const F=d>E?Qe:Ne;this._slide(F,m[d])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(d){return d.defaultInterval=d.interval,d}_addEventListeners(){this._config.keyboard&&z.on(this._element,Ds,d=>this._keydown(d)),this._config.pause==="hover"&&(z.on(this._element,Ti,()=>this.pause()),z.on(this._element,Jd,()=>this._maybeEnableCycle())),this._config.touch&&gt.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const m of V.find(".carousel-item img",this._element))z.on(m,pS,E=>E.preventDefault());const d={leftCallback:()=>this._slide(this._directionToOrder(ds)),rightCallback:()=>this._slide(this._directionToOrder(Ms)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new gt(this._element,d)}_keydown(d){if(/input|textarea/i.test(d.target.tagName))return;const m=vS[d.key];m&&(d.preventDefault(),this._slide(this._directionToOrder(m)))}_getItemIndex(d){return this._getItems().indexOf(d)}_setActiveIndicatorElement(d){if(!this._indicatorsElement)return;const m=V.findOne(Bv,this._indicatorsElement);m.classList.remove(Zd),m.removeAttribute("aria-current");const E=V.findOne(`[data-bs-slide-to="${d}"]`,this._indicatorsElement);E&&(E.classList.add(Zd),E.setAttribute("aria-current","true"))}_updateInterval(){const d=this._activeElement||this._getActive();if(!d)return;const m=Number.parseInt(d.getAttribute("data-bs-interval"),10);this._config.interval=m||this._config.defaultInterval}_slide(d,m=null){if(this._isSliding)return;const E=this._getActive(),F=d===Qe,N=m||R(this._getItems(),E,F,this._config.wrap);if(N===E)return;const j=this._getItemIndex(N),G=at=>z.trigger(this._element,at,{relatedTarget:N,direction:this._orderToDirection(d),from:this._getItemIndex(E),to:j});if(G(qo).defaultPrevented||!E||!N)return;const et=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(j),this._activeElement=N;const ut=F?"carousel-item-start":"carousel-item-end",dt=F?"carousel-item-next":"carousel-item-prev";N.classList.add(dt),g(N),E.classList.add(ut),N.classList.add(ut),this._queueCallback(()=>{N.classList.remove(ut,dt),N.classList.add(Zd),E.classList.remove(Zd,dt,ut),this._isSliding=!1,G(Tl)},E,this._isAnimated()),et&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return V.findOne(bS,this._element)}_getItems(){return V.find(Hv,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(d){return x()?d===ds?Ne:Qe:d===ds?Qe:Ne}_orderToDirection(d){return x()?d===Ne?ds:Ms:d===Ne?Ms:ds}static jQueryInterface(d){return this.each(function(){const m=Pl.getOrCreateInstance(this,d);if(typeof d!="number"){if(typeof d=="string"){if(m[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);m[d]()}}else m.to(d)})}}z.on(document,mS,"[data-bs-slide], [data-bs-slide-to]",function(y){const d=V.getElementFromSelector(this);if(!d||!d.classList.contains($v))return;y.preventDefault();const m=Pl.getOrCreateInstance(d),E=this.getAttribute("data-bs-slide-to");return E?(m.to(E),void m._maybeEnableCycle()):Pe.getDataAttribute(this,"slide")==="next"?(m.next(),void m._maybeEnableCycle()):(m.prev(),void m._maybeEnableCycle())}),z.on(window,gS,()=>{const y=V.find('[data-bs-ride="carousel"]');for(const d of y)Pl.getOrCreateInstance(d)}),S(Pl);const wh=".bs.collapse",wS=`show${wh}`,AS=`shown${wh}`,ES=`hide${wh}`,SS=`hidden${wh}`,xS=`click${wh}.data-api`,_g="show",Rl="collapse",tf="collapsing",CS=`:scope .${Rl} .${Rl}`,yg='[data-bs-toggle="collapse"]',TS={parent:null,toggle:!0},PS={parent:"(null|element)",toggle:"boolean"};class kl extends qt{constructor(d,m){super(d,m),this._isTransitioning=!1,this._triggerArray=[];const E=V.find(yg);for(const F of E){const N=V.getSelectorFromElement(F),j=V.find(N).filter(G=>G===this._element);N!==null&&j.length&&this._triggerArray.push(F)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return TS}static get DefaultType(){return PS}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let d=[];if(this._config.parent&&(d=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(F=>F!==this._element).map(F=>kl.getOrCreateInstance(F,{toggle:!1}))),d.length&&d[0]._isTransitioning||z.trigger(this._element,wS).defaultPrevented)return;for(const F of d)F.hide();const m=this._getDimension();this._element.classList.remove(Rl),this._element.classList.add(tf),this._element.style[m]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const E=`scroll${m[0].toUpperCase()+m.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(tf),this._element.classList.add(Rl,_g),this._element.style[m]="",z.trigger(this._element,AS)},this._element,!0),this._element.style[m]=`${this._element[E]}px`}hide(){if(this._isTransitioning||!this._isShown()||z.trigger(this._element,ES).defaultPrevented)return;const d=this._getDimension();this._element.style[d]=`${this._element.getBoundingClientRect()[d]}px`,g(this._element),this._element.classList.add(tf),this._element.classList.remove(Rl,_g);for(const m of this._triggerArray){const E=V.getElementFromSelector(m);E&&!this._isShown(E)&&this._addAriaAndCollapsedClass([m],!1)}this._isTransitioning=!0,this._element.style[d]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(tf),this._element.classList.add(Rl),z.trigger(this._element,SS)},this._element,!0)}_isShown(d=this._element){return d.classList.contains(_g)}_configAfterMerge(d){return d.toggle=!!d.toggle,d.parent=c(d.parent),d}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const d=this._getFirstLevelChildren(yg);for(const m of d){const E=V.getElementFromSelector(m);E&&this._addAriaAndCollapsedClass([m],this._isShown(E))}}_getFirstLevelChildren(d){const m=V.find(CS,this._config.parent);return V.find(d,this._config.parent).filter(E=>!m.includes(E))}_addAriaAndCollapsedClass(d,m){if(d.length)for(const E of d)E.classList.toggle("collapsed",!m),E.setAttribute("aria-expanded",m)}static jQueryInterface(d){const m={};return typeof d=="string"&&/show|hide/.test(d)&&(m.toggle=!1),this.each(function(){const E=kl.getOrCreateInstance(this,m);if(typeof d=="string"){if(E[d]===void 0)throw new TypeError(`No method named "${d}"`);E[d]()}})}}z.on(document,xS,yg,function(y){(y.target.tagName==="A"||y.delegateTarget&&y.delegateTarget.tagName==="A")&&y.preventDefault();for(const d of V.getMultipleElementsFromSelector(this))kl.getOrCreateInstance(d,{toggle:!1}).toggle()}),S(kl);var Os="top",ii="bottom",ni="right",Fs="left",ef="auto",Il=[Os,ii,ni,Fs],Go="start",Ll="end",jv="clippingParents",wg="viewport",Ml="popper",Vv="reference",Ag=Il.reduce(function(y,d){return y.concat([d+"-"+Go,d+"-"+Ll])},[]),Eg=[].concat(Il,[ef]).reduce(function(y,d){return y.concat([d,d+"-"+Go,d+"-"+Ll])},[]),Uv="beforeRead",zv="read",Wv="afterRead",qv="beforeMain",Gv="main",Xv="afterMain",Kv="beforeWrite",Yv="write",Qv="afterWrite",Jv=[Uv,zv,Wv,qv,Gv,Xv,Kv,Yv,Qv];function pn(y){return y?(y.nodeName||"").toLowerCase():null}function ri(y){if(y==null)return window;if(y.toString()!=="[object Window]"){var d=y.ownerDocument;return d&&d.defaultView||window}return y}function Xo(y){return y instanceof ri(y).Element||y instanceof Element}function Pi(y){return y instanceof ri(y).HTMLElement||y instanceof HTMLElement}function Sg(y){return typeof ShadowRoot<"u"&&(y instanceof ri(y).ShadowRoot||y instanceof ShadowRoot)}const xg={name:"applyStyles",enabled:!0,phase:"write",fn:function(y){var d=y.state;Object.keys(d.elements).forEach(function(m){var E=d.styles[m]||{},F=d.attributes[m]||{},N=d.elements[m];Pi(N)&&pn(N)&&(Object.assign(N.style,E),Object.keys(F).forEach(function(j){var G=F[j];G===!1?N.removeAttribute(j):N.setAttribute(j,G===!0?"":G)}))})},effect:function(y){var d=y.state,m={popper:{position:d.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(d.elements.popper.style,m.popper),d.styles=m,d.elements.arrow&&Object.assign(d.elements.arrow.style,m.arrow),function(){Object.keys(d.elements).forEach(function(E){var F=d.elements[E],N=d.attributes[E]||{},j=Object.keys(d.styles.hasOwnProperty(E)?d.styles[E]:m[E]).reduce(function(G,et){return G[et]="",G},{});Pi(F)&&pn(F)&&(Object.assign(F.style,j),Object.keys(N).forEach(function(G){F.removeAttribute(G)}))})}},requires:["computeStyles"]};function gn(y){return y.split("-")[0]}var Ko=Math.max,sf=Math.min,Dl=Math.round;function Cg(){var y=navigator.userAgentData;return y!=null&&y.brands&&Array.isArray(y.brands)?y.brands.map(function(d){return d.brand+"/"+d.version}).join(" "):navigator.userAgent}function Zv(){return!/^((?!chrome|android).)*safari/i.test(Cg())}function Ol(y,d,m){d===void 0&&(d=!1),m===void 0&&(m=!1);var E=y.getBoundingClientRect(),F=1,N=1;d&&Pi(y)&&(F=y.offsetWidth>0&&Dl(E.width)/y.offsetWidth||1,N=y.offsetHeight>0&&Dl(E.height)/y.offsetHeight||1);var j=(Xo(y)?ri(y):window).visualViewport,G=!Zv()&&m,et=(E.left+(G&&j?j.offsetLeft:0))/F,ut=(E.top+(G&&j?j.offsetTop:0))/N,dt=E.width/F,at=E.height/N;return{width:dt,height:at,top:ut,right:et+dt,bottom:ut+at,left:et,x:et,y:ut}}function Tg(y){var d=Ol(y),m=y.offsetWidth,E=y.offsetHeight;return Math.abs(d.width-m)<=1&&(m=d.width),Math.abs(d.height-E)<=1&&(E=d.height),{x:y.offsetLeft,y:y.offsetTop,width:m,height:E}}function t_(y,d){var m=d.getRootNode&&d.getRootNode();if(y.contains(d))return!0;if(m&&Sg(m)){var E=d;do{if(E&&y.isSameNode(E))return!0;E=E.parentNode||E.host}while(E)}return!1}function qn(y){return ri(y).getComputedStyle(y)}function RS(y){return["table","td","th"].indexOf(pn(y))>=0}function zr(y){return((Xo(y)?y.ownerDocument:y.document)||window.document).documentElement}function nf(y){return pn(y)==="html"?y:y.assignedSlot||y.parentNode||(Sg(y)?y.host:null)||zr(y)}function e_(y){return Pi(y)&&qn(y).position!=="fixed"?y.offsetParent:null}function Ah(y){for(var d=ri(y),m=e_(y);m&&RS(m)&&qn(m).position==="static";)m=e_(m);return m&&(pn(m)==="html"||pn(m)==="body"&&qn(m).position==="static")?d:m||function(E){var F=/firefox/i.test(Cg());if(/Trident/i.test(Cg())&&Pi(E)&&qn(E).position==="fixed")return null;var N=nf(E);for(Sg(N)&&(N=N.host);Pi(N)&&["html","body"].indexOf(pn(N))<0;){var j=qn(N);if(j.transform!=="none"||j.perspective!=="none"||j.contain==="paint"||["transform","perspective"].indexOf(j.willChange)!==-1||F&&j.willChange==="filter"||F&&j.filter&&j.filter!=="none")return N;N=N.parentNode}return null}(y)||d}function Pg(y){return["top","bottom"].indexOf(y)>=0?"x":"y"}function Eh(y,d,m){return Ko(y,sf(d,m))}function s_(y){return Object.assign({},{top:0,right:0,bottom:0,left:0},y)}function i_(y,d){return d.reduce(function(m,E){return m[E]=y,m},{})}const n_={name:"arrow",enabled:!0,phase:"main",fn:function(y){var d,m=y.state,E=y.name,F=y.options,N=m.elements.arrow,j=m.modifiersData.popperOffsets,G=gn(m.placement),et=Pg(G),ut=[Fs,ni].indexOf(G)>=0?"height":"width";if(N&&j){var dt=function(he,re){return s_(typeof(he=typeof he=="function"?he(Object.assign({},re.rects,{placement:re.placement})):he)!="number"?he:i_(he,Il))}(F.padding,m),at=Tg(N),Ot=et==="y"?Os:Fs,Ct=et==="y"?ii:ni,kt=m.rects.reference[ut]+m.rects.reference[et]-j[et]-m.rects.popper[ut],Tt=j[et]-m.rects.reference[et],It=Ah(N),ce=It?et==="y"?It.clientHeight||0:It.clientWidth||0:0,ve=kt/2-Tt/2,$t=dt[Ot],Zt=ce-at[ut]-dt[Ct],Ft=ce/2-at[ut]/2+ve,zt=Eh($t,Ft,Zt),ne=et;m.modifiersData[E]=((d={})[ne]=zt,d.centerOffset=zt-Ft,d)}},effect:function(y){var d=y.state,m=y.options.element,E=m===void 0?"[data-popper-arrow]":m;E!=null&&(typeof E!="string"||(E=d.elements.popper.querySelector(E)))&&t_(d.elements.popper,E)&&(d.elements.arrow=E)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Fl(y){return y.split("-")[1]}var kS={top:"auto",right:"auto",bottom:"auto",left:"auto"};function r_(y){var d,m=y.popper,E=y.popperRect,F=y.placement,N=y.variation,j=y.offsets,G=y.position,et=y.gpuAcceleration,ut=y.adaptive,dt=y.roundOffsets,at=y.isFixed,Ot=j.x,Ct=Ot===void 0?0:Ot,kt=j.y,Tt=kt===void 0?0:kt,It=typeof dt=="function"?dt({x:Ct,y:Tt}):{x:Ct,y:Tt};Ct=It.x,Tt=It.y;var ce=j.hasOwnProperty("x"),ve=j.hasOwnProperty("y"),$t=Fs,Zt=Os,Ft=window;if(ut){var zt=Ah(m),ne="clientHeight",he="clientWidth";zt===ri(m)&&qn(zt=zr(m)).position!=="static"&&G==="absolute"&&(ne="scrollHeight",he="scrollWidth"),(F===Os||(F===Fs||F===ni)&&N===Ll)&&(Zt=ii,Tt-=(at&&zt===Ft&&Ft.visualViewport?Ft.visualViewport.height:zt[ne])-E.height,Tt*=et?1:-1),F!==Fs&&(F!==Os&&F!==ii||N!==Ll)||($t=ni,Ct-=(at&&zt===Ft&&Ft.visualViewport?Ft.visualViewport.width:zt[he])-E.width,Ct*=et?1:-1)}var re,$e=Object.assign({position:G},ut&&kS),oi=dt===!0?function(Gi,Ns){var ki=Gi.x,Ii=Gi.y,Oe=Ns.devicePixelRatio||1;return{x:Dl(ki*Oe)/Oe||0,y:Dl(Ii*Oe)/Oe||0}}({x:Ct,y:Tt},ri(m)):{x:Ct,y:Tt};return Ct=oi.x,Tt=oi.y,et?Object.assign({},$e,((re={})[Zt]=ve?"0":"",re[$t]=ce?"0":"",re.transform=(Ft.devicePixelRatio||1)<=1?"translate("+Ct+"px, "+Tt+"px)":"translate3d("+Ct+"px, "+Tt+"px, 0)",re)):Object.assign({},$e,((d={})[Zt]=ve?Tt+"px":"",d[$t]=ce?Ct+"px":"",d.transform="",d))}const Rg={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(y){var d=y.state,m=y.options,E=m.gpuAcceleration,F=E===void 0||E,N=m.adaptive,j=N===void 0||N,G=m.roundOffsets,et=G===void 0||G,ut={placement:gn(d.placement),variation:Fl(d.placement),popper:d.elements.popper,popperRect:d.rects.popper,gpuAcceleration:F,isFixed:d.options.strategy==="fixed"};d.modifiersData.popperOffsets!=null&&(d.styles.popper=Object.assign({},d.styles.popper,r_(Object.assign({},ut,{offsets:d.modifiersData.popperOffsets,position:d.options.strategy,adaptive:j,roundOffsets:et})))),d.modifiersData.arrow!=null&&(d.styles.arrow=Object.assign({},d.styles.arrow,r_(Object.assign({},ut,{offsets:d.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:et})))),d.attributes.popper=Object.assign({},d.attributes.popper,{"data-popper-placement":d.placement})},data:{}};var rf={passive:!0};const kg={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(y){var d=y.state,m=y.instance,E=y.options,F=E.scroll,N=F===void 0||F,j=E.resize,G=j===void 0||j,et=ri(d.elements.popper),ut=[].concat(d.scrollParents.reference,d.scrollParents.popper);return N&&ut.forEach(function(dt){dt.addEventListener("scroll",m.update,rf)}),G&&et.addEventListener("resize",m.update,rf),function(){N&&ut.forEach(function(dt){dt.removeEventListener("scroll",m.update,rf)}),G&&et.removeEventListener("resize",m.update,rf)}},data:{}};var IS={left:"right",right:"left",bottom:"top",top:"bottom"};function of(y){return y.replace(/left|right|bottom|top/g,function(d){return IS[d]})}var LS={start:"end",end:"start"};function o_(y){return y.replace(/start|end/g,function(d){return LS[d]})}function Ig(y){var d=ri(y);return{scrollLeft:d.pageXOffset,scrollTop:d.pageYOffset}}function Lg(y){return Ol(zr(y)).left+Ig(y).scrollLeft}function Mg(y){var d=qn(y),m=d.overflow,E=d.overflowX,F=d.overflowY;return/auto|scroll|overlay|hidden/.test(m+F+E)}function a_(y){return["html","body","#document"].indexOf(pn(y))>=0?y.ownerDocument.body:Pi(y)&&Mg(y)?y:a_(nf(y))}function Sh(y,d){var m;d===void 0&&(d=[]);var E=a_(y),F=E===((m=y.ownerDocument)==null?void 0:m.body),N=ri(E),j=F?[N].concat(N.visualViewport||[],Mg(E)?E:[]):E,G=d.concat(j);return F?G:G.concat(Sh(nf(j)))}function Dg(y){return Object.assign({},y,{left:y.x,top:y.y,right:y.x+y.width,bottom:y.y+y.height})}function l_(y,d,m){return d===wg?Dg(function(E,F){var N=ri(E),j=zr(E),G=N.visualViewport,et=j.clientWidth,ut=j.clientHeight,dt=0,at=0;if(G){et=G.width,ut=G.height;var Ot=Zv();(Ot||!Ot&&F==="fixed")&&(dt=G.offsetLeft,at=G.offsetTop)}return{width:et,height:ut,x:dt+Lg(E),y:at}}(y,m)):Xo(d)?function(E,F){var N=Ol(E,!1,F==="fixed");return N.top=N.top+E.clientTop,N.left=N.left+E.clientLeft,N.bottom=N.top+E.clientHeight,N.right=N.left+E.clientWidth,N.width=E.clientWidth,N.height=E.clientHeight,N.x=N.left,N.y=N.top,N}(d,m):Dg(function(E){var F,N=zr(E),j=Ig(E),G=(F=E.ownerDocument)==null?void 0:F.body,et=Ko(N.scrollWidth,N.clientWidth,G?G.scrollWidth:0,G?G.clientWidth:0),ut=Ko(N.scrollHeight,N.clientHeight,G?G.scrollHeight:0,G?G.clientHeight:0),dt=-j.scrollLeft+Lg(E),at=-j.scrollTop;return qn(G||N).direction==="rtl"&&(dt+=Ko(N.clientWidth,G?G.clientWidth:0)-et),{width:et,height:ut,x:dt,y:at}}(zr(y)))}function c_(y){var d,m=y.reference,E=y.element,F=y.placement,N=F?gn(F):null,j=F?Fl(F):null,G=m.x+m.width/2-E.width/2,et=m.y+m.height/2-E.height/2;switch(N){case Os:d={x:G,y:m.y-E.height};break;case ii:d={x:G,y:m.y+m.height};break;case ni:d={x:m.x+m.width,y:et};break;case Fs:d={x:m.x-E.width,y:et};break;default:d={x:m.x,y:m.y}}var ut=N?Pg(N):null;if(ut!=null){var dt=ut==="y"?"height":"width";switch(j){case Go:d[ut]=d[ut]-(m[dt]/2-E[dt]/2);break;case Ll:d[ut]=d[ut]+(m[dt]/2-E[dt]/2)}}return d}function Nl(y,d){d===void 0&&(d={});var m=d,E=m.placement,F=E===void 0?y.placement:E,N=m.strategy,j=N===void 0?y.strategy:N,G=m.boundary,et=G===void 0?jv:G,ut=m.rootBoundary,dt=ut===void 0?wg:ut,at=m.elementContext,Ot=at===void 0?Ml:at,Ct=m.altBoundary,kt=Ct!==void 0&&Ct,Tt=m.padding,It=Tt===void 0?0:Tt,ce=s_(typeof It!="number"?It:i_(It,Il)),ve=Ot===Ml?Vv:Ml,$t=y.rects.popper,Zt=y.elements[kt?ve:Ot],Ft=function(Ns,ki,Ii,Oe){var mn=ki==="clippingParents"?function(ge){var $s=Sh(nf(ge)),Li=["absolute","fixed"].indexOf(qn(ge).position)>=0&&Pi(ge)?Ah(ge):ge;return Xo(Li)?$s.filter(function(qr){return Xo(qr)&&t_(qr,Li)&&pn(qr)!=="body"}):[]}(Ns):[].concat(ki),bn=[].concat(mn,[Ii]),Hl=bn[0],is=bn.reduce(function(ge,$s){var Li=l_(Ns,$s,Oe);return ge.top=Ko(Li.top,ge.top),ge.right=sf(Li.right,ge.right),ge.bottom=sf(Li.bottom,ge.bottom),ge.left=Ko(Li.left,ge.left),ge},l_(Ns,Hl,Oe));return is.width=is.right-is.left,is.height=is.bottom-is.top,is.x=is.left,is.y=is.top,is}(Xo(Zt)?Zt:Zt.contextElement||zr(y.elements.popper),et,dt,j),zt=Ol(y.elements.reference),ne=c_({reference:zt,element:$t,placement:F}),he=Dg(Object.assign({},$t,ne)),re=Ot===Ml?he:zt,$e={top:Ft.top-re.top+ce.top,bottom:re.bottom-Ft.bottom+ce.bottom,left:Ft.left-re.left+ce.left,right:re.right-Ft.right+ce.right},oi=y.modifiersData.offset;if(Ot===Ml&&oi){var Gi=oi[F];Object.keys($e).forEach(function(Ns){var ki=[ni,ii].indexOf(Ns)>=0?1:-1,Ii=[Os,ii].indexOf(Ns)>=0?"y":"x";$e[Ns]+=Gi[Ii]*ki})}return $e}function MS(y,d){d===void 0&&(d={});var m=d,E=m.placement,F=m.boundary,N=m.rootBoundary,j=m.padding,G=m.flipVariations,et=m.allowedAutoPlacements,ut=et===void 0?Eg:et,dt=Fl(E),at=dt?G?Ag:Ag.filter(function(kt){return Fl(kt)===dt}):Il,Ot=at.filter(function(kt){return ut.indexOf(kt)>=0});Ot.length===0&&(Ot=at);var Ct=Ot.reduce(function(kt,Tt){return kt[Tt]=Nl(y,{placement:Tt,boundary:F,rootBoundary:N,padding:j})[gn(Tt)],kt},{});return Object.keys(Ct).sort(function(kt,Tt){return Ct[kt]-Ct[Tt]})}const h_={name:"flip",enabled:!0,phase:"main",fn:function(y){var d=y.state,m=y.options,E=y.name;if(!d.modifiersData[E]._skip){for(var F=m.mainAxis,N=F===void 0||F,j=m.altAxis,G=j===void 0||j,et=m.fallbackPlacements,ut=m.padding,dt=m.boundary,at=m.rootBoundary,Ot=m.altBoundary,Ct=m.flipVariations,kt=Ct===void 0||Ct,Tt=m.allowedAutoPlacements,It=d.options.placement,ce=gn(It),ve=et||(ce!==It&&kt?function(ge){if(gn(ge)===ef)return[];var $s=of(ge);return[o_(ge),$s,o_($s)]}(It):[of(It)]),$t=[It].concat(ve).reduce(function(ge,$s){return ge.concat(gn($s)===ef?MS(d,{placement:$s,boundary:dt,rootBoundary:at,padding:ut,flipVariations:kt,allowedAutoPlacements:Tt}):$s)},[]),Zt=d.rects.reference,Ft=d.rects.popper,zt=new Map,ne=!0,he=$t[0],re=0;re<$t.length;re++){var $e=$t[re],oi=gn($e),Gi=Fl($e)===Go,Ns=[Os,ii].indexOf(oi)>=0,ki=Ns?"width":"height",Ii=Nl(d,{placement:$e,boundary:dt,rootBoundary:at,altBoundary:Ot,padding:ut}),Oe=Ns?Gi?ni:Fs:Gi?ii:Os;Zt[ki]>Ft[ki]&&(Oe=of(Oe));var mn=of(Oe),bn=[];if(N&&bn.push(Ii[oi]<=0),G&&bn.push(Ii[Oe]<=0,Ii[mn]<=0),bn.every(function(ge){return ge})){he=$e,ne=!1;break}zt.set($e,bn)}if(ne)for(var Hl=function(ge){var $s=$t.find(function(Li){var qr=zt.get(Li);if(qr)return qr.slice(0,ge).every(function(gf){return gf})});if($s)return he=$s,"break"},is=kt?3:1;is>0&&Hl(is)!=="break";is--);d.placement!==he&&(d.modifiersData[E]._skip=!0,d.placement=he,d.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function u_(y,d,m){return m===void 0&&(m={x:0,y:0}),{top:y.top-d.height-m.y,right:y.right-d.width+m.x,bottom:y.bottom-d.height+m.y,left:y.left-d.width-m.x}}function d_(y){return[Os,ni,ii,Fs].some(function(d){return y[d]>=0})}const f_={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(y){var d=y.state,m=y.name,E=d.rects.reference,F=d.rects.popper,N=d.modifiersData.preventOverflow,j=Nl(d,{elementContext:"reference"}),G=Nl(d,{altBoundary:!0}),et=u_(j,E),ut=u_(G,F,N),dt=d_(et),at=d_(ut);d.modifiersData[m]={referenceClippingOffsets:et,popperEscapeOffsets:ut,isReferenceHidden:dt,hasPopperEscaped:at},d.attributes.popper=Object.assign({},d.attributes.popper,{"data-popper-reference-hidden":dt,"data-popper-escaped":at})}},p_={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(y){var d=y.state,m=y.options,E=y.name,F=m.offset,N=F===void 0?[0,0]:F,j=Eg.reduce(function(dt,at){return dt[at]=function(Ot,Ct,kt){var Tt=gn(Ot),It=[Fs,Os].indexOf(Tt)>=0?-1:1,ce=typeof kt=="function"?kt(Object.assign({},Ct,{placement:Ot})):kt,ve=ce[0],$t=ce[1];return ve=ve||0,$t=($t||0)*It,[Fs,ni].indexOf(Tt)>=0?{x:$t,y:ve}:{x:ve,y:$t}}(at,d.rects,N),dt},{}),G=j[d.placement],et=G.x,ut=G.y;d.modifiersData.popperOffsets!=null&&(d.modifiersData.popperOffsets.x+=et,d.modifiersData.popperOffsets.y+=ut),d.modifiersData[E]=j}},Og={name:"popperOffsets",enabled:!0,phase:"read",fn:function(y){var d=y.state,m=y.name;d.modifiersData[m]=c_({reference:d.rects.reference,element:d.rects.popper,placement:d.placement})},data:{}},g_={name:"preventOverflow",enabled:!0,phase:"main",fn:function(y){var d=y.state,m=y.options,E=y.name,F=m.mainAxis,N=F===void 0||F,j=m.altAxis,G=j!==void 0&&j,et=m.boundary,ut=m.rootBoundary,dt=m.altBoundary,at=m.padding,Ot=m.tether,Ct=Ot===void 0||Ot,kt=m.tetherOffset,Tt=kt===void 0?0:kt,It=Nl(d,{boundary:et,rootBoundary:ut,padding:at,altBoundary:dt}),ce=gn(d.placement),ve=Fl(d.placement),$t=!ve,Zt=Pg(ce),Ft=Zt==="x"?"y":"x",zt=d.modifiersData.popperOffsets,ne=d.rects.reference,he=d.rects.popper,re=typeof Tt=="function"?Tt(Object.assign({},d.rects,{placement:d.placement})):Tt,$e=typeof re=="number"?{mainAxis:re,altAxis:re}:Object.assign({mainAxis:0,altAxis:0},re),oi=d.modifiersData.offset?d.modifiersData.offset[d.placement]:null,Gi={x:0,y:0};if(zt){if(N){var Ns,ki=Zt==="y"?Os:Fs,Ii=Zt==="y"?ii:ni,Oe=Zt==="y"?"height":"width",mn=zt[Zt],bn=mn+It[ki],Hl=mn-It[Ii],is=Ct?-he[Oe]/2:0,ge=ve===Go?ne[Oe]:he[Oe],$s=ve===Go?-he[Oe]:-ne[Oe],Li=d.elements.arrow,qr=Ct&&Li?Tg(Li):{width:0,height:0},gf=d.modifiersData["arrow#persistent"]?d.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},ey=gf[ki],sy=gf[Ii],mf=Eh(0,ne[Oe],qr[Oe]),u1=$t?ne[Oe]/2-is-mf-ey-$e.mainAxis:ge-mf-ey-$e.mainAxis,d1=$t?-ne[Oe]/2+is+mf+sy+$e.mainAxis:$s+mf+sy+$e.mainAxis,Xg=d.elements.arrow&&Ah(d.elements.arrow),f1=Xg?Zt==="y"?Xg.clientTop||0:Xg.clientLeft||0:0,iy=(Ns=oi==null?void 0:oi[Zt])!=null?Ns:0,p1=mn+d1-iy,ny=Eh(Ct?sf(bn,mn+u1-iy-f1):bn,mn,Ct?Ko(Hl,p1):Hl);zt[Zt]=ny,Gi[Zt]=ny-mn}if(G){var ry,g1=Zt==="x"?Os:Fs,m1=Zt==="x"?ii:ni,ia=zt[Ft],bf=Ft==="y"?"height":"width",oy=ia+It[g1],ay=ia-It[m1],Kg=[Os,Fs].indexOf(ce)!==-1,ly=(ry=oi==null?void 0:oi[Ft])!=null?ry:0,cy=Kg?oy:ia-ne[bf]-he[bf]-ly+$e.altAxis,hy=Kg?ia+ne[bf]+he[bf]-ly-$e.altAxis:ay,uy=Ct&&Kg?function(b1,v1,Yg){var dy=Eh(b1,v1,Yg);return dy>Yg?Yg:dy}(cy,ia,hy):Eh(Ct?cy:oy,ia,Ct?hy:ay);zt[Ft]=uy,Gi[Ft]=uy-ia}d.modifiersData[E]=Gi}},requiresIfExists:["offset"]};function DS(y,d,m){m===void 0&&(m=!1);var E,F,N=Pi(d),j=Pi(d)&&function(at){var Ot=at.getBoundingClientRect(),Ct=Dl(Ot.width)/at.offsetWidth||1,kt=Dl(Ot.height)/at.offsetHeight||1;return Ct!==1||kt!==1}(d),G=zr(d),et=Ol(y,j,m),ut={scrollLeft:0,scrollTop:0},dt={x:0,y:0};return(N||!N&&!m)&&((pn(d)!=="body"||Mg(G))&&(ut=(E=d)!==ri(E)&&Pi(E)?{scrollLeft:(F=E).scrollLeft,scrollTop:F.scrollTop}:Ig(E)),Pi(d)?((dt=Ol(d,!0)).x+=d.clientLeft,dt.y+=d.clientTop):G&&(dt.x=Lg(G))),{x:et.left+ut.scrollLeft-dt.x,y:et.top+ut.scrollTop-dt.y,width:et.width,height:et.height}}function OS(y){var d=new Map,m=new Set,E=[];function F(N){m.add(N.name),[].concat(N.requires||[],N.requiresIfExists||[]).forEach(function(j){if(!m.has(j)){var G=d.get(j);G&&F(G)}}),E.push(N)}return y.forEach(function(N){d.set(N.name,N)}),y.forEach(function(N){m.has(N.name)||F(N)}),E}var m_={placement:"bottom",modifiers:[],strategy:"absolute"};function b_(){for(var y=arguments.length,d=new Array(y),m=0;m<y;m++)d[m]=arguments[m];return!d.some(function(E){return!(E&&typeof E.getBoundingClientRect=="function")})}function af(y){y===void 0&&(y={});var d=y,m=d.defaultModifiers,E=m===void 0?[]:m,F=d.defaultOptions,N=F===void 0?m_:F;return function(j,G,et){et===void 0&&(et=N);var ut,dt,at={placement:"bottom",orderedModifiers:[],options:Object.assign({},m_,N),modifiersData:{},elements:{reference:j,popper:G},attributes:{},styles:{}},Ot=[],Ct=!1,kt={state:at,setOptions:function(It){var ce=typeof It=="function"?It(at.options):It;Tt(),at.options=Object.assign({},N,at.options,ce),at.scrollParents={reference:Xo(j)?Sh(j):j.contextElement?Sh(j.contextElement):[],popper:Sh(G)};var ve,$t,Zt=function(Ft){var zt=OS(Ft);return Jv.reduce(function(ne,he){return ne.concat(zt.filter(function(re){return re.phase===he}))},[])}((ve=[].concat(E,at.options.modifiers),$t=ve.reduce(function(Ft,zt){var ne=Ft[zt.name];return Ft[zt.name]=ne?Object.assign({},ne,zt,{options:Object.assign({},ne.options,zt.options),data:Object.assign({},ne.data,zt.data)}):zt,Ft},{}),Object.keys($t).map(function(Ft){return $t[Ft]})));return at.orderedModifiers=Zt.filter(function(Ft){return Ft.enabled}),at.orderedModifiers.forEach(function(Ft){var zt=Ft.name,ne=Ft.options,he=ne===void 0?{}:ne,re=Ft.effect;if(typeof re=="function"){var $e=re({state:at,name:zt,instance:kt,options:he});Ot.push($e||function(){})}}),kt.update()},forceUpdate:function(){if(!Ct){var It=at.elements,ce=It.reference,ve=It.popper;if(b_(ce,ve)){at.rects={reference:DS(ce,Ah(ve),at.options.strategy==="fixed"),popper:Tg(ve)},at.reset=!1,at.placement=at.options.placement,at.orderedModifiers.forEach(function(re){return at.modifiersData[re.name]=Object.assign({},re.data)});for(var $t=0;$t<at.orderedModifiers.length;$t++)if(at.reset!==!0){var Zt=at.orderedModifiers[$t],Ft=Zt.fn,zt=Zt.options,ne=zt===void 0?{}:zt,he=Zt.name;typeof Ft=="function"&&(at=Ft({state:at,options:ne,name:he,instance:kt})||at)}else at.reset=!1,$t=-1}}},update:(ut=function(){return new Promise(function(It){kt.forceUpdate(),It(at)})},function(){return dt||(dt=new Promise(function(It){Promise.resolve().then(function(){dt=void 0,It(ut())})})),dt}),destroy:function(){Tt(),Ct=!0}};if(!b_(j,G))return kt;function Tt(){Ot.forEach(function(It){return It()}),Ot=[]}return kt.setOptions(et).then(function(It){!Ct&&et.onFirstUpdate&&et.onFirstUpdate(It)}),kt}}var FS=af(),NS=af({defaultModifiers:[kg,Og,Rg,xg]}),Fg=af({defaultModifiers:[kg,Og,Rg,xg,p_,h_,g_,n_,f_]});const v_=Object.freeze(Object.defineProperty({__proto__:null,afterMain:Xv,afterRead:Wv,afterWrite:Qv,applyStyles:xg,arrow:n_,auto:ef,basePlacements:Il,beforeMain:qv,beforeRead:Uv,beforeWrite:Kv,bottom:ii,clippingParents:jv,computeStyles:Rg,createPopper:Fg,createPopperBase:FS,createPopperLite:NS,detectOverflow:Nl,end:Ll,eventListeners:kg,flip:h_,hide:f_,left:Fs,main:Gv,modifierPhases:Jv,offset:p_,placements:Eg,popper:Ml,popperGenerator:af,popperOffsets:Og,preventOverflow:g_,read:zv,reference:Vv,right:ni,start:Go,top:Os,variationPlacements:Ag,viewport:wg,write:Yv},Symbol.toStringTag,{value:"Module"})),__="dropdown",Yo=".bs.dropdown",Ng=".data-api",$S="ArrowUp",y_="ArrowDown",BS=`hide${Yo}`,HS=`hidden${Yo}`,jS=`show${Yo}`,VS=`shown${Yo}`,w_=`click${Yo}${Ng}`,A_=`keydown${Yo}${Ng}`,US=`keyup${Yo}${Ng}`,$l="show",Qo='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',zS=`${Qo}.${$l}`,lf=".dropdown-menu",WS=x()?"top-end":"top-start",qS=x()?"top-start":"top-end",GS=x()?"bottom-end":"bottom-start",XS=x()?"bottom-start":"bottom-end",KS=x()?"left-start":"right-start",YS=x()?"right-start":"left-start",QS={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},JS={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class qi extends qt{constructor(d,m){super(d,m),this._popper=null,this._parent=this._element.parentNode,this._menu=V.next(this._element,lf)[0]||V.prev(this._element,lf)[0]||V.findOne(lf,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return QS}static get DefaultType(){return JS}static get NAME(){return __}toggle(){return this._isShown()?this.hide():this.show()}show(){if(u(this._element)||this._isShown())return;const d={relatedTarget:this._element};if(!z.trigger(this._element,jS,d).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const m of[].concat(...document.body.children))z.on(m,"mouseover",p);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add($l),this._element.classList.add($l),z.trigger(this._element,VS,d)}}hide(){if(u(this._element)||!this._isShown())return;const d={relatedTarget:this._element};this._completeHide(d)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(d){if(!z.trigger(this._element,BS,d).defaultPrevented){if("ontouchstart"in document.documentElement)for(const m of[].concat(...document.body.children))z.off(m,"mouseover",p);this._popper&&this._popper.destroy(),this._menu.classList.remove($l),this._element.classList.remove($l),this._element.setAttribute("aria-expanded","false"),Pe.removeDataAttribute(this._menu,"popper"),z.trigger(this._element,HS,d),this._element.focus()}}_getConfig(d){if(typeof(d=super._getConfig(d)).reference=="object"&&!a(d.reference)&&typeof d.reference.getBoundingClientRect!="function")throw new TypeError(`${__.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return d}_createPopper(){if(v_===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let d=this._element;this._config.reference==="parent"?d=this._parent:a(this._config.reference)?d=c(this._config.reference):typeof this._config.reference=="object"&&(d=this._config.reference);const m=this._getPopperConfig();this._popper=Fg(d,this._menu,m)}_isShown(){return this._menu.classList.contains($l)}_getPlacement(){const d=this._parent;if(d.classList.contains("dropend"))return KS;if(d.classList.contains("dropstart"))return YS;if(d.classList.contains("dropup-center"))return"top";if(d.classList.contains("dropdown-center"))return"bottom";const m=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return d.classList.contains("dropup")?m?qS:WS:m?XS:GS}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:d}=this._config;return typeof d=="string"?d.split(",").map(m=>Number.parseInt(m,10)):typeof d=="function"?m=>d(m,this._element):d}_getPopperConfig(){const d={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Pe.setDataAttribute(this._menu,"popper","static"),d.modifiers=[{name:"applyStyles",enabled:!1}]),{...d,...C(this._config.popperConfig,[void 0,d])}}_selectMenuItem({key:d,target:m}){const E=V.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(F=>h(F));E.length&&R(E,m,d===y_,!E.includes(m)).focus()}static jQueryInterface(d){return this.each(function(){const m=qi.getOrCreateInstance(this,d);if(typeof d=="string"){if(m[d]===void 0)throw new TypeError(`No method named "${d}"`);m[d]()}})}static clearMenus(d){if(d.button===2||d.type==="keyup"&&d.key!=="Tab")return;const m=V.find(zS);for(const E of m){const F=qi.getInstance(E);if(!F||F._config.autoClose===!1)continue;const N=d.composedPath(),j=N.includes(F._menu);if(N.includes(F._element)||F._config.autoClose==="inside"&&!j||F._config.autoClose==="outside"&&j||F._menu.contains(d.target)&&(d.type==="keyup"&&d.key==="Tab"||/input|select|option|textarea|form/i.test(d.target.tagName)))continue;const G={relatedTarget:F._element};d.type==="click"&&(G.clickEvent=d),F._completeHide(G)}}static dataApiKeydownHandler(d){const m=/input|textarea/i.test(d.target.tagName),E=d.key==="Escape",F=[$S,y_].includes(d.key);if(!F&&!E||m&&!E)return;d.preventDefault();const N=this.matches(Qo)?this:V.prev(this,Qo)[0]||V.next(this,Qo)[0]||V.findOne(Qo,d.delegateTarget.parentNode),j=qi.getOrCreateInstance(N);if(F)return d.stopPropagation(),j.show(),void j._selectMenuItem(d);j._isShown()&&(d.stopPropagation(),j.hide(),N.focus())}}z.on(document,A_,Qo,qi.dataApiKeydownHandler),z.on(document,A_,lf,qi.dataApiKeydownHandler),z.on(document,w_,qi.clearMenus),z.on(document,US,qi.clearMenus),z.on(document,w_,Qo,function(y){y.preventDefault(),qi.getOrCreateInstance(this).toggle()}),S(qi);const E_="backdrop",S_="show",x_=`mousedown.bs.${E_}`,ZS={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},tx={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class C_ extends Ye{constructor(d){super(),this._config=this._getConfig(d),this._isAppended=!1,this._element=null}static get Default(){return ZS}static get DefaultType(){return tx}static get NAME(){return E_}show(d){if(!this._config.isVisible)return void C(d);this._append();const m=this._getElement();this._config.isAnimated&&g(m),m.classList.add(S_),this._emulateAnimation(()=>{C(d)})}hide(d){this._config.isVisible?(this._getElement().classList.remove(S_),this._emulateAnimation(()=>{this.dispose(),C(d)})):C(d)}dispose(){this._isAppended&&(z.off(this._element,x_),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const d=document.createElement("div");d.className=this._config.className,this._config.isAnimated&&d.classList.add("fade"),this._element=d}return this._element}_configAfterMerge(d){return d.rootElement=c(d.rootElement),d}_append(){if(this._isAppended)return;const d=this._getElement();this._config.rootElement.append(d),z.on(d,x_,()=>{C(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(d){T(d,this._getElement(),this._config.isAnimated)}}const cf=".bs.focustrap",ex=`focusin${cf}`,sx=`keydown.tab${cf}`,T_="backward",ix={autofocus:!0,trapElement:null},nx={autofocus:"boolean",trapElement:"element"};class P_ extends Ye{constructor(d){super(),this._config=this._getConfig(d),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return ix}static get DefaultType(){return nx}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),z.off(document,cf),z.on(document,ex,d=>this._handleFocusin(d)),z.on(document,sx,d=>this._handleKeydown(d)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,z.off(document,cf))}_handleFocusin(d){const{trapElement:m}=this._config;if(d.target===document||d.target===m||m.contains(d.target))return;const E=V.focusableChildren(m);E.length===0?m.focus():this._lastTabNavDirection===T_?E[E.length-1].focus():E[0].focus()}_handleKeydown(d){d.key==="Tab"&&(this._lastTabNavDirection=d.shiftKey?T_:"forward")}}const R_=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",k_=".sticky-top",hf="padding-right",I_="margin-right";class $g{constructor(){this._element=document.body}getWidth(){const d=document.documentElement.clientWidth;return Math.abs(window.innerWidth-d)}hide(){const d=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,hf,m=>m+d),this._setElementAttributes(R_,hf,m=>m+d),this._setElementAttributes(k_,I_,m=>m-d)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,hf),this._resetElementAttributes(R_,hf),this._resetElementAttributes(k_,I_)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(d,m,E){const F=this.getWidth();this._applyManipulationCallback(d,N=>{if(N!==this._element&&window.innerWidth>N.clientWidth+F)return;this._saveInitialAttribute(N,m);const j=window.getComputedStyle(N).getPropertyValue(m);N.style.setProperty(m,`${E(Number.parseFloat(j))}px`)})}_saveInitialAttribute(d,m){const E=d.style.getPropertyValue(m);E&&Pe.setDataAttribute(d,m,E)}_resetElementAttributes(d,m){this._applyManipulationCallback(d,E=>{const F=Pe.getDataAttribute(E,m);F!==null?(Pe.removeDataAttribute(E,m),E.style.setProperty(m,F)):E.style.removeProperty(m)})}_applyManipulationCallback(d,m){if(a(d))m(d);else for(const E of V.find(d,this._element))m(E)}}const Ri=".bs.modal",rx=`hide${Ri}`,ox=`hidePrevented${Ri}`,L_=`hidden${Ri}`,M_=`show${Ri}`,ax=`shown${Ri}`,lx=`resize${Ri}`,cx=`click.dismiss${Ri}`,hx=`mousedown.dismiss${Ri}`,ux=`keydown.dismiss${Ri}`,dx=`click${Ri}.data-api`,D_="modal-open",O_="show",Bg="modal-static",fx={backdrop:!0,focus:!0,keyboard:!0},px={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Jo extends qt{constructor(d,m){super(d,m),this._dialog=V.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new $g,this._addEventListeners()}static get Default(){return fx}static get DefaultType(){return px}static get NAME(){return"modal"}toggle(d){return this._isShown?this.hide():this.show(d)}show(d){this._isShown||this._isTransitioning||z.trigger(this._element,M_,{relatedTarget:d}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(D_),this._adjustDialog(),this._backdrop.show(()=>this._showElement(d)))}hide(){this._isShown&&!this._isTransitioning&&(z.trigger(this._element,rx).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(O_),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){z.off(window,Ri),z.off(this._dialog,Ri),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new C_({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new P_({trapElement:this._element})}_showElement(d){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const m=V.findOne(".modal-body",this._dialog);m&&(m.scrollTop=0),g(this._element),this._element.classList.add(O_),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,z.trigger(this._element,ax,{relatedTarget:d})},this._dialog,this._isAnimated())}_addEventListeners(){z.on(this._element,ux,d=>{d.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),z.on(window,lx,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),z.on(this._element,hx,d=>{z.one(this._element,cx,m=>{this._element===d.target&&this._element===m.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(D_),this._resetAdjustments(),this._scrollBar.reset(),z.trigger(this._element,L_)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(z.trigger(this._element,ox).defaultPrevented)return;const d=this._element.scrollHeight>document.documentElement.clientHeight,m=this._element.style.overflowY;m==="hidden"||this._element.classList.contains(Bg)||(d||(this._element.style.overflowY="hidden"),this._element.classList.add(Bg),this._queueCallback(()=>{this._element.classList.remove(Bg),this._queueCallback(()=>{this._element.style.overflowY=m},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const d=this._element.scrollHeight>document.documentElement.clientHeight,m=this._scrollBar.getWidth(),E=m>0;if(E&&!d){const F=x()?"paddingLeft":"paddingRight";this._element.style[F]=`${m}px`}if(!E&&d){const F=x()?"paddingRight":"paddingLeft";this._element.style[F]=`${m}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(d,m){return this.each(function(){const E=Jo.getOrCreateInstance(this,d);if(typeof d=="string"){if(E[d]===void 0)throw new TypeError(`No method named "${d}"`);E[d](m)}})}}z.on(document,dx,'[data-bs-toggle="modal"]',function(y){const d=V.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&y.preventDefault(),z.one(d,M_,E=>{E.defaultPrevented||z.one(d,L_,()=>{h(this)&&this.focus()})});const m=V.findOne(".modal.show");m&&Jo.getInstance(m).hide(),Jo.getOrCreateInstance(d).toggle(this)}),it(Jo),S(Jo);const Gn=".bs.offcanvas",F_=".data-api",gx=`load${Gn}${F_}`,N_="show",$_="showing",B_="hiding",H_=".offcanvas.show",mx=`show${Gn}`,bx=`shown${Gn}`,vx=`hide${Gn}`,j_=`hidePrevented${Gn}`,V_=`hidden${Gn}`,_x=`resize${Gn}`,yx=`click${Gn}${F_}`,wx=`keydown.dismiss${Gn}`,Ax={backdrop:!0,keyboard:!0,scroll:!1},Ex={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Xn extends qt{constructor(d,m){super(d,m),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Ax}static get DefaultType(){return Ex}static get NAME(){return"offcanvas"}toggle(d){return this._isShown?this.hide():this.show(d)}show(d){this._isShown||z.trigger(this._element,mx,{relatedTarget:d}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new $g().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add($_),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(N_),this._element.classList.remove($_),z.trigger(this._element,bx,{relatedTarget:d})},this._element,!0))}hide(){this._isShown&&(z.trigger(this._element,vx).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(B_),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(N_,B_),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new $g().reset(),z.trigger(this._element,V_)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const d=!!this._config.backdrop;return new C_({className:"offcanvas-backdrop",isVisible:d,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:d?()=>{this._config.backdrop!=="static"?this.hide():z.trigger(this._element,j_)}:null})}_initializeFocusTrap(){return new P_({trapElement:this._element})}_addEventListeners(){z.on(this._element,wx,d=>{d.key==="Escape"&&(this._config.keyboard?this.hide():z.trigger(this._element,j_))})}static jQueryInterface(d){return this.each(function(){const m=Xn.getOrCreateInstance(this,d);if(typeof d=="string"){if(m[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);m[d](this)}})}}z.on(document,yx,'[data-bs-toggle="offcanvas"]',function(y){const d=V.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&y.preventDefault(),u(this))return;z.one(d,V_,()=>{h(this)&&this.focus()});const m=V.findOne(H_);m&&m!==d&&Xn.getInstance(m).hide(),Xn.getOrCreateInstance(d).toggle(this)}),z.on(window,gx,()=>{for(const y of V.find(H_))Xn.getOrCreateInstance(y).show()}),z.on(window,_x,()=>{for(const y of V.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(y).position!=="fixed"&&Xn.getOrCreateInstance(y).hide()}),it(Xn),S(Xn);const U_={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Sx=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),xx=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Cx=(y,d)=>{const m=y.nodeName.toLowerCase();return d.includes(m)?!Sx.has(m)||!!xx.test(y.nodeValue):d.filter(E=>E instanceof RegExp).some(E=>E.test(m))},Tx={allowList:U_,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Px={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Rx={entry:"(string|element|function|null)",selector:"(string|element)"};class kx extends Ye{constructor(d){super(),this._config=this._getConfig(d)}static get Default(){return Tx}static get DefaultType(){return Px}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(d=>this._resolvePossibleFunction(d)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(d){return this._checkContent(d),this._config.content={...this._config.content,...d},this}toHtml(){const d=document.createElement("div");d.innerHTML=this._maybeSanitize(this._config.template);for(const[F,N]of Object.entries(this._config.content))this._setContent(d,N,F);const m=d.children[0],E=this._resolvePossibleFunction(this._config.extraClass);return E&&m.classList.add(...E.split(" ")),m}_typeCheckConfig(d){super._typeCheckConfig(d),this._checkContent(d.content)}_checkContent(d){for(const[m,E]of Object.entries(d))super._typeCheckConfig({selector:m,entry:E},Rx)}_setContent(d,m,E){const F=V.findOne(E,d);F&&((m=this._resolvePossibleFunction(m))?a(m)?this._putElementInTemplate(c(m),F):this._config.html?F.innerHTML=this._maybeSanitize(m):F.textContent=m:F.remove())}_maybeSanitize(d){return this._config.sanitize?function(m,E,F){if(!m.length)return m;if(F&&typeof F=="function")return F(m);const N=new window.DOMParser().parseFromString(m,"text/html"),j=[].concat(...N.body.querySelectorAll("*"));for(const G of j){const et=G.nodeName.toLowerCase();if(!Object.keys(E).includes(et)){G.remove();continue}const ut=[].concat(...G.attributes),dt=[].concat(E["*"]||[],E[et]||[]);for(const at of ut)Cx(at,dt)||G.removeAttribute(at.nodeName)}return N.body.innerHTML}(d,this._config.allowList,this._config.sanitizeFn):d}_resolvePossibleFunction(d){return C(d,[void 0,this])}_putElementInTemplate(d,m){if(this._config.html)return m.innerHTML="",void m.append(d);m.textContent=d.textContent}}const Ix=new Set(["sanitize","allowList","sanitizeFn"]),Hg="fade",uf="show",Lx=".tooltip-inner",z_=".modal",W_="hide.bs.modal",xh="hover",jg="focus",Mx={AUTO:"auto",TOP:"top",RIGHT:x()?"left":"right",BOTTOM:"bottom",LEFT:x()?"right":"left"},Dx={allowList:U_,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Ox={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class Zo extends qt{constructor(d,m){if(v_===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(d,m),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Dx}static get DefaultType(){return Ox}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),z.off(this._element.closest(z_),W_,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const d=z.trigger(this._element,this.constructor.eventName("show")),m=(f(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(d.defaultPrevented||!m)return;this._disposePopper();const E=this._getTipElement();this._element.setAttribute("aria-describedby",E.getAttribute("id"));const{container:F}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(F.append(E),z.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(E),E.classList.add(uf),"ontouchstart"in document.documentElement)for(const N of[].concat(...document.body.children))z.on(N,"mouseover",p);this._queueCallback(()=>{z.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!z.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(uf),"ontouchstart"in document.documentElement)for(const d of[].concat(...document.body.children))z.off(d,"mouseover",p);this._activeTrigger.click=!1,this._activeTrigger[jg]=!1,this._activeTrigger[xh]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),z.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(d){const m=this._getTemplateFactory(d).toHtml();if(!m)return null;m.classList.remove(Hg,uf),m.classList.add(`bs-${this.constructor.NAME}-auto`);const E=(F=>{do F+=Math.floor(1e6*Math.random());while(document.getElementById(F));return F})(this.constructor.NAME).toString();return m.setAttribute("id",E),this._isAnimated()&&m.classList.add(Hg),m}setContent(d){this._newContent=d,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(d){return this._templateFactory?this._templateFactory.changeContent(d):this._templateFactory=new kx({...this._config,content:d,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Lx]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(d){return this.constructor.getOrCreateInstance(d.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Hg)}_isShown(){return this.tip&&this.tip.classList.contains(uf)}_createPopper(d){const m=C(this._config.placement,[this,d,this._element]),E=Mx[m.toUpperCase()];return Fg(this._element,d,this._getPopperConfig(E))}_getOffset(){const{offset:d}=this._config;return typeof d=="string"?d.split(",").map(m=>Number.parseInt(m,10)):typeof d=="function"?m=>d(m,this._element):d}_resolvePossibleFunction(d){return C(d,[this._element,this._element])}_getPopperConfig(d){const m={placement:d,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:E=>{this._getTipElement().setAttribute("data-popper-placement",E.state.placement)}}]};return{...m,...C(this._config.popperConfig,[void 0,m])}}_setListeners(){const d=this._config.trigger.split(" ");for(const m of d)if(m==="click")z.on(this._element,this.constructor.eventName("click"),this._config.selector,E=>{this._initializeOnDelegatedTarget(E).toggle()});else if(m!=="manual"){const E=m===xh?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),F=m===xh?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");z.on(this._element,E,this._config.selector,N=>{const j=this._initializeOnDelegatedTarget(N);j._activeTrigger[N.type==="focusin"?jg:xh]=!0,j._enter()}),z.on(this._element,F,this._config.selector,N=>{const j=this._initializeOnDelegatedTarget(N);j._activeTrigger[N.type==="focusout"?jg:xh]=j._element.contains(N.relatedTarget),j._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},z.on(this._element.closest(z_),W_,this._hideModalHandler)}_fixTitle(){const d=this._element.getAttribute("title");d&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",d),this._element.setAttribute("data-bs-original-title",d),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(d,m){clearTimeout(this._timeout),this._timeout=setTimeout(d,m)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(d){const m=Pe.getDataAttributes(this._element);for(const E of Object.keys(m))Ix.has(E)&&delete m[E];return d={...m,...typeof d=="object"&&d?d:{}},d=this._mergeConfigObj(d),d=this._configAfterMerge(d),this._typeCheckConfig(d),d}_configAfterMerge(d){return d.container=d.container===!1?document.body:c(d.container),typeof d.delay=="number"&&(d.delay={show:d.delay,hide:d.delay}),typeof d.title=="number"&&(d.title=d.title.toString()),typeof d.content=="number"&&(d.content=d.content.toString()),d}_getDelegateConfig(){const d={};for(const[m,E]of Object.entries(this._config))this.constructor.Default[m]!==E&&(d[m]=E);return d.selector=!1,d.trigger="manual",d}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(d){return this.each(function(){const m=Zo.getOrCreateInstance(this,d);if(typeof d=="string"){if(m[d]===void 0)throw new TypeError(`No method named "${d}"`);m[d]()}})}}S(Zo);const Fx=".popover-header",Nx=".popover-body",$x={...Zo.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},Bx={...Zo.DefaultType,content:"(null|string|element|function)"};class df extends Zo{static get Default(){return $x}static get DefaultType(){return Bx}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Fx]:this._getTitle(),[Nx]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(d){return this.each(function(){const m=df.getOrCreateInstance(this,d);if(typeof d=="string"){if(m[d]===void 0)throw new TypeError(`No method named "${d}"`);m[d]()}})}}S(df);const Vg=".bs.scrollspy",Hx=`activate${Vg}`,q_=`click${Vg}`,jx=`load${Vg}.data-api`,Bl="active",Ug="[href]",G_=".nav-link",Vx=`${G_}, .nav-item > ${G_}, .list-group-item`,Ux={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},zx={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Ch extends qt{constructor(d,m){super(d,m),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Ux}static get DefaultType(){return zx}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const d of this._observableSections.values())this._observer.observe(d)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(d){return d.target=c(d.target)||document.body,d.rootMargin=d.offset?`${d.offset}px 0px -30%`:d.rootMargin,typeof d.threshold=="string"&&(d.threshold=d.threshold.split(",").map(m=>Number.parseFloat(m))),d}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(z.off(this._config.target,q_),z.on(this._config.target,q_,Ug,d=>{const m=this._observableSections.get(d.target.hash);if(m){d.preventDefault();const E=this._rootElement||window,F=m.offsetTop-this._element.offsetTop;if(E.scrollTo)return void E.scrollTo({top:F,behavior:"smooth"});E.scrollTop=F}}))}_getNewObserver(){const d={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(m=>this._observerCallback(m),d)}_observerCallback(d){const m=j=>this._targetLinks.get(`#${j.target.id}`),E=j=>{this._previousScrollData.visibleEntryTop=j.target.offsetTop,this._process(m(j))},F=(this._rootElement||document.documentElement).scrollTop,N=F>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=F;for(const j of d){if(!j.isIntersecting){this._activeTarget=null,this._clearActiveClass(m(j));continue}const G=j.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(N&&G){if(E(j),!F)return}else N||G||E(j)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const d=V.find(Ug,this._config.target);for(const m of d){if(!m.hash||u(m))continue;const E=V.findOne(decodeURI(m.hash),this._element);h(E)&&(this._targetLinks.set(decodeURI(m.hash),m),this._observableSections.set(m.hash,E))}}_process(d){this._activeTarget!==d&&(this._clearActiveClass(this._config.target),this._activeTarget=d,d.classList.add(Bl),this._activateParents(d),z.trigger(this._element,Hx,{relatedTarget:d}))}_activateParents(d){if(d.classList.contains("dropdown-item"))V.findOne(".dropdown-toggle",d.closest(".dropdown")).classList.add(Bl);else for(const m of V.parents(d,".nav, .list-group"))for(const E of V.prev(m,Vx))E.classList.add(Bl)}_clearActiveClass(d){d.classList.remove(Bl);const m=V.find(`${Ug}.${Bl}`,d);for(const E of m)E.classList.remove(Bl)}static jQueryInterface(d){return this.each(function(){const m=Ch.getOrCreateInstance(this,d);if(typeof d=="string"){if(m[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);m[d]()}})}}z.on(window,jx,()=>{for(const y of V.find('[data-bs-spy="scroll"]'))Ch.getOrCreateInstance(y)}),S(Ch);const ta=".bs.tab",Wx=`hide${ta}`,qx=`hidden${ta}`,Gx=`show${ta}`,Xx=`shown${ta}`,Kx=`click${ta}`,Yx=`keydown${ta}`,Qx=`load${ta}`,Jx="ArrowLeft",X_="ArrowRight",Zx="ArrowUp",K_="ArrowDown",zg="Home",Y_="End",ea="active",Q_="fade",Wg="show",J_=".dropdown-toggle",qg=`:not(${J_})`,Z_='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Gg=`.nav-link${qg}, .list-group-item${qg}, [role="tab"]${qg}, ${Z_}`,t1=`.${ea}[data-bs-toggle="tab"], .${ea}[data-bs-toggle="pill"], .${ea}[data-bs-toggle="list"]`;class sa extends qt{constructor(d){super(d),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),z.on(this._element,Yx,m=>this._keydown(m)))}static get NAME(){return"tab"}show(){const d=this._element;if(this._elemIsActive(d))return;const m=this._getActiveElem(),E=m?z.trigger(m,Wx,{relatedTarget:d}):null;z.trigger(d,Gx,{relatedTarget:m}).defaultPrevented||E&&E.defaultPrevented||(this._deactivate(m,d),this._activate(d,m))}_activate(d,m){d&&(d.classList.add(ea),this._activate(V.getElementFromSelector(d)),this._queueCallback(()=>{d.getAttribute("role")==="tab"?(d.removeAttribute("tabindex"),d.setAttribute("aria-selected",!0),this._toggleDropDown(d,!0),z.trigger(d,Xx,{relatedTarget:m})):d.classList.add(Wg)},d,d.classList.contains(Q_)))}_deactivate(d,m){d&&(d.classList.remove(ea),d.blur(),this._deactivate(V.getElementFromSelector(d)),this._queueCallback(()=>{d.getAttribute("role")==="tab"?(d.setAttribute("aria-selected",!1),d.setAttribute("tabindex","-1"),this._toggleDropDown(d,!1),z.trigger(d,qx,{relatedTarget:m})):d.classList.remove(Wg)},d,d.classList.contains(Q_)))}_keydown(d){if(![Jx,X_,Zx,K_,zg,Y_].includes(d.key))return;d.stopPropagation(),d.preventDefault();const m=this._getChildren().filter(F=>!u(F));let E;if([zg,Y_].includes(d.key))E=m[d.key===zg?0:m.length-1];else{const F=[X_,K_].includes(d.key);E=R(m,d.target,F,!0)}E&&(E.focus({preventScroll:!0}),sa.getOrCreateInstance(E).show())}_getChildren(){return V.find(Gg,this._parent)}_getActiveElem(){return this._getChildren().find(d=>this._elemIsActive(d))||null}_setInitialAttributes(d,m){this._setAttributeIfNotExists(d,"role","tablist");for(const E of m)this._setInitialAttributesOnChild(E)}_setInitialAttributesOnChild(d){d=this._getInnerElement(d);const m=this._elemIsActive(d),E=this._getOuterElement(d);d.setAttribute("aria-selected",m),E!==d&&this._setAttributeIfNotExists(E,"role","presentation"),m||d.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(d,"role","tab"),this._setInitialAttributesOnTargetPanel(d)}_setInitialAttributesOnTargetPanel(d){const m=V.getElementFromSelector(d);m&&(this._setAttributeIfNotExists(m,"role","tabpanel"),d.id&&this._setAttributeIfNotExists(m,"aria-labelledby",`${d.id}`))}_toggleDropDown(d,m){const E=this._getOuterElement(d);if(!E.classList.contains("dropdown"))return;const F=(N,j)=>{const G=V.findOne(N,E);G&&G.classList.toggle(j,m)};F(J_,ea),F(".dropdown-menu",Wg),E.setAttribute("aria-expanded",m)}_setAttributeIfNotExists(d,m,E){d.hasAttribute(m)||d.setAttribute(m,E)}_elemIsActive(d){return d.classList.contains(ea)}_getInnerElement(d){return d.matches(Gg)?d:V.findOne(Gg,d)}_getOuterElement(d){return d.closest(".nav-item, .list-group-item")||d}static jQueryInterface(d){return this.each(function(){const m=sa.getOrCreateInstance(this);if(typeof d=="string"){if(m[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);m[d]()}})}}z.on(document,Kx,Z_,function(y){["A","AREA"].includes(this.tagName)&&y.preventDefault(),u(this)||sa.getOrCreateInstance(this).show()}),z.on(window,Qx,()=>{for(const y of V.find(t1))sa.getOrCreateInstance(y)}),S(sa);const Wr=".bs.toast",e1=`mouseover${Wr}`,s1=`mouseout${Wr}`,i1=`focusin${Wr}`,n1=`focusout${Wr}`,r1=`hide${Wr}`,o1=`hidden${Wr}`,a1=`show${Wr}`,l1=`shown${Wr}`,ty="hide",ff="show",pf="showing",c1={animation:"boolean",autohide:"boolean",delay:"number"},h1={animation:!0,autohide:!0,delay:5e3};class Th extends qt{constructor(d,m){super(d,m),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return h1}static get DefaultType(){return c1}static get NAME(){return"toast"}show(){z.trigger(this._element,a1).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(ty),g(this._element),this._element.classList.add(ff,pf),this._queueCallback(()=>{this._element.classList.remove(pf),z.trigger(this._element,l1),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(z.trigger(this._element,r1).defaultPrevented||(this._element.classList.add(pf),this._queueCallback(()=>{this._element.classList.add(ty),this._element.classList.remove(pf,ff),z.trigger(this._element,o1)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(ff),super.dispose()}isShown(){return this._element.classList.contains(ff)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(d,m){switch(d.type){case"mouseover":case"mouseout":this._hasMouseInteraction=m;break;case"focusin":case"focusout":this._hasKeyboardInteraction=m}if(m)return void this._clearTimeout();const E=d.relatedTarget;this._element===E||this._element.contains(E)||this._maybeScheduleHide()}_setListeners(){z.on(this._element,e1,d=>this._onInteraction(d,!0)),z.on(this._element,s1,d=>this._onInteraction(d,!1)),z.on(this._element,i1,d=>this._onInteraction(d,!0)),z.on(this._element,n1,d=>this._onInteraction(d,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(d){return this.each(function(){const m=Th.getOrCreateInstance(this,d);if(typeof d=="string"){if(m[d]===void 0)throw new TypeError(`No method named "${d}"`);m[d](this)}})}}return it(Th),S(Th),{Alert:k,Button:U,Carousel:Pl,Collapse:kl,Dropdown:qi,Modal:Jo,Offcanvas:Xn,Popover:df,ScrollSpy:Ch,Tab:sa,Toast:Th,Tooltip:Zo}})}(Pf)),Pf.exports}A1();/**
* @vue/shared v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Jb(i){const t=Object.create(null);for(const e of i.split(","))t[e]=1;return e=>e in t}const me={},sc=[],Vn=()=>{},E1=()=>!1,Qp=i=>i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&(i.charCodeAt(2)>122||i.charCodeAt(2)<97),Zb=i=>i.startsWith("onUpdate:"),Ls=Object.assign,tv=(i,t)=>{const e=i.indexOf(t);e>-1&&i.splice(e,1)},S1=Object.prototype.hasOwnProperty,se=(i,t)=>S1.call(i,t),At=Array.isArray,ic=i=>jd(i)==="[object Map]",Jp=i=>jd(i)==="[object Set]",gy=i=>jd(i)==="[object Date]",Mt=i=>typeof i=="function",Ke=i=>typeof i=="string",Un=i=>typeof i=="symbol",be=i=>i!==null&&typeof i=="object",Dw=i=>(be(i)||Mt(i))&&Mt(i.then)&&Mt(i.catch),Ow=Object.prototype.toString,jd=i=>Ow.call(i),x1=i=>jd(i).slice(8,-1),Fw=i=>jd(i)==="[object Object]",ev=i=>Ke(i)&&i!=="NaN"&&i[0]!=="-"&&""+parseInt(i,10)===i,tu=Jb(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Zp=i=>{const t=Object.create(null);return e=>t[e]||(t[e]=i(e))},C1=/-(\w)/g,Wi=Zp(i=>i.replace(C1,(t,e)=>e?e.toUpperCase():"")),T1=/\B([A-Z])/g,Sl=Zp(i=>i.replace(T1,"-$1").toLowerCase()),tg=Zp(i=>i.charAt(0).toUpperCase()+i.slice(1)),Jg=Zp(i=>i?`on${tg(i)}`:""),No=(i,t)=>!Object.is(i,t),Rf=(i,...t)=>{for(let e=0;e<i.length;e++)i[e](...t)},Nw=(i,t,e,s=!1)=>{Object.defineProperty(i,t,{configurable:!0,enumerable:!1,writable:s,value:e})},_m=i=>{const t=parseFloat(i);return isNaN(t)?i:t};let my;const eg=()=>my||(my=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function sg(i){if(At(i)){const t={};for(let e=0;e<i.length;e++){const s=i[e],n=Ke(s)?I1(s):sg(s);if(n)for(const r in n)t[r]=n[r]}return t}else if(Ke(i)||be(i))return i}const P1=/;(?![^(]*\))/g,R1=/:([^]+)/,k1=/\/\*[^]*?\*\//g;function I1(i){const t={};return i.replace(k1,"").split(P1).forEach(e=>{if(e){const s=e.split(R1);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function _h(i){let t="";if(Ke(i))t=i;else if(At(i))for(let e=0;e<i.length;e++){const s=_h(i[e]);s&&(t+=s+" ")}else if(be(i))for(const e in i)i[e]&&(t+=e+" ");return t.trim()}const L1="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",M1=Jb(L1);function $w(i){return!!i||i===""}function D1(i,t){if(i.length!==t.length)return!1;let e=!0;for(let s=0;e&&s<i.length;s++)e=ig(i[s],t[s]);return e}function ig(i,t){if(i===t)return!0;let e=gy(i),s=gy(t);if(e||s)return e&&s?i.getTime()===t.getTime():!1;if(e=Un(i),s=Un(t),e||s)return i===t;if(e=At(i),s=At(t),e||s)return e&&s?D1(i,t):!1;if(e=be(i),s=be(t),e||s){if(!e||!s)return!1;const n=Object.keys(i).length,r=Object.keys(t).length;if(n!==r)return!1;for(const o in i){const a=i.hasOwnProperty(o),c=t.hasOwnProperty(o);if(a&&!c||!a&&c||!ig(i[o],t[o]))return!1}}return String(i)===String(t)}function Bw(i,t){return i.findIndex(e=>ig(e,t))}const Hw=i=>!!(i&&i.__v_isRef===!0),ke=i=>Ke(i)?i:i==null?"":At(i)||be(i)&&(i.toString===Ow||!Mt(i.toString))?Hw(i)?ke(i.value):JSON.stringify(i,jw,2):String(i),jw=(i,t)=>Hw(t)?jw(i,t.value):ic(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[s,n],r)=>(e[Zg(s,r)+" =>"]=n,e),{})}:Jp(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>Zg(e))}:Un(t)?Zg(t):be(t)&&!At(t)&&!Fw(t)?String(t):t,Zg=(i,t="")=>{var e;return Un(i)?`Symbol(${(e=i.description)!=null?e:t})`:i};/**
* @vue/reactivity v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ks;class Vw{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ks,!t&&ks&&(this.index=(ks.scopes||(ks.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].pause();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].resume();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].resume()}}run(t){if(this._active){const e=ks;try{return ks=this,t()}finally{ks=e}}}on(){++this._on===1&&(this.prevScope=ks,ks=this)}off(){this._on>0&&--this._on===0&&(ks=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let e,s;for(e=0,s=this.effects.length;e<s;e++)this.effects[e].stop();for(this.effects.length=0,e=0,s=this.cleanups.length;e<s;e++)this.cleanups[e]();if(this.cleanups.length=0,this.scopes){for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function Uw(i){return new Vw(i)}function zw(){return ks}function O1(i,t=!1){ks&&ks.cleanups.push(i)}let ye;const tm=new WeakSet;class Ww{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ks&&ks.active&&ks.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,tm.has(this)&&(tm.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Gw(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,by(this),Xw(this);const t=ye,e=cn;ye=this,cn=!0;try{return this.fn()}finally{Kw(this),ye=t,cn=e,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)nv(t);this.deps=this.depsTail=void 0,by(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?tm.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ym(this)&&this.run()}get dirty(){return ym(this)}}let qw=0,eu,su;function Gw(i,t=!1){if(i.flags|=8,t){i.next=su,su=i;return}i.next=eu,eu=i}function sv(){qw++}function iv(){if(--qw>0)return;if(su){let t=su;for(su=void 0;t;){const e=t.next;t.next=void 0,t.flags&=-9,t=e}}let i;for(;eu;){let t=eu;for(eu=void 0;t;){const e=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){i||(i=s)}t=e}}if(i)throw i}function Xw(i){for(let t=i.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Kw(i){let t,e=i.depsTail,s=e;for(;s;){const n=s.prevDep;s.version===-1?(s===e&&(e=n),nv(s),F1(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=n}i.deps=t,i.depsTail=e}function ym(i){for(let t=i.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Yw(t.dep.computed)||t.dep.version!==t.version))return!0;return!!i._dirty}function Yw(i){if(i.flags&4&&!(i.flags&16)||(i.flags&=-17,i.globalVersion===cu)||(i.globalVersion=cu,!i.isSSR&&i.flags&128&&(!i.deps&&!i._dirty||!ym(i))))return;i.flags|=2;const t=i.dep,e=ye,s=cn;ye=i,cn=!0;try{Xw(i);const n=i.fn(i._value);(t.version===0||No(n,i._value))&&(i.flags|=128,i._value=n,t.version++)}catch(n){throw t.version++,n}finally{ye=e,cn=s,Kw(i),i.flags&=-3}}function nv(i,t=!1){const{dep:e,prevSub:s,nextSub:n}=i;if(s&&(s.nextSub=n,i.prevSub=void 0),n&&(n.prevSub=s,i.nextSub=void 0),e.subs===i&&(e.subs=s,!s&&e.computed)){e.computed.flags&=-5;for(let r=e.computed.deps;r;r=r.nextDep)nv(r,!0)}!t&&!--e.sc&&e.map&&e.map.delete(e.key)}function F1(i){const{prevDep:t,nextDep:e}=i;t&&(t.nextDep=e,i.prevDep=void 0),e&&(e.prevDep=t,i.nextDep=void 0)}let cn=!0;const Qw=[];function $r(){Qw.push(cn),cn=!1}function Br(){const i=Qw.pop();cn=i===void 0?!0:i}function by(i){const{cleanup:t}=i;if(i.cleanup=void 0,t){const e=ye;ye=void 0;try{t()}finally{ye=e}}}let cu=0;class N1{constructor(t,e){this.sub=t,this.dep=e,this.version=e.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class rv{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!ye||!cn||ye===this.computed)return;let e=this.activeLink;if(e===void 0||e.sub!==ye)e=this.activeLink=new N1(ye,this),ye.deps?(e.prevDep=ye.depsTail,ye.depsTail.nextDep=e,ye.depsTail=e):ye.deps=ye.depsTail=e,Jw(e);else if(e.version===-1&&(e.version=this.version,e.nextDep)){const s=e.nextDep;s.prevDep=e.prevDep,e.prevDep&&(e.prevDep.nextDep=s),e.prevDep=ye.depsTail,e.nextDep=void 0,ye.depsTail.nextDep=e,ye.depsTail=e,ye.deps===e&&(ye.deps=s)}return e}trigger(t){this.version++,cu++,this.notify(t)}notify(t){sv();try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{iv()}}}function Jw(i){if(i.dep.sc++,i.sub.flags&4){const t=i.dep.computed;if(t&&!i.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)Jw(s)}const e=i.dep.subs;e!==i&&(i.prevSub=e,e&&(e.nextSub=i)),i.dep.subs=i}}const dp=new WeakMap,vl=Symbol(""),wm=Symbol(""),hu=Symbol("");function Is(i,t,e){if(cn&&ye){let s=dp.get(i);s||dp.set(i,s=new Map);let n=s.get(e);n||(s.set(e,n=new rv),n.map=s,n.key=e),n.track()}}function Lr(i,t,e,s,n,r){const o=dp.get(i);if(!o){cu++;return}const a=c=>{c&&c.trigger()};if(sv(),t==="clear")o.forEach(a);else{const c=At(i),h=c&&ev(e);if(c&&e==="length"){const u=Number(s);o.forEach((f,p)=>{(p==="length"||p===hu||!Un(p)&&p>=u)&&a(f)})}else switch((e!==void 0||o.has(void 0))&&a(o.get(e)),h&&a(o.get(hu)),t){case"add":c?h&&a(o.get("length")):(a(o.get(vl)),ic(i)&&a(o.get(wm)));break;case"delete":c||(a(o.get(vl)),ic(i)&&a(o.get(wm)));break;case"set":ic(i)&&a(o.get(vl));break}}iv()}function $1(i,t){const e=dp.get(i);return e&&e.get(t)}function jl(i){const t=Xt(i);return t===i?t:(Is(t,"iterate",hu),Ui(i)?t:t.map(ys))}function ng(i){return Is(i=Xt(i),"iterate",hu),i}const B1={__proto__:null,[Symbol.iterator](){return em(this,Symbol.iterator,ys)},concat(...i){return jl(this).concat(...i.map(t=>At(t)?jl(t):t))},entries(){return em(this,"entries",i=>(i[1]=ys(i[1]),i))},every(i,t){return Kn(this,"every",i,t,void 0,arguments)},filter(i,t){return Kn(this,"filter",i,t,e=>e.map(ys),arguments)},find(i,t){return Kn(this,"find",i,t,ys,arguments)},findIndex(i,t){return Kn(this,"findIndex",i,t,void 0,arguments)},findLast(i,t){return Kn(this,"findLast",i,t,ys,arguments)},findLastIndex(i,t){return Kn(this,"findLastIndex",i,t,void 0,arguments)},forEach(i,t){return Kn(this,"forEach",i,t,void 0,arguments)},includes(...i){return sm(this,"includes",i)},indexOf(...i){return sm(this,"indexOf",i)},join(i){return jl(this).join(i)},lastIndexOf(...i){return sm(this,"lastIndexOf",i)},map(i,t){return Kn(this,"map",i,t,void 0,arguments)},pop(){return Ph(this,"pop")},push(...i){return Ph(this,"push",i)},reduce(i,...t){return vy(this,"reduce",i,t)},reduceRight(i,...t){return vy(this,"reduceRight",i,t)},shift(){return Ph(this,"shift")},some(i,t){return Kn(this,"some",i,t,void 0,arguments)},splice(...i){return Ph(this,"splice",i)},toReversed(){return jl(this).toReversed()},toSorted(i){return jl(this).toSorted(i)},toSpliced(...i){return jl(this).toSpliced(...i)},unshift(...i){return Ph(this,"unshift",i)},values(){return em(this,"values",ys)}};function em(i,t,e){const s=ng(i),n=s[t]();return s!==i&&!Ui(i)&&(n._next=n.next,n.next=()=>{const r=n._next();return r.value&&(r.value=e(r.value)),r}),n}const H1=Array.prototype;function Kn(i,t,e,s,n,r){const o=ng(i),a=o!==i&&!Ui(i),c=o[t];if(c!==H1[t]){const f=c.apply(i,r);return a?ys(f):f}let h=e;o!==i&&(a?h=function(f,p){return e.call(this,ys(f),p,i)}:e.length>2&&(h=function(f,p){return e.call(this,f,p,i)}));const u=c.call(o,h,s);return a&&n?n(u):u}function vy(i,t,e,s){const n=ng(i);let r=e;return n!==i&&(Ui(i)?e.length>3&&(r=function(o,a,c){return e.call(this,o,a,c,i)}):r=function(o,a,c){return e.call(this,o,ys(a),c,i)}),n[t](r,...s)}function sm(i,t,e){const s=Xt(i);Is(s,"iterate",hu);const n=s[t](...e);return(n===-1||n===!1)&&lv(e[0])?(e[0]=Xt(e[0]),s[t](...e)):n}function Ph(i,t,e=[]){$r(),sv();const s=Xt(i)[t].apply(i,e);return iv(),Br(),s}const j1=Jb("__proto__,__v_isRef,__isVue"),Zw=new Set(Object.getOwnPropertyNames(Symbol).filter(i=>i!=="arguments"&&i!=="caller").map(i=>Symbol[i]).filter(Un));function V1(i){Un(i)||(i=String(i));const t=Xt(this);return Is(t,"has",i),t.hasOwnProperty(i)}class tA{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,s){if(e==="__v_skip")return t.__v_skip;const n=this._isReadonly,r=this._isShallow;if(e==="__v_isReactive")return!n;if(e==="__v_isReadonly")return n;if(e==="__v_isShallow")return r;if(e==="__v_raw")return s===(n?r?J1:nA:r?iA:sA).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const o=At(t);if(!n){let c;if(o&&(c=B1[e]))return c;if(e==="hasOwnProperty")return V1}const a=Reflect.get(t,e,Me(t)?t:s);return(Un(e)?Zw.has(e):j1(e))||(n||Is(t,"get",e),r)?a:Me(a)?o&&ev(e)?a:a.value:be(a)?n?oA(a):Vd(a):a}}class eA extends tA{constructor(t=!1){super(!1,t)}set(t,e,s,n){let r=t[e];if(!this._isShallow){const c=Bo(r);if(!Ui(s)&&!Bo(s)&&(r=Xt(r),s=Xt(s)),!At(t)&&Me(r)&&!Me(s))return c?!1:(r.value=s,!0)}const o=At(t)&&ev(e)?Number(e)<t.length:se(t,e),a=Reflect.set(t,e,s,Me(t)?t:n);return t===Xt(n)&&(o?No(s,r)&&Lr(t,"set",e,s):Lr(t,"add",e,s)),a}deleteProperty(t,e){const s=se(t,e);t[e];const n=Reflect.deleteProperty(t,e);return n&&s&&Lr(t,"delete",e,void 0),n}has(t,e){const s=Reflect.has(t,e);return(!Un(e)||!Zw.has(e))&&Is(t,"has",e),s}ownKeys(t){return Is(t,"iterate",At(t)?"length":vl),Reflect.ownKeys(t)}}class U1 extends tA{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const z1=new eA,W1=new U1,q1=new eA(!0);const Am=i=>i,vf=i=>Reflect.getPrototypeOf(i);function G1(i,t,e){return function(...s){const n=this.__v_raw,r=Xt(n),o=ic(r),a=i==="entries"||i===Symbol.iterator&&o,c=i==="keys"&&o,h=n[i](...s),u=e?Am:t?fp:ys;return!t&&Is(r,"iterate",c?wm:vl),{next(){const{value:f,done:p}=h.next();return p?{value:f,done:p}:{value:a?[u(f[0]),u(f[1])]:u(f),done:p}},[Symbol.iterator](){return this}}}}function _f(i){return function(...t){return i==="delete"?!1:i==="clear"?void 0:this}}function X1(i,t){const e={get(n){const r=this.__v_raw,o=Xt(r),a=Xt(n);i||(No(n,a)&&Is(o,"get",n),Is(o,"get",a));const{has:c}=vf(o),h=t?Am:i?fp:ys;if(c.call(o,n))return h(r.get(n));if(c.call(o,a))return h(r.get(a));r!==o&&r.get(n)},get size(){const n=this.__v_raw;return!i&&Is(Xt(n),"iterate",vl),Reflect.get(n,"size",n)},has(n){const r=this.__v_raw,o=Xt(r),a=Xt(n);return i||(No(n,a)&&Is(o,"has",n),Is(o,"has",a)),n===a?r.has(n):r.has(n)||r.has(a)},forEach(n,r){const o=this,a=o.__v_raw,c=Xt(a),h=t?Am:i?fp:ys;return!i&&Is(c,"iterate",vl),a.forEach((u,f)=>n.call(r,h(u),h(f),o))}};return Ls(e,i?{add:_f("add"),set:_f("set"),delete:_f("delete"),clear:_f("clear")}:{add(n){!t&&!Ui(n)&&!Bo(n)&&(n=Xt(n));const r=Xt(this);return vf(r).has.call(r,n)||(r.add(n),Lr(r,"add",n,n)),this},set(n,r){!t&&!Ui(r)&&!Bo(r)&&(r=Xt(r));const o=Xt(this),{has:a,get:c}=vf(o);let h=a.call(o,n);h||(n=Xt(n),h=a.call(o,n));const u=c.call(o,n);return o.set(n,r),h?No(r,u)&&Lr(o,"set",n,r):Lr(o,"add",n,r),this},delete(n){const r=Xt(this),{has:o,get:a}=vf(r);let c=o.call(r,n);c||(n=Xt(n),c=o.call(r,n)),a&&a.call(r,n);const h=r.delete(n);return c&&Lr(r,"delete",n,void 0),h},clear(){const n=Xt(this),r=n.size!==0,o=n.clear();return r&&Lr(n,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(n=>{e[n]=G1(n,i,t)}),e}function ov(i,t){const e=X1(i,t);return(s,n,r)=>n==="__v_isReactive"?!i:n==="__v_isReadonly"?i:n==="__v_raw"?s:Reflect.get(se(e,n)&&n in s?e:s,n,r)}const K1={get:ov(!1,!1)},Y1={get:ov(!1,!0)},Q1={get:ov(!0,!1)};const sA=new WeakMap,iA=new WeakMap,nA=new WeakMap,J1=new WeakMap;function Z1(i){switch(i){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function tC(i){return i.__v_skip||!Object.isExtensible(i)?0:Z1(x1(i))}function Vd(i){return Bo(i)?i:av(i,!1,z1,K1,sA)}function rA(i){return av(i,!1,q1,Y1,iA)}function oA(i){return av(i,!0,W1,Q1,nA)}function av(i,t,e,s,n){if(!be(i)||i.__v_raw&&!(t&&i.__v_isReactive))return i;const r=tC(i);if(r===0)return i;const o=n.get(i);if(o)return o;const a=new Proxy(i,r===2?s:e);return n.set(i,a),a}function Or(i){return Bo(i)?Or(i.__v_raw):!!(i&&i.__v_isReactive)}function Bo(i){return!!(i&&i.__v_isReadonly)}function Ui(i){return!!(i&&i.__v_isShallow)}function lv(i){return i?!!i.__v_raw:!1}function Xt(i){const t=i&&i.__v_raw;return t?Xt(t):i}function cv(i){return!se(i,"__v_skip")&&Object.isExtensible(i)&&Nw(i,"__v_skip",!0),i}const ys=i=>be(i)?Vd(i):i,fp=i=>be(i)?oA(i):i;function Me(i){return i?i.__v_isRef===!0:!1}function ae(i){return aA(i,!1)}function eC(i){return aA(i,!0)}function aA(i,t){return Me(i)?i:new sC(i,t)}class sC{constructor(t,e){this.dep=new rv,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=e?t:Xt(t),this._value=e?t:ys(t),this.__v_isShallow=e}get value(){return this.dep.track(),this._value}set value(t){const e=this._rawValue,s=this.__v_isShallow||Ui(t)||Bo(t);t=s?t:Xt(t),No(t,e)&&(this._rawValue=t,this._value=s?t:ys(t),this.dep.trigger())}}function je(i){return Me(i)?i.value:i}const iC={get:(i,t,e)=>t==="__v_raw"?i:je(Reflect.get(i,t,e)),set:(i,t,e,s)=>{const n=i[t];return Me(n)&&!Me(e)?(n.value=e,!0):Reflect.set(i,t,e,s)}};function lA(i){return Or(i)?i:new Proxy(i,iC)}function nC(i){const t=At(i)?new Array(i.length):{};for(const e in i)t[e]=cA(i,e);return t}class rC{constructor(t,e,s){this._object=t,this._key=e,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return $1(Xt(this._object),this._key)}}class oC{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function aC(i,t,e){return Me(i)?i:Mt(i)?new oC(i):be(i)&&arguments.length>1?cA(i,t,e):ae(i)}function cA(i,t,e){const s=i[t];return Me(s)?s:new rC(i,t,e)}class lC{constructor(t,e,s){this.fn=t,this.setter=e,this._value=void 0,this.dep=new rv(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=cu-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!e,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&ye!==this)return Gw(this,!0),!0}get value(){const t=this.dep.track();return Yw(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function cC(i,t,e=!1){let s,n;return Mt(i)?s=i:(s=i.get,n=i.set),new lC(s,n,e)}const yf={},pp=new WeakMap;let aa;function hC(i,t=!1,e=aa){if(e){let s=pp.get(e);s||pp.set(e,s=[]),s.push(i)}}function uC(i,t,e=me){const{immediate:s,deep:n,once:r,scheduler:o,augmentJob:a,call:c}=e,h=R=>n?R:Ui(R)||n===!1||n===0?Mr(R,1):Mr(R);let u,f,p,g,_=!1,v=!1;if(Me(i)?(f=()=>i.value,_=Ui(i)):Or(i)?(f=()=>h(i),_=!0):At(i)?(v=!0,_=i.some(R=>Or(R)||Ui(R)),f=()=>i.map(R=>{if(Me(R))return R.value;if(Or(R))return h(R);if(Mt(R))return c?c(R,2):R()})):Mt(i)?t?f=c?()=>c(i,2):i:f=()=>{if(p){$r();try{p()}finally{Br()}}const R=aa;aa=u;try{return c?c(i,3,[g]):i(g)}finally{aa=R}}:f=Vn,t&&n){const R=f,L=n===!0?1/0:n;f=()=>Mr(R(),L)}const x=zw(),S=()=>{u.stop(),x&&x.active&&tv(x.effects,u)};if(r&&t){const R=t;t=(...L)=>{R(...L),S()}}let C=v?new Array(i.length).fill(yf):yf;const T=R=>{if(!(!(u.flags&1)||!u.dirty&&!R))if(t){const L=u.run();if(n||_||(v?L.some((O,I)=>No(O,C[I])):No(L,C))){p&&p();const O=aa;aa=u;try{const I=[L,C===yf?void 0:v&&C[0]===yf?[]:C,g];c?c(t,3,I):t(...I),C=L}finally{aa=O}}}else u.run()};return a&&a(T),u=new Ww(f),u.scheduler=o?()=>o(T,!1):T,g=R=>hC(R,!1,u),p=u.onStop=()=>{const R=pp.get(u);if(R){if(c)c(R,4);else for(const L of R)L();pp.delete(u)}},t?s?T(!0):C=u.run():o?o(T.bind(null,!0),!0):u.run(),S.pause=u.pause.bind(u),S.resume=u.resume.bind(u),S.stop=S,S}function Mr(i,t=1/0,e){if(t<=0||!be(i)||i.__v_skip||(e=e||new Set,e.has(i)))return i;if(e.add(i),t--,Me(i))Mr(i.value,t,e);else if(At(i))for(let s=0;s<i.length;s++)Mr(i[s],t,e);else if(Jp(i)||ic(i))i.forEach(s=>{Mr(s,t,e)});else if(Fw(i)){for(const s in i)Mr(i[s],t,e);for(const s of Object.getOwnPropertySymbols(i))Object.prototype.propertyIsEnumerable.call(i,s)&&Mr(i[s],t,e)}return i}/**
* @vue/runtime-core v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function Ud(i,t,e,s){try{return s?i(...s):i()}catch(n){rg(n,t,e)}}function zn(i,t,e,s){if(Mt(i)){const n=Ud(i,t,e,s);return n&&Dw(n)&&n.catch(r=>{rg(r,t,e)}),n}if(At(i)){const n=[];for(let r=0;r<i.length;r++)n.push(zn(i[r],t,e,s));return n}}function rg(i,t,e,s=!0){const n=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||me;if(t){let a=t.parent;const c=t.proxy,h=`https://vuejs.org/error-reference/#runtime-${e}`;for(;a;){const u=a.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](i,c,h)===!1)return}a=a.parent}if(r){$r(),Ud(r,null,10,[i,c,h]),Br();return}}dC(i,e,n,s,o)}function dC(i,t,e,s=!0,n=!1){if(n)throw i;console.error(i)}const Xs=[];let En=-1;const nc=[];let Yr=null,Ul=0;const hA=Promise.resolve();let gp=null;function hv(i){const t=gp||hA;return i?t.then(this?i.bind(this):i):t}function fC(i){let t=En+1,e=Xs.length;for(;t<e;){const s=t+e>>>1,n=Xs[s],r=uu(n);r<i||r===i&&n.flags&2?t=s+1:e=s}return t}function uv(i){if(!(i.flags&1)){const t=uu(i),e=Xs[Xs.length-1];!e||!(i.flags&2)&&t>=uu(e)?Xs.push(i):Xs.splice(fC(t),0,i),i.flags|=1,uA()}}function uA(){gp||(gp=hA.then(fA))}function pC(i){At(i)?nc.push(...i):Yr&&i.id===-1?Yr.splice(Ul+1,0,i):i.flags&1||(nc.push(i),i.flags|=1),uA()}function _y(i,t,e=En+1){for(;e<Xs.length;e++){const s=Xs[e];if(s&&s.flags&2){if(i&&s.id!==i.uid)continue;Xs.splice(e,1),e--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function dA(i){if(nc.length){const t=[...new Set(nc)].sort((e,s)=>uu(e)-uu(s));if(nc.length=0,Yr){Yr.push(...t);return}for(Yr=t,Ul=0;Ul<Yr.length;Ul++){const e=Yr[Ul];e.flags&4&&(e.flags&=-2),e.flags&8||e(),e.flags&=-2}Yr=null,Ul=0}}const uu=i=>i.id==null?i.flags&2?-1:1/0:i.id;function fA(i){try{for(En=0;En<Xs.length;En++){const t=Xs[En];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),Ud(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;En<Xs.length;En++){const t=Xs[En];t&&(t.flags&=-2)}En=-1,Xs.length=0,dA(),gp=null,(Xs.length||nc.length)&&fA()}}let si=null,pA=null;function mp(i){const t=si;return si=i,pA=i&&i.type.__scopeId||null,t}function $o(i,t=si,e){if(!t||i._n)return i;const s=(...n)=>{s._d&&Ry(-1);const r=mp(t);let o;try{o=i(...n)}finally{mp(r),s._d&&Ry(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function tr(i,t){if(si===null)return i;const e=hg(si),s=i.dirs||(i.dirs=[]);for(let n=0;n<t.length;n++){let[r,o,a,c=me]=t[n];r&&(Mt(r)&&(r={mounted:r,updated:r}),r.deep&&Mr(o),s.push({dir:r,instance:e,value:o,oldValue:void 0,arg:a,modifiers:c}))}return i}function na(i,t,e,s){const n=i.dirs,r=t&&t.dirs;for(let o=0;o<n.length;o++){const a=n[o];r&&(a.oldValue=r[o].value);let c=a.dir[s];c&&($r(),zn(c,e,8,[i.el,a,i,t]),Br())}}const gC=Symbol("_vte"),mC=i=>i.__isTeleport;function dv(i,t){i.shapeFlag&6&&i.component?(i.transition=t,dv(i.component.subTree,t)):i.shapeFlag&128?(i.ssContent.transition=t.clone(i.ssContent),i.ssFallback.transition=t.clone(i.ssFallback)):i.transition=t}/*! #__NO_SIDE_EFFECTS__ */function Vr(i,t){return Mt(i)?Ls({name:i.name},t,{setup:i}):i}function gA(i){i.ids=[i.ids[0]+i.ids[2]+++"-",0,0]}function bp(i,t,e,s,n=!1){if(At(i)){i.forEach((_,v)=>bp(_,t&&(At(t)?t[v]:t),e,s,n));return}if(iu(s)&&!n){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&bp(i,t,e,s.component.subTree);return}const r=s.shapeFlag&4?hg(s.component):s.el,o=n?null:r,{i:a,r:c}=i,h=t&&t.r,u=a.refs===me?a.refs={}:a.refs,f=a.setupState,p=Xt(f),g=f===me?()=>!1:_=>se(p,_);if(h!=null&&h!==c&&(Ke(h)?(u[h]=null,g(h)&&(f[h]=null)):Me(h)&&(h.value=null)),Mt(c))Ud(c,a,12,[o,u]);else{const _=Ke(c),v=Me(c);if(_||v){const x=()=>{if(i.f){const S=_?g(c)?f[c]:u[c]:c.value;n?At(S)&&tv(S,r):At(S)?S.includes(r)||S.push(r):_?(u[c]=[r],g(c)&&(f[c]=u[c])):(c.value=[r],i.k&&(u[i.k]=c.value))}else _?(u[c]=o,g(c)&&(f[c]=o)):v&&(c.value=o,i.k&&(u[i.k]=o))};o?(x.id=-1,ai(x,e)):x()}}}eg().requestIdleCallback;eg().cancelIdleCallback;const iu=i=>!!i.type.__asyncLoader,mA=i=>i.type.__isKeepAlive;function bC(i,t){bA(i,"a",t)}function vC(i,t){bA(i,"da",t)}function bA(i,t,e=ws){const s=i.__wdc||(i.__wdc=()=>{let n=e;for(;n;){if(n.isDeactivated)return;n=n.parent}return i()});if(og(t,s,e),e){let n=e.parent;for(;n&&n.parent;)mA(n.parent.vnode)&&_C(s,t,e,n),n=n.parent}}function _C(i,t,e,s){const n=og(t,i,s,!0);vA(()=>{tv(s[t],n)},e)}function og(i,t,e=ws,s=!1){if(e){const n=e[i]||(e[i]=[]),r=t.__weh||(t.__weh=(...o)=>{$r();const a=zd(e),c=zn(t,e,i,o);return a(),Br(),c});return s?n.unshift(r):n.push(r),r}}const Ur=i=>(t,e=ws)=>{(!fu||i==="sp")&&og(i,(...s)=>t(...s),e)},yC=Ur("bm"),ag=Ur("m"),wC=Ur("bu"),AC=Ur("u"),EC=Ur("bum"),vA=Ur("um"),SC=Ur("sp"),xC=Ur("rtg"),CC=Ur("rtc");function TC(i,t=ws){og("ec",i,t)}const PC="components";function fv(i,t){return kC(PC,i,!0,t)||i}const RC=Symbol.for("v-ndc");function kC(i,t,e=!0,s=!1){const n=si||ws;if(n){const r=n.type;{const a=vT(r,!1);if(a&&(a===t||a===Wi(t)||a===tg(Wi(t))))return r}const o=yy(n[i]||r[i],t)||yy(n.appContext[i],t);return!o&&s?r:o}}function yy(i,t){return i&&(i[t]||i[Wi(t)]||i[tg(Wi(t))])}function wn(i,t,e,s){let n;const r=e,o=At(i);if(o||Ke(i)){const a=o&&Or(i);let c=!1,h=!1;a&&(c=!Ui(i),h=Bo(i),i=ng(i)),n=new Array(i.length);for(let u=0,f=i.length;u<f;u++)n[u]=t(c?h?fp(ys(i[u])):ys(i[u]):i[u],u,void 0,r)}else if(typeof i=="number"){n=new Array(i);for(let a=0;a<i;a++)n[a]=t(a+1,a,void 0,r)}else if(be(i))if(i[Symbol.iterator])n=Array.from(i,(a,c)=>t(a,c,void 0,r));else{const a=Object.keys(i);n=new Array(a.length);for(let c=0,h=a.length;c<h;c++){const u=a[c];n[c]=t(i[u],u,c,r)}}else n=[];return n}const Em=i=>i?$A(i)?hg(i):Em(i.parent):null,nu=Ls(Object.create(null),{$:i=>i,$el:i=>i.vnode.el,$data:i=>i.data,$props:i=>i.props,$attrs:i=>i.attrs,$slots:i=>i.slots,$refs:i=>i.refs,$parent:i=>Em(i.parent),$root:i=>Em(i.root),$host:i=>i.ce,$emit:i=>i.emit,$options:i=>yA(i),$forceUpdate:i=>i.f||(i.f=()=>{uv(i.update)}),$nextTick:i=>i.n||(i.n=hv.bind(i.proxy)),$watch:i=>JC.bind(i)}),im=(i,t)=>i!==me&&!i.__isScriptSetup&&se(i,t),IC={get({_:i},t){if(t==="__v_skip")return!0;const{ctx:e,setupState:s,data:n,props:r,accessCache:o,type:a,appContext:c}=i;let h;if(t[0]!=="$"){const g=o[t];if(g!==void 0)switch(g){case 1:return s[t];case 2:return n[t];case 4:return e[t];case 3:return r[t]}else{if(im(s,t))return o[t]=1,s[t];if(n!==me&&se(n,t))return o[t]=2,n[t];if((h=i.propsOptions[0])&&se(h,t))return o[t]=3,r[t];if(e!==me&&se(e,t))return o[t]=4,e[t];Sm&&(o[t]=0)}}const u=nu[t];let f,p;if(u)return t==="$attrs"&&Is(i.attrs,"get",""),u(i);if((f=a.__cssModules)&&(f=f[t]))return f;if(e!==me&&se(e,t))return o[t]=4,e[t];if(p=c.config.globalProperties,se(p,t))return p[t]},set({_:i},t,e){const{data:s,setupState:n,ctx:r}=i;return im(n,t)?(n[t]=e,!0):s!==me&&se(s,t)?(s[t]=e,!0):se(i.props,t)||t[0]==="$"&&t.slice(1)in i?!1:(r[t]=e,!0)},has({_:{data:i,setupState:t,accessCache:e,ctx:s,appContext:n,propsOptions:r}},o){let a;return!!e[o]||i!==me&&se(i,o)||im(t,o)||(a=r[0])&&se(a,o)||se(s,o)||se(nu,o)||se(n.config.globalProperties,o)},defineProperty(i,t,e){return e.get!=null?i._.accessCache[t]=0:se(e,"value")&&this.set(i,t,e.value,null),Reflect.defineProperty(i,t,e)}};function wy(i){return At(i)?i.reduce((t,e)=>(t[e]=null,t),{}):i}let Sm=!0;function LC(i){const t=yA(i),e=i.proxy,s=i.ctx;Sm=!1,t.beforeCreate&&Ay(t.beforeCreate,i,"bc");const{data:n,computed:r,methods:o,watch:a,provide:c,inject:h,created:u,beforeMount:f,mounted:p,beforeUpdate:g,updated:_,activated:v,deactivated:x,beforeDestroy:S,beforeUnmount:C,destroyed:T,unmounted:R,render:L,renderTracked:O,renderTriggered:I,errorCaptured:D,serverPrefetch:B,expose:K,inheritAttrs:Q,components:bt,directives:yt,filters:St}=t;if(h&&MC(h,s,null),o)for(const X in o){const Pt=o[X];Mt(Pt)&&(s[X]=Pt.bind(e))}if(n){const X=n.call(e,e);be(X)&&(i.data=Vd(X))}if(Sm=!0,r)for(const X in r){const Pt=r[X],De=Mt(Pt)?Pt.bind(e,e):Mt(Pt.get)?Pt.get.bind(e,e):Vn,z=!Mt(Pt)&&Mt(Pt.set)?Pt.set.bind(e):Vn,Ee=us({get:De,set:z});Object.defineProperty(s,X,{enumerable:!0,configurable:!0,get:()=>Ee.value,set:Vt=>Ee.value=Vt})}if(a)for(const X in a)_A(a[X],s,e,X);if(c){const X=Mt(c)?c.call(e):c;Reflect.ownKeys(X).forEach(Pt=>{kf(Pt,X[Pt])})}u&&Ay(u,i,"c");function J(X,Pt){At(Pt)?Pt.forEach(De=>X(De.bind(e))):Pt&&X(Pt.bind(e))}if(J(yC,f),J(ag,p),J(wC,g),J(AC,_),J(bC,v),J(vC,x),J(TC,D),J(CC,O),J(xC,I),J(EC,C),J(vA,R),J(SC,B),At(K))if(K.length){const X=i.exposed||(i.exposed={});K.forEach(Pt=>{Object.defineProperty(X,Pt,{get:()=>e[Pt],set:De=>e[Pt]=De})})}else i.exposed||(i.exposed={});L&&i.render===Vn&&(i.render=L),Q!=null&&(i.inheritAttrs=Q),bt&&(i.components=bt),yt&&(i.directives=yt),B&&gA(i)}function MC(i,t,e=Vn){At(i)&&(i=xm(i));for(const s in i){const n=i[s];let r;be(n)?"default"in n?r=hn(n.from||s,n.default,!0):r=hn(n.from||s):r=hn(n),Me(r)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[s]=r}}function Ay(i,t,e){zn(At(i)?i.map(s=>s.bind(t.proxy)):i.bind(t.proxy),t,e)}function _A(i,t,e,s){let n=s.includes(".")?MA(e,s):()=>e[s];if(Ke(i)){const r=t[i];Mt(r)&&rc(n,r)}else if(Mt(i))rc(n,i.bind(e));else if(be(i))if(At(i))i.forEach(r=>_A(r,t,e,s));else{const r=Mt(i.handler)?i.handler.bind(e):t[i.handler];Mt(r)&&rc(n,r,i)}}function yA(i){const t=i.type,{mixins:e,extends:s}=t,{mixins:n,optionsCache:r,config:{optionMergeStrategies:o}}=i.appContext,a=r.get(t);let c;return a?c=a:!n.length&&!e&&!s?c=t:(c={},n.length&&n.forEach(h=>vp(c,h,o,!0)),vp(c,t,o)),be(t)&&r.set(t,c),c}function vp(i,t,e,s=!1){const{mixins:n,extends:r}=t;r&&vp(i,r,e,!0),n&&n.forEach(o=>vp(i,o,e,!0));for(const o in t)if(!(s&&o==="expose")){const a=DC[o]||e&&e[o];i[o]=a?a(i[o],t[o]):t[o]}return i}const DC={data:Ey,props:Sy,emits:Sy,methods:Fh,computed:Fh,beforeCreate:Hs,created:Hs,beforeMount:Hs,mounted:Hs,beforeUpdate:Hs,updated:Hs,beforeDestroy:Hs,beforeUnmount:Hs,destroyed:Hs,unmounted:Hs,activated:Hs,deactivated:Hs,errorCaptured:Hs,serverPrefetch:Hs,components:Fh,directives:Fh,watch:FC,provide:Ey,inject:OC};function Ey(i,t){return t?i?function(){return Ls(Mt(i)?i.call(this,this):i,Mt(t)?t.call(this,this):t)}:t:i}function OC(i,t){return Fh(xm(i),xm(t))}function xm(i){if(At(i)){const t={};for(let e=0;e<i.length;e++)t[i[e]]=i[e];return t}return i}function Hs(i,t){return i?[...new Set([].concat(i,t))]:t}function Fh(i,t){return i?Ls(Object.create(null),i,t):t}function Sy(i,t){return i?At(i)&&At(t)?[...new Set([...i,...t])]:Ls(Object.create(null),wy(i),wy(t??{})):t}function FC(i,t){if(!i)return t;if(!t)return i;const e=Ls(Object.create(null),i);for(const s in t)e[s]=Hs(i[s],t[s]);return e}function wA(){return{app:null,config:{isNativeTag:E1,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let NC=0;function $C(i,t){return function(s,n=null){Mt(s)||(s=Ls({},s)),n!=null&&!be(n)&&(n=null);const r=wA(),o=new WeakSet,a=[];let c=!1;const h=r.app={_uid:NC++,_component:s,_props:n,_container:null,_context:r,_instance:null,version:yT,get config(){return r.config},set config(u){},use(u,...f){return o.has(u)||(u&&Mt(u.install)?(o.add(u),u.install(h,...f)):Mt(u)&&(o.add(u),u(h,...f))),h},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),h},component(u,f){return f?(r.components[u]=f,h):r.components[u]},directive(u,f){return f?(r.directives[u]=f,h):r.directives[u]},mount(u,f,p){if(!c){const g=h._ceVNode||Te(s,n);return g.appContext=r,p===!0?p="svg":p===!1&&(p=void 0),i(g,u,p),c=!0,h._container=u,u.__vue_app__=h,hg(g.component)}},onUnmount(u){a.push(u)},unmount(){c&&(zn(a,h._instance,16),i(null,h._container),delete h._container.__vue_app__)},provide(u,f){return r.provides[u]=f,h},runWithContext(u){const f=_l;_l=h;try{return u()}finally{_l=f}}};return h}}let _l=null;function kf(i,t){if(ws){let e=ws.provides;const s=ws.parent&&ws.parent.provides;s===e&&(e=ws.provides=Object.create(s)),e[i]=t}}function hn(i,t,e=!1){const s=ws||si;if(s||_l){const n=_l?_l._context.provides:s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(n&&i in n)return n[i];if(arguments.length>1)return e&&Mt(t)?t.call(s&&s.proxy):t}}function BC(){return!!(ws||si||_l)}const AA={},EA=()=>Object.create(AA),SA=i=>Object.getPrototypeOf(i)===AA;function HC(i,t,e,s=!1){const n={},r=EA();i.propsDefaults=Object.create(null),xA(i,t,n,r);for(const o in i.propsOptions[0])o in n||(n[o]=void 0);e?i.props=s?n:rA(n):i.type.props?i.props=n:i.props=r,i.attrs=r}function jC(i,t,e,s){const{props:n,attrs:r,vnode:{patchFlag:o}}=i,a=Xt(n),[c]=i.propsOptions;let h=!1;if((s||o>0)&&!(o&16)){if(o&8){const u=i.vnode.dynamicProps;for(let f=0;f<u.length;f++){let p=u[f];if(lg(i.emitsOptions,p))continue;const g=t[p];if(c)if(se(r,p))g!==r[p]&&(r[p]=g,h=!0);else{const _=Wi(p);n[_]=Cm(c,a,_,g,i,!1)}else g!==r[p]&&(r[p]=g,h=!0)}}}else{xA(i,t,n,r)&&(h=!0);let u;for(const f in a)(!t||!se(t,f)&&((u=Sl(f))===f||!se(t,u)))&&(c?e&&(e[f]!==void 0||e[u]!==void 0)&&(n[f]=Cm(c,a,f,void 0,i,!0)):delete n[f]);if(r!==a)for(const f in r)(!t||!se(t,f))&&(delete r[f],h=!0)}h&&Lr(i.attrs,"set","")}function xA(i,t,e,s){const[n,r]=i.propsOptions;let o=!1,a;if(t)for(let c in t){if(tu(c))continue;const h=t[c];let u;n&&se(n,u=Wi(c))?!r||!r.includes(u)?e[u]=h:(a||(a={}))[u]=h:lg(i.emitsOptions,c)||(!(c in s)||h!==s[c])&&(s[c]=h,o=!0)}if(r){const c=Xt(e),h=a||me;for(let u=0;u<r.length;u++){const f=r[u];e[f]=Cm(n,c,f,h[f],i,!se(h,f))}}return o}function Cm(i,t,e,s,n,r){const o=i[e];if(o!=null){const a=se(o,"default");if(a&&s===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Mt(c)){const{propsDefaults:h}=n;if(e in h)s=h[e];else{const u=zd(n);s=h[e]=c.call(null,t),u()}}else s=c;n.ce&&n.ce._setProp(e,s)}o[0]&&(r&&!a?s=!1:o[1]&&(s===""||s===Sl(e))&&(s=!0))}return s}const VC=new WeakMap;function CA(i,t,e=!1){const s=e?VC:t.propsCache,n=s.get(i);if(n)return n;const r=i.props,o={},a=[];let c=!1;if(!Mt(i)){const u=f=>{c=!0;const[p,g]=CA(f,t,!0);Ls(o,p),g&&a.push(...g)};!e&&t.mixins.length&&t.mixins.forEach(u),i.extends&&u(i.extends),i.mixins&&i.mixins.forEach(u)}if(!r&&!c)return be(i)&&s.set(i,sc),sc;if(At(r))for(let u=0;u<r.length;u++){const f=Wi(r[u]);xy(f)&&(o[f]=me)}else if(r)for(const u in r){const f=Wi(u);if(xy(f)){const p=r[u],g=o[f]=At(p)||Mt(p)?{type:p}:Ls({},p),_=g.type;let v=!1,x=!0;if(At(_))for(let S=0;S<_.length;++S){const C=_[S],T=Mt(C)&&C.name;if(T==="Boolean"){v=!0;break}else T==="String"&&(x=!1)}else v=Mt(_)&&_.name==="Boolean";g[0]=v,g[1]=x,(v||se(g,"default"))&&a.push(f)}}const h=[o,a];return be(i)&&s.set(i,h),h}function xy(i){return i[0]!=="$"&&!tu(i)}const pv=i=>i[0]==="_"||i==="$stable",gv=i=>At(i)?i.map(Hn):[Hn(i)],UC=(i,t,e)=>{if(t._n)return t;const s=$o((...n)=>gv(t(...n)),e);return s._c=!1,s},TA=(i,t,e)=>{const s=i._ctx;for(const n in i){if(pv(n))continue;const r=i[n];if(Mt(r))t[n]=UC(n,r,s);else if(r!=null){const o=gv(r);t[n]=()=>o}}},PA=(i,t)=>{const e=gv(t);i.slots.default=()=>e},RA=(i,t,e)=>{for(const s in t)(e||!pv(s))&&(i[s]=t[s])},zC=(i,t,e)=>{const s=i.slots=EA();if(i.vnode.shapeFlag&32){const n=t._;n?(RA(s,t,e),e&&Nw(s,"_",n,!0)):TA(t,s)}else t&&PA(i,t)},WC=(i,t,e)=>{const{vnode:s,slots:n}=i;let r=!0,o=me;if(s.shapeFlag&32){const a=t._;a?e&&a===1?r=!1:RA(n,t,e):(r=!t.$stable,TA(t,n)),o=t}else t&&(PA(i,t),o={default:1});if(r)for(const a in n)!pv(a)&&o[a]==null&&delete n[a]},ai=rT;function qC(i){return GC(i)}function GC(i,t){const e=eg();e.__VUE__=!0;const{insert:s,remove:n,patchProp:r,createElement:o,createText:a,createComment:c,setText:h,setElementText:u,parentNode:f,nextSibling:p,setScopeId:g=Vn,insertStaticContent:_}=i,v=(P,k,$,U=null,W=null,q=null,rt=void 0,st=null,tt=!!k.dynamicChildren)=>{if(P===k)return;P&&!Rh(P,k)&&(U=H(P),Vt(P,W,q,!0),P=null),k.patchFlag===-2&&(tt=!1,k.dynamicChildren=null);const{type:Y,ref:vt,shapeFlag:ot}=k;switch(Y){case cg:x(P,k,$,U);break;case Ho:S(P,k,$,U);break;case If:P==null&&C(k,$,U,rt);break;case We:bt(P,k,$,U,W,q,rt,st,tt);break;default:ot&1?L(P,k,$,U,W,q,rt,st,tt):ot&6?yt(P,k,$,U,W,q,rt,st,tt):(ot&64||ot&128)&&Y.process(P,k,$,U,W,q,rt,st,tt,ht)}vt!=null&&W&&bp(vt,P&&P.ref,q,k||P,!k)},x=(P,k,$,U)=>{if(P==null)s(k.el=a(k.children),$,U);else{const W=k.el=P.el;k.children!==P.children&&h(W,k.children)}},S=(P,k,$,U)=>{P==null?s(k.el=c(k.children||""),$,U):k.el=P.el},C=(P,k,$,U)=>{[P.el,P.anchor]=_(P.children,k,$,U,P.el,P.anchor)},T=({el:P,anchor:k},$,U)=>{let W;for(;P&&P!==k;)W=p(P),s(P,$,U),P=W;s(k,$,U)},R=({el:P,anchor:k})=>{let $;for(;P&&P!==k;)$=p(P),n(P),P=$;n(k)},L=(P,k,$,U,W,q,rt,st,tt)=>{k.type==="svg"?rt="svg":k.type==="math"&&(rt="mathml"),P==null?O(k,$,U,W,q,rt,st,tt):B(P,k,W,q,rt,st,tt)},O=(P,k,$,U,W,q,rt,st)=>{let tt,Y;const{props:vt,shapeFlag:ot,transition:gt,dirs:_t}=P;if(tt=P.el=o(P.type,q,vt&&vt.is,vt),ot&8?u(tt,P.children):ot&16&&D(P.children,tt,null,U,W,nm(P,q),rt,st),_t&&na(P,null,U,"created"),I(tt,P,P.scopeId,rt,U),vt){for(const le in vt)le!=="value"&&!tu(le)&&r(tt,le,null,vt[le],q,U);"value"in vt&&r(tt,"value",null,vt.value,q),(Y=vt.onVnodeBeforeMount)&&vn(Y,U,P)}_t&&na(P,null,U,"beforeMount");const Ht=XC(W,gt);Ht&&gt.beforeEnter(tt),s(tt,k,$),((Y=vt&&vt.onVnodeMounted)||Ht||_t)&&ai(()=>{Y&&vn(Y,U,P),Ht&&gt.enter(tt),_t&&na(P,null,U,"mounted")},W)},I=(P,k,$,U,W)=>{if($&&g(P,$),U)for(let q=0;q<U.length;q++)g(P,U[q]);if(W){let q=W.subTree;if(k===q||OA(q.type)&&(q.ssContent===k||q.ssFallback===k)){const rt=W.vnode;I(P,rt,rt.scopeId,rt.slotScopeIds,W.parent)}}},D=(P,k,$,U,W,q,rt,st,tt=0)=>{for(let Y=tt;Y<P.length;Y++){const vt=P[Y]=st?Qr(P[Y]):Hn(P[Y]);v(null,vt,k,$,U,W,q,rt,st)}},B=(P,k,$,U,W,q,rt)=>{const st=k.el=P.el;let{patchFlag:tt,dynamicChildren:Y,dirs:vt}=k;tt|=P.patchFlag&16;const ot=P.props||me,gt=k.props||me;let _t;if($&&ra($,!1),(_t=gt.onVnodeBeforeUpdate)&&vn(_t,$,k,P),vt&&na(k,P,$,"beforeUpdate"),$&&ra($,!0),(ot.innerHTML&&gt.innerHTML==null||ot.textContent&&gt.textContent==null)&&u(st,""),Y?K(P.dynamicChildren,Y,st,$,U,nm(k,W),q):rt||Pt(P,k,st,null,$,U,nm(k,W),q,!1),tt>0){if(tt&16)Q(st,ot,gt,$,W);else if(tt&2&&ot.class!==gt.class&&r(st,"class",null,gt.class,W),tt&4&&r(st,"style",ot.style,gt.style,W),tt&8){const Ht=k.dynamicProps;for(let le=0;le<Ht.length;le++){const Jt=Ht[le],Qe=ot[Jt],Ne=gt[Jt];(Ne!==Qe||Jt==="value")&&r(st,Jt,Qe,Ne,W,$)}}tt&1&&P.children!==k.children&&u(st,k.children)}else!rt&&Y==null&&Q(st,ot,gt,$,W);((_t=gt.onVnodeUpdated)||vt)&&ai(()=>{_t&&vn(_t,$,k,P),vt&&na(k,P,$,"updated")},U)},K=(P,k,$,U,W,q,rt)=>{for(let st=0;st<k.length;st++){const tt=P[st],Y=k[st],vt=tt.el&&(tt.type===We||!Rh(tt,Y)||tt.shapeFlag&70)?f(tt.el):$;v(tt,Y,vt,null,U,W,q,rt,!0)}},Q=(P,k,$,U,W)=>{if(k!==$){if(k!==me)for(const q in k)!tu(q)&&!(q in $)&&r(P,q,k[q],null,W,U);for(const q in $){if(tu(q))continue;const rt=$[q],st=k[q];rt!==st&&q!=="value"&&r(P,q,st,rt,W,U)}"value"in $&&r(P,"value",k.value,$.value,W)}},bt=(P,k,$,U,W,q,rt,st,tt)=>{const Y=k.el=P?P.el:a(""),vt=k.anchor=P?P.anchor:a("");let{patchFlag:ot,dynamicChildren:gt,slotScopeIds:_t}=k;_t&&(st=st?st.concat(_t):_t),P==null?(s(Y,$,U),s(vt,$,U),D(k.children||[],$,vt,W,q,rt,st,tt)):ot>0&&ot&64&&gt&&P.dynamicChildren?(K(P.dynamicChildren,gt,$,W,q,rt,st),(k.key!=null||W&&k===W.subTree)&&kA(P,k,!0)):Pt(P,k,$,vt,W,q,rt,st,tt)},yt=(P,k,$,U,W,q,rt,st,tt)=>{k.slotScopeIds=st,P==null?k.shapeFlag&512?W.ctx.activate(k,$,U,rt,tt):St(k,$,U,W,q,rt,tt):Ut(P,k,tt)},St=(P,k,$,U,W,q,rt)=>{const st=P.component=fT(P,U,W);if(mA(P)&&(st.ctx.renderer=ht),pT(st,!1,rt),st.asyncDep){if(W&&W.registerDep(st,J,rt),!P.el){const tt=st.subTree=Te(Ho);S(null,tt,k,$)}}else J(st,P,k,$,W,q,rt)},Ut=(P,k,$)=>{const U=k.component=P.component;if(iT(P,k,$))if(U.asyncDep&&!U.asyncResolved){X(U,k,$);return}else U.next=k,U.update();else k.el=P.el,U.vnode=k},J=(P,k,$,U,W,q,rt)=>{const st=()=>{if(P.isMounted){let{next:ot,bu:gt,u:_t,parent:Ht,vnode:le}=P;{const Ms=IA(P);if(Ms){ot&&(ot.el=le.el,X(P,ot,rt)),Ms.asyncDep.then(()=>{P.isUnmounted||st()});return}}let Jt=ot,Qe;ra(P,!1),ot?(ot.el=le.el,X(P,ot,rt)):ot=le,gt&&Rf(gt),(Qe=ot.props&&ot.props.onVnodeBeforeUpdate)&&vn(Qe,Ht,ot,le),ra(P,!0);const Ne=Ty(P),ds=P.subTree;P.subTree=Ne,v(ds,Ne,f(ds.el),H(ds),P,W,q),ot.el=Ne.el,Jt===null&&nT(P,Ne.el),_t&&ai(_t,W),(Qe=ot.props&&ot.props.onVnodeUpdated)&&ai(()=>vn(Qe,Ht,ot,le),W)}else{let ot;const{el:gt,props:_t}=k,{bm:Ht,m:le,parent:Jt,root:Qe,type:Ne}=P,ds=iu(k);ra(P,!1),Ht&&Rf(Ht),!ds&&(ot=_t&&_t.onVnodeBeforeMount)&&vn(ot,Jt,k),ra(P,!0);{Qe.ce&&Qe.ce._injectChildStyle(Ne);const Ms=P.subTree=Ty(P);v(null,Ms,$,U,P,W,q),k.el=Ms.el}if(le&&ai(le,W),!ds&&(ot=_t&&_t.onVnodeMounted)){const Ms=k;ai(()=>vn(ot,Jt,Ms),W)}(k.shapeFlag&256||Jt&&iu(Jt.vnode)&&Jt.vnode.shapeFlag&256)&&P.a&&ai(P.a,W),P.isMounted=!0,k=$=U=null}};P.scope.on();const tt=P.effect=new Ww(st);P.scope.off();const Y=P.update=tt.run.bind(tt),vt=P.job=tt.runIfDirty.bind(tt);vt.i=P,vt.id=P.uid,tt.scheduler=()=>uv(vt),ra(P,!0),Y()},X=(P,k,$)=>{k.component=P;const U=P.vnode.props;P.vnode=k,P.next=null,jC(P,k.props,U,$),WC(P,k.children,$),$r(),_y(P),Br()},Pt=(P,k,$,U,W,q,rt,st,tt=!1)=>{const Y=P&&P.children,vt=P?P.shapeFlag:0,ot=k.children,{patchFlag:gt,shapeFlag:_t}=k;if(gt>0){if(gt&128){z(Y,ot,$,U,W,q,rt,st,tt);return}else if(gt&256){De(Y,ot,$,U,W,q,rt,st,tt);return}}_t&8?(vt&16&&qt(Y,W,q),ot!==Y&&u($,ot)):vt&16?_t&16?z(Y,ot,$,U,W,q,rt,st,tt):qt(Y,W,q,!0):(vt&8&&u($,""),_t&16&&D(ot,$,U,W,q,rt,st,tt))},De=(P,k,$,U,W,q,rt,st,tt)=>{P=P||sc,k=k||sc;const Y=P.length,vt=k.length,ot=Math.min(Y,vt);let gt;for(gt=0;gt<ot;gt++){const _t=k[gt]=tt?Qr(k[gt]):Hn(k[gt]);v(P[gt],_t,$,null,W,q,rt,st,tt)}Y>vt?qt(P,W,q,!0,!1,ot):D(k,$,U,W,q,rt,st,tt,ot)},z=(P,k,$,U,W,q,rt,st,tt)=>{let Y=0;const vt=k.length;let ot=P.length-1,gt=vt-1;for(;Y<=ot&&Y<=gt;){const _t=P[Y],Ht=k[Y]=tt?Qr(k[Y]):Hn(k[Y]);if(Rh(_t,Ht))v(_t,Ht,$,null,W,q,rt,st,tt);else break;Y++}for(;Y<=ot&&Y<=gt;){const _t=P[ot],Ht=k[gt]=tt?Qr(k[gt]):Hn(k[gt]);if(Rh(_t,Ht))v(_t,Ht,$,null,W,q,rt,st,tt);else break;ot--,gt--}if(Y>ot){if(Y<=gt){const _t=gt+1,Ht=_t<vt?k[_t].el:U;for(;Y<=gt;)v(null,k[Y]=tt?Qr(k[Y]):Hn(k[Y]),$,Ht,W,q,rt,st,tt),Y++}}else if(Y>gt)for(;Y<=ot;)Vt(P[Y],W,q,!0),Y++;else{const _t=Y,Ht=Y,le=new Map;for(Y=Ht;Y<=gt;Y++){const Ds=k[Y]=tt?Qr(k[Y]):Hn(k[Y]);Ds.key!=null&&le.set(Ds.key,Y)}let Jt,Qe=0;const Ne=gt-Ht+1;let ds=!1,Ms=0;const qo=new Array(Ne);for(Y=0;Y<Ne;Y++)qo[Y]=0;for(Y=_t;Y<=ot;Y++){const Ds=P[Y];if(Qe>=Ne){Vt(Ds,W,q,!0);continue}let Ti;if(Ds.key!=null)Ti=le.get(Ds.key);else for(Jt=Ht;Jt<=gt;Jt++)if(qo[Jt-Ht]===0&&Rh(Ds,k[Jt])){Ti=Jt;break}Ti===void 0?Vt(Ds,W,q,!0):(qo[Ti-Ht]=Y+1,Ti>=Ms?Ms=Ti:ds=!0,v(Ds,k[Ti],$,null,W,q,rt,st,tt),Qe++)}const Tl=ds?KC(qo):sc;for(Jt=Tl.length-1,Y=Ne-1;Y>=0;Y--){const Ds=Ht+Y,Ti=k[Ds],Jd=Ds+1<vt?k[Ds+1].el:U;qo[Y]===0?v(null,Ti,$,Jd,W,q,rt,st,tt):ds&&(Jt<0||Y!==Tl[Jt]?Ee(Ti,$,Jd,2):Jt--)}}},Ee=(P,k,$,U,W=null)=>{const{el:q,type:rt,transition:st,children:tt,shapeFlag:Y}=P;if(Y&6){Ee(P.component.subTree,k,$,U);return}if(Y&128){P.suspense.move(k,$,U);return}if(Y&64){rt.move(P,k,$,ht);return}if(rt===We){s(q,k,$);for(let ot=0;ot<tt.length;ot++)Ee(tt[ot],k,$,U);s(P.anchor,k,$);return}if(rt===If){T(P,k,$);return}if(U!==2&&Y&1&&st)if(U===0)st.beforeEnter(q),s(q,k,$),ai(()=>st.enter(q),W);else{const{leave:ot,delayLeave:gt,afterLeave:_t}=st,Ht=()=>{P.ctx.isUnmounted?n(q):s(q,k,$)},le=()=>{ot(q,()=>{Ht(),_t&&_t()})};gt?gt(q,Ht,le):le()}else s(q,k,$)},Vt=(P,k,$,U=!1,W=!1)=>{const{type:q,props:rt,ref:st,children:tt,dynamicChildren:Y,shapeFlag:vt,patchFlag:ot,dirs:gt,cacheIndex:_t}=P;if(ot===-2&&(W=!1),st!=null&&($r(),bp(st,null,$,P,!0),Br()),_t!=null&&(k.renderCache[_t]=void 0),vt&256){k.ctx.deactivate(P);return}const Ht=vt&1&&gt,le=!iu(P);let Jt;if(le&&(Jt=rt&&rt.onVnodeBeforeUnmount)&&vn(Jt,k,P),vt&6)Ye(P.component,$,U);else{if(vt&128){P.suspense.unmount($,U);return}Ht&&na(P,null,k,"beforeUnmount"),vt&64?P.type.remove(P,k,$,ht,U):Y&&!Y.hasOnce&&(q!==We||ot>0&&ot&64)?qt(Y,k,$,!1,!0):(q===We&&ot&384||!W&&vt&16)&&qt(tt,k,$),U&&Qt(P)}(le&&(Jt=rt&&rt.onVnodeUnmounted)||Ht)&&ai(()=>{Jt&&vn(Jt,k,P),Ht&&na(P,null,k,"unmounted")},$)},Qt=P=>{const{type:k,el:$,anchor:U,transition:W}=P;if(k===We){Pe($,U);return}if(k===If){R(P);return}const q=()=>{n($),W&&!W.persisted&&W.afterLeave&&W.afterLeave()};if(P.shapeFlag&1&&W&&!W.persisted){const{leave:rt,delayLeave:st}=W,tt=()=>rt($,q);st?st(P.el,q,tt):tt()}else q()},Pe=(P,k)=>{let $;for(;P!==k;)$=p(P),n(P),P=$;n(k)},Ye=(P,k,$)=>{const{bum:U,scope:W,job:q,subTree:rt,um:st,m:tt,a:Y,parent:vt,slots:{__:ot}}=P;Cy(tt),Cy(Y),U&&Rf(U),vt&&At(ot)&&ot.forEach(gt=>{vt.renderCache[gt]=void 0}),W.stop(),q&&(q.flags|=8,Vt(rt,P,k,$)),st&&ai(st,k),ai(()=>{P.isUnmounted=!0},k),k&&k.pendingBranch&&!k.isUnmounted&&P.asyncDep&&!P.asyncResolved&&P.suspenseId===k.pendingId&&(k.deps--,k.deps===0&&k.resolve())},qt=(P,k,$,U=!1,W=!1,q=0)=>{for(let rt=q;rt<P.length;rt++)Vt(P[rt],k,$,U,W)},H=P=>{if(P.shapeFlag&6)return H(P.component.subTree);if(P.shapeFlag&128)return P.suspense.next();const k=p(P.anchor||P.el),$=k&&k[gC];return $?p($):k};let V=!1;const it=(P,k,$)=>{P==null?k._vnode&&Vt(k._vnode,null,null,!0):v(k._vnode||null,P,k,null,null,null,$),k._vnode=P,V||(V=!0,_y(),dA(),V=!1)},ht={p:v,um:Vt,m:Ee,r:Qt,mt:St,mc:D,pc:Pt,pbc:K,n:H,o:i};return{render:it,hydrate:void 0,createApp:$C(it)}}function nm({type:i,props:t},e){return e==="svg"&&i==="foreignObject"||e==="mathml"&&i==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:e}function ra({effect:i,job:t},e){e?(i.flags|=32,t.flags|=4):(i.flags&=-33,t.flags&=-5)}function XC(i,t){return(!i||i&&!i.pendingBranch)&&t&&!t.persisted}function kA(i,t,e=!1){const s=i.children,n=t.children;if(At(s)&&At(n))for(let r=0;r<s.length;r++){const o=s[r];let a=n[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=n[r]=Qr(n[r]),a.el=o.el),!e&&a.patchFlag!==-2&&kA(o,a)),a.type===cg&&(a.el=o.el),a.type===Ho&&!a.el&&(a.el=o.el)}}function KC(i){const t=i.slice(),e=[0];let s,n,r,o,a;const c=i.length;for(s=0;s<c;s++){const h=i[s];if(h!==0){if(n=e[e.length-1],i[n]<h){t[s]=n,e.push(s);continue}for(r=0,o=e.length-1;r<o;)a=r+o>>1,i[e[a]]<h?r=a+1:o=a;h<i[e[r]]&&(r>0&&(t[s]=e[r-1]),e[r]=s)}}for(r=e.length,o=e[r-1];r-- >0;)e[r]=o,o=t[o];return e}function IA(i){const t=i.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:IA(t)}function Cy(i){if(i)for(let t=0;t<i.length;t++)i[t].flags|=8}const YC=Symbol.for("v-scx"),QC=()=>hn(YC);function rc(i,t,e){return LA(i,t,e)}function LA(i,t,e=me){const{immediate:s,deep:n,flush:r,once:o}=e,a=Ls({},e),c=t&&s||!t&&r!=="post";let h;if(fu){if(r==="sync"){const g=QC();h=g.__watcherHandles||(g.__watcherHandles=[])}else if(!c){const g=()=>{};return g.stop=Vn,g.resume=Vn,g.pause=Vn,g}}const u=ws;a.call=(g,_,v)=>zn(g,u,_,v);let f=!1;r==="post"?a.scheduler=g=>{ai(g,u&&u.suspense)}:r!=="sync"&&(f=!0,a.scheduler=(g,_)=>{_?g():uv(g)}),a.augmentJob=g=>{t&&(g.flags|=4),f&&(g.flags|=2,u&&(g.id=u.uid,g.i=u))};const p=uC(i,t,a);return fu&&(h?h.push(p):c&&p()),p}function JC(i,t,e){const s=this.proxy,n=Ke(i)?i.includes(".")?MA(s,i):()=>s[i]:i.bind(s,s);let r;Mt(t)?r=t:(r=t.handler,e=t);const o=zd(this),a=LA(n,r.bind(s),e);return o(),a}function MA(i,t){const e=t.split(".");return()=>{let s=i;for(let n=0;n<e.length&&s;n++)s=s[e[n]];return s}}const ZC=(i,t)=>t==="modelValue"||t==="model-value"?i.modelModifiers:i[`${t}Modifiers`]||i[`${Wi(t)}Modifiers`]||i[`${Sl(t)}Modifiers`];function tT(i,t,...e){if(i.isUnmounted)return;const s=i.vnode.props||me;let n=e;const r=t.startsWith("update:"),o=r&&ZC(s,t.slice(7));o&&(o.trim&&(n=e.map(u=>Ke(u)?u.trim():u)),o.number&&(n=e.map(_m)));let a,c=s[a=Jg(t)]||s[a=Jg(Wi(t))];!c&&r&&(c=s[a=Jg(Sl(t))]),c&&zn(c,i,6,n);const h=s[a+"Once"];if(h){if(!i.emitted)i.emitted={};else if(i.emitted[a])return;i.emitted[a]=!0,zn(h,i,6,n)}}function DA(i,t,e=!1){const s=t.emitsCache,n=s.get(i);if(n!==void 0)return n;const r=i.emits;let o={},a=!1;if(!Mt(i)){const c=h=>{const u=DA(h,t,!0);u&&(a=!0,Ls(o,u))};!e&&t.mixins.length&&t.mixins.forEach(c),i.extends&&c(i.extends),i.mixins&&i.mixins.forEach(c)}return!r&&!a?(be(i)&&s.set(i,null),null):(At(r)?r.forEach(c=>o[c]=null):Ls(o,r),be(i)&&s.set(i,o),o)}function lg(i,t){return!i||!Qp(t)?!1:(t=t.slice(2).replace(/Once$/,""),se(i,t[0].toLowerCase()+t.slice(1))||se(i,Sl(t))||se(i,t))}function Ty(i){const{type:t,vnode:e,proxy:s,withProxy:n,propsOptions:[r],slots:o,attrs:a,emit:c,render:h,renderCache:u,props:f,data:p,setupState:g,ctx:_,inheritAttrs:v}=i,x=mp(i);let S,C;try{if(e.shapeFlag&4){const R=n||s,L=R;S=Hn(h.call(L,R,u,f,g,p,_)),C=a}else{const R=t;S=Hn(R.length>1?R(f,{attrs:a,slots:o,emit:c}):R(f,null)),C=t.props?a:eT(a)}}catch(R){ru.length=0,rg(R,i,1),S=Te(Ho)}let T=S;if(C&&v!==!1){const R=Object.keys(C),{shapeFlag:L}=T;R.length&&L&7&&(r&&R.some(Zb)&&(C=sT(C,r)),T=mh(T,C,!1,!0))}return e.dirs&&(T=mh(T,null,!1,!0),T.dirs=T.dirs?T.dirs.concat(e.dirs):e.dirs),e.transition&&dv(T,e.transition),S=T,mp(x),S}const eT=i=>{let t;for(const e in i)(e==="class"||e==="style"||Qp(e))&&((t||(t={}))[e]=i[e]);return t},sT=(i,t)=>{const e={};for(const s in i)(!Zb(s)||!(s.slice(9)in t))&&(e[s]=i[s]);return e};function iT(i,t,e){const{props:s,children:n,component:r}=i,{props:o,children:a,patchFlag:c}=t,h=r.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&c>=0){if(c&1024)return!0;if(c&16)return s?Py(s,o,h):!!o;if(c&8){const u=t.dynamicProps;for(let f=0;f<u.length;f++){const p=u[f];if(o[p]!==s[p]&&!lg(h,p))return!0}}}else return(n||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?Py(s,o,h):!0:!!o;return!1}function Py(i,t,e){const s=Object.keys(t);if(s.length!==Object.keys(i).length)return!0;for(let n=0;n<s.length;n++){const r=s[n];if(t[r]!==i[r]&&!lg(e,r))return!0}return!1}function nT({vnode:i,parent:t},e){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===i&&(s.el=i.el),s===i)(i=t.vnode).el=e,t=t.parent;else break}}const OA=i=>i.__isSuspense;function rT(i,t){t&&t.pendingBranch?At(i)?t.effects.push(...i):t.effects.push(i):pC(i)}const We=Symbol.for("v-fgt"),cg=Symbol.for("v-txt"),Ho=Symbol.for("v-cmt"),If=Symbol.for("v-stc"),ru=[];let xi=null;function wt(i=!1){ru.push(xi=i?null:[])}function oT(){ru.pop(),xi=ru[ru.length-1]||null}let du=1;function Ry(i,t=!1){du+=i,i<0&&xi&&t&&(xi.hasOnce=!0)}function FA(i){return i.dynamicChildren=du>0?xi||sc:null,oT(),du>0&&xi&&xi.push(i),i}function xt(i,t,e,s,n,r){return FA(M(i,t,e,s,n,r,!0))}function aT(i,t,e,s,n){return FA(Te(i,t,e,s,n,!0))}function _p(i){return i?i.__v_isVNode===!0:!1}function Rh(i,t){return i.type===t.type&&i.key===t.key}const NA=({key:i})=>i??null,Lf=({ref:i,ref_key:t,ref_for:e})=>(typeof i=="number"&&(i=""+i),i!=null?Ke(i)||Me(i)||Mt(i)?{i:si,r:i,k:t,f:!!e}:i:null);function M(i,t=null,e=null,s=0,n=null,r=i===We?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:i,props:t,key:t&&NA(t),ref:t&&Lf(t),scopeId:pA,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:si};return a?(mv(c,e),r&128&&i.normalize(c)):e&&(c.shapeFlag|=Ke(e)?8:16),du>0&&!o&&xi&&(c.patchFlag>0||r&6)&&c.patchFlag!==32&&xi.push(c),c}const Te=lT;function lT(i,t=null,e=null,s=0,n=null,r=!1){if((!i||i===RC)&&(i=Ho),_p(i)){const a=mh(i,t,!0);return e&&mv(a,e),du>0&&!r&&xi&&(a.shapeFlag&6?xi[xi.indexOf(i)]=a:xi.push(a)),a.patchFlag=-2,a}if(_T(i)&&(i=i.__vccOpts),t){t=cT(t);let{class:a,style:c}=t;a&&!Ke(a)&&(t.class=_h(a)),be(c)&&(lv(c)&&!At(c)&&(c=Ls({},c)),t.style=sg(c))}const o=Ke(i)?1:OA(i)?128:mC(i)?64:be(i)?4:Mt(i)?2:0;return M(i,t,e,s,n,o,r,!0)}function cT(i){return i?lv(i)||SA(i)?Ls({},i):i:null}function mh(i,t,e=!1,s=!1){const{props:n,ref:r,patchFlag:o,children:a,transition:c}=i,h=t?hT(n||{},t):n,u={__v_isVNode:!0,__v_skip:!0,type:i.type,props:h,key:h&&NA(h),ref:t&&t.ref?e&&r?At(r)?r.concat(Lf(t)):[r,Lf(t)]:Lf(t):r,scopeId:i.scopeId,slotScopeIds:i.slotScopeIds,children:a,target:i.target,targetStart:i.targetStart,targetAnchor:i.targetAnchor,staticCount:i.staticCount,shapeFlag:i.shapeFlag,patchFlag:t&&i.type!==We?o===-1?16:o|16:o,dynamicProps:i.dynamicProps,dynamicChildren:i.dynamicChildren,appContext:i.appContext,dirs:i.dirs,transition:c,component:i.component,suspense:i.suspense,ssContent:i.ssContent&&mh(i.ssContent),ssFallback:i.ssFallback&&mh(i.ssFallback),el:i.el,anchor:i.anchor,ctx:i.ctx,ce:i.ce};return c&&s&&dv(u,c.clone(u)),u}function Le(i=" ",t=0){return Te(cg,null,i,t)}function yl(i,t){const e=Te(If,null,i);return e.staticCount=t,e}function hs(i="",t=!1){return t?(wt(),aT(Ho,null,i)):Te(Ho,null,i)}function Hn(i){return i==null||typeof i=="boolean"?Te(Ho):At(i)?Te(We,null,i.slice()):_p(i)?Qr(i):Te(cg,null,String(i))}function Qr(i){return i.el===null&&i.patchFlag!==-1||i.memo?i:mh(i)}function mv(i,t){let e=0;const{shapeFlag:s}=i;if(t==null)t=null;else if(At(t))e=16;else if(typeof t=="object")if(s&65){const n=t.default;n&&(n._c&&(n._d=!1),mv(i,n()),n._c&&(n._d=!0));return}else{e=32;const n=t._;!n&&!SA(t)?t._ctx=si:n===3&&si&&(si.slots._===1?t._=1:(t._=2,i.patchFlag|=1024))}else Mt(t)?(t={default:t,_ctx:si},e=32):(t=String(t),s&64?(e=16,t=[Le(t)]):e=8);i.children=t,i.shapeFlag|=e}function hT(...i){const t={};for(let e=0;e<i.length;e++){const s=i[e];for(const n in s)if(n==="class")t.class!==s.class&&(t.class=_h([t.class,s.class]));else if(n==="style")t.style=sg([t.style,s.style]);else if(Qp(n)){const r=t[n],o=s[n];o&&r!==o&&!(At(r)&&r.includes(o))&&(t[n]=r?[].concat(r,o):o)}else n!==""&&(t[n]=s[n])}return t}function vn(i,t,e,s=null){zn(i,t,7,[e,s])}const uT=wA();let dT=0;function fT(i,t,e){const s=i.type,n=(t?t.appContext:i.appContext)||uT,r={uid:dT++,vnode:i,type:s,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Vw(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:CA(s,n),emitsOptions:DA(s,n),emit:null,emitted:null,propsDefaults:me,inheritAttrs:s.inheritAttrs,ctx:me,data:me,props:me,attrs:me,slots:me,refs:me,setupState:me,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=tT.bind(null,r),i.ce&&i.ce(r),r}let ws=null,yp,Tm;{const i=eg(),t=(e,s)=>{let n;return(n=i[e])||(n=i[e]=[]),n.push(s),r=>{n.length>1?n.forEach(o=>o(r)):n[0](r)}};yp=t("__VUE_INSTANCE_SETTERS__",e=>ws=e),Tm=t("__VUE_SSR_SETTERS__",e=>fu=e)}const zd=i=>{const t=ws;return yp(i),i.scope.on(),()=>{i.scope.off(),yp(t)}},ky=()=>{ws&&ws.scope.off(),yp(null)};function $A(i){return i.vnode.shapeFlag&4}let fu=!1;function pT(i,t=!1,e=!1){t&&Tm(t);const{props:s,children:n}=i.vnode,r=$A(i);HC(i,s,r,t),zC(i,n,e||t);const o=r?gT(i,t):void 0;return t&&Tm(!1),o}function gT(i,t){const e=i.type;i.accessCache=Object.create(null),i.proxy=new Proxy(i.ctx,IC);const{setup:s}=e;if(s){$r();const n=i.setupContext=s.length>1?bT(i):null,r=zd(i),o=Ud(s,i,0,[i.props,n]),a=Dw(o);if(Br(),r(),(a||i.sp)&&!iu(i)&&gA(i),a){if(o.then(ky,ky),t)return o.then(c=>{Iy(i,c)}).catch(c=>{rg(c,i,0)});i.asyncDep=o}else Iy(i,o)}else BA(i)}function Iy(i,t,e){Mt(t)?i.type.__ssrInlineRender?i.ssrRender=t:i.render=t:be(t)&&(i.setupState=lA(t)),BA(i)}function BA(i,t,e){const s=i.type;i.render||(i.render=s.render||Vn);{const n=zd(i);$r();try{LC(i)}finally{Br(),n()}}}const mT={get(i,t){return Is(i,"get",""),i[t]}};function bT(i){const t=e=>{i.exposed=e||{}};return{attrs:new Proxy(i.attrs,mT),slots:i.slots,emit:i.emit,expose:t}}function hg(i){return i.exposed?i.exposeProxy||(i.exposeProxy=new Proxy(lA(cv(i.exposed)),{get(t,e){if(e in t)return t[e];if(e in nu)return nu[e](i)},has(t,e){return e in t||e in nu}})):i.proxy}function vT(i,t=!0){return Mt(i)?i.displayName||i.name:i.name||t&&i.__name}function _T(i){return Mt(i)&&"__vccOpts"in i}const us=(i,t)=>cC(i,t,fu);function HA(i,t,e){const s=arguments.length;return s===2?be(t)&&!At(t)?_p(t)?Te(i,null,[t]):Te(i,t):Te(i,null,t):(s>3?e=Array.prototype.slice.call(arguments,2):s===3&&_p(e)&&(e=[e]),Te(i,t,e))}const yT="3.5.14";/**
* @vue/runtime-dom v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Pm;const Ly=typeof window<"u"&&window.trustedTypes;if(Ly)try{Pm=Ly.createPolicy("vue",{createHTML:i=>i})}catch{}const jA=Pm?i=>Pm.createHTML(i):i=>i,wT="http://www.w3.org/2000/svg",AT="http://www.w3.org/1998/Math/MathML",er=typeof document<"u"?document:null,My=er&&er.createElement("template"),ET={insert:(i,t,e)=>{t.insertBefore(i,e||null)},remove:i=>{const t=i.parentNode;t&&t.removeChild(i)},createElement:(i,t,e,s)=>{const n=t==="svg"?er.createElementNS(wT,i):t==="mathml"?er.createElementNS(AT,i):e?er.createElement(i,{is:e}):er.createElement(i);return i==="select"&&s&&s.multiple!=null&&n.setAttribute("multiple",s.multiple),n},createText:i=>er.createTextNode(i),createComment:i=>er.createComment(i),setText:(i,t)=>{i.nodeValue=t},setElementText:(i,t)=>{i.textContent=t},parentNode:i=>i.parentNode,nextSibling:i=>i.nextSibling,querySelector:i=>er.querySelector(i),setScopeId(i,t){i.setAttribute(t,"")},insertStaticContent(i,t,e,s,n,r){const o=e?e.previousSibling:t.lastChild;if(n&&(n===r||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),e),!(n===r||!(n=n.nextSibling)););else{My.innerHTML=jA(s==="svg"?`<svg>${i}</svg>`:s==="mathml"?`<math>${i}</math>`:i);const a=My.content;if(s==="svg"||s==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}t.insertBefore(a,e)}return[o?o.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}},ST=Symbol("_vtc");function xT(i,t,e){const s=i[ST];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?i.removeAttribute("class"):e?i.setAttribute("class",t):i.className=t}const wp=Symbol("_vod"),VA=Symbol("_vsh"),CT={beforeMount(i,{value:t},{transition:e}){i[wp]=i.style.display==="none"?"":i.style.display,e&&t?e.beforeEnter(i):kh(i,t)},mounted(i,{value:t},{transition:e}){e&&t&&e.enter(i)},updated(i,{value:t,oldValue:e},{transition:s}){!t!=!e&&(s?t?(s.beforeEnter(i),kh(i,!0),s.enter(i)):s.leave(i,()=>{kh(i,!1)}):kh(i,t))},beforeUnmount(i,{value:t}){kh(i,t)}};function kh(i,t){i.style.display=t?i[wp]:"none",i[VA]=!t}const TT=Symbol(""),PT=/(^|;)\s*display\s*:/;function RT(i,t,e){const s=i.style,n=Ke(e);let r=!1;if(e&&!n){if(t)if(Ke(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();e[a]==null&&Mf(s,a,"")}else for(const o in t)e[o]==null&&Mf(s,o,"");for(const o in e)o==="display"&&(r=!0),Mf(s,o,e[o])}else if(n){if(t!==e){const o=s[TT];o&&(e+=";"+o),s.cssText=e,r=PT.test(e)}}else t&&i.removeAttribute("style");wp in i&&(i[wp]=r?s.display:"",i[VA]&&(s.display="none"))}const Dy=/\s*!important$/;function Mf(i,t,e){if(At(e))e.forEach(s=>Mf(i,t,s));else if(e==null&&(e=""),t.startsWith("--"))i.setProperty(t,e);else{const s=kT(i,t);Dy.test(e)?i.setProperty(Sl(s),e.replace(Dy,""),"important"):i[s]=e}}const Oy=["Webkit","Moz","ms"],rm={};function kT(i,t){const e=rm[t];if(e)return e;let s=Wi(t);if(s!=="filter"&&s in i)return rm[t]=s;s=tg(s);for(let n=0;n<Oy.length;n++){const r=Oy[n]+s;if(r in i)return rm[t]=r}return t}const Fy="http://www.w3.org/1999/xlink";function Ny(i,t,e,s,n,r=M1(t)){s&&t.startsWith("xlink:")?e==null?i.removeAttributeNS(Fy,t.slice(6,t.length)):i.setAttributeNS(Fy,t,e):e==null||r&&!$w(e)?i.removeAttribute(t):i.setAttribute(t,r?"":Un(e)?String(e):e)}function $y(i,t,e,s,n){if(t==="innerHTML"||t==="textContent"){e!=null&&(i[t]=t==="innerHTML"?jA(e):e);return}const r=i.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?i.getAttribute("value")||"":i.value,c=e==null?i.type==="checkbox"?"on":"":String(e);(a!==c||!("_value"in i))&&(i.value=c),e==null&&i.removeAttribute(t),i._value=e;return}let o=!1;if(e===""||e==null){const a=typeof i[t];a==="boolean"?e=$w(e):e==null&&a==="string"?(e="",o=!0):a==="number"&&(e=0,o=!0)}try{i[t]=e}catch{}o&&i.removeAttribute(n||t)}function ua(i,t,e,s){i.addEventListener(t,e,s)}function IT(i,t,e,s){i.removeEventListener(t,e,s)}const By=Symbol("_vei");function LT(i,t,e,s,n=null){const r=i[By]||(i[By]={}),o=r[t];if(s&&o)o.value=s;else{const[a,c]=MT(t);if(s){const h=r[t]=FT(s,n);ua(i,a,h,c)}else o&&(IT(i,a,o,c),r[t]=void 0)}}const Hy=/(?:Once|Passive|Capture)$/;function MT(i){let t;if(Hy.test(i)){t={};let s;for(;s=i.match(Hy);)i=i.slice(0,i.length-s[0].length),t[s[0].toLowerCase()]=!0}return[i[2]===":"?i.slice(3):Sl(i.slice(2)),t]}let om=0;const DT=Promise.resolve(),OT=()=>om||(DT.then(()=>om=0),om=Date.now());function FT(i,t){const e=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=e.attached)return;zn(NT(s,e.value),t,5,[s])};return e.value=i,e.attached=OT(),e}function NT(i,t){if(At(t)){const e=i.stopImmediatePropagation;return i.stopImmediatePropagation=()=>{e.call(i),i._stopped=!0},t.map(s=>n=>!n._stopped&&s&&s(n))}else return t}const jy=i=>i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&i.charCodeAt(2)>96&&i.charCodeAt(2)<123,$T=(i,t,e,s,n,r)=>{const o=n==="svg";t==="class"?xT(i,s,o):t==="style"?RT(i,e,s):Qp(t)?Zb(t)||LT(i,t,e,s,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):BT(i,t,s,o))?($y(i,t,s),!i.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Ny(i,t,s,o,r,t!=="value")):i._isVueCE&&(/[A-Z]/.test(t)||!Ke(s))?$y(i,Wi(t),s,r,t):(t==="true-value"?i._trueValue=s:t==="false-value"&&(i._falseValue=s),Ny(i,t,s,o))};function BT(i,t,e,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in i&&jy(t)&&Mt(e));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&i.tagName==="INPUT"||t==="type"&&i.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const n=i.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return jy(t)&&Ke(e)?!1:t in i}const Ap=i=>{const t=i.props["onUpdate:modelValue"]||!1;return At(t)?e=>Rf(t,e):t};function HT(i){i.target.composing=!0}function Vy(i){const t=i.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const oc=Symbol("_assign"),jT={created(i,{modifiers:{lazy:t,trim:e,number:s}},n){i[oc]=Ap(n);const r=s||n.props&&n.props.type==="number";ua(i,t?"change":"input",o=>{if(o.target.composing)return;let a=i.value;e&&(a=a.trim()),r&&(a=_m(a)),i[oc](a)}),e&&ua(i,"change",()=>{i.value=i.value.trim()}),t||(ua(i,"compositionstart",HT),ua(i,"compositionend",Vy),ua(i,"change",Vy))},mounted(i,{value:t}){i.value=t??""},beforeUpdate(i,{value:t,oldValue:e,modifiers:{lazy:s,trim:n,number:r}},o){if(i[oc]=Ap(o),i.composing)return;const a=(r||i.type==="number")&&!/^0\d/.test(i.value)?_m(i.value):i.value,c=t??"";a!==c&&(document.activeElement===i&&i.type!=="range"&&(s&&t===e||n&&i.value.trim()===c)||(i.value=c))}},oa={deep:!0,created(i,t,e){i[oc]=Ap(e),ua(i,"change",()=>{const s=i._modelValue,n=VT(i),r=i.checked,o=i[oc];if(At(s)){const a=Bw(s,n),c=a!==-1;if(r&&!c)o(s.concat(n));else if(!r&&c){const h=[...s];h.splice(a,1),o(h)}}else if(Jp(s)){const a=new Set(s);r?a.add(n):a.delete(n),o(a)}else o(UA(i,r))})},mounted:Uy,beforeUpdate(i,t,e){i[oc]=Ap(e),Uy(i,t,e)}};function Uy(i,{value:t,oldValue:e},s){i._modelValue=t;let n;if(At(t))n=Bw(t,s.props.value)>-1;else if(Jp(t))n=t.has(s.props.value);else{if(t===e)return;n=ig(t,UA(i,!0))}i.checked!==n&&(i.checked=n)}function VT(i){return"_value"in i?i._value:i.value}function UA(i,t){const e=t?"_trueValue":"_falseValue";return e in i?i[e]:t}const UT=Ls({patchProp:$T},ET);let zy;function zT(){return zy||(zy=qC(UT))}const WT=(...i)=>{const t=zT().createApp(...i),{mount:e}=t;return t.mount=s=>{const n=GT(s);if(!n)return;const r=t._component;!Mt(r)&&!r.render&&!r.template&&(r.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const o=e(n,!1,qT(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},t};function qT(i){if(i instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&i instanceof MathMLElement)return"mathml"}function GT(i){return Ke(i)?document.querySelector(i):i}/*!
 * pinia v3.0.2
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let zA;const ug=i=>zA=i,WA=Symbol();function Rm(i){return i&&typeof i=="object"&&Object.prototype.toString.call(i)==="[object Object]"&&typeof i.toJSON!="function"}var ou;(function(i){i.direct="direct",i.patchObject="patch object",i.patchFunction="patch function"})(ou||(ou={}));function XT(){const i=Uw(!0),t=i.run(()=>ae({}));let e=[],s=[];const n=cv({install(r){ug(n),n._a=r,r.provide(WA,n),r.config.globalProperties.$pinia=n,s.forEach(o=>e.push(o)),s=[]},use(r){return this._a?e.push(r):s.push(r),this},_p:e,_a:null,_e:i,_s:new Map,state:t});return n}const qA=()=>{};function Wy(i,t,e,s=qA){i.push(t);const n=()=>{const r=i.indexOf(t);r>-1&&(i.splice(r,1),s())};return!e&&zw()&&O1(n),n}function Vl(i,...t){i.slice().forEach(e=>{e(...t)})}const KT=i=>i(),qy=Symbol(),am=Symbol();function km(i,t){i instanceof Map&&t instanceof Map?t.forEach((e,s)=>i.set(s,e)):i instanceof Set&&t instanceof Set&&t.forEach(i.add,i);for(const e in t){if(!t.hasOwnProperty(e))continue;const s=t[e],n=i[e];Rm(n)&&Rm(s)&&i.hasOwnProperty(e)&&!Me(s)&&!Or(s)?i[e]=km(n,s):i[e]=s}return i}const YT=Symbol();function QT(i){return!Rm(i)||!Object.prototype.hasOwnProperty.call(i,YT)}const{assign:Xr}=Object;function JT(i){return!!(Me(i)&&i.effect)}function ZT(i,t,e,s){const{state:n,actions:r,getters:o}=t,a=e.state.value[i];let c;function h(){a||(e.state.value[i]=n?n():{});const u=nC(e.state.value[i]);return Xr(u,r,Object.keys(o||{}).reduce((f,p)=>(f[p]=cv(us(()=>{ug(e);const g=e._s.get(i);return o[p].call(g,g)})),f),{}))}return c=GA(i,h,t,e,s,!0),c}function GA(i,t,e={},s,n,r){let o;const a=Xr({actions:{}},e),c={deep:!0};let h,u,f=[],p=[],g;const _=s.state.value[i];!r&&!_&&(s.state.value[i]={}),ae({});let v;function x(D){let B;h=u=!1,typeof D=="function"?(D(s.state.value[i]),B={type:ou.patchFunction,storeId:i,events:g}):(km(s.state.value[i],D),B={type:ou.patchObject,payload:D,storeId:i,events:g});const K=v=Symbol();hv().then(()=>{v===K&&(h=!0)}),u=!0,Vl(f,B,s.state.value[i])}const S=r?function(){const{state:B}=e,K=B?B():{};this.$patch(Q=>{Xr(Q,K)})}:qA;function C(){o.stop(),f=[],p=[],s._s.delete(i)}const T=(D,B="")=>{if(qy in D)return D[am]=B,D;const K=function(){ug(s);const Q=Array.from(arguments),bt=[],yt=[];function St(X){bt.push(X)}function Ut(X){yt.push(X)}Vl(p,{args:Q,name:K[am],store:L,after:St,onError:Ut});let J;try{J=D.apply(this&&this.$id===i?this:L,Q)}catch(X){throw Vl(yt,X),X}return J instanceof Promise?J.then(X=>(Vl(bt,X),X)).catch(X=>(Vl(yt,X),Promise.reject(X))):(Vl(bt,J),J)};return K[qy]=!0,K[am]=B,K},R={_p:s,$id:i,$onAction:Wy.bind(null,p),$patch:x,$reset:S,$subscribe(D,B={}){const K=Wy(f,D,B.detached,()=>Q()),Q=o.run(()=>rc(()=>s.state.value[i],bt=>{(B.flush==="sync"?u:h)&&D({storeId:i,type:ou.direct,events:g},bt)},Xr({},c,B)));return K},$dispose:C},L=Vd(R);s._s.set(i,L);const I=(s._a&&s._a.runWithContext||KT)(()=>s._e.run(()=>(o=Uw()).run(()=>t({action:T}))));for(const D in I){const B=I[D];if(Me(B)&&!JT(B)||Or(B))r||(_&&QT(B)&&(Me(B)?B.value=_[D]:km(B,_[D])),s.state.value[i][D]=B);else if(typeof B=="function"){const K=T(B,D);I[D]=K,a.actions[D]=B}}return Xr(L,I),Xr(Xt(L),I),Object.defineProperty(L,"$state",{get:()=>s.state.value[i],set:D=>{x(B=>{Xr(B,D)})}}),s._p.forEach(D=>{Xr(L,o.run(()=>D({store:L,app:s._a,pinia:s,options:a})))}),_&&r&&e.hydrate&&e.hydrate(L.$state,_),h=!0,u=!0,L}/*! #__NO_SIDE_EFFECTS__ */function tP(i,t,e){let s;const n=typeof t=="function";s=n?e:t;function r(o,a){const c=BC();return o=o||(c?hn(WA,null):null),o&&ug(o),o=zA,o._s.has(i)||(n?GA(i,t,s,o):ZT(i,s,o)),o._s.get(i)}return r.$id=i,r}function eP(i){const t=Xt(i),e={};for(const s in t){const n=t[s];n.effect?e[s]=us({get:()=>i[s],set(r){i[s]=r}}):(Me(n)||Or(n))&&(e[s]=aC(i,s))}return e}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const zl=typeof document<"u";function XA(i){return typeof i=="object"||"displayName"in i||"props"in i||"__vccOpts"in i}function sP(i){return i.__esModule||i[Symbol.toStringTag]==="Module"||i.default&&XA(i.default)}const ee=Object.assign;function lm(i,t){const e={};for(const s in t){const n=t[s];e[s]=un(n)?n.map(i):i(n)}return e}const au=()=>{},un=Array.isArray,KA=/#/g,iP=/&/g,nP=/\//g,rP=/=/g,oP=/\?/g,YA=/\+/g,aP=/%5B/g,lP=/%5D/g,QA=/%5E/g,cP=/%60/g,JA=/%7B/g,hP=/%7C/g,ZA=/%7D/g,uP=/%20/g;function bv(i){return encodeURI(""+i).replace(hP,"|").replace(aP,"[").replace(lP,"]")}function dP(i){return bv(i).replace(JA,"{").replace(ZA,"}").replace(QA,"^")}function Im(i){return bv(i).replace(YA,"%2B").replace(uP,"+").replace(KA,"%23").replace(iP,"%26").replace(cP,"`").replace(JA,"{").replace(ZA,"}").replace(QA,"^")}function fP(i){return Im(i).replace(rP,"%3D")}function pP(i){return bv(i).replace(KA,"%23").replace(oP,"%3F")}function gP(i){return i==null?"":pP(i).replace(nP,"%2F")}function pu(i){try{return decodeURIComponent(""+i)}catch{}return""+i}const mP=/\/$/,bP=i=>i.replace(mP,"");function cm(i,t,e="/"){let s,n={},r="",o="";const a=t.indexOf("#");let c=t.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(s=t.slice(0,c),r=t.slice(c+1,a>-1?a:t.length),n=i(r)),a>-1&&(s=s||t.slice(0,a),o=t.slice(a,t.length)),s=wP(s??t,e),{fullPath:s+(r&&"?")+r+o,path:s,query:n,hash:pu(o)}}function vP(i,t){const e=t.query?i(t.query):"";return t.path+(e&&"?")+e+(t.hash||"")}function Gy(i,t){return!t||!i.toLowerCase().startsWith(t.toLowerCase())?i:i.slice(t.length)||"/"}function _P(i,t,e){const s=t.matched.length-1,n=e.matched.length-1;return s>-1&&s===n&&bh(t.matched[s],e.matched[n])&&t0(t.params,e.params)&&i(t.query)===i(e.query)&&t.hash===e.hash}function bh(i,t){return(i.aliasOf||i)===(t.aliasOf||t)}function t0(i,t){if(Object.keys(i).length!==Object.keys(t).length)return!1;for(const e in i)if(!yP(i[e],t[e]))return!1;return!0}function yP(i,t){return un(i)?Xy(i,t):un(t)?Xy(t,i):i===t}function Xy(i,t){return un(t)?i.length===t.length&&i.every((e,s)=>e===t[s]):i.length===1&&i[0]===t}function wP(i,t){if(i.startsWith("/"))return i;if(!i)return t;const e=t.split("/"),s=i.split("/"),n=s[s.length-1];(n===".."||n===".")&&s.push("");let r=e.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")r>1&&r--;else break;return e.slice(0,r).join("/")+"/"+s.slice(o).join("/")}const Gr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var gu;(function(i){i.pop="pop",i.push="push"})(gu||(gu={}));var lu;(function(i){i.back="back",i.forward="forward",i.unknown=""})(lu||(lu={}));function AP(i){if(!i)if(zl){const t=document.querySelector("base");i=t&&t.getAttribute("href")||"/",i=i.replace(/^\w+:\/\/[^\/]+/,"")}else i="/";return i[0]!=="/"&&i[0]!=="#"&&(i="/"+i),bP(i)}const EP=/^[^#]+#/;function SP(i,t){return i.replace(EP,"#")+t}function xP(i,t){const e=document.documentElement.getBoundingClientRect(),s=i.getBoundingClientRect();return{behavior:t.behavior,left:s.left-e.left-(t.left||0),top:s.top-e.top-(t.top||0)}}const dg=()=>({left:window.scrollX,top:window.scrollY});function CP(i){let t;if("el"in i){const e=i.el,s=typeof e=="string"&&e.startsWith("#"),n=typeof e=="string"?s?document.getElementById(e.slice(1)):document.querySelector(e):e;if(!n)return;t=xP(n,i)}else t=i;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Ky(i,t){return(history.state?history.state.position-t:-1)+i}const Lm=new Map;function TP(i,t){Lm.set(i,t)}function PP(i){const t=Lm.get(i);return Lm.delete(i),t}let RP=()=>location.protocol+"//"+location.host;function e0(i,t){const{pathname:e,search:s,hash:n}=t,r=i.indexOf("#");if(r>-1){let a=n.includes(i.slice(r))?i.slice(r).length:1,c=n.slice(a);return c[0]!=="/"&&(c="/"+c),Gy(c,"")}return Gy(e,i)+s+n}function kP(i,t,e,s){let n=[],r=[],o=null;const a=({state:p})=>{const g=e0(i,location),_=e.value,v=t.value;let x=0;if(p){if(e.value=g,t.value=p,o&&o===_){o=null;return}x=v?p.position-v.position:0}else s(g);n.forEach(S=>{S(e.value,_,{delta:x,type:gu.pop,direction:x?x>0?lu.forward:lu.back:lu.unknown})})};function c(){o=e.value}function h(p){n.push(p);const g=()=>{const _=n.indexOf(p);_>-1&&n.splice(_,1)};return r.push(g),g}function u(){const{history:p}=window;p.state&&p.replaceState(ee({},p.state,{scroll:dg()}),"")}function f(){for(const p of r)p();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:c,listen:h,destroy:f}}function Yy(i,t,e,s=!1,n=!1){return{back:i,current:t,forward:e,replaced:s,position:window.history.length,scroll:n?dg():null}}function IP(i){const{history:t,location:e}=window,s={value:e0(i,e)},n={value:t.state};n.value||r(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(c,h,u){const f=i.indexOf("#"),p=f>-1?(e.host&&document.querySelector("base")?i:i.slice(f))+c:RP()+i+c;try{t[u?"replaceState":"pushState"](h,"",p),n.value=h}catch(g){console.error(g),e[u?"replace":"assign"](p)}}function o(c,h){const u=ee({},t.state,Yy(n.value.back,c,n.value.forward,!0),h,{position:n.value.position});r(c,u,!0),s.value=c}function a(c,h){const u=ee({},n.value,t.state,{forward:c,scroll:dg()});r(u.current,u,!0);const f=ee({},Yy(s.value,c,null),{position:u.position+1},h);r(c,f,!1),s.value=c}return{location:s,state:n,push:a,replace:o}}function LP(i){i=AP(i);const t=IP(i),e=kP(i,t.state,t.location,t.replace);function s(r,o=!0){o||e.pauseListeners(),history.go(r)}const n=ee({location:"",base:i,go:s,createHref:SP.bind(null,i)},t,e);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>t.state.value}),n}function MP(i){return i=location.host?i||location.pathname+location.search:"",i.includes("#")||(i+="#"),LP(i)}function DP(i){return typeof i=="string"||i&&typeof i=="object"}function s0(i){return typeof i=="string"||typeof i=="symbol"}const i0=Symbol("");var Qy;(function(i){i[i.aborted=4]="aborted",i[i.cancelled=8]="cancelled",i[i.duplicated=16]="duplicated"})(Qy||(Qy={}));function vh(i,t){return ee(new Error,{type:i,[i0]:!0},t)}function Yn(i,t){return i instanceof Error&&i0 in i&&(t==null||!!(i.type&t))}const Jy="[^/]+?",OP={sensitive:!1,strict:!1,start:!0,end:!0},FP=/[.+*?^${}()[\]/\\]/g;function NP(i,t){const e=ee({},OP,t),s=[];let n=e.start?"^":"";const r=[];for(const h of i){const u=h.length?[]:[90];e.strict&&!h.length&&(n+="/");for(let f=0;f<h.length;f++){const p=h[f];let g=40+(e.sensitive?.25:0);if(p.type===0)f||(n+="/"),n+=p.value.replace(FP,"\\$&"),g+=40;else if(p.type===1){const{value:_,repeatable:v,optional:x,regexp:S}=p;r.push({name:_,repeatable:v,optional:x});const C=S||Jy;if(C!==Jy){g+=10;try{new RegExp(`(${C})`)}catch(R){throw new Error(`Invalid custom RegExp for param "${_}" (${C}): `+R.message)}}let T=v?`((?:${C})(?:/(?:${C}))*)`:`(${C})`;f||(T=x&&h.length<2?`(?:/${T})`:"/"+T),x&&(T+="?"),n+=T,g+=20,x&&(g+=-8),v&&(g+=-20),C===".*"&&(g+=-50)}u.push(g)}s.push(u)}if(e.strict&&e.end){const h=s.length-1;s[h][s[h].length-1]+=.7000000000000001}e.strict||(n+="/?"),e.end?n+="$":e.strict&&!n.endsWith("/")&&(n+="(?:/|$)");const o=new RegExp(n,e.sensitive?"":"i");function a(h){const u=h.match(o),f={};if(!u)return null;for(let p=1;p<u.length;p++){const g=u[p]||"",_=r[p-1];f[_.name]=g&&_.repeatable?g.split("/"):g}return f}function c(h){let u="",f=!1;for(const p of i){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const g of p)if(g.type===0)u+=g.value;else if(g.type===1){const{value:_,repeatable:v,optional:x}=g,S=_ in h?h[_]:"";if(un(S)&&!v)throw new Error(`Provided param "${_}" is an array but it is not repeatable (* or + modifiers)`);const C=un(S)?S.join("/"):S;if(!C)if(x)p.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${_}"`);u+=C}}return u||"/"}return{re:o,score:s,keys:r,parse:a,stringify:c}}function $P(i,t){let e=0;for(;e<i.length&&e<t.length;){const s=t[e]-i[e];if(s)return s;e++}return i.length<t.length?i.length===1&&i[0]===80?-1:1:i.length>t.length?t.length===1&&t[0]===80?1:-1:0}function n0(i,t){let e=0;const s=i.score,n=t.score;for(;e<s.length&&e<n.length;){const r=$P(s[e],n[e]);if(r)return r;e++}if(Math.abs(n.length-s.length)===1){if(Zy(s))return 1;if(Zy(n))return-1}return n.length-s.length}function Zy(i){const t=i[i.length-1];return i.length>0&&t[t.length-1]<0}const BP={type:0,value:""},HP=/[a-zA-Z0-9_]/;function jP(i){if(!i)return[[]];if(i==="/")return[[BP]];if(!i.startsWith("/"))throw new Error(`Invalid path "${i}"`);function t(g){throw new Error(`ERR (${e})/"${h}": ${g}`)}let e=0,s=e;const n=[];let r;function o(){r&&n.push(r),r=[]}let a=0,c,h="",u="";function f(){h&&(e===0?r.push({type:0,value:h}):e===1||e===2||e===3?(r.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:h,regexp:u,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),h="")}function p(){h+=c}for(;a<i.length;){if(c=i[a++],c==="\\"&&e!==2){s=e,e=4;continue}switch(e){case 0:c==="/"?(h&&f(),o()):c===":"?(f(),e=1):p();break;case 4:p(),e=s;break;case 1:c==="("?e=2:HP.test(c)?p():(f(),e=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+c:e=3:u+=c;break;case 3:f(),e=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,u="";break;default:t("Unknown state");break}}return e===2&&t(`Unfinished custom RegExp for param "${h}"`),f(),o(),n}function VP(i,t,e){const s=NP(jP(i.path),e),n=ee(s,{record:i,parent:t,children:[],alias:[]});return t&&!n.record.aliasOf==!t.record.aliasOf&&t.children.push(n),n}function UP(i,t){const e=[],s=new Map;t=iw({strict:!1,end:!0,sensitive:!1},t);function n(f){return s.get(f)}function r(f,p,g){const _=!g,v=ew(f);v.aliasOf=g&&g.record;const x=iw(t,f),S=[v];if("alias"in f){const R=typeof f.alias=="string"?[f.alias]:f.alias;for(const L of R)S.push(ew(ee({},v,{components:g?g.record.components:v.components,path:L,aliasOf:g?g.record:v})))}let C,T;for(const R of S){const{path:L}=R;if(p&&L[0]!=="/"){const O=p.record.path,I=O[O.length-1]==="/"?"":"/";R.path=p.record.path+(L&&I+L)}if(C=VP(R,p,x),g?g.alias.push(C):(T=T||C,T!==C&&T.alias.push(C),_&&f.name&&!sw(C)&&o(f.name)),r0(C)&&c(C),v.children){const O=v.children;for(let I=0;I<O.length;I++)r(O[I],C,g&&g.children[I])}g=g||C}return T?()=>{o(T)}:au}function o(f){if(s0(f)){const p=s.get(f);p&&(s.delete(f),e.splice(e.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=e.indexOf(f);p>-1&&(e.splice(p,1),f.record.name&&s.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function a(){return e}function c(f){const p=qP(f,e);e.splice(p,0,f),f.record.name&&!sw(f)&&s.set(f.record.name,f)}function h(f,p){let g,_={},v,x;if("name"in f&&f.name){if(g=s.get(f.name),!g)throw vh(1,{location:f});x=g.record.name,_=ee(tw(p.params,g.keys.filter(T=>!T.optional).concat(g.parent?g.parent.keys.filter(T=>T.optional):[]).map(T=>T.name)),f.params&&tw(f.params,g.keys.map(T=>T.name))),v=g.stringify(_)}else if(f.path!=null)v=f.path,g=e.find(T=>T.re.test(v)),g&&(_=g.parse(v),x=g.record.name);else{if(g=p.name?s.get(p.name):e.find(T=>T.re.test(p.path)),!g)throw vh(1,{location:f,currentLocation:p});x=g.record.name,_=ee({},p.params,f.params),v=g.stringify(_)}const S=[];let C=g;for(;C;)S.unshift(C.record),C=C.parent;return{name:x,path:v,params:_,matched:S,meta:WP(S)}}i.forEach(f=>r(f));function u(){e.length=0,s.clear()}return{addRoute:r,resolve:h,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:n}}function tw(i,t){const e={};for(const s of t)s in i&&(e[s]=i[s]);return e}function ew(i){const t={path:i.path,redirect:i.redirect,name:i.name,meta:i.meta||{},aliasOf:i.aliasOf,beforeEnter:i.beforeEnter,props:zP(i),children:i.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in i?i.components||null:i.component&&{default:i.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function zP(i){const t={},e=i.props||!1;if("component"in i)t.default=e;else for(const s in i.components)t[s]=typeof e=="object"?e[s]:e;return t}function sw(i){for(;i;){if(i.record.aliasOf)return!0;i=i.parent}return!1}function WP(i){return i.reduce((t,e)=>ee(t,e.meta),{})}function iw(i,t){const e={};for(const s in i)e[s]=s in t?t[s]:i[s];return e}function qP(i,t){let e=0,s=t.length;for(;e!==s;){const r=e+s>>1;n0(i,t[r])<0?s=r:e=r+1}const n=GP(i);return n&&(s=t.lastIndexOf(n,s-1)),s}function GP(i){let t=i;for(;t=t.parent;)if(r0(t)&&n0(i,t)===0)return t}function r0({record:i}){return!!(i.name||i.components&&Object.keys(i.components).length||i.redirect)}function XP(i){const t={};if(i===""||i==="?")return t;const s=(i[0]==="?"?i.slice(1):i).split("&");for(let n=0;n<s.length;++n){const r=s[n].replace(YA," "),o=r.indexOf("="),a=pu(o<0?r:r.slice(0,o)),c=o<0?null:pu(r.slice(o+1));if(a in t){let h=t[a];un(h)||(h=t[a]=[h]),h.push(c)}else t[a]=c}return t}function nw(i){let t="";for(let e in i){const s=i[e];if(e=fP(e),s==null){s!==void 0&&(t+=(t.length?"&":"")+e);continue}(un(s)?s.map(r=>r&&Im(r)):[s&&Im(s)]).forEach(r=>{r!==void 0&&(t+=(t.length?"&":"")+e,r!=null&&(t+="="+r))})}return t}function KP(i){const t={};for(const e in i){const s=i[e];s!==void 0&&(t[e]=un(s)?s.map(n=>n==null?null:""+n):s==null?s:""+s)}return t}const YP=Symbol(""),rw=Symbol(""),vv=Symbol(""),_v=Symbol(""),Mm=Symbol("");function Ih(){let i=[];function t(s){return i.push(s),()=>{const n=i.indexOf(s);n>-1&&i.splice(n,1)}}function e(){i=[]}return{add:t,list:()=>i.slice(),reset:e}}function Jr(i,t,e,s,n,r=o=>o()){const o=s&&(s.enterCallbacks[n]=s.enterCallbacks[n]||[]);return()=>new Promise((a,c)=>{const h=p=>{p===!1?c(vh(4,{from:e,to:t})):p instanceof Error?c(p):DP(p)?c(vh(2,{from:t,to:p})):(o&&s.enterCallbacks[n]===o&&typeof p=="function"&&o.push(p),a())},u=r(()=>i.call(s&&s.instances[n],t,e,h));let f=Promise.resolve(u);i.length<3&&(f=f.then(h)),f.catch(p=>c(p))})}function hm(i,t,e,s,n=r=>r()){const r=[];for(const o of i)for(const a in o.components){let c=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(XA(c)){const u=(c.__vccOpts||c)[t];u&&r.push(Jr(u,e,s,o,a,n))}else{let h=c();r.push(()=>h.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const f=sP(u)?u.default:u;o.mods[a]=u,o.components[a]=f;const g=(f.__vccOpts||f)[t];return g&&Jr(g,e,s,o,a,n)()}))}}return r}function ow(i){const t=hn(vv),e=hn(_v),s=us(()=>{const c=je(i.to);return t.resolve(c)}),n=us(()=>{const{matched:c}=s.value,{length:h}=c,u=c[h-1],f=e.matched;if(!u||!f.length)return-1;const p=f.findIndex(bh.bind(null,u));if(p>-1)return p;const g=aw(c[h-2]);return h>1&&aw(u)===g&&f[f.length-1].path!==g?f.findIndex(bh.bind(null,c[h-2])):p}),r=us(()=>n.value>-1&&tR(e.params,s.value.params)),o=us(()=>n.value>-1&&n.value===e.matched.length-1&&t0(e.params,s.value.params));function a(c={}){if(ZP(c)){const h=t[je(i.replace)?"replace":"push"](je(i.to)).catch(au);return i.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>h),h}return Promise.resolve()}return{route:s,href:us(()=>s.value.href),isActive:r,isExactActive:o,navigate:a}}function QP(i){return i.length===1?i[0]:i}const JP=Vr({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:ow,setup(i,{slots:t}){const e=Vd(ow(i)),{options:s}=hn(vv),n=us(()=>({[lw(i.activeClass,s.linkActiveClass,"router-link-active")]:e.isActive,[lw(i.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:e.isExactActive}));return()=>{const r=t.default&&QP(t.default(e));return i.custom?r:HA("a",{"aria-current":e.isExactActive?i.ariaCurrentValue:null,href:e.href,onClick:e.navigate,class:n.value},r)}}}),Df=JP;function ZP(i){if(!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)&&!i.defaultPrevented&&!(i.button!==void 0&&i.button!==0)){if(i.currentTarget&&i.currentTarget.getAttribute){const t=i.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return i.preventDefault&&i.preventDefault(),!0}}function tR(i,t){for(const e in t){const s=t[e],n=i[e];if(typeof s=="string"){if(s!==n)return!1}else if(!un(n)||n.length!==s.length||s.some((r,o)=>r!==n[o]))return!1}return!0}function aw(i){return i?i.aliasOf?i.aliasOf.path:i.path:""}const lw=(i,t,e)=>i??t??e,eR=Vr({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(i,{attrs:t,slots:e}){const s=hn(Mm),n=us(()=>i.route||s.value),r=hn(rw,0),o=us(()=>{let h=je(r);const{matched:u}=n.value;let f;for(;(f=u[h])&&!f.components;)h++;return h}),a=us(()=>n.value.matched[o.value]);kf(rw,us(()=>o.value+1)),kf(YP,a),kf(Mm,n);const c=ae();return rc(()=>[c.value,a.value,i.name],([h,u,f],[p,g,_])=>{u&&(u.instances[f]=h,g&&g!==u&&h&&h===p&&(u.leaveGuards.size||(u.leaveGuards=g.leaveGuards),u.updateGuards.size||(u.updateGuards=g.updateGuards))),h&&u&&(!g||!bh(u,g)||!p)&&(u.enterCallbacks[f]||[]).forEach(v=>v(h))},{flush:"post"}),()=>{const h=n.value,u=i.name,f=a.value,p=f&&f.components[u];if(!p)return cw(e.default,{Component:p,route:h});const g=f.props[u],_=g?g===!0?h.params:typeof g=="function"?g(h):g:null,x=HA(p,ee({},_,t,{onVnodeUnmounted:S=>{S.component.isUnmounted&&(f.instances[u]=null)},ref:c}));return cw(e.default,{Component:x,route:h})||x}}});function cw(i,t){if(!i)return null;const e=i(t);return e.length===1?e[0]:e}const o0=eR;function sR(i){const t=UP(i.routes,i),e=i.parseQuery||XP,s=i.stringifyQuery||nw,n=i.history,r=Ih(),o=Ih(),a=Ih(),c=eC(Gr);let h=Gr;zl&&i.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=lm.bind(null,H=>""+H),f=lm.bind(null,gP),p=lm.bind(null,pu);function g(H,V){let it,ht;return s0(H)?(it=t.getRecordMatcher(H),ht=V):ht=H,t.addRoute(ht,it)}function _(H){const V=t.getRecordMatcher(H);V&&t.removeRoute(V)}function v(){return t.getRoutes().map(H=>H.record)}function x(H){return!!t.getRecordMatcher(H)}function S(H,V){if(V=ee({},V||c.value),typeof H=="string"){const $=cm(e,H,V.path),U=t.resolve({path:$.path},V),W=n.createHref($.fullPath);return ee($,U,{params:p(U.params),hash:pu($.hash),redirectedFrom:void 0,href:W})}let it;if(H.path!=null)it=ee({},H,{path:cm(e,H.path,V.path).path});else{const $=ee({},H.params);for(const U in $)$[U]==null&&delete $[U];it=ee({},H,{params:f($)}),V.params=f(V.params)}const ht=t.resolve(it,V),Gt=H.hash||"";ht.params=u(p(ht.params));const P=vP(s,ee({},H,{hash:dP(Gt),path:ht.path})),k=n.createHref(P);return ee({fullPath:P,hash:Gt,query:s===nw?KP(H.query):H.query||{}},ht,{redirectedFrom:void 0,href:k})}function C(H){return typeof H=="string"?cm(e,H,c.value.path):ee({},H)}function T(H,V){if(h!==H)return vh(8,{from:V,to:H})}function R(H){return I(H)}function L(H){return R(ee(C(H),{replace:!0}))}function O(H){const V=H.matched[H.matched.length-1];if(V&&V.redirect){const{redirect:it}=V;let ht=typeof it=="function"?it(H):it;return typeof ht=="string"&&(ht=ht.includes("?")||ht.includes("#")?ht=C(ht):{path:ht},ht.params={}),ee({query:H.query,hash:H.hash,params:ht.path!=null?{}:H.params},ht)}}function I(H,V){const it=h=S(H),ht=c.value,Gt=H.state,P=H.force,k=H.replace===!0,$=O(it);if($)return I(ee(C($),{state:typeof $=="object"?ee({},Gt,$.state):Gt,force:P,replace:k}),V||it);const U=it;U.redirectedFrom=V;let W;return!P&&_P(s,ht,it)&&(W=vh(16,{to:U,from:ht}),Ee(ht,ht,!0,!1)),(W?Promise.resolve(W):K(U,ht)).catch(q=>Yn(q)?Yn(q,2)?q:z(q):Pt(q,U,ht)).then(q=>{if(q){if(Yn(q,2))return I(ee({replace:k},C(q.to),{state:typeof q.to=="object"?ee({},Gt,q.to.state):Gt,force:P}),V||U)}else q=bt(U,ht,!0,k,Gt);return Q(U,ht,q),q})}function D(H,V){const it=T(H,V);return it?Promise.reject(it):Promise.resolve()}function B(H){const V=Pe.values().next().value;return V&&typeof V.runWithContext=="function"?V.runWithContext(H):H()}function K(H,V){let it;const[ht,Gt,P]=iR(H,V);it=hm(ht.reverse(),"beforeRouteLeave",H,V);for(const $ of ht)$.leaveGuards.forEach(U=>{it.push(Jr(U,H,V))});const k=D.bind(null,H,V);return it.push(k),qt(it).then(()=>{it=[];for(const $ of r.list())it.push(Jr($,H,V));return it.push(k),qt(it)}).then(()=>{it=hm(Gt,"beforeRouteUpdate",H,V);for(const $ of Gt)$.updateGuards.forEach(U=>{it.push(Jr(U,H,V))});return it.push(k),qt(it)}).then(()=>{it=[];for(const $ of P)if($.beforeEnter)if(un($.beforeEnter))for(const U of $.beforeEnter)it.push(Jr(U,H,V));else it.push(Jr($.beforeEnter,H,V));return it.push(k),qt(it)}).then(()=>(H.matched.forEach($=>$.enterCallbacks={}),it=hm(P,"beforeRouteEnter",H,V,B),it.push(k),qt(it))).then(()=>{it=[];for(const $ of o.list())it.push(Jr($,H,V));return it.push(k),qt(it)}).catch($=>Yn($,8)?$:Promise.reject($))}function Q(H,V,it){a.list().forEach(ht=>B(()=>ht(H,V,it)))}function bt(H,V,it,ht,Gt){const P=T(H,V);if(P)return P;const k=V===Gr,$=zl?history.state:{};it&&(ht||k?n.replace(H.fullPath,ee({scroll:k&&$&&$.scroll},Gt)):n.push(H.fullPath,Gt)),c.value=H,Ee(H,V,it,k),z()}let yt;function St(){yt||(yt=n.listen((H,V,it)=>{if(!Ye.listening)return;const ht=S(H),Gt=O(ht);if(Gt){I(ee(Gt,{replace:!0,force:!0}),ht).catch(au);return}h=ht;const P=c.value;zl&&TP(Ky(P.fullPath,it.delta),dg()),K(ht,P).catch(k=>Yn(k,12)?k:Yn(k,2)?(I(ee(C(k.to),{force:!0}),ht).then($=>{Yn($,20)&&!it.delta&&it.type===gu.pop&&n.go(-1,!1)}).catch(au),Promise.reject()):(it.delta&&n.go(-it.delta,!1),Pt(k,ht,P))).then(k=>{k=k||bt(ht,P,!1),k&&(it.delta&&!Yn(k,8)?n.go(-it.delta,!1):it.type===gu.pop&&Yn(k,20)&&n.go(-1,!1)),Q(ht,P,k)}).catch(au)}))}let Ut=Ih(),J=Ih(),X;function Pt(H,V,it){z(H);const ht=J.list();return ht.length?ht.forEach(Gt=>Gt(H,V,it)):console.error(H),Promise.reject(H)}function De(){return X&&c.value!==Gr?Promise.resolve():new Promise((H,V)=>{Ut.add([H,V])})}function z(H){return X||(X=!H,St(),Ut.list().forEach(([V,it])=>H?it(H):V()),Ut.reset()),H}function Ee(H,V,it,ht){const{scrollBehavior:Gt}=i;if(!zl||!Gt)return Promise.resolve();const P=!it&&PP(Ky(H.fullPath,0))||(ht||!it)&&history.state&&history.state.scroll||null;return hv().then(()=>Gt(H,V,P)).then(k=>k&&CP(k)).catch(k=>Pt(k,H,V))}const Vt=H=>n.go(H);let Qt;const Pe=new Set,Ye={currentRoute:c,listening:!0,addRoute:g,removeRoute:_,clearRoutes:t.clearRoutes,hasRoute:x,getRoutes:v,resolve:S,options:i,push:R,replace:L,go:Vt,back:()=>Vt(-1),forward:()=>Vt(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:J.add,isReady:De,install(H){const V=this;H.component("RouterLink",Df),H.component("RouterView",o0),H.config.globalProperties.$router=V,Object.defineProperty(H.config.globalProperties,"$route",{enumerable:!0,get:()=>je(c)}),zl&&!Qt&&c.value===Gr&&(Qt=!0,R(n.location).catch(Gt=>{}));const it={};for(const Gt in Gr)Object.defineProperty(it,Gt,{get:()=>c.value[Gt],enumerable:!0});H.provide(vv,V),H.provide(_v,rA(it)),H.provide(Mm,c);const ht=H.unmount;Pe.add(H),H.unmount=function(){Pe.delete(H),Pe.size<1&&(h=Gr,yt&&yt(),yt=null,c.value=Gr,Qt=!1,X=!1),ht()}}};function qt(H){return H.reduce((V,it)=>V.then(()=>B(it)),Promise.resolve())}return Ye}function iR(i,t){const e=[],s=[],n=[],r=Math.max(t.matched.length,i.matched.length);for(let o=0;o<r;o++){const a=t.matched[o];a&&(i.matched.find(h=>bh(h,a))?s.push(a):e.push(a));const c=i.matched[o];c&&(t.matched.find(h=>bh(h,c))||n.push(c))}return[e,s,n]}function nR(i){return hn(_v)}const rR=tP("documents",()=>{const i=ae([]),t=ae(!1),e=ae(null);async function s(){t.value=!0,e.value=null;try{const n=await fetch("/RestFigBank/data/documents.json");if(!n.ok)throw new Error("Erreur lors du chargement des documents");const r=await n.json();i.value=r.documents||[]}catch(n){e.value=n instanceof Error?n.message:"Une erreur est survenue",console.error("Erreur lors du chargement des documents:",n)}finally{t.value=!1}}return{documents:i,isLoading:t,error:e,loadDocuments:s}}),qs=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Dm=[.001,0,0,.001,0,0],um=1.35,Ai={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Zr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},oR="pdfjs_internal_editor_",Rt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},Wt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},aR={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Ss={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Of={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},ze={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},Wl={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},fg={ERRORS:0,WARNINGS:1,INFOS:5},Ep={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},wf={moveTo:0,lineTo:1,curveTo:2,closePath:3},lR={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let pg=fg.WARNINGS;function cR(i){Number.isInteger(i)&&(pg=i)}function hR(){return pg}function gg(i){pg>=fg.INFOS&&console.log(`Info: ${i}`)}function Lt(i){pg>=fg.WARNINGS&&console.log(`Warning: ${i}`)}function fe(i){throw new Error(i)}function Ge(i,t){i||fe(t)}function uR(i){switch(i==null?void 0:i.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function a0(i,t=null,e=null){if(!i)return null;if(e&&typeof i=="string"){if(e.addDefaultProtocol&&i.startsWith("www.")){const n=i.match(/\./g);(n==null?void 0:n.length)>=2&&(i=`http://${i}`)}if(e.tryConvertEncoding)try{i=mR(i)}catch{}}const s=t?URL.parse(i,t):URL.parse(i);return uR(s)?s:null}function l0(i,t,e=!1){const s=URL.parse(i);return s?(s.hash=t,s.href):e&&a0(i,"http://example.com")?i.split("#",1)[0]+`${t?`#${t}`:""}`:""}function jt(i,t,e,s=!1){return Object.defineProperty(i,t,{value:e,enumerable:!s,configurable:!0,writable:!1}),e}const xl=function(){function t(e,s){this.message=e,this.name=s}return t.prototype=new Error,t.constructor=t,t}();class hw extends xl{constructor(t,e){super(t,"PasswordException"),this.code=e}}class dm extends xl{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class Om extends xl{constructor(t){super(t,"InvalidPDFException")}}class Sp extends xl{constructor(t,e,s){super(t,"ResponseException"),this.status=e,this.missing=s}}class dR extends xl{constructor(t){super(t,"FormatError")}}class jo extends xl{constructor(t){super(t,"AbortException")}}function c0(i){(typeof i!="object"||(i==null?void 0:i.length)===void 0)&&fe("Invalid argument for bytesToString");const t=i.length,e=8192;if(t<e)return String.fromCharCode.apply(null,i);const s=[];for(let n=0;n<t;n+=e){const r=Math.min(n+e,t),o=i.subarray(n,r);s.push(String.fromCharCode.apply(null,o))}return s.join("")}function Wd(i){typeof i!="string"&&fe("Invalid argument for stringToBytes");const t=i.length,e=new Uint8Array(t);for(let s=0;s<t;++s)e[s]=i.charCodeAt(s)&255;return e}function fR(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function pR(){const i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function gR(){try{return new Function(""),!0}catch{return!1}}class Es{static get isLittleEndian(){return jt(this,"isLittleEndian",pR())}static get isEvalSupported(){return jt(this,"isEvalSupported",gR())}static get isOffscreenCanvasSupported(){return jt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return jt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){if(typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"){const{platform:t,userAgent:e}=navigator;return jt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}return jt(this,"platform",{isAndroid:!1,isLinux:!1,isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var t,e;return jt(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const fm=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0"));var Fr,Ff,Fm;class pt{static makeHexColor(t,e,s){return`#${fm[t]}${fm[e]}${fm[s]}`}static scaleMinMax(t,e){let s;t[0]?(t[0]<0&&(s=e[0],e[0]=e[2],e[2]=s),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(s=e[1],e[1]=e[3],e[3]=s),e[1]*=t[3],e[3]*=t[3]):(s=e[0],e[0]=e[1],e[1]=s,s=e[2],e[2]=e[3],e[3]=s,t[1]<0&&(s=e[1],e[1]=e[3],e[3]=s),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(s=e[0],e[0]=e[2],e[2]=s),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e,s=0){const n=t[s],r=t[s+1];t[s]=n*e[0]+r*e[2]+e[4],t[s+1]=n*e[1]+r*e[3]+e[5]}static applyTransformToBezier(t,e,s=0){const n=e[0],r=e[1],o=e[2],a=e[3],c=e[4],h=e[5];for(let u=0;u<6;u+=2){const f=t[s+u],p=t[s+u+1];t[s+u]=f*n+p*o+c,t[s+u+1]=f*r+p*a+h}}static applyInverseTransform(t,e){const s=t[0],n=t[1],r=e[0]*e[3]-e[1]*e[2];t[0]=(s*e[3]-n*e[2]+e[2]*e[5]-e[4]*e[3])/r,t[1]=(-s*e[1]+n*e[0]+e[4]*e[1]-e[5]*e[0])/r}static axialAlignedBoundingBox(t,e,s){const n=e[0],r=e[1],o=e[2],a=e[3],c=e[4],h=e[5],u=t[0],f=t[1],p=t[2],g=t[3];let _=n*u+c,v=_,x=n*p+c,S=x,C=a*f+h,T=C,R=a*g+h,L=R;if(r!==0||o!==0){const O=r*u,I=r*p,D=o*f,B=o*g;_+=D,S+=D,x+=B,v+=B,C+=O,L+=O,R+=I,T+=I}s[0]=Math.min(s[0],_,x,v,S),s[1]=Math.min(s[1],C,R,T,L),s[2]=Math.max(s[2],_,x,v,S),s[3]=Math.max(s[3],C,R,T,L)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const s=t[0],n=t[1],r=t[2],o=t[3],a=s**2+n**2,c=s*r+n*o,h=r**2+o**2,u=(a+h)/2,f=Math.sqrt(u**2-(a*h-c**2));e[0]=Math.sqrt(u+f||1),e[1]=Math.sqrt(u-f||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const s=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),n=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(s>n)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>o?null:[s,r,n,o]}static pointBoundingBox(t,e,s){s[0]=Math.min(s[0],t),s[1]=Math.min(s[1],e),s[2]=Math.max(s[2],t),s[3]=Math.max(s[3],e)}static rectBoundingBox(t,e,s,n,r){r[0]=Math.min(r[0],t,s),r[1]=Math.min(r[1],e,n),r[2]=Math.max(r[2],t,s),r[3]=Math.max(r[3],e,n)}static bezierBoundingBox(t,e,s,n,r,o,a,c,h){h[0]=Math.min(h[0],t,a),h[1]=Math.min(h[1],e,c),h[2]=Math.max(h[2],t,a),h[3]=Math.max(h[3],e,c),A(this,Fr,Fm).call(this,t,s,r,a,e,n,o,c,3*(-t+3*(s-r)+a),6*(t-2*s+r),3*(s-t),h),A(this,Fr,Fm).call(this,t,s,r,a,e,n,o,c,3*(-e+3*(n-o)+c),6*(e-2*n+o),3*(n-e),h)}}Fr=new WeakSet,Ff=function(t,e,s,n,r,o,a,c,h,u){if(h<=0||h>=1)return;const f=1-h,p=h*h,g=p*h,_=f*(f*(f*t+3*h*e)+3*p*s)+g*n,v=f*(f*(f*r+3*h*o)+3*p*a)+g*c;u[0]=Math.min(u[0],_),u[1]=Math.min(u[1],v),u[2]=Math.max(u[2],_),u[3]=Math.max(u[3],v)},Fm=function(t,e,s,n,r,o,a,c,h,u,f,p){if(Math.abs(h)<1e-12){Math.abs(u)>=1e-12&&A(this,Fr,Ff).call(this,t,e,s,n,r,o,a,c,-f/u,p);return}const g=u**2-4*f*h;if(g<0)return;const _=Math.sqrt(g),v=2*h;A(this,Fr,Ff).call(this,t,e,s,n,r,o,a,c,(-u+_)/v,p),A(this,Fr,Ff).call(this,t,e,s,n,r,o,a,c,(-u-_)/v,p)},w(pt,Fr);function mR(i){return decodeURIComponent(escape(i))}let pm=null,uw=null;function bR(i){return pm||(pm=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,uw=new Map([["ﬅ","ſt"]])),i.replaceAll(pm,(t,e,s)=>e?e.normalize("NFKC"):uw.get(s))}function h0(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const i=new Uint8Array(32);return crypto.getRandomValues(i),c0(i)}const yv="pdfjs_internal_id_";function vR(i,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[s,n,...r]=e;if(!i(s)&&!Number.isInteger(s)||!t(n))return!1;const o=r.length;let a=!0;switch(n.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;a=!1;break;default:return!1}for(const c of r)if(!(typeof c=="number"||a&&c===null))return!1;return!0}function Gs(i,t,e){return Math.min(Math.max(i,t),e)}function u0(i){return Uint8Array.prototype.toBase64?i.toBase64():btoa(c0(i))}function _R(i){return Uint8Array.fromBase64?Uint8Array.fromBase64(i):Wd(atob(i))}typeof Promise.try!="function"&&(Promise.try=function(i,...t){return new Promise(e=>{e(i(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(i){return i.reduce((t,e)=>t+e,0)});const Qn="http://www.w3.org/2000/svg",da=class da{};Z(da,"CSS",96),Z(da,"PDF",72),Z(da,"PDF_TO_CSS_UNITS",da.CSS/da.PDF);let Vo=da;async function qd(i,t="text"){if(ql(i,document.baseURI)){const e=await fetch(i);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,s)=>{const n=new XMLHttpRequest;n.open("GET",i,!0),n.responseType=t,n.onreadystatechange=()=>{if(n.readyState===XMLHttpRequest.DONE){if(n.status===200||n.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(n.response);return}e(n.responseText);return}s(new Error(n.statusText))}},n.send(null)})}class Gd{constructor({viewBox:t,userUnit:e,scale:s,rotation:n,offsetX:r=0,offsetY:o=0,dontFlip:a=!1}){this.viewBox=t,this.userUnit=e,this.scale=s,this.rotation=n,this.offsetX=r,this.offsetY=o,s*=e;const c=(t[2]+t[0])/2,h=(t[3]+t[1])/2;let u,f,p,g;switch(n%=360,n<0&&(n+=360),n){case 180:u=-1,f=0,p=0,g=1;break;case 90:u=0,f=1,p=1,g=0;break;case 270:u=0,f=-1,p=-1,g=0;break;case 0:u=1,f=0,p=0,g=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(p=-p,g=-g);let _,v,x,S;u===0?(_=Math.abs(h-t[1])*s+r,v=Math.abs(c-t[0])*s+o,x=(t[3]-t[1])*s,S=(t[2]-t[0])*s):(_=Math.abs(c-t[0])*s+r,v=Math.abs(h-t[1])*s+o,x=(t[2]-t[0])*s,S=(t[3]-t[1])*s),this.transform=[u*s,f*s,p*s,g*s,_-u*s*c-p*s*h,v-f*s*c-g*s*h],this.width=x,this.height=S}get rawDims(){const t=this.viewBox;return jt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:s=this.offsetX,offsetY:n=this.offsetY,dontFlip:r=!1}={}){return new Gd({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:s,offsetY:n,dontFlip:r})}convertToViewportPoint(t,e){const s=[t,e];return pt.applyTransform(s,this.transform),s}convertToViewportRectangle(t){const e=[t[0],t[1]];pt.applyTransform(e,this.transform);const s=[t[2],t[3]];return pt.applyTransform(s,this.transform),[e[0],e[1],s[0],s[1]]}convertToPdfPoint(t,e){const s=[t,e];return pt.applyInverseTransform(s,this.transform),s}}class wv extends xl{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function mg(i){const t=i.length;let e=0;for(;e<t&&i[e].trim()==="";)e++;return i.substring(e,e+5).toLowerCase()==="data:"}function Av(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function yR(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function wR(i,t="document.pdf"){if(typeof i!="string")return t;if(mg(i))return Lt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,s=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,n=e.exec(i);let r=s.exec(n[1])||s.exec(n[2])||s.exec(n[3]);if(r&&(r=r[0],r.includes("%")))try{r=s.exec(decodeURIComponent(r))[0]}catch{}return r||t}class dw{constructor(){Z(this,"started",Object.create(null));Z(this,"times",[])}time(t){t in this.started&&Lt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Lt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:s}of this.times)e=Math.max(s.length,e);for(const{name:s,start:n,end:r}of this.times)t.push(`${s.padEnd(e)} ${r-n}ms
`);return t.join("")}}function ql(i,t){const e=t?URL.parse(i,t):URL.parse(i);return(e==null?void 0:e.protocol)==="http:"||(e==null?void 0:e.protocol)==="https:"}function dn(i){i.preventDefault()}function qe(i){i.preventDefault(),i.stopPropagation()}var vu;class Ev{static toDateObject(t){if(!t||typeof t!="string")return null;l(this,vu)||b(this,vu,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=l(this,vu).exec(t);if(!e)return null;const s=parseInt(e[1],10);let n=parseInt(e[2],10);n=n>=1&&n<=12?n-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(e[5],10);a=a>=0&&a<=59?a:0;let c=parseInt(e[6],10);c=c>=0&&c<=59?c:0;const h=e[7]||"Z";let u=parseInt(e[8],10);u=u>=0&&u<=23?u:0;let f=parseInt(e[9],10)||0;return f=f>=0&&f<=59?f:0,h==="-"?(o+=u,a+=f):h==="+"&&(o-=u,a-=f),new Date(Date.UTC(s,n,r,o,a,c))}}vu=new WeakMap,w(Ev,vu);function AR(i,{scale:t=1,rotation:e=0}){const{width:s,height:n}=i.attributes.style,r=[0,0,parseInt(s),parseInt(n)];return new Gd({viewBox:r,userUnit:1,scale:t,rotation:e})}function Sv(i){if(i.startsWith("#")){const t=parseInt(i.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(t=>parseInt(t)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Lt(`Not a valid color format: "${i}"`),[0,0,0])}function ER(i){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of i.keys()){t.style.color=e;const s=window.getComputedStyle(t).color;i.set(e,Sv(s))}t.remove()}function Ie(i){const{a:t,b:e,c:s,d:n,e:r,f:o}=i.getTransform();return[t,e,s,n,r,o]}function _n(i){const{a:t,b:e,c:s,d:n,e:r,f:o}=i.getTransform().invertSelf();return[t,e,s,n,r,o]}function wl(i,t,e=!1,s=!0){if(t instanceof Gd){const{pageWidth:n,pageHeight:r}=t.rawDims,{style:o}=i,a=Es.isCSSRoundSupported,c=`var(--total-scale-factor) * ${n}px`,h=`var(--total-scale-factor) * ${r}px`,u=a?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,f=a?`round(down, ${h}, var(--scale-round-y))`:`calc(${h})`;!e||t.rotation%180===0?(o.width=u,o.height=f):(o.width=f,o.height=u)}s&&i.setAttribute("data-main-rotation",t.rotation)}class Hr{constructor(){const{pixelRatio:t}=Hr;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,s,n){let r=1/0,o=1/0,a=1/0;s>0&&(r=Math.sqrt(s/(t*e))),n!==-1&&(o=n/t,a=n/e);const c=Math.min(r,o,a);return this.sx>c||this.sy>c?(this.sx=c,this.sy=c,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}}const Nm=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var to,pa,Di,eo,_u,cc,yu,Lp,d0,As,f0,p0,Nh,g0,Nf;const sr=class sr{constructor(t){w(this,As);w(this,to,null);w(this,pa,null);w(this,Di);w(this,eo,null);w(this,_u,null);w(this,cc,null);b(this,Di,t),l(sr,yu)||b(sr,yu,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=b(this,to,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=l(this,Di)._uiManager._signal;t.addEventListener("contextmenu",dn,{signal:e}),t.addEventListener("pointerdown",A(sr,Lp,d0),{signal:e});const s=b(this,eo,document.createElement("div"));s.className="buttons",t.append(s);const n=l(this,Di).toolbarPosition;if(n){const{style:r}=t,o=l(this,Di)._uiManager.direction==="ltr"?1-n[0]:n[0];r.insetInlineEnd=`${100*o}%`,r.top=`calc(${100*n[1]}% + var(--editor-toolbar-vert-offset))`}return A(this,As,g0).call(this),t}get div(){return l(this,to)}hide(){var t;l(this,to).classList.add("hidden"),(t=l(this,pa))==null||t.hideDropdown()}show(){var t;l(this,to).classList.remove("hidden"),(t=l(this,_u))==null||t.shown()}async addAltText(t){const e=await t.render();A(this,As,Nh).call(this,e),l(this,eo).prepend(e,l(this,As,Nf)),b(this,_u,t)}addColorPicker(t){b(this,pa,t);const e=t.renderButton();A(this,As,Nh).call(this,e),l(this,eo).prepend(e,l(this,As,Nf))}async addEditSignatureButton(t){const e=b(this,cc,await t.renderEditButton(l(this,Di)));A(this,As,Nh).call(this,e),l(this,eo).prepend(e,l(this,As,Nf))}updateEditSignatureButton(t){l(this,cc)&&(l(this,cc).title=t)}remove(){var t;l(this,to).remove(),(t=l(this,pa))==null||t.destroy(),b(this,pa,null)}};to=new WeakMap,pa=new WeakMap,Di=new WeakMap,eo=new WeakMap,_u=new WeakMap,cc=new WeakMap,yu=new WeakMap,Lp=new WeakSet,d0=function(t){t.stopPropagation()},As=new WeakSet,f0=function(t){l(this,Di)._focusEventsAllowed=!1,qe(t)},p0=function(t){l(this,Di)._focusEventsAllowed=!0,qe(t)},Nh=function(t){const e=l(this,Di)._uiManager._signal;t.addEventListener("focusin",A(this,As,f0).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",A(this,As,p0).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",dn,{signal:e})},g0=function(){const{editorType:t,_uiManager:e}=l(this,Di),s=document.createElement("button");s.className="delete",s.tabIndex=0,s.setAttribute("data-l10n-id",l(sr,yu)[t]),A(this,As,Nh).call(this,s),s.addEventListener("click",n=>{e.delete()},{signal:e._signal}),l(this,eo).append(s)},Nf=function(){const t=document.createElement("div");return t.className="divider",t},w(sr,Lp),w(sr,yu,null);let $m=sr;var wu,ga,ma,Uo,m0,b0,v0;class SR{constructor(t){w(this,Uo);w(this,wu,null);w(this,ga,null);w(this,ma);b(this,ma,t)}show(t,e,s){const[n,r]=A(this,Uo,b0).call(this,e,s),{style:o}=l(this,ga)||b(this,ga,A(this,Uo,m0).call(this));t.append(l(this,ga)),o.insetInlineEnd=`${100*n}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){l(this,ga).remove()}}wu=new WeakMap,ga=new WeakMap,ma=new WeakMap,Uo=new WeakSet,m0=function(){const t=b(this,ga,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",dn,{signal:l(this,ma)._signal});const e=b(this,wu,document.createElement("div"));return e.className="buttons",t.append(e),A(this,Uo,v0).call(this),t},b0=function(t,e){let s=0,n=0;for(const r of t){const o=r.y+r.height;if(o<s)continue;const a=r.x+(e?r.width:0);if(o>s){n=a,s=o;continue}e?a>n&&(n=a):a<n&&(n=a)}return[e?1-n:n,s]},v0=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const s=l(this,ma)._signal;t.addEventListener("contextmenu",dn,{signal:s}),t.addEventListener("click",()=>{l(this,ma).highlightSelection("floating_button")},{signal:s}),l(this,wu).append(t)};function xv(i,t,e){for(const s of e)t.addEventListener(s,i[s].bind(i))}var Mp;class xR{constructor(){w(this,Mp,0)}get id(){return`${oR}${Bs(this,Mp)._++}`}}Mp=new WeakMap;var hc,Au,Cs,uc,$f;const Mv=class Mv{constructor(){w(this,uc);w(this,hc,h0());w(this,Au,0);w(this,Cs,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),n=new Image;n.src=t;const r=n.decode().then(()=>(s.drawImage(n,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return jt(this,"_isSVGFittingCanvas",r)}async getFromFile(t){const{lastModified:e,name:s,size:n,type:r}=t;return A(this,uc,$f).call(this,`${e}_${s}_${n}_${r}`,t)}async getFromUrl(t){return A(this,uc,$f).call(this,t,t)}async getFromBlob(t,e){const s=await e;return A(this,uc,$f).call(this,t,s)}async getFromId(t){l(this,Cs)||b(this,Cs,new Map);const e=l(this,Cs).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:s}=e;return delete e.blobPromise,this.getFromBlob(e.id,s)}return this.getFromUrl(e.url)}getFromCanvas(t,e){l(this,Cs)||b(this,Cs,new Map);let s=l(this,Cs).get(t);if(s!=null&&s.bitmap)return s.refCounter+=1,s;const n=new OffscreenCanvas(e.width,e.height);return n.getContext("2d").drawImage(e,0,0),s={bitmap:n.transferToImageBitmap(),id:`image_${l(this,hc)}_${Bs(this,Au)._++}`,refCounter:1,isSvg:!1},l(this,Cs).set(t,s),l(this,Cs).set(s.id,s),s}getSvgUrl(t){const e=l(this,Cs).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var n;l(this,Cs)||b(this,Cs,new Map);const e=l(this,Cs).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:s}=e;if(!e.url&&!e.file){const r=new OffscreenCanvas(s.width,s.height);r.getContext("bitmaprenderer").transferFromImageBitmap(s),e.blobPromise=r.convertToBlob()}(n=s.close)==null||n.call(s),e.bitmap=null}isValidId(t){return t.startsWith(`image_${l(this,hc)}_`)}};hc=new WeakMap,Au=new WeakMap,Cs=new WeakMap,uc=new WeakSet,$f=async function(t,e){l(this,Cs)||b(this,Cs,new Map);let s=l(this,Cs).get(t);if(s===null)return null;if(s!=null&&s.bitmap)return s.refCounter+=1,s;try{s||(s={bitmap:null,id:`image_${l(this,hc)}_${Bs(this,Au)._++}`,refCounter:0,isSvg:!1});let n;if(typeof e=="string"?(s.url=e,n=await qd(e,"blob")):e instanceof File?n=s.file=e:e instanceof Blob&&(n=e),n.type==="image/svg+xml"){const r=Mv._isSVGFittingCanvas,o=new FileReader,a=new Image,c=new Promise((h,u)=>{a.onload=()=>{s.bitmap=a,s.isSvg=!0,h()},o.onload=async()=>{const f=s.svgUrl=o.result;a.src=await r?`${f}#svgView(preserveAspectRatio(none))`:f},a.onerror=o.onerror=u});o.readAsDataURL(n),await c}else s.bitmap=await createImageBitmap(n);s.refCounter=1}catch(n){Lt(n),s=null}return l(this,Cs).set(t,s),s&&l(this,Cs).set(s.id,s),s};let Bm=Mv;var Be,so,Eu,Re;class CR{constructor(t=128){w(this,Be,[]);w(this,so,!1);w(this,Eu);w(this,Re,-1);b(this,Eu,t)}add({cmd:t,undo:e,post:s,mustExec:n,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(n&&t(),l(this,so))return;const c={cmd:t,undo:e,post:s,type:r};if(l(this,Re)===-1){l(this,Be).length>0&&(l(this,Be).length=0),b(this,Re,0),l(this,Be).push(c);return}if(o&&l(this,Be)[l(this,Re)].type===r){a&&(c.undo=l(this,Be)[l(this,Re)].undo),l(this,Be)[l(this,Re)]=c;return}const h=l(this,Re)+1;h===l(this,Eu)?l(this,Be).splice(0,1):(b(this,Re,h),h<l(this,Be).length&&l(this,Be).splice(h)),l(this,Be).push(c)}undo(){if(l(this,Re)===-1)return;b(this,so,!0);const{undo:t,post:e}=l(this,Be)[l(this,Re)];t(),e==null||e(),b(this,so,!1),b(this,Re,l(this,Re)-1)}redo(){if(l(this,Re)<l(this,Be).length-1){b(this,Re,l(this,Re)+1),b(this,so,!0);const{cmd:t,post:e}=l(this,Be)[l(this,Re)];t(),e==null||e(),b(this,so,!1)}}hasSomethingToUndo(){return l(this,Re)!==-1}hasSomethingToRedo(){return l(this,Re)<l(this,Be).length-1}cleanType(t){if(l(this,Re)!==-1){for(let e=l(this,Re);e>=0;e--)if(l(this,Be)[e].type!==t){l(this,Be).splice(e+1,l(this,Re)-e),b(this,Re,e);return}l(this,Be).length=0,b(this,Re,-1)}}destroy(){b(this,Be,null)}}Be=new WeakMap,so=new WeakMap,Eu=new WeakMap,Re=new WeakMap;var Dp,_0;class Xd{constructor(t){w(this,Dp);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Es.platform;for(const[s,n,r={}]of t)for(const o of s){const a=o.startsWith("mac+");e&&a?(this.callbacks.set(o.slice(4),{callback:n,options:r}),this.allKeys.add(o.split("+").at(-1))):!e&&!a&&(this.callbacks.set(o,{callback:n,options:r}),this.allKeys.add(o.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const s=this.callbacks.get(A(this,Dp,_0).call(this,e));if(!s)return;const{callback:n,options:{bubbles:r=!1,args:o=[],checker:a=null}}=s;a&&!a(t,e)||(n.bind(t,...o,e)(),r||qe(e))}}Dp=new WeakSet,_0=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const Op=class Op{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return ER(t),jt(this,"_colors",t)}convert(t){const e=Sv(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[s,n]of this._colors)if(n.every((r,o)=>r===e[o]))return Op._colorsMapping.get(s);return e}getHexCode(t){const e=this._colors.get(t);return e?pt.makeHexColor(...e):t}};Z(Op,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Hm=Op;var dc,ci,ts,fs,fc,nr,pc,Oi,io,no,gc,ba,Sn,Ki,va,Su,xu,mc,Cu,xn,ro,bc,oo,Cn,Fp,ao,Tu,lo,_a,ya,co,Pu,ns,oe,rr,ho,wa,Ru,ku,uo,Tn,or,Iu,Fi,nt,Bf,jm,y0,w0,Hf,A0,E0,S0,Vm,x0,Um,zm,C0,js,Jn,T0,P0,Wm,R0,$h,qm;const tc=class tc{constructor(t,e,s,n,r,o,a,c,h,u,f,p,g,_){w(this,nt);w(this,dc,new AbortController);w(this,ci,null);w(this,ts,new Map);w(this,fs,new Map);w(this,fc,null);w(this,nr,null);w(this,pc,null);w(this,Oi,new CR);w(this,io,null);w(this,no,null);w(this,gc,0);w(this,ba,new Set);w(this,Sn,null);w(this,Ki,null);w(this,va,new Set);Z(this,"_editorUndoBar",null);w(this,Su,!1);w(this,xu,!1);w(this,mc,!1);w(this,Cu,null);w(this,xn,null);w(this,ro,null);w(this,bc,null);w(this,oo,!1);w(this,Cn,null);w(this,Fp,new xR);w(this,ao,!1);w(this,Tu,!1);w(this,lo,null);w(this,_a,null);w(this,ya,null);w(this,co,null);w(this,Pu,null);w(this,ns,Rt.NONE);w(this,oe,new Set);w(this,rr,null);w(this,ho,null);w(this,wa,null);w(this,Ru,null);w(this,ku,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});w(this,uo,[0,0]);w(this,Tn,null);w(this,or,null);w(this,Iu,null);w(this,Fi,null);const v=this._signal=l(this,dc).signal;b(this,or,t),b(this,Iu,e),b(this,fc,s),b(this,ho,n),this._eventBus=r,r._on("editingaction",this.onEditingAction.bind(this),{signal:v}),r._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),r._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),r._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),r._on("setpreference",this.onSetPreference.bind(this),{signal:v}),r._on("switchannotationeditorparams",x=>this.updateParams(x.type,x.value),{signal:v}),A(this,nt,A0).call(this),A(this,nt,C0).call(this),A(this,nt,Vm).call(this),b(this,nr,o.annotationStorage),b(this,Cu,o.filterFactory),b(this,wa,a),b(this,bc,c||null),b(this,Su,h),b(this,xu,u),b(this,mc,f),b(this,Pu,p||null),this.viewParameters={realScale:Vo.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=g||null,this._supportsPinchToZoom=_!==!1}static get _keyboardManager(){const t=tc.prototype,e=o=>l(o,or).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),s=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:c}=a;return c!=="text"&&c!=="number"}return!0},n=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return jt(this,"_keyboardManager",new Xd([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&l(o,or).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&l(o,or).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-n,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[n,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-n],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,n],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}destroy(){var t,e,s,n,r,o,a,c;(t=l(this,Fi))==null||t.resolve(),b(this,Fi,null),(e=l(this,dc))==null||e.abort(),b(this,dc,null),this._signal=null;for(const h of l(this,fs).values())h.destroy();l(this,fs).clear(),l(this,ts).clear(),l(this,va).clear(),(s=l(this,co))==null||s.clear(),b(this,ci,null),l(this,oe).clear(),l(this,Oi).destroy(),(n=l(this,fc))==null||n.destroy(),(r=l(this,ho))==null||r.destroy(),(o=l(this,Cn))==null||o.hide(),b(this,Cn,null),(a=l(this,ya))==null||a.destroy(),b(this,ya,null),l(this,xn)&&(clearTimeout(l(this,xn)),b(this,xn,null)),l(this,Tn)&&(clearTimeout(l(this,Tn)),b(this,Tn,null)),(c=this._editorUndoBar)==null||c.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return l(this,Pu)}get useNewAltTextFlow(){return l(this,xu)}get useNewAltTextWhenAddingImage(){return l(this,mc)}get hcmFilter(){return jt(this,"hcmFilter",l(this,wa)?l(this,Cu).addHCMFilter(l(this,wa).foreground,l(this,wa).background):"none")}get direction(){return jt(this,"direction",getComputedStyle(l(this,or)).direction)}get highlightColors(){return jt(this,"highlightColors",l(this,bc)?new Map(l(this,bc).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return jt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),b(this,no,t)}setMainHighlightColorPicker(t){b(this,ya,t)}editAltText(t,e=!1){var s;(s=l(this,fc))==null||s.editAltText(this,t,e)}getSignature(t){var e;(e=l(this,ho))==null||e.getSignature({uiManager:this,editor:t})}get signatureManager(){return l(this,ho)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":b(this,mc,e);break}}onPageChanging({pageNumber:t}){b(this,gc,t-1)}focusMainContainer(){l(this,or).focus()}findParent(t,e){for(const s of l(this,fs).values()){const{x:n,y:r,width:o,height:a}=s.div.getBoundingClientRect();if(t>=n&&t<=n+o&&e>=r&&e<=r+a)return s}return null}disableUserSelect(t=!1){l(this,Iu).classList.toggle("noUserSelect",t)}addShouldRescale(t){l(this,va).add(t)}removeShouldRescale(t){l(this,va).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*Vo.PDF_TO_CSS_UNITS;for(const s of l(this,va))s.onScaleChanging();(e=l(this,no))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:s,anchorOffset:n,focusNode:r,focusOffset:o}=e,a=e.toString(),h=A(this,nt,Bf).call(this,e).closest(".textLayer"),u=this.getSelectionBoxes(h);if(!u)return;e.empty();const f=A(this,nt,jm).call(this,h),p=l(this,ns)===Rt.NONE,g=()=>{f==null||f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:u,anchorNode:s,anchorOffset:n,focusNode:r,focusOffset:o,text:a}),p&&this.showAllEditors("highlight",!0,!0)};if(p){this.switchToMode(Rt.HIGHLIGHT,g);return}g()}addToAnnotationStorage(t){!t.isEmpty()&&l(this,nr)&&!l(this,nr).has(t.id)&&l(this,nr).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,l(this,oo)&&(b(this,oo,!1),A(this,nt,Hf).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of l(this,oe))if(e.div.contains(t)){b(this,_a,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!l(this,_a))return;const[t,e]=l(this,_a);b(this,_a,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){A(this,nt,Vm).call(this),A(this,nt,Um).call(this)}removeEditListeners(){A(this,nt,x0).call(this),A(this,nt,zm).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const s of l(this,Ki))if(s.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const s of l(this,Ki))if(s.isHandlingMimeForPasting(e.type)){s.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var s;if(t.preventDefault(),(s=l(this,ci))==null||s.commitOrRemove(),!this.hasSelection)return;const e=[];for(const n of l(this,oe)){const r=n.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const o of l(this,Ki))if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let s=e.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(r){Lt(`paste: "${r.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const n=this.currentLayer;try{const r=[];for(const c of s){const h=await n.deserialize(c);if(!h)return;r.push(h)}const o=()=>{for(const c of r)A(this,nt,Wm).call(this,c);A(this,nt,qm).call(this,r)},a=()=>{for(const c of r)c.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(r){Lt(`paste: "${r.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),l(this,ns)!==Rt.NONE&&!this.isEditorHandlingKeyboard&&tc._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,l(this,oo)&&(b(this,oo,!1),A(this,nt,Hf).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(A(this,nt,E0).call(this),A(this,nt,Um).call(this),A(this,nt,js).call(this,{isEditing:l(this,ns)!==Rt.NONE,isEmpty:A(this,nt,$h).call(this),hasSomethingToUndo:l(this,Oi).hasSomethingToUndo(),hasSomethingToRedo:l(this,Oi).hasSomethingToRedo(),hasSelectedEditor:!1})):(A(this,nt,S0).call(this),A(this,nt,zm).call(this),A(this,nt,js).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!l(this,Ki)){b(this,Ki,t);for(const e of l(this,Ki))A(this,nt,Jn).call(this,e.defaultPropertiesToUpdate)}}getId(){return l(this,Fp).id}get currentLayer(){return l(this,fs).get(l(this,gc))}getLayer(t){return l(this,fs).get(t)}get currentPageIndex(){return l(this,gc)}addLayer(t){l(this,fs).set(t.pageIndex,t),l(this,ao)?t.enable():t.disable()}removeLayer(t){l(this,fs).delete(t.pageIndex)}async updateMode(t,e=null,s=!1){var n,r,o;if(l(this,ns)!==t&&!(l(this,Fi)&&(await l(this,Fi).promise,!l(this,Fi)))){if(b(this,Fi,Promise.withResolvers()),(n=l(this,no))==null||n.commitOrRemove(),b(this,ns,t),t===Rt.NONE){this.setEditingState(!1),A(this,nt,P0).call(this),(r=this._editorUndoBar)==null||r.hide(),l(this,Fi).resolve();return}t===Rt.SIGNATURE&&await((o=l(this,ho))==null?void 0:o.loadSignatures()),this.setEditingState(!0),await A(this,nt,T0).call(this),this.unselectAll();for(const a of l(this,fs).values())a.updateMode(t);if(!e){s&&this.addNewEditorFromKeyboard(),l(this,Fi).resolve();return}for(const a of l(this,ts).values())a.annotationElementId===e?(this.setSelected(a),a.enterInEditMode()):a.unselect();l(this,Fi).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==l(this,ns)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var s;if(l(this,Ki)){switch(t){case Wt.CREATE:this.currentLayer.addNewEditor(e);return;case Wt.HIGHLIGHT_DEFAULT_COLOR:(s=l(this,ya))==null||s.updateColor(e);break;case Wt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(l(this,Ru)||b(this,Ru,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const n of l(this,oe))n.updateParams(t,e);for(const n of l(this,Ki))n.updateDefaultParams(t,e)}}showAllEditors(t,e,s=!1){var r;for(const o of l(this,ts).values())o.editorType===t&&o.show(e);(((r=l(this,Ru))==null?void 0:r.get(Wt.HIGHLIGHT_SHOW_ALL))??!0)!==e&&A(this,nt,Jn).call(this,[[Wt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(l(this,Tu)!==t){b(this,Tu,t);for(const e of l(this,fs).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const s of l(this,ts).values())s.pageIndex===t&&e.push(s);return e}getEditor(t){return l(this,ts).get(t)}addEditor(t){l(this,ts).set(t.id,t)}removeEditor(t){var e,s;t.div.contains(document.activeElement)&&(l(this,xn)&&clearTimeout(l(this,xn)),b(this,xn,setTimeout(()=>{this.focusMainContainer(),b(this,xn,null)},0))),l(this,ts).delete(t.id),t.annotationElementId&&((e=l(this,co))==null||e.delete(t.annotationElementId)),this.unselect(t),(!t.annotationElementId||!l(this,ba).has(t.annotationElementId))&&((s=l(this,nr))==null||s.remove(t.id))}addDeletedAnnotationElement(t){l(this,ba).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return l(this,ba).has(t)}removeDeletedAnnotationElement(t){l(this,ba).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){l(this,ci)!==t&&(b(this,ci,t),t&&A(this,nt,Jn).call(this,t.propertiesToUpdate))}updateUI(t){l(this,nt,R0)===t&&A(this,nt,Jn).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){A(this,nt,Jn).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(l(this,oe).has(t)){l(this,oe).delete(t),t.unselect(),A(this,nt,js).call(this,{hasSelectedEditor:this.hasSelection});return}l(this,oe).add(t),t.select(),A(this,nt,Jn).call(this,t.propertiesToUpdate),A(this,nt,js).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;(e=l(this,no))==null||e.commitOrRemove();for(const s of l(this,oe))s!==t&&s.unselect();l(this,oe).clear(),l(this,oe).add(t),t.select(),A(this,nt,Jn).call(this,t.propertiesToUpdate),A(this,nt,js).call(this,{hasSelectedEditor:!0})}isSelected(t){return l(this,oe).has(t)}get firstSelectedEditor(){return l(this,oe).values().next().value}unselect(t){t.unselect(),l(this,oe).delete(t),A(this,nt,js).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return l(this,oe).size!==0}get isEnterHandled(){return l(this,oe).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;l(this,Oi).undo(),A(this,nt,js).call(this,{hasSomethingToUndo:l(this,Oi).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:A(this,nt,$h).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){l(this,Oi).redo(),A(this,nt,js).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:l(this,Oi).hasSomethingToRedo(),isEmpty:A(this,nt,$h).call(this)})}addCommands(t){l(this,Oi).add(t),A(this,nt,js).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:A(this,nt,$h).call(this)})}cleanUndoStack(t){l(this,Oi).cleanType(t)}delete(){var r;this.commitOrRemove();const t=(r=this.currentLayer)==null?void 0:r.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...l(this,oe)],s=()=>{var o;(o=this._editorUndoBar)==null||o.show(n,e.length===1?e[0].editorType:e.length);for(const a of e)a.remove()},n=()=>{for(const o of e)A(this,nt,Wm).call(this,o)};this.addCommands({cmd:s,undo:n,mustExec:!0})}commitOrRemove(){var t;(t=l(this,ci))==null||t.commitOrRemove()}hasSomethingToControl(){return l(this,ci)||this.hasSelection}selectAll(){for(const t of l(this,oe))t.commit();A(this,nt,qm).call(this,l(this,ts).values())}unselectAll(){var t;if(!(l(this,ci)&&(l(this,ci).commitOrRemove(),l(this,ns)!==Rt.NONE))&&!((t=l(this,no))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of l(this,oe))e.unselect();l(this,oe).clear(),A(this,nt,js).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;l(this,uo)[0]+=t,l(this,uo)[1]+=e;const[n,r]=l(this,uo),o=[...l(this,oe)],a=1e3;l(this,Tn)&&clearTimeout(l(this,Tn)),b(this,Tn,setTimeout(()=>{b(this,Tn,null),l(this,uo)[0]=l(this,uo)[1]=0,this.addCommands({cmd:()=>{for(const c of o)l(this,ts).has(c.id)&&(c.translateInPage(n,r),c.translationDone())},undo:()=>{for(const c of o)l(this,ts).has(c.id)&&(c.translateInPage(-n,-r),c.translationDone())},mustExec:!1})},a));for(const c of o)c.translateInPage(t,e),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),b(this,Sn,new Map);for(const t of l(this,oe))l(this,Sn).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!l(this,Sn))return!1;this.disableUserSelect(!1);const t=l(this,Sn);b(this,Sn,null);let e=!1;for(const[{x:n,y:r,pageIndex:o},a]of t)a.newX=n,a.newY=r,a.newPageIndex=o,e||(e=n!==a.savedX||r!==a.savedY||o!==a.savedPageIndex);if(!e)return!1;const s=(n,r,o,a)=>{if(l(this,ts).has(n.id)){const c=l(this,fs).get(a);c?n._setParentAndPosition(c,r,o):(n.pageIndex=a,n.x=r,n.y=o)}};return this.addCommands({cmd:()=>{for(const[n,{newX:r,newY:o,newPageIndex:a}]of t)s(n,r,o,a)},undo:()=>{for(const[n,{savedX:r,savedY:o,savedPageIndex:a}]of t)s(n,r,o,a)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(l(this,Sn))for(const s of l(this,Sn).keys())s.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||l(this,oe).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return l(this,ci)===t}getActive(){return l(this,ci)}getMode(){return l(this,ns)}get imageManager(){return jt(this,"imageManager",new Bm)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let h=0,u=e.rangeCount;h<u;h++)if(!t.contains(e.getRangeAt(h).commonAncestorContainer))return null;const{x:s,y:n,width:r,height:o}=t.getBoundingClientRect();let a;switch(t.getAttribute("data-main-rotation")){case"90":a=(h,u,f,p)=>({x:(u-n)/o,y:1-(h+f-s)/r,width:p/o,height:f/r});break;case"180":a=(h,u,f,p)=>({x:1-(h+f-s)/r,y:1-(u+p-n)/o,width:f/r,height:p/o});break;case"270":a=(h,u,f,p)=>({x:1-(u+p-n)/o,y:(h-s)/r,width:p/o,height:f/r});break;default:a=(h,u,f,p)=>({x:(h-s)/r,y:(u-n)/o,width:f/r,height:p/o});break}const c=[];for(let h=0,u=e.rangeCount;h<u;h++){const f=e.getRangeAt(h);if(!f.collapsed)for(const{x:p,y:g,width:_,height:v}of f.getClientRects())_===0||v===0||c.push(a(p,g,_,v))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:t,id:e}){(l(this,pc)||b(this,pc,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=l(this,pc))==null||e.delete(t)}renderAnnotationElement(t){var n;const e=(n=l(this,pc))==null?void 0:n.get(t.data.id);if(!e)return;const s=l(this,nr).getRawValue(e);s&&(l(this,ns)===Rt.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}setMissingCanvas(t,e,s){var r;const n=(r=l(this,co))==null?void 0:r.get(t);n&&(n.setCanvas(e,s),l(this,co).delete(t))}addMissingCanvas(t,e){(l(this,co)||b(this,co,new Map)).set(t,e)}};dc=new WeakMap,ci=new WeakMap,ts=new WeakMap,fs=new WeakMap,fc=new WeakMap,nr=new WeakMap,pc=new WeakMap,Oi=new WeakMap,io=new WeakMap,no=new WeakMap,gc=new WeakMap,ba=new WeakMap,Sn=new WeakMap,Ki=new WeakMap,va=new WeakMap,Su=new WeakMap,xu=new WeakMap,mc=new WeakMap,Cu=new WeakMap,xn=new WeakMap,ro=new WeakMap,bc=new WeakMap,oo=new WeakMap,Cn=new WeakMap,Fp=new WeakMap,ao=new WeakMap,Tu=new WeakMap,lo=new WeakMap,_a=new WeakMap,ya=new WeakMap,co=new WeakMap,Pu=new WeakMap,ns=new WeakMap,oe=new WeakMap,rr=new WeakMap,ho=new WeakMap,wa=new WeakMap,Ru=new WeakMap,ku=new WeakMap,uo=new WeakMap,Tn=new WeakMap,or=new WeakMap,Iu=new WeakMap,Fi=new WeakMap,nt=new WeakSet,Bf=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},jm=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const s of l(this,fs).values())if(s.hasTextLayer(t))return s;return null},y0=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const s=A(this,nt,Bf).call(this,t).closest(".textLayer"),n=this.getSelectionBoxes(s);n&&(l(this,Cn)||b(this,Cn,new SR(this)),l(this,Cn).show(s,n,this.direction==="ltr"))},w0=function(){var r,o,a;const t=document.getSelection();if(!t||t.isCollapsed){l(this,rr)&&((r=l(this,Cn))==null||r.hide(),b(this,rr,null),A(this,nt,js).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===l(this,rr))return;const n=A(this,nt,Bf).call(this,t).closest(".textLayer");if(!n){l(this,rr)&&((o=l(this,Cn))==null||o.hide(),b(this,rr,null),A(this,nt,js).call(this,{hasSelectedText:!1}));return}if((a=l(this,Cn))==null||a.hide(),b(this,rr,e),A(this,nt,js).call(this,{hasSelectedText:!0}),!(l(this,ns)!==Rt.HIGHLIGHT&&l(this,ns)!==Rt.NONE)&&(l(this,ns)===Rt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),b(this,oo,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=l(this,ns)===Rt.HIGHLIGHT?A(this,nt,jm).call(this,n):null;c==null||c.toggleDrawing();const h=new AbortController,u=this.combinedSignal(h),f=p=>{p.type==="pointerup"&&p.button!==0||(h.abort(),c==null||c.toggleDrawing(!0),p.type==="pointerup"&&A(this,nt,Hf).call(this,"main_toolbar"))};window.addEventListener("pointerup",f,{signal:u}),window.addEventListener("blur",f,{signal:u})}},Hf=function(t=""){l(this,ns)===Rt.HIGHLIGHT?this.highlightSelection(t):l(this,Su)&&A(this,nt,y0).call(this)},A0=function(){document.addEventListener("selectionchange",A(this,nt,w0).bind(this),{signal:this._signal})},E0=function(){if(l(this,ro))return;b(this,ro,new AbortController);const t=this.combinedSignal(l(this,ro));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},S0=function(){var t;(t=l(this,ro))==null||t.abort(),b(this,ro,null)},Vm=function(){if(l(this,lo))return;b(this,lo,new AbortController);const t=this.combinedSignal(l(this,lo));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},x0=function(){var t;(t=l(this,lo))==null||t.abort(),b(this,lo,null)},Um=function(){if(l(this,io))return;b(this,io,new AbortController);const t=this.combinedSignal(l(this,io));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},zm=function(){var t;(t=l(this,io))==null||t.abort(),b(this,io,null)},C0=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},js=function(t){Object.entries(t).some(([s,n])=>l(this,ku)[s]!==n)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(l(this,ku),t)}),l(this,ns)===Rt.HIGHLIGHT&&t.hasSelectedEditor===!1&&A(this,nt,Jn).call(this,[[Wt.HIGHLIGHT_FREE,!0]]))},Jn=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},T0=async function(){if(!l(this,ao)){b(this,ao,!0);const t=[];for(const e of l(this,fs).values())t.push(e.enable());await Promise.all(t);for(const e of l(this,ts).values())e.enable()}},P0=function(){if(this.unselectAll(),l(this,ao)){b(this,ao,!1);for(const t of l(this,fs).values())t.disable();for(const t of l(this,ts).values())t.disable()}},Wm=function(t){const e=l(this,fs).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},R0=function(){let t=null;for(t of l(this,oe));return t},$h=function(){if(l(this,ts).size===0)return!0;if(l(this,ts).size===1)for(const t of l(this,ts).values())return t.isEmpty();return!1},qm=function(t){for(const e of l(this,oe))e.unselect();l(this,oe).clear();for(const e of t)e.isEmpty()||(l(this,oe).add(e),e.select());A(this,nt,js).call(this,{hasSelectedEditor:this.hasSelection})},Z(tc,"TRANSLATE_SMALL",1),Z(tc,"TRANSLATE_BIG",10);let Al=tc;var rs,Pn,Yi,vc,Rn,hi,_c,kn,Js,ar,Aa,In,fo,ln,Bh,jf;const Vs=class Vs{constructor(t){w(this,ln);w(this,rs,null);w(this,Pn,!1);w(this,Yi,null);w(this,vc,null);w(this,Rn,null);w(this,hi,null);w(this,_c,!1);w(this,kn,null);w(this,Js,null);w(this,ar,null);w(this,Aa,null);w(this,In,!1);b(this,Js,t),b(this,In,t._uiManager.useNewAltTextFlow),l(Vs,fo)||b(Vs,fo,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){Vs._l10n??(Vs._l10n=t)}async render(){const t=b(this,Yi,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=b(this,vc,document.createElement("span"));t.append(e),l(this,In)?(t.classList.add("new"),t.setAttribute("data-l10n-id",l(Vs,fo).missing),e.setAttribute("data-l10n-id",l(Vs,fo)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=l(this,Js)._uiManager._signal;t.addEventListener("contextmenu",dn,{signal:s}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:s});const n=r=>{r.preventDefault(),l(this,Js)._uiManager.editAltText(l(this,Js)),l(this,In)&&l(this,Js)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:l(this,ln,Bh)}})};return t.addEventListener("click",n,{capture:!0,signal:s}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(b(this,_c,!0),n(r))},{signal:s}),await A(this,ln,jf).call(this),t}finish(){l(this,Yi)&&(l(this,Yi).focus({focusVisible:l(this,_c)}),b(this,_c,!1))}isEmpty(){return l(this,In)?l(this,rs)===null:!l(this,rs)&&!l(this,Pn)}hasData(){return l(this,In)?l(this,rs)!==null||!!l(this,ar):this.isEmpty()}get guessedText(){return l(this,ar)}async setGuessedText(t){l(this,rs)===null&&(b(this,ar,t),b(this,Aa,await Vs._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),A(this,ln,jf).call(this))}toggleAltTextBadge(t=!1){var e;if(!l(this,In)||l(this,rs)){(e=l(this,kn))==null||e.remove(),b(this,kn,null);return}if(!l(this,kn)){const s=b(this,kn,document.createElement("div"));s.className="noAltTextBadge",l(this,Js).div.append(s)}l(this,kn).classList.toggle("hidden",!t)}serialize(t){let e=l(this,rs);return!t&&l(this,ar)===e&&(e=l(this,Aa)),{altText:e,decorative:l(this,Pn),guessedText:l(this,ar),textWithDisclaimer:l(this,Aa)}}get data(){return{altText:l(this,rs),decorative:l(this,Pn)}}set data({altText:t,decorative:e,guessedText:s,textWithDisclaimer:n,cancel:r=!1}){s&&(b(this,ar,s),b(this,Aa,n)),!(l(this,rs)===t&&l(this,Pn)===e)&&(r||(b(this,rs,t),b(this,Pn,e)),A(this,ln,jf).call(this))}toggle(t=!1){l(this,Yi)&&(!t&&l(this,hi)&&(clearTimeout(l(this,hi)),b(this,hi,null)),l(this,Yi).disabled=!t)}shown(){l(this,Js)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:l(this,ln,Bh)}})}destroy(){var t,e;(t=l(this,Yi))==null||t.remove(),b(this,Yi,null),b(this,vc,null),b(this,Rn,null),(e=l(this,kn))==null||e.remove(),b(this,kn,null)}};rs=new WeakMap,Pn=new WeakMap,Yi=new WeakMap,vc=new WeakMap,Rn=new WeakMap,hi=new WeakMap,_c=new WeakMap,kn=new WeakMap,Js=new WeakMap,ar=new WeakMap,Aa=new WeakMap,In=new WeakMap,fo=new WeakMap,ln=new WeakSet,Bh=function(){return l(this,rs)&&"added"||l(this,rs)===null&&this.guessedText&&"review"||"missing"},jf=async function(){var n,r,o;const t=l(this,Yi);if(!t)return;if(l(this,In)){if(t.classList.toggle("done",!!l(this,rs)),t.setAttribute("data-l10n-id",l(Vs,fo)[l(this,ln,Bh)]),(n=l(this,vc))==null||n.setAttribute("data-l10n-id",l(Vs,fo)[`${l(this,ln,Bh)}-label`]),!l(this,rs)){(r=l(this,Rn))==null||r.remove();return}}else{if(!l(this,rs)&&!l(this,Pn)){t.classList.remove("done"),(o=l(this,Rn))==null||o.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=l(this,Rn);if(!e){b(this,Rn,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${l(this,Js).id}`;const a=100,c=l(this,Js)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(l(this,hi)),b(this,hi,null)},{once:!0}),t.addEventListener("mouseenter",()=>{b(this,hi,setTimeout(()=>{b(this,hi,null),l(this,Rn).classList.add("show"),l(this,Js)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:c}),t.addEventListener("mouseleave",()=>{var h;l(this,hi)&&(clearTimeout(l(this,hi)),b(this,hi,null)),(h=l(this,Rn))==null||h.classList.remove("show")},{signal:c})}l(this,Pn)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=l(this,rs)),e.parentNode||t.append(e);const s=l(this,Js).getElementForAltText();s==null||s.setAttribute("aria-describedby",e.id)},w(Vs,fo,null),Z(Vs,"_l10n",null);let xp=Vs;var yc,Ea,Lu,Mu,Du,Ou,Fu,lr,Sa,cr,xa,hr,zo,k0,I0,L0;const Dv=class Dv{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:s=null,onPinchStart:n=null,onPinching:r=null,onPinchEnd:o=null,signal:a}){w(this,zo);w(this,yc);w(this,Ea,!1);w(this,Lu,null);w(this,Mu);w(this,Du);w(this,Ou);w(this,Fu);w(this,lr,null);w(this,Sa);w(this,cr,null);w(this,xa);w(this,hr,null);b(this,yc,t),b(this,Lu,s),b(this,Mu,e),b(this,Du,n),b(this,Ou,r),b(this,Fu,o),b(this,xa,new AbortController),b(this,Sa,AbortSignal.any([a,l(this,xa).signal])),t.addEventListener("touchstart",A(this,zo,k0).bind(this),{passive:!1,signal:l(this,Sa)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Hr.pixelRatio}destroy(){var t,e;(t=l(this,xa))==null||t.abort(),b(this,xa,null),(e=l(this,lr))==null||e.abort(),b(this,lr,null)}};yc=new WeakMap,Ea=new WeakMap,Lu=new WeakMap,Mu=new WeakMap,Du=new WeakMap,Ou=new WeakMap,Fu=new WeakMap,lr=new WeakMap,Sa=new WeakMap,cr=new WeakMap,xa=new WeakMap,hr=new WeakMap,zo=new WeakSet,k0=function(t){var n,r,o;if((n=l(this,Mu))!=null&&n.call(this))return;if(t.touches.length===1){if(l(this,lr))return;const a=b(this,lr,new AbortController),c=AbortSignal.any([l(this,Sa),a.signal]),h=l(this,yc),u={capture:!0,signal:c,passive:!1},f=p=>{var g;p.pointerType==="touch"&&((g=l(this,lr))==null||g.abort(),b(this,lr,null))};h.addEventListener("pointerdown",p=>{p.pointerType==="touch"&&(qe(p),f(p))},u),h.addEventListener("pointerup",f,u),h.addEventListener("pointercancel",f,u);return}if(!l(this,hr)){b(this,hr,new AbortController);const a=AbortSignal.any([l(this,Sa),l(this,hr).signal]),c=l(this,yc),h={signal:a,capture:!1,passive:!1};c.addEventListener("touchmove",A(this,zo,I0).bind(this),h);const u=A(this,zo,L0).bind(this);c.addEventListener("touchend",u,h),c.addEventListener("touchcancel",u,h),h.capture=!0,c.addEventListener("pointerdown",qe,h),c.addEventListener("pointermove",qe,h),c.addEventListener("pointercancel",qe,h),c.addEventListener("pointerup",qe,h),(r=l(this,Du))==null||r.call(this)}if(qe(t),t.touches.length!==2||(o=l(this,Lu))!=null&&o.call(this)){b(this,cr,null);return}let[e,s]=t.touches;e.identifier>s.identifier&&([e,s]=[s,e]),b(this,cr,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:s.screenX,touch1Y:s.screenY})},I0=function(t){var R;if(!l(this,cr)||t.touches.length!==2)return;qe(t);let[e,s]=t.touches;e.identifier>s.identifier&&([e,s]=[s,e]);const{screenX:n,screenY:r}=e,{screenX:o,screenY:a}=s,c=l(this,cr),{touch0X:h,touch0Y:u,touch1X:f,touch1Y:p}=c,g=f-h,_=p-u,v=o-n,x=a-r,S=Math.hypot(v,x)||1,C=Math.hypot(g,_)||1;if(!l(this,Ea)&&Math.abs(C-S)<=Dv.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=n,c.touch0Y=r,c.touch1X=o,c.touch1Y=a,!l(this,Ea)){b(this,Ea,!0);return}const T=[(n+o)/2,(r+a)/2];(R=l(this,Ou))==null||R.call(this,T,C,S)},L0=function(t){var e;t.touches.length>=2||(l(this,hr)&&(l(this,hr).abort(),b(this,hr,null),(e=l(this,Fu))==null||e.call(this)),l(this,cr)&&(qe(t),b(this,cr,null),b(this,Ea,!1)))};let Cp=Dv;var Ca,Qi,Ae,wc,po,Nu,Ta,ps,Pa,ur,go,$u,Ra,ui,Bu,ka,dr,Ln,Ac,Ec,Ni,Ia,Hu,Np,Et,Gm,ju,Xm,Vf,M0,D0,Km,Uf,Ym,O0,F0,N0,Qm,$0,Jm,B0,H0,j0,Zm,Hh;const Nt=class Nt{constructor(t){w(this,Et);w(this,Ca,null);w(this,Qi,null);w(this,Ae,null);w(this,wc,!1);w(this,po,null);w(this,Nu,"");w(this,Ta,!1);w(this,ps,null);w(this,Pa,null);w(this,ur,null);w(this,go,null);w(this,$u,"");w(this,Ra,!1);w(this,ui,null);w(this,Bu,!1);w(this,ka,!1);w(this,dr,!1);w(this,Ln,null);w(this,Ac,0);w(this,Ec,0);w(this,Ni,null);w(this,Ia,null);Z(this,"_isCopy",!1);Z(this,"_editToolbar",null);Z(this,"_initialOptions",Object.create(null));Z(this,"_initialData",null);Z(this,"_isVisible",!0);Z(this,"_uiManager",null);Z(this,"_focusEventsAllowed",!0);w(this,Hu,!1);w(this,Np,Nt._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:s,pageHeight:n,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,n],this.pageTranslation=[r,o];const[a,c]=this.parentDimensions;this.x=t.x/a,this.y=t.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=Nt.prototype._resizeWithKeyboard,e=Al.TRANSLATE_SMALL,s=Al.TRANSLATE_BIG;return jt(this,"_resizerKeyboardManager",new Xd([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],Nt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return jt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new TR({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(Nt._l10n??(Nt._l10n=t),Nt._l10nResizer||(Nt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Nt._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);Nt._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){fe("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return l(this,Hu)}set _isDraggable(t){var e;b(this,Hu,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=l(this,Np)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):A(this,Et,Hh).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(l(this,Ra)?b(this,Ra,!1):this.parent.setSelected(this))}focusout(t){var s;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(s=this.parent)!=null&&s.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,s,n){const[r,o]=this.parentDimensions;[s,n]=this.screenToPageTranslation(s,n),this.x=(t+s)/r,this.y=(e+n)/o,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[s,n]=this.parentDimensions;this.setAt(t*s,e*n,this.width*s,this.height*n),this._onTranslated()}translate(t,e){A(this,Et,Gm).call(this,this.parentDimensions,t,e)}translateInPage(t,e){l(this,ui)||b(this,ui,[this.x,this.y,this.width,this.height]),A(this,Et,Gm).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){l(this,ui)||b(this,ui,[this.x,this.y,this.width,this.height]);const{div:s,parentDimensions:[n,r]}=this;if(this.x+=t/n,this.y+=e/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:f,y:p}=this.div.getBoundingClientRect();this.parent.findNewParent(this,f,p)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:a}=this;const[c,h]=this.getBaseTranslation();o+=c,a+=h;const{style:u}=s;u.left=`${(100*o).toFixed(2)}%`,u.top=`${(100*a).toFixed(2)}%`,this._onTranslating(o,a),s.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!l(this,ui)&&(l(this,ui)[0]!==this.x||l(this,ui)[1]!==this.y)}get _hasBeenResized(){return!!l(this,ui)&&(l(this,ui)[2]!==this.width||l(this,ui)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:s}=Nt,n=s/t,r=s/e;switch(this.rotation){case 90:return[-n,r];case 180:return[n,r];case 270:return[n,-r];default:return[-n,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[s,n]}=this;let{x:r,y:o,width:a,height:c}=this;if(a*=s,c*=n,r*=s,o*=n,this._mustFixPosition)switch(t){case 0:r=Gs(r,0,s-a),o=Gs(o,0,n-c);break;case 90:r=Gs(r,0,s-c),o=Gs(o,a,n);break;case 180:r=Gs(r,a,s),o=Gs(o,c,n);break;case 270:r=Gs(r,c,s),o=Gs(o,0,n-a);break}this.x=r/=s,this.y=o/=n;const[h,u]=this.getBaseTranslation();r+=h,o+=u,e.left=`${(100*r).toFixed(2)}%`,e.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var s;return A(s=Nt,ju,Xm).call(s,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var s;return A(s=Nt,ju,Xm).call(s,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,s]}=this;return[e*t,s*t]}setDims(t,e){const[s,n]=this.parentDimensions,{style:r}=this.div;r.width=`${(100*t/s).toFixed(2)}%`,l(this,Ta)||(r.height=`${(100*e/n).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:s}=t,n=s.endsWith("%"),r=!l(this,Ta)&&e.endsWith("%");if(n&&r)return;const[o,a]=this.parentDimensions;n||(t.width=`${(100*parseFloat(s)/o).toFixed(2)}%`),!l(this,Ta)&&!r&&(t.height=`${(100*parseFloat(e)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=l(this,Ae))==null||t.finish()}async addEditToolbar(){return this._editToolbar||l(this,ka)?this._editToolbar:(this._editToolbar=new $m(this),this.div.append(this._editToolbar.render()),l(this,Ae)&&await this._editToolbar.addAltText(l(this,Ae)),this._editToolbar)}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=l(this,Ae))==null||t.destroy())}addContainer(t){var s;const e=(s=this._editToolbar)==null?void 0:s.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){l(this,Ae)||(xp.initialize(Nt._l10n),b(this,Ae,new xp(this)),l(this,Ca)&&(l(this,Ae).data=l(this,Ca),b(this,Ca,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=l(this,Ae))==null?void 0:t.data}set altTextData(t){l(this,Ae)&&(l(this,Ae).data=t)}get guessedAltText(){var t;return(t=l(this,Ae))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=l(this,Ae))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=l(this,Ae))==null?void 0:e.serialize(t)}hasAltText(){return!!l(this,Ae)&&!l(this,Ae).isEmpty()}hasAltTextData(){var t;return((t=l(this,Ae))==null?void 0:t.hasData())??!1}render(){var o;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=l(this,wc)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),A(this,Et,Jm).call(this);const[e,s]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*s/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/s).toFixed(2)}%`);const[n,r]=this.getInitialTranslation();return this.translate(n,r),xv(this,t,["keydown","pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(l(this,Ia)||b(this,Ia,new Cp({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:A(this,Et,O0).bind(this),onPinching:A(this,Et,F0).bind(this),onPinchEnd:A(this,Et,N0).bind(this),signal:this._uiManager._signal}))),(o=this._uiManager._editorUndoBar)==null||o.hide(),t}pointerdown(t){const{isMac:e}=Es.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(b(this,Ra,!0),this._isDraggable){A(this,Et,$0).call(this,t);return}A(this,Et,Qm).call(this,t)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){l(this,Ln)&&clearTimeout(l(this,Ln)),b(this,Ln,setTimeout(()=>{var t;b(this,Ln,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,s){t.changeParent(this),this.x=e,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,s=this.rotation){const n=this.parentScale,[r,o]=this.pageDimensions,[a,c]=this.pageTranslation,h=t/n,u=e/n,f=this.x*r,p=this.y*o,g=this.width*r,_=this.height*o;switch(s){case 0:return[f+h+a,o-p-u-_+c,f+h+g+a,o-p-u+c];case 90:return[f+u+a,o-p+h+c,f+u+_+a,o-p+h+g+c];case 180:return[f-h-g+a,o-p+u+c,f-h+a,o-p+u+_+c];case 270:return[f-u-_+a,o-p-h-g+c,f-u+a,o-p-h+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[s,n,r,o]=t,a=r-s,c=o-n;switch(this.rotation){case 0:return[s,e-o,a,c];case 90:return[s,e-n,c,a];case 180:return[r,e-n,a,c];case 270:return[r,e-o,c,a];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){b(this,ka,!0)}disableEditMode(){b(this,ka,!1)}isInEditMode(){return l(this,ka)}shouldGetKeyboardEvents(){return l(this,dr)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:s,right:n}=this.getClientDimensions(),{innerHeight:r,innerWidth:o}=window;return e<o&&n>0&&t<r&&s>0}rebuild(){A(this,Et,Jm).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){fe("An editor must be serializable")}static async deserialize(t,e,s){const n=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:s});n.rotation=t.rotation,b(n,Ca,t.accessibilityData),n._isCopy=t.isCopy||!1;const[r,o]=n.pageDimensions,[a,c,h,u]=n.getRectInCurrentCoords(t.rect,o);return n.x=a/r,n.y=c/o,n.width=h/r,n.height=u/o,n}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e;if((t=l(this,go))==null||t.abort(),b(this,go,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),l(this,Ln)&&(clearTimeout(l(this,Ln)),b(this,Ln,null)),A(this,Et,Hh).call(this),this.removeEditToolbar(),l(this,Ni)){for(const s of l(this,Ni).values())clearTimeout(s);b(this,Ni,null)}this.parent=null,(e=l(this,Ia))==null||e.destroy(),b(this,Ia,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(A(this,Et,M0).call(this),l(this,ps).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),b(this,ur,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=l(this,ps).children;if(!l(this,Qi)){b(this,Qi,Array.from(e));const o=A(this,Et,B0).bind(this),a=A(this,Et,H0).bind(this),c=this._uiManager._signal;for(const h of l(this,Qi)){const u=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",o,{signal:c}),h.addEventListener("blur",a,{signal:c}),h.addEventListener("focus",A(this,Et,j0).bind(this,u),{signal:c}),h.setAttribute("data-l10n-id",Nt._l10nResizer[u])}}const s=l(this,Qi)[0];let n=0;for(const o of e){if(o===s)break;n++}const r=(360-this.rotation+this.parentRotation)%360/90*(l(this,Qi).length/4);if(r!==n){if(r<n)for(let a=0;a<n-r;a++)l(this,ps).append(l(this,ps).firstChild);else if(r>n)for(let a=0;a<r-n;a++)l(this,ps).firstChild.before(l(this,ps).lastChild);let o=0;for(const a of e){const h=l(this,Qi)[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",Nt._l10nResizer[h])}}A(this,Et,Zm).call(this,0),b(this,dr,!0),l(this,ps).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){l(this,dr)&&A(this,Et,Ym).call(this,l(this,$u),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){A(this,Et,Hh).call(this),this.div.focus()}select(){var t,e,s;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var n,r;(n=this.div)!=null&&n.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(e=this._editToolbar)==null||e.show(),(s=l(this,Ae))==null||s.toggleAltTextBadge(!1)}unselect(){var t,e,s,n,r;(t=l(this,ps))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(s=this.div)!=null&&s.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(n=this._editToolbar)==null||n.hide(),(r=l(this,Ae))==null||r.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return l(this,Bu)}set isEditing(t){b(this,Bu,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){b(this,Ta,!0);const s=t/e,{style:n}=this.div;n.aspectRatio=s,n.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){l(this,Ni)||b(this,Ni,new Map);const{action:s}=t;let n=l(this,Ni).get(s);n&&clearTimeout(n),n=setTimeout(()=>{this._reportTelemetry(t),l(this,Ni).delete(s),l(this,Ni).size===0&&b(this,Ni,null)},Nt._telemetryTimeout),l(this,Ni).set(s,n);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),b(this,wc,!1)}disable(){this.div&&(this.div.tabIndex=-1),b(this,wc,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const s=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),s.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};Ca=new WeakMap,Qi=new WeakMap,Ae=new WeakMap,wc=new WeakMap,po=new WeakMap,Nu=new WeakMap,Ta=new WeakMap,ps=new WeakMap,Pa=new WeakMap,ur=new WeakMap,go=new WeakMap,$u=new WeakMap,Ra=new WeakMap,ui=new WeakMap,Bu=new WeakMap,ka=new WeakMap,dr=new WeakMap,Ln=new WeakMap,Ac=new WeakMap,Ec=new WeakMap,Ni=new WeakMap,Ia=new WeakMap,Hu=new WeakMap,Np=new WeakMap,Et=new WeakSet,Gm=function([t,e],s,n){[s,n]=this.screenToPageTranslation(s,n),this.x+=s/t,this.y+=n/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},ju=new WeakSet,Xm=function(t,e,s){switch(s){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},Vf=function(t){switch(t){case 90:{const[e,s]=this.pageDimensions;return[0,-e/s,s/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,s]=this.pageDimensions;return[0,e/s,-s/e,0]}default:return[1,0,0,1]}},M0=function(){if(l(this,ps))return;b(this,ps,document.createElement("div")),l(this,ps).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const s of t){const n=document.createElement("div");l(this,ps).append(n),n.classList.add("resizer",s),n.setAttribute("data-resizer-name",s),n.addEventListener("pointerdown",A(this,Et,D0).bind(this,s),{signal:e}),n.addEventListener("contextmenu",dn,{signal:e}),n.tabIndex=-1}this.div.prepend(l(this,ps))},D0=function(t,e){var u;e.preventDefault();const{isMac:s}=Es.platform;if(e.button!==0||e.ctrlKey&&s)return;(u=l(this,Ae))==null||u.toggle(!1);const n=this._isDraggable;this._isDraggable=!1,b(this,Pa,[e.screenX,e.screenY]);const r=new AbortController,o=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",A(this,Et,Ym).bind(this,t),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",qe,{passive:!1,signal:o}),window.addEventListener("contextmenu",dn,{signal:o}),b(this,ur,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const a=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const h=()=>{var f;r.abort(),this.parent.togglePointerEvents(!0),(f=l(this,Ae))==null||f.toggle(!0),this._isDraggable=n,this.parent.div.style.cursor=a,this.div.style.cursor=c,A(this,Et,Uf).call(this)};window.addEventListener("pointerup",h,{signal:o}),window.addEventListener("blur",h,{signal:o})},Km=function(t,e,s,n){this.width=s,this.height=n,this.x=t,this.y=e;const[r,o]=this.parentDimensions;this.setDims(r*s,o*n),this.fixAndSetPosition(),this._onResized()},Uf=function(){if(!l(this,ur))return;const{savedX:t,savedY:e,savedWidth:s,savedHeight:n}=l(this,ur);b(this,ur,null);const r=this.x,o=this.y,a=this.width,c=this.height;r===t&&o===e&&a===s&&c===n||this.addCommands({cmd:A(this,Et,Km).bind(this,r,o,a,c),undo:A(this,Et,Km).bind(this,t,e,s,n),mustExec:!0})},Ym=function(t,e){const[s,n]=this.parentDimensions,r=this.x,o=this.y,a=this.width,c=this.height,h=Nt.MIN_SIZE/s,u=Nt.MIN_SIZE/n,f=A(this,Et,Vf).call(this,this.rotation),p=(J,X)=>[f[0]*J+f[2]*X,f[1]*J+f[3]*X],g=A(this,Et,Vf).call(this,360-this.rotation),_=(J,X)=>[g[0]*J+g[2]*X,g[1]*J+g[3]*X];let v,x,S=!1,C=!1;switch(t){case"topLeft":S=!0,v=(J,X)=>[0,0],x=(J,X)=>[J,X];break;case"topMiddle":v=(J,X)=>[J/2,0],x=(J,X)=>[J/2,X];break;case"topRight":S=!0,v=(J,X)=>[J,0],x=(J,X)=>[0,X];break;case"middleRight":C=!0,v=(J,X)=>[J,X/2],x=(J,X)=>[0,X/2];break;case"bottomRight":S=!0,v=(J,X)=>[J,X],x=(J,X)=>[0,0];break;case"bottomMiddle":v=(J,X)=>[J/2,X],x=(J,X)=>[J/2,0];break;case"bottomLeft":S=!0,v=(J,X)=>[0,X],x=(J,X)=>[J,0];break;case"middleLeft":C=!0,v=(J,X)=>[0,X/2],x=(J,X)=>[J,X/2];break}const T=v(a,c),R=x(a,c);let L=p(...R);const O=Nt._round(r+L[0]),I=Nt._round(o+L[1]);let D=1,B=1,K,Q;if(e.fromKeyboard)({deltaX:K,deltaY:Q}=e);else{const{screenX:J,screenY:X}=e,[Pt,De]=l(this,Pa);[K,Q]=this.screenToPageTranslation(J-Pt,X-De),l(this,Pa)[0]=J,l(this,Pa)[1]=X}if([K,Q]=_(K/s,Q/n),S){const J=Math.hypot(a,c);D=B=Math.max(Math.min(Math.hypot(R[0]-T[0]-K,R[1]-T[1]-Q)/J,1/a,1/c),h/a,u/c)}else C?D=Gs(Math.abs(R[0]-T[0]-K),h,1)/a:B=Gs(Math.abs(R[1]-T[1]-Q),u,1)/c;const bt=Nt._round(a*D),yt=Nt._round(c*B);L=p(...x(bt,yt));const St=O-L[0],Ut=I-L[1];l(this,ui)||b(this,ui,[this.x,this.y,this.width,this.height]),this.width=bt,this.height=yt,this.x=St,this.y=Ut,this.setDims(s*bt,n*yt),this.fixAndSetPosition(),this._onResizing()},O0=function(){var t;b(this,ur,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=l(this,Ae))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},F0=function(t,e,s){let r=.7*(s/e)+1-.7;if(r===1)return;const o=A(this,Et,Vf).call(this,this.rotation),a=(O,I)=>[o[0]*O+o[2]*I,o[1]*O+o[3]*I],[c,h]=this.parentDimensions,u=this.x,f=this.y,p=this.width,g=this.height,_=Nt.MIN_SIZE/c,v=Nt.MIN_SIZE/h;r=Math.max(Math.min(r,1/p,1/g),_/p,v/g);const x=Nt._round(p*r),S=Nt._round(g*r);if(x===p&&S===g)return;l(this,ui)||b(this,ui,[u,f,p,g]);const C=a(p/2,g/2),T=Nt._round(u+C[0]),R=Nt._round(f+C[1]),L=a(x/2,S/2);this.x=T-L[0],this.y=R-L[1],this.width=x,this.height=S,this.setDims(c*x,h*S),this.fixAndSetPosition(),this._onResizing()},N0=function(){var t;(t=l(this,Ae))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),A(this,Et,Uf).call(this)},Qm=function(t){const{isMac:e}=Es.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},$0=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let s=!1;const n=new AbortController,r=this._uiManager.combinedSignal(n),o={capture:!0,passive:!1,signal:r},a=h=>{n.abort(),b(this,po,null),b(this,Ra,!1),this._uiManager.endDragSession()||A(this,Et,Qm).call(this,h),s&&this._onStopDragging()};e&&(b(this,Ac,t.clientX),b(this,Ec,t.clientY),b(this,po,t.pointerId),b(this,Nu,t.pointerType),window.addEventListener("pointermove",h=>{s||(s=!0,this._onStartDragging());const{clientX:u,clientY:f,pointerId:p}=h;if(p!==l(this,po)){qe(h);return}const[g,_]=this.screenToPageTranslation(u-l(this,Ac),f-l(this,Ec));b(this,Ac,u),b(this,Ec,f),this._uiManager.dragSelectedEditors(g,_)},o),window.addEventListener("touchmove",qe,o),window.addEventListener("pointerdown",h=>{h.pointerType===l(this,Nu)&&(l(this,Ia)||h.isPrimary)&&a(h),qe(h)},o));const c=h=>{if(!l(this,po)||l(this,po)===h.pointerId){a(h);return}qe(h)};window.addEventListener("pointerup",c,{signal:r}),window.addEventListener("blur",c,{signal:r})},Jm=function(){if(l(this,go)||!this.div)return;b(this,go,new AbortController);const t=this._uiManager.combinedSignal(l(this,go));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},B0=function(t){Nt._resizerKeyboardManager.exec(this,t)},H0=function(t){var e;l(this,dr)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==l(this,ps)&&A(this,Et,Hh).call(this)},j0=function(t){b(this,$u,l(this,dr)?t:"")},Zm=function(t){if(l(this,Qi))for(const e of l(this,Qi))e.tabIndex=t},Hh=function(){b(this,dr,!1),A(this,Et,Zm).call(this,-1),A(this,Et,Uf).call(this)},w(Nt,ju),Z(Nt,"_l10n",null),Z(Nt,"_l10nResizer",null),Z(Nt,"_borderLineWidth",-1),Z(Nt,"_colorManager",new Hm),Z(Nt,"_zIndex",1),Z(Nt,"_telemetryTimeout",1e3);let we=Nt;class TR extends we{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const fw=3285377520,Mi=4294901760,yn=65535;class V0{constructor(t){this.h1=t?t&4294967295:fw,this.h2=t?t&4294967295:fw}update(t){let e,s;if(typeof t=="string"){e=new Uint8Array(t.length*2),s=0;for(let v=0,x=t.length;v<x;v++){const S=t.charCodeAt(v);S<=255?e[s++]=S:(e[s++]=S>>>8,e[s++]=S&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),s=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const n=s>>2,r=s-n*4,o=new Uint32Array(e.buffer,0,n);let a=0,c=0,h=this.h1,u=this.h2;const f=3432918353,p=461845907,g=f&yn,_=p&yn;for(let v=0;v<n;v++)v&1?(a=o[v],a=a*f&Mi|a*g&yn,a=a<<15|a>>>17,a=a*p&Mi|a*_&yn,h^=a,h=h<<13|h>>>19,h=h*5+3864292196):(c=o[v],c=c*f&Mi|c*g&yn,c=c<<15|c>>>17,c=c*p&Mi|c*_&yn,u^=c,u=u<<13|u>>>19,u=u*5+3864292196);switch(a=0,r){case 3:a^=e[n*4+2]<<16;case 2:a^=e[n*4+1]<<8;case 1:a^=e[n*4],a=a*f&Mi|a*g&yn,a=a<<15|a>>>17,a=a*p&Mi|a*_&yn,n&1?h^=a:u^=a}this.h1=h,this.h2=u}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Mi|t*36045&yn,e=e*4283543511&Mi|((e<<16|t>>>16)*2950163797&Mi)>>>16,t^=e>>>1,t=t*444984403&Mi|t*60499&yn,e=e*3301882366&Mi|((e<<16|t>>>16)*3120437893&Mi)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const tb=Object.freeze({map:null,hash:"",transfer:void 0});var La,Ma,gs,$p,U0;class Cv{constructor(){w(this,$p);w(this,La,!1);w(this,Ma,null);w(this,gs,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const s=l(this,gs).get(t);return s===void 0?e:Object.assign(e,s)}getRawValue(t){return l(this,gs).get(t)}remove(t){if(l(this,gs).delete(t),l(this,gs).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of l(this,gs).values())if(e instanceof we)return;this.onAnnotationEditor(null)}}setValue(t,e){const s=l(this,gs).get(t);let n=!1;if(s!==void 0)for(const[r,o]of Object.entries(e))s[r]!==o&&(n=!0,s[r]=o);else n=!0,l(this,gs).set(t,e);n&&A(this,$p,U0).call(this),e instanceof we&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return l(this,gs).has(t)}get size(){return l(this,gs).size}resetModified(){l(this,La)&&(b(this,La,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new z0(this)}get serializable(){if(l(this,gs).size===0)return tb;const t=new Map,e=new V0,s=[],n=Object.create(null);let r=!1;for(const[o,a]of l(this,gs)){const c=a instanceof we?a.serialize(!1,n):a;c&&(t.set(o,c),e.update(`${o}:${JSON.stringify(c)}`),r||(r=!!c.bitmap))}if(r)for(const o of t.values())o.bitmap&&s.push(o.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:s}:tb}get editorStats(){let t=null;const e=new Map;for(const s of l(this,gs).values()){if(!(s instanceof we))continue;const n=s.telemetryFinalData;if(!n)continue;const{type:r}=n;e.has(r)||e.set(r,Object.getPrototypeOf(s).constructor),t||(t=Object.create(null));const o=t[r]||(t[r]=new Map);for(const[a,c]of Object.entries(n)){if(a==="type")continue;let h=o.get(a);h||(h=new Map,o.set(a,h));const u=h.get(c)??0;h.set(c,u+1)}}for(const[s,n]of e)t[s]=n.computeTelemetryFinalData(t[s]);return t}resetModifiedIds(){b(this,Ma,null)}get modifiedIds(){if(l(this,Ma))return l(this,Ma);const t=[];for(const e of l(this,gs).values())!(e instanceof we)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return b(this,Ma,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return l(this,gs).entries()}}La=new WeakMap,Ma=new WeakMap,gs=new WeakMap,$p=new WeakSet,U0=function(){l(this,La)||(b(this,La,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Vu;class z0 extends Cv{constructor(e){super();w(this,Vu);const{map:s,hash:n,transfer:r}=e.serializable,o=structuredClone(s,r?{transfer:r}:null);b(this,Vu,{map:o,hash:n,transfer:r})}get print(){fe("Should not call PrintAnnotationStorage.print")}get serializable(){return l(this,Vu)}get modifiedIds(){return jt(this,"modifiedIds",{ids:new Set,hash:""})}}Vu=new WeakMap;var Sc;class PR{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){w(this,Sc,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),l(this,Sc).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:s}){if(!(!t||l(this,Sc).has(t.loadedName))){if(Ge(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:r,style:o}=t,a=new FontFace(n,r,o);this.addNativeFontFace(a);try{await a.load(),l(this,Sc).add(n),s==null||s(t)}catch{Lt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}fe("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const s=t.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(n){throw Lt(`Failed to load font '${s.family}': '${n}'.`),t.disableFontFace=!0,n}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const n=this._queueLoadingCallback(s);this._prepareFontLoadEvent(t,n)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return jt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return jt(this,"isSyncFontLoadingSupported",qs||Es.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(Ge(!n.done,"completeRequest() cannot be called twice."),n.done=!0;s.length>0&&s[0].done;){const r=s.shift();setTimeout(r.callback,0)}}const{loadingRequests:s}=this,n={done:!1,complete:e,callback:t};return s.push(n),n}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return jt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function s(R,L){return R.charCodeAt(L)<<24|R.charCodeAt(L+1)<<16|R.charCodeAt(L+2)<<8|R.charCodeAt(L+3)&255}function n(R,L,O,I){const D=R.substring(0,L),B=R.substring(L+O);return D+I+B}let r,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const c=a.getContext("2d");let h=0;function u(R,L){if(++h>30){Lt("Load test font never loaded."),L();return}if(c.font="30px "+R,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){L();return}setTimeout(u.bind(null,R,L))}const f=`lt${Date.now()}${this.loadTestFontId++}`;let p=this._loadTestFont;p=n(p,976,f.length,f);const _=16,v=1482184792;let x=s(p,_);for(r=0,o=f.length-3;r<o;r+=4)x=x-v+s(f,r)|0;r<f.length&&(x=x-v+s(f+"XXX",r)|0),p=n(p,_,4,fR(x));const S=`url(data:font/opentype;base64,${btoa(p)});`,C=`@font-face {font-family:"${f}";src:${S}}`;this.insertRule(C);const T=this._document.createElement("div");T.style.visibility="hidden",T.style.width=T.style.height="10px",T.style.position="absolute",T.style.top=T.style.left="0px";for(const R of[t.loadedName,f]){const L=this._document.createElement("span");L.textContent="Hi",L.style.fontFamily=R,T.append(L)}this._document.body.append(T),u(f,()=>{T.remove(),e.complete()})}}Sc=new WeakMap;class RR{constructor(t,e=null){this.compiledGlyphs=Object.create(null);for(const s in t)this[s]=t[s];this._inspectFont=e}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${u0(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${t}}`}return(s=this._inspectFont)==null||s.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const s=this.loadedName+"_path_"+e;let n;try{n=t.get(s)}catch(o){Lt(`getPathGenerator - ignoring character: "${o}".`)}const r=new Path2D(n||"");return this.fontExtraProperties||t.delete(s),this.compiledGlyphs[e]=r}}const Af={DATA:1,ERROR:2},Ue={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function pw(){}function Ys(i){if(i instanceof jo||i instanceof Om||i instanceof hw||i instanceof Sp||i instanceof dm)return i;switch(i instanceof Error||typeof i=="object"&&i!==null||fe('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new jo(i.message);case"InvalidPDFException":return new Om(i.message);case"PasswordException":return new hw(i.message,i.code);case"ResponseException":return new Sp(i.message,i.status,i.missing);case"UnknownErrorException":return new dm(i.message,i.details)}return new dm(i.message,i.toString())}var xc,zi,W0,q0,G0,zf;class jh{constructor(t,e,s){w(this,zi);w(this,xc,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",A(this,zi,W0).bind(this),{signal:l(this,xc).signal})}on(t,e){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=e}send(t,e,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},s)}sendWithPromise(t,e,s){const n=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[n]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:n,data:e},s)}catch(o){r.reject(o)}return r.promise}sendWithStream(t,e,s,n){const r=this.streamId++,o=this.sourceName,a=this.targetName,c=this.comObj;return new ReadableStream({start:h=>{const u=Promise.withResolvers();return this.streamControllers[r]={controller:h,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:a,action:t,streamId:r,data:e,desiredSize:h.desiredSize},n),u.promise},pull:h=>{const u=Promise.withResolvers();return this.streamControllers[r].pullCall=u,c.postMessage({sourceName:o,targetName:a,stream:Ue.PULL,streamId:r,desiredSize:h.desiredSize}),u.promise},cancel:h=>{Ge(h instanceof Error,"cancel must have a valid reason");const u=Promise.withResolvers();return this.streamControllers[r].cancelCall=u,this.streamControllers[r].isClosed=!0,c.postMessage({sourceName:o,targetName:a,stream:Ue.CANCEL,streamId:r,reason:Ys(h)}),u.promise}},s)}destroy(){var t;(t=l(this,xc))==null||t.abort(),b(this,xc,null)}}xc=new WeakMap,zi=new WeakSet,W0=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){A(this,zi,G0).call(this,t);return}if(t.callback){const s=t.callbackId,n=this.callbackCapabilities[s];if(!n)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],t.callback===Af.DATA)n.resolve(t.data);else if(t.callback===Af.ERROR)n.reject(Ys(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const s=this.sourceName,n=t.sourceName,r=this.comObj;Promise.try(e,t.data).then(function(o){r.postMessage({sourceName:s,targetName:n,callback:Af.DATA,callbackId:t.callbackId,data:o})},function(o){r.postMessage({sourceName:s,targetName:n,callback:Af.ERROR,callbackId:t.callbackId,reason:Ys(o)})});return}if(t.streamId){A(this,zi,q0).call(this,t);return}e(t.data)},q0=function(t){const e=t.streamId,s=this.sourceName,n=t.sourceName,r=this.comObj,o=this,a=this.actionHandler[t.action],c={enqueue(h,u=1,f){if(this.isCancelled)return;const p=this.desiredSize;this.desiredSize-=u,p>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:s,targetName:n,stream:Ue.ENQUEUE,streamId:e,chunk:h},f)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:n,stream:Ue.CLOSE,streamId:e}),delete o.streamSinks[e])},error(h){Ge(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:n,stream:Ue.ERROR,streamId:e,reason:Ys(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[e]=c,Promise.try(a,t.data,c).then(function(){r.postMessage({sourceName:s,targetName:n,stream:Ue.START_COMPLETE,streamId:e,success:!0})},function(h){r.postMessage({sourceName:s,targetName:n,stream:Ue.START_COMPLETE,streamId:e,reason:Ys(h)})})},G0=function(t){const e=t.streamId,s=this.sourceName,n=t.sourceName,r=this.comObj,o=this.streamControllers[e],a=this.streamSinks[e];switch(t.stream){case Ue.START_COMPLETE:t.success?o.startCall.resolve():o.startCall.reject(Ys(t.reason));break;case Ue.PULL_COMPLETE:t.success?o.pullCall.resolve():o.pullCall.reject(Ys(t.reason));break;case Ue.PULL:if(!a){r.postMessage({sourceName:s,targetName:n,stream:Ue.PULL_COMPLETE,streamId:e,success:!0});break}a.desiredSize<=0&&t.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=t.desiredSize,Promise.try(a.onPull||pw).then(function(){r.postMessage({sourceName:s,targetName:n,stream:Ue.PULL_COMPLETE,streamId:e,success:!0})},function(h){r.postMessage({sourceName:s,targetName:n,stream:Ue.PULL_COMPLETE,streamId:e,reason:Ys(h)})});break;case Ue.ENQUEUE:if(Ge(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case Ue.CLOSE:if(Ge(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),A(this,zi,zf).call(this,o,e);break;case Ue.ERROR:Ge(o,"error should have stream controller"),o.controller.error(Ys(t.reason)),A(this,zi,zf).call(this,o,e);break;case Ue.CANCEL_COMPLETE:t.success?o.cancelCall.resolve():o.cancelCall.reject(Ys(t.reason)),A(this,zi,zf).call(this,o,e);break;case Ue.CANCEL:if(!a)break;const c=Ys(t.reason);Promise.try(a.onCancel||pw,c).then(function(){r.postMessage({sourceName:s,targetName:n,stream:Ue.CANCEL_COMPLETE,streamId:e,success:!0})},function(h){r.postMessage({sourceName:s,targetName:n,stream:Ue.CANCEL_COMPLETE,streamId:e,reason:Ys(h)})}),a.sinkCapability.reject(c),a.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},zf=async function(t,e){var s,n,r;await Promise.allSettled([(s=t.startCall)==null?void 0:s.promise,(n=t.pullCall)==null?void 0:n.promise,(r=t.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[e]};var Uu;class X0{constructor({enableHWA:t=!1}){w(this,Uu,!1);b(this,Uu,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(t,e);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!l(this,Uu)})}}reset(t,e,s){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){fe("Abstract method `_createCanvas` called.")}}Uu=new WeakMap;class kR extends X0{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const s=this._document.createElement("canvas");return s.width=t,s.height=e,s}}class K0{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){fe("Abstract method `_fetch` called.")}}class gw extends K0{async _fetch(t){const e=await qd(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):Wd(e)}}class Y0{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,s,n,r){return"none"}destroy(t=!1){}}var Da,Cc,fr,pr,Ts,Oa,Fa,lt,xs,Vh,Gl,Wf,Xl,Q0,eb,Kl,Uh,zh,sb,Wh;class IR extends Y0{constructor({docId:e,ownerDocument:s=globalThis.document}){super();w(this,lt);w(this,Da);w(this,Cc);w(this,fr);w(this,pr);w(this,Ts);w(this,Oa);w(this,Fa,0);b(this,pr,e),b(this,Ts,s)}addFilter(e){if(!e)return"none";let s=l(this,lt,xs).get(e);if(s)return s;const[n,r,o]=A(this,lt,Wf).call(this,e),a=e.length===1?n:`${n}${r}${o}`;if(s=l(this,lt,xs).get(a),s)return l(this,lt,xs).set(e,s),s;const c=`g_${l(this,pr)}_transfer_map_${Bs(this,Fa)._++}`,h=A(this,lt,Xl).call(this,c);l(this,lt,xs).set(e,h),l(this,lt,xs).set(a,h);const u=A(this,lt,Kl).call(this,c);return A(this,lt,zh).call(this,n,r,o,u),h}addHCMFilter(e,s){var _;const n=`${e}-${s}`,r="base";let o=l(this,lt,Vh).get(r);if((o==null?void 0:o.key)===n||(o?((_=o.filter)==null||_.remove(),o.key=n,o.url="none",o.filter=null):(o={key:n,url:"none",filter:null},l(this,lt,Vh).set(r,o)),!e||!s))return o.url;const a=A(this,lt,Wh).call(this,e);e=pt.makeHexColor(...a);const c=A(this,lt,Wh).call(this,s);if(s=pt.makeHexColor(...c),l(this,lt,Gl).style.color="",e==="#000000"&&s==="#ffffff"||e===s)return o.url;const h=new Array(256);for(let v=0;v<=255;v++){const x=v/255;h[v]=x<=.03928?x/12.92:((x+.055)/1.055)**2.4}const u=h.join(","),f=`g_${l(this,pr)}_hcm_filter`,p=o.filter=A(this,lt,Kl).call(this,f);A(this,lt,zh).call(this,u,u,u,p),A(this,lt,eb).call(this,p);const g=(v,x)=>{const S=a[v]/255,C=c[v]/255,T=new Array(x+1);for(let R=0;R<=x;R++)T[R]=S+R/x*(C-S);return T.join(",")};return A(this,lt,zh).call(this,g(0,5),g(1,5),g(2,5),p),o.url=A(this,lt,Xl).call(this,f),o.url}addAlphaFilter(e){let s=l(this,lt,xs).get(e);if(s)return s;const[n]=A(this,lt,Wf).call(this,[e]),r=`alpha_${n}`;if(s=l(this,lt,xs).get(r),s)return l(this,lt,xs).set(e,s),s;const o=`g_${l(this,pr)}_alpha_map_${Bs(this,Fa)._++}`,a=A(this,lt,Xl).call(this,o);l(this,lt,xs).set(e,a),l(this,lt,xs).set(r,a);const c=A(this,lt,Kl).call(this,o);return A(this,lt,sb).call(this,n,c),a}addLuminosityFilter(e){let s=l(this,lt,xs).get(e||"luminosity");if(s)return s;let n,r;if(e?([n]=A(this,lt,Wf).call(this,[e]),r=`luminosity_${n}`):r="luminosity",s=l(this,lt,xs).get(r),s)return l(this,lt,xs).set(e,s),s;const o=`g_${l(this,pr)}_luminosity_map_${Bs(this,Fa)._++}`,a=A(this,lt,Xl).call(this,o);l(this,lt,xs).set(e,a),l(this,lt,xs).set(r,a);const c=A(this,lt,Kl).call(this,o);return A(this,lt,Q0).call(this,c),e&&A(this,lt,sb).call(this,n,c),a}addHighlightHCMFilter(e,s,n,r,o){var C;const a=`${s}-${n}-${r}-${o}`;let c=l(this,lt,Vh).get(e);if((c==null?void 0:c.key)===a||(c?((C=c.filter)==null||C.remove(),c.key=a,c.url="none",c.filter=null):(c={key:a,url:"none",filter:null},l(this,lt,Vh).set(e,c)),!s||!n))return c.url;const[h,u]=[s,n].map(A(this,lt,Wh).bind(this));let f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),p=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[g,_]=[r,o].map(A(this,lt,Wh).bind(this));p<f&&([f,p,g,_]=[p,f,_,g]),l(this,lt,Gl).style.color="";const v=(T,R,L)=>{const O=new Array(256),I=(p-f)/L,D=T/255,B=(R-T)/(255*L);let K=0;for(let Q=0;Q<=L;Q++){const bt=Math.round(f+Q*I),yt=D+Q*B;for(let St=K;St<=bt;St++)O[St]=yt;K=bt+1}for(let Q=K;Q<256;Q++)O[Q]=O[K-1];return O.join(",")},x=`g_${l(this,pr)}_hcm_${e}_filter`,S=c.filter=A(this,lt,Kl).call(this,x);return A(this,lt,eb).call(this,S),A(this,lt,zh).call(this,v(g[0],_[0],5),v(g[1],_[1],5),v(g[2],_[2],5),S),c.url=A(this,lt,Xl).call(this,x),c.url}destroy(e=!1){var s,n,r,o;e&&((s=l(this,Oa))!=null&&s.size)||((n=l(this,fr))==null||n.parentNode.parentNode.remove(),b(this,fr,null),(r=l(this,Cc))==null||r.clear(),b(this,Cc,null),(o=l(this,Oa))==null||o.clear(),b(this,Oa,null),b(this,Fa,0))}}Da=new WeakMap,Cc=new WeakMap,fr=new WeakMap,pr=new WeakMap,Ts=new WeakMap,Oa=new WeakMap,Fa=new WeakMap,lt=new WeakSet,xs=function(){return l(this,Cc)||b(this,Cc,new Map)},Vh=function(){return l(this,Oa)||b(this,Oa,new Map)},Gl=function(){if(!l(this,fr)){const e=l(this,Ts).createElement("div"),{style:s}=e;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const n=l(this,Ts).createElementNS(Qn,"svg");n.setAttribute("width",0),n.setAttribute("height",0),b(this,fr,l(this,Ts).createElementNS(Qn,"defs")),e.append(n),n.append(l(this,fr)),l(this,Ts).body.append(e)}return l(this,fr)},Wf=function(e){if(e.length===1){const h=e[0],u=new Array(256);for(let p=0;p<256;p++)u[p]=h[p]/255;const f=u.join(",");return[f,f,f]}const[s,n,r]=e,o=new Array(256),a=new Array(256),c=new Array(256);for(let h=0;h<256;h++)o[h]=s[h]/255,a[h]=n[h]/255,c[h]=r[h]/255;return[o.join(","),a.join(","),c.join(",")]},Xl=function(e){if(l(this,Da)===void 0){b(this,Da,"");const s=l(this,Ts).URL;s!==l(this,Ts).baseURI&&(mg(s)?Lt('#createUrl: ignore "data:"-URL for performance reasons.'):b(this,Da,l0(s,"")))}return`url(${l(this,Da)}#${e})`},Q0=function(e){const s=l(this,Ts).createElementNS(Qn,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(s)},eb=function(e){const s=l(this,Ts).createElementNS(Qn,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(s)},Kl=function(e){const s=l(this,Ts).createElementNS(Qn,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",e),l(this,lt,Gl).append(s),s},Uh=function(e,s,n){const r=l(this,Ts).createElementNS(Qn,s);r.setAttribute("type","discrete"),r.setAttribute("tableValues",n),e.append(r)},zh=function(e,s,n,r){const o=l(this,Ts).createElementNS(Qn,"feComponentTransfer");r.append(o),A(this,lt,Uh).call(this,o,"feFuncR",e),A(this,lt,Uh).call(this,o,"feFuncG",s),A(this,lt,Uh).call(this,o,"feFuncB",n)},sb=function(e,s){const n=l(this,Ts).createElementNS(Qn,"feComponentTransfer");s.append(n),A(this,lt,Uh).call(this,n,"feFuncA",e)},Wh=function(e){return l(this,lt,Gl).style.color=e,Sv(getComputedStyle(l(this,lt,Gl)).getPropertyValue("color"))};class J0{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(s=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){fe("Abstract method `_fetch` called.")}}class mw extends J0{async _fetch(t){const e=await qd(t,"arraybuffer");return new Uint8Array(e)}}class Z0{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(s=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){fe("Abstract method `_fetch` called.")}}class bw extends Z0{async _fetch(t){const e=await qd(t,"arraybuffer");return new Uint8Array(e)}}qs&&Lt("Please use the `legacy` build in Node.js environments.");async function Tv(i){const e=await process.getBuiltinModule("fs").promises.readFile(i);return new Uint8Array(e)}class LR extends Y0{}class MR extends X0{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class DR extends K0{async _fetch(t){return Tv(t)}}class OR extends J0{async _fetch(t){return Tv(t)}}class FR extends Z0{async _fetch(t){return Tv(t)}}const vs={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function ib(i,t){if(!t)return;const e=t[2]-t[0],s=t[3]-t[1],n=new Path2D;n.rect(t[0],t[1],e,s),i.clip(n)}class Pv{isModifyingCurrentTransform(){return!1}getPattern(){fe("Abstract method `getPattern` called.")}}class NR extends Pv{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)e.addColorStop(s[0],s[1]);return e}getPattern(t,e,s,n){let r;if(n===vs.STROKE||n===vs.FILL){const o=e.current.getClippedPathBoundingBox(n,Ie(t))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,h=e.cachedCanvases.getCanvas("pattern",a,c),u=h.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-o[0],-o[1]),s=pt.transform(s,[1,0,0,1,o[0],o[1]]),u.transform(...e.baseTransform),this.matrix&&u.transform(...this.matrix),ib(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),r=t.createPattern(h.canvas,"no-repeat");const f=new DOMMatrix(s);r.setTransform(f)}else ib(t,this._bbox),r=this._createGradient(t);return r}}function gm(i,t,e,s,n,r,o,a){const c=t.coords,h=t.colors,u=i.data,f=i.width*4;let p;c[e+1]>c[s+1]&&(p=e,e=s,s=p,p=r,r=o,o=p),c[s+1]>c[n+1]&&(p=s,s=n,n=p,p=o,o=a,a=p),c[e+1]>c[s+1]&&(p=e,e=s,s=p,p=r,r=o,o=p);const g=(c[e]+t.offsetX)*t.scaleX,_=(c[e+1]+t.offsetY)*t.scaleY,v=(c[s]+t.offsetX)*t.scaleX,x=(c[s+1]+t.offsetY)*t.scaleY,S=(c[n]+t.offsetX)*t.scaleX,C=(c[n+1]+t.offsetY)*t.scaleY;if(_>=C)return;const T=h[r],R=h[r+1],L=h[r+2],O=h[o],I=h[o+1],D=h[o+2],B=h[a],K=h[a+1],Q=h[a+2],bt=Math.round(_),yt=Math.round(C);let St,Ut,J,X,Pt,De,z,Ee;for(let Vt=bt;Vt<=yt;Vt++){if(Vt<x){const H=Vt<_?0:(_-Vt)/(_-x);St=g-(g-v)*H,Ut=T-(T-O)*H,J=R-(R-I)*H,X=L-(L-D)*H}else{let H;Vt>C?H=1:x===C?H=0:H=(x-Vt)/(x-C),St=v-(v-S)*H,Ut=O-(O-B)*H,J=I-(I-K)*H,X=D-(D-Q)*H}let Qt;Vt<_?Qt=0:Vt>C?Qt=1:Qt=(_-Vt)/(_-C),Pt=g-(g-S)*Qt,De=T-(T-B)*Qt,z=R-(R-K)*Qt,Ee=L-(L-Q)*Qt;const Pe=Math.round(Math.min(St,Pt)),Ye=Math.round(Math.max(St,Pt));let qt=f*Vt+Pe*4;for(let H=Pe;H<=Ye;H++)Qt=(St-H)/(St-Pt),Qt<0?Qt=0:Qt>1&&(Qt=1),u[qt++]=Ut-(Ut-De)*Qt|0,u[qt++]=J-(J-z)*Qt|0,u[qt++]=X-(X-Ee)*Qt|0,u[qt++]=255}}function $R(i,t,e){const s=t.coords,n=t.colors;let r,o;switch(t.type){case"lattice":const a=t.verticesPerRow,c=Math.floor(s.length/a)-1,h=a-1;for(r=0;r<c;r++){let u=r*a;for(let f=0;f<h;f++,u++)gm(i,e,s[u],s[u+1],s[u+a],n[u],n[u+1],n[u+a]),gm(i,e,s[u+a+1],s[u+1],s[u+a],n[u+a+1],n[u+1],n[u+a])}break;case"triangles":for(r=0,o=s.length;r<o;r+=3)gm(i,e,s[r],s[r+1],s[r+2],n[r],n[r+1],n[r+2]);break;default:throw new Error("illegal figure")}}class BR extends Pv{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,s){const a=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-a,u=Math.ceil(this._bounds[3])-c,f=Math.min(Math.ceil(Math.abs(h*t[0]*1.1)),3e3),p=Math.min(Math.ceil(Math.abs(u*t[1]*1.1)),3e3),g=h/f,_=u/p,v={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-c,scaleX:1/g,scaleY:1/_},x=f+2*2,S=p+2*2,C=s.getCanvas("mesh",x,S),T=C.context,R=T.createImageData(f,p);if(e){const O=R.data;for(let I=0,D=O.length;I<D;I+=4)O[I]=e[0],O[I+1]=e[1],O[I+2]=e[2],O[I+3]=255}for(const O of this._figures)$R(R,O,v);return T.putImageData(R,2,2),{canvas:C.canvas,offsetX:a-2*g,offsetY:c-2*_,scaleX:g,scaleY:_}}isModifyingCurrentTransform(){return!0}getPattern(t,e,s,n){ib(t,this._bbox);const r=new Float32Array(2);if(n===vs.SHADING)pt.singularValueDecompose2dScale(Ie(t),r);else if(this.matrix){pt.singularValueDecompose2dScale(this.matrix,r);const[a,c]=r;pt.singularValueDecompose2dScale(e.baseTransform,r),r[0]*=a,r[1]*=c}else pt.singularValueDecompose2dScale(e.baseTransform,r);const o=this._createMeshCanvas(r,n===vs.SHADING?null:this._background,e.cachedCanvases);return n!==vs.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(o.offsetX,o.offsetY),t.scale(o.scaleX,o.scaleY),t.createPattern(o.canvas,"no-repeat")}}class HR extends Pv{getPattern(){return"hotpink"}}function jR(i){switch(i[0]){case"RadialAxial":return new NR(i);case"Mesh":return new BR(i);case"Dummy":return new HR}throw new Error(`Unknown IR type: ${i[0]}`)}const vw={COLORED:1,UNCOLORED:2},Bp=class Bp{constructor(t,e,s,n){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=s,this.baseTransform=n}createPatternCanvas(t){const{bbox:e,operatorList:s,paintType:n,tilingType:r,color:o,canvasGraphicsFactory:a}=this;let{xstep:c,ystep:h}=this;c=Math.abs(c),h=Math.abs(h),gg("TilingType: "+r);const u=e[0],f=e[1],p=e[2],g=e[3],_=p-u,v=g-f,x=new Float32Array(2);pt.singularValueDecompose2dScale(this.matrix,x);const[S,C]=x;pt.singularValueDecompose2dScale(this.baseTransform,x);const T=S*x[0],R=C*x[1];let L=_,O=v,I=!1,D=!1;const B=Math.ceil(c*T),K=Math.ceil(h*R),Q=Math.ceil(_*T),bt=Math.ceil(v*R);B>=Q?L=c:I=!0,K>=bt?O=h:D=!0;const yt=this.getSizeAndScale(L,this.ctx.canvas.width,T),St=this.getSizeAndScale(O,this.ctx.canvas.height,R),Ut=t.cachedCanvases.getCanvas("pattern",yt.size,St.size),J=Ut.context,X=a.createCanvasGraphics(J);if(X.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(X,n,o),J.translate(-yt.scale*u,-St.scale*f),X.transform(yt.scale,0,0,St.scale,0,0),J.save(),this.clipBbox(X,u,f,p,g),X.baseTransform=Ie(X.ctx),X.executeOperatorList(s),X.endDrawing(),J.restore(),I||D){const Pt=Ut.canvas;I&&(L=c),D&&(O=h);const De=this.getSizeAndScale(L,this.ctx.canvas.width,T),z=this.getSizeAndScale(O,this.ctx.canvas.height,R),Ee=De.size,Vt=z.size,Qt=t.cachedCanvases.getCanvas("pattern-workaround",Ee,Vt),Pe=Qt.context,Ye=I?Math.floor(_/c):0,qt=D?Math.floor(v/h):0;for(let H=0;H<=Ye;H++)for(let V=0;V<=qt;V++)Pe.drawImage(Pt,Ee*H,Vt*V,Ee,Vt,0,0,Ee,Vt);return{canvas:Qt.canvas,scaleX:De.scale,scaleY:z.scale,offsetX:u,offsetY:f}}return{canvas:Ut.canvas,scaleX:yt.scale,scaleY:St.scale,offsetX:u,offsetY:f}}getSizeAndScale(t,e,s){const n=Math.max(Bp.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*s);return r>=n?r=n:s=r/t,{scale:s,size:r}}clipBbox(t,e,s,n,r){const o=n-e,a=r-s;t.ctx.rect(e,s,o,a),pt.axialAlignedBoundingBox([e,s,n,r],Ie(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,s){const n=t.ctx,r=t.current;switch(e){case vw.COLORED:const o=this.ctx;n.fillStyle=o.fillStyle,n.strokeStyle=o.strokeStyle,r.fillColor=o.fillStyle,r.strokeColor=o.strokeStyle;break;case vw.UNCOLORED:const a=pt.makeHexColor(s[0],s[1],s[2]);n.fillStyle=a,n.strokeStyle=a,r.fillColor=a,r.strokeColor=a;break;default:throw new dR(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,s,n){let r=s;n!==vs.SHADING&&(r=pt.transform(r,e.baseTransform),this.matrix&&(r=pt.transform(r,this.matrix)));const o=this.createPatternCanvas(e);let a=new DOMMatrix(r);a=a.translate(o.offsetX,o.offsetY),a=a.scale(1/o.scaleX,1/o.scaleY);const c=t.createPattern(o.canvas,"repeat");return c.setTransform(a),c}};Z(Bp,"MAX_PATTERN_SIZE",3e3);let nb=Bp;function VR({src:i,srcPos:t=0,dest:e,width:s,height:n,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const a=Es.isLittleEndian?4278190080:255,[c,h]=o?[r,a]:[a,r],u=s>>3,f=s&7,p=i.length;e=new Uint32Array(e.buffer);let g=0;for(let _=0;_<n;_++){for(const x=t+u;t<x;t++){const S=t<p?i[t]:255;e[g++]=S&128?h:c,e[g++]=S&64?h:c,e[g++]=S&32?h:c,e[g++]=S&16?h:c,e[g++]=S&8?h:c,e[g++]=S&4?h:c,e[g++]=S&2?h:c,e[g++]=S&1?h:c}if(f===0)continue;const v=t<p?i[t++]:255;for(let x=0;x<f;x++)e[g++]=v&1<<7-x?h:c}return{srcPos:t,destPos:g}}const _w=16,yw=100,UR=15,ww=10,ei=16,mm=new DOMMatrix,Ei=new Float32Array(2),Zl=new Float32Array([1/0,1/0,-1/0,-1/0]);function zR(i,t){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){t.save(),this.__originalSave()},i.restore=function(){t.restore(),this.__originalRestore()},i.translate=function(e,s){t.translate(e,s),this.__originalTranslate(e,s)},i.scale=function(e,s){t.scale(e,s),this.__originalScale(e,s)},i.transform=function(e,s,n,r,o,a){t.transform(e,s,n,r,o,a),this.__originalTransform(e,s,n,r,o,a)},i.setTransform=function(e,s,n,r,o,a){t.setTransform(e,s,n,r,o,a),this.__originalSetTransform(e,s,n,r,o,a)},i.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},i.rotate=function(e){t.rotate(e),this.__originalRotate(e)},i.clip=function(e){t.clip(e),this.__originalClip(e)},i.moveTo=function(e,s){t.moveTo(e,s),this.__originalMoveTo(e,s)},i.lineTo=function(e,s){t.lineTo(e,s),this.__originalLineTo(e,s)},i.bezierCurveTo=function(e,s,n,r,o,a){t.bezierCurveTo(e,s,n,r,o,a),this.__originalBezierCurveTo(e,s,n,r,o,a)},i.rect=function(e,s,n,r){t.rect(e,s,n,r),this.__originalRect(e,s,n,r)},i.closePath=function(){t.closePath(),this.__originalClosePath()},i.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class WR{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,s){let n;return this.cache[t]!==void 0?(n=this.cache[t],this.canvasFactory.reset(n,e,s)):(n=this.canvasFactory.create(e,s),this.cache[t]=n),n}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Ef(i,t,e,s,n,r,o,a,c,h){const[u,f,p,g,_,v]=Ie(i);if(f===0&&p===0){const C=o*u+_,T=Math.round(C),R=a*g+v,L=Math.round(R),O=(o+c)*u+_,I=Math.abs(Math.round(O)-T)||1,D=(a+h)*g+v,B=Math.abs(Math.round(D)-L)||1;return i.setTransform(Math.sign(u),0,0,Math.sign(g),T,L),i.drawImage(t,e,s,n,r,0,0,I,B),i.setTransform(u,f,p,g,_,v),[I,B]}if(u===0&&g===0){const C=a*p+_,T=Math.round(C),R=o*f+v,L=Math.round(R),O=(a+h)*p+_,I=Math.abs(Math.round(O)-T)||1,D=(o+c)*f+v,B=Math.abs(Math.round(D)-L)||1;return i.setTransform(0,Math.sign(f),Math.sign(p),0,T,L),i.drawImage(t,e,s,n,r,0,0,B,I),i.setTransform(u,f,p,g,_,v),[B,I]}i.drawImage(t,e,s,n,r,o,a,c,h);const x=Math.hypot(u,f),S=Math.hypot(p,g);return[x*c,S*h]}class Aw{constructor(t,e){Z(this,"alphaIsShape",!1);Z(this,"fontSize",0);Z(this,"fontSizeScale",1);Z(this,"textMatrix",null);Z(this,"textMatrixScale",1);Z(this,"fontMatrix",Dm);Z(this,"leading",0);Z(this,"x",0);Z(this,"y",0);Z(this,"lineX",0);Z(this,"lineY",0);Z(this,"charSpacing",0);Z(this,"wordSpacing",0);Z(this,"textHScale",1);Z(this,"textRenderingMode",Ss.FILL);Z(this,"textRise",0);Z(this,"fillColor","#000000");Z(this,"strokeColor","#000000");Z(this,"patternFill",!1);Z(this,"patternStroke",!1);Z(this,"fillAlpha",1);Z(this,"strokeAlpha",1);Z(this,"lineWidth",1);Z(this,"activeSMask",null);Z(this,"transferMaps","none");this.clipBox=new Float32Array([0,0,t,e]),this.minMax=Zl.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=vs.FILL,e=null){const s=this.minMax.slice();if(t===vs.STROKE){e||fe("Stroke bounding box must include transform."),pt.singularValueDecompose2dScale(e,Ei);const n=Ei[0]*this.lineWidth/2,r=Ei[1]*this.lineWidth/2;s[0]-=n,s[1]-=r,s[2]+=n,s[3]+=r}return s}updateClipFromPath(){const t=pt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(Zl,0)}getClippedPathBoundingBox(t=vs.FILL,e=null){return pt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function Ew(i,t){if(t instanceof ImageData){i.putImageData(t,0,0);return}const e=t.height,s=t.width,n=e%ei,r=(e-n)/ei,o=n===0?r:r+1,a=i.createImageData(s,ei);let c=0,h;const u=t.data,f=a.data;let p,g,_,v;if(t.kind===Of.GRAYSCALE_1BPP){const x=u.byteLength,S=new Uint32Array(f.buffer,0,f.byteLength>>2),C=S.length,T=s+7>>3,R=4294967295,L=Es.isLittleEndian?4278190080:255;for(p=0;p<o;p++){for(_=p<r?ei:n,h=0,g=0;g<_;g++){const O=x-c;let I=0;const D=O>T?s:O*8-7,B=D&-8;let K=0,Q=0;for(;I<B;I+=8)Q=u[c++],S[h++]=Q&128?R:L,S[h++]=Q&64?R:L,S[h++]=Q&32?R:L,S[h++]=Q&16?R:L,S[h++]=Q&8?R:L,S[h++]=Q&4?R:L,S[h++]=Q&2?R:L,S[h++]=Q&1?R:L;for(;I<D;I++)K===0&&(Q=u[c++],K=128),S[h++]=Q&K?R:L,K>>=1}for(;h<C;)S[h++]=0;i.putImageData(a,0,p*ei)}}else if(t.kind===Of.RGBA_32BPP){for(g=0,v=s*ei*4,p=0;p<r;p++)f.set(u.subarray(c,c+v)),c+=v,i.putImageData(a,0,g),g+=ei;p<o&&(v=s*n*4,f.set(u.subarray(c,c+v)),i.putImageData(a,0,g))}else if(t.kind===Of.RGB_24BPP)for(_=ei,v=s*_,p=0;p<o;p++){for(p>=r&&(_=n,v=s*_),h=0,g=v;g--;)f[h++]=u[c++],f[h++]=u[c++],f[h++]=u[c++],f[h++]=255;i.putImageData(a,0,p*ei)}else throw new Error(`bad image kind: ${t.kind}`)}function Sw(i,t){if(t.bitmap){i.drawImage(t.bitmap,0,0);return}const e=t.height,s=t.width,n=e%ei,r=(e-n)/ei,o=n===0?r:r+1,a=i.createImageData(s,ei);let c=0;const h=t.data,u=a.data;for(let f=0;f<o;f++){const p=f<r?ei:n;({srcPos:c}=VR({src:h,srcPos:c,dest:u,width:s,height:p,nonBlackColor:0})),i.putImageData(a,0,f*ei)}}function Lh(i,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of e)i[s]!==void 0&&(t[s]=i[s]);i.setLineDash!==void 0&&(t.setLineDash(i.getLineDash()),t.lineDashOffset=i.lineDashOffset)}function Sf(i){i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0);const{filter:t}=i;t!=="none"&&t!==""&&(i.filter="none")}function xw(i,t){if(t)return!0;pt.singularValueDecompose2dScale(i,Ei);const e=Math.fround(Hr.pixelRatio*Vo.PDF_TO_CSS_UNITS);return Ei[0]<=e&&Ei[1]<=e}const qR=["butt","round","square"],GR=["miter","round","bevel"],XR={},Cw={};var fn,rb,ob,ab;const Ov=class Ov{constructor(t,e,s,n,r,{optionalContentConfig:o,markedContentStack:a=null},c,h){w(this,fn);this.ctx=t,this.current=new Aw(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=s,this.canvasFactory=n,this.filterFactory=r,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new WR(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:s=!1,background:n=null}){const r=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=n||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=a,s){const c=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...Ie(this.compositeCtx))}this.ctx.save(),Sf(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Ie(this.ctx)}executeOperatorList(t,e,s,n){const r=t.argsArray,o=t.fnArray;let a=e||0;const c=r.length;if(c===a)return a;const h=c-a>ww&&typeof s=="function",u=h?Date.now()+UR:0;let f=0;const p=this.commonObjs,g=this.objs;let _;for(;;){if(n!==void 0&&a===n.nextBreakPoint)return n.breakIt(a,s),a;if(_=o[a],_!==Ep.dependency)this[_].apply(this,r[a]);else for(const v of r[a]){const x=v.startsWith("g_")?p:g;if(!x.has(v))return x.get(v,s),a}if(a++,a===c)return a;if(h&&++f>ww){if(Date.now()>u)return s(),a;f=0}}}endDrawing(){A(this,fn,rb).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),A(this,fn,ob).call(this)}_scaleImage(t,e){const s=t.width??t.displayWidth,n=t.height??t.displayHeight;let r=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),a=s,c=n,h="prescale1",u,f;for(;r>2&&a>1||o>2&&c>1;){let p=a,g=c;r>2&&a>1&&(p=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),r/=a/p),o>2&&c>1&&(g=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/g),u=this.cachedCanvases.getCanvas(h,p,g),f=u.context,f.clearRect(0,0,p,g),f.drawImage(t,0,0,a,c,0,0,p,g),t=u.canvas,a=p,c=g,h=h==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:a,paintHeight:c}}_createMaskCanvas(t){const e=this.ctx,{width:s,height:n}=t,r=this.current.fillColor,o=this.current.patternFill,a=Ie(e);let c,h,u,f;if((t.bitmap||t.data)&&t.count>1){const B=t.bitmap||t.data.buffer;h=JSON.stringify(o?a:[a.slice(0,4),r]),c=this._cachedBitmapsMap.get(B),c||(c=new Map,this._cachedBitmapsMap.set(B,c));const K=c.get(h);if(K&&!o){const Q=Math.round(Math.min(a[0],a[2])+a[4]),bt=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:K,offsetX:Q,offsetY:bt}}u=K}u||(f=this.cachedCanvases.getCanvas("maskCanvas",s,n),Sw(f.context,t));let p=pt.transform(a,[1/s,0,0,-1/n,0,0]);p=pt.transform(p,[1,0,0,1,0,-n]);const g=Zl.slice();pt.axialAlignedBoundingBox([0,0,s,n],p,g);const[_,v,x,S]=g,C=Math.round(x-_)||1,T=Math.round(S-v)||1,R=this.cachedCanvases.getCanvas("fillCanvas",C,T),L=R.context,O=_,I=v;L.translate(-O,-I),L.transform(...p),u||(u=this._scaleImage(f.canvas,_n(L)),u=u.img,c&&o&&c.set(h,u)),L.imageSmoothingEnabled=xw(Ie(L),t.interpolate),Ef(L,u,0,0,u.width,u.height,0,0,s,n),L.globalCompositeOperation="source-in";const D=pt.transform(_n(L),[1,0,0,1,-O,-I]);return L.fillStyle=o?r.getPattern(e,this,D,vs.FILL):r,L.fillRect(0,0,s,n),c&&!o&&(this.cachedCanvases.delete("fillCanvas"),c.set(h,R.canvas)),{canvas:R.canvas,offsetX:Math.round(O),offsetY:Math.round(I)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=qR[t]}setLineJoin(t){this.ctx.lineJoin=GR[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(t),s.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,s]of t)switch(e){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,n=this.cachedCanvases.getCanvas(s,t,e);this.suspendedCtx=this.ctx;const r=this.ctx=n.context;r.setTransform(this.suspendedCtx.getTransform()),Lh(this.suspendedCtx,r),zR(r,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Lh(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,s,n){const r=n[0],o=n[1],a=n[2]-r,c=n[3]-o;a===0||c===0||(this.genericComposeSMask(e.context,s,a,c,e.subtype,e.backdrop,e.transferMap,r,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(s.canvas,0,0),t.restore())}genericComposeSMask(t,e,s,n,r,o,a,c,h,u,f){let p=t.canvas,g=c-u,_=h-f;if(o){const x=pt.makeHexColor(...o);if(g<0||_<0||g+s>p.width||_+n>p.height){const S=this.cachedCanvases.getCanvas("maskExtension",s,n),C=S.context;C.drawImage(p,-g,-_),C.globalCompositeOperation="destination-atop",C.fillStyle=x,C.fillRect(0,0,s,n),C.globalCompositeOperation="source-over",p=S.canvas,g=_=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const S=new Path2D;S.rect(g,_,s,n),t.clip(S),t.globalCompositeOperation="destination-atop",t.fillStyle=x,t.fillRect(g,_,s,n),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&a?e.filter=this.filterFactory.addAlphaFilter(a):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(a));const v=new Path2D;v.rect(c,h,s,n),e.clip(v),e.globalCompositeOperation="destination-in",e.drawImage(p,g,_,s,n,c,h,s,n),e.restore()}save(){this.inSMaskMode&&Lh(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Lh(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,s,n,r,o){this.ctx.transform(t,e,s,n,r,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,s){let[n]=e;if(!s){n||(n=e[0]=new Path2D),this[t](n);return}if(!(n instanceof Path2D)){const r=e[0]=new Path2D;for(let o=0,a=n.length;o<a;)switch(n[o++]){case wf.moveTo:r.moveTo(n[o++],n[o++]);break;case wf.lineTo:r.lineTo(n[o++],n[o++]);break;case wf.curveTo:r.bezierCurveTo(n[o++],n[o++],n[o++],n[o++],n[o++],n[o++]);break;case wf.closePath:r.closePath();break;default:Lt(`Unrecognized drawing path operator: ${n[o-1]}`);break}n=r}pt.axialAlignedBoundingBox(s,Ie(this.ctx),this.current.minMax),this[t](n)}closePath(){this.ctx.closePath()}stroke(t,e=!0){const s=this.ctx,n=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof n=="object"&&(n!=null&&n.getPattern)){const r=n.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=n.getPattern(s,this,_n(s),vs.STROKE),r){const o=new Path2D;o.addPath(t,s.getTransform().invertSelf().multiplySelf(r)),t=o}this.rescaleAndStroke(t,!1),s.restore()}else this.rescaleAndStroke(t,!0);e&&this.consumePath(t,this.current.getClippedPathBoundingBox(vs.STROKE,Ie(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(t){this.stroke(t)}fill(t,e=!0){const s=this.ctx,n=this.current.fillColor,r=this.current.patternFill;let o=!1;if(r){const c=n.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.fillStyle=n.getPattern(s,this,_n(s),vs.FILL),c){const h=new Path2D;h.addPath(t,s.getTransform().invertSelf().multiplySelf(c)),t=h}o=!0}const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(s.fill(t,"evenodd"),this.pendingEOFill=!1):s.fill(t)),o&&s.restore(),e&&this.consumePath(t,a)}eoFill(t){this.pendingEOFill=!0,this.fill(t)}fillStroke(t){this.fill(t,!1),this.stroke(t,!1),this.consumePath(t)}eoFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}closeFillStroke(t){this.fillStroke(t)}closeEOFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}endPath(t){this.consumePath(t)}rawFillPath(t){this.ctx.fill(t)}clip(){this.pendingClip=XR}eoClip(){this.pendingClip=Cw}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0)return;const s=new Path2D,n=e.getTransform().invertSelf();for(const{transform:r,x:o,y:a,fontSize:c,path:h}of t)s.addPath(h,new DOMMatrix(r).preMultiplySelf(n).translate(o,a).scale(c,-c));e.clip(s),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var u;const s=this.commonObjs.get(t),n=this.current;if(!s)throw new Error(`Can't find font for ${t}`);if(n.fontMatrix=s.fontMatrix||Dm,(n.fontMatrix[0]===0||n.fontMatrix[3]===0)&&Lt("Invalid font matrix for font "+t),e<0?(e=-e,n.fontDirection=-1):n.fontDirection=1,this.current.font=s,this.current.fontSize=e,s.isType3Font)return;const r=s.loadedName||"sans-serif",o=((u=s.systemFontInfo)==null?void 0:u.css)||`"${r}", ${s.fallbackName}`;let a="normal";s.black?a="900":s.bold&&(a="bold");const c=s.italic?"italic":"normal";let h=e;e<_w?h=_w:e>yw&&(h=yw),this.current.fontSizeScale=e/h,this.ctx.font=`${c} ${a} ${h}px ${o}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t){const{current:e}=this;e.textMatrix=t,e.textMatrixScale=Math.hypot(t[0],t[1]),e.x=e.lineX=0,e.y=e.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,s,n,r){const o=this.ctx,a=this.current,c=a.font,h=a.textRenderingMode,u=a.fontSize/a.fontSizeScale,f=h&Ss.FILL_STROKE_MASK,p=!!(h&Ss.ADD_TO_PATH_FLAG),g=a.patternFill&&!c.missingFile,_=a.patternStroke&&!c.missingFile;let v;if((c.disableFontFace||p||g||_)&&(v=c.getPathGenerator(this.commonObjs,t)),c.disableFontFace||g||_){o.save(),o.translate(e,s),o.scale(u,-u);let x;if((f===Ss.FILL||f===Ss.FILL_STROKE)&&(n?(x=o.getTransform(),o.setTransform(...n),o.fill(A(this,fn,ab).call(this,v,x,n))):o.fill(v)),f===Ss.STROKE||f===Ss.FILL_STROKE)if(r){x||(x=o.getTransform()),o.setTransform(...r);const{a:S,b:C,c:T,d:R}=x,L=pt.inverseTransform(r),O=pt.transform([S,C,T,R,0,0],L);pt.singularValueDecompose2dScale(O,Ei),o.lineWidth*=Math.max(Ei[0],Ei[1])/u,o.stroke(A(this,fn,ab).call(this,v,x,r))}else o.lineWidth/=u,o.stroke(v);o.restore()}else(f===Ss.FILL||f===Ss.FILL_STROKE)&&o.fillText(t,e,s),(f===Ss.STROKE||f===Ss.FILL_STROKE)&&o.strokeText(t,e,s);p&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Ie(o),x:e,y:s,fontSize:u,path:v})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let s=!1;for(let n=3;n<e.length;n+=4)if(e[n]>0&&e[n]<255){s=!0;break}return jt(this,"isFontSubpixelAAEnabled",s)}showText(t){const e=this.current,s=e.font;if(s.isType3Font)return this.showType3Text(t);const n=e.fontSize;if(n===0)return;const r=this.ctx,o=e.fontSizeScale,a=e.charSpacing,c=e.wordSpacing,h=e.fontDirection,u=e.textHScale*h,f=t.length,p=s.vertical,g=p?1:-1,_=s.defaultVMetrics,v=n*e.fontMatrix[0],x=e.textRenderingMode===Ss.FILL&&!s.disableFontFace&&!e.patternFill;r.save(),e.textMatrix&&r.transform(...e.textMatrix),r.translate(e.x,e.y+e.textRise),h>0?r.scale(u,-1):r.scale(u,1);let S,C;if(e.patternFill){r.save();const I=e.fillColor.getPattern(r,this,_n(r),vs.FILL);S=Ie(r),r.restore(),r.fillStyle=I}if(e.patternStroke){r.save();const I=e.strokeColor.getPattern(r,this,_n(r),vs.STROKE);C=Ie(r),r.restore(),r.strokeStyle=I}let T=e.lineWidth;const R=e.textMatrixScale;if(R===0||T===0){const I=e.textRenderingMode&Ss.FILL_STROKE_MASK;(I===Ss.STROKE||I===Ss.FILL_STROKE)&&(T=this.getSinglePixelWidth())}else T/=R;if(o!==1&&(r.scale(o,o),T/=o),r.lineWidth=T,s.isInvalidPDFjsFont){const I=[];let D=0;for(const B of t)I.push(B.unicode),D+=B.width;r.fillText(I.join(""),0,0),e.x+=D*v*u,r.restore(),this.compose();return}let L=0,O;for(O=0;O<f;++O){const I=t[O];if(typeof I=="number"){L+=g*I*n/1e3;continue}let D=!1;const B=(I.isSpace?c:0)+a,K=I.fontChar,Q=I.accent;let bt,yt,St=I.width;if(p){const J=I.vmetric||_,X=-(I.vmetric?J[1]:St*.5)*v,Pt=J[2]*v;St=J?-J[0]:St,bt=X/o,yt=(L+Pt)/o}else bt=L/o,yt=0;if(s.remeasure&&St>0){const J=r.measureText(K).width*1e3/n*o;if(St<J&&this.isFontSubpixelAAEnabled){const X=St/J;D=!0,r.save(),r.scale(X,1),bt/=X}else St!==J&&(bt+=(St-J)/2e3*n/o)}if(this.contentVisible&&(I.isInFont||s.missingFile)){if(x&&!Q)r.fillText(K,bt,yt);else if(this.paintChar(K,bt,yt,S,C),Q){const J=bt+n*Q.offset.x/o,X=yt-n*Q.offset.y/o;this.paintChar(Q.fontChar,J,X,S,C)}}const Ut=p?St*v-B*h:St*v+B*h;L+=Ut,D&&r.restore()}p?e.y-=L:e.x+=L*u,r.restore(),this.compose()}showType3Text(t){const e=this.ctx,s=this.current,n=s.font,r=s.fontSize,o=s.fontDirection,a=n.vertical?1:-1,c=s.charSpacing,h=s.wordSpacing,u=s.textHScale*o,f=s.fontMatrix||Dm,p=t.length,g=s.textRenderingMode===Ss.INVISIBLE;let _,v,x,S;if(!(g||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),s.textMatrix&&e.transform(...s.textMatrix),e.translate(s.x,s.y+s.textRise),e.scale(u,o),_=0;_<p;++_){if(v=t[_],typeof v=="number"){S=a*v*r/1e3,this.ctx.translate(S,0),s.x+=S*u;continue}const C=(v.isSpace?h:0)+c,T=n.charProcOperatorList[v.operatorListId];T?this.contentVisible&&(this.save(),e.scale(r,r),e.transform(...f),this.executeOperatorList(T),this.restore()):Lt(`Type3 character "${v.operatorListId}" is not available.`);const R=[v.width,0];pt.applyTransform(R,f),x=R[0]*r+C,e.translate(x,0),s.x+=x*u}e.restore()}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,s,n,r,o){const a=new Path2D;a.rect(s,n,r-s,o-n),this.ctx.clip(a),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const s=this.baseTransform||Ie(this.ctx),n={createCanvasGraphics:r=>new Ov(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new nb(t,this.ctx,n,s)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,s){this.ctx.strokeStyle=this.current.strokeColor=pt.makeHexColor(t,e,s),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e,s){this.ctx.fillStyle=this.current.fillColor=pt.makeHexColor(t,e,s),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let s;return this.cachedPatterns.has(t)?s=this.cachedPatterns.get(t):(s=jR(this.getObject(t)),this.cachedPatterns.set(t,s)),e&&(s.matrix=e),s}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const s=this._getPattern(t);e.fillStyle=s.getPattern(e,this,_n(e),vs.SHADING);const n=_n(e);if(n){const{width:r,height:o}=e.canvas,a=Zl.slice();pt.axialAlignedBoundingBox([0,0,r,o],n,a);const[c,h,u,f]=a;this.ctx.fillRect(c,h,u-c,f-h)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){fe("Should not call beginInlineImage")}beginImageData(){fe("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Ie(this.ctx),e)){pt.axialAlignedBoundingBox(e,this.baseTransform,this.current.minMax);const[s,n,r,o]=e,a=new Path2D;a.rect(s,n,r-s,o-n),this.ctx.clip(a),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||gg("TODO: Support non-isolated groups."),t.knockout&&Lt("Knockout groups not supported.");const s=Ie(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let n=Zl.slice();pt.axialAlignedBoundingBox(t.bbox,Ie(e),n);const r=[0,0,e.canvas.width,e.canvas.height];n=pt.intersect(n,r)||[0,0,0,0];const o=Math.floor(n[0]),a=Math.floor(n[1]),c=Math.max(Math.ceil(n[2])-o,1),h=Math.max(Math.ceil(n[3])-a,1);this.current.startNewPathAndClipBox([0,0,c,h]);let u="groupAt"+this.groupLevel;t.smask&&(u+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(u,c,h),p=f.context;p.translate(-o,-a),p.transform(...s);let g=new Path2D;const[_,v,x,S]=t.bbox;if(g.rect(_,v,x-_,S-v),t.matrix){const C=new Path2D;C.addPath(g,new DOMMatrix(t.matrix)),g=C}p.clip(g),t.smask?this.smaskStack.push({canvas:f.canvas,context:p,offsetX:o,offsetY:a,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(o,a),e.save()),Lh(e,p),this.ctx=p,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const n=Ie(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...n);const r=Zl.slice();pt.axialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],n,r),this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(t,e,s,n,r){if(A(this,fn,rb).call(this),Sf(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const o=e[2]-e[0],a=e[3]-e[1];if(r&&this.annotationCanvasMap){s=s.slice(),s[4]-=e[0],s[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=o,e[3]=a,pt.singularValueDecompose2dScale(Ie(this.ctx),Ei);const{viewportScale:c}=this,h=Math.ceil(o*this.outputScaleX*c),u=Math.ceil(a*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(h,u);const{canvas:f,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(t,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=p,this.ctx.save(),this.ctx.setTransform(Ei[0],0,0,-Ei[1],0,a*Ei[1]),Sf(this.ctx)}else{Sf(this.ctx),this.endPath();const c=new Path2D;c.rect(e[0],e[1],o,a),this.ctx.clip(c)}}this.current=new Aw(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...n)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),A(this,fn,ob).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const s=this.ctx,n=this._createMaskCanvas(t),r=n.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(r,n.offsetX,n.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,s=0,n=0,r,o){if(!this.contentVisible)return;t=this.getObject(t.data,t);const a=this.ctx;a.save();const c=Ie(a);a.transform(e,s,n,r,0,0);const h=this._createMaskCanvas(t);a.setTransform(1,0,0,1,h.offsetX-c[4],h.offsetY-c[5]);for(let u=0,f=o.length;u<f;u+=2){const p=pt.transform(c,[e,s,n,r,o[u],o[u+1]]);a.drawImage(h.canvas,p[4],p[5])}a.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,s=this.current.fillColor,n=this.current.patternFill;for(const r of t){const{data:o,width:a,height:c,transform:h}=r,u=this.cachedCanvases.getCanvas("maskCanvas",a,c),f=u.context;f.save();const p=this.getObject(o,r);Sw(f,p),f.globalCompositeOperation="source-in",f.fillStyle=n?s.getPattern(f,this,_n(e),vs.FILL):s,f.fillRect(0,0,a,c),f.restore(),e.save(),e.transform(...h),e.scale(1,-1),Ef(e,u.canvas,0,0,a,c,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){Lt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,s,n){if(!this.contentVisible)return;const r=this.getObject(t);if(!r){Lt("Dependent image isn't ready yet");return}const o=r.width,a=r.height,c=[];for(let h=0,u=n.length;h<u;h+=2)c.push({transform:[e,0,0,s,n[h],n[h+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(r,c)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:s,height:n}=t,r=this.cachedCanvases.getCanvas("inlineImage",s,n),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(e,0,0),o.filter="none",r.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,s=t.height,n=this.ctx;this.save();const{filter:r}=n;r!=="none"&&r!==""&&(n.filter="none"),n.scale(1/e,-1/s);let o;if(t.bitmap)o=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)o=t;else{const h=this.cachedCanvases.getCanvas("inlineImage",e,s).context;Ew(h,t),o=this.applyTransferMapsToCanvas(h)}const a=this._scaleImage(o,_n(n));n.imageSmoothingEnabled=xw(Ie(n),t.interpolate),Ef(n,a.img,0,0,a.paintWidth,a.paintHeight,0,-s,e,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const s=this.ctx;let n;if(t.bitmap)n=t.bitmap;else{const r=t.width,o=t.height,c=this.cachedCanvases.getCanvas("inlineImage",r,o).context;Ew(c,t),n=this.applyTransferMapsToCanvas(c)}for(const r of e)s.save(),s.transform(...r.transform),s.scale(1,-1),Ef(s,n,r.x,r.y,r.w,r.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t,e){const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const n=this.ctx;this.pendingClip&&(s||(this.pendingClip===Cw?n.clip(t,"evenodd"):n.clip(t)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Ie(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),n=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,n)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:s,c:n,d:r}=this.ctx.getTransform();let o,a;if(s===0&&n===0){const c=Math.abs(e),h=Math.abs(r);if(c===h)if(t===0)o=a=1/c;else{const u=c*t;o=a=u<1?1/u:1}else if(t===0)o=1/c,a=1/h;else{const u=c*t,f=h*t;o=u<1?1/u:1,a=f<1?1/f:1}}else{const c=Math.abs(e*r-s*n),h=Math.hypot(e,s),u=Math.hypot(n,r);if(t===0)o=u/c,a=h/c;else{const f=t*c;o=u>f?u/f:1,a=h>f?h/f:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:s,current:{lineWidth:n}}=this,[r,o]=this.getScaleForStroking();if(r===o){s.lineWidth=(n||1)*r,s.stroke(t);return}const a=s.getLineDash();e&&s.save(),s.scale(r,o),mm.a=1/r,mm.d=1/o;const c=new Path2D;if(c.addPath(t,mm),a.length>0){const h=Math.max(r,o);s.setLineDash(a.map(u=>u/h)),s.lineDashOffset/=h}s.lineWidth=n||1,s.stroke(c),e&&s.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};fn=new WeakSet,rb=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},ob=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},ab=function(t,e,s){const n=new Path2D;return n.addPath(t,new DOMMatrix(s).invertSelf().multiplySelf(e)),n};let ac=Ov;for(const i in Ep)ac.prototype[i]!==void 0&&(ac.prototype[Ep[i]]=ac.prototype[i]);var zu,Wu;class jn{static get workerPort(){return l(this,zu)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");b(this,zu,t)}static get workerSrc(){return l(this,Wu)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");b(this,Wu,t)}}zu=new WeakMap,Wu=new WeakMap,w(jn,zu,null),w(jn,Wu,"");var Tc,qu;class KR{constructor({parsedData:t,rawData:e}){w(this,Tc);w(this,qu);b(this,Tc,t),b(this,qu,e)}getRaw(){return l(this,qu)}get(t){return l(this,Tc).get(t)??null}[Symbol.iterator](){return l(this,Tc).entries()}}Tc=new WeakMap,qu=new WeakMap;const Yl=Symbol("INTERNAL");var Gu,Xu,Ku,Pc;class YR{constructor(t,{name:e,intent:s,usage:n,rbGroups:r}){w(this,Gu,!1);w(this,Xu,!1);w(this,Ku,!1);w(this,Pc,!0);b(this,Gu,!!(t&Ai.DISPLAY)),b(this,Xu,!!(t&Ai.PRINT)),this.name=e,this.intent=s,this.usage=n,this.rbGroups=r}get visible(){if(l(this,Ku))return l(this,Pc);if(!l(this,Pc))return!1;const{print:t,view:e}=this.usage;return l(this,Gu)?(e==null?void 0:e.viewState)!=="OFF":l(this,Xu)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,s=!1){t!==Yl&&fe("Internal method `_setVisible` called."),b(this,Ku,s),b(this,Pc,e)}}Gu=new WeakMap,Xu=new WeakMap,Ku=new WeakMap,Pc=new WeakMap;var mo,ue,Rc,kc,Yu,lb;class QR{constructor(t,e=Ai.DISPLAY){w(this,Yu);w(this,mo,null);w(this,ue,new Map);w(this,Rc,null);w(this,kc,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,b(this,kc,t.order);for(const s of t.groups)l(this,ue).set(s.id,new YR(e,s));if(t.baseState==="OFF")for(const s of l(this,ue).values())s._setVisible(Yl,!1);for(const s of t.on)l(this,ue).get(s)._setVisible(Yl,!0);for(const s of t.off)l(this,ue).get(s)._setVisible(Yl,!1);b(this,Rc,this.getHash())}}isVisible(t){if(l(this,ue).size===0)return!0;if(!t)return gg("Optional content group not defined."),!0;if(t.type==="OCG")return l(this,ue).has(t.id)?l(this,ue).get(t.id).visible:(Lt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return A(this,Yu,lb).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!l(this,ue).has(e))return Lt(`Optional content group not found: ${e}`),!0;if(l(this,ue).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!l(this,ue).has(e))return Lt(`Optional content group not found: ${e}`),!0;if(!l(this,ue).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!l(this,ue).has(e))return Lt(`Optional content group not found: ${e}`),!0;if(!l(this,ue).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!l(this,ue).has(e))return Lt(`Optional content group not found: ${e}`),!0;if(l(this,ue).get(e).visible)return!1}return!0}return Lt(`Unknown optional content policy ${t.policy}.`),!0}return Lt(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,s=!0){var r;const n=l(this,ue).get(t);if(!n){Lt(`Optional content group not found: ${t}`);return}if(s&&e&&n.rbGroups.length)for(const o of n.rbGroups)for(const a of o)a!==t&&((r=l(this,ue).get(a))==null||r._setVisible(Yl,!1,!0));n._setVisible(Yl,!!e,!0),b(this,mo,null)}setOCGState({state:t,preserveRB:e}){let s;for(const n of t){switch(n){case"ON":case"OFF":case"Toggle":s=n;continue}const r=l(this,ue).get(n);if(r)switch(s){case"ON":this.setVisibility(n,!0,e);break;case"OFF":this.setVisibility(n,!1,e);break;case"Toggle":this.setVisibility(n,!r.visible,e);break}}b(this,mo,null)}get hasInitialVisibility(){return l(this,Rc)===null||this.getHash()===l(this,Rc)}getOrder(){return l(this,ue).size?l(this,kc)?l(this,kc).slice():[...l(this,ue).keys()]:null}getGroup(t){return l(this,ue).get(t)||null}getHash(){if(l(this,mo)!==null)return l(this,mo);const t=new V0;for(const[e,s]of l(this,ue))t.update(`${e}:${s.visible}`);return b(this,mo,t.hexdigest())}[Symbol.iterator](){return l(this,ue).entries()}}mo=new WeakMap,ue=new WeakMap,Rc=new WeakMap,kc=new WeakMap,Yu=new WeakSet,lb=function(t){const e=t.length;if(e<2)return!0;const s=t[0];for(let n=1;n<e;n++){const r=t[n];let o;if(Array.isArray(r))o=A(this,Yu,lb).call(this,r);else if(l(this,ue).has(r))o=l(this,ue).get(r).visible;else return Lt(`Optional content group not found: ${r}`),!0;switch(s){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return s==="And"};class JR{constructor(t,{disableRange:e=!1,disableStream:s=!1}){Ge(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:n,initialData:r,progressiveDone:o,contentDispositionFilename:a}=t;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(r==null?void 0:r.length)>0){const c=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!s,this._isRangeSupported=!e,this._contentLength=n,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((c,h)=>{this._onReceiveData({begin:c,chunk:h})}),t.addProgressListener((c,h)=>{this._onProgress({loaded:c,total:h})}),t.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const s=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const n=this._rangeReaders.some(function(r){return r._begin!==t?!1:(r._enqueue(s),!0)});Ge(n,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,s,n,r;t.total===void 0?(s=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||s.call(e,{loaded:t.loaded}):(r=(n=this._fullRequestReader)==null?void 0:n.onProgress)==null||r.call(n,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){Ge(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new ZR(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new tk(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeReaders.slice(0))s.cancel(t);this._pdfDataRangeTransport.abort()}}class ZR{constructor(t,e,s=!1,n=null){this._stream=t,this._done=s||!1,this._filename=Av(n)?n:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class tk{constructor(t,e,s){this._stream=t,this._begin=e,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function ek(i){let t=!0,e=s("filename\\*","i").exec(i);if(e){e=e[1];let u=a(e);return u=unescape(u),u=c(u),u=h(u),r(u)}if(e=o(i),e){const u=h(e);return r(u)}if(e=s("filename","i").exec(i),e){e=e[1];let u=a(e);return u=h(u),r(u)}function s(u,f){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function n(u,f){if(u){if(!/^[\x00-\xFF]+$/.test(f))return f;try{const p=new TextDecoder(u,{fatal:!0}),g=Wd(f);f=p.decode(g),t=!1}catch{}}return f}function r(u){return t&&/[\x80-\xff]/.test(u)&&(u=n("utf-8",u),t&&(u=n("iso-8859-1",u))),u}function o(u){const f=[];let p;const g=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(p=g.exec(u))!==null;){let[,v,x,S]=p;if(v=parseInt(v,10),v in f){if(v===0)break;continue}f[v]=[x,S]}const _=[];for(let v=0;v<f.length&&v in f;++v){let[x,S]=f[v];S=a(S),x&&(S=unescape(S),v===0&&(S=c(S))),_.push(S)}return _.join("")}function a(u){if(u.startsWith('"')){const f=u.slice(1).split('\\"');for(let p=0;p<f.length;++p){const g=f[p].indexOf('"');g!==-1&&(f[p]=f[p].slice(0,g),f.length=p+1),f[p]=f[p].replaceAll(/\\(.)/g,"$1")}u=f.join('"')}return u}function c(u){const f=u.indexOf("'");if(f===-1)return u;const p=u.slice(0,f),_=u.slice(f+1).replace(/^[^']*'/,"");return n(p,_)}function h(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,p,g,_){if(g==="q"||g==="Q")return _=_.replaceAll("_"," "),_=_.replaceAll(/=([0-9a-fA-F]{2})/g,function(v,x){return String.fromCharCode(parseInt(x,16))}),n(p,_);try{_=atob(_)}catch{}return n(p,_)})}return""}function tE(i,t){const e=new Headers;if(!i||!t||typeof t!="object")return e;for(const s in t){const n=t[s];n!==void 0&&e.append(s,n)}return e}function bg(i){var t;return((t=URL.parse(i))==null?void 0:t.origin)??null}function eE({responseHeaders:i,isHttp:t,rangeChunkSize:e,disableRange:s}){const n={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(i.get("Content-Length"),10);return!Number.isInteger(r)||(n.suggestedLength=r,r<=2*e)||s||!t||i.get("Accept-Ranges")!=="bytes"||(i.get("Content-Encoding")||"identity")!=="identity"||(n.allowRangeRequests=!0),n}function sE(i){const t=i.get("Content-Disposition");if(t){let e=ek(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Av(e))return e}return null}function Kd(i,t){return new Sp(`Unexpected server response (${i}) while retrieving PDF "${t}".`,i,i===404||i===0&&t.startsWith("file:"))}function iE(i){return i===200||i===206}function nE(i,t,e){return{method:"GET",headers:i,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function rE(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(Lt(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class Tw{constructor(t){Z(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=tE(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Ge(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new sk(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new ik(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class sk{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const s=new Headers(t.headers),n=e.url;fetch(n,nE(s,this._withCredentials,this._abortController)).then(r=>{if(t._responseOrigin=bg(r.url),!iE(r.status))throw Kd(r.status,n);this._reader=r.body.getReader(),this._headersCapability.resolve();const o=r.headers,{allowRangeRequests:a,suggestedLength:c}=eE({responseHeaders:o,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=c||this._contentLength,this._filename=sE(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new jo("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:rE(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class ik{constructor(t,e,s){this._stream=t,this._reader=null,this._loaded=0;const n=t.source;this._withCredentials=n.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!n.disableStream,this._abortController=new AbortController;const r=new Headers(t.headers);r.append("Range",`bytes=${e}-${s-1}`);const o=n.url;fetch(o,nE(r,this._withCredentials,this._abortController)).then(a=>{const c=bg(a.url);if(c!==t._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${t._responseOrigin}".`);if(!iE(a.status))throw Kd(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:rE(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const bm=200,vm=206;function nk(i){const t=i.response;return typeof t!="string"?t:Wd(t).buffer}class rk{constructor({url:t,httpHeaders:e,withCredentials:s}){Z(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=tE(this.isHttp,e),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,s=this.currXhrId++,n=this.pendingRequests[s]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[r,o]of this.headers)e.setRequestHeader(r,o);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),n.expectedStatus=vm):n.expectedStatus=bm,e.responseType="arraybuffer",Ge(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,s),e.onprogress=this.onProgress.bind(this,s),n.onHeadersReceived=t.onHeadersReceived,n.onDone=t.onDone,n.onError=t.onError,n.onProgress=t.onProgress,e.send(null),s}onProgress(t,e){var n;const s=this.pendingRequests[t];s&&((n=s.onProgress)==null||n.call(s,e))}onStateChange(t,e){const s=this.pendingRequests[t];if(!s)return;const n=s.xhr;if(n.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),n.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],n.status===0&&this.isHttp){s.onError(n.status);return}const r=n.status||bm;if(!(r===bm&&s.expectedStatus===vm)&&r!==s.expectedStatus){s.onError(n.status);return}const a=nk(n);if(r===vm){const c=n.getResponseHeader("Content-Range"),h=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);h?s.onDone({begin:parseInt(h[1],10),chunk:a}):(Lt('Missing or invalid "Content-Range" header.'),s.onError(0))}else a?s.onDone({begin:0,chunk:a}):s.onError(n.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class ok{constructor(t){this._source=t,this._manager=new rk(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return Ge(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new ak(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const s=new lk(this._manager,t,e);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class ak{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=bg(e.responseURL);const s=e.getAllResponseHeaders(),n=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{const[c,...h]=a.split(": ");return[c,h.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:o}=eE({responseHeaders:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=sE(n),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Kd(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class lk{constructor(t,e,s){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=bg((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=Kd(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const ck=/^[a-z][a-z0-9\-+.]+:/i;function hk(i){if(ck.test(i))return new URL(i);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(i))}class uk{constructor(t){this.source=t,this.url=hk(t.url),Ge(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Ge(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new dk(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new fk(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class dk{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(n=>{this._contentLength=n.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},n=>{n.code==="ENOENT"&&(n=Kd(0,this._url.href)),this._storedError=n,this._headersCapability.reject(n)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new jo("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class fk{constructor(t,e,s){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const n=t.source;this._isStreamingSupported=!n.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:e,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const pk=1e5,Pw=30;var Mw,bo,Zs,Qu,Ju,Na,gr,Zu,td,$a,Ic,Lc,vo,Mc,ed,Dc,Ba,sd,id,Oc,Ha,nd,_o,Fc,jr,oE,aE,cb,Ci,qf,hb,lE,cE;const Je=class Je{constructor({textContentSource:t,container:e,viewport:s}){w(this,jr);w(this,bo,Promise.withResolvers());w(this,Zs,null);w(this,Qu,!1);w(this,Ju,!!((Mw=globalThis.FontInspector)!=null&&Mw.enabled));w(this,Na,null);w(this,gr,null);w(this,Zu,0);w(this,td,0);w(this,$a,null);w(this,Ic,null);w(this,Lc,0);w(this,vo,0);w(this,Mc,Object.create(null));w(this,ed,[]);w(this,Dc,null);w(this,Ba,[]);w(this,sd,new WeakMap);w(this,id,null);var c;if(t instanceof ReadableStream)b(this,Dc,t);else if(typeof t=="object")b(this,Dc,new ReadableStream({start(h){h.enqueue(t),h.close()}}));else throw new Error('No "textContentSource" parameter specified.');b(this,Zs,b(this,Ic,e)),b(this,vo,s.scale*Hr.pixelRatio),b(this,Lc,s.rotation),b(this,gr,{div:null,properties:null,ctx:null});const{pageWidth:n,pageHeight:r,pageX:o,pageY:a}=s.rawDims;b(this,id,[1,0,0,-1,-o,a+r]),b(this,td,n),b(this,Zu,r),A(c=Je,Ci,lE).call(c),wl(e,s),l(this,bo).promise.finally(()=>{l(Je,Fc).delete(this),b(this,gr,null),b(this,Mc,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Es.platform;return jt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{l(this,$a).read().then(({value:e,done:s})=>{if(s){l(this,bo).resolve();return}l(this,Na)??b(this,Na,e.lang),Object.assign(l(this,Mc),e.styles),A(this,jr,oE).call(this,e.items),t()},l(this,bo).reject)};return b(this,$a,l(this,Dc).getReader()),l(Je,Fc).add(this),t(),l(this,bo).promise}update({viewport:t,onBefore:e=null}){var r;const s=t.scale*Hr.pixelRatio,n=t.rotation;if(n!==l(this,Lc)&&(e==null||e(),b(this,Lc,n),wl(l(this,Ic),{rotation:n})),s!==l(this,vo)){e==null||e(),b(this,vo,s);const o={div:null,properties:null,ctx:A(r=Je,Ci,qf).call(r,l(this,Na))};for(const a of l(this,Ba))o.properties=l(this,sd).get(a),o.div=a,A(this,jr,cb).call(this,o)}}cancel(){var e;const t=new jo("TextLayer task cancelled.");(e=l(this,$a))==null||e.cancel(t).catch(()=>{}),b(this,$a,null),l(this,bo).reject(t)}get textDivs(){return l(this,Ba)}get textContentItemsStr(){return l(this,ed)}static cleanup(){if(!(l(this,Fc).size>0)){l(this,Oc).clear();for(const{canvas:t}of l(this,Ha).values())t.remove();l(this,Ha).clear()}}};bo=new WeakMap,Zs=new WeakMap,Qu=new WeakMap,Ju=new WeakMap,Na=new WeakMap,gr=new WeakMap,Zu=new WeakMap,td=new WeakMap,$a=new WeakMap,Ic=new WeakMap,Lc=new WeakMap,vo=new WeakMap,Mc=new WeakMap,ed=new WeakMap,Dc=new WeakMap,Ba=new WeakMap,sd=new WeakMap,id=new WeakMap,Oc=new WeakMap,Ha=new WeakMap,nd=new WeakMap,_o=new WeakMap,Fc=new WeakMap,jr=new WeakSet,oE=function(t){var n,r;if(l(this,Qu))return;(r=l(this,gr)).ctx??(r.ctx=A(n=Je,Ci,qf).call(n,l(this,Na)));const e=l(this,Ba),s=l(this,ed);for(const o of t){if(e.length>pk){Lt("Ignoring additional textDivs for performance reasons."),b(this,Qu,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=l(this,Zs);b(this,Zs,document.createElement("span")),l(this,Zs).classList.add("markedContent"),o.id!==null&&l(this,Zs).setAttribute("id",`${o.id}`),a.append(l(this,Zs))}else o.type==="endMarkedContent"&&b(this,Zs,l(this,Zs).parentNode);continue}s.push(o.str),A(this,jr,aE).call(this,o)}},aE=function(t){var v;const e=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};l(this,Ba).push(e);const n=pt.transform(l(this,id),t.transform);let r=Math.atan2(n[1],n[0]);const o=l(this,Mc)[t.fontName];o.vertical&&(r+=Math.PI/2);let a=l(this,Ju)&&o.fontSubstitution||o.fontFamily;a=Je.fontFamilyMap.get(a)||a;const c=Math.hypot(n[2],n[3]),h=c*A(v=Je,Ci,cE).call(v,a,o,l(this,Na));let u,f;r===0?(u=n[4],f=n[5]-h):(u=n[4]+h*Math.sin(r),f=n[5]-h*Math.cos(r));const p="calc(var(--total-scale-factor) *",g=e.style;l(this,Zs)===l(this,Ic)?(g.left=`${(100*u/l(this,td)).toFixed(2)}%`,g.top=`${(100*f/l(this,Zu)).toFixed(2)}%`):(g.left=`${p}${u.toFixed(2)}px)`,g.top=`${p}${f.toFixed(2)}px)`),g.fontSize=`${p}${(l(Je,_o)*c).toFixed(2)}px)`,g.fontFamily=a,s.fontSize=c,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,l(this,Ju)&&(e.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),r!==0&&(s.angle=r*(180/Math.PI));let _=!1;if(t.str.length>1)_=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const x=Math.abs(t.transform[0]),S=Math.abs(t.transform[3]);x!==S&&Math.max(x,S)/Math.min(x,S)>1.5&&(_=!0)}if(_&&(s.canvasWidth=o.vertical?t.height:t.width),l(this,sd).set(e,s),l(this,gr).div=e,l(this,gr).properties=s,A(this,jr,cb).call(this,l(this,gr)),s.hasText&&l(this,Zs).append(e),s.hasEOL){const x=document.createElement("br");x.setAttribute("role","presentation"),l(this,Zs).append(x)}},cb=function(t){var a;const{div:e,properties:s,ctx:n}=t,{style:r}=e;let o="";if(l(Je,_o)>1&&(o=`scale(${1/l(Je,_o)})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:c}=r,{canvasWidth:h,fontSize:u}=s;A(a=Je,Ci,hb).call(a,n,u*l(this,vo),c);const{width:f}=n.measureText(e.textContent);f>0&&(o=`scaleX(${h*l(this,vo)/f}) ${o}`)}s.angle!==0&&(o=`rotate(${s.angle}deg) ${o}`),o.length>0&&(r.transform=o)},Ci=new WeakSet,qf=function(t=null){let e=l(this,Ha).get(t||(t=""));if(!e){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=t,document.body.append(s),e=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),l(this,Ha).set(t,e),l(this,nd).set(e,{size:0,family:""})}return e},hb=function(t,e,s){const n=l(this,nd).get(t);e===n.size&&s===n.family||(t.font=`${e}px ${s}`,n.size=e,n.family=s)},lE=function(){if(l(this,_o)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),b(this,_o,t.getBoundingClientRect().height),t.remove()},cE=function(t,e,s){const n=l(this,Oc).get(t);if(n)return n;const r=A(this,Ci,qf).call(this,s);r.canvas.width=r.canvas.height=Pw,A(this,Ci,hb).call(this,r,Pw,t);const o=r.measureText(""),a=o.fontBoundingBoxAscent,c=Math.abs(o.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let h=.8;return a?h=a/(a+c):(Es.platform.isFirefox&&Lt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?h=e.ascent:e.descent&&(h=1+e.descent)),l(this,Oc).set(t,h),h},w(Je,Ci),w(Je,Oc,new Map),w(Je,Ha,new Map),w(Je,nd,new WeakMap),w(Je,_o,null),w(Je,Fc,new Set);let mu=Je;class bu{static textContent(t){const e=[],s={items:e,styles:Object.create(null)};function n(r){var c;if(!r)return;let o=null;const a=r.name;if(a==="#text")o=r.value;else if(bu.shouldBuildText(a))(c=r==null?void 0:r.attributes)!=null&&c.textContent?o=r.attributes.textContent:r.value&&(o=r.value);else return;if(o!==null&&e.push({str:o}),!!r.children)for(const h of r.children)n(h)}return n(t),s}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const gk=65536,mk=100;function hE(i={}){typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});const t=new db,{docId:e}=t,s=i.url?bk(i.url):null,n=i.data?vk(i.data):null,r=i.httpHeaders||null,o=i.withCredentials===!0,a=i.password??null,c=i.range instanceof uE?i.range:null,h=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:gk;let u=i.worker instanceof lc?i.worker:null;const f=i.verbosity,p=typeof i.docBaseUrl=="string"&&!mg(i.docBaseUrl)?i.docBaseUrl:null,g=xf(i.cMapUrl),_=i.cMapPacked!==!1,v=i.CMapReaderFactory||(qs?DR:gw),x=xf(i.iccUrl),S=xf(i.standardFontDataUrl),C=i.StandardFontDataFactory||(qs?OR:mw),T=xf(i.wasmUrl),R=i.WasmFactory||(qs?FR:bw),L=i.stopAtErrors!==!0,O=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,I=i.isEvalSupported!==!1,D=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!qs,B=typeof i.isImageDecoderSupported=="boolean"?i.isImageDecoderSupported:!qs&&(Es.platform.isFirefox||!globalThis.chrome),K=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,Q=typeof i.disableFontFace=="boolean"?i.disableFontFace:qs,bt=i.fontExtraProperties===!0,yt=i.enableXfa===!0,St=i.ownerDocument||globalThis.document,Ut=i.disableRange===!0,J=i.disableStream===!0,X=i.disableAutoFetch===!0,Pt=i.pdfBug===!0,De=i.CanvasFactory||(qs?MR:kR),z=i.FilterFactory||(qs?LR:IR),Ee=i.enableHWA===!0,Vt=i.useWasm!==!1,Qt=c?c.length:i.length??NaN,Pe=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!qs&&!Q,Ye=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:!!(v===gw&&C===mw&&R===bw&&g&&S&&T&&ql(g,document.baseURI)&&ql(S,document.baseURI)&&ql(T,document.baseURI)),qt=null;cR(f);const H={canvasFactory:new De({ownerDocument:St,enableHWA:Ee}),filterFactory:new z({docId:e,ownerDocument:St}),cMapReaderFactory:Ye?null:new v({baseUrl:g,isCompressed:_}),standardFontDataFactory:Ye?null:new C({baseUrl:S}),wasmFactory:Ye?null:new R({baseUrl:T})};if(!u){const ht={verbosity:f,port:jn.workerPort};u=ht.port?lc.fromPort(ht):new lc(ht),t._worker=u}const V={docId:e,apiVersion:"5.2.133",data:n,password:a,disableAutoFetch:X,rangeChunkSize:h,length:Qt,docBaseUrl:p,enableXfa:yt,evaluatorOptions:{maxImageSize:O,disableFontFace:Q,ignoreErrors:L,isEvalSupported:I,isOffscreenCanvasSupported:D,isImageDecoderSupported:B,canvasMaxAreaInBytes:K,fontExtraProperties:bt,useSystemFonts:Pe,useWasm:Vt,useWorkerFetch:Ye,cMapUrl:g,iccUrl:x,standardFontDataUrl:S,wasmUrl:T}},it={ownerDocument:St,pdfBug:Pt,styleElement:qt,loadingParams:{disableAutoFetch:X,enableXfa:yt}};return u.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const ht=u.messageHandler.sendWithPromise("GetDocRequest",V,n?[n.buffer]:null);let Gt;if(c)Gt=new JR(c,{disableRange:Ut,disableStream:J});else if(!n){if(!s)throw new Error("getDocument - no `url` parameter provided.");let P;if(qs)if(ql(s)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");P=Tw}else P=uk;else P=ql(s)?Tw:ok;Gt=new P({url:s,length:Qt,httpHeaders:r,withCredentials:o,rangeChunkSize:h,disableRange:Ut,disableStream:J})}return ht.then(P=>{if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const k=new jh(e,P,u.port),$=new Sk(k,t,Gt,it,H);t._transport=$,k.send("Ready",null)})}).catch(t._capability.reject),t}function bk(i){if(i instanceof URL)return i.href;if(typeof i=="string"){if(qs)return i;const t=URL.parse(i,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function vk(i){if(qs&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return Wd(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i==null?void 0:i.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function xf(i){if(typeof i!="string")return null;if(i.endsWith("/"))return i;throw new Error(`Invalid factory url: "${i}" must include trailing slash.`)}const ub=i=>typeof i=="object"&&Number.isInteger(i==null?void 0:i.num)&&i.num>=0&&Number.isInteger(i==null?void 0:i.gen)&&i.gen>=0,_k=i=>typeof i=="object"&&typeof(i==null?void 0:i.name)=="string",yk=vR.bind(null,ub,_k);var Hp;const jp=class jp{constructor(){Z(this,"_capability",Promise.withResolvers());Z(this,"_transport",null);Z(this,"_worker",null);Z(this,"docId",`d${Bs(jp,Hp)._++}`);Z(this,"destroyed",!1);Z(this,"onPassword",null);Z(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var t,e,s,n;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(r){throw(s=this._worker)!=null&&s.port&&delete this._worker._pendingDestroy,r}this._transport=null,(n=this._worker)==null||n.destroy(),this._worker=null}async getData(){return this._transport.getData()}};Hp=new WeakMap,w(jp,Hp,0);let db=jp;class uE{constructor(t,e,s=!1,n=null){this.length=t,this.initialData=e,this.progressiveDone=s,this.contentDispositionFilename=n,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const s of this._rangeListeners)s(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const s of this._progressListeners)s(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){fe("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class wk{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return jt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var mr,ja,qh;class Ak{constructor(t,e,s,n=!1){w(this,ja);w(this,mr,!1);this._pageIndex=t,this._pageInfo=e,this._transport=s,this._stats=n?new dw:null,this._pdfBug=n,this.commonObjs=s.commonObjs,this.objs=new dE,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:s=0,offsetY:n=0,dontFlip:r=!1}={}){return new Gd({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:s,offsetY:n,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return jt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:s="display",annotationMode:n=Zr.ENABLE,transform:r=null,background:o=null,optionalContentConfigPromise:a=null,annotationCanvasMap:c=null,pageColors:h=null,printAnnotationStorage:u=null,isEditing:f=!1}){var R,L;(R=this._stats)==null||R.time("Overall");const p=this._transport.getRenderingIntent(s,n,u,f),{renderingIntent:g,cacheKey:_}=p;b(this,mr,!1),a||(a=this._transport.getOptionalContentConfig(g));let v=this._intentStates.get(_);v||(v=Object.create(null),this._intentStates.set(_,v)),v.streamReaderCancelTimeout&&(clearTimeout(v.streamReaderCancelTimeout),v.streamReaderCancelTimeout=null);const x=!!(g&Ai.PRINT);v.displayReadyCapability||(v.displayReadyCapability=Promise.withResolvers(),v.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(L=this._stats)==null||L.time("Page Request"),this._pumpOperatorList(p));const S=O=>{var I;v.renderTasks.delete(C),x&&b(this,mr,!0),A(this,ja,qh).call(this),O?(C.capability.reject(O),this._abortOperatorList({intentState:v,reason:O instanceof Error?O:new Error(O)})):C.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(I=globalThis.Stats)!=null&&I.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},C=new pb({callback:S,params:{canvasContext:t,viewport:e,transform:r,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:v.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!x,pdfBug:this._pdfBug,pageColors:h});(v.renderTasks||(v.renderTasks=new Set)).add(C);const T=C.task;return Promise.all([v.displayReadyCapability.promise,a]).then(([O,I])=>{var D;if(this.destroyed){S();return}if((D=this._stats)==null||D.time("Rendering"),!(I.renderingIntent&g))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");C.initializeGraphics({transparency:O,optionalContentConfig:I}),C.operatorListChanged()}).catch(S),T}getOperatorList({intent:t="display",annotationMode:e=Zr.ENABLE,printAnnotationStorage:s=null,isEditing:n=!1}={}){var h;function r(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(c))}const o=this._transport.getRenderingIntent(t,e,s,n,!0);let a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let c;return a.opListReadCapability||(c=Object.create(null),c.operatorListChanged=r,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(c),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(h=this._stats)==null||h.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(n){return n.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>bu.textContent(s));const e=this.streamTextContent(t);return new Promise(function(s,n){function r(){o.read().then(function({value:c,done:h}){if(h){s(a);return}a.lang??(a.lang=c.lang),Object.assign(a.styles,c.styles),a.items.push(...c.items),r()},n)}const o=e.getReader(),a={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const s of e.renderTasks)t.push(s.completed),s.cancel();return this.objs.clear(),b(this,mr,!1),Promise.all(t)}cleanup(t=!1){b(this,mr,!0);const e=A(this,ja,qh).call(this);return t&&e&&this._stats&&(this._stats=new dw),e}_startRenderPage(t,e){var n,r;const s=this._intentStates.get(e);s&&((n=this._stats)==null||n.timeEnd("Page Request"),(r=s.displayReadyCapability)==null||r.resolve(t))}_renderPageChunk(t,e){for(let s=0,n=t.length;s<n;s++)e.operatorList.fnArray.push(t.fnArray[s]),e.operatorList.argsArray.push(t.argsArray[s]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const s of e.renderTasks)s.operatorListChanged();t.lastChunk&&A(this,ja,qh).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:s,modifiedIds:n}){const{map:r,transfer:o}=s,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:r,modifiedIds:n},o).getReader(),h=this._intentStates.get(e);h.streamReader=c;const u=()=>{c.read().then(({value:f,done:p})=>{if(p){h.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(f,h),u())},f=>{if(h.streamReader=null,!this._transport.destroyed){if(h.operatorList){h.operatorList.lastChunk=!0;for(const p of h.renderTasks)p.operatorListChanged();A(this,ja,qh).call(this)}if(h.displayReadyCapability)h.displayReadyCapability.reject(f);else if(h.opListReadCapability)h.opListReadCapability.reject(f);else throw f}})};u()}_abortOperatorList({intentState:t,reason:e,force:s=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(e instanceof wv){let n=mk;e.extraDelay>0&&e.extraDelay<1e3&&(n+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},n);return}}if(t.streamReader.cancel(new jo(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[n,r]of this._intentStates)if(r===t){this._intentStates.delete(n);break}this.cleanup()}}}get stats(){return this._stats}}mr=new WeakMap,ja=new WeakSet,qh=function(){if(!l(this,mr)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),b(this,mr,!1),!0};var br,Vp;class Ek{constructor(){w(this,br,new Map);w(this,Vp,Promise.resolve())}postMessage(t,e){const s={data:structuredClone(t,e?{transfer:e}:null)};l(this,Vp).then(()=>{for(const[n]of l(this,br))n.call(this,s)})}addEventListener(t,e,s=null){let n=null;if((s==null?void 0:s.signal)instanceof AbortSignal){const{signal:r}=s;if(r.aborted){Lt("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(t,e);n=()=>r.removeEventListener("abort",o),r.addEventListener("abort",o)}l(this,br).set(e,n)}removeEventListener(t,e){const s=l(this,br).get(e);s==null||s(),l(this,br).delete(e)}terminate(){for(const[,t]of l(this,br))t==null||t();l(this,br).clear()}}br=new WeakMap,Vp=new WeakMap;var Up,Va,Ua,Nc,Gf,$c,Xf;const Se=class Se{constructor({name:t=null,port:e=null,verbosity:s=hR()}={}){w(this,Nc);var n;if(this.name=t,this.destroyed=!1,this.verbosity=s,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((n=l(Se,Ua))!=null&&n.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(l(Se,Ua)||b(Se,Ua,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new jh("main","worker",t),this._messageHandler.on("ready",function(){}),A(this,Nc,Gf).call(this)}_initialize(){if(l(Se,Va)||l(Se,$c,Xf)){this._setupFakeWorker();return}let{workerSrc:t}=Se;try{Se._isSameOrigin(window.location,t)||(t=Se._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),s=new jh("main","worker",e),n=()=>{r.abort(),s.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;e.addEventListener("error",()=>{this._webWorker||n()},{signal:r.signal}),s.on("test",a=>{if(r.abort(),this.destroyed||!a){n();return}this._messageHandler=s,this._port=e,this._webWorker=e,A(this,Nc,Gf).call(this)}),s.on("ready",a=>{if(r.abort(),this.destroyed){n();return}try{o()}catch{this._setupFakeWorker()}});const o=()=>{const a=new Uint8Array;s.send("test",a,[a.buffer])};o();return}catch{gg("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){l(Se,Va)||(Lt("Setting up fake worker."),b(Se,Va,!0)),Se._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new Ek;this._port=e;const s=`fake${Bs(Se,Up)._++}`,n=new jh(s+"_worker",s,e);t.setup(n,e),this._messageHandler=new jh(s,s+"_worker",e),A(this,Nc,Gf).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t,e,s;this.destroyed=!0,(t=this._webWorker)==null||t.terminate(),this._webWorker=null,(e=l(Se,Ua))==null||e.delete(this._port),this._port=null,(s=this._messageHandler)==null||s.destroy(),this._messageHandler=null}static fromPort(t){var s;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(s=l(this,Ua))==null?void 0:s.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Se(t)}static get workerSrc(){if(jn.workerSrc)return jn.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return jt(this,"_setupFakeWorkerGlobal",(async()=>l(this,$c,Xf)?l(this,$c,Xf):(await import(this.workerSrc)).WorkerMessageHandler)())}};Up=new WeakMap,Va=new WeakMap,Ua=new WeakMap,Nc=new WeakSet,Gf=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},$c=new WeakSet,Xf=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},w(Se,$c),w(Se,Up,0),w(Se,Va,!1),w(Se,Ua),qs&&(b(Se,Va,!0),jn.workerSrc||(jn.workerSrc="./pdf.worker.mjs")),Se._isSameOrigin=(t,e)=>{const s=URL.parse(t);if(!(s!=null&&s.origin)||s.origin==="null")return!1;const n=new URL(e,s);return s.origin===n.origin},Se._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};let lc=Se;var vr,Mn,Bc,Hc,_r,za,Gh;class Sk{constructor(t,e,s,n,r){w(this,za);w(this,vr,new Map);w(this,Mn,new Map);w(this,Bc,new Map);w(this,Hc,new Map);w(this,_r,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new dE,this.fontLoader=new PR({ownerDocument:n.ownerDocument,styleElement:n.styleElement}),this.loadingParams=n.loadingParams,this._params=n,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.wasmFactory=r.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return jt(this,"annotationStorage",new Cv)}getRenderingIntent(t,e=Zr.ENABLE,s=null,n=!1,r=!1){let o=Ai.DISPLAY,a=tb;switch(t){case"any":o=Ai.ANY;break;case"display":break;case"print":o=Ai.PRINT;break;default:Lt(`getRenderingIntent - invalid intent: ${t}`)}const c=o&Ai.PRINT&&s instanceof z0?s:this.annotationStorage;switch(e){case Zr.DISABLE:o+=Ai.ANNOTATIONS_DISABLE;break;case Zr.ENABLE:break;case Zr.ENABLE_FORMS:o+=Ai.ANNOTATIONS_FORMS;break;case Zr.ENABLE_STORAGE:o+=Ai.ANNOTATIONS_STORAGE,a=c.serializable;break;default:Lt(`getRenderingIntent - invalid annotationMode: ${e}`)}n&&(o+=Ai.IS_EDITING),r&&(o+=Ai.OPLIST);const{ids:h,hash:u}=c.modifiedIds,f=[o,a.hash,u];return{renderingIntent:o,cacheKey:f.join("_"),annotationStorageSerializable:a,modifiedIds:h}}destroy(){var s;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(s=l(this,_r))==null||s.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const n of l(this,Mn).values())t.push(n._destroy());l(this,Mn).clear(),l(this,Bc).clear(),l(this,Hc).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var n,r;this.commonObjs.clear(),this.fontLoader.clear(),l(this,vr).clear(),this.filterFactory.destroy(),mu.cleanup(),(n=this._networkStream)==null||n.cancelAllRequests(new jo("Worker was terminated.")),(r=this.messageHandler)==null||r.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(s,n)=>{Ge(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},n.onPull=()=>{this._fullReader.read().then(function({value:r,done:o}){if(o){n.close();return}Ge(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{n.error(r)})},n.onCancel=r=>{this._fullReader.cancel(r),n.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",async s=>{var a;await this._fullReader.headersReady;const{isStreamingSupported:n,isRangeSupported:r,contentLength:o}=this._fullReader;return(!n||!r)&&(this._lastProgress&&((a=e.onProgress)==null||a.call(e,this._lastProgress)),this._fullReader.onProgress=c=>{var h;(h=e.onProgress)==null||h.call(e,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:n,isRangeSupported:r,contentLength:o}}),t.on("GetRangeReader",(s,n)=>{Ge(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(s.begin,s.end);if(!r){n.close();return}n.onPull=()=>{r.read().then(function({value:o,done:a}){if(a){n.close();return}Ge(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{n.error(o)})},n.onCancel=o=>{r.cancel(o),n.ready.catch(a=>{if(!this.destroyed)throw a})}}),t.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,e._capability.resolve(new wk(s,this))}),t.on("DocException",s=>{e._capability.reject(Ys(s))}),t.on("PasswordRequest",s=>{b(this,_r,Promise.withResolvers());try{if(!e.onPassword)throw Ys(s);const n=r=>{r instanceof Error?l(this,_r).reject(r):l(this,_r).resolve({password:r})};e.onPassword(n,s.code)}catch(n){l(this,_r).reject(n)}return l(this,_r).promise}),t.on("DataLoaded",s=>{var n;(n=e.onProgress)==null||n.call(e,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),t.on("StartRenderPage",s=>{if(this.destroyed)return;l(this,Mn).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),t.on("commonobj",([s,n,r])=>{var o;if(this.destroyed||this.commonObjs.has(s))return null;switch(n){case"Font":if("error"in r){const u=r.error;Lt(`Error during font loading: ${u}`),this.commonObjs.resolve(s,u);break}const a=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(u,f)=>globalThis.FontInspector.fontAdded(u,f):null,c=new RR(r,a);this.fontLoader.bind(c).catch(()=>t.sendWithPromise("FontFallback",{id:s})).finally(()=>{!c.fontExtraProperties&&c.data&&(c.data=null),this.commonObjs.resolve(s,c)});break;case"CopyLocalImage":const{imageRef:h}=r;Ge(h,"The imageRef must be defined.");for(const u of l(this,Mn).values())for(const[,f]of u.objs)if((f==null?void 0:f.ref)===h)return f.dataLen?(this.commonObjs.resolve(s,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,r);break;default:throw new Error(`Got unknown common object type ${n}`)}return null}),t.on("obj",([s,n,r,o])=>{var c;if(this.destroyed)return;const a=l(this,Mn).get(n);if(!a.objs.has(s)){if(a._intentStates.size===0){(c=o==null?void 0:o.bitmap)==null||c.close();return}switch(r){case"Image":case"Pattern":a.objs.resolve(s,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",s=>{var n;this.destroyed||(n=e.onProgress)==null||n.call(e,{loaded:s.loaded,total:s.total})}),t.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const n=this[s.type];if(!n)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return n.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;this.annotationStorage.size<=0&&Lt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((s=this._fullReader)==null?void 0:s.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,s=l(this,Bc).get(e);if(s)return s;const n=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&l(this,Hc).set(r.refStr,t);const o=new Ak(e,r,this,this._params.pdfBug);return l(this,Mn).set(e,o),o});return l(this,Bc).set(e,n),n}getPageIndex(t){return ub(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return A(this,za,Gh).call(this,"GetFieldObjects")}hasJSActions(){return A(this,za,Gh).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return A(this,za,Gh).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return A(this,za,Gh).call(this,"GetOptionalContentConfig").then(e=>new QR(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=l(this,vr).get(t);if(e)return e;const s=this.messageHandler.sendWithPromise(t,null).then(n=>{var r,o;return{info:n[0],metadata:n[1]?new KR(n[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return l(this,vr).set(t,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of l(this,Mn).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),l(this,vr).clear(),this.filterFactory.destroy(!0),mu.cleanup()}}cachedPageNumber(t){if(!ub(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return l(this,Hc).get(e)??null}}vr=new WeakMap,Mn=new WeakMap,Bc=new WeakMap,Hc=new WeakMap,_r=new WeakMap,za=new WeakSet,Gh=function(t,e=null){const s=l(this,vr).get(t);if(s)return s;const n=this.messageHandler.sendWithPromise(t,e);return l(this,vr).set(t,n),n};const Mh=Symbol("INITIAL_DATA");var di,rd,fb;class dE{constructor(){w(this,rd);w(this,di,Object.create(null))}get(t,e=null){if(e){const n=A(this,rd,fb).call(this,t);return n.promise.then(()=>e(n.data)),null}const s=l(this,di)[t];if(!s||s.data===Mh)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return s.data}has(t){const e=l(this,di)[t];return!!e&&e.data!==Mh}delete(t){const e=l(this,di)[t];return!e||e.data===Mh?!1:(delete l(this,di)[t],!0)}resolve(t,e=null){const s=A(this,rd,fb).call(this,t);s.data=e,s.resolve()}clear(){var t;for(const e in l(this,di)){const{data:s}=l(this,di)[e];(t=s==null?void 0:s.bitmap)==null||t.close()}b(this,di,Object.create(null))}*[Symbol.iterator](){for(const t in l(this,di)){const{data:e}=l(this,di)[t];e!==Mh&&(yield[t,e])}}}di=new WeakMap,rd=new WeakSet,fb=function(t){var e;return(e=l(this,di))[t]||(e[t]={...Promise.withResolvers(),data:Mh})};var yo;class xk{constructor(t){w(this,yo,null);Z(this,"onContinue",null);Z(this,"onError",null);b(this,yo,t)}get promise(){return l(this,yo).capability.promise}cancel(t=0){l(this,yo).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=l(this,yo).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=l(this,yo);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}yo=new WeakMap;var wo,Wa;const fa=class fa{constructor({callback:t,params:e,objs:s,commonObjs:n,annotationCanvasMap:r,operatorList:o,pageIndex:a,canvasFactory:c,filterFactory:h,useRequestAnimationFrame:u=!1,pdfBug:f=!1,pageColors:p=null}){w(this,wo,null);this.callback=t,this.params=e,this.objs=s,this.commonObjs=n,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=c,this.filterFactory=h,this._pdfBug=f,this.pageColors=p,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new xk(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var a,c;if(this.cancelled)return;if(this._canvas){if(l(fa,Wa).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");l(fa,Wa).add(this._canvas)}this._pdfBug&&((a=globalThis.StepperManager)!=null&&a.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:n,transform:r,background:o}=this.params;this.gfx=new ac(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:n,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(t=null,e=0){var s,n,r;this.running=!1,this.cancelled=!0,(s=this.gfx)==null||s.endDrawing(),l(this,wo)&&(window.cancelAnimationFrame(l(this,wo)),b(this,wo,null)),l(fa,Wa).delete(this._canvas),t||(t=new wv(`Rendering cancelled, page ${this._pageIndex+1}`,e)),this.callback(t),(r=(n=this.task).onError)==null||r.call(n,t)}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?b(this,wo,window.requestAnimationFrame(()=>{b(this,wo,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),l(fa,Wa).delete(this._canvas),this.callback())))}};wo=new WeakMap,Wa=new WeakMap,w(fa,Wa,new WeakSet);let pb=fa;const Ck="5.2.133",Tk="4f7761353";function Rw(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function Dh(i){return Math.max(0,Math.min(255,255*i))}class kw{static CMYK_G([t,e,s,n]){return["G",1-Math.min(1,.3*t+.59*s+.11*e+n)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Dh(t),[t,t,t]}static G_HTML([t]){const e=Rw(t);return`#${e}${e}${e}`}static RGB_G([t,e,s]){return["G",.3*t+.59*e+.11*s]}static RGB_rgb(t){return t.map(Dh)}static RGB_HTML(t){return`#${t.map(Rw).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,s,n]){return["RGB",1-Math.min(1,t+n),1-Math.min(1,s+n),1-Math.min(1,e+n)]}static CMYK_rgb([t,e,s,n]){return[Dh(1-Math.min(1,t+n)),Dh(1-Math.min(1,s+n)),Dh(1-Math.min(1,e+n))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,s]){const n=1-t,r=1-e,o=1-s,a=Math.min(n,r,o);return["CMYK",n,r,o,a]}}class Pk{create(t,e,s=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const n=this._createSVG("svg:svg");return n.setAttribute("version","1.1"),s||(n.setAttribute("width",`${t}px`),n.setAttribute("height",`${e}px`)),n.setAttribute("preserveAspectRatio","none"),n.setAttribute("viewBox",`0 0 ${t} ${e}`),n}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){fe("Abstract method `_createSVG` called.")}}class Tp extends Pk{_createSVG(t){return document.createElementNS(Qn,t)}}class fE{static setupStorage(t,e,s,n,r){const o=n.getValue(e,{value:null});switch(s.name){case"textarea":if(o.value!==null&&(t.textContent=o.value),r==="print")break;t.addEventListener("input",a=>{n.setValue(e,{value:a.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(o.value===s.attributes.xfaOn?t.setAttribute("checked",!0):o.value===s.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",a=>{n.setValue(e,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&t.setAttribute("value",o.value),r==="print")break;t.addEventListener("input",a=>{n.setValue(e,{value:a.target.value})})}break;case"select":if(o.value!==null){t.setAttribute("value",o.value);for(const a of s.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}t.addEventListener("input",a=>{const c=a.target.options,h=c.selectedIndex===-1?"":c[c.selectedIndex].value;n.setValue(e,{value:h})});break}}static setAttributes({html:t,element:e,storage:s=null,intent:n,linkService:r}){const{attributes:o}=e,a=t instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${n}`);for(const[c,h]of Object.entries(o))if(h!=null)switch(c){case"class":h.length&&t.setAttribute(c,h.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",h);break;case"style":Object.assign(t.style,h);break;case"textContent":t.textContent=h;break;default:(!a||c!=="href"&&c!=="newWindow")&&t.setAttribute(c,h)}a&&r.addLinkAttributes(t,o.href,o.newWindow),s&&o.dataId&&this.setupStorage(t,o.dataId,e,s)}static render(t){var f,p;const e=t.annotationStorage,s=t.linkService,n=t.xfaHtml,r=t.intent||"display",o=document.createElement(n.name);n.attributes&&this.setAttributes({html:o,element:n,intent:r,linkService:s});const a=r!=="richText",c=t.div;if(c.append(o),t.viewport){const g=`matrix(${t.viewport.transform.join(",")})`;c.style.transform=g}a&&c.setAttribute("class","xfaLayer xfaFont");const h=[];if(n.children.length===0){if(n.value){const g=document.createTextNode(n.value);o.append(g),a&&bu.shouldBuildText(n.name)&&h.push(g)}return{textDivs:h}}const u=[[n,-1,o]];for(;u.length>0;){const[g,_,v]=u.at(-1);if(_+1===g.children.length){u.pop();continue}const x=g.children[++u.at(-1)[1]];if(x===null)continue;const{name:S}=x;if(S==="#text"){const T=document.createTextNode(x.value);h.push(T),v.append(T);continue}const C=(f=x==null?void 0:x.attributes)!=null&&f.xmlns?document.createElementNS(x.attributes.xmlns,S):document.createElement(S);if(v.append(C),x.attributes&&this.setAttributes({html:C,element:x,storage:e,intent:r,linkService:s}),((p=x.children)==null?void 0:p.length)>0)u.push([x,-1,C]);else if(x.value){const T=document.createTextNode(x.value);a&&bu.shouldBuildText(S)&&h.push(T),C.append(T)}}for(const g of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:h}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Yd=1e3,Rk=9,El=new WeakSet;class Iw{static create(t){switch(t.data.annotationType){case ze.LINK:return new pE(t);case ze.TEXT:return new kk(t);case ze.WIDGET:switch(t.data.fieldType){case"Tx":return new Ik(t);case"Btn":return t.data.radioButton?new bE(t):t.data.checkBox?new Mk(t):new Dk(t);case"Ch":return new Ok(t);case"Sig":return new Lk(t)}return new Cl(t);case ze.POPUP:return new mb(t);case ze.FREETEXT:return new AE(t);case ze.LINE:return new Nk(t);case ze.SQUARE:return new $k(t);case ze.CIRCLE:return new Bk(t);case ze.POLYLINE:return new EE(t);case ze.CARET:return new jk(t);case ze.INK:return new Rv(t);case ze.POLYGON:return new Hk(t);case ze.HIGHLIGHT:return new SE(t);case ze.UNDERLINE:return new Vk(t);case ze.SQUIGGLY:return new Uk(t);case ze.STRIKEOUT:return new zk(t);case ze.STAMP:return new xE(t);case ze.FILEATTACHMENT:return new Wk(t);default:return new Ve(t)}}}var qa,jc,Vc,od,gb;const Fv=class Fv{constructor(t,{isRenderable:e=!1,ignoreBorder:s=!1,createQuadrilaterals:n=!1}={}){w(this,od);w(this,qa,null);w(this,jc,!1);w(this,Vc,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(s)),n&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:s}){return!!(t!=null&&t.str||e!=null&&e.str||s!=null&&s.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Fv._hasPopupData(this.data)}updateEdited(t){var s;if(!this.container)return;l(this,qa)||b(this,qa,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&A(this,od,gb).call(this,e),(s=l(this,Vc))==null||s.popup.updateEdited(t)}resetEdited(){var t;l(this,qa)&&(A(this,od,gb).call(this,l(this,qa).rect),(t=l(this,Vc))==null||t.popup.resetEdited(),b(this,qa,null))}_createContainer(t){const{data:e,parent:{page:s,viewport:n}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),this instanceof Cl||(r.tabIndex=Yd);const{style:o}=r;if(o.zIndex=this.parent.zIndex++,e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof mb){const{rotation:v}=e;return!e.hasOwnCanvas&&v!==0&&this.setRotation(v,r),r}const{width:a,height:c}=this;if(!t&&e.borderStyle.width>0){o.borderWidth=`${e.borderStyle.width}px`;const v=e.borderStyle.horizontalCornerRadius,x=e.borderStyle.verticalCornerRadius;if(v>0||x>0){const C=`calc(${v}px * var(--total-scale-factor)) / calc(${x}px * var(--total-scale-factor))`;o.borderRadius=C}else if(this instanceof bE){const C=`calc(${a}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;o.borderRadius=C}switch(e.borderStyle.style){case Wl.SOLID:o.borderStyle="solid";break;case Wl.DASHED:o.borderStyle="dashed";break;case Wl.BEVELED:Lt("Unimplemented border style: beveled");break;case Wl.INSET:Lt("Unimplemented border style: inset");break;case Wl.UNDERLINE:o.borderBottomStyle="solid";break}const S=e.borderColor||null;S?(b(this,jc,!0),o.borderColor=pt.makeHexColor(S[0]|0,S[1]|0,S[2]|0)):o.borderWidth=0}const h=pt.normalizeRect([e.rect[0],s.view[3]-e.rect[1]+s.view[1],e.rect[2],s.view[3]-e.rect[3]+s.view[1]]),{pageWidth:u,pageHeight:f,pageX:p,pageY:g}=n.rawDims;o.left=`${100*(h[0]-p)/u}%`,o.top=`${100*(h[1]-g)/f}%`;const{rotation:_}=e;return e.hasOwnCanvas||_===0?(o.width=`${100*a/u}%`,o.height=`${100*c/f}%`):this.setRotation(_,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:n}=this.parent.viewport.rawDims;let{width:r,height:o}=this;t%180!==0&&([r,o]=[o,r]),e.style.width=`${100*r/s}%`,e.style.height=`${100*o/n}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,s,n)=>{const r=n.detail[e],o=r[0],a=r.slice(1);n.target.style[s]=kw[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[s]:kw[`${o}_rgb`](a)})};return jt(this,"_commonActions",{display:e=>{const{display:s}=e.detail,n=s%2===1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:s===1||s===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:s}=e.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const s=e.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(t,e){const s=this._commonActions;for(const n of Object.keys(e.detail)){const r=t[n]||s[n];r==null||r(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const s=this._commonActions;for(const[n,r]of Object.entries(e)){const o=s[n];if(o){const a={detail:{[n]:r},target:t};o(a),delete e[n]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,s,n,r]=this.data.rect.map(v=>Math.fround(v));if(t.length===8){const[v,x,S,C]=t.subarray(2,6);if(n===v&&r===x&&e===S&&s===C)return}const{style:o}=this.container;let a;if(l(this,jc)){const{borderColor:v,borderWidth:x}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${v}" stroke-width="${x}">`],this.container.classList.add("hasBorder")}const c=n-e,h=r-s,{svgFactory:u}=this,f=u.createElement("svg");f.classList.add("quadrilateralsContainer"),f.setAttribute("width",0),f.setAttribute("height",0);const p=u.createElement("defs");f.append(p);const g=u.createElement("clipPath"),_=`clippath_${this.data.id}`;g.setAttribute("id",_),g.setAttribute("clipPathUnits","objectBoundingBox"),p.append(g);for(let v=2,x=t.length;v<x;v+=8){const S=t[v],C=t[v+1],T=t[v+2],R=t[v+3],L=u.createElement("rect"),O=(T-e)/c,I=(r-C)/h,D=(S-T)/c,B=(C-R)/h;L.setAttribute("x",O),L.setAttribute("y",I),L.setAttribute("width",D),L.setAttribute("height",B),g.append(L),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${O}" y="${I}" width="${D}" height="${B}"/>`)}l(this,jc)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(f),this.container.style.clipPath=`url(#${_})`}_createPopup(){const{data:t}=this,e=b(this,Vc,new mb({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(e.render())}render(){fe("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const s=[];if(this._fieldObjects){const n=this._fieldObjects[t];if(n)for(const{page:r,id:o,exportValues:a}of n){if(r===-1||o===e)continue;const c=typeof a=="string"?a:null,h=document.querySelector(`[data-element-id="${o}"]`);if(h&&!El.has(h)){Lt(`_getElementsByName - element not allowed: ${o}`);continue}s.push({id:o,exportValue:c,domElement:h})}return s}for(const n of document.getElementsByName(t)){const{exportValue:r}=n,o=n.getAttribute("data-element-id");o!==e&&El.has(n)&&s.push({id:o,exportValue:r,domElement:n})}return s}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};qa=new WeakMap,jc=new WeakMap,Vc=new WeakMap,od=new WeakSet,gb=function(t){const{container:{style:e},data:{rect:s,rotation:n},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:o,pageX:a,pageY:c}}}}=this;s==null||s.splice(0,4,...t),e.left=`${100*(t[0]-a)/r}%`,e.top=`${100*(o-t[3]+c)/o}%`,n===0?(e.width=`${100*(t[2]-t[0])/r}%`,e.height=`${100*(t[3]-t[1])/o}%`):this.setRotation(n)};let Ve=Fv;var Si,la,gE,mE;class pE extends Ve{constructor(e,s=null){super(e,{isRenderable:!0,ignoreBorder:!!(s!=null&&s.ignoreBorder),createQuadrilaterals:!0});w(this,Si);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:s}=this,n=document.createElement("a");n.setAttribute("data-element-id",e.id);let r=!1;return e.url?(s.addLinkAttributes(n,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(n,e.action),r=!0):e.attachment?(A(this,Si,gE).call(this,n,e.attachment,e.attachmentDest),r=!0):e.setOCGState?(A(this,Si,mE).call(this,n,e.setOCGState),r=!0):e.dest?(this._bindLink(n,e.dest),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,e),r=!0),e.resetForm?(this._bindResetFormAction(n,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(n,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(n),this.container}_bindLink(e,s){e.href=this.linkService.getDestinationHash(s),e.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&A(this,Si,la).call(this)}_bindNamedAction(e,s){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(s),!1),A(this,Si,la).call(this)}_bindJSAction(e,s){e.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(s.actions)){const o=n.get(r);o&&(e[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:r}}),!1})}e.onclick||(e.onclick=()=>!1),A(this,Si,la).call(this)}_bindResetFormAction(e,s){const n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl("")),A(this,Si,la).call(this),!this._fieldObjects){Lt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(e.onclick=()=>!1);return}e.onclick=()=>{var f;n==null||n();const{fields:r,refs:o,include:a}=s,c=[];if(r.length!==0||o.length!==0){const p=new Set(o);for(const g of r){const _=this._fieldObjects[g]||[];for(const{id:v}of _)p.add(v)}for(const g of Object.values(this._fieldObjects))for(const _ of g)p.has(_.id)===a&&c.push(_)}else for(const p of Object.values(this._fieldObjects))c.push(...p);const h=this.annotationStorage,u=[];for(const p of c){const{id:g}=p;switch(u.push(g),p.type){case"text":{const v=p.defaultValue||"";h.setValue(g,{value:v});break}case"checkbox":case"radiobutton":{const v=p.defaultValue===p.exportValues;h.setValue(g,{value:v});break}case"combobox":case"listbox":{const v=p.defaultValue||"";h.setValue(g,{value:v});break}default:continue}const _=document.querySelector(`[data-element-id="${g}"]`);if(_){if(!El.has(_)){Lt(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;_.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((f=this.linkService.eventBus)==null||f.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:u,name:"ResetForm"}})),!1}}}Si=new WeakSet,la=function(){this.container.setAttribute("data-internal-link","")},gE=function(e,s,n=null){e.href=this.linkService.getAnchorUrl(""),s.description&&(e.title=s.description),e.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(s.content,s.filename,n),!1},A(this,Si,la).call(this)},mE=function(e,s){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(s),!1),A(this,Si,la).call(this)};class kk extends Ve{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Cl extends Ve{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Es.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,s,n,r){s.includes("mouse")?t.addEventListener(s,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):t.addEventListener(s,o=>{var a;if(s==="blur"){if(!e.focused||!o.relatedTarget)return;e.focused=!1}else if(s==="focus"){if(e.focused)return;e.focused=!0}r&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:r(o)}}))})}_setEventListeners(t,e,s,n){var r,o,a;for(const[c,h]of s)(h==="Action"||(r=this.data.actions)!=null&&r[h])&&((h==="Focus"||h==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,c,h,n),h==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(t,e,"blur","Blur",null):h==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":pt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,n=this.data.defaultAppearanceData.fontSize||Rk,r=t.style;let o;const a=2,c=h=>Math.round(10*h)/10;if(this.data.multiLine){const h=Math.abs(this.data.rect[3]-this.data.rect[1]-a),u=Math.round(h/(um*n))||1,f=h/u;o=Math.min(n,c(f/um))}else{const h=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(n,c(h/um))}r.fontSize=`calc(${o}px * var(--total-scale-factor))`,r.color=pt.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class Ik extends Cl{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,s,n){const r=this.annotationStorage;for(const o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=s),r.setValue(o.id,{[n]:s})}render(){var n,r;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const o=t.getValue(e,{value:this.data.fieldValue});let a=o.value||"";const c=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;c&&a.length>c&&(a=a.slice(0,c));let h=o.formattedValue||((n=this.data.textContent)==null?void 0:n.join(`
`))||null;h&&this.data.comb&&(h=h.replaceAll(/\s+/g,""));const u={userValue:a,formattedValue:h,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=h??a,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",h??a),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),El.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=Yd,this._setRequired(s,this.data.required),c&&(s.maxLength=c),s.addEventListener("input",p=>{t.setValue(e,{value:p.target.value}),this.setPropertyOnSiblings(s,"value",p.target.value,"value"),u.formattedValue=null}),s.addEventListener("resetform",p=>{const g=this.data.defaultFieldValue??"";s.value=u.userValue=g,u.formattedValue=null});let f=p=>{const{formattedValue:g}=u;g!=null&&(p.target.value=g),p.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",g=>{var v;if(u.focused)return;const{target:_}=g;u.userValue&&(_.value=u.userValue),u.lastCommittedValue=_.value,u.commitKey=1,(v=this.data.actions)!=null&&v.Focus||(u.focused=!0)}),s.addEventListener("updatefromsandbox",g=>{this.showElementAndHideCanvas(g.target);const _={value(v){u.userValue=v.detail.value??"",t.setValue(e,{value:u.userValue.toString()}),v.target.value=u.userValue},formattedValue(v){const{formattedValue:x}=v.detail;u.formattedValue=x,x!=null&&v.target!==document.activeElement&&(v.target.value=x),t.setValue(e,{formattedValue:x})},selRange(v){v.target.setSelectionRange(...v.detail.selRange)},charLimit:v=>{var T;const{charLimit:x}=v.detail,{target:S}=v;if(x===0){S.removeAttribute("maxLength");return}S.setAttribute("maxLength",x);let C=u.userValue;!C||C.length<=x||(C=C.slice(0,x),S.value=u.userValue=C,t.setValue(e,{value:C}),(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:C,willCommit:!0,commitKey:1,selStart:S.selectionStart,selEnd:S.selectionEnd}}))}};this._dispatchEventFromSandbox(_,g)}),s.addEventListener("keydown",g=>{var x;u.commitKey=1;let _=-1;if(g.key==="Escape"?_=0:g.key==="Enter"&&!this.data.multiLine?_=2:g.key==="Tab"&&(u.commitKey=3),_===-1)return;const{value:v}=g.target;u.lastCommittedValue!==v&&(u.lastCommittedValue=v,u.userValue=v,(x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:v,willCommit:!0,commitKey:_,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}))});const p=f;f=null,s.addEventListener("blur",g=>{var v,x;if(!u.focused||!g.relatedTarget)return;(v=this.data.actions)!=null&&v.Blur||(u.focused=!1);const{value:_}=g.target;u.userValue=_,u.lastCommittedValue!==_&&((x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:_,willCommit:!0,commitKey:u.commitKey,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}})),p(g)}),(r=this.data.actions)!=null&&r.Keystroke&&s.addEventListener("beforeinput",g=>{var L;u.lastCommittedValue=null;const{data:_,target:v}=g,{value:x,selectionStart:S,selectionEnd:C}=v;let T=S,R=C;switch(g.inputType){case"deleteWordBackward":{const O=x.substring(0,S).match(/\w*[^\w]*$/);O&&(T-=O[0].length);break}case"deleteWordForward":{const O=x.substring(S).match(/^[^\w]*\w*/);O&&(R+=O[0].length);break}case"deleteContentBackward":S===C&&(T-=1);break;case"deleteContentForward":S===C&&(R+=1);break}g.preventDefault(),(L=this.linkService.eventBus)==null||L.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:x,change:_||"",willCommit:!1,selStart:T,selEnd:R}})}),this._setEventListeners(s,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],g=>g.target.value)}if(f&&s.addEventListener("blur",f),this.data.comb){const g=(this.data.rect[2]-this.data.rect[0])/c;s.classList.add("comb"),s.style.letterSpacing=`calc(${g}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Lk extends Cl{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class Mk extends Cl{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,s=e.id;let n=t.getValue(s,{value:e.exportValue===e.fieldValue}).value;typeof n=="string"&&(n=n!=="Off",t.setValue(s,{value:n})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return El.add(r),r.setAttribute("data-element-id",s),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,n&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=Yd,r.addEventListener("change",o=>{const{name:a,checked:c}=o.target;for(const h of this._getElementsByName(a,s)){const u=c&&h.exportValue===e.exportValue;h.domElement&&(h.domElement.checked=u),t.setValue(h.id,{value:u})}t.setValue(s,{value:c})}),r.addEventListener("resetform",o=>{const a=e.defaultFieldValue||"Off";o.target.checked=a===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{const a={value(c){c.target.checked=c.detail.value!=="Off",t.setValue(s,{value:c.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class bE extends Cl{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,s=e.id;let n=t.getValue(s,{value:e.fieldValue===e.buttonValue}).value;if(typeof n=="string"&&(n=n!==e.buttonValue,t.setValue(s,{value:n})),n)for(const o of this._getElementsByName(e.fieldName,s))t.setValue(o.id,{value:!1});const r=document.createElement("input");if(El.add(r),r.setAttribute("data-element-id",s),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,n&&r.setAttribute("checked",!0),r.tabIndex=Yd,r.addEventListener("change",o=>{const{name:a,checked:c}=o.target;for(const h of this._getElementsByName(a,s))t.setValue(h.id,{value:!1});t.setValue(s,{value:c})}),r.addEventListener("resetform",o=>{const a=e.defaultFieldValue;o.target.checked=a!=null&&a===e.buttonValue}),this.enableScripting&&this.hasJSActions){const o=e.buttonValue;r.addEventListener("updatefromsandbox",a=>{const c={value:h=>{const u=o===h.detail.value;for(const f of this._getElementsByName(h.target.name)){const p=u&&f.id===s;f.domElement&&(f.domElement.checked=p),t.setValue(f.id,{value:p})}}};this._dispatchEventFromSandbox(c,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Dk extends pE{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),t}}class Ok extends Cl{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,s=t.getValue(e,{value:this.data.fieldValue}),n=document.createElement("select");El.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,this._setRequired(n,this.data.required),n.name=this.data.fieldName,n.tabIndex=Yd;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(n.size=this.data.options.length,this.data.multiSelect&&(n.multiple=!0)),n.addEventListener("resetform",u=>{const f=this.data.defaultFieldValue;for(const p of n.options)p.selected=p.value===f});for(const u of this.data.options){const f=document.createElement("option");f.textContent=u.displayValue,f.value=u.exportValue,s.value.includes(u.exportValue)&&(f.setAttribute("selected",!0),r=!1),n.append(f)}let o=null;if(r){const u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),n.prepend(u),o=()=>{u.remove(),n.removeEventListener("input",o),o=null},n.addEventListener("input",o)}const a=u=>{const f=u?"value":"textContent",{options:p,multiple:g}=n;return g?Array.prototype.filter.call(p,_=>_.selected).map(_=>_[f]):p.selectedIndex===-1?null:p[p.selectedIndex][f]};let c=a(!1);const h=u=>{const f=u.target.options;return Array.prototype.map.call(f,p=>({displayValue:p.textContent,exportValue:p.value}))};return this.enableScripting&&this.hasJSActions?(n.addEventListener("updatefromsandbox",u=>{const f={value(p){o==null||o();const g=p.detail.value,_=new Set(Array.isArray(g)?g:[g]);for(const v of n.options)v.selected=_.has(v.value);t.setValue(e,{value:a(!0)}),c=a(!1)},multipleSelection(p){n.multiple=!0},remove(p){const g=n.options,_=p.detail.remove;g[_].selected=!1,n.remove(_),g.length>0&&Array.prototype.findIndex.call(g,x=>x.selected)===-1&&(g[0].selected=!0),t.setValue(e,{value:a(!0),items:h(p)}),c=a(!1)},clear(p){for(;n.length!==0;)n.remove(0);t.setValue(e,{value:null,items:[]}),c=a(!1)},insert(p){const{index:g,displayValue:_,exportValue:v}=p.detail.insert,x=n.children[g],S=document.createElement("option");S.textContent=_,S.value=v,x?x.before(S):n.append(S),t.setValue(e,{value:a(!0),items:h(p)}),c=a(!1)},items(p){const{items:g}=p.detail;for(;n.length!==0;)n.remove(0);for(const _ of g){const{displayValue:v,exportValue:x}=_,S=document.createElement("option");S.textContent=v,S.value=x,n.append(S)}n.options.length>0&&(n.options[0].selected=!0),t.setValue(e,{value:a(!0),items:h(p)}),c=a(!1)},indices(p){const g=new Set(p.detail.indices);for(const _ of p.target.options)_.selected=g.has(_.index);t.setValue(e,{value:a(!0)}),c=a(!1)},editable(p){p.target.disabled=!p.detail.editable}};this._dispatchEventFromSandbox(f,u)}),n.addEventListener("input",u=>{var g;const f=a(!0),p=a(!1);t.setValue(e,{value:f}),u.preventDefault(),(g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:c,change:p,changeEx:f,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(n,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):n.addEventListener("input",function(u){t.setValue(e,{value:a(!0)})}),this.data.combo&&this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class mb extends Ve{constructor(t){const{data:e,elements:s}=t;super(t,{isRenderable:Ve._hasPopupData(e)}),this.elements=s,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new Fk({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const s of this.elements)s.popup=t,s.container.ariaHasPopup="dialog",e.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(s=>`${yv}${s}`).join(",")),this.container}}var Uc,zp,Wp,zc,Wc,Fe,yr,qc,ad,ld,Gc,wr,Ji,Ar,cd,Er,hd,Ga,Xa,pe,Kf,bb,vE,_E,yE,wE,Yf,Qf,vb;class Fk{constructor({container:t,color:e,elements:s,titleObj:n,modificationDate:r,contentsObj:o,richText:a,parent:c,rect:h,parentRect:u,open:f}){w(this,pe);w(this,Uc,A(this,pe,yE).bind(this));w(this,zp,A(this,pe,vb).bind(this));w(this,Wp,A(this,pe,Qf).bind(this));w(this,zc,A(this,pe,Yf).bind(this));w(this,Wc,null);w(this,Fe,null);w(this,yr,null);w(this,qc,null);w(this,ad,null);w(this,ld,null);w(this,Gc,null);w(this,wr,!1);w(this,Ji,null);w(this,Ar,null);w(this,cd,null);w(this,Er,null);w(this,hd,null);w(this,Ga,null);w(this,Xa,!1);var p;b(this,Fe,t),b(this,hd,n),b(this,yr,o),b(this,Er,a),b(this,ld,c),b(this,Wc,e),b(this,cd,h),b(this,Gc,u),b(this,ad,s),b(this,qc,Ev.toDateObject(r)),this.trigger=s.flatMap(g=>g.getElementsToTriggerPopup());for(const g of this.trigger)g.addEventListener("click",l(this,zc)),g.addEventListener("mouseenter",l(this,Wp)),g.addEventListener("mouseleave",l(this,zp)),g.classList.add("popupTriggerArea");for(const g of s)(p=g.container)==null||p.addEventListener("keydown",l(this,Uc));l(this,Fe).hidden=!0,f&&A(this,pe,Yf).call(this)}render(){if(l(this,Ji))return;const t=b(this,Ji,document.createElement("div"));if(t.className="popup",l(this,Wc)){const r=t.style.outlineColor=pt.makeHexColor(...l(this,Wc));t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`}const e=document.createElement("span");e.className="header";const s=document.createElement("h1");if(e.append(s),{dir:s.dir,str:s.textContent}=l(this,hd),t.append(e),l(this,qc)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:l(this,qc).valueOf()})),e.append(r)}const n=l(this,pe,Kf);if(n)fE.render({xfaHtml:n,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(l(this,yr));t.append(r)}l(this,Fe).append(t)}_formatContents({str:t,dir:e}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=e;const n=t.split(/(?:\r\n?|\n)/);for(let r=0,o=n.length;r<o;++r){const a=n[r];s.append(document.createTextNode(a)),r<o-1&&s.append(document.createElement("br"))}return s}updateEdited({rect:t,popupContent:e}){var s;l(this,Ga)||b(this,Ga,{contentsObj:l(this,yr),richText:l(this,Er)}),t&&b(this,Ar,null),e&&(b(this,Er,A(this,pe,_E).call(this,e)),b(this,yr,null)),(s=l(this,Ji))==null||s.remove(),b(this,Ji,null)}resetEdited(){var t;l(this,Ga)&&({contentsObj:Bs(this,yr)._,richText:Bs(this,Er)._}=l(this,Ga),b(this,Ga,null),(t=l(this,Ji))==null||t.remove(),b(this,Ji,null),b(this,Ar,null))}forceHide(){b(this,Xa,this.isVisible),l(this,Xa)&&(l(this,Fe).hidden=!0)}maybeShow(){l(this,Xa)&&(l(this,Ji)||A(this,pe,Qf).call(this),b(this,Xa,!1),l(this,Fe).hidden=!1)}get isVisible(){return l(this,Fe).hidden===!1}}Uc=new WeakMap,zp=new WeakMap,Wp=new WeakMap,zc=new WeakMap,Wc=new WeakMap,Fe=new WeakMap,yr=new WeakMap,qc=new WeakMap,ad=new WeakMap,ld=new WeakMap,Gc=new WeakMap,wr=new WeakMap,Ji=new WeakMap,Ar=new WeakMap,cd=new WeakMap,Er=new WeakMap,hd=new WeakMap,Ga=new WeakMap,Xa=new WeakMap,pe=new WeakSet,Kf=function(){const t=l(this,Er),e=l(this,yr);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&l(this,Er).html||null},bb=function(){var t,e,s;return((s=(e=(t=l(this,pe,Kf))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:s.fontSize)||0},vE=function(){var t,e,s;return((s=(e=(t=l(this,pe,Kf))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:s.color)||null},_E=function(t){const e=[],s={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},n={style:{color:l(this,pe,vE),fontSize:l(this,pe,bb)?`calc(${l(this,pe,bb)}px * var(--total-scale-factor))`:""}};for(const r of t.split(`
`))e.push({name:"span",value:r,attributes:n});return s},yE=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&l(this,wr))&&A(this,pe,Yf).call(this)},wE=function(){if(l(this,Ar)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:s,pageX:n,pageY:r}}}=l(this,ld);let o=!!l(this,Gc),a=o?l(this,Gc):l(this,cd);for(const _ of l(this,ad))if(!a||pt.intersect(_.data.rect,a)!==null){a=_.data.rect,o=!0;break}const c=pt.normalizeRect([a[0],t[3]-a[1]+t[1],a[2],t[3]-a[3]+t[1]]),u=o?a[2]-a[0]+5:0,f=c[0]+u,p=c[1];b(this,Ar,[100*(f-n)/e,100*(p-r)/s]);const{style:g}=l(this,Fe);g.left=`${l(this,Ar)[0]}%`,g.top=`${l(this,Ar)[1]}%`},Yf=function(){b(this,wr,!l(this,wr)),l(this,wr)?(A(this,pe,Qf).call(this),l(this,Fe).addEventListener("click",l(this,zc)),l(this,Fe).addEventListener("keydown",l(this,Uc))):(A(this,pe,vb).call(this),l(this,Fe).removeEventListener("click",l(this,zc)),l(this,Fe).removeEventListener("keydown",l(this,Uc)))},Qf=function(){l(this,Ji)||this.render(),this.isVisible?l(this,wr)&&l(this,Fe).classList.add("focused"):(A(this,pe,wE).call(this),l(this,Fe).hidden=!1,l(this,Fe).style.zIndex=parseInt(l(this,Fe).style.zIndex)+1e3)},vb=function(){l(this,Fe).classList.remove("focused"),!(l(this,wr)||!this.isVisible)&&(l(this,Fe).hidden=!0,l(this,Fe).style.zIndex=parseInt(l(this,Fe).style.zIndex)-1e3)};class AE extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Rt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const s=document.createElement("span");s.textContent=e,t.append(s)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var ud;class Nk extends Ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,ud,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:s,height:n}=this,r=this.svgFactory.create(s,n,!0),o=b(this,ud,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),o.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),o.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),o.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),o.setAttribute("stroke-width",e.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,ud)}addHighlightArea(){this.container.classList.add("highlightArea")}}ud=new WeakMap;var dd;class $k extends Ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,dd,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:s,height:n}=this,r=this.svgFactory.create(s,n,!0),o=e.borderStyle.width,a=b(this,dd,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",s-o),a.setAttribute("height",n-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,dd)}addHighlightArea(){this.container.classList.add("highlightArea")}}dd=new WeakMap;var fd;class Bk extends Ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,fd,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:s,height:n}=this,r=this.svgFactory.create(s,n,!0),o=e.borderStyle.width,a=b(this,fd,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",s/2),a.setAttribute("cy",n/2),a.setAttribute("rx",s/2-o/2),a.setAttribute("ry",n/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,fd)}addHighlightArea(){this.container.classList.add("highlightArea")}}fd=new WeakMap;var pd;class EE extends Ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,pd,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:s,borderStyle:n,popupRef:r},width:o,height:a}=this;if(!s)return this.container;const c=this.svgFactory.create(o,a,!0);let h=[];for(let f=0,p=s.length;f<p;f+=2){const g=s[f]-e[0],_=e[3]-s[f+1];h.push(`${g},${_}`)}h=h.join(" ");const u=b(this,pd,this.svgFactory.createElement(this.svgElementName));return u.setAttribute("points",h),u.setAttribute("stroke-width",n.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),c.append(u),this.container.append(c),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,pd)}addHighlightArea(){this.container.classList.add("highlightArea")}}pd=new WeakMap;class Hk extends EE{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class jk extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var gd,Ka,md,_b;class Rv extends Ve{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,md);w(this,gd,null);w(this,Ka,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Rt.HIGHLIGHT:Rt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:s,inkLists:n,borderStyle:r,popupRef:o}}=this,{transform:a,width:c,height:h}=A(this,md,_b).call(this,s,e),u=this.svgFactory.create(c,h,!0),f=b(this,gd,this.svgFactory.createElement("svg:g"));u.append(f),f.setAttribute("stroke-width",r.width||1),f.setAttribute("stroke-linecap","round"),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-miterlimit",10),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),f.setAttribute("transform",a);for(let p=0,g=n.length;p<g;p++){const _=this.svgFactory.createElement(this.svgElementName);l(this,Ka).push(_),_.setAttribute("points",n[p].join(",")),f.append(_)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(u),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:s,points:n,rect:r}=e,o=l(this,gd);if(s>=0&&o.setAttribute("stroke-width",s||1),n)for(let a=0,c=l(this,Ka).length;a<c;a++)l(this,Ka)[a].setAttribute("points",n[a].join(","));if(r){const{transform:a,width:c,height:h}=A(this,md,_b).call(this,this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${c} ${h}`),o.setAttribute("transform",a)}}getElementsToTriggerPopup(){return l(this,Ka)}addHighlightArea(){this.container.classList.add("highlightArea")}}gd=new WeakMap,Ka=new WeakMap,md=new WeakSet,_b=function(e,s){switch(e){case 90:return{transform:`rotate(90) translate(${-s[0]},${s[1]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};case 180:return{transform:`rotate(180) translate(${-s[2]},${s[1]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]};case 270:return{transform:`rotate(270) translate(${-s[2]},${s[3]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};default:return{transform:`translate(${-s[0]},${s[3]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]}}};class SE extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Rt.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class Vk extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Uk extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class zk extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class xE extends Ve{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Rt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var bd,vd,yb;class Wk extends Ve{constructor(e){var n;super(e,{isRenderable:!0});w(this,vd);w(this,bd,null);const{file:s}=this.data;this.filename=s.filename,this.content=s.content,(n=this.linkService.eventBus)==null||n.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:s}=this;let n;s.hasAppearance||s.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),n.addEventListener("dblclick",A(this,vd,yb).bind(this)),b(this,bd,n);const{isMac:r}=Es.platform;return e.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&A(this,vd,yb).call(this)}),!s.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),e.append(n),e}getElementsToTriggerPopup(){return l(this,bd)}addHighlightArea(){this.container.classList.add("highlightArea")}}bd=new WeakMap,vd=new WeakSet,yb=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var _d,Ya,Ao,yd,Wo,Ab,Eb;const Nv=class Nv{constructor({div:t,accessibilityManager:e,annotationCanvasMap:s,annotationEditorUIManager:n,page:r,viewport:o,structTreeLayer:a}){w(this,Wo);w(this,_d,null);w(this,Ya,null);w(this,Ao,new Map);w(this,yd,null);this.div=t,b(this,_d,e),b(this,Ya,s),b(this,yd,a||null),this.page=r,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=n}hasEditableAnnotations(){return l(this,Ao).size>0}async render(t){var o;const{annotations:e}=t,s=this.div;wl(s,this.viewport);const n=new Map,r={data:null,layer:s,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Tp,annotationStorage:t.annotationStorage||new Cv,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const a of e){if(a.noHTML)continue;const c=a.annotationType===ze.POPUP;if(c){const f=n.get(a.id);if(!f)continue;r.elements=f}else if(a.rect[2]===a.rect[0]||a.rect[3]===a.rect[1])continue;r.data=a;const h=Iw.create(r);if(!h.isRenderable)continue;if(!c&&a.popupRef){const f=n.get(a.popupRef);f?f.push(h):n.set(a.popupRef,[h])}const u=h.render();a.hidden&&(u.style.visibility="hidden"),await A(this,Wo,Ab).call(this,u,a.id),h._isEditable&&(l(this,Ao).set(h.data.id,h),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(h))}A(this,Wo,Eb).call(this)}async addLinkAnnotations(t,e){const s={data:null,layer:this.div,linkService:e,svgFactory:new Tp,parent:this};for(const n of t){n.borderStyle||(n.borderStyle=Nv._defaultBorderStyle),s.data=n;const r=Iw.create(s);if(!r.isRenderable)continue;const o=r.render();await A(this,Wo,Ab).call(this,o,n.id)}}update({viewport:t}){const e=this.div;this.viewport=t,wl(e,{rotation:t.rotation}),A(this,Wo,Eb).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(l(this,Ao).values())}getEditableAnnotation(t){return l(this,Ao).get(t)}static get _defaultBorderStyle(){return jt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:Wl.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};_d=new WeakMap,Ya=new WeakMap,Ao=new WeakMap,yd=new WeakMap,Wo=new WeakSet,Ab=async function(t,e){var o,a;const s=t.firstChild||t,n=s.id=`${yv}${e}`,r=await((o=l(this,yd))==null?void 0:o.getAriaAttributes(n));if(r)for(const[c,h]of r)s.setAttribute(c,h);this.div.append(t),(a=l(this,_d))==null||a.moveElementInDOM(this.div,t,s,!1)},Eb=function(){var e;if(!l(this,Ya))return;const t=this.div;for(const[s,n]of l(this,Ya)){const r=t.querySelector(`[data-annotation-id="${s}"]`);if(!r)continue;n.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(n):o.classList.contains("annotationContent")?o.after(n):o.before(n):r.append(n);const a=l(this,Ao).get(s);a&&(a._hasNoCanvas?((e=this._annotationEditorUIManager)==null||e.setMissingCanvas(s,r.id,n),a._hasNoCanvas=!1):a.canvas=n)}l(this,Ya).clear()};let wb=Nv;const Cf=/\r\n?|\n/g;var Zi,fi,wd,Qa,pi,Xe,CE,TE,PE,Jf,Nr,Zf,tp,RE,xb,kE;const _e=class _e extends we{constructor(e){super({...e,name:"freeTextEditor"});w(this,Xe);w(this,Zi);w(this,fi,"");w(this,wd,`${this.id}-editor`);w(this,Qa,null);w(this,pi);b(this,Zi,e.color||_e._defaultColor||we._defaultLineColor),b(this,pi,e.fontSize||_e._defaultFontSize)}static get _keyboardManager(){const e=_e.prototype,s=o=>o.isEmpty(),n=Al.TRANSLATE_SMALL,r=Al.TRANSLATE_BIG;return jt(this,"_keyboardManager",new Xd([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:s}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[n,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:s}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:s}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,n],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:s}]]))}static initialize(e,s){we.initialize(e,s);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,s){switch(e){case Wt.FREETEXT_SIZE:_e._defaultFontSize=s;break;case Wt.FREETEXT_COLOR:_e._defaultColor=s;break}}updateParams(e,s){switch(e){case Wt.FREETEXT_SIZE:A(this,Xe,CE).call(this,s);break;case Wt.FREETEXT_COLOR:A(this,Xe,TE).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[Wt.FREETEXT_SIZE,_e._defaultFontSize],[Wt.FREETEXT_COLOR,_e._defaultColor||we._defaultLineColor]]}get propertiesToUpdate(){return[[Wt.FREETEXT_SIZE,l(this,pi)],[Wt.FREETEXT_COLOR,l(this,Zi)]]}_translateEmpty(e,s){this._uiManager.translateSelectedEditors(e,s,!0)}getInitialTranslation(){const e=this.parentScale;return[-_e._internalPadding*e,-(_e._internalPadding+l(this,pi))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Rt.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),b(this,Qa,new AbortController);const e=this._uiManager.combinedSignal(l(this,Qa));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){var e;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",l(this,wd)),this._isDraggable=!0,(e=l(this,Qa))==null||e.abort(),b(this,Qa,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var s;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(s=this._initialOptions)!=null&&s.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=l(this,fi),s=b(this,fi,A(this,Xe,PE).call(this).trimEnd());if(e===s)return;const n=r=>{if(b(this,fi,r),!r){this.remove();return}A(this,Xe,tp).call(this),this._uiManager.rebuild(this),A(this,Xe,Jf).call(this)};this.addCommands({cmd:()=>{n(s)},undo:()=>{n(e)},mustExec:!1}),A(this,Xe,Jf).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){_e._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,s;(this._isCopy||this.annotationElementId)&&(e=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",l(this,wd)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${l(this,pi)}px * var(--total-scale-factor))`,n.color=l(this,Zi),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),xv(this,this.div,["dblclick","keydown"]),this._isCopy||this.annotationElementId){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[c,h]=this.getInitialTranslation();[c,h]=this.pageTranslationToScreen(c,h);const[u,f]=this.pageDimensions,[p,g]=this.pageTranslation;let _,v;switch(this.rotation){case 0:_=e+(a[0]-p)/u,v=s+this.height-(a[1]-g)/f;break;case 90:_=e+(a[0]-p)/u,v=s-(a[1]-g)/f,[c,h]=[h,-c];break;case 180:_=e-this.width+(a[0]-p)/u,v=s-(a[1]-g)/f,[c,h]=[-c,-h];break;case 270:_=e+(a[0]-p-this.height*f)/u,v=s+(a[1]-g-this.width*u)/f,[c,h]=[-h,c];break}this.setAt(_*r,v*o,c,h)}else this._moveAfterPaste(e,s);A(this,Xe,tp).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var _,v,x;const s=e.clipboardData||window.clipboardData,{types:n}=s;if(n.length===1&&n[0]==="text/plain")return;e.preventDefault();const r=A(_=_e,Nr,xb).call(_,s.getData("text")||"").replaceAll(Cf,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!r.includes(`
`)){a.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:h}=a,u=[],f=[];if(c.nodeType===Node.TEXT_NODE){const S=c.parentElement;if(f.push(c.nodeValue.slice(h).replaceAll(Cf,"")),S!==this.editorDiv){let C=u;for(const T of this.editorDiv.childNodes){if(T===S){C=f;continue}C.push(A(v=_e,Nr,Zf).call(v,T))}}u.push(c.nodeValue.slice(0,h).replaceAll(Cf,""))}else if(c===this.editorDiv){let S=u,C=0;for(const T of this.editorDiv.childNodes)C++===h&&(S=f),S.push(A(x=_e,Nr,Zf).call(x,T))}b(this,fi,`${u.join(`
`)}${r}${f.join(`
`)}`),A(this,Xe,tp).call(this);const p=new Range;let g=Math.sumPrecise(u.map(S=>S.length));for(const{firstChild:S}of this.editorDiv.childNodes)if(S.nodeType===Node.TEXT_NODE){const C=S.nodeValue.length;if(g<=C){p.setStart(S,g),p.setEnd(S,g);break}g-=C}o.removeAllRanges(),o.addRange(p)}get contentDiv(){return this.editorDiv}static async deserialize(e,s,n){var a;let r=null;if(e instanceof AE){const{data:{defaultAppearanceData:{fontSize:c,fontColor:h},rect:u,rotation:f,id:p,popupRef:g},textContent:_,textPosition:v,parent:{page:{pageNumber:x}}}=e;if(!_||_.length===0)return null;r=e={annotationType:Rt.FREETEXT,color:Array.from(h),fontSize:c,value:_.join(`
`),position:v,pageIndex:x-1,rect:u.slice(0),rotation:f,id:p,deleted:!1,popupRef:g}}const o=await super.deserialize(e,s,n);return b(o,pi,e.fontSize),b(o,Zi,pt.makeHexColor(...e.color)),b(o,fi,A(a=_e,Nr,xb).call(a,e.value)),o.annotationElementId=e.id||null,o._initialData=r,o}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=_e._internalPadding*this.parentScale,n=this.getRect(s,s),r=we._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:l(this,Zi)),o={annotationType:Rt.FREETEXT,color:r,fontSize:l(this,pi),value:A(this,Xe,RE).call(this),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(o.isCopy=!0,o):this.annotationElementId&&!A(this,Xe,kE).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(e){const s=super.renderAnnotationElement(e);if(this.deleted)return s;const{style:n}=s;n.fontSize=`calc(${l(this,pi)}px * var(--total-scale-factor))`,n.color=l(this,Zi),s.replaceChildren();for(const o of l(this,fi).split(`
`)){const a=document.createElement("div");a.append(o?document.createTextNode(o):document.createElement("br")),s.append(a)}const r=_e._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(r,r),popupContent:l(this,fi)}),s}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};Zi=new WeakMap,fi=new WeakMap,wd=new WeakMap,Qa=new WeakMap,pi=new WeakMap,Xe=new WeakSet,CE=function(e){const s=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-l(this,pi))*this.parentScale),b(this,pi,r),A(this,Xe,Jf).call(this)},n=l(this,pi);this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Wt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},TE=function(e){const s=r=>{b(this,Zi,this.editorDiv.style.color=r)},n=l(this,Zi);this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Wt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},PE=function(){var n;const e=[];this.editorDiv.normalize();let s=null;for(const r of this.editorDiv.childNodes)(s==null?void 0:s.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(e.push(A(n=_e,Nr,Zf).call(n,r)),s=r);return e.join(`
`)},Jf=function(){const[e,s]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,a=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),n=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=n.width/e,this.height=n.height/s):(this.width=n.height/e,this.height=n.width/s),this.fixAndSetPosition()},Nr=new WeakSet,Zf=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Cf,"")},tp=function(){if(this.editorDiv.replaceChildren(),!!l(this,fi))for(const e of l(this,fi).split(`
`)){const s=document.createElement("div");s.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(s)}},RE=function(){return l(this,fi).replaceAll(" "," ")},xb=function(e){return e.replaceAll(" "," ")},kE=function(e){const{value:s,fontSize:n,color:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||e.value!==s||e.fontSize!==n||e.color.some((a,c)=>a!==r[c])||e.pageIndex!==o},w(_e,Nr),Z(_e,"_freeTextDefaultContent",""),Z(_e,"_internalPadding",0),Z(_e,"_defaultColor",null),Z(_e,"_defaultFontSize",10),Z(_e,"_type","freetext"),Z(_e,"_editorType",Rt.FREETEXT);let Sb=_e;class ct{toSVGPath(){fe("Abstract method `toSVGPath` must be implemented.")}get box(){fe("Abstract getter `box` must be implemented.")}serialize(t,e){fe("Abstract method `serialize` must be implemented.")}static _rescale(t,e,s,n,r,o){o||(o=new Float32Array(t.length));for(let a=0,c=t.length;a<c;a+=2)o[a]=e+t[a]*n,o[a+1]=s+t[a+1]*r;return o}static _rescaleAndSwap(t,e,s,n,r,o){o||(o=new Float32Array(t.length));for(let a=0,c=t.length;a<c;a+=2)o[a]=e+t[a+1]*n,o[a+1]=s+t[a]*r;return o}static _translate(t,e,s,n){n||(n=new Float32Array(t.length));for(let r=0,o=t.length;r<o;r+=2)n[r]=e+t[r],n[r+1]=s+t[r+1];return n}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,s,n,r){switch(r){case 90:return[1-e/s,t/n];case 180:return[1-t/s,1-e/n];case 270:return[e/s,1-t/n];default:return[t/s,e/n]}}static _normalizePagePoint(t,e,s){switch(s){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,s,n,r,o){return[(t+5*s)/6,(e+5*n)/6,(5*s+r)/6,(5*n+o)/6,(s+r)/2,(n+o)/2]}}Z(ct,"PRECISION",1e-4);var gi,tn,Xc,Kc,Dn,Bt,Ja,Za,Ad,Ed,Yc,Qc,Eo,Sd,qp,Gp,ss,Xh,IE,LE,ME,DE,OE,FE;const ir=class ir{constructor({x:t,y:e},s,n,r,o,a=0){w(this,ss);w(this,gi);w(this,tn,[]);w(this,Xc);w(this,Kc);w(this,Dn,[]);w(this,Bt,new Float32Array(18));w(this,Ja);w(this,Za);w(this,Ad);w(this,Ed);w(this,Yc);w(this,Qc);w(this,Eo,[]);b(this,gi,s),b(this,Qc,r*n),b(this,Kc,o),l(this,Bt).set([NaN,NaN,NaN,NaN,t,e],6),b(this,Xc,a),b(this,Ed,l(ir,Sd)*n),b(this,Ad,l(ir,Gp)*n),b(this,Yc,n),l(this,Eo).push(t,e)}isEmpty(){return isNaN(l(this,Bt)[8])}add({x:t,y:e}){var B;b(this,Ja,t),b(this,Za,e);const[s,n,r,o]=l(this,gi);let[a,c,h,u]=l(this,Bt).subarray(8,12);const f=t-h,p=e-u,g=Math.hypot(f,p);if(g<l(this,Ad))return!1;const _=g-l(this,Ed),v=_/g,x=v*f,S=v*p;let C=a,T=c;a=h,c=u,h+=x,u+=S,(B=l(this,Eo))==null||B.push(t,e);const R=-S/_,L=x/_,O=R*l(this,Qc),I=L*l(this,Qc);return l(this,Bt).set(l(this,Bt).subarray(2,8),0),l(this,Bt).set([h+O,u+I],4),l(this,Bt).set(l(this,Bt).subarray(14,18),12),l(this,Bt).set([h-O,u-I],16),isNaN(l(this,Bt)[6])?(l(this,Dn).length===0&&(l(this,Bt).set([a+O,c+I],2),l(this,Dn).push(NaN,NaN,NaN,NaN,(a+O-s)/r,(c+I-n)/o),l(this,Bt).set([a-O,c-I],14),l(this,tn).push(NaN,NaN,NaN,NaN,(a-O-s)/r,(c-I-n)/o)),l(this,Bt).set([C,T,a,c,h,u],6),!this.isEmpty()):(l(this,Bt).set([C,T,a,c,h,u],6),Math.abs(Math.atan2(T-c,C-a)-Math.atan2(S,x))<Math.PI/2?([a,c,h,u]=l(this,Bt).subarray(2,6),l(this,Dn).push(NaN,NaN,NaN,NaN,((a+h)/2-s)/r,((c+u)/2-n)/o),[a,c,C,T]=l(this,Bt).subarray(14,18),l(this,tn).push(NaN,NaN,NaN,NaN,((C+a)/2-s)/r,((T+c)/2-n)/o),!0):([C,T,a,c,h,u]=l(this,Bt).subarray(0,6),l(this,Dn).push(((C+5*a)/6-s)/r,((T+5*c)/6-n)/o,((5*a+h)/6-s)/r,((5*c+u)/6-n)/o,((a+h)/2-s)/r,((c+u)/2-n)/o),[h,u,a,c,C,T]=l(this,Bt).subarray(12,18),l(this,tn).push(((C+5*a)/6-s)/r,((T+5*c)/6-n)/o,((5*a+h)/6-s)/r,((5*c+u)/6-n)/o,((a+h)/2-s)/r,((c+u)/2-n)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const t=l(this,Dn),e=l(this,tn);if(isNaN(l(this,Bt)[6])&&!this.isEmpty())return A(this,ss,IE).call(this);const s=[];s.push(`M${t[4]} ${t[5]}`);for(let n=6;n<t.length;n+=6)isNaN(t[n])?s.push(`L${t[n+4]} ${t[n+5]}`):s.push(`C${t[n]} ${t[n+1]} ${t[n+2]} ${t[n+3]} ${t[n+4]} ${t[n+5]}`);A(this,ss,ME).call(this,s);for(let n=e.length-6;n>=6;n-=6)isNaN(e[n])?s.push(`L${e[n+4]} ${e[n+5]}`):s.push(`C${e[n]} ${e[n+1]} ${e[n+2]} ${e[n+3]} ${e[n+4]} ${e[n+5]}`);return A(this,ss,LE).call(this,s),s.join(" ")}newFreeDrawOutline(t,e,s,n,r,o){return new NE(t,e,s,n,r,o)}getOutlines(){var f;const t=l(this,Dn),e=l(this,tn),s=l(this,Bt),[n,r,o,a]=l(this,gi),c=new Float32Array((((f=l(this,Eo))==null?void 0:f.length)??0)+2);for(let p=0,g=c.length-2;p<g;p+=2)c[p]=(l(this,Eo)[p]-n)/o,c[p+1]=(l(this,Eo)[p+1]-r)/a;if(c[c.length-2]=(l(this,Ja)-n)/o,c[c.length-1]=(l(this,Za)-r)/a,isNaN(s[6])&&!this.isEmpty())return A(this,ss,DE).call(this,c);const h=new Float32Array(l(this,Dn).length+24+l(this,tn).length);let u=t.length;for(let p=0;p<u;p+=2){if(isNaN(t[p])){h[p]=h[p+1]=NaN;continue}h[p]=t[p],h[p+1]=t[p+1]}u=A(this,ss,FE).call(this,h,u);for(let p=e.length-6;p>=6;p-=6)for(let g=0;g<6;g+=2){if(isNaN(e[p+g])){h[u]=h[u+1]=NaN,u+=2;continue}h[u]=e[p+g],h[u+1]=e[p+g+1],u+=2}return A(this,ss,OE).call(this,h,u),this.newFreeDrawOutline(h,c,l(this,gi),l(this,Yc),l(this,Xc),l(this,Kc))}};gi=new WeakMap,tn=new WeakMap,Xc=new WeakMap,Kc=new WeakMap,Dn=new WeakMap,Bt=new WeakMap,Ja=new WeakMap,Za=new WeakMap,Ad=new WeakMap,Ed=new WeakMap,Yc=new WeakMap,Qc=new WeakMap,Eo=new WeakMap,Sd=new WeakMap,qp=new WeakMap,Gp=new WeakMap,ss=new WeakSet,Xh=function(){const t=l(this,Bt).subarray(4,6),e=l(this,Bt).subarray(16,18),[s,n,r,o]=l(this,gi);return[(l(this,Ja)+(t[0]-e[0])/2-s)/r,(l(this,Za)+(t[1]-e[1])/2-n)/o,(l(this,Ja)+(e[0]-t[0])/2-s)/r,(l(this,Za)+(e[1]-t[1])/2-n)/o]},IE=function(){const[t,e,s,n]=l(this,gi),[r,o,a,c]=A(this,ss,Xh).call(this);return`M${(l(this,Bt)[2]-t)/s} ${(l(this,Bt)[3]-e)/n} L${(l(this,Bt)[4]-t)/s} ${(l(this,Bt)[5]-e)/n} L${r} ${o} L${a} ${c} L${(l(this,Bt)[16]-t)/s} ${(l(this,Bt)[17]-e)/n} L${(l(this,Bt)[14]-t)/s} ${(l(this,Bt)[15]-e)/n} Z`},LE=function(t){const e=l(this,tn);t.push(`L${e[4]} ${e[5]} Z`)},ME=function(t){const[e,s,n,r]=l(this,gi),o=l(this,Bt).subarray(4,6),a=l(this,Bt).subarray(16,18),[c,h,u,f]=A(this,ss,Xh).call(this);t.push(`L${(o[0]-e)/n} ${(o[1]-s)/r} L${c} ${h} L${u} ${f} L${(a[0]-e)/n} ${(a[1]-s)/r}`)},DE=function(t){const e=l(this,Bt),[s,n,r,o]=l(this,gi),[a,c,h,u]=A(this,ss,Xh).call(this),f=new Float32Array(36);return f.set([NaN,NaN,NaN,NaN,(e[2]-s)/r,(e[3]-n)/o,NaN,NaN,NaN,NaN,(e[4]-s)/r,(e[5]-n)/o,NaN,NaN,NaN,NaN,a,c,NaN,NaN,NaN,NaN,h,u,NaN,NaN,NaN,NaN,(e[16]-s)/r,(e[17]-n)/o,NaN,NaN,NaN,NaN,(e[14]-s)/r,(e[15]-n)/o],0),this.newFreeDrawOutline(f,t,l(this,gi),l(this,Yc),l(this,Xc),l(this,Kc))},OE=function(t,e){const s=l(this,tn);return t.set([NaN,NaN,NaN,NaN,s[4],s[5]],e),e+=6},FE=function(t,e){const s=l(this,Bt).subarray(4,6),n=l(this,Bt).subarray(16,18),[r,o,a,c]=l(this,gi),[h,u,f,p]=A(this,ss,Xh).call(this);return t.set([NaN,NaN,NaN,NaN,(s[0]-r)/a,(s[1]-o)/c,NaN,NaN,NaN,NaN,h,u,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,(n[0]-r)/a,(n[1]-o)/c],e),e+=24},w(ir,Sd,8),w(ir,qp,2),w(ir,Gp,l(ir,Sd)+l(ir,qp));let Pp=ir;var Jc,tl,Sr,xd,mi,Cd,He,Xp,$E;class NE extends ct{constructor(e,s,n,r,o,a){super();w(this,Xp);w(this,Jc);w(this,tl,new Float32Array(4));w(this,Sr);w(this,xd);w(this,mi);w(this,Cd);w(this,He);b(this,He,e),b(this,mi,s),b(this,Jc,n),b(this,Cd,r),b(this,Sr,o),b(this,xd,a),this.lastPoint=[NaN,NaN],A(this,Xp,$E).call(this,a);const[c,h,u,f]=l(this,tl);for(let p=0,g=e.length;p<g;p+=2)e[p]=(e[p]-c)/u,e[p+1]=(e[p+1]-h)/f;for(let p=0,g=s.length;p<g;p+=2)s[p]=(s[p]-c)/u,s[p+1]=(s[p+1]-h)/f}toSVGPath(){const e=[`M${l(this,He)[4]} ${l(this,He)[5]}`];for(let s=6,n=l(this,He).length;s<n;s+=6){if(isNaN(l(this,He)[s])){e.push(`L${l(this,He)[s+4]} ${l(this,He)[s+5]}`);continue}e.push(`C${l(this,He)[s]} ${l(this,He)[s+1]} ${l(this,He)[s+2]} ${l(this,He)[s+3]} ${l(this,He)[s+4]} ${l(this,He)[s+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,s,n,r],o){const a=n-e,c=r-s;let h,u;switch(o){case 0:h=ct._rescale(l(this,He),e,r,a,-c),u=ct._rescale(l(this,mi),e,r,a,-c);break;case 90:h=ct._rescaleAndSwap(l(this,He),e,s,a,c),u=ct._rescaleAndSwap(l(this,mi),e,s,a,c);break;case 180:h=ct._rescale(l(this,He),n,s,-a,c),u=ct._rescale(l(this,mi),n,s,-a,c);break;case 270:h=ct._rescaleAndSwap(l(this,He),n,r,-a,-c),u=ct._rescaleAndSwap(l(this,mi),n,r,-a,-c);break}return{outline:Array.from(h),points:[Array.from(u)]}}get box(){return l(this,tl)}newOutliner(e,s,n,r,o,a=0){return new Pp(e,s,n,r,o,a)}getNewOutline(e,s){const[n,r,o,a]=l(this,tl),[c,h,u,f]=l(this,Jc),p=o*u,g=a*f,_=n*u+c,v=r*f+h,x=this.newOutliner({x:l(this,mi)[0]*p+_,y:l(this,mi)[1]*g+v},l(this,Jc),l(this,Cd),e,l(this,xd),s??l(this,Sr));for(let S=2;S<l(this,mi).length;S+=2)x.add({x:l(this,mi)[S]*p+_,y:l(this,mi)[S+1]*g+v});return x.getOutlines()}}Jc=new WeakMap,tl=new WeakMap,Sr=new WeakMap,xd=new WeakMap,mi=new WeakMap,Cd=new WeakMap,He=new WeakMap,Xp=new WeakSet,$E=function(e){const s=l(this,He);let n=s[4],r=s[5];const o=[n,r,n,r];let a=n,c=r;const h=e?Math.max:Math.min;for(let f=6,p=s.length;f<p;f+=6){const g=s[f+4],_=s[f+5];if(isNaN(s[f]))pt.pointBoundingBox(g,_,o),c<_?(a=g,c=_):c===_&&(a=h(a,g));else{const v=[1/0,1/0,-1/0,-1/0];pt.bezierBoundingBox(n,r,...s.slice(f,f+6),v),pt.rectBoundingBox(...v,o),c<v[3]?(a=v[2],c=v[3]):c===v[3]&&(a=h(a,v[2]))}n=g,r=_}const u=l(this,tl);u[0]=o[0]-l(this,Sr),u[1]=o[1]-l(this,Sr),u[2]=o[2]-o[0]+2*l(this,Sr),u[3]=o[3]-o[1]+2*l(this,Sr),this.lastPoint=[a,c]};var Td,Pd,So,en,Ks,BE,ep,HE,jE,Tb;class Cb{constructor(t,e=0,s=0,n=!0){w(this,Ks);w(this,Td);w(this,Pd);w(this,So,[]);w(this,en,[]);const r=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:g,y:_,width:v,height:x}of t){const S=Math.floor((g-e)/o)*o,C=Math.ceil((g+v+e)/o)*o,T=Math.floor((_-e)/o)*o,R=Math.ceil((_+x+e)/o)*o,L=[S,T,R,!0],O=[C,T,R,!1];l(this,So).push(L,O),pt.rectBoundingBox(S,T,C,R,r)}const a=r[2]-r[0]+2*s,c=r[3]-r[1]+2*s,h=r[0]-s,u=r[1]-s,f=l(this,So).at(n?-1:-2),p=[f[0],f[2]];for(const g of l(this,So)){const[_,v,x]=g;g[0]=(_-h)/a,g[1]=(v-u)/c,g[2]=(x-u)/c}b(this,Td,new Float32Array([h,u,a,c])),b(this,Pd,p)}getOutlines(){l(this,So).sort((e,s)=>e[0]-s[0]||e[1]-s[1]||e[2]-s[2]);const t=[];for(const e of l(this,So))e[3]?(t.push(...A(this,Ks,Tb).call(this,e)),A(this,Ks,HE).call(this,e)):(A(this,Ks,jE).call(this,e),t.push(...A(this,Ks,Tb).call(this,e)));return A(this,Ks,BE).call(this,t)}}Td=new WeakMap,Pd=new WeakMap,So=new WeakMap,en=new WeakMap,Ks=new WeakSet,BE=function(t){const e=[],s=new Set;for(const o of t){const[a,c,h]=o;e.push([a,c,o],[a,h,o])}e.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=e.length;o<a;o+=2){const c=e[o][2],h=e[o+1][2];c.push(h),h.push(c),s.add(c),s.add(h)}const n=[];let r;for(;s.size>0;){const o=s.values().next().value;let[a,c,h,u,f]=o;s.delete(o);let p=a,g=c;for(r=[a,h],n.push(r);;){let _;if(s.has(u))_=u;else if(s.has(f))_=f;else break;s.delete(_),[a,c,h,u,f]=_,p!==a&&(r.push(p,g,a,g===c?c:h),p=a),g=g===c?h:c}r.push(p,g)}return new qk(n,l(this,Td),l(this,Pd))},ep=function(t){const e=l(this,en);let s=0,n=e.length-1;for(;s<=n;){const r=s+n>>1,o=e[r][0];if(o===t)return r;o<t?s=r+1:n=r-1}return n+1},HE=function([,t,e]){const s=A(this,Ks,ep).call(this,t);l(this,en).splice(s,0,[t,e])},jE=function([,t,e]){const s=A(this,Ks,ep).call(this,t);for(let n=s;n<l(this,en).length;n++){const[r,o]=l(this,en)[n];if(r!==t)break;if(r===t&&o===e){l(this,en).splice(n,1);return}}for(let n=s-1;n>=0;n--){const[r,o]=l(this,en)[n];if(r!==t)break;if(r===t&&o===e){l(this,en).splice(n,1);return}}},Tb=function(t){const[e,s,n]=t,r=[[e,s,n]],o=A(this,Ks,ep).call(this,n);for(let a=0;a<o;a++){const[c,h]=l(this,en)[a];for(let u=0,f=r.length;u<f;u++){const[,p,g]=r[u];if(!(h<=p||g<=c)){if(p>=c){if(g>h)r[u][1]=h;else{if(f===1)return[];r.splice(u,1),u--,f--}continue}r[u][2]=c,g>h&&r.push([e,h,g])}}}return r};var Rd,Zc;class qk extends ct{constructor(e,s,n){super();w(this,Rd);w(this,Zc);b(this,Zc,e),b(this,Rd,s),this.lastPoint=n}toSVGPath(){const e=[];for(const s of l(this,Zc)){let[n,r]=s;e.push(`M${n} ${r}`);for(let o=2;o<s.length;o+=2){const a=s[o],c=s[o+1];a===n?(e.push(`V${c}`),r=c):c===r&&(e.push(`H${a}`),n=a)}e.push("Z")}return e.join(" ")}serialize([e,s,n,r],o){const a=[],c=n-e,h=r-s;for(const u of l(this,Zc)){const f=new Array(u.length);for(let p=0;p<u.length;p+=2)f[p]=e+u[p]*c,f[p+1]=r-u[p+1]*h;a.push(f)}return a}get box(){return l(this,Rd)}get classNamesForOutlining(){return["highlightOutline"]}}Rd=new WeakMap,Zc=new WeakMap;class Pb extends Pp{newFreeDrawOutline(t,e,s,n,r,o){return new Gk(t,e,s,n,r,o)}}class Gk extends NE{newOutliner(t,e,s,n,r,o=0){return new Pb(t,e,s,n,r,o)}}var sn,el,th,es,kd,eh,Id,Ld,xo,nn,sh,Md,de,Rb,kb,Ib,ca,VE,Kr;const Qs=class Qs{constructor({editor:t=null,uiManager:e=null}){w(this,de);w(this,sn,null);w(this,el,null);w(this,th);w(this,es,null);w(this,kd,!1);w(this,eh,!1);w(this,Id,null);w(this,Ld);w(this,xo,null);w(this,nn,null);w(this,sh);var s;t?(b(this,eh,!1),b(this,sh,Wt.HIGHLIGHT_COLOR),b(this,Id,t)):(b(this,eh,!0),b(this,sh,Wt.HIGHLIGHT_DEFAULT_COLOR)),b(this,nn,(t==null?void 0:t._uiManager)||e),b(this,Ld,l(this,nn)._eventBus),b(this,th,(t==null?void 0:t.color)||((s=l(this,nn))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),l(Qs,Md)||b(Qs,Md,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return jt(this,"_keyboardManager",new Xd([[["Escape","mac+Escape"],Qs.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Qs.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Qs.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Qs.prototype._moveToPrevious],[["Home","mac+Home"],Qs.prototype._moveToBeginning],[["End","mac+End"],Qs.prototype._moveToEnd]]))}renderButton(){const t=b(this,sn,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=l(this,nn)._signal;t.addEventListener("click",A(this,de,ca).bind(this),{signal:e}),t.addEventListener("keydown",A(this,de,Ib).bind(this),{signal:e});const s=b(this,el,document.createElement("span"));return s.className="swatch",s.setAttribute("aria-hidden",!0),s.style.backgroundColor=l(this,th),t.append(s),t}renderMainDropdown(){const t=b(this,es,A(this,de,Rb).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===l(this,sn)){A(this,de,ca).call(this,t);return}const e=t.target.getAttribute("data-color");e&&A(this,de,kb).call(this,e,t)}_moveToNext(t){var e,s;if(!l(this,de,Kr)){A(this,de,ca).call(this,t);return}if(t.target===l(this,sn)){(e=l(this,es).firstChild)==null||e.focus();return}(s=t.target.nextSibling)==null||s.focus()}_moveToPrevious(t){var e,s;if(t.target===((e=l(this,es))==null?void 0:e.firstChild)||t.target===l(this,sn)){l(this,de,Kr)&&this._hideDropdownFromKeyboard();return}l(this,de,Kr)||A(this,de,ca).call(this,t),(s=t.target.previousSibling)==null||s.focus()}_moveToBeginning(t){var e;if(!l(this,de,Kr)){A(this,de,ca).call(this,t);return}(e=l(this,es).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!l(this,de,Kr)){A(this,de,ca).call(this,t);return}(e=l(this,es).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=l(this,es))==null||t.classList.add("hidden"),(e=l(this,xo))==null||e.abort(),b(this,xo,null)}_hideDropdownFromKeyboard(){var t;if(!l(this,eh)){if(!l(this,de,Kr)){(t=l(this,Id))==null||t.unselect();return}this.hideDropdown(),l(this,sn).focus({preventScroll:!0,focusVisible:l(this,kd)})}}updateColor(t){if(l(this,el)&&(l(this,el).style.backgroundColor=t),!l(this,es))return;const e=l(this,nn).highlightColors.values();for(const s of l(this,es).children)s.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=l(this,sn))==null||t.remove(),b(this,sn,null),b(this,el,null),(e=l(this,es))==null||e.remove(),b(this,es,null)}};sn=new WeakMap,el=new WeakMap,th=new WeakMap,es=new WeakMap,kd=new WeakMap,eh=new WeakMap,Id=new WeakMap,Ld=new WeakMap,xo=new WeakMap,nn=new WeakMap,sh=new WeakMap,Md=new WeakMap,de=new WeakSet,Rb=function(){const t=document.createElement("div"),e=l(this,nn)._signal;t.addEventListener("contextmenu",dn,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[s,n]of l(this,nn).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",n),r.title=s,r.setAttribute("data-l10n-id",l(Qs,Md)[s]);const o=document.createElement("span");r.append(o),o.className="swatch",o.style.backgroundColor=n,r.setAttribute("aria-selected",n===l(this,th)),r.addEventListener("click",A(this,de,kb).bind(this,n),{signal:e}),t.append(r)}return t.addEventListener("keydown",A(this,de,Ib).bind(this),{signal:e}),t},kb=function(t,e){e.stopPropagation(),l(this,Ld).dispatch("switchannotationeditorparams",{source:this,type:l(this,sh),value:t})},Ib=function(t){Qs._keyboardManager.exec(this,t)},ca=function(t){if(l(this,de,Kr)){this.hideDropdown();return}if(b(this,kd,t.detail===0),l(this,xo)||(b(this,xo,new AbortController),window.addEventListener("pointerdown",A(this,de,VE).bind(this),{signal:l(this,nn).combinedSignal(l(this,xo))})),l(this,es)){l(this,es).classList.remove("hidden");return}const e=b(this,es,A(this,de,Rb).call(this));l(this,sn).append(e)},VE=function(t){var e;(e=l(this,es))!=null&&e.contains(t.target)||this.hideDropdown()},Kr=function(){return l(this,es)&&!l(this,es).classList.contains("hidden")},w(Qs,Md,null);let Rp=Qs;var ih,Dd,xr,sl,nh,ti,Od,Fd,il,$i,bi,ms,rh,Cr,Ps,oh,Bi,Nd,Dt,Lb,sp,UE,zE,WE,Mb,ha,Vi,Ql,qE,ip,Kh,GE,XE,KE,YE,QE;const te=class te extends we{constructor(e){super({...e,name:"highlightEditor"});w(this,Dt);w(this,ih,null);w(this,Dd,0);w(this,xr);w(this,sl,null);w(this,nh,null);w(this,ti,null);w(this,Od,null);w(this,Fd,0);w(this,il,null);w(this,$i,null);w(this,bi,null);w(this,ms,!1);w(this,rh,null);w(this,Cr);w(this,Ps,null);w(this,oh,"");w(this,Bi);w(this,Nd,"");this.color=e.color||te._defaultColor,b(this,Bi,e.thickness||te._defaultThickness),b(this,Cr,e.opacity||te._defaultOpacity),b(this,xr,e.boxes||null),b(this,Nd,e.methodOfCreation||""),b(this,oh,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(b(this,ms,!0),A(this,Dt,sp).call(this,e),A(this,Dt,ha).call(this)):l(this,xr)&&(b(this,ih,e.anchorNode),b(this,Dd,e.anchorOffset),b(this,Od,e.focusNode),b(this,Fd,e.focusOffset),A(this,Dt,Lb).call(this),A(this,Dt,ha).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=te.prototype;return jt(this,"_keyboardManager",new Xd([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:l(this,ms)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:l(this,Bi),methodOfCreation:l(this,Nd)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,s){var n;we.initialize(e,s),te._defaultColor||(te._defaultColor=((n=s.highlightColors)==null?void 0:n.values().next().value)||"#fff066")}static updateDefaultParams(e,s){switch(e){case Wt.HIGHLIGHT_DEFAULT_COLOR:te._defaultColor=s;break;case Wt.HIGHLIGHT_THICKNESS:te._defaultThickness=s;break}}translateInPage(e,s){}get toolbarPosition(){return l(this,rh)}updateParams(e,s){switch(e){case Wt.HIGHLIGHT_COLOR:A(this,Dt,UE).call(this,s);break;case Wt.HIGHLIGHT_THICKNESS:A(this,Dt,zE).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[Wt.HIGHLIGHT_DEFAULT_COLOR,te._defaultColor],[Wt.HIGHLIGHT_THICKNESS,te._defaultThickness]]}get propertiesToUpdate(){return[[Wt.HIGHLIGHT_COLOR,this.color||te._defaultColor],[Wt.HIGHLIGHT_THICKNESS,l(this,Bi)||te._defaultThickness],[Wt.HIGHLIGHT_FREE,l(this,ms)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(b(this,nh,new Rp({editor:this})),e.addColorPicker(l(this,nh))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(A(this,Dt,Kh).call(this))}getBaseTranslation(){return[0,0]}getRect(e,s){return super.getRect(e,s,A(this,Dt,Kh).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){A(this,Dt,Mb).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(A(this,Dt,ha).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var n;let s=!1;this.parent&&!e?A(this,Dt,Mb).call(this):e&&(A(this,Dt,ha).call(this,e),s=!this.parent&&((n=this.div)==null?void 0:n.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),s&&this.select()}rotate(e){var r,o,a;const{drawLayer:s}=this.parent;let n;l(this,ms)?(e=(e-this.rotation+360)%360,n=A(r=te,Vi,Ql).call(r,l(this,$i).box,e)):n=A(o=te,Vi,Ql).call(o,[this.x,this.y,this.width,this.height],e),s.updateProperties(l(this,bi),{bbox:n,root:{"data-main-rotation":e}}),s.updateProperties(l(this,Ps),{bbox:A(a=te,Vi,Ql).call(a,l(this,ti).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();l(this,oh)&&(e.setAttribute("aria-label",l(this,oh)),e.setAttribute("role","mark")),l(this,ms)?e.classList.add("free"):this.div.addEventListener("keydown",A(this,Dt,qE).bind(this),{signal:this._uiManager._signal});const s=b(this,il,document.createElement("div"));e.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=l(this,sl);const[n,r]=this.parentDimensions;return this.setDims(this.width*n,this.height*r),xv(this,l(this,il),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(l(this,Ps),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(l(this,Ps),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:A(this,Dt,ip).call(this,!0);break;case 1:case 3:A(this,Dt,ip).call(this,!1);break}}select(){var e;super.select(),l(this,Ps)&&((e=this.parent)==null||e.drawLayer.updateProperties(l(this,Ps),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),l(this,Ps)&&((e=this.parent)==null||e.drawLayer.updateProperties(l(this,Ps),{rootClass:{selected:!1}}),l(this,ms)||A(this,Dt,ip).call(this,!1))}get _mustFixPosition(){return!l(this,ms)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(l(this,bi),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(l(this,Ps),{rootClass:{hidden:!e}}))}static startHighlighting(e,s,{target:n,x:r,y:o}){const{x:a,y:c,width:h,height:u}=n.getBoundingClientRect(),f=new AbortController,p=e.combinedSignal(f),g=_=>{f.abort(),A(this,Vi,YE).call(this,e,_)};window.addEventListener("blur",g,{signal:p}),window.addEventListener("pointerup",g,{signal:p}),window.addEventListener("pointerdown",qe,{capture:!0,passive:!1,signal:p}),window.addEventListener("contextmenu",dn,{signal:p}),n.addEventListener("pointermove",A(this,Vi,KE).bind(this,e),{signal:p}),this._freeHighlight=new Pb({x:r,y:o},[a,c,h,u],e.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,s,n){var v,x,S,C;let r=null;if(e instanceof SE){const{data:{quadPoints:T,rect:R,rotation:L,id:O,color:I,opacity:D,popupRef:B},parent:{page:{pageNumber:K}}}=e;r=e={annotationType:Rt.HIGHLIGHT,color:Array.from(I),opacity:D,quadPoints:T,boxes:null,pageIndex:K-1,rect:R.slice(0),rotation:L,id:O,deleted:!1,popupRef:B}}else if(e instanceof Rv){const{data:{inkLists:T,rect:R,rotation:L,id:O,color:I,borderStyle:{rawWidth:D},popupRef:B},parent:{page:{pageNumber:K}}}=e;r=e={annotationType:Rt.HIGHLIGHT,color:Array.from(I),thickness:D,inkLists:T,boxes:null,pageIndex:K-1,rect:R.slice(0),rotation:L,id:O,deleted:!1,popupRef:B}}const{color:o,quadPoints:a,inkLists:c,opacity:h}=e,u=await super.deserialize(e,s,n);u.color=pt.makeHexColor(...o),b(u,Cr,h||1),c&&b(u,Bi,e.thickness),u.annotationElementId=e.id||null,u._initialData=r;const[f,p]=u.pageDimensions,[g,_]=u.pageTranslation;if(a){const T=b(u,xr,[]);for(let R=0;R<a.length;R+=8)T.push({x:(a[R]-g)/f,y:1-(a[R+1]-_)/p,width:(a[R+2]-a[R])/f,height:(a[R+1]-a[R+5])/p});A(v=u,Dt,Lb).call(v),A(x=u,Dt,ha).call(x),u.rotate(u.rotation)}else if(c){b(u,ms,!0);const T=c[0],R={x:T[0]-g,y:p-(T[1]-_)},L=new Pb(R,[0,0,f,p],1,l(u,Bi)/2,!0,.001);for(let D=0,B=T.length;D<B;D+=2)R.x=T[D]-g,R.y=p-(T[D+1]-_),L.add(R);const{id:O,clipPathId:I}=s.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:u.color,"fill-opacity":u._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:L.toSVGPath()}},!0,!0);A(S=u,Dt,sp).call(S,{highlightOutlines:L.getOutlines(),highlightId:O,clipPathId:I}),A(C=u,Dt,ha).call(C),u.rotate(u.parentRotation)}return u}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const s=this.getRect(0,0),n=we._colorManager.convert(this.color),r={annotationType:Rt.HIGHLIGHT,color:n,opacity:l(this,Cr),thickness:l(this,Bi),quadPoints:A(this,Dt,GE).call(this),outlines:A(this,Dt,XE).call(this,s),pageIndex:this.pageIndex,rect:s,rotation:A(this,Dt,Kh).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!A(this,Dt,QE).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};ih=new WeakMap,Dd=new WeakMap,xr=new WeakMap,sl=new WeakMap,nh=new WeakMap,ti=new WeakMap,Od=new WeakMap,Fd=new WeakMap,il=new WeakMap,$i=new WeakMap,bi=new WeakMap,ms=new WeakMap,rh=new WeakMap,Cr=new WeakMap,Ps=new WeakMap,oh=new WeakMap,Bi=new WeakMap,Nd=new WeakMap,Dt=new WeakSet,Lb=function(){const e=new Cb(l(this,xr),.001);b(this,$i,e.getOutlines()),[this.x,this.y,this.width,this.height]=l(this,$i).box;const s=new Cb(l(this,xr),.0025,.001,this._uiManager.direction==="ltr");b(this,ti,s.getOutlines());const{lastPoint:n}=l(this,ti);b(this,rh,[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height])},sp=function({highlightOutlines:e,highlightId:s,clipPathId:n}){var f,p;if(b(this,$i,e),b(this,ti,e.getNewOutline(l(this,Bi)/2+1.5,.0025)),s>=0)b(this,bi,s),b(this,sl,n),this.parent.drawLayer.finalizeDraw(s,{bbox:e.box,path:{d:e.toSVGPath()}}),b(this,Ps,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:l(this,ti).box,path:{d:l(this,ti).toSVGPath()}},!0));else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(l(this,bi),{bbox:A(f=te,Vi,Ql).call(f,l(this,$i).box,(g-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(l(this,Ps),{bbox:A(p=te,Vi,Ql).call(p,l(this,ti).box,g),path:{d:l(this,ti).toSVGPath()}})}const[o,a,c,h]=e.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=c,this.height=h;break;case 90:{const[g,_]=this.parentDimensions;this.x=a,this.y=1-o,this.width=c*_/g,this.height=h*g/_;break}case 180:this.x=1-o,this.y=1-a,this.width=c,this.height=h;break;case 270:{const[g,_]=this.parentDimensions;this.x=1-a,this.y=o,this.width=c*_/g,this.height=h*g/_;break}}const{lastPoint:u}=l(this,ti);b(this,rh,[(u[0]-o)/c,(u[1]-a)/h])},UE=function(e){const s=(o,a)=>{var c,h;this.color=o,b(this,Cr,a),(c=this.parent)==null||c.drawLayer.updateProperties(l(this,bi),{root:{fill:o,"fill-opacity":a}}),(h=l(this,nh))==null||h.updateColor(o)},n=this.color,r=l(this,Cr);this.addCommands({cmd:s.bind(this,e,te._defaultOpacity),undo:s.bind(this,n,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Wt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},zE=function(e){const s=l(this,Bi),n=r=>{b(this,Bi,r),A(this,Dt,WE).call(this,r)};this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Wt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},WE=function(e){if(!l(this,ms))return;A(this,Dt,sp).call(this,{highlightOutlines:l(this,$i).getNewOutline(e/2)}),this.fixAndSetPosition();const[s,n]=this.parentDimensions;this.setDims(this.width*s,this.height*n)},Mb=function(){l(this,bi)===null||!this.parent||(this.parent.drawLayer.remove(l(this,bi)),b(this,bi,null),this.parent.drawLayer.remove(l(this,Ps)),b(this,Ps,null))},ha=function(e=this.parent){l(this,bi)===null&&({id:Bs(this,bi)._,clipPathId:Bs(this,sl)._}=e.drawLayer.draw({bbox:l(this,$i).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":l(this,Cr)},rootClass:{highlight:!0,free:l(this,ms)},path:{d:l(this,$i).toSVGPath()}},!1,!0),b(this,Ps,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:l(this,ms)},bbox:l(this,ti).box,path:{d:l(this,ti).toSVGPath()}},l(this,ms))),l(this,il)&&(l(this,il).style.clipPath=l(this,sl)))},Vi=new WeakSet,Ql=function([e,s,n,r],o){switch(o){case 90:return[1-s-r,e,r,n];case 180:return[1-e-n,1-s-r,n,r];case 270:return[s,1-e-n,r,n]}return[e,s,n,r]},qE=function(e){te._keyboardManager.exec(this,e)},ip=function(e){if(!l(this,ih))return;const s=window.getSelection();e?s.setPosition(l(this,ih),l(this,Dd)):s.setPosition(l(this,Od),l(this,Fd))},Kh=function(){return l(this,ms)?this.rotation:0},GE=function(){if(l(this,ms))return null;const[e,s]=this.pageDimensions,[n,r]=this.pageTranslation,o=l(this,xr),a=new Float32Array(o.length*8);let c=0;for(const{x:h,y:u,width:f,height:p}of o){const g=h*e+n,_=(1-u)*s+r;a[c]=a[c+4]=g,a[c+1]=a[c+3]=_,a[c+2]=a[c+6]=g+f*e,a[c+5]=a[c+7]=_-p*s,c+=8}return a},XE=function(e){return l(this,$i).serialize(e,A(this,Dt,Kh).call(this))},KE=function(e,s){this._freeHighlight.add(s)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},YE=function(e,s){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},QE=function(e){const{color:s}=this._initialData;return e.color.some((n,r)=>n!==s[r])},w(te,Vi),Z(te,"_defaultColor",null),Z(te,"_defaultOpacity",1),Z(te,"_defaultThickness",12),Z(te,"_type","highlight"),Z(te,"_editorType",Rt.HIGHLIGHT),Z(te,"_freeHighlightId",-1),Z(te,"_freeHighlight",null),Z(te,"_freeHighlightClipId","");let kp=te;var nl;class JE{constructor(){w(this,nl,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,s]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,s)}updateSVGProperty(t,e){l(this,nl)[t]=e}toSVGProperties(){const t=l(this,nl);return b(this,nl,Object.create(null)),{root:t}}reset(){b(this,nl,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){fe("Not implemented")}}nl=new WeakMap;var vi,ah,os,rl,ol,Co,To,Po,al,Kt,Db,Ob,Fb,Yh,ZE,np,Qh,Jl;const ft=class ft extends we{constructor(e){super(e);w(this,Kt);w(this,vi,null);w(this,ah);Z(this,"_drawId",null);b(this,ah,e.mustBeCommitted||!1),this._addOutlines(e)}_addOutlines(e){e.drawOutlines&&(A(this,Kt,Db).call(this,e),A(this,Kt,Yh).call(this))}static _mergeSVGProperties(e,s){const n=new Set(Object.keys(e));for(const[r,o]of Object.entries(s))n.has(r)?Object.assign(e[r],o):e[r]=o;return e}static getDefaultDrawingOptions(e){fe("Not implemented")}static get typesMap(){fe("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,s){const n=this.typesMap.get(e);n&&this._defaultDrawingOptions.updateProperty(n,s),this._currentParent&&(l(ft,os).updateProperty(n,s),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,s){const n=this.constructor.typesMap.get(e);n&&this._updateProperty(e,n,s)}static get defaultPropertiesToUpdate(){const e=[],s=this._defaultDrawingOptions;for(const[n,r]of this.typesMap)e.push([n,s[r]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:s}=this;for(const[n,r]of this.constructor.typesMap)e.push([n,s[r]]);return e}_updateProperty(e,s,n){const r=this._drawingOptions,o=r[s],a=c=>{var u;r.updateProperty(s,c);const h=l(this,vi).updateProperty(s,c);h&&A(this,Kt,Qh).call(this,h),(u=this.parent)==null||u.drawLayer.updateProperties(this._drawId,r.toSVGProperties())};this.addCommands({cmd:a.bind(this,n),undo:a.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,ft._mergeSVGProperties(l(this,vi).getPathResizingSVGProperties(A(this,Kt,np).call(this)),{bbox:A(this,Kt,Jl).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,ft._mergeSVGProperties(l(this,vi).getPathResizedSVGProperties(A(this,Kt,np).call(this)),{bbox:A(this,Kt,Jl).call(this)}))}_onTranslating(e,s){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,{bbox:A(this,Kt,Jl).call(this)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,ft._mergeSVGProperties(l(this,vi).getPathTranslatedSVGProperties(A(this,Kt,np).call(this),this.parentDimensions),{bbox:A(this,Kt,Jl).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,l(this,ah)&&(b(this,ah,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){A(this,Kt,Fb).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(A(this,Kt,Yh).call(this),A(this,Kt,Qh).call(this,l(this,vi).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var n;let s=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),A(this,Kt,Fb).call(this)):e&&(this._uiManager.addShouldRescale(this),A(this,Kt,Yh).call(this,e),s=!this.parent&&((n=this.div)==null?void 0:n.classList.contains("selectedEditor"))),super.setParent(e),s&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,ft._mergeSVGProperties({bbox:A(this,Kt,Jl).call(this)},l(this,vi).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&A(this,Kt,Qh).call(this,l(this,vi).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,s;this._isCopy&&(e=this.x,s=this.y);const n=super.render();n.classList.add("draw");const r=document.createElement("div");n.append(r),r.setAttribute("aria-hidden","true"),r.className="internal";const[o,a]=this.parentDimensions;return this.setDims(this.width*o,this.height*a),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,s),n}static createDrawerInstance(e,s,n,r,o){fe("Not implemented")}static startDrawing(e,s,n,r){var x;const{target:o,offsetX:a,offsetY:c,pointerId:h,pointerType:u}=r;if(l(ft,To)&&l(ft,To)!==u)return;const{viewport:{rotation:f}}=e,{width:p,height:g}=o.getBoundingClientRect(),_=b(ft,rl,new AbortController),v=e.combinedSignal(_);if(l(ft,Co)||b(ft,Co,h),l(ft,To)??b(ft,To,u),window.addEventListener("pointerup",S=>{var C;l(ft,Co)===S.pointerId?this._endDraw(S):(C=l(ft,Po))==null||C.delete(S.pointerId)},{signal:v}),window.addEventListener("pointercancel",S=>{var C;l(ft,Co)===S.pointerId?this._currentParent.endDrawingSession():(C=l(ft,Po))==null||C.delete(S.pointerId)},{signal:v}),window.addEventListener("pointerdown",S=>{l(ft,To)===S.pointerType&&((l(ft,Po)||b(ft,Po,new Set)).add(S.pointerId),l(ft,os).isCancellable()&&(l(ft,os).removeLastElement(),l(ft,os).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",dn,{signal:v}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:v}),o.addEventListener("touchmove",S=>{S.timeStamp===l(ft,al)&&qe(S)},{signal:v}),e.toggleDrawing(),(x=s._editorUndoBar)==null||x.hide(),l(ft,os)){e.drawLayer.updateProperties(this._currentDrawId,l(ft,os).startNew(a,c,p,g,f));return}s.updateUIForDefaultProperties(this),b(ft,os,this.createDrawerInstance(a,c,p,g,f)),b(ft,ol,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(l(ft,ol).toSVGProperties(),l(ft,os).defaultSVGProperties),!0,!1)}static _drawMove(e){var o;if(b(ft,al,-1),!l(ft,os))return;const{offsetX:s,offsetY:n,pointerId:r}=e;if(l(ft,Co)===r){if(((o=l(ft,Po))==null?void 0:o.size)>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,l(ft,os).add(s,n)),b(ft,al,e.timeStamp),qe(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,b(ft,os,null),b(ft,ol,null),b(ft,To,null),b(ft,al,NaN)),l(ft,rl)&&(l(ft,rl).abort(),b(ft,rl,null),b(ft,Co,NaN),b(ft,Po,null))}static _endDraw(e){const s=this._currentParent;if(s){if(s.toggleDrawing(!0),this._cleanup(!1),(e==null?void 0:e.target)===s.div&&s.drawLayer.updateProperties(this._currentDrawId,l(ft,os).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const n=l(ft,os),r=this._currentDrawId,o=n.getLastElement();s.addCommands({cmd:()=>{s.drawLayer.updateProperties(r,n.setLastElement(o))},undo:()=>{s.drawLayer.updateProperties(r,n.removeLastElement())},mustExec:!1,type:Wt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const s=this._currentParent;if(!s)return null;if(s.toggleDrawing(!0),s.cleanUndoStack(Wt.DRAW_STEP),!l(ft,os).isEmpty()){const{pageDimensions:[n,r],scale:o}=s,a=s.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:l(ft,os).getOutlines(n*o,r*o,o,this._INNER_MARGIN),drawingOptions:l(ft,ol),mustBeCommitted:!e});return this._cleanup(!0),a}return s.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,s,n,r,o,a){fe("Not implemented")}static async deserialize(e,s,n){var f,p;const{rawDims:{pageWidth:r,pageHeight:o,pageX:a,pageY:c}}=s.viewport,h=this.deserializeDraw(a,c,r,o,this._INNER_MARGIN,e),u=await super.deserialize(e,s,n);return u.createDrawingOptions(e),A(f=u,Kt,Db).call(f,{drawOutlines:h}),A(p=u,Kt,Yh).call(p),u.onScaleChanging(),u.rotate(),u}serializeDraw(e){const[s,n]=this.pageTranslation,[r,o]=this.pageDimensions;return l(this,vi).serialize([s,n,r,o],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};vi=new WeakMap,ah=new WeakMap,os=new WeakMap,rl=new WeakMap,ol=new WeakMap,Co=new WeakMap,To=new WeakMap,Po=new WeakMap,al=new WeakMap,Kt=new WeakSet,Db=function({drawOutlines:e,drawId:s,drawingOptions:n}){b(this,vi,e),this._drawingOptions||(this._drawingOptions=n),s>=0?(this._drawId=s,this.parent.drawLayer.finalizeDraw(s,e.defaultProperties)):this._drawId=A(this,Kt,Ob).call(this,e,this.parent),A(this,Kt,Qh).call(this,e.box)},Ob=function(e,s){const{id:n}=s.drawLayer.draw(ft._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return n},Fb=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Yh=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=A(this,Kt,Ob).call(this,l(this,vi),e)}},ZE=function([e,s,n,r]){const{parentDimensions:[o,a],rotation:c}=this;switch(c){case 90:return[s,1-e,n*(a/o),r*(o/a)];case 180:return[1-e,1-s,n,r];case 270:return[1-s,e,n*(a/o),r*(o/a)];default:return[e,s,n,r]}},np=function(){const{x:e,y:s,width:n,height:r,parentDimensions:[o,a],rotation:c}=this;switch(c){case 90:return[1-s,e,n*(o/a),r*(a/o)];case 180:return[1-e,1-s,n,r];case 270:return[s,1-e,n*(o/a),r*(a/o)];default:return[e,s,n,r]}},Qh=function(e){if([this.x,this.y,this.width,this.height]=A(this,Kt,ZE).call(this,e),this.div){this.fixAndSetPosition();const[s,n]=this.parentDimensions;this.setDims(this.width*s,this.height*n)}this._onResized()},Jl=function(){const{x:e,y:s,width:n,height:r,rotation:o,parentRotation:a,parentDimensions:[c,h]}=this;switch((o*4+a)/90){case 1:return[1-s-r,e,r,n];case 2:return[1-e-n,1-s-r,n,r];case 3:return[s,1-e-n,r,n];case 4:return[e,s-n*(c/h),r*(h/c),n*(c/h)];case 5:return[1-s,e,n*(c/h),r*(h/c)];case 6:return[1-e-r*(h/c),1-s,r*(h/c),n*(c/h)];case 7:return[s-n*(c/h),1-e-r*(h/c),n*(c/h),r*(h/c)];case 8:return[e-n,s-r,n,r];case 9:return[1-s,e-n,r,n];case 10:return[1-e,1-s,n,r];case 11:return[s-r,1-e,r,n];case 12:return[e-r*(h/c),s,r*(h/c),n*(c/h)];case 13:return[1-s-n*(c/h),e-r*(h/c),n*(c/h),r*(h/c)];case 14:return[1-e,1-s-n*(c/h),r*(h/c),n*(c/h)];case 15:return[s,1-e,n*(c/h),r*(h/c)];default:return[e,s,n,r]}},Z(ft,"_currentDrawId",-1),Z(ft,"_currentParent",null),w(ft,os,null),w(ft,rl,null),w(ft,ol,null),w(ft,Co,NaN),w(ft,To,null),w(ft,Po,null),w(ft,al,NaN),Z(ft,"_INNER_MARGIN",3);let Ip=ft;var On,as,ls,ll,lh,Us,bs,Hi,cl,hl,ul,ch,rp;class Xk{constructor(t,e,s,n,r,o){w(this,ch);w(this,On,new Float64Array(6));w(this,as);w(this,ls);w(this,ll);w(this,lh);w(this,Us);w(this,bs,"");w(this,Hi,0);w(this,cl,new Qd);w(this,hl);w(this,ul);b(this,hl,s),b(this,ul,n),b(this,ll,r),b(this,lh,o),[t,e]=A(this,ch,rp).call(this,t,e);const a=b(this,as,[NaN,NaN,NaN,NaN,t,e]);b(this,Us,[t,e]),b(this,ls,[{line:a,points:l(this,Us)}]),l(this,On).set(a,0)}updateProperty(t,e){t==="stroke-width"&&b(this,lh,e)}isEmpty(){return!l(this,ls)||l(this,ls).length===0}isCancellable(){return l(this,Us).length<=10}add(t,e){[t,e]=A(this,ch,rp).call(this,t,e);const[s,n,r,o]=l(this,On).subarray(2,6),a=t-r,c=e-o;return Math.hypot(l(this,hl)*a,l(this,ul)*c)<=2?null:(l(this,Us).push(t,e),isNaN(s)?(l(this,On).set([r,o,t,e],2),l(this,as).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(l(this,On)[0])&&l(this,as).splice(6,6),l(this,On).set([s,n,r,o,t,e],0),l(this,as).push(...ct.createBezierPoints(s,n,r,o,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const s=this.add(t,e);return s||(l(this,Us).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,s,n,r){b(this,hl,s),b(this,ul,n),b(this,ll,r),[t,e]=A(this,ch,rp).call(this,t,e);const o=b(this,as,[NaN,NaN,NaN,NaN,t,e]);b(this,Us,[t,e]);const a=l(this,ls).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),l(this,ls).push({line:o,points:l(this,Us)}),l(this,On).set(o,0),b(this,Hi,0),this.toSVGPath(),null}getLastElement(){return l(this,ls).at(-1)}setLastElement(t){return l(this,ls)?(l(this,ls).push(t),b(this,as,t.line),b(this,Us,t.points),b(this,Hi,0),{path:{d:this.toSVGPath()}}):l(this,cl).setLastElement(t)}removeLastElement(){if(!l(this,ls))return l(this,cl).removeLastElement();l(this,ls).pop(),b(this,bs,"");for(let t=0,e=l(this,ls).length;t<e;t++){const{line:s,points:n}=l(this,ls)[t];b(this,as,s),b(this,Us,n),b(this,Hi,0),this.toSVGPath()}return{path:{d:l(this,bs)}}}toSVGPath(){const t=ct.svgRound(l(this,as)[4]),e=ct.svgRound(l(this,as)[5]);if(l(this,Us).length===2)return b(this,bs,`${l(this,bs)} M ${t} ${e} Z`),l(this,bs);if(l(this,Us).length<=6){const n=l(this,bs).lastIndexOf("M");b(this,bs,`${l(this,bs).slice(0,n)} M ${t} ${e}`),b(this,Hi,6)}if(l(this,Us).length===4){const n=ct.svgRound(l(this,as)[10]),r=ct.svgRound(l(this,as)[11]);return b(this,bs,`${l(this,bs)} L ${n} ${r}`),b(this,Hi,12),l(this,bs)}const s=[];l(this,Hi)===0&&(s.push(`M ${t} ${e}`),b(this,Hi,6));for(let n=l(this,Hi),r=l(this,as).length;n<r;n+=6){const[o,a,c,h,u,f]=l(this,as).slice(n,n+6).map(ct.svgRound);s.push(`C${o} ${a} ${c} ${h} ${u} ${f}`)}return b(this,bs,l(this,bs)+s.join(" ")),b(this,Hi,l(this,as).length),l(this,bs)}getOutlines(t,e,s,n){const r=l(this,ls).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),l(this,cl).build(l(this,ls),t,e,s,l(this,ll),l(this,lh),n),b(this,On,null),b(this,as,null),b(this,ls,null),b(this,bs,null),l(this,cl)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}On=new WeakMap,as=new WeakMap,ls=new WeakMap,ll=new WeakMap,lh=new WeakMap,Us=new WeakMap,bs=new WeakMap,Hi=new WeakMap,cl=new WeakMap,hl=new WeakMap,ul=new WeakMap,ch=new WeakSet,rp=function(t,e){return ct._normalizePoint(t,e,l(this,hl),l(this,ul),l(this,ll))};var zs,$d,Bd,_i,Fn,Nn,hh,uh,dl,_s,Zn,tS,eS,sS;class Qd extends ct{constructor(){super(...arguments);w(this,_s);w(this,zs);w(this,$d,0);w(this,Bd);w(this,_i);w(this,Fn);w(this,Nn);w(this,hh);w(this,uh);w(this,dl)}build(e,s,n,r,o,a,c){b(this,Fn,s),b(this,Nn,n),b(this,hh,r),b(this,uh,o),b(this,dl,a),b(this,Bd,c??0),b(this,_i,e),A(this,_s,eS).call(this)}get thickness(){return l(this,dl)}setLastElement(e){return l(this,_i).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return l(this,_i).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:s}of l(this,_i)){if(e.push(`M${ct.svgRound(s[4])} ${ct.svgRound(s[5])}`),s.length===6){e.push("Z");continue}if(s.length===12&&isNaN(s[6])){e.push(`L${ct.svgRound(s[10])} ${ct.svgRound(s[11])}`);continue}for(let n=6,r=s.length;n<r;n+=6){const[o,a,c,h,u,f]=s.subarray(n,n+6).map(ct.svgRound);e.push(`C${o} ${a} ${c} ${h} ${u} ${f}`)}}return e.join("")}serialize([e,s,n,r],o){const a=[],c=[],[h,u,f,p]=A(this,_s,tS).call(this);let g,_,v,x,S,C,T,R,L;switch(l(this,uh)){case 0:L=ct._rescale,g=e,_=s+r,v=n,x=-r,S=e+h*n,C=s+(1-u-p)*r,T=e+(h+f)*n,R=s+(1-u)*r;break;case 90:L=ct._rescaleAndSwap,g=e,_=s,v=n,x=r,S=e+u*n,C=s+h*r,T=e+(u+p)*n,R=s+(h+f)*r;break;case 180:L=ct._rescale,g=e+n,_=s,v=-n,x=r,S=e+(1-h-f)*n,C=s+u*r,T=e+(1-h)*n,R=s+(u+p)*r;break;case 270:L=ct._rescaleAndSwap,g=e+n,_=s+r,v=-n,x=-r,S=e+(1-u-p)*n,C=s+(1-h-f)*r,T=e+(1-u)*n,R=s+(1-h)*r;break}for(const{line:O,points:I}of l(this,_i))a.push(L(O,g,_,v,x,o?new Array(O.length):null)),c.push(L(I,g,_,v,x,o?new Array(I.length):null));return{lines:a,points:c,rect:[S,C,T,R]}}static deserialize(e,s,n,r,o,{paths:{lines:a,points:c},rotation:h,thickness:u}){const f=[];let p,g,_,v,x;switch(h){case 0:x=ct._rescale,p=-e/n,g=s/r+1,_=1/n,v=-1/r;break;case 90:x=ct._rescaleAndSwap,p=-s/r,g=-e/n,_=1/r,v=1/n;break;case 180:x=ct._rescale,p=e/n+1,g=-s/r,_=-1/n,v=1/r;break;case 270:x=ct._rescaleAndSwap,p=s/r+1,g=e/n+1,_=-1/r,v=-1/n;break}if(!a){a=[];for(const C of c){const T=C.length;if(T===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,C[0],C[1]]));continue}if(T===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,C[0],C[1],NaN,NaN,NaN,NaN,C[2],C[3]]));continue}const R=new Float32Array(3*(T-2));a.push(R);let[L,O,I,D]=C.subarray(0,4);R.set([NaN,NaN,NaN,NaN,L,O],0);for(let B=4;B<T;B+=2){const K=C[B],Q=C[B+1];R.set(ct.createBezierPoints(L,O,I,D,K,Q),(B-2)*3),[L,O,I,D]=[I,D,K,Q]}}}for(let C=0,T=a.length;C<T;C++)f.push({line:x(a[C].map(R=>R??NaN),p,g,_,v),points:x(c[C].map(R=>R??NaN),p,g,_,v)});const S=new this.prototype.constructor;return S.build(f,n,r,1,h,u,o),S}get box(){return l(this,zs)}updateProperty(e,s){return e==="stroke-width"?A(this,_s,sS).call(this,s):null}updateParentDimensions([e,s],n){const[r,o]=A(this,_s,Zn).call(this);b(this,Fn,e),b(this,Nn,s),b(this,hh,n);const[a,c]=A(this,_s,Zn).call(this),h=a-r,u=c-o,f=l(this,zs);return f[0]-=h,f[1]-=u,f[2]+=2*h,f[3]+=2*u,f}updateRotation(e){return b(this,$d,e),{path:{transform:this.rotationTransform}}}get viewBox(){return l(this,zs).map(ct.svgRound).join(" ")}get defaultProperties(){const[e,s]=l(this,zs);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ct.svgRound(e)} ${ct.svgRound(s)}`}}}get rotationTransform(){const[,,e,s]=l(this,zs);let n=0,r=0,o=0,a=0,c=0,h=0;switch(l(this,$d)){case 90:r=s/e,o=-e/s,c=e;break;case 180:n=-1,a=-1,c=e,h=s;break;case 270:r=-s/e,o=e/s,h=s;break;default:return""}return`matrix(${n} ${r} ${o} ${a} ${ct.svgRound(c)} ${ct.svgRound(h)})`}getPathResizingSVGProperties([e,s,n,r]){const[o,a]=A(this,_s,Zn).call(this),[c,h,u,f]=l(this,zs);if(Math.abs(u-o)<=ct.PRECISION||Math.abs(f-a)<=ct.PRECISION){const x=e+n/2-(c+u/2),S=s+r/2-(h+f/2);return{path:{"transform-origin":`${ct.svgRound(e)} ${ct.svgRound(s)}`,transform:`${this.rotationTransform} translate(${x} ${S})`}}}const p=(n-2*o)/(u-2*o),g=(r-2*a)/(f-2*a),_=u/n,v=f/r;return{path:{"transform-origin":`${ct.svgRound(c)} ${ct.svgRound(h)}`,transform:`${this.rotationTransform} scale(${_} ${v}) translate(${ct.svgRound(o)} ${ct.svgRound(a)}) scale(${p} ${g}) translate(${ct.svgRound(-o)} ${ct.svgRound(-a)})`}}}getPathResizedSVGProperties([e,s,n,r]){const[o,a]=A(this,_s,Zn).call(this),c=l(this,zs),[h,u,f,p]=c;if(c[0]=e,c[1]=s,c[2]=n,c[3]=r,Math.abs(f-o)<=ct.PRECISION||Math.abs(p-a)<=ct.PRECISION){const S=e+n/2-(h+f/2),C=s+r/2-(u+p/2);for(const{line:T,points:R}of l(this,_i))ct._translate(T,S,C,T),ct._translate(R,S,C,R);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ct.svgRound(e)} ${ct.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const g=(n-2*o)/(f-2*o),_=(r-2*a)/(p-2*a),v=-g*(h+o)+e+o,x=-_*(u+a)+s+a;if(g!==1||_!==1||v!==0||x!==0)for(const{line:S,points:C}of l(this,_i))ct._rescale(S,v,x,g,_,S),ct._rescale(C,v,x,g,_,C);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ct.svgRound(e)} ${ct.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,s],n){const[r,o]=n,a=l(this,zs),c=e-a[0],h=s-a[1];if(l(this,Fn)===r&&l(this,Nn)===o)for(const{line:u,points:f}of l(this,_i))ct._translate(u,c,h,u),ct._translate(f,c,h,f);else{const u=l(this,Fn)/r,f=l(this,Nn)/o;b(this,Fn,r),b(this,Nn,o);for(const{line:p,points:g}of l(this,_i))ct._rescale(p,c,h,u,f,p),ct._rescale(g,c,h,u,f,g);a[2]*=u,a[3]*=f}return a[0]=e,a[1]=s,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ct.svgRound(e)} ${ct.svgRound(s)}`}}}get defaultSVGProperties(){const e=l(this,zs);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ct.svgRound(e[0])} ${ct.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}zs=new WeakMap,$d=new WeakMap,Bd=new WeakMap,_i=new WeakMap,Fn=new WeakMap,Nn=new WeakMap,hh=new WeakMap,uh=new WeakMap,dl=new WeakMap,_s=new WeakSet,Zn=function(e=l(this,dl)){const s=l(this,Bd)+e/2*l(this,hh);return l(this,uh)%180===0?[s/l(this,Fn),s/l(this,Nn)]:[s/l(this,Nn),s/l(this,Fn)]},tS=function(){const[e,s,n,r]=l(this,zs),[o,a]=A(this,_s,Zn).call(this,0);return[e+o,s+a,n-2*o,r-2*a]},eS=function(){const e=b(this,zs,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:r}of l(this,_i)){if(r.length<=12){for(let c=4,h=r.length;c<h;c+=6)pt.pointBoundingBox(r[c],r[c+1],e);continue}let o=r[4],a=r[5];for(let c=6,h=r.length;c<h;c+=6){const[u,f,p,g,_,v]=r.subarray(c,c+6);pt.bezierBoundingBox(o,a,u,f,p,g,_,v,e),o=_,a=v}}const[s,n]=A(this,_s,Zn).call(this);e[0]=Gs(e[0]-s,0,1),e[1]=Gs(e[1]-n,0,1),e[2]=Gs(e[2]+s,0,1),e[3]=Gs(e[3]+n,0,1),e[2]-=e[0],e[3]-=e[1]},sS=function(e){const[s,n]=A(this,_s,Zn).call(this);b(this,dl,e);const[r,o]=A(this,_s,Zn).call(this),[a,c]=[r-s,o-n],h=l(this,zs);return h[0]-=a,h[1]-=c,h[2]+=2*a,h[3]+=2*c,h};class vg extends JE{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:we._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new vg(this._viewParameters);return t.updateAll(this),t}}var Kp,iS;const ec=class ec extends Ip{constructor(e){super({...e,name:"inkEditor"});w(this,Kp);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,s){we.initialize(e,s),this._defaultDrawingOptions=new vg(s.viewParameters)}static getDefaultDrawingOptions(e){const s=this._defaultDrawingOptions.clone();return s.updateProperties(e),s}static get supportMultipleDrawings(){return!0}static get typesMap(){return jt(this,"typesMap",new Map([[Wt.INK_THICKNESS,"stroke-width"],[Wt.INK_COLOR,"stroke"],[Wt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,s,n,r,o){return new Xk(e,s,n,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,s,n,r,o,a){return Qd.deserialize(e,s,n,r,o,a)}static async deserialize(e,s,n){let r=null;if(e instanceof Rv){const{data:{inkLists:a,rect:c,rotation:h,id:u,color:f,opacity:p,borderStyle:{rawWidth:g},popupRef:_},parent:{page:{pageNumber:v}}}=e;r=e={annotationType:Rt.INK,color:Array.from(f),thickness:g,opacity:p,paths:{points:a},boxes:null,pageIndex:v-1,rect:c.slice(0),rotation:h,id:u,deleted:!1,popupRef:_}}const o=await super.deserialize(e,s,n);return o.annotationElementId=e.id||null,o._initialData=r,o}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:s,parent:n}=this;s.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(e,s.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:s,opacity:n}){this._drawingOptions=ec.getDefaultDrawingOptions({stroke:pt.makeHexColor(...e),"stroke-width":s,"stroke-opacity":n})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:s,points:n,rect:r}=this.serializeDraw(e),{_drawingOptions:{stroke:o,"stroke-opacity":a,"stroke-width":c}}=this,h={annotationType:Rt.INK,color:we._colorManager.convert(o),opacity:a,thickness:c,paths:{lines:s,points:n},pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(h.isCopy=!0,h):this.annotationElementId&&!A(this,Kp,iS).call(this,h)?null:(h.id=this.annotationElementId,h)}renderAnnotationElement(e){const{points:s,rect:n}=this.serializeDraw(!1);return e.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:s}),null}};Kp=new WeakSet,iS=function(e){const{color:s,thickness:n,opacity:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((a,c)=>a!==s[c])||e.thickness!==n||e.opacity!==r||e.pageIndex!==o},Z(ec,"_type","ink"),Z(ec,"_editorType",Rt.INK),Z(ec,"_defaultDrawingOptions",null);let Nb=ec;class $b extends Qd{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const Tf=8,Oh=3;var fl,ie,Bb,rn,nS,rS,Hb,op,oS,aS,lS,jb,Vb,cS;class Dr{static extractContoursFromText(t,{fontFamily:e,fontStyle:s,fontWeight:n},r,o,a,c){let h=new OffscreenCanvas(1,1),u=h.getContext("2d",{alpha:!1});const f=200,p=u.font=`${s} ${n} ${f}px ${e}`,{actualBoundingBoxLeft:g,actualBoundingBoxRight:_,actualBoundingBoxAscent:v,actualBoundingBoxDescent:x,fontBoundingBoxAscent:S,fontBoundingBoxDescent:C,width:T}=u.measureText(t),R=1.5,L=Math.ceil(Math.max(Math.abs(g)+Math.abs(_)||0,T)*R),O=Math.ceil(Math.max(Math.abs(v)+Math.abs(x)||f,Math.abs(S)+Math.abs(C)||f)*R);h=new OffscreenCanvas(L,O),u=h.getContext("2d",{alpha:!0,willReadFrequently:!0}),u.font=p,u.filter="grayscale(1)",u.fillStyle="white",u.fillRect(0,0,L,O),u.fillStyle="black",u.fillText(t,L*(R-1)/2,O*(3-R)/2);const I=A(this,ie,jb).call(this,u.getImageData(0,0,L,O).data),D=A(this,ie,lS).call(this,I),B=A(this,ie,Vb).call(this,D),K=A(this,ie,Hb).call(this,I,L,O,B);return this.processDrawnLines({lines:{curves:K,width:L,height:O},pageWidth:r,pageHeight:o,rotation:a,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(t,e,s,n,r){const[o,a,c]=A(this,ie,cS).call(this,t),[h,u]=A(this,ie,aS).call(this,o,a,c,Math.hypot(a,c)*l(this,fl).sigmaSFactor,l(this,fl).sigmaR,l(this,fl).kernelSize),f=A(this,ie,Vb).call(this,u),p=A(this,ie,Hb).call(this,h,a,c,f);return this.processDrawnLines({lines:{curves:p,width:a,height:c},pageWidth:e,pageHeight:s,rotation:n,innerMargin:r,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:s,rotation:n,innerMargin:r,mustSmooth:o,areContours:a}){n%180!==0&&([e,s]=[s,e]);const{curves:c,width:h,height:u}=t,f=t.thickness??0,p=[],g=Math.min(e/h,s/u),_=g/e,v=g/s,x=[];for(const{points:C}of c){const T=o?A(this,ie,oS).call(this,C):C;if(!T)continue;x.push(T);const R=T.length,L=new Float32Array(R),O=new Float32Array(3*(R===2?2:R-2));if(p.push({line:O,points:L}),R===2){L[0]=T[0]*_,L[1]=T[1]*v,O.set([NaN,NaN,NaN,NaN,L[0],L[1]],0);continue}let[I,D,B,K]=T;I*=_,D*=v,B*=_,K*=v,L.set([I,D,B,K],0),O.set([NaN,NaN,NaN,NaN,I,D],0);for(let Q=4;Q<R;Q+=2){const bt=L[Q]=T[Q]*_,yt=L[Q+1]=T[Q+1]*v;O.set(ct.createBezierPoints(I,D,B,K,bt,yt),(Q-2)*3),[I,D,B,K]=[B,K,bt,yt]}}if(p.length===0)return null;const S=a?new $b:new Qd;return S.build(p,e,s,1,n,a?0:f,r),{outline:S,newCurves:x,areContours:a,thickness:f,width:h,height:u}}static async compressSignature({outlines:t,areContours:e,thickness:s,width:n,height:r}){let o=1/0,a=-1/0,c=0;for(const T of t){c+=T.length;for(let R=2,L=T.length;R<L;R++){const O=T[R]-T[R-2];o=Math.min(o,O),a=Math.max(a,O)}}let h;o>=-128&&a<=127?h=Int8Array:o>=-32768&&a<=32767?h=Int16Array:h=Int32Array;const u=t.length,f=Tf+Oh*u,p=new Uint32Array(f);let g=0;p[g++]=f*Uint32Array.BYTES_PER_ELEMENT+(c-2*u)*h.BYTES_PER_ELEMENT,p[g++]=0,p[g++]=n,p[g++]=r,p[g++]=e?0:1,p[g++]=Math.max(0,Math.floor(s??0)),p[g++]=u,p[g++]=h.BYTES_PER_ELEMENT;for(const T of t)p[g++]=T.length-2,p[g++]=T[0],p[g++]=T[1];const _=new CompressionStream("deflate-raw"),v=_.writable.getWriter();await v.ready,v.write(p);const x=h.prototype.constructor;for(const T of t){const R=new x(T.length-2);for(let L=2,O=T.length;L<O;L++)R[L-2]=T[L]-T[L-2];v.write(R)}v.close();const S=await new Response(_.readable).arrayBuffer(),C=new Uint8Array(S);return u0(C)}static async decompressSignature(t){try{const e=_R(t),{readable:s,writable:n}=new DecompressionStream("deflate-raw"),r=n.getWriter();await r.ready,r.write(e).then(async()=>{await r.ready,await r.close()}).catch(()=>{});let o=null,a=0;for await(const T of s)o||(o=new Uint8Array(new Uint32Array(T.buffer,0,4)[0])),o.set(T,a),a+=T.length;const c=new Uint32Array(o.buffer,0,o.length>>2),h=c[1];if(h!==0)throw new Error(`Invalid version: ${h}`);const u=c[2],f=c[3],p=c[4]===0,g=c[5],_=c[6],v=c[7],x=[],S=(Tf+Oh*_)*Uint32Array.BYTES_PER_ELEMENT;let C;switch(v){case Int8Array.BYTES_PER_ELEMENT:C=new Int8Array(o.buffer,S);break;case Int16Array.BYTES_PER_ELEMENT:C=new Int16Array(o.buffer,S);break;case Int32Array.BYTES_PER_ELEMENT:C=new Int32Array(o.buffer,S);break}a=0;for(let T=0;T<_;T++){const R=c[Oh*T+Tf],L=new Float32Array(R+2);x.push(L);for(let O=0;O<Oh-1;O++)L[O]=c[Oh*T+Tf+O+1];for(let O=0;O<R;O++)L[O+2]=L[O]+C[a++]}return{areContours:p,thickness:g,outlines:x,width:u,height:f}}catch(e){return Lt(`decompressSignature: ${e}`),null}}}fl=new WeakMap,ie=new WeakSet,Bb=function(t,e,s,n){return s-=t,n-=e,s===0?n>0?0:4:s===1?n+6:2-n},rn=new WeakMap,nS=function(t,e,s,n,r,o,a){const c=A(this,ie,Bb).call(this,s,n,r,o);for(let h=0;h<8;h++){const u=(-h+c-a+16)%8,f=l(this,rn)[2*u],p=l(this,rn)[2*u+1];if(t[(s+f)*e+(n+p)]!==0)return u}return-1},rS=function(t,e,s,n,r,o,a){const c=A(this,ie,Bb).call(this,s,n,r,o);for(let h=0;h<8;h++){const u=(h+c+a+16)%8,f=l(this,rn)[2*u],p=l(this,rn)[2*u+1];if(t[(s+f)*e+(n+p)]!==0)return u}return-1},Hb=function(t,e,s,n){const r=t.length,o=new Int32Array(r);for(let u=0;u<r;u++)o[u]=t[u]<=n?1:0;for(let u=1;u<s-1;u++)o[u*e]=o[u*e+e-1]=0;for(let u=0;u<e;u++)o[u]=o[e*s-1-u]=0;let a=1,c;const h=[];for(let u=1;u<s-1;u++){c=1;for(let f=1;f<e-1;f++){const p=u*e+f,g=o[p];if(g===0)continue;let _=u,v=f;if(g===1&&o[p-1]===0)a+=1,v-=1;else if(g>=1&&o[p+1]===0)a+=1,v+=1,g>1&&(c=g);else{g!==1&&(c=Math.abs(g));continue}const x=[f,u],S=v===f+1,C={isHole:S,points:x,id:a,parent:0};h.push(C);let T;for(const Q of h)if(Q.id===c){T=Q;break}T?T.isHole?C.parent=S?T.parent:c:C.parent=S?c:T.parent:C.parent=S?c:0;const R=A(this,ie,nS).call(this,o,e,u,f,_,v,0);if(R===-1){o[p]=-a,o[p]!==1&&(c=Math.abs(o[p]));continue}let L=l(this,rn)[2*R],O=l(this,rn)[2*R+1];const I=u+L,D=f+O;_=I,v=D;let B=u,K=f;for(;;){const Q=A(this,ie,rS).call(this,o,e,B,K,_,v,1);L=l(this,rn)[2*Q],O=l(this,rn)[2*Q+1];const bt=B+L,yt=K+O;x.push(yt,bt);const St=B*e+K;if(o[St+1]===0?o[St]=-a:o[St]===1&&(o[St]=a),bt===u&&yt===f&&B===I&&K===D){o[p]!==1&&(c=Math.abs(o[p]));break}else _=B,v=K,B=bt,K=yt}}}return h},op=function(t,e,s,n){if(s-e<=4){for(let I=e;I<s-2;I+=2)n.push(t[I],t[I+1]);return}const r=t[e],o=t[e+1],a=t[s-4]-r,c=t[s-3]-o,h=Math.hypot(a,c),u=a/h,f=c/h,p=u*o-f*r,g=c/a,_=1/h,v=Math.atan(g),x=Math.cos(v),S=Math.sin(v),C=_*(Math.abs(x)+Math.abs(S)),T=_*(1-C+C**2),R=Math.max(Math.atan(Math.abs(S+x)*T),Math.atan(Math.abs(S-x)*T));let L=0,O=e;for(let I=e+2;I<s-2;I+=2){const D=Math.abs(p-u*t[I+1]+f*t[I]);D>L&&(O=I,L=D)}L>(h*R)**2?(A(this,ie,op).call(this,t,e,O+2,n),A(this,ie,op).call(this,t,O,s,n)):n.push(r,o)},oS=function(t){const e=[],s=t.length;return A(this,ie,op).call(this,t,0,s,e),e.push(t[s-2],t[s-1]),e.length<=4?null:e},aS=function(t,e,s,n,r,o){const a=new Float32Array(o**2),c=-2*n**2,h=o>>1;for(let v=0;v<o;v++){const x=(v-h)**2;for(let S=0;S<o;S++)a[v*o+S]=Math.exp((x+(S-h)**2)/c)}const u=new Float32Array(256),f=-2*r**2;for(let v=0;v<256;v++)u[v]=Math.exp(v**2/f);const p=t.length,g=new Uint8Array(p),_=new Uint32Array(256);for(let v=0;v<s;v++)for(let x=0;x<e;x++){const S=v*e+x,C=t[S];let T=0,R=0;for(let O=0;O<o;O++){const I=v+O-h;if(!(I<0||I>=s))for(let D=0;D<o;D++){const B=x+D-h;if(B<0||B>=e)continue;const K=t[I*e+B],Q=a[O*o+D]*u[Math.abs(K-C)];T+=K*Q,R+=Q}}const L=g[S]=Math.round(T/R);_[L]++}return[g,_]},lS=function(t){const e=new Uint32Array(256);for(const s of t)e[s]++;return e},jb=function(t){const e=t.length,s=new Uint8ClampedArray(e>>2);let n=-1/0,r=1/0;for(let a=0,c=s.length;a<c;a++){if(t[(a<<2)+3]===0){n=s[a]=255;continue}const u=s[a]=t[a<<2];u>n&&(n=u),u<r&&(r=u)}const o=255/(n-r);for(let a=0;a<e;a++)s[a]=(s[a]-r)*o;return s},Vb=function(t){let e,s=-1/0,n=-1/0;const r=t.findIndex(c=>c!==0);let o=r,a=r;for(e=r;e<256;e++){const c=t[e];c>s&&(e-o>n&&(n=e-o,a=e-1),s=c,o=e)}for(e=a-1;e>=0&&!(t[e]>t[e+1]);e--);return e},cS=function(t){const e=t,{width:s,height:n}=t,{maxDim:r}=l(this,fl);let o=s,a=n;if(s>r||n>r){let p=s,g=n,_=Math.log2(Math.max(s,n)/r);const v=Math.floor(_);_=_===v?v-1:v;for(let S=0;S<_;S++){o=p,a=g,o>r&&(o=Math.ceil(o/2)),a>r&&(a=Math.ceil(a/2));const C=new OffscreenCanvas(o,a);C.getContext("2d").drawImage(t,0,0,p,g,0,0,o,a),p=o,g=a,t!==e&&t.close(),t=C.transferToImageBitmap()}const x=Math.min(r/o,r/a);o=Math.round(o*x),a=Math.round(a*x)}const h=new OffscreenCanvas(o,a).getContext("2d",{willReadFrequently:!0});h.filter="grayscale(1)",h.drawImage(t,0,0,t.width,t.height,0,0,o,a);const u=h.getImageData(0,0,o,a).data;return[A(this,ie,jb).call(this,u),o,a]},w(Dr,ie),w(Dr,fl,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),w(Dr,rn,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class kv extends JE{constructor(){super(),super.updateProperties({fill:we._defaultLineColor,"stroke-width":0})}clone(){const t=new kv;return t.updateAll(this),t}}class Iv extends vg{constructor(t){super(t),super.updateProperties({stroke:we._defaultLineColor,"stroke-width":1})}clone(){const t=new Iv(this._viewParameters);return t.updateAll(this),t}}var Ro,yi,ko,Io;const li=class li extends Ip{constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"});w(this,Ro,!1);w(this,yi,null);w(this,ko,null);w(this,Io,null);this._willKeepAspectRatio=!0,b(this,ko,e.signatureData||null),b(this,yi,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,s){we.initialize(e,s),this._defaultDrawingOptions=new kv,this._defaultDrawnSignatureOptions=new Iv(s.viewParameters)}static getDefaultDrawingOptions(e){const s=this._defaultDrawingOptions.clone();return s.updateProperties(e),s}static get supportMultipleDrawings(){return!1}static get typesMap(){return jt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!l(this,yi)}}static computeTelemetryFinalData(e){const s=e.get("hasDescription");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,s;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,e=this.x,s=this.y),super.render(),this._drawId===null)if(l(this,ko)){const{lines:r,mustSmooth:o,areContours:a,description:c,uuid:h,heightInPage:u}=l(this,ko),{rawDims:{pageWidth:f,pageHeight:p},rotation:g}=this.parent.viewport,_=Dr.processDrawnLines({lines:r,pageWidth:f,pageHeight:p,rotation:g,innerMargin:li._INNER_MARGIN,mustSmooth:o,areContours:a});this.addSignature(_,u,c,h)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return n&&(this._isCopy=!0,this._moveAfterPaste(e,s)),this.div}setUuid(e){b(this,Io,e),this.addEditToolbar()}getUuid(){return l(this,Io)}get description(){return l(this,yi)}set description(e){b(this,yi,e),super.addEditToolbar().then(s=>{s==null||s.updateEditSignatureButton(e)})}getSignaturePreview(){const{newCurves:e,areContours:s,thickness:n,width:r,height:o}=l(this,ko),a=Math.max(r,o),c=Dr.processDrawnLines({lines:{curves:e.map(h=>({points:h})),thickness:n,width:r,height:o},pageWidth:a,pageHeight:a,rotation:0,innerMargin:0,mustSmooth:!1,areContours:s});return{areContours:s,outline:c.outline}}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.signatureManager&&l(this,yi)!==null&&(await e.addEditSignatureButton(this._uiManager.signatureManager,l(this,Io),l(this,yi)),e.show()),e):null}addSignature(e,s,n,r){const{x:o,y:a}=this,{outline:c}=b(this,ko,e);b(this,Ro,c instanceof $b),b(this,yi,n),this.div.setAttribute("data-l10n-args",JSON.stringify({description:n}));let h;l(this,Ro)?h=li.getDefaultDrawingOptions():(h=li._defaultDrawnSignatureOptions.clone(),h.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:h});const[u,f]=this.parentDimensions,[,p]=this.pageDimensions;let g=s/p;g=g>=1?.5:g,this.width*=g/this.height,this.width>=1&&(g*=.9/this.width,this.width=.9),this.height=g,this.setDims(u*this.width,f*this.height),this.x=o,this.y=a,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:s,pageHeight:n},rotation:r}=this.parent.viewport;return Dr.process(e,s,n,r,li._INNER_MARGIN)}getFromText(e,s){const{rawDims:{pageWidth:n,pageHeight:r},rotation:o}=this.parent.viewport;return Dr.extractContoursFromText(e,s,n,r,o,li._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:s,pageHeight:n},rotation:r}=this.parent.viewport;return Dr.processDrawnLines({lines:e,pageWidth:s,pageHeight:n,rotation:r,innerMargin:li._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:s}){e?this._drawingOptions=li.getDefaultDrawingOptions():(this._drawingOptions=li._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":s}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:s,points:n,rect:r}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":o}}=this,a={annotationType:Rt.SIGNATURE,isSignature:!0,areContours:l(this,Ro),color:[0,0,0],thickness:l(this,Ro)?0:o,pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(a.paths={lines:s,points:n},a.uuid=l(this,Io),a.isCopy=!0):a.lines=s,l(this,yi)&&(a.accessibilityData={type:"Figure",alt:l(this,yi)}),a}static deserializeDraw(e,s,n,r,o,a){return a.areContours?$b.deserialize(e,s,n,r,o,a):Qd.deserialize(e,s,n,r,o,a)}static async deserialize(e,s,n){var o;const r=await super.deserialize(e,s,n);return b(r,Ro,e.areContours),b(r,yi,((o=e.accessibilityData)==null?void 0:o.alt)||""),b(r,Io,e.uuid),r}};Ro=new WeakMap,yi=new WeakMap,ko=new WeakMap,Io=new WeakMap,Z(li,"_type","signature"),Z(li,"_editorType",Rt.SIGNATURE),Z(li,"_defaultDrawingOptions",null);let Ub=li;var xe,cs,Lo,Tr,Mo,dh,Pr,pl,$n,wi,fh,Yt,Jh,Zh,ap,lp,cp,Wb,hp,hS;class zb extends we{constructor(e){super({...e,name:"stampEditor"});w(this,Yt);w(this,xe,null);w(this,cs,null);w(this,Lo,null);w(this,Tr,null);w(this,Mo,null);w(this,dh,"");w(this,Pr,null);w(this,pl,!1);w(this,$n,null);w(this,wi,!1);w(this,fh,!1);b(this,Tr,e.bitmapUrl),b(this,Mo,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,s){we.initialize(e,s)}static isHandlingMimeForPasting(e){return Nm.includes(e)}static paste(e,s){s.pasteEditor(Rt.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const s=e.get("hasAltText");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}async mlGuessAltText(e=null,s=!0){if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:a}=e||this.copyCanvas(null,null,!0).imageData,c=await n.guess({name:"altText",request:{data:r,width:o,height:a,channels:r.length/(o*a)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const h=c.output;return await this.setGuessedAltText(h),s&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}remove(){var e;l(this,cs)&&(b(this,xe,null),this._uiManager.imageManager.deleteId(l(this,cs)),(e=l(this,Pr))==null||e.remove(),b(this,Pr,null),l(this,$n)&&(clearTimeout(l(this,$n)),b(this,$n,null))),super.remove()}rebuild(){if(!this.parent){l(this,cs)&&A(this,Yt,ap).call(this);return}super.rebuild(),this.div!==null&&(l(this,cs)&&l(this,Pr)===null&&A(this,Yt,ap).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(l(this,Lo)||l(this,xe)||l(this,Tr)||l(this,Mo)||l(this,cs)||l(this,pl))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,s;return this._isCopy&&(e=this.x,s=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),l(this,pl)||(l(this,xe)?A(this,Yt,lp).call(this):A(this,Yt,ap).call(this)),this._isCopy&&this._moveAfterPaste(e,s),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,s){const{id:n,bitmap:r}=this._uiManager.imageManager.getFromCanvas(e,s);s.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(b(this,cs,n),r&&b(this,xe,r),b(this,pl,!1),A(this,Yt,lp).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;l(this,$n)!==null&&clearTimeout(l(this,$n)),b(this,$n,setTimeout(()=>{b(this,$n,null),A(this,Yt,Wb).call(this)},200))}copyCanvas(e,s,n=!1){var g;e||(e=224);const{width:r,height:o}=l(this,xe),a=new Hr;let c=l(this,xe),h=r,u=o,f=null;if(s){if(r>s||o>s){const D=Math.min(s/r,s/o);h=Math.floor(r*D),u=Math.floor(o*D)}f=document.createElement("canvas");const _=f.width=Math.ceil(h*a.sx),v=f.height=Math.ceil(u*a.sy);l(this,wi)||(c=A(this,Yt,cp).call(this,_,v));const x=f.getContext("2d");x.filter=this._uiManager.hcmFilter;let S="white",C="#cfcfd8";this._uiManager.hcmFilter!=="none"?C="black":(g=window.matchMedia)!=null&&g.call(window,"(prefers-color-scheme: dark)").matches&&(S="#8f8f9d",C="#42414d");const T=15,R=T*a.sx,L=T*a.sy,O=new OffscreenCanvas(R*2,L*2),I=O.getContext("2d");I.fillStyle=S,I.fillRect(0,0,R*2,L*2),I.fillStyle=C,I.fillRect(0,0,R,L),I.fillRect(R,L,R,L),x.fillStyle=x.createPattern(O,"repeat"),x.fillRect(0,0,_,v),x.drawImage(c,0,0,c.width,c.height,0,0,_,v)}let p=null;if(n){let _,v;if(a.symmetric&&c.width<e&&c.height<e)_=c.width,v=c.height;else if(c=l(this,xe),r>e||o>e){const C=Math.min(e/r,e/o);_=Math.floor(r*C),v=Math.floor(o*C),l(this,wi)||(c=A(this,Yt,cp).call(this,_,v))}const S=new OffscreenCanvas(_,v).getContext("2d",{willReadFrequently:!0});S.drawImage(c,0,0,c.width,c.height,0,0,_,v),p={width:_,height:v,data:S.getImageData(0,0,_,v).data}}return{canvas:f,width:h,height:u,imageData:p}}static async deserialize(e,s,n){var x;let r=null,o=!1;if(e instanceof xE){const{data:{rect:S,rotation:C,id:T,structParent:R,popupRef:L},container:O,parent:{page:{pageNumber:I}},canvas:D}=e;let B,K;D?(delete e.canvas,{id:B,bitmap:K}=n.imageManager.getFromCanvas(O.id,D),D.remove()):(o=!0,e._hasNoCanvas=!0);const Q=((x=await s._structTree.getAriaAttributes(`${yv}${T}`))==null?void 0:x.get("aria-label"))||"";r=e={annotationType:Rt.STAMP,bitmapId:B,bitmap:K,pageIndex:I-1,rect:S.slice(0),rotation:C,id:T,deleted:!1,accessibilityData:{decorative:!1,altText:Q},isSvg:!1,structParent:R,popupRef:L}}const a=await super.deserialize(e,s,n),{rect:c,bitmap:h,bitmapUrl:u,bitmapId:f,isSvg:p,accessibilityData:g}=e;o?(n.addMissingCanvas(e.id,a),b(a,pl,!0)):f&&n.imageManager.isValidId(f)?(b(a,cs,f),h&&b(a,xe,h)):b(a,Tr,u),b(a,wi,p);const[_,v]=a.pageDimensions;return a.width=(c[2]-c[0])/_,a.height=(c[3]-c[1])/v,a.annotationElementId=e.id||null,g&&(a.altTextData=g),a._initialData=r,b(a,fh,!!r),a}serialize(e=!1,s=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n={annotationType:Rt.STAMP,bitmapId:l(this,cs),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:l(this,wi),structTreeParentId:this._structTreeParentId};if(e)return n.bitmapUrl=A(this,Yt,hp).call(this,!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(n.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const c=A(this,Yt,hS).call(this,n);if(c.isSame)return null;c.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1}if(n.id=this.annotationElementId,s===null)return n;s.stamps||(s.stamps=new Map);const a=l(this,wi)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!s.stamps.has(l(this,cs)))s.stamps.set(l(this,cs),{area:a,serialized:n}),n.bitmap=A(this,Yt,hp).call(this,!1);else if(l(this,wi)){const c=s.stamps.get(l(this,cs));a>c.area&&(c.area=a,c.serialized.bitmap.close(),c.serialized.bitmap=A(this,Yt,hp).call(this,!1))}return n}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}}xe=new WeakMap,cs=new WeakMap,Lo=new WeakMap,Tr=new WeakMap,Mo=new WeakMap,dh=new WeakMap,Pr=new WeakMap,pl=new WeakMap,$n=new WeakMap,wi=new WeakMap,fh=new WeakMap,Yt=new WeakSet,Jh=function(e,s=!1){if(!e){this.remove();return}b(this,xe,e.bitmap),s||(b(this,cs,e.id),b(this,wi,e.isSvg)),e.file&&b(this,dh,e.file.name),A(this,Yt,lp).call(this)},Zh=function(){if(b(this,Lo,null),this._uiManager.enableWaiting(!1),!!l(this,Pr)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,xe)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,xe)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},ap=function(){if(l(this,cs)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(l(this,cs)).then(n=>A(this,Yt,Jh).call(this,n,!0)).finally(()=>A(this,Yt,Zh).call(this));return}if(l(this,Tr)){const n=l(this,Tr);b(this,Tr,null),this._uiManager.enableWaiting(!0),b(this,Lo,this._uiManager.imageManager.getFromUrl(n).then(r=>A(this,Yt,Jh).call(this,r)).finally(()=>A(this,Yt,Zh).call(this)));return}if(l(this,Mo)){const n=l(this,Mo);b(this,Mo,null),this._uiManager.enableWaiting(!0),b(this,Lo,this._uiManager.imageManager.getFromFile(n).then(r=>A(this,Yt,Jh).call(this,r)).finally(()=>A(this,Yt,Zh).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=Nm.join(",");const s=this._uiManager._signal;b(this,Lo,new Promise(n=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),A(this,Yt,Jh).call(this,r)}n()},{signal:s}),e.addEventListener("cancel",()=>{this.remove(),n()},{signal:s})}).finally(()=>A(this,Yt,Zh).call(this))),e.click()},lp=function(){var f;const{div:e}=this;let{width:s,height:n}=l(this,xe);const[r,o]=this.pageDimensions,a=.75;if(this.width)s=this.width*r,n=this.height*o;else if(s>a*r||n>a*o){const p=Math.min(a*r/s,a*o/n);s*=p,n*=p}const[c,h]=this.parentDimensions;this.setDims(s*c/r,n*h/o),this._uiManager.enableWaiting(!1);const u=b(this,Pr,document.createElement("canvas"));u.setAttribute("role","img"),this.addContainer(u),this.width=s/r,this.height=n/o,(f=this._initialOptions)!=null&&f.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),A(this,Yt,Wb).call(this),l(this,fh)||(this.parent.addUndoableEditor(this),b(this,fh,!0)),this._reportTelemetry({action:"inserted_image"}),l(this,dh)&&this.div.setAttribute("aria-description",l(this,dh))},cp=function(e,s){const{width:n,height:r}=l(this,xe);let o=n,a=r,c=l(this,xe);for(;o>2*e||a>2*s;){const h=o,u=a;o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*s&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const f=new OffscreenCanvas(o,a);f.getContext("2d").drawImage(c,0,0,h,u,0,0,o,a),c=f.transferToImageBitmap()}return c},Wb=function(){const[e,s]=this.parentDimensions,{width:n,height:r}=this,o=new Hr,a=Math.ceil(n*e*o.sx),c=Math.ceil(r*s*o.sy),h=l(this,Pr);if(!h||h.width===a&&h.height===c)return;h.width=a,h.height=c;const u=l(this,wi)?l(this,xe):A(this,Yt,cp).call(this,a,c),f=h.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(u,0,0,u.width,u.height,0,0,a,c)},hp=function(e){if(e){if(l(this,wi)){const r=this._uiManager.imageManager.getSvgUrl(l(this,cs));if(r)return r}const s=document.createElement("canvas");return{width:s.width,height:s.height}=l(this,xe),s.getContext("2d").drawImage(l(this,xe),0,0),s.toDataURL()}if(l(this,wi)){const[s,n]=this.pageDimensions,r=Math.round(this.width*s*Vo.PDF_TO_CSS_UNITS),o=Math.round(this.height*n*Vo.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(r,o);return a.getContext("2d").drawImage(l(this,xe),0,0,l(this,xe).width,l(this,xe).height,0,0,r,o),a.transferToImageBitmap()}return structuredClone(l(this,xe))},hS=function(e){var a;const{pageIndex:s,accessibilityData:{altText:n}}=this._initialData,r=e.pageIndex===s,o=(((a=e.accessibilityData)==null?void 0:a.alt)||"")===n;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}},Z(zb,"_type","stamp"),Z(zb,"_editorType",Rt.STAMP);var gl,ph,Bn,Do,Rr,ji,Oo,gh,ml,on,kr,Rs,Ir,mt,Fo,Ce,uS,An,Gb,Xb,up;const Xi=class Xi{constructor({uiManager:t,pageIndex:e,div:s,structTreeLayer:n,accessibilityManager:r,annotationLayer:o,drawLayer:a,textLayer:c,viewport:h,l10n:u}){w(this,Ce);w(this,gl);w(this,ph,!1);w(this,Bn,null);w(this,Do,null);w(this,Rr,null);w(this,ji,new Map);w(this,Oo,!1);w(this,gh,!1);w(this,ml,!1);w(this,on,null);w(this,kr,null);w(this,Rs,null);w(this,Ir,null);w(this,mt);const f=[...l(Xi,Fo).values()];if(!Xi._initialized){Xi._initialized=!0;for(const p of f)p.initialize(u,t)}t.registerEditorTypes(f),b(this,mt,t),this.pageIndex=e,this.div=s,b(this,gl,r),b(this,Bn,o),this.viewport=h,b(this,Rs,c),this.drawLayer=a,this._structTree=n,l(this,mt).addLayer(this)}get isEmpty(){return l(this,ji).size===0}get isInvisible(){return this.isEmpty&&l(this,mt).getMode()===Rt.NONE}updateToolbar(t){l(this,mt).updateToolbar(t)}updateMode(t=l(this,mt).getMode()){switch(A(this,Ce,up).call(this),t){case Rt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Rt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Rt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const s of l(Xi,Fo).values())e.toggle(`${s._type}Editing`,t===s._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=l(this,Rs))==null?void 0:e.div)}setEditingState(t){l(this,mt).setEditingState(t)}addCommands(t){l(this,mt).addCommands(t)}cleanUndoStack(t){l(this,mt).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=l(this,Bn))==null||e.div.classList.toggle("disabled",!t)}async enable(){b(this,ml,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const s of l(this,ji).values())s.enableEditing(),s.show(!0),s.annotationElementId&&(l(this,mt).removeChangedExistingAnnotation(s),t.add(s.annotationElementId));if(!l(this,Bn)){b(this,ml,!1);return}const e=l(this,Bn).getEditableAnnotations();for(const s of e){if(s.hide(),l(this,mt).isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const n=await this.deserialize(s);n&&(this.addOrRebuild(n),n.enableEditing())}b(this,ml,!1)}disable(){var n;b(this,gh,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const r of l(this,ji).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){t.set(r.annotationElementId,r);continue}else e.set(r.annotationElementId,r);(n=this.getEditableAnnotation(r.annotationElementId))==null||n.show(),r.remove()}if(l(this,Bn)){const r=l(this,Bn).getEditableAnnotations();for(const o of r){const{id:a}=o.data;if(l(this,mt).isDeletedAnnotationElement(a))continue;let c=e.get(a);if(c){c.resetAnnotationElement(o),c.show(!1),o.show();continue}c=t.get(a),c&&(l(this,mt).addChangedExistingAnnotation(c),c.renderAnnotationElement(o)&&c.show(!1)),o.show()}}A(this,Ce,up).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const r of l(Xi,Fo).values())s.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),b(this,gh,!1)}getEditableAnnotation(t){var e;return((e=l(this,Bn))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){l(this,mt).getActive()!==t&&l(this,mt).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=l(this,Rs))!=null&&t.div&&!l(this,Ir)){b(this,Ir,new AbortController);const e=l(this,mt).combinedSignal(l(this,Ir));l(this,Rs).div.addEventListener("pointerdown",A(this,Ce,uS).bind(this),{signal:e}),l(this,Rs).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=l(this,Rs))!=null&&t.div&&l(this,Ir)&&(l(this,Ir).abort(),b(this,Ir,null),l(this,Rs).div.classList.remove("highlighting"))}enableClick(){if(l(this,Do))return;b(this,Do,new AbortController);const t=l(this,mt).combinedSignal(l(this,Do));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=l(this,Do))==null||t.abort(),b(this,Do,null)}attach(t){l(this,ji).set(t.id,t);const{annotationElementId:e}=t;e&&l(this,mt).isDeletedAnnotationElement(e)&&l(this,mt).removeDeletedAnnotationElement(t)}detach(t){var e;l(this,ji).delete(t.id),(e=l(this,gl))==null||e.removePointerInTextLayer(t.contentDiv),!l(this,gh)&&t.annotationElementId&&l(this,mt).addDeletedAnnotationElement(t)}remove(t){this.detach(t),l(this,mt).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(l(this,mt).addDeletedAnnotationElement(t.annotationElementId),we.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),l(this,mt).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!l(this,ml)),l(this,mt).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var s;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!l(this,Rr)&&(t._focusEventsAllowed=!1,b(this,Rr,setTimeout(()=>{b(this,Rr,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:l(this,mt)._signal}),e.focus())},0))),t._structTreeParentId=(s=l(this,gl))==null?void 0:s.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),s=()=>{t.remove()};this.addCommands({cmd:e,undo:s,mustExec:!1})}getNextId(){return l(this,mt).getId()}combinedSignal(t){return l(this,mt).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=l(this,Ce,An))==null?void 0:t.canCreateNewEmptyEditor()}async pasteEditor(t,e){l(this,mt).updateToolbar(t),await l(this,mt).updateMode(t);const{offsetX:s,offsetY:n}=A(this,Ce,Xb).call(this),r=this.getNextId(),o=A(this,Ce,Gb).call(this,{parent:this,id:r,x:s,y:n,uiManager:l(this,mt),isCentered:!0,...e});o&&this.add(o)}async deserialize(t){var e;return await((e=l(Xi,Fo).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,l(this,mt)))||null}createAndAddNewEditor(t,e,s={}){const n=this.getNextId(),r=A(this,Ce,Gb).call(this,{parent:this,id:n,x:t.offsetX,y:t.offsetY,uiManager:l(this,mt),isCentered:e,...s});return r&&this.add(r),r}addNewEditor(t={}){this.createAndAddNewEditor(A(this,Ce,Xb).call(this),!0,t)}setSelected(t){l(this,mt).setSelected(t)}toggleSelected(t){l(this,mt).toggleSelected(t)}unselect(t){l(this,mt).unselect(t)}pointerup(t){var n;const{isMac:e}=Es.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!l(this,Oo)||(b(this,Oo,!1),(n=l(this,Ce,An))!=null&&n.isDrawer&&l(this,Ce,An).supportMultipleDrawings))return;if(!l(this,ph)){b(this,ph,!0);return}const s=l(this,mt).getMode();if(s===Rt.STAMP||s===Rt.SIGNATURE){l(this,mt).unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){var n;if(l(this,mt).getMode()===Rt.HIGHLIGHT&&this.enableTextSelection(),l(this,Oo)){b(this,Oo,!1);return}const{isMac:e}=Es.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(b(this,Oo,!0),(n=l(this,Ce,An))!=null&&n.isDrawer){this.startDrawingSession(t);return}const s=l(this,mt).getActive();b(this,ph,!s||s.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),l(this,on)){l(this,Ce,An).startDrawing(this,l(this,mt),!1,t);return}l(this,mt).setCurrentDrawingSession(this),b(this,on,new AbortController);const e=l(this,mt).combinedSignal(l(this,on));this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(b(this,kr,null),this.commitOrRemove())},{signal:e}),l(this,Ce,An).startDrawing(this,l(this,mt),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&b(this,kr,e);return}l(this,kr)&&setTimeout(()=>{var e;(e=l(this,kr))==null||e.focus(),b(this,kr,null)},0)}endDrawingSession(t=!1){return l(this,on)?(l(this,mt).setCurrentDrawingSession(null),l(this,on).abort(),b(this,on,null),b(this,kr,null),l(this,Ce,An).endDrawing(t)):null}findNewParent(t,e,s){const n=l(this,mt).findParent(e,s);return n===null||n===this?!1:(n.changeParent(t),!0)}commitOrRemove(){return l(this,on)?(this.endDrawingSession(),!0):!1}onScaleChanging(){l(this,on)&&l(this,Ce,An).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=l(this,mt).getActive())==null?void 0:t.parent)===this&&(l(this,mt).commitOrRemove(),l(this,mt).setActiveEditor(null)),l(this,Rr)&&(clearTimeout(l(this,Rr)),b(this,Rr,null));for(const s of l(this,ji).values())(e=l(this,gl))==null||e.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,l(this,ji).clear(),l(this,mt).removeLayer(this)}render({viewport:t}){this.viewport=t,wl(this.div,t);for(const e of l(this,mt).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){l(this,mt).commitOrRemove(),A(this,Ce,up).call(this);const e=this.viewport.rotation,s=t.rotation;if(this.viewport=t,wl(this.div,{rotation:s}),e!==s)for(const n of l(this,ji).values())n.rotate(s)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return l(this,mt).viewParameters.realScale}};gl=new WeakMap,ph=new WeakMap,Bn=new WeakMap,Do=new WeakMap,Rr=new WeakMap,ji=new WeakMap,Oo=new WeakMap,gh=new WeakMap,ml=new WeakMap,on=new WeakMap,kr=new WeakMap,Rs=new WeakMap,Ir=new WeakMap,mt=new WeakMap,Fo=new WeakMap,Ce=new WeakSet,uS=function(t){l(this,mt).unselectAll();const{target:e}=t;if(e===l(this,Rs).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&l(this,Rs).div.contains(e)){const{isMac:s}=Es.platform;if(t.button!==0||t.ctrlKey&&s)return;l(this,mt).showAllEditors("highlight",!0,!0),l(this,Rs).div.classList.add("free"),this.toggleDrawing(),kp.startHighlighting(this,l(this,mt).direction==="ltr",{target:l(this,Rs).div,x:t.x,y:t.y}),l(this,Rs).div.addEventListener("pointerup",()=>{l(this,Rs).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:l(this,mt)._signal}),t.preventDefault()}},An=function(){return l(Xi,Fo).get(l(this,mt).getMode())},Gb=function(t){const e=l(this,Ce,An);return e?new e.prototype.constructor(t):null},Xb=function(){const{x:t,y:e,width:s,height:n}=this.div.getBoundingClientRect(),r=Math.max(0,t),o=Math.max(0,e),a=Math.min(window.innerWidth,t+s),c=Math.min(window.innerHeight,e+n),h=(r+a)/2-t,u=(o+c)/2-e,[f,p]=this.viewport.rotation%180===0?[h,u]:[u,h];return{offsetX:f,offsetY:p}},up=function(){for(const t of l(this,ji).values())t.isEmpty()&&t.remove()},Z(Xi,"_initialized",!1),w(Xi,Fo,new Map([Sb,Nb,zb,kp,Ub].map(t=>[t._editorType,t])));let qb=Xi;var an,Ws,bl,Hd,Yp,dS,Wn,Yb,fS,Qb;const Ze=class Ze{constructor({pageIndex:t}){w(this,Wn);w(this,an,null);w(this,Ws,new Map);w(this,bl,new Map);this.pageIndex=t}setParent(t){if(!l(this,an)){b(this,an,t);return}if(l(this,an)!==t){if(l(this,Ws).size>0)for(const e of l(this,Ws).values())e.remove(),t.append(e);b(this,an,t)}}static get _svgFactory(){return jt(this,"_svgFactory",new Tp)}draw(t,e=!1,s=!1){const n=Bs(Ze,Hd)._++,r=A(this,Wn,Yb).call(this),o=Ze._svgFactory.createElement("defs");r.append(o);const a=Ze._svgFactory.createElement("path");o.append(a);const c=`path_p${this.pageIndex}_${n}`;a.setAttribute("id",c),a.setAttribute("vector-effect","non-scaling-stroke"),e&&l(this,bl).set(n,a);const h=s?A(this,Wn,fS).call(this,o,c):null,u=Ze._svgFactory.createElement("use");return r.append(u),u.setAttribute("href",`#${c}`),this.updateProperties(r,t),l(this,Ws).set(n,r),{id:n,clipPathId:`url(#${h})`}}drawOutline(t,e){const s=Bs(Ze,Hd)._++,n=A(this,Wn,Yb).call(this),r=Ze._svgFactory.createElement("defs");n.append(r);const o=Ze._svgFactory.createElement("path");r.append(o);const a=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",a),o.setAttribute("vector-effect","non-scaling-stroke");let c;if(e){const f=Ze._svgFactory.createElement("mask");r.append(f),c=`mask_p${this.pageIndex}_${s}`,f.setAttribute("id",c),f.setAttribute("maskUnits","objectBoundingBox");const p=Ze._svgFactory.createElement("rect");f.append(p),p.setAttribute("width","1"),p.setAttribute("height","1"),p.setAttribute("fill","white");const g=Ze._svgFactory.createElement("use");f.append(g),g.setAttribute("href",`#${a}`),g.setAttribute("stroke","none"),g.setAttribute("fill","black"),g.setAttribute("fill-rule","nonzero"),g.classList.add("mask")}const h=Ze._svgFactory.createElement("use");n.append(h),h.setAttribute("href",`#${a}`),c&&h.setAttribute("mask",`url(#${c})`);const u=h.cloneNode();return n.append(u),h.classList.add("mainOutline"),u.classList.add("secondaryOutline"),this.updateProperties(n,t),l(this,Ws).set(s,n),s}finalizeDraw(t,e){l(this,bl).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var c;if(!e)return;const{root:s,bbox:n,rootClass:r,path:o}=e,a=typeof t=="number"?l(this,Ws).get(t):t;if(a){if(s&&A(this,Wn,Qb).call(this,a,s),n&&A(c=Ze,Yp,dS).call(c,a,n),r){const{classList:h}=a;for(const[u,f]of Object.entries(r))h.toggle(u,f)}if(o){const u=a.firstChild.firstChild;A(this,Wn,Qb).call(this,u,o)}}}updateParent(t,e){if(e===this)return;const s=l(this,Ws).get(t);s&&(l(e,an).append(s),l(this,Ws).delete(t),l(e,Ws).set(t,s))}remove(t){l(this,bl).delete(t),l(this,an)!==null&&(l(this,Ws).get(t).remove(),l(this,Ws).delete(t))}destroy(){b(this,an,null);for(const t of l(this,Ws).values())t.remove();l(this,Ws).clear(),l(this,bl).clear()}};an=new WeakMap,Ws=new WeakMap,bl=new WeakMap,Hd=new WeakMap,Yp=new WeakSet,dS=function(t,[e,s,n,r]){const{style:o}=t;o.top=`${100*s}%`,o.left=`${100*e}%`,o.width=`${100*n}%`,o.height=`${100*r}%`},Wn=new WeakSet,Yb=function(){const t=Ze._svgFactory.create(1,1,!0);return l(this,an).append(t),t.setAttribute("aria-hidden",!0),t},fS=function(t,e){const s=Ze._svgFactory.createElement("clipPath");t.append(s);const n=`clip_${e}`;s.setAttribute("id",n),s.setAttribute("clipPathUnits","objectBoundingBox");const r=Ze._svgFactory.createElement("use");return s.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),n},Qb=function(t,e){for(const[s,n]of Object.entries(e))n===null?t.removeAttribute(s):t.setAttribute(s,n)},w(Ze,Yp),w(Ze,Hd,0);let Kb=Ze;globalThis.pdfjsTestingUtils={HighlightOutliner:Cb};globalThis.pdfjsLib={AbortException:jo,AnnotationEditorLayer:qb,AnnotationEditorParamsType:Wt,AnnotationEditorType:Rt,AnnotationEditorUIManager:Al,AnnotationLayer:wb,AnnotationMode:Zr,AnnotationType:ze,build:Tk,ColorPicker:Rp,createValidAbsoluteUrl:a0,DOMSVGFactory:Tp,DrawLayer:Kb,FeatureTest:Es,fetchData:qd,getDocument:hE,getFilenameFromUrl:yR,getPdfFilenameFromUrl:wR,getUuid:h0,getXfaPageViewport:AR,GlobalWorkerOptions:jn,ImageKind:Of,InvalidPDFException:Om,isDataScheme:mg,isPdfFile:Av,isValidExplicitDest:yk,MathClamp:Gs,noContextMenu:dn,normalizeUnicode:bR,OPS:Ep,OutputScale:Hr,PasswordResponses:lR,PDFDataRangeTransport:uE,PDFDateString:Ev,PDFWorker:lc,PermissionFlag:aR,PixelsPerInch:Vo,RenderingCancelledException:wv,ResponseException:Sp,setLayerDimensions:wl,shadow:jt,SignatureExtractor:Dr,stopEvent:qe,SupportedImageMimeTypes:Nm,TextLayer:mu,TouchManager:Cp,updateUrlHash:l0,Util:pt,VerbosityLevel:fg,version:Ck,XfaLayer:fE};const Kk={key:0,class:"position-absolute top-50 start-50 translate-middle"},Yk={key:1,class:"position-absolute top-50 start-50 translate-middle text-center"},Qk={class:"text-muted"},Jk=Vr({__name:"PDFThumbnail",props:{pdfPath:{}},setup(i){const t="/RestFigBank/pdf.worker.mjs";jn.workerSrc=t;const e=i,s=ae(null),n=ae(null),r=ae(!0),o=ae(!1),a=ae(""),c=p=>{var g,_;return p.name==="InvalidPDFException"?"Le fichier PDF est invalide ou corrompu":(g=p.message)!=null&&g.includes("404")?"Le fichier PDF est introuvable":(_=p.message)!=null&&_.includes("Network")?"Erreur réseau lors du chargement du PDF":"Erreur lors du chargement du PDF"},h=p=>p.startsWith("/pdfs/")?"/RestFigBank"+p:"/RestFigBank/pdfs/"+p.replace(/^\//,""),u=async p=>{try{const g=h(p);console.log("[PDFThumbnail] Fetching PDF from:",g);const _=await fetch(g,{headers:{Accept:"application/pdf"},cache:"no-cache"});if(!_.ok)throw console.error("[PDFThumbnail] HTTP Error:",_.status,_.statusText),new Error(`Network response was not ok: ${_.status} ${_.statusText}`);const v=_.headers.get("content-type");console.log("[PDFThumbnail] Content-Type:",v);const x=await _.arrayBuffer();if(console.log("[PDFThumbnail] PDF size:",x.byteLength,"bytes"),x.byteLength===0)throw new Error("Le fichier PDF est vide");return x}catch(g){throw console.error("[PDFThumbnail] Error loading PDF:",g),g}},f=async p=>{if(!s.value||!n.value){console.log("Canvas or container not ready");return}try{r.value=!0,o.value=!1,a.value="",console.log("Loading PDF from path:",p);const g=await u(p);console.log("PDF data loaded, size:",g.byteLength);const v=await hE({data:g}).promise;if(v.numPages===0)throw new Error("Le PDF ne contient aucune page");console.log("PDF document loaded, pages:",v.numPages);const x=await v.getPage(1);console.log("First page loaded");const S=n.value.clientWidth,C=x.getViewport({scale:1}),T=S/C.width,R=x.getViewport({scale:T});s.value.width=R.width,s.value.height=R.height;const L=s.value.getContext("2d");if(!L)throw new Error("Impossible d'obtenir le contexte du canvas");console.log("Starting page render"),await x.render({canvasContext:L,viewport:R}).promise,console.log("Page rendered successfully")}catch(g){console.error("Error rendering PDF:",g),o.value=!0,a.value=c(g)}finally{r.value=!1}};return ag(()=>{console.log("Component mounted, starting render for:",e.pdfPath),f(e.pdfPath)}),rc(()=>e.pdfPath,p=>{console.log("PDF path changed, re-rendering:",p),f(p)}),(p,g)=>(wt(),xt("div",{class:"pdf-thumbnail",ref_key:"canvasContainer",ref:n},[tr(M("canvas",{ref_key:"canvas",ref:s,class:"w-100 h-100"},null,512),[[CT,!o.value&&!r.value]]),r.value?(wt(),xt("div",Kk,g[0]||(g[0]=[M("div",{class:"spinner-border text-primary",role:"status"},[M("span",{class:"visually-hidden"},"Chargement...")],-1)]))):hs("",!0),o.value?(wt(),xt("div",Yk,[g[1]||(g[1]=M("div",{class:"text-danger mb-2"},[M("i",{class:"bi bi-file-earmark-x fs-1"})],-1)),M("small",Qk,ke(a.value),1)])):hs("",!0)],512))}}),yh=(i,t)=>{const e=i.__vccOpts||i;for(const[s,n]of t)e[s]=n;return e},Zk=yh(Jk,[["__scopeId","data-v-b0478b10"]]),tI={class:"container"},eI={key:0,class:"alert alert-danger",role:"alert"},sI={key:1,class:"text-center my-5"},iI={class:"row mb-4"},nI={class:"col-12"},rI={class:"card shadow-sm"},oI={class:"card-body"},aI={class:"mb-3"},lI={class:"d-flex gap-3"},cI=["value"],hI={class:"form-check-label"},uI={class:"mb-3"},dI={class:"d-flex gap-3"},fI=["value"],pI={class:"form-check-label"},gI={class:"mb-3"},mI={class:"d-flex gap-3 flex-wrap"},bI=["value"],vI={class:"form-check-label"},_I={class:"mb-3"},yI={class:"d-flex gap-4"},wI={class:"form-check"},AI={class:"form-check"},EI={class:"form-check"},SI={class:"form-check"},xI={class:"mb-3"},CI={class:"text"},TI=["onClick"],PI={key:0,class:"ms-1 small"},RI={class:"text-center mb-3 d-flex align-items-center justify-content-center gap-2"},kI={class:"text-muted fst-italic"},II={class:"text-center mt-4"},LI={class:"d-inline-block px-4 py-2 rounded-pill bg-success-subtle border border-success"},MI={class:"fw-semibold text-success"},DI={key:0,class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3"},OI={class:"card shadow-sm h-100"},FI={class:"card-body d-flex flex-column"},NI={class:"card-title"},$I={class:"card-text"},BI={key:0,class:"mb-2"},HI={key:1,class:"mb-2"},jI={key:2,class:"mb-2"},VI={key:3,class:"mb-2"},UI={key:0,class:"badge text-warning-emphasis bg-warning-subtle border border-warning-subtle me-1 mb-1"},zI={key:1,class:"badge text-warning-emphasis bg-warning-subtle border border-warning-subtle me-1 mb-1"},WI={key:2,class:"badge text-warning-emphasis bg-warning-subtle border border-warning-subtle me-1 mb-1"},qI={key:3,class:"badge text-warning-emphasis bg-warning-subtle border border-warning-subtle me-1 mb-1"},GI={class:"mb-3"},XI={class:"d-flex justify-content-center mb-2"},KI=["href"],YI={class:"text-center"},QI=["href"],JI={key:1,class:"text-muted small"},ZI={key:1,class:"alert alert-info"},tL=Vr({__name:"PDFLibrary",setup(i){const t=rR(),{documents:e,isLoading:s,error:n}=eP(t),r=[{value:"CE1",label:"CE1"},{value:"CE2",label:"CE2"},{value:"CM1",label:"CM1"},{value:"CM2",label:"CM2"},{value:"6EME",label:"6ème"},{value:"5EME",label:"5ème"}],o=["Surface","Ligne","Point"],a=["Ficelle","Règle non informable","Règle informable","Bande de papier","Compas","Gabarit angle droit","Équerre","Autre gabarit","Pochoir"],c=ae([]),h=ae([]),u=ae([]),f=ae([]),p=ae(!1),g=ae(!1),_=ae(!1),v=ae(!1),x=O=>{const I=f.value.indexOf(O);I===-1?f.value.push(O):f.value.splice(I,1)},S=us(()=>e.value?e.value.filter(O=>{const I=c.value.length===0||O.level&&Array.isArray(O.level)&&O.level.some(Ut=>c.value.includes(Ut)),D=h.value.length===0||O.vision&&Array.isArray(O.vision)&&O.vision.some(Ut=>h.value.includes(Ut)),B=u.value.length===0||O.instruments&&Array.isArray(O.instruments)&&O.instruments.some(Ut=>u.value.includes(Ut)),K=f.value.length===0||O.tags&&Array.isArray(O.tags)&&O.tags.some(Ut=>f.value.includes(Ut)),Q=!p.value||O.withCost,bt=!g.value||O.isScaled,yt=!_.value||O.hasRotation,St=!v.value||O.withoutAmorce;return I&&D&&B&&K&&Q&&bt&&yt&&St}):[]),C=us(()=>{const O=[];if(c.value.length>0){const D=c.value.map(B=>{var K;return(K=r.find(Q=>Q.value===B))==null?void 0:K.label}).join(" ou ");O.push(`en ${D}`)}if(h.value.length>0){const D=h.value.join(" ou ");O.push(`utilisant la vision ${D}`)}if(u.value.length>0){const D=u.value.join(" ou ");O.push(`nécessitant ${D}`)}if(f.value.length>0){const D=f.value.join(" ou #");O.push(`avec pour mot${f.value.length>1?"s":""} clef${f.value.length>1?"s":""} #${D}`)}const I=[];return p.value&&I.push("avec coûts"),g.value&&I.push("pas à l'échelle"),_.value&&I.push("avec rotation"),v.value&&I.push("sans amorce"),I.length>0&&O.push(I.join(" et ")),O.length===0?"Affichage de toutes les situations":`Recherche des situations ${O.join(", ")}`}),T=us(()=>{if(!e.value)return[];const O={};return S.value.forEach(I=>{I.tags.forEach(D=>{O[D]=(O[D]||0)+1})}),Object.entries(O).sort((I,D)=>D[1]-I[1]).map(([I,D])=>({tag:I,count:D}))}),R=()=>{c.value=[],h.value=[],u.value=[],f.value=[],p.value=!1,g.value=!1,_.value=!1,v.value=!1},L=us(()=>c.value.length>0||h.value.length>0||u.value.length>0||f.value.length>0||p.value||g.value||_.value||v.value);return ag(async()=>{await t.loadDocuments()}),(O,I)=>(wt(),xt("div",tI,[je(n)?(wt(),xt("div",eI,[I[7]||(I[7]=M("i",{class:"bi bi-exclamation-triangle me-2"},null,-1)),Le(ke(je(n)),1)])):hs("",!0),je(s)?(wt(),xt("div",sI,I[8]||(I[8]=[M("div",{class:"spinner-border text-primary",role:"status"},[M("span",{class:"visually-hidden"},"Chargement...")],-1),M("div",{class:"mt-2 text-primary"},[M("i",{class:"bi bi-arrow-repeat me-2"}),Le("Chargement... ")],-1)]))):(wt(),xt(We,{key:2},[M("div",iI,[M("div",nI,[M("div",rI,[M("div",oI,[M("div",aI,[I[9]||(I[9]=M("label",{class:"form-label fw-bold badge text-primary-emphasis bg-primary-subtle border border-primary-subtle px-2"},[M("i",{class:"bi bi-mortarboard me-1"}),Le("Niveau ")],-1)),M("div",lI,[(wt(),xt(We,null,wn(r,(D,B)=>M("div",{class:"form-check",key:B},[tr(M("input",{class:"form-check-input",type:"checkbox",value:D.value,"onUpdate:modelValue":I[0]||(I[0]=K=>c.value=K)},null,8,cI),[[oa,c.value]]),M("label",hI,ke(D.label),1)])),64))])]),M("div",uI,[I[10]||(I[10]=M("label",{class:"form-label fw-bold badge text-info-emphasis bg-info-subtle border border-info-subtle px-2"},[M("i",{class:"bi bi-eye me-1"}),Le("Vision ")],-1)),M("div",dI,[(wt(),xt(We,null,wn(o,(D,B)=>M("div",{class:"form-check",key:B},[tr(M("input",{class:"form-check-input",type:"checkbox",value:D,"onUpdate:modelValue":I[1]||(I[1]=K=>h.value=K)},null,8,fI),[[oa,h.value]]),M("label",pI,ke(D),1)])),64))])]),M("div",gI,[I[11]||(I[11]=M("label",{class:"form-label fw-bold badge text-success-emphasis bg-success-subtle border border-success-subtle px-2"},[M("i",{class:"bi bi-tools me-1"}),Le("Instruments ")],-1)),M("div",mI,[(wt(),xt(We,null,wn(a,(D,B)=>M("div",{class:"form-check",key:B},[tr(M("input",{class:"form-check-input",type:"checkbox",value:D,"onUpdate:modelValue":I[2]||(I[2]=K=>u.value=K)},null,8,bI),[[oa,u.value]]),M("label",vI,ke(D),1)])),64))])]),M("div",_I,[I[16]||(I[16]=M("label",{class:"form-label fw-bold badge text-warning-emphasis bg-warning-subtle border border-warning-subtle px-2"},[M("i",{class:"bi bi-sliders me-1"}),Le("Options ")],-1)),M("div",yI,[M("div",wI,[tr(M("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":I[3]||(I[3]=D=>p.value=D)},null,512),[[oa,p.value]]),I[12]||(I[12]=M("label",{class:"form-check-label"},"Avec coûts",-1))]),M("div",AI,[tr(M("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":I[4]||(I[4]=D=>g.value=D)},null,512),[[oa,g.value]]),I[13]||(I[13]=M("label",{class:"form-check-label"},"Pas à l'échelle",-1))]),M("div",EI,[tr(M("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":I[5]||(I[5]=D=>_.value=D)},null,512),[[oa,_.value]]),I[14]||(I[14]=M("label",{class:"form-check-label"},"Avec rotation",-1))]),M("div",SI,[tr(M("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":I[6]||(I[6]=D=>v.value=D)},null,512),[[oa,v.value]]),I[15]||(I[15]=M("label",{class:"form-check-label"},"Sans amorce (reproduction simple)",-1))])])]),M("div",xI,[I[17]||(I[17]=M("label",{class:"form-label fw-bold badge text-danger-emphasis bg-danger-subtle border border-danger-subtle px-2 mb-2"},[M("i",{class:"bi bi-tags me-1"}),Le("Mots clefs ")],-1)),M("div",CI,[(wt(!0),xt(We,null,wn(T.value,D=>(wt(),xt("span",{key:D.tag,onClick:B=>x(D.tag),class:_h(["badge me-1 mb-1",{"text-danger-emphasis bg-danger-subtle border border-danger-subtle":f.value.includes(D.tag),"text-secondary border":!f.value.includes(D.tag)}]),role:"button",style:{"font-size":"0.8em",padding:"0.3em 0.6em",cursor:"pointer"}},[Le(ke(D.tag)+" ",1),D.count>1?(wt(),xt("span",PI,"("+ke(D.count)+")",1)):hs("",!0)],10,TI))),128))])]),M("div",RI,[M("span",kI,ke(C.value),1),L.value?(wt(),xt("button",{key:0,onClick:R,class:"btn btn-outline-secondary btn-sm",title:"Réinitialiser les filtres"},I[18]||(I[18]=[M("i",{class:"bi bi-arrow-counterclockwise"},null,-1)]))):hs("",!0)]),M("div",II,[M("div",LI,[M("span",MI,[I[19]||(I[19]=M("i",{class:"bi bi-files me-1"},null,-1)),Le(ke(S.value.length>0?S.value.length:"Aucune")+" situation"+ke(S.value.length>1?"s":"")+" trouvée"+ke(S.value.length>1?"s":""),1)])])])])])])]),S.value.length?(wt(),xt("div",DI,[(wt(!0),xt(We,null,wn(S.value,D=>(wt(),xt("div",{class:"col",key:D.id},[M("div",OI,[Te(Zk,{"pdf-path":D.path,class:"card-img-top"},null,8,["pdf-path"]),M("div",FI,[M("h5",NI,ke(D.title),1),M("p",$I,ke(D.description),1),D.level&&D.level.length>0?(wt(),xt("div",BI,[(wt(!0),xt(We,null,wn(D.level,B=>(wt(),xt("span",{key:B,class:"badge text-primary-emphasis bg-primary-subtle border border-primary-subtle me-1 mb-1"},ke(B),1))),128))])):hs("",!0),D.vision&&D.vision.length>0?(wt(),xt("div",HI,[(wt(!0),xt(We,null,wn(D.vision,B=>(wt(),xt("span",{key:B,class:"badge text-info-emphasis bg-info-subtle border border-info-subtle me-1 mb-1"},ke(B),1))),128))])):hs("",!0),D.instruments&&D.instruments.length>0?(wt(),xt("div",jI,[(wt(!0),xt(We,null,wn(D.instruments,B=>(wt(),xt("span",{key:B,class:"badge text-success-emphasis bg-success-subtle border border-success-subtle me-1 mb-1"},ke(B),1))),128))])):hs("",!0),D.withCost||D.isScaled||D.hasRotation||D.withoutAmorce?(wt(),xt("div",VI,[D.withCost?(wt(),xt("span",UI,"Avec coûts")):hs("",!0),D.isScaled?(wt(),xt("span",zI,"Pas à l'échelle")):hs("",!0),D.hasRotation?(wt(),xt("span",WI,"Avec rotation")):hs("",!0),D.withoutAmorce?(wt(),xt("span",qI,"Sans amorce")):hs("",!0)])):hs("",!0),M("div",GI,[(wt(!0),xt(We,null,wn(D.tags,B=>(wt(),xt("span",{key:B,class:"badge text-danger-emphasis bg-danger-subtle border border-danger-subtle me-1 mb-1"},ke(B),1))),128))]),M("div",XI,[M("a",{href:"/RestFigBank"+D.path,target:"_blank",class:"btn btn-sm btn-outline-primary"},I[20]||(I[20]=[M("i",{class:"bi bi-file-earmark-pdf me-1"},null,-1),Le("Ouvrir ")]),8,KI)]),M("div",YI,[D.source_url?(wt(),xt("a",{key:0,href:D.source_url,target:"_blank",class:"text-muted small"},[I[21]||(I[21]=M("i",{class:"bi bi-link-45deg me-1"},null,-1)),Le(ke(D.source_url_title||"Source"),1)],8,QI)):D.source_url_title?(wt(),xt("span",JI,[I[22]||(I[22]=M("i",{class:"bi bi-link-45deg me-1"},null,-1)),Le(ke(D.source_url_title),1)])):hs("",!0)])])])]))),128))])):(wt(),xt("div",ZI," Aucun document ne correspond aux critères sélectionnés. "))],64))]))}}),eL=yh(tL,[["__scopeId","data-v-601d7445"]]),sL={class:"d-flex flex-column min-vh-100"},iL={key:0,"data-bs-theme":"dark",class:"fixed-top"},nL={class:"collapse text-bg-dark",id:"navbarHeader"},rL={class:"container"},oL={class:"row"},aL={class:"col-sm-4 offset-md-1 py-4"},lL={class:"list-unstyled"},cL={class:"navbar navbar-dark bg-dark shadow-sm"},hL={class:"container"},uL={key:1,class:"text-body-secondary py-5 mt-auto"},dL=Vr({__name:"App",setup(i){const t=nR(),e=us(()=>!["howto","license","instruments","contribute"].includes(t.name));return(s,n)=>(wt(),xt("div",sL,[e.value?(wt(),xt("header",iL,[M("div",nL,[M("div",rL,[M("div",oL,[n[3]||(n[3]=M("div",{class:"col-sm-8 col-md-7 py-4"},[M("h4",{class:"text-white"},"À propos"),M("p",{class:"text-body-secondary"}," Cette banque de figures permet de travailler la restauration de figures géométriques. Vous pouvez filtrer les documents selon différents critères comme le niveau, la vision, les instruments utilisés et d'autres options. ")],-1)),M("div",aL,[M("ul",lL,[M("li",null,[Te(je(Df),{to:"/contribuer",class:"text-white",target:"_blank"},{default:$o(()=>n[0]||(n[0]=[Le("Comment contribuer ?")])),_:1,__:[0]})]),n[2]||(n[2]=M("li",null,[M("a",{href:"https://arnaud-lierville.github.io/",target:"_blank",class:"text-white"},"Autres outils Maths en classe !")],-1)),M("li",null,[Te(je(Df),{to:"/licence",class:"text-white",target:"_blank"},{default:$o(()=>n[1]||(n[1]=[Le("Licence")])),_:1,__:[1]})])])])])])]),M("div",cL,[M("div",hL,[Te(je(Df),{to:"/",class:"navbar-brand d-flex align-items-center"},{default:$o(()=>n[4]||(n[4]=[M("strong",null,"RestFigBank",-1)])),_:1,__:[4]}),n[5]||(n[5]=M("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarHeader","aria-controls":"navbarHeader","aria-expanded":"false","aria-label":"Toggle navigation"},[M("span",{class:"navbar-toggler-icon"})],-1))])])])):hs("",!0),M("main",{class:_h(["main-content flex-grow-1",{"no-navbar":!e.value}])},[Te(je(o0))],2),e.value?(wt(),xt("footer",uL,n[6]||(n[6]=[M("div",{class:"container"},[M("p",{class:"float-end mb-1"},[M("a",{href:"#"},"Retour en haut")]),M("p",{class:"mb-1"},"Cette banque de figures est un outil pédagogique et didactique pour l'enseignement de la géométrie.")],-1)]))):hs("",!0)]))}}),fL="modulepreload",pL=function(i){return"/RestFigBank/"+i},Lw={},gL=function(t,e,s){let n=Promise.resolve();if(e&&e.length>0){let o=function(h){return Promise.all(h.map(u=>Promise.resolve(u).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));n=o(e.map(h=>{if(h=pL(h),h in Lw)return;Lw[h]=!0;const u=h.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${f}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":fL,u||(p.as="script"),p.crossOrigin="",p.href=h,c&&p.setAttribute("nonce",c),document.head.appendChild(p),u)return new Promise((g,_)=>{p.addEventListener("load",g),p.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${h}`)))})}))}function r(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return n.then(o=>{for(const a of o||[])a.status==="rejected"&&r(a.reason);return t().catch(r)})},mL={class:"py-3 text-center container"},bL={class:"row py-3"},vL={class:"col-lg-6 col-md-8 mx-auto"},_L={class:"d-flex justify-content-center gap-3 mt-4"},yL={class:"album py-5 bg-body-tertiary"},wL=Vr({__name:"HomeView",setup(i){return(t,e)=>{const s=fv("RouterLink");return wt(),xt("div",null,[M("section",mL,[M("div",bL,[M("div",vL,[e[2]||(e[2]=M("h1",{class:"fw-light"},"Restauration de figures",-1)),e[3]||(e[3]=M("p",{class:"lead text-body-secondary"}," Explorez la collection de figures géométriques à restaurer. Utilisez les filtres ci-dessous et cliquez sur des mots clefs pour trouver les documents adaptés à vos besoins. ",-1)),M("div",_L,[Te(s,{to:"/mode-emploi",class:"btn btn-outline-primary btn-sm",target:"_blank",rel:"noopener noreferrer"},{default:$o(()=>e[0]||(e[0]=[M("i",{class:"bi bi-question-circle me-2"},null,-1),Le("Comment ça marche ? ")])),_:1,__:[0]}),Te(s,{to:"/instruments",class:"btn btn-outline-success btn-sm",target:"_blank",rel:"noopener noreferrer"},{default:$o(()=>e[1]||(e[1]=[M("i",{class:"bi bi-tools me-2"},null,-1),Le("Les instruments ")])),_:1,__:[1]})])])])]),M("div",yL,[Te(eL)])])}}}),AL="/RestFigBank/assets/fleche-carre-CIKwgwNQ.png",EL={class:"container py-5"},SL={class:"row"},xL={class:"col-12"},CL={class:"card shadow-sm mb-4"},TL={class:"card-body"},PL={class:"alert alert-light border mb-4"},RL={class:"row"},kL={class:"col-12 text-center"},IL=["src"],LL={class:"card shadow-sm mb-4"},ML={class:"card-body"},DL={class:"mt-3"},OL=Vr({__name:"HowToView",setup(i){return(t,e)=>{const s=fv("RouterLink");return wt(),xt("div",EL,[e[10]||(e[10]=M("h1",{class:"mb-4"},"Comment ça marche ?",-1)),M("div",SL,[M("div",xL,[e[7]||(e[7]=M("div",{class:"card shadow-sm mb-4"},[M("div",{class:"card-body"},[M("h2",{class:"h5 mb-3"},"Objectif général"),M("p",null," L'approche vise à assurer une continuité et une progression cohérentes de l'enseignement de la géométrie du cycle 2 au cycle 4, en transformant progressivement le regard des élèves sur les figures géométriques. ")])],-1)),M("div",CL,[M("div",TL,[e[2]||(e[2]=yl('<h2 class="h5 mb-3" data-v-2d930c55>La restauration de figures comme levier didactique</h2><div class="mb-4" data-v-2d930c55><p data-v-2d930c55> La restauration de figures est une activité géométrique qui consiste à compléter une figure donnée partiellement appelée &quot;amorce&quot;, à partir d&#39;une figure &quot;modèle&quot;, en utilisant divers instruments de tracé et de prise d&#39;informations (comme la règle non informable, informable, la bande de papier, l&#39;équerre, le compas, des gabarits ou des pochoir). </p></div><div class="mb-4" data-v-2d930c55><h3 class="h6 mb-3" data-v-2d930c55>Objectifs principaux :</h3><div class="list-group" data-v-2d930c55><div class="list-group-item" data-v-2d930c55><strong data-v-2d930c55>Faire évoluer le regard des élèves :</strong> passer d&#39;une perception globale (vision &quot;surface&quot;) à une analyse fine des relations géométriques (alignements, égalités, intersections). </div><div class="list-group-item" data-v-2d930c55><strong data-v-2d930c55>Favoriser le raisonnement géométrique :</strong> les élèves doivent identifier et utiliser les propriétés géométriques implicites dans la figure modèle pour compléter la figure amorce. </div><div class="list-group-item" data-v-2d930c55><strong data-v-2d930c55>Développer des compétences en construction :</strong> cette activité mobilise des gestes précis et des instruments adaptés pour reproduire ou prolonger des traits géométriques. </div></div></div>',3)),M("div",PL,[e[1]||(e[1]=M("h3",{class:"h6 mb-3"},"Exemple :",-1)),M("div",RL,[M("div",kL,[M("img",{src:je(AL),alt:"Exemple de restauration de figures",class:"img-fluid rounded shadow-sm example-image"},null,8,IL)]),e[0]||(e[0]=yl('<div class="col-12 mb-3" data-v-2d930c55><p class="mb-2" data-v-2d930c55>Matériel fourni :</p><ul class="mb-0" data-v-2d930c55><li class="mb-2" data-v-2d930c55> Sur la même feuille, la figure modèle et l&#39;amorce à la même échelle mais orientée différemment (pour éviter le transfert par « glissement » de la figure à restaurer). </li><li class="mb-2" data-v-2d930c55> Un gabarit d&#39;angle droit informable (sur lequel on peut prendre et garder des informations pour reporter des longueurs) dont les côtés sont plus longs que ceux du carré. </li><li data-v-2d930c55> Ficelle </li></ul><p class="mt-3 text-muted small" data-v-2d930c55> Source : <a href="https://lea-geometrie.etab.ac-lille.fr/" target="_blank" rel="noopener noreferrer" data-v-2d930c55>LEA Géométrie - Académie de Lille</a></p></div>',1))])])])]),e[8]||(e[8]=yl('<div class="card shadow-sm mb-4" data-v-2d930c55><div class="card-body" data-v-2d930c55><h2 class="h5 mb-3" data-v-2d930c55>Évolution du regard sur les figures</h2><div class="mb-3" data-v-2d930c55><h3 class="h6 text-primary-emphasis bg-primary-subtle p-2 rounded" data-v-2d930c55>Cycle 2</h3><p data-v-2d930c55> Apprentissage fondé sur la manipulation et la restauration de figures simples (à l&#39;aide de gabarits, descriptions, programmes de construction simples). </p></div><div class="mb-3" data-v-2d930c55><h3 class="h6 text-info-emphasis bg-info-subtle p-2 rounded" data-v-2d930c55>Cycle 3</h3><p data-v-2d930c55> Passage d&#39;une géométrie perceptive à une géométrie instrumentée, puis déductive. </p></div><div class="mb-3" data-v-2d930c55><h3 class="h6 text-success-emphasis bg-success-subtle p-2 rounded" data-v-2d930c55>Cycle 4</h3><p data-v-2d930c55> Accès à une géométrie plus abstraite et théorique, reposant sur des relations entre points, droites, segments, angles, etc. </p></div></div></div><div class="card shadow-sm mb-4" data-v-2d930c55><div class="card-body" data-v-2d930c55><h2 class="h5 mb-3" data-v-2d930c55>Trois types de &quot;regards&quot; à développer</h2><ul class="list-unstyled" data-v-2d930c55><li class="mb-3" data-v-2d930c55><span class="badge text-primary-emphasis bg-primary-subtle" data-v-2d930c55>Vision surface</span><p class="mt-2 mb-0" data-v-2d930c55>Forme globale, aspect visuel</p></li><li class="mb-3" data-v-2d930c55><span class="badge text-info-emphasis bg-info-subtle" data-v-2d930c55>Vision lignes</span><p class="mt-2 mb-0" data-v-2d930c55>Attention portée aux alignements, côtés, segments</p></li><li class="mb-3" data-v-2d930c55><span class="badge text-success-emphasis bg-success-subtle" data-v-2d930c55>Vision points</span><p class="mt-2 mb-0" data-v-2d930c55>Analyse des relations entre les lignes, intersections</p></li></ul><div class="alert alert-info" data-v-2d930c55><p class="mb-0" data-v-2d930c55> 👉 L&#39;objectif est d&#39;acquérir une flexibilité du regard, c&#39;est-à-dire de savoir mobiliser ces différentes visions selon le contexte. </p></div></div></div>',2)),M("div",LL,[M("div",ML,[e[4]||(e[4]=M("h2",{class:"h5 mb-3"},"Rôle des instruments de géométrie",-1)),e[5]||(e[5]=M("p",null,"Les instruments (règle, équerre, compas, bande de papier) permettent :",-1)),e[6]||(e[6]=M("ul",null,[M("li",null,"de tracer des figures,"),M("li",null,"de vérifier des propriétés géométriques,"),M("li",null,"de mobiliser des relations fondamentales : appartenance, égalité, perpendicularité, parallélisme…")],-1)),M("div",DL,[Te(s,{to:"/instruments",class:"text-decoration-none",target:"_blank"},{default:$o(()=>e[3]||(e[3]=[Le(" 👉 Découvrir tous les instruments et leur utilisation ")])),_:1,__:[3]})])])]),e[9]||(e[9]=M("div",{class:"card shadow-sm"},[M("div",{class:"card-body"},[M("h2",{class:"h5 mb-3"},"Conclusion"),M("p",null,"La restauration de figures :"),M("ul",null,[M("li",null,"est une source de problèmes adaptés à différents niveaux,"),M("li",null,"permet d'introduire des notions géométriques progressivement,"),M("li",null,"favorise le passage du dessin à la figure géométrique.")]),M("p",{class:"mb-0"}," Cette approche repose sur une progression graduelle à partir de la perception globale des figures vers une compréhension plus fine et plus abstraite de la géométrie. Le travail sur les restaurations, le choix des outils et le jeu sur les allers et retours entre figure modèle et amorce (prise d'informations, validation) favorisent l'appropriation des concepts géométriques fondamentaux. ")])],-1))])])])}}}),FL=yh(OL,[["__scopeId","data-v-2d930c55"]]),NL={},$L={class:"container py-5"};function BL(i,t){return wt(),xt("div",$L,t[0]||(t[0]=[yl('<h1 class="mb-4">Licence</h1><div class="row"><div class="col-12"><div class="card shadow-sm mb-4"><div class="card-body"><div class="text-center mb-4"><a href="https://creativecommons.org/licenses/by/4.0/deed.fr" target="_blank" rel="license"><img alt="Licence Creative Commons" style="border-width:0;" src="https://i.creativecommons.org/l/by/4.0/88x31.png"></a></div><p> Cet site est mis à disposition selon les termes de la <a href="https://creativecommons.org/licenses/by/4.0/deed.fr" target="_blank">Licence Creative Commons Attribution 4.0 International</a>. </p><h2 class="h5 mt-4 mb-3">Vous êtes autorisé à :</h2><ul><li><strong>Partager</strong> — copier, distribuer et communiquer le matériel par tous moyens et sous tous formats</li><li><strong>Adapter</strong> — remixer, transformer et créer à partir du matériel pour toute utilisation, y compris commerciale</li></ul><h2 class="h5 mt-4 mb-3">Selon les conditions suivantes :</h2><ul><li><strong>Attribution</strong> — Vous devez créditer l&#39;Œuvre, intégrer un lien vers la licence et indiquer si des modifications ont été effectuées à l&#39;Œuvre. Vous devez indiquer ces informations par tous les moyens raisonnables, sans toutefois suggérer que l&#39;Offrant vous soutient ou soutient la façon dont vous avez utilisé son Œuvre. </li><li><strong>Pas de restrictions complémentaires</strong> — Vous n&#39;êtes pas autorisé à appliquer des conditions légales ou des mesures techniques qui restreindraient légalement autrui à utiliser l&#39;Œuvre dans les conditions décrites par la licence. </li></ul><h2 class="h5 mt-4 mb-3">Notes :</h2><ul><li>Vous n&#39;êtes pas dans l&#39;obligation de respecter la licence pour les éléments ou matériel appartenant au domaine public ou dans le cas où l&#39;utilisation que vous souhaitez faire est couverte par une exception.</li><li>Aucune garantie n&#39;est donnée. Il se peut que la licence ne vous donne pas toutes les permissions nécessaires pour votre utilisation. Par exemple, certains droits comme les droits moraux, le droit des données personnelles et le droit à l&#39;image sont susceptibles de limiter votre utilisation.</li></ul></div></div></div></div>',2)]))}const HL=yh(NL,[["render",BL]]),jL="/RestFigBank/assets/gabarit%20-%20exemple%201-C-Ja61j1.png",VL="/RestFigBank/assets/gabarit%20-%20exemple%202-DXucNH3D.png",UL="/RestFigBank/assets/gabarit%20-%20exemple%203-Chh1wVgl.png",zL="/RestFigBank/assets/gabarit%20-%20exemple%204-coP-T9cZ.png",WL="/RestFigBank/assets/gabarit%20-%20exemple%205-DNmuAQBx.png",qL="/RestFigBank/assets/gabarit%20-%20exemple%206-DlwugcoY.png",GL="/RestFigBank/assets/gabarit%20-%20exemple%207-Dp8Txuq7.png",XL="/RestFigBank/assets/gabarit%20-%20exemple%208-Cnvk_vqU.png",KL="/RestFigBank/assets/gabarit%20-%20exemple%209-DqUNh1K1.png",YL="/RestFigBank/assets/gabarit%20-%20exemple%204-coP-T9cZ.png",QL="/RestFigBank/assets/Regle-non-informable-RR3Hikmg.png",JL="/RestFigBank/assets/equerre1-DydbFGJ7.png",ZL="/RestFigBank/assets/equerre2-CLCdw-J7.png",tM="/RestFigBank/assets/compas-CoSNoTS8.png",eM="/RestFigBank/assets/ficelle-CEbd2ffs.png",sM="/RestFigBank/assets/pochoir-CMD66YVv.png",iM={class:"container py-5"},nM={class:"text-center mb-5"},rM={class:"row g-4"},oM={class:"col-md-6"},aM={class:"card h-100"},lM=["src"],cM={class:"col-md-6"},hM={class:"card h-100"},uM={class:"row g-0 p-3 justify-content-center"},dM={class:"col-4"},fM=["src"],pM={class:"col-4"},gM=["src"],mM={class:"col-md-6"},bM={class:"card h-100"},vM={class:"row g-0 p-3 justify-content-center"},_M={class:"col-6"},yM=["src"],wM={class:"col-12"},AM={class:"card h-100"},EM={class:"card-body"},SM={class:"row g-4"},xM=["src","alt"],CM={class:"col-md-6"},TM={class:"card h-100"},PM={class:"row g-0 p-3 justify-content-center"},RM={class:"col-8"},kM=["src"],IM={class:"col-md-6"},LM={class:"card h-100"},MM={class:"row g-0 p-3 justify-content-center"},DM={class:"col-8"},OM=["src"],FM=Vr({__name:"InstrumentsView",setup(i){const t=Array.from({length:9},(e,s)=>new URL(Object.assign({"../assets/tools-img/gabarit - exemple 1.png":jL,"../assets/tools-img/gabarit - exemple 2.png":VL,"../assets/tools-img/gabarit - exemple 3.png":UL,"../assets/tools-img/gabarit - exemple 4.png":zL,"../assets/tools-img/gabarit - exemple 5.png":WL,"../assets/tools-img/gabarit - exemple 6.png":qL,"../assets/tools-img/gabarit - exemple 7.png":GL,"../assets/tools-img/gabarit - exemple 8.png":XL,"../assets/tools-img/gabarit - exemple 9.png":KL})[`../assets/tools-img/gabarit - exemple ${s+1}.png`],import.meta.url).href);return(e,s)=>{const n=fv("RouterLink");return wt(),xt("div",iM,[s[10]||(s[10]=M("h1",{class:"text-center mb-3"},"Les instruments de géométrie en restauration de figures",-1)),M("div",nM,[Te(n,{to:"/mode-emploi",class:"text-decoration-none",target:"_blank"},{default:$o(()=>s[0]||(s[0]=[Le(" 👉 En savoir plus sur la restauration de figures ")])),_:1,__:[0]})]),M("div",rM,[M("div",oM,[M("div",aM,[M("img",{src:je(QL),class:"card-img-top p-3",alt:"Règle non informable"},null,8,lM),s[1]||(s[1]=M("div",{class:"card-body"},[M("h5",{class:"card-title"},"Règle non informable (RNI)"),M("p",{class:"card-text"},[Le(" Une règle non informable est une règle sans graduation, avec un seul bord utile et sur laquelle on ne peut pas écrire et ni reporter de marque."),M("br"),Le(" Elle permet uniquement de tracer des lignes droites et de vérifier l'alignement de points. Elle ne permet pas de mesurer des longueurs. ")]),M("p",null,[M("em",null,"On peut fabriquer des RNI avec des intercalaires transparentes en plastique souple.")])],-1))])]),s[8]||(s[8]=yl('<div class="col-md-6" data-v-eb5be388><div class="card h-100" data-v-eb5be388><div class="card-body" data-v-eb5be388><h5 class="card-title" data-v-eb5be388>Règle informable (RI)</h5><p class="card-text" data-v-eb5be388> Une règle informable est une règle sans graduation, avec un seul bord utile sur laquelle on reporter des marques.<br data-v-eb5be388> Elle permet de tracer des lignes droites et de vérifier l&#39;alignement de points. Elle permet de reporter et comparer des longueurs. </p><p data-v-eb5be388><em data-v-eb5be388>On peut fabriquer des RI avec des intercalaires transparentes en carton.</em></p></div></div></div>',1)),M("div",cM,[M("div",hM,[M("div",uM,[M("div",dM,[M("img",{src:je(JL),class:"img-fluid rounded equerre-img",alt:"Équerre 1"},null,8,fM)]),M("div",pM,[M("img",{src:je(ZL),class:"img-fluid rounded equerre-img",alt:"Équerre 2"},null,8,gM)])]),s[2]||(s[2]=M("div",{class:"card-body"},[M("h5",{class:"card-title"},"Équerre"),M("p",{class:"card-text"}," L'équerre permet de tracer des angles droits (90°) et de vérifier la perpendicularité entre deux droites. ")],-1))])]),M("div",mM,[M("div",bM,[M("div",vM,[M("div",_M,[M("img",{src:je(tM),class:"img-fluid rounded tool-img",alt:"Compas"},null,8,yM)])]),s[3]||(s[3]=M("div",{class:"card-body"},[M("h5",{class:"card-title"},"Compas"),M("p",{class:"card-text"}," Le compas permet de tracer des cercles et des arcs de cercle. Il permet aussi de reporter des distances et de comparer des longueurs. ")],-1))])]),M("div",wM,[M("div",AM,[M("div",EM,[s[4]||(s[4]=M("h5",{class:"card-title"},"Gabarit",-1)),s[5]||(s[5]=M("p",{class:"card-text mb-4"}," Le gabarit est un modèle qui permet de reproduire des formes géométriques spécifiques. Il est particulièrement utile pour tracer des formes complexes ou répétitives. Voici quelques exemples de gabarits utilisés dans les exercices : ",-1)),M("div",SM,[(wt(!0),xt(We,null,wn(je(t),(r,o)=>(wt(),xt("div",{class:"col-md-2 col-sm-3 col-4",key:o},[M("img",{src:r,alt:`Exemple de gabarit ${o+1}`,class:"img-fluid rounded shadow-sm gabarit-img"},null,8,xM)]))),128))])])])]),s[9]||(s[9]=yl('<div class="col-md-6" data-v-eb5be388><div class="card h-100" data-v-eb5be388><div class="row g-0 p-3 justify-content-center" data-v-eb5be388><div class="col-6" data-v-eb5be388><img src="'+YL+'" class="img-fluid rounded tool-img" alt="Gabarit angle droit" data-v-eb5be388></div></div><div class="card-body" data-v-eb5be388><h5 class="card-title" data-v-eb5be388>Gabarit angle droit</h5><p class="card-text" data-v-eb5be388> Le gabarit d&#39;angle droit est un outil qui permet de vérifier ou de tracer des angles droits. </p><p data-v-eb5be388><em data-v-eb5be388>On peut fabriquer gabarit d&#39;angle droit en pliant une feuille A4 en deux selon une diagonale, puis encore en deux.</em></p></div></div></div><div class="col-md-6" data-v-eb5be388><div class="card h-100" data-v-eb5be388><div class="card-body" data-v-eb5be388><h5 class="card-title" data-v-eb5be388>Bande de papier</h5><p class="card-text" data-v-eb5be388> La bande de papier permet de comparer des longueurs, de reporter des longueurs et elle peut être utilisée par pliage pour construire des milieux. </p></div></div></div>',2)),M("div",CM,[M("div",TM,[M("div",PM,[M("div",RM,[M("img",{src:je(eM),class:"img-fluid rounded ficelle-img",alt:"Ficelle"},null,8,kM)])]),s[6]||(s[6]=M("div",{class:"card-body"},[M("h5",{class:"card-title"},"Ficelle"),M("p",{class:"card-text"}," La ficelle permet de vérifier les alignements. ")],-1))])]),M("div",IM,[M("div",LM,[M("div",MM,[M("div",DM,[M("img",{src:je(sM),class:"img-fluid rounded pochoir-img",alt:"Pochoir"},null,8,OM)])]),s[7]||(s[7]=M("div",{class:"card-body"},[M("h5",{class:"card-title"},"Pochoir"),M("p",{class:"card-text"},` Le pochoir est un gabarit "en creux". Il permet d'analyser la figure modèle et de restaurer la figure en examinant différemment "l'empreinte" de la figure. `)],-1))])])])])}}}),NM=yh(FM,[["__scopeId","data-v-eb5be388"]]),$M="/RestFigBank/assets/img-trapeze-cercle-BdWke2bp.png",BM={class:"container py-5"},HM={class:"row"},jM={class:"col-12"},VM={class:"card shadow-sm mb-4"},UM={class:"card-body"},zM={class:"bg-light p-4 rounded mb-4 position-relative"},WM={key:0},qM={key:1},GM={class:"position-relative"},XM={key:0,class:"text-danger mt-2 small"},KM=Vr({__name:"ContributeView",setup(i){const t=ae(!1),e=ae(""),s=ae(""),n=ae(""),r=ae(""),o=ae(!1),a=ae(0),c=ae(0),h=ae(null);let u=null;const f={id:"trapeze-cercle",title:"Trapèze et cercle",description:"Restauration d'une figure combinant trapèze et cercle",path:"/pdfs/Trapeze-cercle.pdf",level:["CM2","6EME"],vision:["Ligne","Point"],instruments:["Compas","Règle non informable","Équerre","Gabarit angle droit"],withCost:!1,isScaled:!1,hasRotation:!1,withoutAmorce:!1,tags:["trapèze","cercle","centre"],source_url:"https://lea-geometrie.etab.ac-lille.fr/",source_url_title:"LéA géométrie"},p={id:"Identifiant unique de la situation (en minuscules, sans espaces ni caractères spéciaux)",title:"Titre de la situation tel qu'il apparaîtra dans l'interface",description:"Brève description de la situation",path:"Chemin vers le fichier PDF dans le dossier public (/pdfs/nom-du-fichier.pdf)",level:"Liste des niveaux concernés (CE1, CE2, CM1, CM2, 6EME, 5EME)",vision:"Liste des types de vision géométrique (Surface, Ligne, Point)",instruments:"Liste des instruments autorisés (Ficelle, Règle non informable, Règle informable, etc.)",withCost:"Indique si la situation inclut des coûts (true/false)",isScaled:"Indique si l'amorce n'est pas à l'échelle (true/false)",hasRotation:"La figure amorce a subit une rotation par rapport à la figure modèle (true/false)",withoutAmorce:"Avec ou sans amorce - Sans amorce, il s'agit d'une reproduction (true/false)",tags:"Liste de mots-clés pour faciliter la recherche",source_url:"URL de la source (optionnel)",source_url_title:"Titre de la source à afficher (optionnel)"},g=(C,T=2)=>JSON.stringify(C,null,T).replace(/^(\s{2}"[^"]+": \[)([\s\S]*?)(\n\s{2}\])/gm,(L,O,I,D)=>{const B=I.replace(/\n\s{4}/g," ").trim();return`${O}${B}${D}`}).replace(/\n\s{2}],/g,"],");ag(()=>{s.value=g(f)});const _=()=>{try{JSON.parse(s.value),e.value=""}catch{e.value="JSON invalide"}},v=async()=>{try{const C=JSON.parse(s.value),T=g(C);await navigator.clipboard.writeText(T),t.value=!0,setTimeout(()=>{t.value=!1},2e3)}catch{e.value="Impossible de copier : JSON invalide"}},x=C=>{if(!h.value)return;const T=h.value.getBoundingClientRect(),R=h.value.scrollTop,L=h.value.value;h.value.selectionStart,C.clientX-T.left;const O=C.clientY-T.top+R,I=L.split(`
`);let D="",B=0;const K=24;for(let bt=0;bt<I.length;bt++){if(B<=O&&O<=B+K){D=I[bt];break}B+=K}const Q=/"([^"]+)"\s*:/.exec(D);if(Q){const bt=Q[1],yt=p[bt];yt?(u&&clearTimeout(u),r.value=bt,n.value=yt,o.value=!0,a.value=C.clientX-T.left+10,c.value=C.clientY-T.top-20,u=window.setTimeout(()=>{S(),u=null},1500)):S()}else S()},S=()=>{o.value=!1,r.value="",u&&(clearTimeout(u),u=null)};return(C,T)=>(wt(),xt("div",BM,[T[4]||(T[4]=M("h1",{class:"mb-4"},"Comment contribuer ?",-1)),M("div",HM,[M("div",jM,[M("div",VM,[M("div",UM,[T[2]||(T[2]=M("p",{class:"lead"}," Pour ajouter une nouvelle situation à la bibliothèque, vous devez fournir un fichier PDF et ses métadonnées au format JSON. Voici la structure à suivre, illustrée par un exemple que vous pouvez modifier : ",-1)),M("div",zM,[M("button",{class:_h(["btn btn-sm btn-outline-primary position-absolute top-0 end-0 m-2",{"btn-success":t.value}]),onClick:v},[t.value?(wt(),xt("span",qM,"Copié !")):(wt(),xt("span",WM,"Copier"))],2),M("div",GM,[tr(M("textarea",{"onUpdate:modelValue":T[0]||(T[0]=R=>s.value=R),class:"form-control code-editor",rows:"20",spellcheck:"false",onInput:_,onMousemove:x,onMouseout:S,ref_key:"textarea",ref:h},null,544),[[jT,s.value]]),o.value?(wt(),xt("div",{key:0,class:"custom-tooltip",style:sg({top:c.value+"px",left:a.value+"px"})},[M("strong",null,ke(r.value),1),Le(" : "+ke(n.value),1)],4)):hs("",!0)]),e.value?(wt(),xt("div",XM,[T[1]||(T[1]=M("i",{class:"bi bi-exclamation-triangle"},null,-1)),Le(" "+ke(e.value),1)])):hs("",!0)]),T[3]||(T[3]=yl('<div class="mt-4" data-v-f6b8a5b1><div class="text-center" data-v-f6b8a5b1><img src="'+$M+'" alt="Exemple : Trapèze et cercle" class="img-fluid rounded shadow-sm half-size" data-v-f6b8a5b1></div></div><h2 class="h5 mt-4 mb-3" data-v-f6b8a5b1>Description des champs :</h2><ul class="list-group list-group-flush" data-v-f6b8a5b1><li class="list-group-item" data-v-f6b8a5b1><strong data-v-f6b8a5b1>id</strong> : Identifiant unique de la situation (en minuscules, sans espaces ni caractères spéciaux) </li><li class="list-group-item" data-v-f6b8a5b1><strong data-v-f6b8a5b1>title</strong> : Titre de la situation tel qu&#39;il apparaîtra dans l&#39;interface </li><li class="list-group-item" data-v-f6b8a5b1><strong data-v-f6b8a5b1>description</strong> : Brève description de la situation </li><li class="list-group-item" data-v-f6b8a5b1><strong data-v-f6b8a5b1>path</strong> : Chemin vers le fichier PDF dans le dossier public (/pdfs/nom-du-fichier.pdf) </li><li class="list-group-item" data-v-f6b8a5b1><strong data-v-f6b8a5b1>level</strong> : Liste des niveaux concernés. Valeurs possibles : <ul class="mt-2" data-v-f6b8a5b1><li data-v-f6b8a5b1>CE1</li><li data-v-f6b8a5b1>CE2</li><li data-v-f6b8a5b1>CM1</li><li data-v-f6b8a5b1>CM2</li><li data-v-f6b8a5b1>6EME</li><li data-v-f6b8a5b1>5EME</li></ul></li><li class="list-group-item" data-v-f6b8a5b1><strong data-v-f6b8a5b1>vision</strong> : Liste des types de vision géométrique. Valeurs possibles : <ul class="mt-2" data-v-f6b8a5b1><li data-v-f6b8a5b1>Surface</li><li data-v-f6b8a5b1>Ligne</li><li data-v-f6b8a5b1>Point</li></ul></li><li class="list-group-item" data-v-f6b8a5b1><strong data-v-f6b8a5b1>instruments</strong> : Liste des instruments autorisés. Valeurs possibles : <ul class="mt-2" data-v-f6b8a5b1><li data-v-f6b8a5b1>Ficelle</li><li data-v-f6b8a5b1>Règle non informable</li><li data-v-f6b8a5b1>Règle informable</li><li data-v-f6b8a5b1>Bande de papier</li><li data-v-f6b8a5b1>Compas</li><li data-v-f6b8a5b1>Gabarit angle droit</li><li data-v-f6b8a5b1>Équerre</li><li data-v-f6b8a5b1>Autre gabarit</li><li data-v-f6b8a5b1>Pochoir</li></ul></li><li class="list-group-item" data-v-f6b8a5b1><strong data-v-f6b8a5b1>withCost</strong> : Indique si la situation inclut des coûts (true/false) </li><li class="list-group-item" data-v-f6b8a5b1><strong data-v-f6b8a5b1>isScaled</strong> : Indique si l&#39;amorce n&#39;est pas à l&#39;échelle (true/false) </li><li class="list-group-item" data-v-f6b8a5b1><strong data-v-f6b8a5b1>hasRotation</strong> : La figure amorce a subit une rotation par rapport à la figure modèle (true/false) </li><li class="list-group-item" data-v-f6b8a5b1><strong data-v-f6b8a5b1>withoutAmorce</strong> : Avec ou sans amorce - Sans amorce, il s&#39;agit d&#39;une reproduction (true/false) </li><li class="list-group-item" data-v-f6b8a5b1><strong data-v-f6b8a5b1>tags</strong> : Liste de mots-clés pour faciliter la recherche </li><li class="list-group-item" data-v-f6b8a5b1><strong data-v-f6b8a5b1>source_url</strong> : URL de la source (optionnel) </li><li class="list-group-item" data-v-f6b8a5b1><strong data-v-f6b8a5b1>source_url_title</strong> : Titre de la source à afficher (optionnel) </li></ul><h2 class="h5 mt-4 mb-3" data-v-f6b8a5b1>Comment l&#39;envoyer ?</h2><ol data-v-f6b8a5b1><li data-v-f6b8a5b1>Votre fichier PDF doit contenir une ou deux pages : <ul data-v-f6b8a5b1><li data-v-f6b8a5b1>la première page est la situation avec la figure modèle et l&#39;amorce.</li><li data-v-f6b8a5b1>La deuxième (optionnelle) donne les outils nécessaires à la situation.</li></ul></li><li data-v-f6b8a5b1>Envoyer copier le json dans un mail, joindre le PDF et envoyer à <a href="mailto:restfigbankupload@gmail.com" target="_blank" data-v-f6b8a5b1>restfigbankupload@gmail.com</a></li></ol>',5))])])])])]))}}),YM=yh(KM,[["__scopeId","data-v-f6b8a5b1"]]),QM=sR({history:MP("/RestFigBank/"),routes:[{path:"/",name:"home",component:wL},{path:"/about",name:"about",component:()=>gL(()=>import("./AboutView-BiB-7ZFQ.js"),__vite__mapDeps([0,1]))},{path:"/mode-emploi",name:"howto",component:FL},{path:"/licence",name:"license",component:HL},{path:"/instruments",name:"instruments",component:NM},{path:"/contribuer",name:"contribute",component:YM}]}),Lv=WT(dL);Lv.use(XT());Lv.use(QM);Lv.mount("#app");export{yh as _,M as a,xt as c,wt as o};
