const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AboutView-CVXPuyns.js","assets/AboutView-CSIvawM9.css"])))=>i.map(i=>d[i]);
var D1=Object.defineProperty;var Ey=i=>{throw TypeError(i)};var O1=(i,t,e)=>t in i?D1(i,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):i[t]=e;var Z=(i,t,e)=>O1(i,typeof t!="symbol"?t+"":t,e),cm=(i,t,e)=>t.has(i)||Ey("Cannot "+e);var a=(i,t,e)=>(cm(i,t,"read from private field"),e?e.call(i):t.get(i)),w=(i,t,e)=>t.has(i)?Ey("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(i):t.set(i,e),b=(i,t,e,s)=>(cm(i,t,"write to private field"),s?s.call(i,e):t.set(i,e),e),A=(i,t,e)=>(cm(i,t,"access private method"),e);var Bs=(i,t,e,s)=>({set _(n){b(i,t,n,e)},get _(){return a(i,t,s)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))s(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function e(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(n){if(n.ep)return;n.ep=!0;const r=e(n);fetch(n.href,r)}})();var jf={exports:{}};/*!
  * Bootstrap v5.3.6 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var N1=jf.exports,Sy;function F1(){return Sy||(Sy=1,function(i,t){(function(e,s){i.exports=s()})(N1,function(){const e=new Map,s={set(y,d,m){e.has(y)||e.set(y,new Map);const x=e.get(y);x.has(d)||x.size===0?x.set(d,m):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(x.keys())[0]}.`)},get:(y,d)=>e.has(y)&&e.get(y).get(d)||null,remove(y,d){if(!e.has(y))return;const m=e.get(y);m.delete(d),m.size===0&&e.delete(y)}},n="transitionend",r=y=>(y&&window.CSS&&window.CSS.escape&&(y=y.replace(/#([^\s"#']+)/g,(d,m)=>`#${CSS.escape(m)}`)),y),o=y=>{y.dispatchEvent(new Event(n))},l=y=>!(!y||typeof y!="object")&&(y.jquery!==void 0&&(y=y[0]),y.nodeType!==void 0),c=y=>l(y)?y.jquery?y[0]:y:typeof y=="string"&&y.length>0?document.querySelector(r(y)):null,h=y=>{if(!l(y)||y.getClientRects().length===0)return!1;const d=getComputedStyle(y).getPropertyValue("visibility")==="visible",m=y.closest("details:not([open])");if(!m)return d;if(m!==y){const x=y.closest("summary");if(x&&x.parentNode!==m||x===null)return!1}return d},u=y=>!y||y.nodeType!==Node.ELEMENT_NODE||!!y.classList.contains("disabled")||(y.disabled!==void 0?y.disabled:y.hasAttribute("disabled")&&y.getAttribute("disabled")!=="false"),f=y=>{if(!document.documentElement.attachShadow)return null;if(typeof y.getRootNode=="function"){const d=y.getRootNode();return d instanceof ShadowRoot?d:null}return y instanceof ShadowRoot?y:y.parentNode?f(y.parentNode):null},p=()=>{},g=y=>{y.offsetHeight},_=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,v=[],E=()=>document.documentElement.dir==="rtl",S=y=>{var d;d=()=>{const m=_();if(m){const x=y.NAME,D=m.fn[x];m.fn[x]=y.jQueryInterface,m.fn[x].Constructor=y,m.fn[x].noConflict=()=>(m.fn[x]=D,y.jQueryInterface)}},document.readyState==="loading"?(v.length||document.addEventListener("DOMContentLoaded",()=>{for(const m of v)m()}),v.push(d)):d()},C=(y,d=[],m=y)=>typeof y=="function"?y.call(...d):m,T=(y,d,m=!0)=>{if(!m)return void C(y);const x=(j=>{if(!j)return 0;let{transitionDuration:G,transitionDelay:nt}=window.getComputedStyle(j);const dt=Number.parseFloat(G),gt=Number.parseFloat(nt);return dt||gt?(G=G.split(",")[0],nt=nt.split(",")[0],1e3*(Number.parseFloat(G)+Number.parseFloat(nt))):0})(d)+5;let D=!1;const O=({target:j})=>{j===d&&(D=!0,d.removeEventListener(n,O),C(y))};d.addEventListener(n,O),setTimeout(()=>{D||o(d)},x)},R=(y,d,m,x)=>{const D=y.length;let O=y.indexOf(d);return O===-1?!m&&x?y[D-1]:y[0]:(O+=m?1:-1,x&&(O=(O+D)%D),y[Math.max(0,Math.min(O,D-1))])},I=/[^.]*(?=\..*)\.|.*/,F=/\..*/,N=/::\d+$/,H={};let U=1;const Q={mouseenter:"mouseover",mouseleave:"mouseout"},tt=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function Et(y,d){return d&&`${d}::${U++}`||y.uidEvent||U++}function wt(y){const d=Et(y);return y.uidEvent=d,H[d]=H[d]||{},H[d]}function Rt(y,d,m=null){return Object.values(y).find(x=>x.callable===d&&x.delegationSelector===m)}function oe(y,d,m){const x=typeof d=="string",D=x?m:d||m;let O=Y(y);return tt.has(O)||(O=y),[x,D,O]}function J(y,d,m,x,D){if(typeof d!="string"||!y)return;let[O,j,G]=oe(d,m,x);d in Q&&(j=(Mt=>function(It){if(!It.relatedTarget||It.relatedTarget!==It.delegateTarget&&!It.delegateTarget.contains(It.relatedTarget))return Mt.call(this,It)})(j));const nt=wt(y),dt=nt[G]||(nt[G]={}),gt=Rt(dt,j,O?m:null);if(gt)return void(gt.oneOff=gt.oneOff&&D);const ct=Et(j,d.replace(I,"")),Bt=O?function(kt,Mt,It){return function Lt(ue){const ye=kt.querySelectorAll(Mt);for(let{target:Vt}=ue;Vt&&Vt!==this;Vt=Vt.parentNode)for(const ee of ye)if(ee===Vt)return bt(ue,{delegateTarget:Vt}),Lt.oneOff&&L.off(kt,ue.type,Mt,It),It.apply(Vt,[ue])}}(y,m,j):function(kt,Mt){return function It(Lt){return bt(Lt,{delegateTarget:kt}),It.oneOff&&L.off(kt,Lt.type,Mt),Mt.apply(kt,[Lt])}}(y,j);Bt.delegationSelector=O?m:null,Bt.callable=j,Bt.oneOff=D,Bt.uidEvent=ct,dt[ct]=Bt,y.addEventListener(G,Bt,O)}function X(y,d,m,x,D){const O=Rt(d[m],x,D);O&&(y.removeEventListener(m,O,!!D),delete d[m][O.uidEvent])}function et(y,d,m,x){const D=d[m]||{};for(const[O,j]of Object.entries(D))O.includes(x)&&X(y,d,m,j.callable,j.delegationSelector)}function Y(y){return y=y.replace(F,""),Q[y]||y}const L={on(y,d,m,x){J(y,d,m,x,!1)},one(y,d,m,x){J(y,d,m,x,!0)},off(y,d,m,x){if(typeof d!="string"||!y)return;const[D,O,j]=oe(d,m,x),G=j!==d,nt=wt(y),dt=nt[j]||{},gt=d.startsWith(".");if(O===void 0){if(gt)for(const ct of Object.keys(nt))et(y,nt,ct,d.slice(1));for(const[ct,Bt]of Object.entries(dt)){const kt=ct.replace(N,"");G&&!d.includes(kt)||X(y,nt,j,Bt.callable,Bt.delegationSelector)}}else{if(!Object.keys(dt).length)return;X(y,nt,j,O,D?m:null)}},trigger(y,d,m){if(typeof d!="string"||!y)return null;const x=_();let D=null,O=!0,j=!0,G=!1;d!==Y(d)&&x&&(D=x.Event(d,m),x(y).trigger(D),O=!D.isPropagationStopped(),j=!D.isImmediatePropagationStopped(),G=D.isDefaultPrevented());const nt=bt(new Event(d,{bubbles:O,cancelable:!0}),m);return G&&nt.preventDefault(),j&&y.dispatchEvent(nt),nt.defaultPrevented&&D&&D.preventDefault(),nt}};function bt(y,d={}){for(const[m,x]of Object.entries(d))try{y[m]=x}catch{Object.defineProperty(y,m,{configurable:!0,get:()=>x})}return y}function Ct(y){if(y==="true")return!0;if(y==="false")return!1;if(y===Number(y).toString())return Number(y);if(y===""||y==="null")return null;if(typeof y!="string")return y;try{return JSON.parse(decodeURIComponent(y))}catch{return y}}function Wt(y){return y.replace(/[A-Z]/g,d=>`-${d.toLowerCase()}`)}const xe={setDataAttribute(y,d,m){y.setAttribute(`data-bs-${Wt(d)}`,m)},removeDataAttribute(y,d){y.removeAttribute(`data-bs-${Wt(d)}`)},getDataAttributes(y){if(!y)return{};const d={},m=Object.keys(y.dataset).filter(x=>x.startsWith("bs")&&!x.startsWith("bsConfig"));for(const x of m){let D=x.replace(/^bs/,"");D=D.charAt(0).toLowerCase()+D.slice(1),d[D]=Ct(y.dataset[x])}return d},getDataAttribute:(y,d)=>Ct(y.getAttribute(`data-bs-${Wt(d)}`))};class Be{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(d){return d=this._mergeConfigObj(d),d=this._configAfterMerge(d),this._typeCheckConfig(d),d}_configAfterMerge(d){return d}_mergeConfigObj(d,m){const x=l(m)?xe.getDataAttribute(m,"config"):{};return{...this.constructor.Default,...typeof x=="object"?x:{},...l(m)?xe.getDataAttributes(m):{},...typeof d=="object"?d:{}}}_typeCheckConfig(d,m=this.constructor.DefaultType){for(const[D,O]of Object.entries(m)){const j=d[D],G=l(j)?"element":(x=j)==null?`${x}`:Object.prototype.toString.call(x).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(O).test(G))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${D}" provided type "${G}" but expected type "${O}".`)}var x}}class Xt extends Be{constructor(d,m){super(),(d=c(d))&&(this._element=d,this._config=this._getConfig(m),s.set(this._element,this.constructor.DATA_KEY,this))}dispose(){s.remove(this._element,this.constructor.DATA_KEY),L.off(this._element,this.constructor.EVENT_KEY);for(const d of Object.getOwnPropertyNames(this))this[d]=null}_queueCallback(d,m,x=!0){T(d,m,x)}_getConfig(d){return d=this._mergeConfigObj(d,this._element),d=this._configAfterMerge(d),this._typeCheckConfig(d),d}static getInstance(d){return s.get(c(d),this.DATA_KEY)}static getOrCreateInstance(d,m={}){return this.getInstance(d)||new this(d,typeof m=="object"?m:null)}static get VERSION(){return"5.3.6"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(d){return`${d}${this.EVENT_KEY}`}}const B=y=>{let d=y.getAttribute("data-bs-target");if(!d||d==="#"){let m=y.getAttribute("href");if(!m||!m.includes("#")&&!m.startsWith("."))return null;m.includes("#")&&!m.startsWith("#")&&(m=`#${m.split("#")[1]}`),d=m&&m!=="#"?m.trim():null}return d?d.split(",").map(m=>r(m)).join(","):null},V={find:(y,d=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(d,y)),findOne:(y,d=document.documentElement)=>Element.prototype.querySelector.call(d,y),children:(y,d)=>[].concat(...y.children).filter(m=>m.matches(d)),parents(y,d){const m=[];let x=y.parentNode.closest(d);for(;x;)m.push(x),x=x.parentNode.closest(d);return m},prev(y,d){let m=y.previousElementSibling;for(;m;){if(m.matches(d))return[m];m=m.previousElementSibling}return[]},next(y,d){let m=y.nextElementSibling;for(;m;){if(m.matches(d))return[m];m=m.nextElementSibling}return[]},focusableChildren(y){const d=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(m=>`${m}:not([tabindex^="-"])`).join(",");return this.find(d,y).filter(m=>!u(m)&&h(m))},getSelectorFromElement(y){const d=B(y);return d&&V.findOne(d)?d:null},getElementFromSelector(y){const d=B(y);return d?V.findOne(d):null},getMultipleElementsFromSelector(y){const d=B(y);return d?V.find(d):[]}},st=(y,d="hide")=>{const m=`click.dismiss${y.EVENT_KEY}`,x=y.NAME;L.on(document,m,`[data-bs-dismiss="${x}"]`,function(D){if(["A","AREA"].includes(this.tagName)&&D.preventDefault(),u(this))return;const O=V.getElementFromSelector(this)||this.closest(`.${x}`);y.getOrCreateInstance(O)[d]()})},pt=".bs.alert",$t=`close${pt}`,P=`closed${pt}`;class k extends Xt{static get NAME(){return"alert"}close(){if(L.trigger(this._element,$t).defaultPrevented)return;this._element.classList.remove("show");const d=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,d)}_destroyElement(){this._element.remove(),L.trigger(this._element,P),this.dispose()}static jQueryInterface(d){return this.each(function(){const m=k.getOrCreateInstance(this);if(typeof d=="string"){if(m[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);m[d](this)}})}}st(k,"close"),S(k);const $='[data-bs-toggle="button"]';class z extends Xt{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(d){return this.each(function(){const m=z.getOrCreateInstance(this);d==="toggle"&&m[d]()})}}L.on(document,"click.bs.button.data-api",$,y=>{y.preventDefault();const d=y.target.closest($);z.getOrCreateInstance(d).toggle()}),S(z);const q=".bs.swipe",W=`touchstart${q}`,at=`touchmove${q}`,rt=`touchend${q}`,it=`pointerdown${q}`,K=`pointerup${q}`,St={endCallback:null,leftCallback:null,rightCallback:null},lt={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class _t extends Be{constructor(d,m){super(),this._element=d,d&&_t.isSupported()&&(this._config=this._getConfig(m),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return St}static get DefaultType(){return lt}static get NAME(){return"swipe"}dispose(){L.off(this._element,q)}_start(d){this._supportPointerEvents?this._eventIsPointerPenTouch(d)&&(this._deltaX=d.clientX):this._deltaX=d.touches[0].clientX}_end(d){this._eventIsPointerPenTouch(d)&&(this._deltaX=d.clientX-this._deltaX),this._handleSwipe(),C(this._config.endCallback)}_move(d){this._deltaX=d.touches&&d.touches.length>1?0:d.touches[0].clientX-this._deltaX}_handleSwipe(){const d=Math.abs(this._deltaX);if(d<=40)return;const m=d/this._deltaX;this._deltaX=0,m&&C(m>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(L.on(this._element,it,d=>this._start(d)),L.on(this._element,K,d=>this._end(d)),this._element.classList.add("pointer-event")):(L.on(this._element,W,d=>this._start(d)),L.on(this._element,at,d=>this._move(d)),L.on(this._element,rt,d=>this._end(d)))}_eventIsPointerPenTouch(d){return this._supportPointerEvents&&(d.pointerType==="pen"||d.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const xt=".bs.carousel",qt=".data-api",he="ArrowLeft",te="ArrowRight",Je="next",He="prev",ds="left",Ls="right",Zo=`slide${xt}`,Fl=`slid${xt}`,Ds=`keydown${xt}`,Pi=`mouseenter${xt}`,df=`mouseleave${xt}`,RS=`dragstart${xt}`,kS=`load${xt}${qt}`,IS=`click${xt}${qt}`,Xv="carousel",ff="active",Kv=".active",Yv=".carousel-item",MS=Kv+Yv,LS={[he]:Ls,[te]:ds},DS={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},OS={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class $l extends Xt{constructor(d,m){super(d,m),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=V.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===Xv&&this.cycle()}static get Default(){return DS}static get DefaultType(){return OS}static get NAME(){return"carousel"}next(){this._slide(Je)}nextWhenVisible(){!document.hidden&&h(this._element)&&this.next()}prev(){this._slide(He)}pause(){this._isSliding&&o(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?L.one(this._element,Fl,()=>this.cycle()):this.cycle())}to(d){const m=this._getItems();if(d>m.length-1||d<0)return;if(this._isSliding)return void L.one(this._element,Fl,()=>this.to(d));const x=this._getItemIndex(this._getActive());if(x===d)return;const D=d>x?Je:He;this._slide(D,m[d])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(d){return d.defaultInterval=d.interval,d}_addEventListeners(){this._config.keyboard&&L.on(this._element,Ds,d=>this._keydown(d)),this._config.pause==="hover"&&(L.on(this._element,Pi,()=>this.pause()),L.on(this._element,df,()=>this._maybeEnableCycle())),this._config.touch&&_t.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const m of V.find(".carousel-item img",this._element))L.on(m,RS,x=>x.preventDefault());const d={leftCallback:()=>this._slide(this._directionToOrder(ds)),rightCallback:()=>this._slide(this._directionToOrder(Ls)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new _t(this._element,d)}_keydown(d){if(/input|textarea/i.test(d.target.tagName))return;const m=LS[d.key];m&&(d.preventDefault(),this._slide(this._directionToOrder(m)))}_getItemIndex(d){return this._getItems().indexOf(d)}_setActiveIndicatorElement(d){if(!this._indicatorsElement)return;const m=V.findOne(Kv,this._indicatorsElement);m.classList.remove(ff),m.removeAttribute("aria-current");const x=V.findOne(`[data-bs-slide-to="${d}"]`,this._indicatorsElement);x&&(x.classList.add(ff),x.setAttribute("aria-current","true"))}_updateInterval(){const d=this._activeElement||this._getActive();if(!d)return;const m=Number.parseInt(d.getAttribute("data-bs-interval"),10);this._config.interval=m||this._config.defaultInterval}_slide(d,m=null){if(this._isSliding)return;const x=this._getActive(),D=d===Je,O=m||R(this._getItems(),x,D,this._config.wrap);if(O===x)return;const j=this._getItemIndex(O),G=ct=>L.trigger(this._element,ct,{relatedTarget:O,direction:this._orderToDirection(d),from:this._getItemIndex(x),to:j});if(G(Zo).defaultPrevented||!x||!O)return;const nt=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(j),this._activeElement=O;const dt=D?"carousel-item-start":"carousel-item-end",gt=D?"carousel-item-next":"carousel-item-prev";O.classList.add(gt),g(O),x.classList.add(dt),O.classList.add(dt),this._queueCallback(()=>{O.classList.remove(dt,gt),O.classList.add(ff),x.classList.remove(ff,gt,dt),this._isSliding=!1,G(Fl)},x,this._isAnimated()),nt&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return V.findOne(MS,this._element)}_getItems(){return V.find(Yv,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(d){return E()?d===ds?He:Je:d===ds?Je:He}_orderToDirection(d){return E()?d===He?ds:Ls:d===He?Ls:ds}static jQueryInterface(d){return this.each(function(){const m=$l.getOrCreateInstance(this,d);if(typeof d!="number"){if(typeof d=="string"){if(m[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);m[d]()}}else m.to(d)})}}L.on(document,IS,"[data-bs-slide], [data-bs-slide-to]",function(y){const d=V.getElementFromSelector(this);if(!d||!d.classList.contains(Xv))return;y.preventDefault();const m=$l.getOrCreateInstance(d),x=this.getAttribute("data-bs-slide-to");return x?(m.to(x),void m._maybeEnableCycle()):xe.getDataAttribute(this,"slide")==="next"?(m.next(),void m._maybeEnableCycle()):(m.prev(),void m._maybeEnableCycle())}),L.on(window,kS,()=>{const y=V.find('[data-bs-ride="carousel"]');for(const d of y)$l.getOrCreateInstance(d)}),S($l);const xh=".bs.collapse",NS=`show${xh}`,FS=`shown${xh}`,$S=`hide${xh}`,BS=`hidden${xh}`,HS=`click${xh}.data-api`,Ig="show",Bl="collapse",pf="collapsing",jS=`:scope .${Bl} .${Bl}`,Mg='[data-bs-toggle="collapse"]',VS={parent:null,toggle:!0},US={parent:"(null|element)",toggle:"boolean"};class Hl extends Xt{constructor(d,m){super(d,m),this._isTransitioning=!1,this._triggerArray=[];const x=V.find(Mg);for(const D of x){const O=V.getSelectorFromElement(D),j=V.find(O).filter(G=>G===this._element);O!==null&&j.length&&this._triggerArray.push(D)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return VS}static get DefaultType(){return US}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let d=[];if(this._config.parent&&(d=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(D=>D!==this._element).map(D=>Hl.getOrCreateInstance(D,{toggle:!1}))),d.length&&d[0]._isTransitioning||L.trigger(this._element,NS).defaultPrevented)return;for(const D of d)D.hide();const m=this._getDimension();this._element.classList.remove(Bl),this._element.classList.add(pf),this._element.style[m]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const x=`scroll${m[0].toUpperCase()+m.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(pf),this._element.classList.add(Bl,Ig),this._element.style[m]="",L.trigger(this._element,FS)},this._element,!0),this._element.style[m]=`${this._element[x]}px`}hide(){if(this._isTransitioning||!this._isShown()||L.trigger(this._element,$S).defaultPrevented)return;const d=this._getDimension();this._element.style[d]=`${this._element.getBoundingClientRect()[d]}px`,g(this._element),this._element.classList.add(pf),this._element.classList.remove(Bl,Ig);for(const m of this._triggerArray){const x=V.getElementFromSelector(m);x&&!this._isShown(x)&&this._addAriaAndCollapsedClass([m],!1)}this._isTransitioning=!0,this._element.style[d]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(pf),this._element.classList.add(Bl),L.trigger(this._element,BS)},this._element,!0)}_isShown(d=this._element){return d.classList.contains(Ig)}_configAfterMerge(d){return d.toggle=!!d.toggle,d.parent=c(d.parent),d}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const d=this._getFirstLevelChildren(Mg);for(const m of d){const x=V.getElementFromSelector(m);x&&this._addAriaAndCollapsedClass([m],this._isShown(x))}}_getFirstLevelChildren(d){const m=V.find(jS,this._config.parent);return V.find(d,this._config.parent).filter(x=>!m.includes(x))}_addAriaAndCollapsedClass(d,m){if(d.length)for(const x of d)x.classList.toggle("collapsed",!m),x.setAttribute("aria-expanded",m)}static jQueryInterface(d){const m={};return typeof d=="string"&&/show|hide/.test(d)&&(m.toggle=!1),this.each(function(){const x=Hl.getOrCreateInstance(this,m);if(typeof d=="string"){if(x[d]===void 0)throw new TypeError(`No method named "${d}"`);x[d]()}})}}L.on(document,HS,Mg,function(y){(y.target.tagName==="A"||y.delegateTarget&&y.delegateTarget.tagName==="A")&&y.preventDefault();for(const d of V.getMultipleElementsFromSelector(this))Hl.getOrCreateInstance(d,{toggle:!1}).toggle()}),S(Hl);var Os="top",ni="bottom",ri="right",Ns="left",gf="auto",jl=[Os,ni,ri,Ns],ta="start",Vl="end",Qv="clippingParents",Lg="viewport",Ul="popper",Jv="reference",Dg=jl.reduce(function(y,d){return y.concat([d+"-"+ta,d+"-"+Vl])},[]),Og=[].concat(jl,[gf]).reduce(function(y,d){return y.concat([d,d+"-"+ta,d+"-"+Vl])},[]),Zv="beforeRead",t_="read",e_="afterRead",s_="beforeMain",i_="main",n_="afterMain",r_="beforeWrite",o_="write",a_="afterWrite",l_=[Zv,t_,e_,s_,i_,n_,r_,o_,a_];function bn(y){return y?(y.nodeName||"").toLowerCase():null}function oi(y){if(y==null)return window;if(y.toString()!=="[object Window]"){var d=y.ownerDocument;return d&&d.defaultView||window}return y}function ea(y){return y instanceof oi(y).Element||y instanceof Element}function Ri(y){return y instanceof oi(y).HTMLElement||y instanceof HTMLElement}function Ng(y){return typeof ShadowRoot<"u"&&(y instanceof oi(y).ShadowRoot||y instanceof ShadowRoot)}const Fg={name:"applyStyles",enabled:!0,phase:"write",fn:function(y){var d=y.state;Object.keys(d.elements).forEach(function(m){var x=d.styles[m]||{},D=d.attributes[m]||{},O=d.elements[m];Ri(O)&&bn(O)&&(Object.assign(O.style,x),Object.keys(D).forEach(function(j){var G=D[j];G===!1?O.removeAttribute(j):O.setAttribute(j,G===!0?"":G)}))})},effect:function(y){var d=y.state,m={popper:{position:d.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(d.elements.popper.style,m.popper),d.styles=m,d.elements.arrow&&Object.assign(d.elements.arrow.style,m.arrow),function(){Object.keys(d.elements).forEach(function(x){var D=d.elements[x],O=d.attributes[x]||{},j=Object.keys(d.styles.hasOwnProperty(x)?d.styles[x]:m[x]).reduce(function(G,nt){return G[nt]="",G},{});Ri(D)&&bn(D)&&(Object.assign(D.style,j),Object.keys(O).forEach(function(G){D.removeAttribute(G)}))})}},requires:["computeStyles"]};function vn(y){return y.split("-")[0]}var sa=Math.max,mf=Math.min,zl=Math.round;function $g(){var y=navigator.userAgentData;return y!=null&&y.brands&&Array.isArray(y.brands)?y.brands.map(function(d){return d.brand+"/"+d.version}).join(" "):navigator.userAgent}function c_(){return!/^((?!chrome|android).)*safari/i.test($g())}function ql(y,d,m){d===void 0&&(d=!1),m===void 0&&(m=!1);var x=y.getBoundingClientRect(),D=1,O=1;d&&Ri(y)&&(D=y.offsetWidth>0&&zl(x.width)/y.offsetWidth||1,O=y.offsetHeight>0&&zl(x.height)/y.offsetHeight||1);var j=(ea(y)?oi(y):window).visualViewport,G=!c_()&&m,nt=(x.left+(G&&j?j.offsetLeft:0))/D,dt=(x.top+(G&&j?j.offsetTop:0))/O,gt=x.width/D,ct=x.height/O;return{width:gt,height:ct,top:dt,right:nt+gt,bottom:dt+ct,left:nt,x:nt,y:dt}}function Bg(y){var d=ql(y),m=y.offsetWidth,x=y.offsetHeight;return Math.abs(d.width-m)<=1&&(m=d.width),Math.abs(d.height-x)<=1&&(x=d.height),{x:y.offsetLeft,y:y.offsetTop,width:m,height:x}}function h_(y,d){var m=d.getRootNode&&d.getRootNode();if(y.contains(d))return!0;if(m&&Ng(m)){var x=d;do{if(x&&y.isSameNode(x))return!0;x=x.parentNode||x.host}while(x)}return!1}function Qn(y){return oi(y).getComputedStyle(y)}function zS(y){return["table","td","th"].indexOf(bn(y))>=0}function Gr(y){return((ea(y)?y.ownerDocument:y.document)||window.document).documentElement}function bf(y){return bn(y)==="html"?y:y.assignedSlot||y.parentNode||(Ng(y)?y.host:null)||Gr(y)}function u_(y){return Ri(y)&&Qn(y).position!=="fixed"?y.offsetParent:null}function Ch(y){for(var d=oi(y),m=u_(y);m&&zS(m)&&Qn(m).position==="static";)m=u_(m);return m&&(bn(m)==="html"||bn(m)==="body"&&Qn(m).position==="static")?d:m||function(x){var D=/firefox/i.test($g());if(/Trident/i.test($g())&&Ri(x)&&Qn(x).position==="fixed")return null;var O=bf(x);for(Ng(O)&&(O=O.host);Ri(O)&&["html","body"].indexOf(bn(O))<0;){var j=Qn(O);if(j.transform!=="none"||j.perspective!=="none"||j.contain==="paint"||["transform","perspective"].indexOf(j.willChange)!==-1||D&&j.willChange==="filter"||D&&j.filter&&j.filter!=="none")return O;O=O.parentNode}return null}(y)||d}function Hg(y){return["top","bottom"].indexOf(y)>=0?"x":"y"}function Th(y,d,m){return sa(y,mf(d,m))}function d_(y){return Object.assign({},{top:0,right:0,bottom:0,left:0},y)}function f_(y,d){return d.reduce(function(m,x){return m[x]=y,m},{})}const p_={name:"arrow",enabled:!0,phase:"main",fn:function(y){var d,m=y.state,x=y.name,D=y.options,O=m.elements.arrow,j=m.modifiersData.popperOffsets,G=vn(m.placement),nt=Hg(G),dt=[Ns,ri].indexOf(G)>=0?"height":"width";if(O&&j){var gt=function(de,le){return d_(typeof(de=typeof de=="function"?de(Object.assign({},le.rects,{placement:le.placement})):de)!="number"?de:f_(de,jl))}(D.padding,m),ct=Bg(O),Bt=nt==="y"?Os:Ns,kt=nt==="y"?ni:ri,Mt=m.rects.reference[dt]+m.rects.reference[nt]-j[nt]-m.rects.popper[dt],It=j[nt]-m.rects.reference[nt],Lt=Ch(O),ue=Lt?nt==="y"?Lt.clientHeight||0:Lt.clientWidth||0:0,ye=Mt/2-It/2,Vt=gt[Bt],ee=ue-ct[dt]-gt[kt],Ht=ue/2-ct[dt]/2+ye,Kt=Th(Vt,Ht,ee),ae=nt;m.modifiersData[x]=((d={})[ae]=Kt,d.centerOffset=Kt-Ht,d)}},effect:function(y){var d=y.state,m=y.options.element,x=m===void 0?"[data-popper-arrow]":m;x!=null&&(typeof x!="string"||(x=d.elements.popper.querySelector(x)))&&h_(d.elements.popper,x)&&(d.elements.arrow=x)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Wl(y){return y.split("-")[1]}var qS={top:"auto",right:"auto",bottom:"auto",left:"auto"};function g_(y){var d,m=y.popper,x=y.popperRect,D=y.placement,O=y.variation,j=y.offsets,G=y.position,nt=y.gpuAcceleration,dt=y.adaptive,gt=y.roundOffsets,ct=y.isFixed,Bt=j.x,kt=Bt===void 0?0:Bt,Mt=j.y,It=Mt===void 0?0:Mt,Lt=typeof gt=="function"?gt({x:kt,y:It}):{x:kt,y:It};kt=Lt.x,It=Lt.y;var ue=j.hasOwnProperty("x"),ye=j.hasOwnProperty("y"),Vt=Ns,ee=Os,Ht=window;if(dt){var Kt=Ch(m),ae="clientHeight",de="clientWidth";Kt===oi(m)&&Qn(Kt=Gr(m)).position!=="static"&&G==="absolute"&&(ae="scrollHeight",de="scrollWidth"),(D===Os||(D===Ns||D===ri)&&O===Vl)&&(ee=ni,It-=(ct&&Kt===Ht&&Ht.visualViewport?Ht.visualViewport.height:Kt[ae])-x.height,It*=nt?1:-1),D!==Ns&&(D!==Os&&D!==ni||O!==Vl)||(Vt=ri,kt-=(ct&&Kt===Ht&&Ht.visualViewport?Ht.visualViewport.width:Kt[de])-x.width,kt*=nt?1:-1)}var le,je=Object.assign({position:G},dt&&qS),ai=gt===!0?function(Xi,Fs){var Ii=Xi.x,Mi=Xi.y,Ne=Fs.devicePixelRatio||1;return{x:zl(Ii*Ne)/Ne||0,y:zl(Mi*Ne)/Ne||0}}({x:kt,y:It},oi(m)):{x:kt,y:It};return kt=ai.x,It=ai.y,nt?Object.assign({},je,((le={})[ee]=ye?"0":"",le[Vt]=ue?"0":"",le.transform=(Ht.devicePixelRatio||1)<=1?"translate("+kt+"px, "+It+"px)":"translate3d("+kt+"px, "+It+"px, 0)",le)):Object.assign({},je,((d={})[ee]=ye?It+"px":"",d[Vt]=ue?kt+"px":"",d.transform="",d))}const jg={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(y){var d=y.state,m=y.options,x=m.gpuAcceleration,D=x===void 0||x,O=m.adaptive,j=O===void 0||O,G=m.roundOffsets,nt=G===void 0||G,dt={placement:vn(d.placement),variation:Wl(d.placement),popper:d.elements.popper,popperRect:d.rects.popper,gpuAcceleration:D,isFixed:d.options.strategy==="fixed"};d.modifiersData.popperOffsets!=null&&(d.styles.popper=Object.assign({},d.styles.popper,g_(Object.assign({},dt,{offsets:d.modifiersData.popperOffsets,position:d.options.strategy,adaptive:j,roundOffsets:nt})))),d.modifiersData.arrow!=null&&(d.styles.arrow=Object.assign({},d.styles.arrow,g_(Object.assign({},dt,{offsets:d.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:nt})))),d.attributes.popper=Object.assign({},d.attributes.popper,{"data-popper-placement":d.placement})},data:{}};var vf={passive:!0};const Vg={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(y){var d=y.state,m=y.instance,x=y.options,D=x.scroll,O=D===void 0||D,j=x.resize,G=j===void 0||j,nt=oi(d.elements.popper),dt=[].concat(d.scrollParents.reference,d.scrollParents.popper);return O&&dt.forEach(function(gt){gt.addEventListener("scroll",m.update,vf)}),G&&nt.addEventListener("resize",m.update,vf),function(){O&&dt.forEach(function(gt){gt.removeEventListener("scroll",m.update,vf)}),G&&nt.removeEventListener("resize",m.update,vf)}},data:{}};var WS={left:"right",right:"left",bottom:"top",top:"bottom"};function _f(y){return y.replace(/left|right|bottom|top/g,function(d){return WS[d]})}var GS={start:"end",end:"start"};function m_(y){return y.replace(/start|end/g,function(d){return GS[d]})}function Ug(y){var d=oi(y);return{scrollLeft:d.pageXOffset,scrollTop:d.pageYOffset}}function zg(y){return ql(Gr(y)).left+Ug(y).scrollLeft}function qg(y){var d=Qn(y),m=d.overflow,x=d.overflowX,D=d.overflowY;return/auto|scroll|overlay|hidden/.test(m+D+x)}function b_(y){return["html","body","#document"].indexOf(bn(y))>=0?y.ownerDocument.body:Ri(y)&&qg(y)?y:b_(bf(y))}function Ph(y,d){var m;d===void 0&&(d=[]);var x=b_(y),D=x===((m=y.ownerDocument)==null?void 0:m.body),O=oi(x),j=D?[O].concat(O.visualViewport||[],qg(x)?x:[]):x,G=d.concat(j);return D?G:G.concat(Ph(bf(j)))}function Wg(y){return Object.assign({},y,{left:y.x,top:y.y,right:y.x+y.width,bottom:y.y+y.height})}function v_(y,d,m){return d===Lg?Wg(function(x,D){var O=oi(x),j=Gr(x),G=O.visualViewport,nt=j.clientWidth,dt=j.clientHeight,gt=0,ct=0;if(G){nt=G.width,dt=G.height;var Bt=c_();(Bt||!Bt&&D==="fixed")&&(gt=G.offsetLeft,ct=G.offsetTop)}return{width:nt,height:dt,x:gt+zg(x),y:ct}}(y,m)):ea(d)?function(x,D){var O=ql(x,!1,D==="fixed");return O.top=O.top+x.clientTop,O.left=O.left+x.clientLeft,O.bottom=O.top+x.clientHeight,O.right=O.left+x.clientWidth,O.width=x.clientWidth,O.height=x.clientHeight,O.x=O.left,O.y=O.top,O}(d,m):Wg(function(x){var D,O=Gr(x),j=Ug(x),G=(D=x.ownerDocument)==null?void 0:D.body,nt=sa(O.scrollWidth,O.clientWidth,G?G.scrollWidth:0,G?G.clientWidth:0),dt=sa(O.scrollHeight,O.clientHeight,G?G.scrollHeight:0,G?G.clientHeight:0),gt=-j.scrollLeft+zg(x),ct=-j.scrollTop;return Qn(G||O).direction==="rtl"&&(gt+=sa(O.clientWidth,G?G.clientWidth:0)-nt),{width:nt,height:dt,x:gt,y:ct}}(Gr(y)))}function __(y){var d,m=y.reference,x=y.element,D=y.placement,O=D?vn(D):null,j=D?Wl(D):null,G=m.x+m.width/2-x.width/2,nt=m.y+m.height/2-x.height/2;switch(O){case Os:d={x:G,y:m.y-x.height};break;case ni:d={x:G,y:m.y+m.height};break;case ri:d={x:m.x+m.width,y:nt};break;case Ns:d={x:m.x-x.width,y:nt};break;default:d={x:m.x,y:m.y}}var dt=O?Hg(O):null;if(dt!=null){var gt=dt==="y"?"height":"width";switch(j){case ta:d[dt]=d[dt]-(m[gt]/2-x[gt]/2);break;case Vl:d[dt]=d[dt]+(m[gt]/2-x[gt]/2)}}return d}function Gl(y,d){d===void 0&&(d={});var m=d,x=m.placement,D=x===void 0?y.placement:x,O=m.strategy,j=O===void 0?y.strategy:O,G=m.boundary,nt=G===void 0?Qv:G,dt=m.rootBoundary,gt=dt===void 0?Lg:dt,ct=m.elementContext,Bt=ct===void 0?Ul:ct,kt=m.altBoundary,Mt=kt!==void 0&&kt,It=m.padding,Lt=It===void 0?0:It,ue=d_(typeof Lt!="number"?Lt:f_(Lt,jl)),ye=Bt===Ul?Jv:Ul,Vt=y.rects.popper,ee=y.elements[Mt?ye:Bt],Ht=function(Fs,Ii,Mi,Ne){var _n=Ii==="clippingParents"?function(be){var $s=Ph(bf(be)),Li=["absolute","fixed"].indexOf(Qn(be).position)>=0&&Ri(be)?Ch(be):be;return ea(Li)?$s.filter(function(Kr){return ea(Kr)&&h_(Kr,Li)&&bn(Kr)!=="body"}):[]}(Fs):[].concat(Ii),yn=[].concat(_n,[Mi]),Yl=yn[0],rs=yn.reduce(function(be,$s){var Li=v_(Fs,$s,Ne);return be.top=sa(Li.top,be.top),be.right=mf(Li.right,be.right),be.bottom=mf(Li.bottom,be.bottom),be.left=sa(Li.left,be.left),be},v_(Fs,Yl,Ne));return rs.width=rs.right-rs.left,rs.height=rs.bottom-rs.top,rs.x=rs.left,rs.y=rs.top,rs}(ea(ee)?ee:ee.contextElement||Gr(y.elements.popper),nt,gt,j),Kt=ql(y.elements.reference),ae=__({reference:Kt,element:Vt,placement:D}),de=Wg(Object.assign({},Vt,ae)),le=Bt===Ul?de:Kt,je={top:Ht.top-le.top+ue.top,bottom:le.bottom-Ht.bottom+ue.bottom,left:Ht.left-le.left+ue.left,right:le.right-Ht.right+ue.right},ai=y.modifiersData.offset;if(Bt===Ul&&ai){var Xi=ai[D];Object.keys(je).forEach(function(Fs){var Ii=[ri,ni].indexOf(Fs)>=0?1:-1,Mi=[Os,ni].indexOf(Fs)>=0?"y":"x";je[Fs]+=Xi[Mi]*Ii})}return je}function XS(y,d){d===void 0&&(d={});var m=d,x=m.placement,D=m.boundary,O=m.rootBoundary,j=m.padding,G=m.flipVariations,nt=m.allowedAutoPlacements,dt=nt===void 0?Og:nt,gt=Wl(x),ct=gt?G?Dg:Dg.filter(function(Mt){return Wl(Mt)===gt}):jl,Bt=ct.filter(function(Mt){return dt.indexOf(Mt)>=0});Bt.length===0&&(Bt=ct);var kt=Bt.reduce(function(Mt,It){return Mt[It]=Gl(y,{placement:It,boundary:D,rootBoundary:O,padding:j})[vn(It)],Mt},{});return Object.keys(kt).sort(function(Mt,It){return kt[Mt]-kt[It]})}const y_={name:"flip",enabled:!0,phase:"main",fn:function(y){var d=y.state,m=y.options,x=y.name;if(!d.modifiersData[x]._skip){for(var D=m.mainAxis,O=D===void 0||D,j=m.altAxis,G=j===void 0||j,nt=m.fallbackPlacements,dt=m.padding,gt=m.boundary,ct=m.rootBoundary,Bt=m.altBoundary,kt=m.flipVariations,Mt=kt===void 0||kt,It=m.allowedAutoPlacements,Lt=d.options.placement,ue=vn(Lt),ye=nt||(ue!==Lt&&Mt?function(be){if(vn(be)===gf)return[];var $s=_f(be);return[m_(be),$s,m_($s)]}(Lt):[_f(Lt)]),Vt=[Lt].concat(ye).reduce(function(be,$s){return be.concat(vn($s)===gf?XS(d,{placement:$s,boundary:gt,rootBoundary:ct,padding:dt,flipVariations:Mt,allowedAutoPlacements:It}):$s)},[]),ee=d.rects.reference,Ht=d.rects.popper,Kt=new Map,ae=!0,de=Vt[0],le=0;le<Vt.length;le++){var je=Vt[le],ai=vn(je),Xi=Wl(je)===ta,Fs=[Os,ni].indexOf(ai)>=0,Ii=Fs?"width":"height",Mi=Gl(d,{placement:je,boundary:gt,rootBoundary:ct,altBoundary:Bt,padding:dt}),Ne=Fs?Xi?ri:Ns:Xi?ni:Os;ee[Ii]>Ht[Ii]&&(Ne=_f(Ne));var _n=_f(Ne),yn=[];if(O&&yn.push(Mi[ai]<=0),G&&yn.push(Mi[Ne]<=0,Mi[_n]<=0),yn.every(function(be){return be})){de=je,ae=!1;break}Kt.set(je,yn)}if(ae)for(var Yl=function(be){var $s=Vt.find(function(Li){var Kr=Kt.get(Li);if(Kr)return Kr.slice(0,be).every(function(Pf){return Pf})});if($s)return de=$s,"break"},rs=Mt?3:1;rs>0&&Yl(rs)!=="break";rs--);d.placement!==de&&(d.modifiersData[x]._skip=!0,d.placement=de,d.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function w_(y,d,m){return m===void 0&&(m={x:0,y:0}),{top:y.top-d.height-m.y,right:y.right-d.width+m.x,bottom:y.bottom-d.height+m.y,left:y.left-d.width-m.x}}function A_(y){return[Os,ri,ni,Ns].some(function(d){return y[d]>=0})}const E_={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(y){var d=y.state,m=y.name,x=d.rects.reference,D=d.rects.popper,O=d.modifiersData.preventOverflow,j=Gl(d,{elementContext:"reference"}),G=Gl(d,{altBoundary:!0}),nt=w_(j,x),dt=w_(G,D,O),gt=A_(nt),ct=A_(dt);d.modifiersData[m]={referenceClippingOffsets:nt,popperEscapeOffsets:dt,isReferenceHidden:gt,hasPopperEscaped:ct},d.attributes.popper=Object.assign({},d.attributes.popper,{"data-popper-reference-hidden":gt,"data-popper-escaped":ct})}},S_={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(y){var d=y.state,m=y.options,x=y.name,D=m.offset,O=D===void 0?[0,0]:D,j=Og.reduce(function(gt,ct){return gt[ct]=function(Bt,kt,Mt){var It=vn(Bt),Lt=[Ns,Os].indexOf(It)>=0?-1:1,ue=typeof Mt=="function"?Mt(Object.assign({},kt,{placement:Bt})):Mt,ye=ue[0],Vt=ue[1];return ye=ye||0,Vt=(Vt||0)*Lt,[Ns,ri].indexOf(It)>=0?{x:Vt,y:ye}:{x:ye,y:Vt}}(ct,d.rects,O),gt},{}),G=j[d.placement],nt=G.x,dt=G.y;d.modifiersData.popperOffsets!=null&&(d.modifiersData.popperOffsets.x+=nt,d.modifiersData.popperOffsets.y+=dt),d.modifiersData[x]=j}},Gg={name:"popperOffsets",enabled:!0,phase:"read",fn:function(y){var d=y.state,m=y.name;d.modifiersData[m]=__({reference:d.rects.reference,element:d.rects.popper,placement:d.placement})},data:{}},x_={name:"preventOverflow",enabled:!0,phase:"main",fn:function(y){var d=y.state,m=y.options,x=y.name,D=m.mainAxis,O=D===void 0||D,j=m.altAxis,G=j!==void 0&&j,nt=m.boundary,dt=m.rootBoundary,gt=m.altBoundary,ct=m.padding,Bt=m.tether,kt=Bt===void 0||Bt,Mt=m.tetherOffset,It=Mt===void 0?0:Mt,Lt=Gl(d,{boundary:nt,rootBoundary:dt,padding:ct,altBoundary:gt}),ue=vn(d.placement),ye=Wl(d.placement),Vt=!ye,ee=Hg(ue),Ht=ee==="x"?"y":"x",Kt=d.modifiersData.popperOffsets,ae=d.rects.reference,de=d.rects.popper,le=typeof It=="function"?It(Object.assign({},d.rects,{placement:d.placement})):It,je=typeof le=="number"?{mainAxis:le,altAxis:le}:Object.assign({mainAxis:0,altAxis:0},le),ai=d.modifiersData.offset?d.modifiersData.offset[d.placement]:null,Xi={x:0,y:0};if(Kt){if(O){var Fs,Ii=ee==="y"?Os:Ns,Mi=ee==="y"?ni:ri,Ne=ee==="y"?"height":"width",_n=Kt[ee],yn=_n+Lt[Ii],Yl=_n-Lt[Mi],rs=kt?-de[Ne]/2:0,be=ye===ta?ae[Ne]:de[Ne],$s=ye===ta?-de[Ne]:-ae[Ne],Li=d.elements.arrow,Kr=kt&&Li?Bg(Li):{width:0,height:0},Pf=d.modifiersData["arrow#persistent"]?d.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},uy=Pf[Ii],dy=Pf[Mi],Rf=Th(0,ae[Ne],Kr[Ne]),C1=Vt?ae[Ne]/2-rs-Rf-uy-je.mainAxis:be-Rf-uy-je.mainAxis,T1=Vt?-ae[Ne]/2+rs+Rf+dy+je.mainAxis:$s+Rf+dy+je.mainAxis,om=d.elements.arrow&&Ch(d.elements.arrow),P1=om?ee==="y"?om.clientTop||0:om.clientLeft||0:0,fy=(Fs=ai==null?void 0:ai[ee])!=null?Fs:0,R1=_n+T1-fy,py=Th(kt?mf(yn,_n+C1-fy-P1):yn,_n,kt?sa(Yl,R1):Yl);Kt[ee]=py,Xi[ee]=py-_n}if(G){var gy,k1=ee==="x"?Os:Ns,I1=ee==="x"?ni:ri,ha=Kt[Ht],kf=Ht==="y"?"height":"width",my=ha+Lt[k1],by=ha-Lt[I1],am=[Os,Ns].indexOf(ue)!==-1,vy=(gy=ai==null?void 0:ai[Ht])!=null?gy:0,_y=am?my:ha-ae[kf]-de[kf]-vy+je.altAxis,yy=am?ha+ae[kf]+de[kf]-vy-je.altAxis:by,wy=kt&&am?function(M1,L1,lm){var Ay=Th(M1,L1,lm);return Ay>lm?lm:Ay}(_y,ha,yy):Th(kt?_y:my,ha,kt?yy:by);Kt[Ht]=wy,Xi[Ht]=wy-ha}d.modifiersData[x]=Xi}},requiresIfExists:["offset"]};function KS(y,d,m){m===void 0&&(m=!1);var x,D,O=Ri(d),j=Ri(d)&&function(ct){var Bt=ct.getBoundingClientRect(),kt=zl(Bt.width)/ct.offsetWidth||1,Mt=zl(Bt.height)/ct.offsetHeight||1;return kt!==1||Mt!==1}(d),G=Gr(d),nt=ql(y,j,m),dt={scrollLeft:0,scrollTop:0},gt={x:0,y:0};return(O||!O&&!m)&&((bn(d)!=="body"||qg(G))&&(dt=(x=d)!==oi(x)&&Ri(x)?{scrollLeft:(D=x).scrollLeft,scrollTop:D.scrollTop}:Ug(x)),Ri(d)?((gt=ql(d,!0)).x+=d.clientLeft,gt.y+=d.clientTop):G&&(gt.x=zg(G))),{x:nt.left+dt.scrollLeft-gt.x,y:nt.top+dt.scrollTop-gt.y,width:nt.width,height:nt.height}}function YS(y){var d=new Map,m=new Set,x=[];function D(O){m.add(O.name),[].concat(O.requires||[],O.requiresIfExists||[]).forEach(function(j){if(!m.has(j)){var G=d.get(j);G&&D(G)}}),x.push(O)}return y.forEach(function(O){d.set(O.name,O)}),y.forEach(function(O){m.has(O.name)||D(O)}),x}var C_={placement:"bottom",modifiers:[],strategy:"absolute"};function T_(){for(var y=arguments.length,d=new Array(y),m=0;m<y;m++)d[m]=arguments[m];return!d.some(function(x){return!(x&&typeof x.getBoundingClientRect=="function")})}function yf(y){y===void 0&&(y={});var d=y,m=d.defaultModifiers,x=m===void 0?[]:m,D=d.defaultOptions,O=D===void 0?C_:D;return function(j,G,nt){nt===void 0&&(nt=O);var dt,gt,ct={placement:"bottom",orderedModifiers:[],options:Object.assign({},C_,O),modifiersData:{},elements:{reference:j,popper:G},attributes:{},styles:{}},Bt=[],kt=!1,Mt={state:ct,setOptions:function(Lt){var ue=typeof Lt=="function"?Lt(ct.options):Lt;It(),ct.options=Object.assign({},O,ct.options,ue),ct.scrollParents={reference:ea(j)?Ph(j):j.contextElement?Ph(j.contextElement):[],popper:Ph(G)};var ye,Vt,ee=function(Ht){var Kt=YS(Ht);return l_.reduce(function(ae,de){return ae.concat(Kt.filter(function(le){return le.phase===de}))},[])}((ye=[].concat(x,ct.options.modifiers),Vt=ye.reduce(function(Ht,Kt){var ae=Ht[Kt.name];return Ht[Kt.name]=ae?Object.assign({},ae,Kt,{options:Object.assign({},ae.options,Kt.options),data:Object.assign({},ae.data,Kt.data)}):Kt,Ht},{}),Object.keys(Vt).map(function(Ht){return Vt[Ht]})));return ct.orderedModifiers=ee.filter(function(Ht){return Ht.enabled}),ct.orderedModifiers.forEach(function(Ht){var Kt=Ht.name,ae=Ht.options,de=ae===void 0?{}:ae,le=Ht.effect;if(typeof le=="function"){var je=le({state:ct,name:Kt,instance:Mt,options:de});Bt.push(je||function(){})}}),Mt.update()},forceUpdate:function(){if(!kt){var Lt=ct.elements,ue=Lt.reference,ye=Lt.popper;if(T_(ue,ye)){ct.rects={reference:KS(ue,Ch(ye),ct.options.strategy==="fixed"),popper:Bg(ye)},ct.reset=!1,ct.placement=ct.options.placement,ct.orderedModifiers.forEach(function(le){return ct.modifiersData[le.name]=Object.assign({},le.data)});for(var Vt=0;Vt<ct.orderedModifiers.length;Vt++)if(ct.reset!==!0){var ee=ct.orderedModifiers[Vt],Ht=ee.fn,Kt=ee.options,ae=Kt===void 0?{}:Kt,de=ee.name;typeof Ht=="function"&&(ct=Ht({state:ct,options:ae,name:de,instance:Mt})||ct)}else ct.reset=!1,Vt=-1}}},update:(dt=function(){return new Promise(function(Lt){Mt.forceUpdate(),Lt(ct)})},function(){return gt||(gt=new Promise(function(Lt){Promise.resolve().then(function(){gt=void 0,Lt(dt())})})),gt}),destroy:function(){It(),kt=!0}};if(!T_(j,G))return Mt;function It(){Bt.forEach(function(Lt){return Lt()}),Bt=[]}return Mt.setOptions(nt).then(function(Lt){!kt&&nt.onFirstUpdate&&nt.onFirstUpdate(Lt)}),Mt}}var QS=yf(),JS=yf({defaultModifiers:[Vg,Gg,jg,Fg]}),Xg=yf({defaultModifiers:[Vg,Gg,jg,Fg,S_,y_,x_,p_,E_]});const P_=Object.freeze(Object.defineProperty({__proto__:null,afterMain:n_,afterRead:e_,afterWrite:a_,applyStyles:Fg,arrow:p_,auto:gf,basePlacements:jl,beforeMain:s_,beforeRead:Zv,beforeWrite:r_,bottom:ni,clippingParents:Qv,computeStyles:jg,createPopper:Xg,createPopperBase:QS,createPopperLite:JS,detectOverflow:Gl,end:Vl,eventListeners:Vg,flip:y_,hide:E_,left:Ns,main:i_,modifierPhases:l_,offset:S_,placements:Og,popper:Ul,popperGenerator:yf,popperOffsets:Gg,preventOverflow:x_,read:t_,reference:Jv,right:ri,start:ta,top:Os,variationPlacements:Dg,viewport:Lg,write:o_},Symbol.toStringTag,{value:"Module"})),R_="dropdown",ia=".bs.dropdown",Kg=".data-api",ZS="ArrowUp",k_="ArrowDown",tx=`hide${ia}`,ex=`hidden${ia}`,sx=`show${ia}`,ix=`shown${ia}`,I_=`click${ia}${Kg}`,M_=`keydown${ia}${Kg}`,nx=`keyup${ia}${Kg}`,Xl="show",na='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',rx=`${na}.${Xl}`,wf=".dropdown-menu",ox=E()?"top-end":"top-start",ax=E()?"top-start":"top-end",lx=E()?"bottom-end":"bottom-start",cx=E()?"bottom-start":"bottom-end",hx=E()?"left-start":"right-start",ux=E()?"right-start":"left-start",dx={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},fx={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class Gi extends Xt{constructor(d,m){super(d,m),this._popper=null,this._parent=this._element.parentNode,this._menu=V.next(this._element,wf)[0]||V.prev(this._element,wf)[0]||V.findOne(wf,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return dx}static get DefaultType(){return fx}static get NAME(){return R_}toggle(){return this._isShown()?this.hide():this.show()}show(){if(u(this._element)||this._isShown())return;const d={relatedTarget:this._element};if(!L.trigger(this._element,sx,d).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const m of[].concat(...document.body.children))L.on(m,"mouseover",p);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Xl),this._element.classList.add(Xl),L.trigger(this._element,ix,d)}}hide(){if(u(this._element)||!this._isShown())return;const d={relatedTarget:this._element};this._completeHide(d)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(d){if(!L.trigger(this._element,tx,d).defaultPrevented){if("ontouchstart"in document.documentElement)for(const m of[].concat(...document.body.children))L.off(m,"mouseover",p);this._popper&&this._popper.destroy(),this._menu.classList.remove(Xl),this._element.classList.remove(Xl),this._element.setAttribute("aria-expanded","false"),xe.removeDataAttribute(this._menu,"popper"),L.trigger(this._element,ex,d),this._element.focus()}}_getConfig(d){if(typeof(d=super._getConfig(d)).reference=="object"&&!l(d.reference)&&typeof d.reference.getBoundingClientRect!="function")throw new TypeError(`${R_.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return d}_createPopper(){if(P_===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let d=this._element;this._config.reference==="parent"?d=this._parent:l(this._config.reference)?d=c(this._config.reference):typeof this._config.reference=="object"&&(d=this._config.reference);const m=this._getPopperConfig();this._popper=Xg(d,this._menu,m)}_isShown(){return this._menu.classList.contains(Xl)}_getPlacement(){const d=this._parent;if(d.classList.contains("dropend"))return hx;if(d.classList.contains("dropstart"))return ux;if(d.classList.contains("dropup-center"))return"top";if(d.classList.contains("dropdown-center"))return"bottom";const m=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return d.classList.contains("dropup")?m?ax:ox:m?cx:lx}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:d}=this._config;return typeof d=="string"?d.split(",").map(m=>Number.parseInt(m,10)):typeof d=="function"?m=>d(m,this._element):d}_getPopperConfig(){const d={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(xe.setDataAttribute(this._menu,"popper","static"),d.modifiers=[{name:"applyStyles",enabled:!1}]),{...d,...C(this._config.popperConfig,[void 0,d])}}_selectMenuItem({key:d,target:m}){const x=V.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(D=>h(D));x.length&&R(x,m,d===k_,!x.includes(m)).focus()}static jQueryInterface(d){return this.each(function(){const m=Gi.getOrCreateInstance(this,d);if(typeof d=="string"){if(m[d]===void 0)throw new TypeError(`No method named "${d}"`);m[d]()}})}static clearMenus(d){if(d.button===2||d.type==="keyup"&&d.key!=="Tab")return;const m=V.find(rx);for(const x of m){const D=Gi.getInstance(x);if(!D||D._config.autoClose===!1)continue;const O=d.composedPath(),j=O.includes(D._menu);if(O.includes(D._element)||D._config.autoClose==="inside"&&!j||D._config.autoClose==="outside"&&j||D._menu.contains(d.target)&&(d.type==="keyup"&&d.key==="Tab"||/input|select|option|textarea|form/i.test(d.target.tagName)))continue;const G={relatedTarget:D._element};d.type==="click"&&(G.clickEvent=d),D._completeHide(G)}}static dataApiKeydownHandler(d){const m=/input|textarea/i.test(d.target.tagName),x=d.key==="Escape",D=[ZS,k_].includes(d.key);if(!D&&!x||m&&!x)return;d.preventDefault();const O=this.matches(na)?this:V.prev(this,na)[0]||V.next(this,na)[0]||V.findOne(na,d.delegateTarget.parentNode),j=Gi.getOrCreateInstance(O);if(D)return d.stopPropagation(),j.show(),void j._selectMenuItem(d);j._isShown()&&(d.stopPropagation(),j.hide(),O.focus())}}L.on(document,M_,na,Gi.dataApiKeydownHandler),L.on(document,M_,wf,Gi.dataApiKeydownHandler),L.on(document,I_,Gi.clearMenus),L.on(document,nx,Gi.clearMenus),L.on(document,I_,na,function(y){y.preventDefault(),Gi.getOrCreateInstance(this).toggle()}),S(Gi);const L_="backdrop",D_="show",O_=`mousedown.bs.${L_}`,px={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},gx={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class N_ extends Be{constructor(d){super(),this._config=this._getConfig(d),this._isAppended=!1,this._element=null}static get Default(){return px}static get DefaultType(){return gx}static get NAME(){return L_}show(d){if(!this._config.isVisible)return void C(d);this._append();const m=this._getElement();this._config.isAnimated&&g(m),m.classList.add(D_),this._emulateAnimation(()=>{C(d)})}hide(d){this._config.isVisible?(this._getElement().classList.remove(D_),this._emulateAnimation(()=>{this.dispose(),C(d)})):C(d)}dispose(){this._isAppended&&(L.off(this._element,O_),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const d=document.createElement("div");d.className=this._config.className,this._config.isAnimated&&d.classList.add("fade"),this._element=d}return this._element}_configAfterMerge(d){return d.rootElement=c(d.rootElement),d}_append(){if(this._isAppended)return;const d=this._getElement();this._config.rootElement.append(d),L.on(d,O_,()=>{C(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(d){T(d,this._getElement(),this._config.isAnimated)}}const Af=".bs.focustrap",mx=`focusin${Af}`,bx=`keydown.tab${Af}`,F_="backward",vx={autofocus:!0,trapElement:null},_x={autofocus:"boolean",trapElement:"element"};class $_ extends Be{constructor(d){super(),this._config=this._getConfig(d),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return vx}static get DefaultType(){return _x}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),L.off(document,Af),L.on(document,mx,d=>this._handleFocusin(d)),L.on(document,bx,d=>this._handleKeydown(d)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,L.off(document,Af))}_handleFocusin(d){const{trapElement:m}=this._config;if(d.target===document||d.target===m||m.contains(d.target))return;const x=V.focusableChildren(m);x.length===0?m.focus():this._lastTabNavDirection===F_?x[x.length-1].focus():x[0].focus()}_handleKeydown(d){d.key==="Tab"&&(this._lastTabNavDirection=d.shiftKey?F_:"forward")}}const B_=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",H_=".sticky-top",Ef="padding-right",j_="margin-right";class Yg{constructor(){this._element=document.body}getWidth(){const d=document.documentElement.clientWidth;return Math.abs(window.innerWidth-d)}hide(){const d=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,Ef,m=>m+d),this._setElementAttributes(B_,Ef,m=>m+d),this._setElementAttributes(H_,j_,m=>m-d)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,Ef),this._resetElementAttributes(B_,Ef),this._resetElementAttributes(H_,j_)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(d,m,x){const D=this.getWidth();this._applyManipulationCallback(d,O=>{if(O!==this._element&&window.innerWidth>O.clientWidth+D)return;this._saveInitialAttribute(O,m);const j=window.getComputedStyle(O).getPropertyValue(m);O.style.setProperty(m,`${x(Number.parseFloat(j))}px`)})}_saveInitialAttribute(d,m){const x=d.style.getPropertyValue(m);x&&xe.setDataAttribute(d,m,x)}_resetElementAttributes(d,m){this._applyManipulationCallback(d,x=>{const D=xe.getDataAttribute(x,m);D!==null?(xe.removeDataAttribute(x,m),x.style.setProperty(m,D)):x.style.removeProperty(m)})}_applyManipulationCallback(d,m){if(l(d))m(d);else for(const x of V.find(d,this._element))m(x)}}const ki=".bs.modal",yx=`hide${ki}`,wx=`hidePrevented${ki}`,V_=`hidden${ki}`,U_=`show${ki}`,Ax=`shown${ki}`,Ex=`resize${ki}`,Sx=`click.dismiss${ki}`,xx=`mousedown.dismiss${ki}`,Cx=`keydown.dismiss${ki}`,Tx=`click${ki}.data-api`,z_="modal-open",q_="show",Qg="modal-static",Px={backdrop:!0,focus:!0,keyboard:!0},Rx={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class ra extends Xt{constructor(d,m){super(d,m),this._dialog=V.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new Yg,this._addEventListeners()}static get Default(){return Px}static get DefaultType(){return Rx}static get NAME(){return"modal"}toggle(d){return this._isShown?this.hide():this.show(d)}show(d){this._isShown||this._isTransitioning||L.trigger(this._element,U_,{relatedTarget:d}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(z_),this._adjustDialog(),this._backdrop.show(()=>this._showElement(d)))}hide(){this._isShown&&!this._isTransitioning&&(L.trigger(this._element,yx).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(q_),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){L.off(window,ki),L.off(this._dialog,ki),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new N_({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new $_({trapElement:this._element})}_showElement(d){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const m=V.findOne(".modal-body",this._dialog);m&&(m.scrollTop=0),g(this._element),this._element.classList.add(q_),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,L.trigger(this._element,Ax,{relatedTarget:d})},this._dialog,this._isAnimated())}_addEventListeners(){L.on(this._element,Cx,d=>{d.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),L.on(window,Ex,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),L.on(this._element,xx,d=>{L.one(this._element,Sx,m=>{this._element===d.target&&this._element===m.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(z_),this._resetAdjustments(),this._scrollBar.reset(),L.trigger(this._element,V_)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(L.trigger(this._element,wx).defaultPrevented)return;const d=this._element.scrollHeight>document.documentElement.clientHeight,m=this._element.style.overflowY;m==="hidden"||this._element.classList.contains(Qg)||(d||(this._element.style.overflowY="hidden"),this._element.classList.add(Qg),this._queueCallback(()=>{this._element.classList.remove(Qg),this._queueCallback(()=>{this._element.style.overflowY=m},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const d=this._element.scrollHeight>document.documentElement.clientHeight,m=this._scrollBar.getWidth(),x=m>0;if(x&&!d){const D=E()?"paddingLeft":"paddingRight";this._element.style[D]=`${m}px`}if(!x&&d){const D=E()?"paddingRight":"paddingLeft";this._element.style[D]=`${m}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(d,m){return this.each(function(){const x=ra.getOrCreateInstance(this,d);if(typeof d=="string"){if(x[d]===void 0)throw new TypeError(`No method named "${d}"`);x[d](m)}})}}L.on(document,Tx,'[data-bs-toggle="modal"]',function(y){const d=V.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&y.preventDefault(),L.one(d,U_,x=>{x.defaultPrevented||L.one(d,V_,()=>{h(this)&&this.focus()})});const m=V.findOne(".modal.show");m&&ra.getInstance(m).hide(),ra.getOrCreateInstance(d).toggle(this)}),st(ra),S(ra);const Jn=".bs.offcanvas",W_=".data-api",kx=`load${Jn}${W_}`,G_="show",X_="showing",K_="hiding",Y_=".offcanvas.show",Ix=`show${Jn}`,Mx=`shown${Jn}`,Lx=`hide${Jn}`,Q_=`hidePrevented${Jn}`,J_=`hidden${Jn}`,Dx=`resize${Jn}`,Ox=`click${Jn}${W_}`,Nx=`keydown.dismiss${Jn}`,Fx={backdrop:!0,keyboard:!0,scroll:!1},$x={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Zn extends Xt{constructor(d,m){super(d,m),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Fx}static get DefaultType(){return $x}static get NAME(){return"offcanvas"}toggle(d){return this._isShown?this.hide():this.show(d)}show(d){this._isShown||L.trigger(this._element,Ix,{relatedTarget:d}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new Yg().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(X_),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(G_),this._element.classList.remove(X_),L.trigger(this._element,Mx,{relatedTarget:d})},this._element,!0))}hide(){this._isShown&&(L.trigger(this._element,Lx).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(K_),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(G_,K_),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new Yg().reset(),L.trigger(this._element,J_)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const d=!!this._config.backdrop;return new N_({className:"offcanvas-backdrop",isVisible:d,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:d?()=>{this._config.backdrop!=="static"?this.hide():L.trigger(this._element,Q_)}:null})}_initializeFocusTrap(){return new $_({trapElement:this._element})}_addEventListeners(){L.on(this._element,Nx,d=>{d.key==="Escape"&&(this._config.keyboard?this.hide():L.trigger(this._element,Q_))})}static jQueryInterface(d){return this.each(function(){const m=Zn.getOrCreateInstance(this,d);if(typeof d=="string"){if(m[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);m[d](this)}})}}L.on(document,Ox,'[data-bs-toggle="offcanvas"]',function(y){const d=V.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&y.preventDefault(),u(this))return;L.one(d,J_,()=>{h(this)&&this.focus()});const m=V.findOne(Y_);m&&m!==d&&Zn.getInstance(m).hide(),Zn.getOrCreateInstance(d).toggle(this)}),L.on(window,kx,()=>{for(const y of V.find(Y_))Zn.getOrCreateInstance(y).show()}),L.on(window,Dx,()=>{for(const y of V.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(y).position!=="fixed"&&Zn.getOrCreateInstance(y).hide()}),st(Zn),S(Zn);const Z_={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Bx=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Hx=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,jx=(y,d)=>{const m=y.nodeName.toLowerCase();return d.includes(m)?!Bx.has(m)||!!Hx.test(y.nodeValue):d.filter(x=>x instanceof RegExp).some(x=>x.test(m))},Vx={allowList:Z_,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Ux={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},zx={entry:"(string|element|function|null)",selector:"(string|element)"};class qx extends Be{constructor(d){super(),this._config=this._getConfig(d)}static get Default(){return Vx}static get DefaultType(){return Ux}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(d=>this._resolvePossibleFunction(d)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(d){return this._checkContent(d),this._config.content={...this._config.content,...d},this}toHtml(){const d=document.createElement("div");d.innerHTML=this._maybeSanitize(this._config.template);for(const[D,O]of Object.entries(this._config.content))this._setContent(d,O,D);const m=d.children[0],x=this._resolvePossibleFunction(this._config.extraClass);return x&&m.classList.add(...x.split(" ")),m}_typeCheckConfig(d){super._typeCheckConfig(d),this._checkContent(d.content)}_checkContent(d){for(const[m,x]of Object.entries(d))super._typeCheckConfig({selector:m,entry:x},zx)}_setContent(d,m,x){const D=V.findOne(x,d);D&&((m=this._resolvePossibleFunction(m))?l(m)?this._putElementInTemplate(c(m),D):this._config.html?D.innerHTML=this._maybeSanitize(m):D.textContent=m:D.remove())}_maybeSanitize(d){return this._config.sanitize?function(m,x,D){if(!m.length)return m;if(D&&typeof D=="function")return D(m);const O=new window.DOMParser().parseFromString(m,"text/html"),j=[].concat(...O.body.querySelectorAll("*"));for(const G of j){const nt=G.nodeName.toLowerCase();if(!Object.keys(x).includes(nt)){G.remove();continue}const dt=[].concat(...G.attributes),gt=[].concat(x["*"]||[],x[nt]||[]);for(const ct of dt)jx(ct,gt)||G.removeAttribute(ct.nodeName)}return O.body.innerHTML}(d,this._config.allowList,this._config.sanitizeFn):d}_resolvePossibleFunction(d){return C(d,[void 0,this])}_putElementInTemplate(d,m){if(this._config.html)return m.innerHTML="",void m.append(d);m.textContent=d.textContent}}const Wx=new Set(["sanitize","allowList","sanitizeFn"]),Jg="fade",Sf="show",Gx=".tooltip-inner",ty=".modal",ey="hide.bs.modal",Rh="hover",Zg="focus",Xx={AUTO:"auto",TOP:"top",RIGHT:E()?"left":"right",BOTTOM:"bottom",LEFT:E()?"right":"left"},Kx={allowList:Z_,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Yx={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class oa extends Xt{constructor(d,m){if(P_===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(d,m),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Kx}static get DefaultType(){return Yx}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),L.off(this._element.closest(ty),ey,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const d=L.trigger(this._element,this.constructor.eventName("show")),m=(f(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(d.defaultPrevented||!m)return;this._disposePopper();const x=this._getTipElement();this._element.setAttribute("aria-describedby",x.getAttribute("id"));const{container:D}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(D.append(x),L.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(x),x.classList.add(Sf),"ontouchstart"in document.documentElement)for(const O of[].concat(...document.body.children))L.on(O,"mouseover",p);this._queueCallback(()=>{L.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!L.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(Sf),"ontouchstart"in document.documentElement)for(const d of[].concat(...document.body.children))L.off(d,"mouseover",p);this._activeTrigger.click=!1,this._activeTrigger[Zg]=!1,this._activeTrigger[Rh]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),L.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(d){const m=this._getTemplateFactory(d).toHtml();if(!m)return null;m.classList.remove(Jg,Sf),m.classList.add(`bs-${this.constructor.NAME}-auto`);const x=(D=>{do D+=Math.floor(1e6*Math.random());while(document.getElementById(D));return D})(this.constructor.NAME).toString();return m.setAttribute("id",x),this._isAnimated()&&m.classList.add(Jg),m}setContent(d){this._newContent=d,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(d){return this._templateFactory?this._templateFactory.changeContent(d):this._templateFactory=new qx({...this._config,content:d,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Gx]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(d){return this.constructor.getOrCreateInstance(d.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Jg)}_isShown(){return this.tip&&this.tip.classList.contains(Sf)}_createPopper(d){const m=C(this._config.placement,[this,d,this._element]),x=Xx[m.toUpperCase()];return Xg(this._element,d,this._getPopperConfig(x))}_getOffset(){const{offset:d}=this._config;return typeof d=="string"?d.split(",").map(m=>Number.parseInt(m,10)):typeof d=="function"?m=>d(m,this._element):d}_resolvePossibleFunction(d){return C(d,[this._element,this._element])}_getPopperConfig(d){const m={placement:d,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:x=>{this._getTipElement().setAttribute("data-popper-placement",x.state.placement)}}]};return{...m,...C(this._config.popperConfig,[void 0,m])}}_setListeners(){const d=this._config.trigger.split(" ");for(const m of d)if(m==="click")L.on(this._element,this.constructor.eventName("click"),this._config.selector,x=>{this._initializeOnDelegatedTarget(x).toggle()});else if(m!=="manual"){const x=m===Rh?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),D=m===Rh?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");L.on(this._element,x,this._config.selector,O=>{const j=this._initializeOnDelegatedTarget(O);j._activeTrigger[O.type==="focusin"?Zg:Rh]=!0,j._enter()}),L.on(this._element,D,this._config.selector,O=>{const j=this._initializeOnDelegatedTarget(O);j._activeTrigger[O.type==="focusout"?Zg:Rh]=j._element.contains(O.relatedTarget),j._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},L.on(this._element.closest(ty),ey,this._hideModalHandler)}_fixTitle(){const d=this._element.getAttribute("title");d&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",d),this._element.setAttribute("data-bs-original-title",d),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(d,m){clearTimeout(this._timeout),this._timeout=setTimeout(d,m)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(d){const m=xe.getDataAttributes(this._element);for(const x of Object.keys(m))Wx.has(x)&&delete m[x];return d={...m,...typeof d=="object"&&d?d:{}},d=this._mergeConfigObj(d),d=this._configAfterMerge(d),this._typeCheckConfig(d),d}_configAfterMerge(d){return d.container=d.container===!1?document.body:c(d.container),typeof d.delay=="number"&&(d.delay={show:d.delay,hide:d.delay}),typeof d.title=="number"&&(d.title=d.title.toString()),typeof d.content=="number"&&(d.content=d.content.toString()),d}_getDelegateConfig(){const d={};for(const[m,x]of Object.entries(this._config))this.constructor.Default[m]!==x&&(d[m]=x);return d.selector=!1,d.trigger="manual",d}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(d){return this.each(function(){const m=oa.getOrCreateInstance(this,d);if(typeof d=="string"){if(m[d]===void 0)throw new TypeError(`No method named "${d}"`);m[d]()}})}}S(oa);const Qx=".popover-header",Jx=".popover-body",Zx={...oa.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},t1={...oa.DefaultType,content:"(null|string|element|function)"};class xf extends oa{static get Default(){return Zx}static get DefaultType(){return t1}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Qx]:this._getTitle(),[Jx]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(d){return this.each(function(){const m=xf.getOrCreateInstance(this,d);if(typeof d=="string"){if(m[d]===void 0)throw new TypeError(`No method named "${d}"`);m[d]()}})}}S(xf);const tm=".bs.scrollspy",e1=`activate${tm}`,sy=`click${tm}`,s1=`load${tm}.data-api`,Kl="active",em="[href]",iy=".nav-link",i1=`${iy}, .nav-item > ${iy}, .list-group-item`,n1={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},r1={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class kh extends Xt{constructor(d,m){super(d,m),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return n1}static get DefaultType(){return r1}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const d of this._observableSections.values())this._observer.observe(d)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(d){return d.target=c(d.target)||document.body,d.rootMargin=d.offset?`${d.offset}px 0px -30%`:d.rootMargin,typeof d.threshold=="string"&&(d.threshold=d.threshold.split(",").map(m=>Number.parseFloat(m))),d}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(L.off(this._config.target,sy),L.on(this._config.target,sy,em,d=>{const m=this._observableSections.get(d.target.hash);if(m){d.preventDefault();const x=this._rootElement||window,D=m.offsetTop-this._element.offsetTop;if(x.scrollTo)return void x.scrollTo({top:D,behavior:"smooth"});x.scrollTop=D}}))}_getNewObserver(){const d={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(m=>this._observerCallback(m),d)}_observerCallback(d){const m=j=>this._targetLinks.get(`#${j.target.id}`),x=j=>{this._previousScrollData.visibleEntryTop=j.target.offsetTop,this._process(m(j))},D=(this._rootElement||document.documentElement).scrollTop,O=D>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=D;for(const j of d){if(!j.isIntersecting){this._activeTarget=null,this._clearActiveClass(m(j));continue}const G=j.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(O&&G){if(x(j),!D)return}else O||G||x(j)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const d=V.find(em,this._config.target);for(const m of d){if(!m.hash||u(m))continue;const x=V.findOne(decodeURI(m.hash),this._element);h(x)&&(this._targetLinks.set(decodeURI(m.hash),m),this._observableSections.set(m.hash,x))}}_process(d){this._activeTarget!==d&&(this._clearActiveClass(this._config.target),this._activeTarget=d,d.classList.add(Kl),this._activateParents(d),L.trigger(this._element,e1,{relatedTarget:d}))}_activateParents(d){if(d.classList.contains("dropdown-item"))V.findOne(".dropdown-toggle",d.closest(".dropdown")).classList.add(Kl);else for(const m of V.parents(d,".nav, .list-group"))for(const x of V.prev(m,i1))x.classList.add(Kl)}_clearActiveClass(d){d.classList.remove(Kl);const m=V.find(`${em}.${Kl}`,d);for(const x of m)x.classList.remove(Kl)}static jQueryInterface(d){return this.each(function(){const m=kh.getOrCreateInstance(this,d);if(typeof d=="string"){if(m[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);m[d]()}})}}L.on(window,s1,()=>{for(const y of V.find('[data-bs-spy="scroll"]'))kh.getOrCreateInstance(y)}),S(kh);const aa=".bs.tab",o1=`hide${aa}`,a1=`hidden${aa}`,l1=`show${aa}`,c1=`shown${aa}`,h1=`click${aa}`,u1=`keydown${aa}`,d1=`load${aa}`,f1="ArrowLeft",ny="ArrowRight",p1="ArrowUp",ry="ArrowDown",sm="Home",oy="End",la="active",ay="fade",im="show",ly=".dropdown-toggle",nm=`:not(${ly})`,cy='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',rm=`.nav-link${nm}, .list-group-item${nm}, [role="tab"]${nm}, ${cy}`,g1=`.${la}[data-bs-toggle="tab"], .${la}[data-bs-toggle="pill"], .${la}[data-bs-toggle="list"]`;class ca extends Xt{constructor(d){super(d),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),L.on(this._element,u1,m=>this._keydown(m)))}static get NAME(){return"tab"}show(){const d=this._element;if(this._elemIsActive(d))return;const m=this._getActiveElem(),x=m?L.trigger(m,o1,{relatedTarget:d}):null;L.trigger(d,l1,{relatedTarget:m}).defaultPrevented||x&&x.defaultPrevented||(this._deactivate(m,d),this._activate(d,m))}_activate(d,m){d&&(d.classList.add(la),this._activate(V.getElementFromSelector(d)),this._queueCallback(()=>{d.getAttribute("role")==="tab"?(d.removeAttribute("tabindex"),d.setAttribute("aria-selected",!0),this._toggleDropDown(d,!0),L.trigger(d,c1,{relatedTarget:m})):d.classList.add(im)},d,d.classList.contains(ay)))}_deactivate(d,m){d&&(d.classList.remove(la),d.blur(),this._deactivate(V.getElementFromSelector(d)),this._queueCallback(()=>{d.getAttribute("role")==="tab"?(d.setAttribute("aria-selected",!1),d.setAttribute("tabindex","-1"),this._toggleDropDown(d,!1),L.trigger(d,a1,{relatedTarget:m})):d.classList.remove(im)},d,d.classList.contains(ay)))}_keydown(d){if(![f1,ny,p1,ry,sm,oy].includes(d.key))return;d.stopPropagation(),d.preventDefault();const m=this._getChildren().filter(D=>!u(D));let x;if([sm,oy].includes(d.key))x=m[d.key===sm?0:m.length-1];else{const D=[ny,ry].includes(d.key);x=R(m,d.target,D,!0)}x&&(x.focus({preventScroll:!0}),ca.getOrCreateInstance(x).show())}_getChildren(){return V.find(rm,this._parent)}_getActiveElem(){return this._getChildren().find(d=>this._elemIsActive(d))||null}_setInitialAttributes(d,m){this._setAttributeIfNotExists(d,"role","tablist");for(const x of m)this._setInitialAttributesOnChild(x)}_setInitialAttributesOnChild(d){d=this._getInnerElement(d);const m=this._elemIsActive(d),x=this._getOuterElement(d);d.setAttribute("aria-selected",m),x!==d&&this._setAttributeIfNotExists(x,"role","presentation"),m||d.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(d,"role","tab"),this._setInitialAttributesOnTargetPanel(d)}_setInitialAttributesOnTargetPanel(d){const m=V.getElementFromSelector(d);m&&(this._setAttributeIfNotExists(m,"role","tabpanel"),d.id&&this._setAttributeIfNotExists(m,"aria-labelledby",`${d.id}`))}_toggleDropDown(d,m){const x=this._getOuterElement(d);if(!x.classList.contains("dropdown"))return;const D=(O,j)=>{const G=V.findOne(O,x);G&&G.classList.toggle(j,m)};D(ly,la),D(".dropdown-menu",im),x.setAttribute("aria-expanded",m)}_setAttributeIfNotExists(d,m,x){d.hasAttribute(m)||d.setAttribute(m,x)}_elemIsActive(d){return d.classList.contains(la)}_getInnerElement(d){return d.matches(rm)?d:V.findOne(rm,d)}_getOuterElement(d){return d.closest(".nav-item, .list-group-item")||d}static jQueryInterface(d){return this.each(function(){const m=ca.getOrCreateInstance(this);if(typeof d=="string"){if(m[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);m[d]()}})}}L.on(document,h1,cy,function(y){["A","AREA"].includes(this.tagName)&&y.preventDefault(),u(this)||ca.getOrCreateInstance(this).show()}),L.on(window,d1,()=>{for(const y of V.find(g1))ca.getOrCreateInstance(y)}),S(ca);const Xr=".bs.toast",m1=`mouseover${Xr}`,b1=`mouseout${Xr}`,v1=`focusin${Xr}`,_1=`focusout${Xr}`,y1=`hide${Xr}`,w1=`hidden${Xr}`,A1=`show${Xr}`,E1=`shown${Xr}`,hy="hide",Cf="show",Tf="showing",S1={animation:"boolean",autohide:"boolean",delay:"number"},x1={animation:!0,autohide:!0,delay:5e3};class Ih extends Xt{constructor(d,m){super(d,m),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return x1}static get DefaultType(){return S1}static get NAME(){return"toast"}show(){L.trigger(this._element,A1).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(hy),g(this._element),this._element.classList.add(Cf,Tf),this._queueCallback(()=>{this._element.classList.remove(Tf),L.trigger(this._element,E1),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(L.trigger(this._element,y1).defaultPrevented||(this._element.classList.add(Tf),this._queueCallback(()=>{this._element.classList.add(hy),this._element.classList.remove(Tf,Cf),L.trigger(this._element,w1)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(Cf),super.dispose()}isShown(){return this._element.classList.contains(Cf)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(d,m){switch(d.type){case"mouseover":case"mouseout":this._hasMouseInteraction=m;break;case"focusin":case"focusout":this._hasKeyboardInteraction=m}if(m)return void this._clearTimeout();const x=d.relatedTarget;this._element===x||this._element.contains(x)||this._maybeScheduleHide()}_setListeners(){L.on(this._element,m1,d=>this._onInteraction(d,!0)),L.on(this._element,b1,d=>this._onInteraction(d,!1)),L.on(this._element,v1,d=>this._onInteraction(d,!0)),L.on(this._element,_1,d=>this._onInteraction(d,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(d){return this.each(function(){const m=Ih.getOrCreateInstance(this,d);if(typeof d=="string"){if(m[d]===void 0)throw new TypeError(`No method named "${d}"`);m[d](this)}})}}return st(Ih),S(Ih),{Alert:k,Button:z,Carousel:$l,Collapse:Hl,Dropdown:Gi,Modal:ra,Offcanvas:Zn,Popover:xf,ScrollSpy:kh,Tab:ca,Toast:Ih,Tooltip:oa}})}(jf)),jf.exports}F1();/**
* @vue/shared v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function hv(i){const t=Object.create(null);for(const e of i.split(","))t[e]=1;return e=>e in t}const ve={},uc=[],qn=()=>{},$1=()=>!1,hg=i=>i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&(i.charCodeAt(2)>122||i.charCodeAt(2)<97),uv=i=>i.startsWith("onUpdate:"),Ms=Object.assign,dv=(i,t)=>{const e=i.indexOf(t);e>-1&&i.splice(e,1)},B1=Object.prototype.hasOwnProperty,ne=(i,t)=>B1.call(i,t),Tt=Array.isArray,dc=i=>Zd(i)==="[object Map]",ug=i=>Zd(i)==="[object Set]",xy=i=>Zd(i)==="[object Date]",Nt=i=>typeof i=="function",Qe=i=>typeof i=="string",Wn=i=>typeof i=="symbol",_e=i=>i!==null&&typeof i=="object",zw=i=>(_e(i)||Nt(i))&&Nt(i.then)&&Nt(i.catch),qw=Object.prototype.toString,Zd=i=>qw.call(i),H1=i=>Zd(i).slice(8,-1),Ww=i=>Zd(i)==="[object Object]",fv=i=>Qe(i)&&i!=="NaN"&&i[0]!=="-"&&""+parseInt(i,10)===i,ou=hv(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),dg=i=>{const t=Object.create(null);return e=>t[e]||(t[e]=i(e))},j1=/-(\w)/g,Wi=dg(i=>i.replace(j1,(t,e)=>e?e.toUpperCase():"")),V1=/\B([A-Z])/g,Jo=dg(i=>i.replace(V1,"-$1").toLowerCase()),fg=dg(i=>i.charAt(0).toUpperCase()+i.slice(1)),hm=dg(i=>i?`on${fg(i)}`:""),jo=(i,t)=>!Object.is(i,t),Vf=(i,...t)=>{for(let e=0;e<i.length;e++)i[e](...t)},Gw=(i,t,e,s=!1)=>{Object.defineProperty(i,t,{configurable:!0,enumerable:!1,writable:s,value:e})},Im=i=>{const t=parseFloat(i);return isNaN(t)?i:t};let Cy;const pg=()=>Cy||(Cy=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function gg(i){if(Tt(i)){const t={};for(let e=0;e<i.length;e++){const s=i[e],n=Qe(s)?W1(s):gg(s);if(n)for(const r in n)t[r]=n[r]}return t}else if(Qe(i)||_e(i))return i}const U1=/;(?![^(]*\))/g,z1=/:([^]+)/,q1=/\/\*[^]*?\*\//g;function W1(i){const t={};return i.replace(q1,"").split(U1).forEach(e=>{if(e){const s=e.split(z1);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function zo(i){let t="";if(Qe(i))t=i;else if(Tt(i))for(let e=0;e<i.length;e++){const s=zo(i[e]);s&&(t+=s+" ")}else if(_e(i))for(const e in i)i[e]&&(t+=e+" ");return t.trim()}const G1="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",X1=hv(G1);function Xw(i){return!!i||i===""}function K1(i,t){if(i.length!==t.length)return!1;let e=!0;for(let s=0;e&&s<i.length;s++)e=mg(i[s],t[s]);return e}function mg(i,t){if(i===t)return!0;let e=xy(i),s=xy(t);if(e||s)return e&&s?i.getTime()===t.getTime():!1;if(e=Wn(i),s=Wn(t),e||s)return i===t;if(e=Tt(i),s=Tt(t),e||s)return e&&s?K1(i,t):!1;if(e=_e(i),s=_e(t),e||s){if(!e||!s)return!1;const n=Object.keys(i).length,r=Object.keys(t).length;if(n!==r)return!1;for(const o in i){const l=i.hasOwnProperty(o),c=t.hasOwnProperty(o);if(l&&!c||!l&&c||!mg(i[o],t[o]))return!1}}return String(i)===String(t)}function Kw(i,t){return i.findIndex(e=>mg(e,t))}const Yw=i=>!!(i&&i.__v_isRef===!0),Re=i=>Qe(i)?i:i==null?"":Tt(i)||_e(i)&&(i.toString===qw||!Nt(i.toString))?Yw(i)?Re(i.value):JSON.stringify(i,Qw,2):String(i),Qw=(i,t)=>Yw(t)?Qw(i,t.value):dc(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[s,n],r)=>(e[um(s,r)+" =>"]=n,e),{})}:ug(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>um(e))}:Wn(t)?um(t):_e(t)&&!Tt(t)&&!Ww(t)?String(t):t,um=(i,t="")=>{var e;return Wn(i)?`Symbol(${(e=i.description)!=null?e:t})`:i};/**
* @vue/reactivity v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ks;class Jw{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ks,!t&&ks&&(this.index=(ks.scopes||(ks.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].pause();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].resume();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].resume()}}run(t){if(this._active){const e=ks;try{return ks=this,t()}finally{ks=e}}}on(){++this._on===1&&(this.prevScope=ks,ks=this)}off(){this._on>0&&--this._on===0&&(ks=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let e,s;for(e=0,s=this.effects.length;e<s;e++)this.effects[e].stop();for(this.effects.length=0,e=0,s=this.cleanups.length;e<s;e++)this.cleanups[e]();if(this.cleanups.length=0,this.scopes){for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const n=this.parent.scopes.pop();n&&n!==this&&(this.parent.scopes[this.index]=n,n.index=this.index)}this.parent=void 0}}}function Zw(i){return new Jw(i)}function tA(){return ks}function Y1(i,t=!1){ks&&ks.cleanups.push(i)}let Ae;const dm=new WeakSet;class eA{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ks&&ks.active&&ks.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,dm.has(this)&&(dm.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||iA(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ty(this),nA(this);const t=Ae,e=dn;Ae=this,dn=!0;try{return this.fn()}finally{rA(this),Ae=t,dn=e,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)mv(t);this.deps=this.depsTail=void 0,Ty(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?dm.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Mm(this)&&this.run()}get dirty(){return Mm(this)}}let sA=0,au,lu;function iA(i,t=!1){if(i.flags|=8,t){i.next=lu,lu=i;return}i.next=au,au=i}function pv(){sA++}function gv(){if(--sA>0)return;if(lu){let t=lu;for(lu=void 0;t;){const e=t.next;t.next=void 0,t.flags&=-9,t=e}}let i;for(;au;){let t=au;for(au=void 0;t;){const e=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){i||(i=s)}t=e}}if(i)throw i}function nA(i){for(let t=i.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function rA(i){let t,e=i.depsTail,s=e;for(;s;){const n=s.prevDep;s.version===-1?(s===e&&(e=n),mv(s),Q1(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=n}i.deps=t,i.depsTail=e}function Mm(i){for(let t=i.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(oA(t.dep.computed)||t.dep.version!==t.version))return!0;return!!i._dirty}function oA(i){if(i.flags&4&&!(i.flags&16)||(i.flags&=-17,i.globalVersion===gu)||(i.globalVersion=gu,!i.isSSR&&i.flags&128&&(!i.deps&&!i._dirty||!Mm(i))))return;i.flags|=2;const t=i.dep,e=Ae,s=dn;Ae=i,dn=!0;try{nA(i);const n=i.fn(i._value);(t.version===0||jo(n,i._value))&&(i.flags|=128,i._value=n,t.version++)}catch(n){throw t.version++,n}finally{Ae=e,dn=s,rA(i),i.flags&=-3}}function mv(i,t=!1){const{dep:e,prevSub:s,nextSub:n}=i;if(s&&(s.nextSub=n,i.prevSub=void 0),n&&(n.prevSub=s,i.nextSub=void 0),e.subs===i&&(e.subs=s,!s&&e.computed)){e.computed.flags&=-5;for(let r=e.computed.deps;r;r=r.nextDep)mv(r,!0)}!t&&!--e.sc&&e.map&&e.map.delete(e.key)}function Q1(i){const{prevDep:t,nextDep:e}=i;t&&(t.nextDep=e,i.prevDep=void 0),e&&(e.prevDep=t,i.nextDep=void 0)}let dn=!0;const aA=[];function Ur(){aA.push(dn),dn=!1}function zr(){const i=aA.pop();dn=i===void 0?!0:i}function Ty(i){const{cleanup:t}=i;if(i.cleanup=void 0,t){const e=Ae;Ae=void 0;try{t()}finally{Ae=e}}}let gu=0;class J1{constructor(t,e){this.sub=t,this.dep=e,this.version=e.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class bv{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!Ae||!dn||Ae===this.computed)return;let e=this.activeLink;if(e===void 0||e.sub!==Ae)e=this.activeLink=new J1(Ae,this),Ae.deps?(e.prevDep=Ae.depsTail,Ae.depsTail.nextDep=e,Ae.depsTail=e):Ae.deps=Ae.depsTail=e,lA(e);else if(e.version===-1&&(e.version=this.version,e.nextDep)){const s=e.nextDep;s.prevDep=e.prevDep,e.prevDep&&(e.prevDep.nextDep=s),e.prevDep=Ae.depsTail,e.nextDep=void 0,Ae.depsTail.nextDep=e,Ae.depsTail=e,Ae.deps===e&&(Ae.deps=s)}return e}trigger(t){this.version++,gu++,this.notify(t)}notify(t){pv();try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{gv()}}}function lA(i){if(i.dep.sc++,i.sub.flags&4){const t=i.dep.computed;if(t&&!i.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)lA(s)}const e=i.dep.subs;e!==i&&(i.prevSub=e,e&&(e.nextSub=i)),i.dep.subs=i}}const xp=new WeakMap,Tl=Symbol(""),Lm=Symbol(""),mu=Symbol("");function Is(i,t,e){if(dn&&Ae){let s=xp.get(i);s||xp.set(i,s=new Map);let n=s.get(e);n||(s.set(e,n=new bv),n.map=s,n.key=e),n.track()}}function Fr(i,t,e,s,n,r){const o=xp.get(i);if(!o){gu++;return}const l=c=>{c&&c.trigger()};if(pv(),t==="clear")o.forEach(l);else{const c=Tt(i),h=c&&fv(e);if(c&&e==="length"){const u=Number(s);o.forEach((f,p)=>{(p==="length"||p===mu||!Wn(p)&&p>=u)&&l(f)})}else switch((e!==void 0||o.has(void 0))&&l(o.get(e)),h&&l(o.get(mu)),t){case"add":c?h&&l(o.get("length")):(l(o.get(Tl)),dc(i)&&l(o.get(Lm)));break;case"delete":c||(l(o.get(Tl)),dc(i)&&l(o.get(Lm)));break;case"set":dc(i)&&l(o.get(Tl));break}}gv()}function Z1(i,t){const e=xp.get(i);return e&&e.get(t)}function Ql(i){const t=Qt(i);return t===i?t:(Is(t,"iterate",mu),zi(i)?t:t.map(ys))}function bg(i){return Is(i=Qt(i),"iterate",mu),i}const tC={__proto__:null,[Symbol.iterator](){return fm(this,Symbol.iterator,ys)},concat(...i){return Ql(this).concat(...i.map(t=>Tt(t)?Ql(t):t))},entries(){return fm(this,"entries",i=>(i[1]=ys(i[1]),i))},every(i,t){return tr(this,"every",i,t,void 0,arguments)},filter(i,t){return tr(this,"filter",i,t,e=>e.map(ys),arguments)},find(i,t){return tr(this,"find",i,t,ys,arguments)},findIndex(i,t){return tr(this,"findIndex",i,t,void 0,arguments)},findLast(i,t){return tr(this,"findLast",i,t,ys,arguments)},findLastIndex(i,t){return tr(this,"findLastIndex",i,t,void 0,arguments)},forEach(i,t){return tr(this,"forEach",i,t,void 0,arguments)},includes(...i){return pm(this,"includes",i)},indexOf(...i){return pm(this,"indexOf",i)},join(i){return Ql(this).join(i)},lastIndexOf(...i){return pm(this,"lastIndexOf",i)},map(i,t){return tr(this,"map",i,t,void 0,arguments)},pop(){return Mh(this,"pop")},push(...i){return Mh(this,"push",i)},reduce(i,...t){return Py(this,"reduce",i,t)},reduceRight(i,...t){return Py(this,"reduceRight",i,t)},shift(){return Mh(this,"shift")},some(i,t){return tr(this,"some",i,t,void 0,arguments)},splice(...i){return Mh(this,"splice",i)},toReversed(){return Ql(this).toReversed()},toSorted(i){return Ql(this).toSorted(i)},toSpliced(...i){return Ql(this).toSpliced(...i)},unshift(...i){return Mh(this,"unshift",i)},values(){return fm(this,"values",ys)}};function fm(i,t,e){const s=bg(i),n=s[t]();return s!==i&&!zi(i)&&(n._next=n.next,n.next=()=>{const r=n._next();return r.value&&(r.value=e(r.value)),r}),n}const eC=Array.prototype;function tr(i,t,e,s,n,r){const o=bg(i),l=o!==i&&!zi(i),c=o[t];if(c!==eC[t]){const f=c.apply(i,r);return l?ys(f):f}let h=e;o!==i&&(l?h=function(f,p){return e.call(this,ys(f),p,i)}:e.length>2&&(h=function(f,p){return e.call(this,f,p,i)}));const u=c.call(o,h,s);return l&&n?n(u):u}function Py(i,t,e,s){const n=bg(i);let r=e;return n!==i&&(zi(i)?e.length>3&&(r=function(o,l,c){return e.call(this,o,l,c,i)}):r=function(o,l,c){return e.call(this,o,ys(l),c,i)}),n[t](r,...s)}function pm(i,t,e){const s=Qt(i);Is(s,"iterate",mu);const n=s[t](...e);return(n===-1||n===!1)&&yv(e[0])?(e[0]=Qt(e[0]),s[t](...e)):n}function Mh(i,t,e=[]){Ur(),pv();const s=Qt(i)[t].apply(i,e);return gv(),zr(),s}const sC=hv("__proto__,__v_isRef,__isVue"),cA=new Set(Object.getOwnPropertyNames(Symbol).filter(i=>i!=="arguments"&&i!=="caller").map(i=>Symbol[i]).filter(Wn));function iC(i){Wn(i)||(i=String(i));const t=Qt(this);return Is(t,"has",i),t.hasOwnProperty(i)}class hA{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,s){if(e==="__v_skip")return t.__v_skip;const n=this._isReadonly,r=this._isShallow;if(e==="__v_isReactive")return!n;if(e==="__v_isReadonly")return n;if(e==="__v_isShallow")return r;if(e==="__v_raw")return s===(n?r?fC:pA:r?fA:dA).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const o=Tt(t);if(!n){let c;if(o&&(c=tC[e]))return c;if(e==="hasOwnProperty")return iC}const l=Reflect.get(t,e,Oe(t)?t:s);return(Wn(e)?cA.has(e):sC(e))||(n||Is(t,"get",e),r)?l:Oe(l)?o&&fv(e)?l:l.value:_e(l)?n?mA(l):tf(l):l}}class uA extends hA{constructor(t=!1){super(!1,t)}set(t,e,s,n){let r=t[e];if(!this._isShallow){const c=qo(r);if(!zi(s)&&!qo(s)&&(r=Qt(r),s=Qt(s)),!Tt(t)&&Oe(r)&&!Oe(s))return c?!1:(r.value=s,!0)}const o=Tt(t)&&fv(e)?Number(e)<t.length:ne(t,e),l=Reflect.set(t,e,s,Oe(t)?t:n);return t===Qt(n)&&(o?jo(s,r)&&Fr(t,"set",e,s):Fr(t,"add",e,s)),l}deleteProperty(t,e){const s=ne(t,e);t[e];const n=Reflect.deleteProperty(t,e);return n&&s&&Fr(t,"delete",e,void 0),n}has(t,e){const s=Reflect.has(t,e);return(!Wn(e)||!cA.has(e))&&Is(t,"has",e),s}ownKeys(t){return Is(t,"iterate",Tt(t)?"length":Tl),Reflect.ownKeys(t)}}class nC extends hA{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const rC=new uA,oC=new nC,aC=new uA(!0);const Dm=i=>i,If=i=>Reflect.getPrototypeOf(i);function lC(i,t,e){return function(...s){const n=this.__v_raw,r=Qt(n),o=dc(r),l=i==="entries"||i===Symbol.iterator&&o,c=i==="keys"&&o,h=n[i](...s),u=e?Dm:t?Cp:ys;return!t&&Is(r,"iterate",c?Lm:Tl),{next(){const{value:f,done:p}=h.next();return p?{value:f,done:p}:{value:l?[u(f[0]),u(f[1])]:u(f),done:p}},[Symbol.iterator](){return this}}}}function Mf(i){return function(...t){return i==="delete"?!1:i==="clear"?void 0:this}}function cC(i,t){const e={get(n){const r=this.__v_raw,o=Qt(r),l=Qt(n);i||(jo(n,l)&&Is(o,"get",n),Is(o,"get",l));const{has:c}=If(o),h=t?Dm:i?Cp:ys;if(c.call(o,n))return h(r.get(n));if(c.call(o,l))return h(r.get(l));r!==o&&r.get(n)},get size(){const n=this.__v_raw;return!i&&Is(Qt(n),"iterate",Tl),Reflect.get(n,"size",n)},has(n){const r=this.__v_raw,o=Qt(r),l=Qt(n);return i||(jo(n,l)&&Is(o,"has",n),Is(o,"has",l)),n===l?r.has(n):r.has(n)||r.has(l)},forEach(n,r){const o=this,l=o.__v_raw,c=Qt(l),h=t?Dm:i?Cp:ys;return!i&&Is(c,"iterate",Tl),l.forEach((u,f)=>n.call(r,h(u),h(f),o))}};return Ms(e,i?{add:Mf("add"),set:Mf("set"),delete:Mf("delete"),clear:Mf("clear")}:{add(n){!t&&!zi(n)&&!qo(n)&&(n=Qt(n));const r=Qt(this);return If(r).has.call(r,n)||(r.add(n),Fr(r,"add",n,n)),this},set(n,r){!t&&!zi(r)&&!qo(r)&&(r=Qt(r));const o=Qt(this),{has:l,get:c}=If(o);let h=l.call(o,n);h||(n=Qt(n),h=l.call(o,n));const u=c.call(o,n);return o.set(n,r),h?jo(r,u)&&Fr(o,"set",n,r):Fr(o,"add",n,r),this},delete(n){const r=Qt(this),{has:o,get:l}=If(r);let c=o.call(r,n);c||(n=Qt(n),c=o.call(r,n)),l&&l.call(r,n);const h=r.delete(n);return c&&Fr(r,"delete",n,void 0),h},clear(){const n=Qt(this),r=n.size!==0,o=n.clear();return r&&Fr(n,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(n=>{e[n]=lC(n,i,t)}),e}function vv(i,t){const e=cC(i,t);return(s,n,r)=>n==="__v_isReactive"?!i:n==="__v_isReadonly"?i:n==="__v_raw"?s:Reflect.get(ne(e,n)&&n in s?e:s,n,r)}const hC={get:vv(!1,!1)},uC={get:vv(!1,!0)},dC={get:vv(!0,!1)};const dA=new WeakMap,fA=new WeakMap,pA=new WeakMap,fC=new WeakMap;function pC(i){switch(i){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function gC(i){return i.__v_skip||!Object.isExtensible(i)?0:pC(H1(i))}function tf(i){return qo(i)?i:_v(i,!1,rC,hC,dA)}function gA(i){return _v(i,!1,aC,uC,fA)}function mA(i){return _v(i,!0,oC,dC,pA)}function _v(i,t,e,s,n){if(!_e(i)||i.__v_raw&&!(t&&i.__v_isReactive))return i;const r=gC(i);if(r===0)return i;const o=n.get(i);if(o)return o;const l=new Proxy(i,r===2?s:e);return n.set(i,l),l}function Hr(i){return qo(i)?Hr(i.__v_raw):!!(i&&i.__v_isReactive)}function qo(i){return!!(i&&i.__v_isReadonly)}function zi(i){return!!(i&&i.__v_isShallow)}function yv(i){return i?!!i.__v_raw:!1}function Qt(i){const t=i&&i.__v_raw;return t?Qt(t):i}function wv(i){return!ne(i,"__v_skip")&&Object.isExtensible(i)&&Gw(i,"__v_skip",!0),i}const ys=i=>_e(i)?tf(i):i,Cp=i=>_e(i)?mA(i):i;function Oe(i){return i?i.__v_isRef===!0:!1}function zt(i){return bA(i,!1)}function mC(i){return bA(i,!0)}function bA(i,t){return Oe(i)?i:new bC(i,t)}class bC{constructor(t,e){this.dep=new bv,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=e?t:Qt(t),this._value=e?t:ys(t),this.__v_isShallow=e}get value(){return this.dep.track(),this._value}set value(t){const e=this._rawValue,s=this.__v_isShallow||zi(t)||qo(t);t=s?t:Qt(t),jo(t,e)&&(this._rawValue=t,this._value=s?t:ys(t),this.dep.trigger())}}function De(i){return Oe(i)?i.value:i}const vC={get:(i,t,e)=>t==="__v_raw"?i:De(Reflect.get(i,t,e)),set:(i,t,e,s)=>{const n=i[t];return Oe(n)&&!Oe(e)?(n.value=e,!0):Reflect.set(i,t,e,s)}};function vA(i){return Hr(i)?i:new Proxy(i,vC)}function _C(i){const t=Tt(i)?new Array(i.length):{};for(const e in i)t[e]=_A(i,e);return t}class yC{constructor(t,e,s){this._object=t,this._key=e,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return Z1(Qt(this._object),this._key)}}class wC{constructor(t){this._getter=t,this.__v_isRef=!0,this.__v_isReadonly=!0,this._value=void 0}get value(){return this._value=this._getter()}}function AC(i,t,e){return Oe(i)?i:Nt(i)?new wC(i):_e(i)&&arguments.length>1?_A(i,t,e):zt(i)}function _A(i,t,e){const s=i[t];return Oe(s)?s:new yC(i,t,e)}class EC{constructor(t,e,s){this.fn=t,this.setter=e,this._value=void 0,this.dep=new bv(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=gu-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!e,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&Ae!==this)return iA(this,!0),!0}get value(){const t=this.dep.track();return oA(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function SC(i,t,e=!1){let s,n;return Nt(i)?s=i:(s=i.get,n=i.set),new EC(s,n,e)}const Lf={},Tp=new WeakMap;let pa;function xC(i,t=!1,e=pa){if(e){let s=Tp.get(e);s||Tp.set(e,s=[]),s.push(i)}}function CC(i,t,e=ve){const{immediate:s,deep:n,once:r,scheduler:o,augmentJob:l,call:c}=e,h=R=>n?R:zi(R)||n===!1||n===0?$r(R,1):$r(R);let u,f,p,g,_=!1,v=!1;if(Oe(i)?(f=()=>i.value,_=zi(i)):Hr(i)?(f=()=>h(i),_=!0):Tt(i)?(v=!0,_=i.some(R=>Hr(R)||zi(R)),f=()=>i.map(R=>{if(Oe(R))return R.value;if(Hr(R))return h(R);if(Nt(R))return c?c(R,2):R()})):Nt(i)?t?f=c?()=>c(i,2):i:f=()=>{if(p){Ur();try{p()}finally{zr()}}const R=pa;pa=u;try{return c?c(i,3,[g]):i(g)}finally{pa=R}}:f=qn,t&&n){const R=f,I=n===!0?1/0:n;f=()=>$r(R(),I)}const E=tA(),S=()=>{u.stop(),E&&E.active&&dv(E.effects,u)};if(r&&t){const R=t;t=(...I)=>{R(...I),S()}}let C=v?new Array(i.length).fill(Lf):Lf;const T=R=>{if(!(!(u.flags&1)||!u.dirty&&!R))if(t){const I=u.run();if(n||_||(v?I.some((F,N)=>jo(F,C[N])):jo(I,C))){p&&p();const F=pa;pa=u;try{const N=[I,C===Lf?void 0:v&&C[0]===Lf?[]:C,g];c?c(t,3,N):t(...N),C=I}finally{pa=F}}}else u.run()};return l&&l(T),u=new eA(f),u.scheduler=o?()=>o(T,!1):T,g=R=>xC(R,!1,u),p=u.onStop=()=>{const R=Tp.get(u);if(R){if(c)c(R,4);else for(const I of R)I();Tp.delete(u)}},t?s?T(!0):C=u.run():o?o(T.bind(null,!0),!0):u.run(),S.pause=u.pause.bind(u),S.resume=u.resume.bind(u),S.stop=S,S}function $r(i,t=1/0,e){if(t<=0||!_e(i)||i.__v_skip||(e=e||new Set,e.has(i)))return i;if(e.add(i),t--,Oe(i))$r(i.value,t,e);else if(Tt(i))for(let s=0;s<i.length;s++)$r(i[s],t,e);else if(ug(i)||dc(i))i.forEach(s=>{$r(s,t,e)});else if(Ww(i)){for(const s in i)$r(i[s],t,e);for(const s of Object.getOwnPropertySymbols(i))Object.prototype.propertyIsEnumerable.call(i,s)&&$r(i[s],t,e)}return i}/**
* @vue/runtime-core v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function ef(i,t,e,s){try{return s?i(...s):i()}catch(n){vg(n,t,e)}}function Gn(i,t,e,s){if(Nt(i)){const n=ef(i,t,e,s);return n&&zw(n)&&n.catch(r=>{vg(r,t,e)}),n}if(Tt(i)){const n=[];for(let r=0;r<i.length;r++)n.push(Gn(i[r],t,e,s));return n}}function vg(i,t,e,s=!0){const n=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||ve;if(t){let l=t.parent;const c=t.proxy,h=`https://vuejs.org/error-reference/#runtime-${e}`;for(;l;){const u=l.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](i,c,h)===!1)return}l=l.parent}if(r){Ur(),ef(r,null,10,[i,c,h]),zr();return}}TC(i,e,n,s,o)}function TC(i,t,e,s=!0,n=!1){if(n)throw i;console.error(i)}const Xs=[];let xn=-1;const fc=[];let Zr=null,Zl=0;const yA=Promise.resolve();let Pp=null;function Vo(i){const t=Pp||yA;return i?t.then(this?i.bind(this):i):t}function PC(i){let t=xn+1,e=Xs.length;for(;t<e;){const s=t+e>>>1,n=Xs[s],r=bu(n);r<i||r===i&&n.flags&2?t=s+1:e=s}return t}function Av(i){if(!(i.flags&1)){const t=bu(i),e=Xs[Xs.length-1];!e||!(i.flags&2)&&t>=bu(e)?Xs.push(i):Xs.splice(PC(t),0,i),i.flags|=1,wA()}}function wA(){Pp||(Pp=yA.then(EA))}function RC(i){Tt(i)?fc.push(...i):Zr&&i.id===-1?Zr.splice(Zl+1,0,i):i.flags&1||(fc.push(i),i.flags|=1),wA()}function Ry(i,t,e=xn+1){for(;e<Xs.length;e++){const s=Xs[e];if(s&&s.flags&2){if(i&&s.id!==i.uid)continue;Xs.splice(e,1),e--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function AA(i){if(fc.length){const t=[...new Set(fc)].sort((e,s)=>bu(e)-bu(s));if(fc.length=0,Zr){Zr.push(...t);return}for(Zr=t,Zl=0;Zl<Zr.length;Zl++){const e=Zr[Zl];e.flags&4&&(e.flags&=-2),e.flags&8||e(),e.flags&=-2}Zr=null,Zl=0}}const bu=i=>i.id==null?i.flags&2?-1:1/0:i.id;function EA(i){try{for(xn=0;xn<Xs.length;xn++){const t=Xs[xn];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),ef(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;xn<Xs.length;xn++){const t=Xs[xn];t&&(t.flags&=-2)}xn=-1,Xs.length=0,AA(),Pp=null,(Xs.length||fc.length)&&EA()}}let ii=null,SA=null;function Rp(i){const t=ii;return ii=i,SA=i&&i.type.__scopeId||null,t}function Uo(i,t=ii,e){if(!t||i._n)return i;const s=(...n)=>{s._d&&By(-1);const r=Rp(t);let o;try{o=i(...n)}finally{Rp(r),s._d&&By(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Cn(i,t){if(ii===null)return i;const e=Ag(ii),s=i.dirs||(i.dirs=[]);for(let n=0;n<t.length;n++){let[r,o,l,c=ve]=t[n];r&&(Nt(r)&&(r={mounted:r,updated:r}),r.deep&&$r(o),s.push({dir:r,instance:e,value:o,oldValue:void 0,arg:l,modifiers:c}))}return i}function ua(i,t,e,s){const n=i.dirs,r=t&&t.dirs;for(let o=0;o<n.length;o++){const l=n[o];r&&(l.oldValue=r[o].value);let c=l.dir[s];c&&(Ur(),Gn(c,e,8,[i.el,l,i,t]),zr())}}const kC=Symbol("_vte"),IC=i=>i.__isTeleport;function Ev(i,t){i.shapeFlag&6&&i.component?(i.transition=t,Ev(i.component.subTree,t)):i.shapeFlag&128?(i.ssContent.transition=t.clone(i.ssContent),i.ssFallback.transition=t.clone(i.ssFallback)):i.transition=t}/*! #__NO_SIDE_EFFECTS__ */function Yn(i,t){return Nt(i)?Ms({name:i.name},t,{setup:i}):i}function xA(i){i.ids=[i.ids[0]+i.ids[2]+++"-",0,0]}function kp(i,t,e,s,n=!1){if(Tt(i)){i.forEach((_,v)=>kp(_,t&&(Tt(t)?t[v]:t),e,s,n));return}if(cu(s)&&!n){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&kp(i,t,e,s.component.subTree);return}const r=s.shapeFlag&4?Ag(s.component):s.el,o=n?null:r,{i:l,r:c}=i,h=t&&t.r,u=l.refs===ve?l.refs={}:l.refs,f=l.setupState,p=Qt(f),g=f===ve?()=>!1:_=>ne(p,_);if(h!=null&&h!==c&&(Qe(h)?(u[h]=null,g(h)&&(f[h]=null)):Oe(h)&&(h.value=null)),Nt(c))ef(c,l,12,[o,u]);else{const _=Qe(c),v=Oe(c);if(_||v){const E=()=>{if(i.f){const S=_?g(c)?f[c]:u[c]:c.value;n?Tt(S)&&dv(S,r):Tt(S)?S.includes(r)||S.push(r):_?(u[c]=[r],g(c)&&(f[c]=u[c])):(c.value=[r],i.k&&(u[i.k]=c.value))}else _?(u[c]=o,g(c)&&(f[c]=o)):v&&(c.value=o,i.k&&(u[i.k]=o))};o?(E.id=-1,li(E,e)):E()}}}pg().requestIdleCallback;pg().cancelIdleCallback;const cu=i=>!!i.type.__asyncLoader,CA=i=>i.type.__isKeepAlive;function MC(i,t){TA(i,"a",t)}function LC(i,t){TA(i,"da",t)}function TA(i,t,e=ws){const s=i.__wdc||(i.__wdc=()=>{let n=e;for(;n;){if(n.isDeactivated)return;n=n.parent}return i()});if(_g(t,s,e),e){let n=e.parent;for(;n&&n.parent;)CA(n.parent.vnode)&&DC(s,t,e,n),n=n.parent}}function DC(i,t,e,s){const n=_g(t,i,s,!0);PA(()=>{dv(s[t],n)},e)}function _g(i,t,e=ws,s=!1){if(e){const n=e[i]||(e[i]=[]),r=t.__weh||(t.__weh=(...o)=>{Ur();const l=nf(e),c=Gn(t,e,i,o);return l(),zr(),c});return s?n.unshift(r):n.push(r),r}}const Wr=i=>(t,e=ws)=>{(!_u||i==="sp")&&_g(i,(...s)=>t(...s),e)},OC=Wr("bm"),sf=Wr("m"),NC=Wr("bu"),FC=Wr("u"),$C=Wr("bum"),PA=Wr("um"),BC=Wr("sp"),HC=Wr("rtg"),jC=Wr("rtc");function VC(i,t=ws){_g("ec",i,t)}const UC="components";function Sv(i,t){return qC(UC,i,!0,t)||i}const zC=Symbol.for("v-ndc");function qC(i,t,e=!0,s=!1){const n=ii||ws;if(n){const r=n.type;{const l=MT(r,!1);if(l&&(l===t||l===Wi(t)||l===fg(Wi(t))))return r}const o=ky(n[i]||r[i],t)||ky(n.appContext[i],t);return!o&&s?r:o}}function ky(i,t){return i&&(i[t]||i[Wi(t)]||i[fg(Wi(t))])}function Ki(i,t,e,s){let n;const r=e,o=Tt(i);if(o||Qe(i)){const l=o&&Hr(i);let c=!1,h=!1;l&&(c=!zi(i),h=qo(i),i=bg(i)),n=new Array(i.length);for(let u=0,f=i.length;u<f;u++)n[u]=t(c?h?Cp(ys(i[u])):ys(i[u]):i[u],u,void 0,r)}else if(typeof i=="number"){n=new Array(i);for(let l=0;l<i;l++)n[l]=t(l+1,l,void 0,r)}else if(_e(i))if(i[Symbol.iterator])n=Array.from(i,(l,c)=>t(l,c,void 0,r));else{const l=Object.keys(i);n=new Array(l.length);for(let c=0,h=l.length;c<h;c++){const u=l[c];n[c]=t(i[u],u,c,r)}}else n=[];return n}const Om=i=>i?KA(i)?Ag(i):Om(i.parent):null,hu=Ms(Object.create(null),{$:i=>i,$el:i=>i.vnode.el,$data:i=>i.data,$props:i=>i.props,$attrs:i=>i.attrs,$slots:i=>i.slots,$refs:i=>i.refs,$parent:i=>Om(i.parent),$root:i=>Om(i.root),$host:i=>i.ce,$emit:i=>i.emit,$options:i=>kA(i),$forceUpdate:i=>i.f||(i.f=()=>{Av(i.update)}),$nextTick:i=>i.n||(i.n=Vo.bind(i.proxy)),$watch:i=>fT.bind(i)}),gm=(i,t)=>i!==ve&&!i.__isScriptSetup&&ne(i,t),WC={get({_:i},t){if(t==="__v_skip")return!0;const{ctx:e,setupState:s,data:n,props:r,accessCache:o,type:l,appContext:c}=i;let h;if(t[0]!=="$"){const g=o[t];if(g!==void 0)switch(g){case 1:return s[t];case 2:return n[t];case 4:return e[t];case 3:return r[t]}else{if(gm(s,t))return o[t]=1,s[t];if(n!==ve&&ne(n,t))return o[t]=2,n[t];if((h=i.propsOptions[0])&&ne(h,t))return o[t]=3,r[t];if(e!==ve&&ne(e,t))return o[t]=4,e[t];Nm&&(o[t]=0)}}const u=hu[t];let f,p;if(u)return t==="$attrs"&&Is(i.attrs,"get",""),u(i);if((f=l.__cssModules)&&(f=f[t]))return f;if(e!==ve&&ne(e,t))return o[t]=4,e[t];if(p=c.config.globalProperties,ne(p,t))return p[t]},set({_:i},t,e){const{data:s,setupState:n,ctx:r}=i;return gm(n,t)?(n[t]=e,!0):s!==ve&&ne(s,t)?(s[t]=e,!0):ne(i.props,t)||t[0]==="$"&&t.slice(1)in i?!1:(r[t]=e,!0)},has({_:{data:i,setupState:t,accessCache:e,ctx:s,appContext:n,propsOptions:r}},o){let l;return!!e[o]||i!==ve&&ne(i,o)||gm(t,o)||(l=r[0])&&ne(l,o)||ne(s,o)||ne(hu,o)||ne(n.config.globalProperties,o)},defineProperty(i,t,e){return e.get!=null?i._.accessCache[t]=0:ne(e,"value")&&this.set(i,t,e.value,null),Reflect.defineProperty(i,t,e)}};function Iy(i){return Tt(i)?i.reduce((t,e)=>(t[e]=null,t),{}):i}let Nm=!0;function GC(i){const t=kA(i),e=i.proxy,s=i.ctx;Nm=!1,t.beforeCreate&&My(t.beforeCreate,i,"bc");const{data:n,computed:r,methods:o,watch:l,provide:c,inject:h,created:u,beforeMount:f,mounted:p,beforeUpdate:g,updated:_,activated:v,deactivated:E,beforeDestroy:S,beforeUnmount:C,destroyed:T,unmounted:R,render:I,renderTracked:F,renderTriggered:N,errorCaptured:H,serverPrefetch:U,expose:Q,inheritAttrs:tt,components:Et,directives:wt,filters:Rt}=t;if(h&&XC(h,s,null),o)for(const X in o){const et=o[X];Nt(et)&&(s[X]=et.bind(e))}if(n){const X=n.call(e,e);_e(X)&&(i.data=tf(X))}if(Nm=!0,r)for(const X in r){const et=r[X],Y=Nt(et)?et.bind(e,e):Nt(et.get)?et.get.bind(e,e):qn,L=!Nt(et)&&Nt(et.set)?et.set.bind(e):qn,bt=$e({get:Y,set:L});Object.defineProperty(s,X,{enumerable:!0,configurable:!0,get:()=>bt.value,set:Ct=>bt.value=Ct})}if(l)for(const X in l)RA(l[X],s,e,X);if(c){const X=Nt(c)?c.call(e):c;Reflect.ownKeys(X).forEach(et=>{Uf(et,X[et])})}u&&My(u,i,"c");function J(X,et){Tt(et)?et.forEach(Y=>X(Y.bind(e))):et&&X(et.bind(e))}if(J(OC,f),J(sf,p),J(NC,g),J(FC,_),J(MC,v),J(LC,E),J(VC,H),J(jC,F),J(HC,N),J($C,C),J(PA,R),J(BC,U),Tt(Q))if(Q.length){const X=i.exposed||(i.exposed={});Q.forEach(et=>{Object.defineProperty(X,et,{get:()=>e[et],set:Y=>e[et]=Y})})}else i.exposed||(i.exposed={});I&&i.render===qn&&(i.render=I),tt!=null&&(i.inheritAttrs=tt),Et&&(i.components=Et),wt&&(i.directives=wt),U&&xA(i)}function XC(i,t,e=qn){Tt(i)&&(i=Fm(i));for(const s in i){const n=i[s];let r;_e(n)?"default"in n?r=fn(n.from||s,n.default,!0):r=fn(n.from||s):r=fn(n),Oe(r)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[s]=r}}function My(i,t,e){Gn(Tt(i)?i.map(s=>s.bind(t.proxy)):i.bind(t.proxy),t,e)}function RA(i,t,e,s){let n=s.includes(".")?UA(e,s):()=>e[s];if(Qe(i)){const r=t[i];Nt(r)&&Rl(n,r)}else if(Nt(i))Rl(n,i.bind(e));else if(_e(i))if(Tt(i))i.forEach(r=>RA(r,t,e,s));else{const r=Nt(i.handler)?i.handler.bind(e):t[i.handler];Nt(r)&&Rl(n,r,i)}}function kA(i){const t=i.type,{mixins:e,extends:s}=t,{mixins:n,optionsCache:r,config:{optionMergeStrategies:o}}=i.appContext,l=r.get(t);let c;return l?c=l:!n.length&&!e&&!s?c=t:(c={},n.length&&n.forEach(h=>Ip(c,h,o,!0)),Ip(c,t,o)),_e(t)&&r.set(t,c),c}function Ip(i,t,e,s=!1){const{mixins:n,extends:r}=t;r&&Ip(i,r,e,!0),n&&n.forEach(o=>Ip(i,o,e,!0));for(const o in t)if(!(s&&o==="expose")){const l=KC[o]||e&&e[o];i[o]=l?l(i[o],t[o]):t[o]}return i}const KC={data:Ly,props:Dy,emits:Dy,methods:Hh,computed:Hh,beforeCreate:Hs,created:Hs,beforeMount:Hs,mounted:Hs,beforeUpdate:Hs,updated:Hs,beforeDestroy:Hs,beforeUnmount:Hs,destroyed:Hs,unmounted:Hs,activated:Hs,deactivated:Hs,errorCaptured:Hs,serverPrefetch:Hs,components:Hh,directives:Hh,watch:QC,provide:Ly,inject:YC};function Ly(i,t){return t?i?function(){return Ms(Nt(i)?i.call(this,this):i,Nt(t)?t.call(this,this):t)}:t:i}function YC(i,t){return Hh(Fm(i),Fm(t))}function Fm(i){if(Tt(i)){const t={};for(let e=0;e<i.length;e++)t[i[e]]=i[e];return t}return i}function Hs(i,t){return i?[...new Set([].concat(i,t))]:t}function Hh(i,t){return i?Ms(Object.create(null),i,t):t}function Dy(i,t){return i?Tt(i)&&Tt(t)?[...new Set([...i,...t])]:Ms(Object.create(null),Iy(i),Iy(t??{})):t}function QC(i,t){if(!i)return t;if(!t)return i;const e=Ms(Object.create(null),i);for(const s in t)e[s]=Hs(i[s],t[s]);return e}function IA(){return{app:null,config:{isNativeTag:$1,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let JC=0;function ZC(i,t){return function(s,n=null){Nt(s)||(s=Ms({},s)),n!=null&&!_e(n)&&(n=null);const r=IA(),o=new WeakSet,l=[];let c=!1;const h=r.app={_uid:JC++,_component:s,_props:n,_container:null,_context:r,_instance:null,version:DT,get config(){return r.config},set config(u){},use(u,...f){return o.has(u)||(u&&Nt(u.install)?(o.add(u),u.install(h,...f)):Nt(u)&&(o.add(u),u(h,...f))),h},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),h},component(u,f){return f?(r.components[u]=f,h):r.components[u]},directive(u,f){return f?(r.directives[u]=f,h):r.directives[u]},mount(u,f,p){if(!c){const g=h._ceVNode||Ie(s,n);return g.appContext=r,p===!0?p="svg":p===!1&&(p=void 0),i(g,u,p),c=!0,h._container=u,u.__vue_app__=h,Ag(g.component)}},onUnmount(u){l.push(u)},unmount(){c&&(Gn(l,h._instance,16),i(null,h._container),delete h._container.__vue_app__)},provide(u,f){return r.provides[u]=f,h},runWithContext(u){const f=Pl;Pl=h;try{return u()}finally{Pl=f}}};return h}}let Pl=null;function Uf(i,t){if(ws){let e=ws.provides;const s=ws.parent&&ws.parent.provides;s===e&&(e=ws.provides=Object.create(s)),e[i]=t}}function fn(i,t,e=!1){const s=ws||ii;if(s||Pl){const n=Pl?Pl._context.provides:s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(n&&i in n)return n[i];if(arguments.length>1)return e&&Nt(t)?t.call(s&&s.proxy):t}}function tT(){return!!(ws||ii||Pl)}const MA={},LA=()=>Object.create(MA),DA=i=>Object.getPrototypeOf(i)===MA;function eT(i,t,e,s=!1){const n={},r=LA();i.propsDefaults=Object.create(null),OA(i,t,n,r);for(const o in i.propsOptions[0])o in n||(n[o]=void 0);e?i.props=s?n:gA(n):i.type.props?i.props=n:i.props=r,i.attrs=r}function sT(i,t,e,s){const{props:n,attrs:r,vnode:{patchFlag:o}}=i,l=Qt(n),[c]=i.propsOptions;let h=!1;if((s||o>0)&&!(o&16)){if(o&8){const u=i.vnode.dynamicProps;for(let f=0;f<u.length;f++){let p=u[f];if(yg(i.emitsOptions,p))continue;const g=t[p];if(c)if(ne(r,p))g!==r[p]&&(r[p]=g,h=!0);else{const _=Wi(p);n[_]=$m(c,l,_,g,i,!1)}else g!==r[p]&&(r[p]=g,h=!0)}}}else{OA(i,t,n,r)&&(h=!0);let u;for(const f in l)(!t||!ne(t,f)&&((u=Jo(f))===f||!ne(t,u)))&&(c?e&&(e[f]!==void 0||e[u]!==void 0)&&(n[f]=$m(c,l,f,void 0,i,!0)):delete n[f]);if(r!==l)for(const f in r)(!t||!ne(t,f))&&(delete r[f],h=!0)}h&&Fr(i.attrs,"set","")}function OA(i,t,e,s){const[n,r]=i.propsOptions;let o=!1,l;if(t)for(let c in t){if(ou(c))continue;const h=t[c];let u;n&&ne(n,u=Wi(c))?!r||!r.includes(u)?e[u]=h:(l||(l={}))[u]=h:yg(i.emitsOptions,c)||(!(c in s)||h!==s[c])&&(s[c]=h,o=!0)}if(r){const c=Qt(e),h=l||ve;for(let u=0;u<r.length;u++){const f=r[u];e[f]=$m(n,c,f,h[f],i,!ne(h,f))}}return o}function $m(i,t,e,s,n,r){const o=i[e];if(o!=null){const l=ne(o,"default");if(l&&s===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&Nt(c)){const{propsDefaults:h}=n;if(e in h)s=h[e];else{const u=nf(n);s=h[e]=c.call(null,t),u()}}else s=c;n.ce&&n.ce._setProp(e,s)}o[0]&&(r&&!l?s=!1:o[1]&&(s===""||s===Jo(e))&&(s=!0))}return s}const iT=new WeakMap;function NA(i,t,e=!1){const s=e?iT:t.propsCache,n=s.get(i);if(n)return n;const r=i.props,o={},l=[];let c=!1;if(!Nt(i)){const u=f=>{c=!0;const[p,g]=NA(f,t,!0);Ms(o,p),g&&l.push(...g)};!e&&t.mixins.length&&t.mixins.forEach(u),i.extends&&u(i.extends),i.mixins&&i.mixins.forEach(u)}if(!r&&!c)return _e(i)&&s.set(i,uc),uc;if(Tt(r))for(let u=0;u<r.length;u++){const f=Wi(r[u]);Oy(f)&&(o[f]=ve)}else if(r)for(const u in r){const f=Wi(u);if(Oy(f)){const p=r[u],g=o[f]=Tt(p)||Nt(p)?{type:p}:Ms({},p),_=g.type;let v=!1,E=!0;if(Tt(_))for(let S=0;S<_.length;++S){const C=_[S],T=Nt(C)&&C.name;if(T==="Boolean"){v=!0;break}else T==="String"&&(E=!1)}else v=Nt(_)&&_.name==="Boolean";g[0]=v,g[1]=E,(v||ne(g,"default"))&&l.push(f)}}const h=[o,l];return _e(i)&&s.set(i,h),h}function Oy(i){return i[0]!=="$"&&!ou(i)}const xv=i=>i[0]==="_"||i==="$stable",Cv=i=>Tt(i)?i.map(Un):[Un(i)],nT=(i,t,e)=>{if(t._n)return t;const s=Uo((...n)=>Cv(t(...n)),e);return s._c=!1,s},FA=(i,t,e)=>{const s=i._ctx;for(const n in i){if(xv(n))continue;const r=i[n];if(Nt(r))t[n]=nT(n,r,s);else if(r!=null){const o=Cv(r);t[n]=()=>o}}},$A=(i,t)=>{const e=Cv(t);i.slots.default=()=>e},BA=(i,t,e)=>{for(const s in t)(e||!xv(s))&&(i[s]=t[s])},rT=(i,t,e)=>{const s=i.slots=LA();if(i.vnode.shapeFlag&32){const n=t._;n?(BA(s,t,e),e&&Gw(s,"_",n,!0)):FA(t,s)}else t&&$A(i,t)},oT=(i,t,e)=>{const{vnode:s,slots:n}=i;let r=!0,o=ve;if(s.shapeFlag&32){const l=t._;l?e&&l===1?r=!1:BA(n,t,e):(r=!t.$stable,FA(t,n)),o=t}else t&&($A(i,t),o={default:1});if(r)for(const l in n)!xv(l)&&o[l]==null&&delete n[l]},li=yT;function aT(i){return lT(i)}function lT(i,t){const e=pg();e.__VUE__=!0;const{insert:s,remove:n,patchProp:r,createElement:o,createText:l,createComment:c,setText:h,setElementText:u,parentNode:f,nextSibling:p,setScopeId:g=qn,insertStaticContent:_}=i,v=(P,k,$,z=null,q=null,W=null,at=void 0,rt=null,it=!!k.dynamicChildren)=>{if(P===k)return;P&&!Lh(P,k)&&(z=B(P),Ct(P,q,W,!0),P=null),k.patchFlag===-2&&(it=!1,k.dynamicChildren=null);const{type:K,ref:St,shapeFlag:lt}=k;switch(K){case wg:E(P,k,$,z);break;case Wo:S(P,k,$,z);break;case zf:P==null&&C(k,$,z,at);break;case ze:Et(P,k,$,z,q,W,at,rt,it);break;default:lt&1?I(P,k,$,z,q,W,at,rt,it):lt&6?wt(P,k,$,z,q,W,at,rt,it):(lt&64||lt&128)&&K.process(P,k,$,z,q,W,at,rt,it,pt)}St!=null&&q&&kp(St,P&&P.ref,W,k||P,!k)},E=(P,k,$,z)=>{if(P==null)s(k.el=l(k.children),$,z);else{const q=k.el=P.el;k.children!==P.children&&h(q,k.children)}},S=(P,k,$,z)=>{P==null?s(k.el=c(k.children||""),$,z):k.el=P.el},C=(P,k,$,z)=>{[P.el,P.anchor]=_(P.children,k,$,z,P.el,P.anchor)},T=({el:P,anchor:k},$,z)=>{let q;for(;P&&P!==k;)q=p(P),s(P,$,z),P=q;s(k,$,z)},R=({el:P,anchor:k})=>{let $;for(;P&&P!==k;)$=p(P),n(P),P=$;n(k)},I=(P,k,$,z,q,W,at,rt,it)=>{k.type==="svg"?at="svg":k.type==="math"&&(at="mathml"),P==null?F(k,$,z,q,W,at,rt,it):U(P,k,q,W,at,rt,it)},F=(P,k,$,z,q,W,at,rt)=>{let it,K;const{props:St,shapeFlag:lt,transition:_t,dirs:xt}=P;if(it=P.el=o(P.type,W,St&&St.is,St),lt&8?u(it,P.children):lt&16&&H(P.children,it,null,z,q,mm(P,W),at,rt),xt&&ua(P,null,z,"created"),N(it,P,P.scopeId,at,z),St){for(const he in St)he!=="value"&&!ou(he)&&r(it,he,null,St[he],W,z);"value"in St&&r(it,"value",null,St.value,W),(K=St.onVnodeBeforeMount)&&wn(K,z,P)}xt&&ua(P,null,z,"beforeMount");const qt=cT(q,_t);qt&&_t.beforeEnter(it),s(it,k,$),((K=St&&St.onVnodeMounted)||qt||xt)&&li(()=>{K&&wn(K,z,P),qt&&_t.enter(it),xt&&ua(P,null,z,"mounted")},q)},N=(P,k,$,z,q)=>{if($&&g(P,$),z)for(let W=0;W<z.length;W++)g(P,z[W]);if(q){let W=q.subTree;if(k===W||qA(W.type)&&(W.ssContent===k||W.ssFallback===k)){const at=q.vnode;N(P,at,at.scopeId,at.slotScopeIds,q.parent)}}},H=(P,k,$,z,q,W,at,rt,it=0)=>{for(let K=it;K<P.length;K++){const St=P[K]=rt?to(P[K]):Un(P[K]);v(null,St,k,$,z,q,W,at,rt)}},U=(P,k,$,z,q,W,at)=>{const rt=k.el=P.el;let{patchFlag:it,dynamicChildren:K,dirs:St}=k;it|=P.patchFlag&16;const lt=P.props||ve,_t=k.props||ve;let xt;if($&&da($,!1),(xt=_t.onVnodeBeforeUpdate)&&wn(xt,$,k,P),St&&ua(k,P,$,"beforeUpdate"),$&&da($,!0),(lt.innerHTML&&_t.innerHTML==null||lt.textContent&&_t.textContent==null)&&u(rt,""),K?Q(P.dynamicChildren,K,rt,$,z,mm(k,q),W):at||et(P,k,rt,null,$,z,mm(k,q),W,!1),it>0){if(it&16)tt(rt,lt,_t,$,q);else if(it&2&&lt.class!==_t.class&&r(rt,"class",null,_t.class,q),it&4&&r(rt,"style",lt.style,_t.style,q),it&8){const qt=k.dynamicProps;for(let he=0;he<qt.length;he++){const te=qt[he],Je=lt[te],He=_t[te];(He!==Je||te==="value")&&r(rt,te,Je,He,q,$)}}it&1&&P.children!==k.children&&u(rt,k.children)}else!at&&K==null&&tt(rt,lt,_t,$,q);((xt=_t.onVnodeUpdated)||St)&&li(()=>{xt&&wn(xt,$,k,P),St&&ua(k,P,$,"updated")},z)},Q=(P,k,$,z,q,W,at)=>{for(let rt=0;rt<k.length;rt++){const it=P[rt],K=k[rt],St=it.el&&(it.type===ze||!Lh(it,K)||it.shapeFlag&70)?f(it.el):$;v(it,K,St,null,z,q,W,at,!0)}},tt=(P,k,$,z,q)=>{if(k!==$){if(k!==ve)for(const W in k)!ou(W)&&!(W in $)&&r(P,W,k[W],null,q,z);for(const W in $){if(ou(W))continue;const at=$[W],rt=k[W];at!==rt&&W!=="value"&&r(P,W,rt,at,q,z)}"value"in $&&r(P,"value",k.value,$.value,q)}},Et=(P,k,$,z,q,W,at,rt,it)=>{const K=k.el=P?P.el:l(""),St=k.anchor=P?P.anchor:l("");let{patchFlag:lt,dynamicChildren:_t,slotScopeIds:xt}=k;xt&&(rt=rt?rt.concat(xt):xt),P==null?(s(K,$,z),s(St,$,z),H(k.children||[],$,St,q,W,at,rt,it)):lt>0&&lt&64&&_t&&P.dynamicChildren?(Q(P.dynamicChildren,_t,$,q,W,at,rt),(k.key!=null||q&&k===q.subTree)&&HA(P,k,!0)):et(P,k,$,St,q,W,at,rt,it)},wt=(P,k,$,z,q,W,at,rt,it)=>{k.slotScopeIds=rt,P==null?k.shapeFlag&512?q.ctx.activate(k,$,z,at,it):Rt(k,$,z,q,W,at,it):oe(P,k,it)},Rt=(P,k,$,z,q,W,at)=>{const rt=P.component=TT(P,z,q);if(CA(P)&&(rt.ctx.renderer=pt),PT(rt,!1,at),rt.asyncDep){if(q&&q.registerDep(rt,J,at),!P.el){const it=rt.subTree=Ie(Wo);S(null,it,k,$)}}else J(rt,P,k,$,q,W,at)},oe=(P,k,$)=>{const z=k.component=P.component;if(vT(P,k,$))if(z.asyncDep&&!z.asyncResolved){X(z,k,$);return}else z.next=k,z.update();else k.el=P.el,z.vnode=k},J=(P,k,$,z,q,W,at)=>{const rt=()=>{if(P.isMounted){let{next:lt,bu:_t,u:xt,parent:qt,vnode:he}=P;{const Ls=jA(P);if(Ls){lt&&(lt.el=he.el,X(P,lt,at)),Ls.asyncDep.then(()=>{P.isUnmounted||rt()});return}}let te=lt,Je;da(P,!1),lt?(lt.el=he.el,X(P,lt,at)):lt=he,_t&&Vf(_t),(Je=lt.props&&lt.props.onVnodeBeforeUpdate)&&wn(Je,qt,lt,he),da(P,!0);const He=Fy(P),ds=P.subTree;P.subTree=He,v(ds,He,f(ds.el),B(ds),P,q,W),lt.el=He.el,te===null&&_T(P,He.el),xt&&li(xt,q),(Je=lt.props&&lt.props.onVnodeUpdated)&&li(()=>wn(Je,qt,lt,he),q)}else{let lt;const{el:_t,props:xt}=k,{bm:qt,m:he,parent:te,root:Je,type:He}=P,ds=cu(k);da(P,!1),qt&&Vf(qt),!ds&&(lt=xt&&xt.onVnodeBeforeMount)&&wn(lt,te,k),da(P,!0);{Je.ce&&Je.ce._injectChildStyle(He);const Ls=P.subTree=Fy(P);v(null,Ls,$,z,P,q,W),k.el=Ls.el}if(he&&li(he,q),!ds&&(lt=xt&&xt.onVnodeMounted)){const Ls=k;li(()=>wn(lt,te,Ls),q)}(k.shapeFlag&256||te&&cu(te.vnode)&&te.vnode.shapeFlag&256)&&P.a&&li(P.a,q),P.isMounted=!0,k=$=z=null}};P.scope.on();const it=P.effect=new eA(rt);P.scope.off();const K=P.update=it.run.bind(it),St=P.job=it.runIfDirty.bind(it);St.i=P,St.id=P.uid,it.scheduler=()=>Av(St),da(P,!0),K()},X=(P,k,$)=>{k.component=P;const z=P.vnode.props;P.vnode=k,P.next=null,sT(P,k.props,z,$),oT(P,k.children,$),Ur(),Ry(P),zr()},et=(P,k,$,z,q,W,at,rt,it=!1)=>{const K=P&&P.children,St=P?P.shapeFlag:0,lt=k.children,{patchFlag:_t,shapeFlag:xt}=k;if(_t>0){if(_t&128){L(K,lt,$,z,q,W,at,rt,it);return}else if(_t&256){Y(K,lt,$,z,q,W,at,rt,it);return}}xt&8?(St&16&&Xt(K,q,W),lt!==K&&u($,lt)):St&16?xt&16?L(K,lt,$,z,q,W,at,rt,it):Xt(K,q,W,!0):(St&8&&u($,""),xt&16&&H(lt,$,z,q,W,at,rt,it))},Y=(P,k,$,z,q,W,at,rt,it)=>{P=P||uc,k=k||uc;const K=P.length,St=k.length,lt=Math.min(K,St);let _t;for(_t=0;_t<lt;_t++){const xt=k[_t]=it?to(k[_t]):Un(k[_t]);v(P[_t],xt,$,null,q,W,at,rt,it)}K>St?Xt(P,q,W,!0,!1,lt):H(k,$,z,q,W,at,rt,it,lt)},L=(P,k,$,z,q,W,at,rt,it)=>{let K=0;const St=k.length;let lt=P.length-1,_t=St-1;for(;K<=lt&&K<=_t;){const xt=P[K],qt=k[K]=it?to(k[K]):Un(k[K]);if(Lh(xt,qt))v(xt,qt,$,null,q,W,at,rt,it);else break;K++}for(;K<=lt&&K<=_t;){const xt=P[lt],qt=k[_t]=it?to(k[_t]):Un(k[_t]);if(Lh(xt,qt))v(xt,qt,$,null,q,W,at,rt,it);else break;lt--,_t--}if(K>lt){if(K<=_t){const xt=_t+1,qt=xt<St?k[xt].el:z;for(;K<=_t;)v(null,k[K]=it?to(k[K]):Un(k[K]),$,qt,q,W,at,rt,it),K++}}else if(K>_t)for(;K<=lt;)Ct(P[K],q,W,!0),K++;else{const xt=K,qt=K,he=new Map;for(K=qt;K<=_t;K++){const Ds=k[K]=it?to(k[K]):Un(k[K]);Ds.key!=null&&he.set(Ds.key,K)}let te,Je=0;const He=_t-qt+1;let ds=!1,Ls=0;const Zo=new Array(He);for(K=0;K<He;K++)Zo[K]=0;for(K=xt;K<=lt;K++){const Ds=P[K];if(Je>=He){Ct(Ds,q,W,!0);continue}let Pi;if(Ds.key!=null)Pi=he.get(Ds.key);else for(te=qt;te<=_t;te++)if(Zo[te-qt]===0&&Lh(Ds,k[te])){Pi=te;break}Pi===void 0?Ct(Ds,q,W,!0):(Zo[Pi-qt]=K+1,Pi>=Ls?Ls=Pi:ds=!0,v(Ds,k[Pi],$,null,q,W,at,rt,it),Je++)}const Fl=ds?hT(Zo):uc;for(te=Fl.length-1,K=He-1;K>=0;K--){const Ds=qt+K,Pi=k[Ds],df=Ds+1<St?k[Ds+1].el:z;Zo[K]===0?v(null,Pi,$,df,q,W,at,rt,it):ds&&(te<0||K!==Fl[te]?bt(Pi,$,df,2):te--)}}},bt=(P,k,$,z,q=null)=>{const{el:W,type:at,transition:rt,children:it,shapeFlag:K}=P;if(K&6){bt(P.component.subTree,k,$,z);return}if(K&128){P.suspense.move(k,$,z);return}if(K&64){at.move(P,k,$,pt);return}if(at===ze){s(W,k,$);for(let lt=0;lt<it.length;lt++)bt(it[lt],k,$,z);s(P.anchor,k,$);return}if(at===zf){T(P,k,$);return}if(z!==2&&K&1&&rt)if(z===0)rt.beforeEnter(W),s(W,k,$),li(()=>rt.enter(W),q);else{const{leave:lt,delayLeave:_t,afterLeave:xt}=rt,qt=()=>{P.ctx.isUnmounted?n(W):s(W,k,$)},he=()=>{lt(W,()=>{qt(),xt&&xt()})};_t?_t(W,qt,he):he()}else s(W,k,$)},Ct=(P,k,$,z=!1,q=!1)=>{const{type:W,props:at,ref:rt,children:it,dynamicChildren:K,shapeFlag:St,patchFlag:lt,dirs:_t,cacheIndex:xt}=P;if(lt===-2&&(q=!1),rt!=null&&(Ur(),kp(rt,null,$,P,!0),zr()),xt!=null&&(k.renderCache[xt]=void 0),St&256){k.ctx.deactivate(P);return}const qt=St&1&&_t,he=!cu(P);let te;if(he&&(te=at&&at.onVnodeBeforeUnmount)&&wn(te,k,P),St&6)Be(P.component,$,z);else{if(St&128){P.suspense.unmount($,z);return}qt&&ua(P,null,k,"beforeUnmount"),St&64?P.type.remove(P,k,$,pt,z):K&&!K.hasOnce&&(W!==ze||lt>0&&lt&64)?Xt(K,k,$,!1,!0):(W===ze&&lt&384||!q&&St&16)&&Xt(it,k,$),z&&Wt(P)}(he&&(te=at&&at.onVnodeUnmounted)||qt)&&li(()=>{te&&wn(te,k,P),qt&&ua(P,null,k,"unmounted")},$)},Wt=P=>{const{type:k,el:$,anchor:z,transition:q}=P;if(k===ze){xe($,z);return}if(k===zf){R(P);return}const W=()=>{n($),q&&!q.persisted&&q.afterLeave&&q.afterLeave()};if(P.shapeFlag&1&&q&&!q.persisted){const{leave:at,delayLeave:rt}=q,it=()=>at($,W);rt?rt(P.el,W,it):it()}else W()},xe=(P,k)=>{let $;for(;P!==k;)$=p(P),n(P),P=$;n(k)},Be=(P,k,$)=>{const{bum:z,scope:q,job:W,subTree:at,um:rt,m:it,a:K,parent:St,slots:{__:lt}}=P;Ny(it),Ny(K),z&&Vf(z),St&&Tt(lt)&&lt.forEach(_t=>{St.renderCache[_t]=void 0}),q.stop(),W&&(W.flags|=8,Ct(at,P,k,$)),rt&&li(rt,k),li(()=>{P.isUnmounted=!0},k),k&&k.pendingBranch&&!k.isUnmounted&&P.asyncDep&&!P.asyncResolved&&P.suspenseId===k.pendingId&&(k.deps--,k.deps===0&&k.resolve())},Xt=(P,k,$,z=!1,q=!1,W=0)=>{for(let at=W;at<P.length;at++)Ct(P[at],k,$,z,q)},B=P=>{if(P.shapeFlag&6)return B(P.component.subTree);if(P.shapeFlag&128)return P.suspense.next();const k=p(P.anchor||P.el),$=k&&k[kC];return $?p($):k};let V=!1;const st=(P,k,$)=>{P==null?k._vnode&&Ct(k._vnode,null,null,!0):v(k._vnode||null,P,k,null,null,null,$),k._vnode=P,V||(V=!0,Ry(),AA(),V=!1)},pt={p:v,um:Ct,m:bt,r:Wt,mt:Rt,mc:H,pc:et,pbc:Q,n:B,o:i};return{render:st,hydrate:void 0,createApp:ZC(st)}}function mm({type:i,props:t},e){return e==="svg"&&i==="foreignObject"||e==="mathml"&&i==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:e}function da({effect:i,job:t},e){e?(i.flags|=32,t.flags|=4):(i.flags&=-33,t.flags&=-5)}function cT(i,t){return(!i||i&&!i.pendingBranch)&&t&&!t.persisted}function HA(i,t,e=!1){const s=i.children,n=t.children;if(Tt(s)&&Tt(n))for(let r=0;r<s.length;r++){const o=s[r];let l=n[r];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=n[r]=to(n[r]),l.el=o.el),!e&&l.patchFlag!==-2&&HA(o,l)),l.type===wg&&(l.el=o.el),l.type===Wo&&!l.el&&(l.el=o.el)}}function hT(i){const t=i.slice(),e=[0];let s,n,r,o,l;const c=i.length;for(s=0;s<c;s++){const h=i[s];if(h!==0){if(n=e[e.length-1],i[n]<h){t[s]=n,e.push(s);continue}for(r=0,o=e.length-1;r<o;)l=r+o>>1,i[e[l]]<h?r=l+1:o=l;h<i[e[r]]&&(r>0&&(t[s]=e[r-1]),e[r]=s)}}for(r=e.length,o=e[r-1];r-- >0;)e[r]=o,o=t[o];return e}function jA(i){const t=i.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:jA(t)}function Ny(i){if(i)for(let t=0;t<i.length;t++)i[t].flags|=8}const uT=Symbol.for("v-scx"),dT=()=>fn(uT);function Rl(i,t,e){return VA(i,t,e)}function VA(i,t,e=ve){const{immediate:s,deep:n,flush:r,once:o}=e,l=Ms({},e),c=t&&s||!t&&r!=="post";let h;if(_u){if(r==="sync"){const g=dT();h=g.__watcherHandles||(g.__watcherHandles=[])}else if(!c){const g=()=>{};return g.stop=qn,g.resume=qn,g.pause=qn,g}}const u=ws;l.call=(g,_,v)=>Gn(g,u,_,v);let f=!1;r==="post"?l.scheduler=g=>{li(g,u&&u.suspense)}:r!=="sync"&&(f=!0,l.scheduler=(g,_)=>{_?g():Av(g)}),l.augmentJob=g=>{t&&(g.flags|=4),f&&(g.flags|=2,u&&(g.id=u.uid,g.i=u))};const p=CC(i,t,l);return _u&&(h?h.push(p):c&&p()),p}function fT(i,t,e){const s=this.proxy,n=Qe(i)?i.includes(".")?UA(s,i):()=>s[i]:i.bind(s,s);let r;Nt(t)?r=t:(r=t.handler,e=t);const o=nf(this),l=VA(n,r.bind(s),e);return o(),l}function UA(i,t){const e=t.split(".");return()=>{let s=i;for(let n=0;n<e.length&&s;n++)s=s[e[n]];return s}}const pT=(i,t)=>t==="modelValue"||t==="model-value"?i.modelModifiers:i[`${t}Modifiers`]||i[`${Wi(t)}Modifiers`]||i[`${Jo(t)}Modifiers`];function gT(i,t,...e){if(i.isUnmounted)return;const s=i.vnode.props||ve;let n=e;const r=t.startsWith("update:"),o=r&&pT(s,t.slice(7));o&&(o.trim&&(n=e.map(u=>Qe(u)?u.trim():u)),o.number&&(n=e.map(Im)));let l,c=s[l=hm(t)]||s[l=hm(Wi(t))];!c&&r&&(c=s[l=hm(Jo(t))]),c&&Gn(c,i,6,n);const h=s[l+"Once"];if(h){if(!i.emitted)i.emitted={};else if(i.emitted[l])return;i.emitted[l]=!0,Gn(h,i,6,n)}}function zA(i,t,e=!1){const s=t.emitsCache,n=s.get(i);if(n!==void 0)return n;const r=i.emits;let o={},l=!1;if(!Nt(i)){const c=h=>{const u=zA(h,t,!0);u&&(l=!0,Ms(o,u))};!e&&t.mixins.length&&t.mixins.forEach(c),i.extends&&c(i.extends),i.mixins&&i.mixins.forEach(c)}return!r&&!l?(_e(i)&&s.set(i,null),null):(Tt(r)?r.forEach(c=>o[c]=null):Ms(o,r),_e(i)&&s.set(i,o),o)}function yg(i,t){return!i||!hg(t)?!1:(t=t.slice(2).replace(/Once$/,""),ne(i,t[0].toLowerCase()+t.slice(1))||ne(i,Jo(t))||ne(i,t))}function Fy(i){const{type:t,vnode:e,proxy:s,withProxy:n,propsOptions:[r],slots:o,attrs:l,emit:c,render:h,renderCache:u,props:f,data:p,setupState:g,ctx:_,inheritAttrs:v}=i,E=Rp(i);let S,C;try{if(e.shapeFlag&4){const R=n||s,I=R;S=Un(h.call(I,R,u,f,g,p,_)),C=l}else{const R=t;S=Un(R.length>1?R(f,{attrs:l,slots:o,emit:c}):R(f,null)),C=t.props?l:mT(l)}}catch(R){uu.length=0,vg(R,i,1),S=Ie(Wo)}let T=S;if(C&&v!==!1){const R=Object.keys(C),{shapeFlag:I}=T;R.length&&I&7&&(r&&R.some(uv)&&(C=bT(C,r)),T=Ah(T,C,!1,!0))}return e.dirs&&(T=Ah(T,null,!1,!0),T.dirs=T.dirs?T.dirs.concat(e.dirs):e.dirs),e.transition&&Ev(T,e.transition),S=T,Rp(E),S}const mT=i=>{let t;for(const e in i)(e==="class"||e==="style"||hg(e))&&((t||(t={}))[e]=i[e]);return t},bT=(i,t)=>{const e={};for(const s in i)(!uv(s)||!(s.slice(9)in t))&&(e[s]=i[s]);return e};function vT(i,t,e){const{props:s,children:n,component:r}=i,{props:o,children:l,patchFlag:c}=t,h=r.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&c>=0){if(c&1024)return!0;if(c&16)return s?$y(s,o,h):!!o;if(c&8){const u=t.dynamicProps;for(let f=0;f<u.length;f++){const p=u[f];if(o[p]!==s[p]&&!yg(h,p))return!0}}}else return(n||l)&&(!l||!l.$stable)?!0:s===o?!1:s?o?$y(s,o,h):!0:!!o;return!1}function $y(i,t,e){const s=Object.keys(t);if(s.length!==Object.keys(i).length)return!0;for(let n=0;n<s.length;n++){const r=s[n];if(t[r]!==i[r]&&!yg(e,r))return!0}return!1}function _T({vnode:i,parent:t},e){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===i&&(s.el=i.el),s===i)(i=t.vnode).el=e,t=t.parent;else break}}const qA=i=>i.__isSuspense;function yT(i,t){t&&t.pendingBranch?Tt(i)?t.effects.push(...i):t.effects.push(i):RC(i)}const ze=Symbol.for("v-fgt"),wg=Symbol.for("v-txt"),Wo=Symbol.for("v-cmt"),zf=Symbol.for("v-stc"),uu=[];let Ci=null;function ft(i=!1){uu.push(Ci=i?null:[])}function wT(){uu.pop(),Ci=uu[uu.length-1]||null}let vu=1;function By(i,t=!1){vu+=i,i<0&&Ci&&t&&(Ci.hasOnce=!0)}function WA(i){return i.dynamicChildren=vu>0?Ci||uc:null,wT(),vu>0&&Ci&&Ci.push(i),i}function vt(i,t,e,s,n,r){return WA(M(i,t,e,s,n,r,!0))}function GA(i,t,e,s,n){return WA(Ie(i,t,e,s,n,!0))}function Mp(i){return i?i.__v_isVNode===!0:!1}function Lh(i,t){return i.type===t.type&&i.key===t.key}const XA=({key:i})=>i??null,qf=({ref:i,ref_key:t,ref_for:e})=>(typeof i=="number"&&(i=""+i),i!=null?Qe(i)||Oe(i)||Nt(i)?{i:ii,r:i,k:t,f:!!e}:i:null);function M(i,t=null,e=null,s=0,n=null,r=i===ze?0:1,o=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:i,props:t,key:t&&XA(t),ref:t&&qf(t),scopeId:SA,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:n,dynamicChildren:null,appContext:null,ctx:ii};return l?(Tv(c,e),r&128&&i.normalize(c)):e&&(c.shapeFlag|=Qe(e)?8:16),vu>0&&!o&&Ci&&(c.patchFlag>0||r&6)&&c.patchFlag!==32&&Ci.push(c),c}const Ie=AT;function AT(i,t=null,e=null,s=0,n=null,r=!1){if((!i||i===zC)&&(i=Wo),Mp(i)){const l=Ah(i,t,!0);return e&&Tv(l,e),vu>0&&!r&&Ci&&(l.shapeFlag&6?Ci[Ci.indexOf(i)]=l:Ci.push(l)),l.patchFlag=-2,l}if(LT(i)&&(i=i.__vccOpts),t){t=ET(t);let{class:l,style:c}=t;l&&!Qe(l)&&(t.class=zo(l)),_e(c)&&(yv(c)&&!Tt(c)&&(c=Ms({},c)),t.style=gg(c))}const o=Qe(i)?1:qA(i)?128:IC(i)?64:_e(i)?4:Nt(i)?2:0;return M(i,t,e,s,n,o,r,!0)}function ET(i){return i?yv(i)||DA(i)?Ms({},i):i:null}function Ah(i,t,e=!1,s=!1){const{props:n,ref:r,patchFlag:o,children:l,transition:c}=i,h=t?ST(n||{},t):n,u={__v_isVNode:!0,__v_skip:!0,type:i.type,props:h,key:h&&XA(h),ref:t&&t.ref?e&&r?Tt(r)?r.concat(qf(t)):[r,qf(t)]:qf(t):r,scopeId:i.scopeId,slotScopeIds:i.slotScopeIds,children:l,target:i.target,targetStart:i.targetStart,targetAnchor:i.targetAnchor,staticCount:i.staticCount,shapeFlag:i.shapeFlag,patchFlag:t&&i.type!==ze?o===-1?16:o|16:o,dynamicProps:i.dynamicProps,dynamicChildren:i.dynamicChildren,appContext:i.appContext,dirs:i.dirs,transition:c,component:i.component,suspense:i.suspense,ssContent:i.ssContent&&Ah(i.ssContent),ssFallback:i.ssFallback&&Ah(i.ssFallback),el:i.el,anchor:i.anchor,ctx:i.ctx,ce:i.ce};return c&&s&&Ev(u,c.clone(u)),u}function Ee(i=" ",t=0){return Ie(wg,null,i,t)}function kl(i,t){const e=Ie(zf,null,i);return e.staticCount=t,e}function is(i="",t=!1){return t?(ft(),GA(Wo,null,i)):Ie(Wo,null,i)}function Un(i){return i==null||typeof i=="boolean"?Ie(Wo):Tt(i)?Ie(ze,null,i.slice()):Mp(i)?to(i):Ie(wg,null,String(i))}function to(i){return i.el===null&&i.patchFlag!==-1||i.memo?i:Ah(i)}function Tv(i,t){let e=0;const{shapeFlag:s}=i;if(t==null)t=null;else if(Tt(t))e=16;else if(typeof t=="object")if(s&65){const n=t.default;n&&(n._c&&(n._d=!1),Tv(i,n()),n._c&&(n._d=!0));return}else{e=32;const n=t._;!n&&!DA(t)?t._ctx=ii:n===3&&ii&&(ii.slots._===1?t._=1:(t._=2,i.patchFlag|=1024))}else Nt(t)?(t={default:t,_ctx:ii},e=32):(t=String(t),s&64?(e=16,t=[Ee(t)]):e=8);i.children=t,i.shapeFlag|=e}function ST(...i){const t={};for(let e=0;e<i.length;e++){const s=i[e];for(const n in s)if(n==="class")t.class!==s.class&&(t.class=zo([t.class,s.class]));else if(n==="style")t.style=gg([t.style,s.style]);else if(hg(n)){const r=t[n],o=s[n];o&&r!==o&&!(Tt(r)&&r.includes(o))&&(t[n]=r?[].concat(r,o):o)}else n!==""&&(t[n]=s[n])}return t}function wn(i,t,e,s=null){Gn(i,t,7,[e,s])}const xT=IA();let CT=0;function TT(i,t,e){const s=i.type,n=(t?t.appContext:i.appContext)||xT,r={uid:CT++,vnode:i,type:s,parent:t,appContext:n,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Jw(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(n.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:NA(s,n),emitsOptions:zA(s,n),emit:null,emitted:null,propsDefaults:ve,inheritAttrs:s.inheritAttrs,ctx:ve,data:ve,props:ve,attrs:ve,slots:ve,refs:ve,setupState:ve,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=gT.bind(null,r),i.ce&&i.ce(r),r}let ws=null,Lp,Bm;{const i=pg(),t=(e,s)=>{let n;return(n=i[e])||(n=i[e]=[]),n.push(s),r=>{n.length>1?n.forEach(o=>o(r)):n[0](r)}};Lp=t("__VUE_INSTANCE_SETTERS__",e=>ws=e),Bm=t("__VUE_SSR_SETTERS__",e=>_u=e)}const nf=i=>{const t=ws;return Lp(i),i.scope.on(),()=>{i.scope.off(),Lp(t)}},Hy=()=>{ws&&ws.scope.off(),Lp(null)};function KA(i){return i.vnode.shapeFlag&4}let _u=!1;function PT(i,t=!1,e=!1){t&&Bm(t);const{props:s,children:n}=i.vnode,r=KA(i);eT(i,s,r,t),rT(i,n,e||t);const o=r?RT(i,t):void 0;return t&&Bm(!1),o}function RT(i,t){const e=i.type;i.accessCache=Object.create(null),i.proxy=new Proxy(i.ctx,WC);const{setup:s}=e;if(s){Ur();const n=i.setupContext=s.length>1?IT(i):null,r=nf(i),o=ef(s,i,0,[i.props,n]),l=zw(o);if(zr(),r(),(l||i.sp)&&!cu(i)&&xA(i),l){if(o.then(Hy,Hy),t)return o.then(c=>{jy(i,c)}).catch(c=>{vg(c,i,0)});i.asyncDep=o}else jy(i,o)}else YA(i)}function jy(i,t,e){Nt(t)?i.type.__ssrInlineRender?i.ssrRender=t:i.render=t:_e(t)&&(i.setupState=vA(t)),YA(i)}function YA(i,t,e){const s=i.type;i.render||(i.render=s.render||qn);{const n=nf(i);Ur();try{GC(i)}finally{zr(),n()}}}const kT={get(i,t){return Is(i,"get",""),i[t]}};function IT(i){const t=e=>{i.exposed=e||{}};return{attrs:new Proxy(i.attrs,kT),slots:i.slots,emit:i.emit,expose:t}}function Ag(i){return i.exposed?i.exposeProxy||(i.exposeProxy=new Proxy(vA(wv(i.exposed)),{get(t,e){if(e in t)return t[e];if(e in hu)return hu[e](i)},has(t,e){return e in t||e in hu}})):i.proxy}function MT(i,t=!0){return Nt(i)?i.displayName||i.name:i.name||t&&i.__name}function LT(i){return Nt(i)&&"__vccOpts"in i}const $e=(i,t)=>SC(i,t,_u);function QA(i,t,e){const s=arguments.length;return s===2?_e(t)&&!Tt(t)?Mp(t)?Ie(i,null,[t]):Ie(i,t):Ie(i,null,t):(s>3?e=Array.prototype.slice.call(arguments,2):s===3&&Mp(e)&&(e=[e]),Ie(i,t,e))}const DT="3.5.14";/**
* @vue/runtime-dom v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Hm;const Vy=typeof window<"u"&&window.trustedTypes;if(Vy)try{Hm=Vy.createPolicy("vue",{createHTML:i=>i})}catch{}const JA=Hm?i=>Hm.createHTML(i):i=>i,OT="http://www.w3.org/2000/svg",NT="http://www.w3.org/1998/Math/MathML",rr=typeof document<"u"?document:null,Uy=rr&&rr.createElement("template"),FT={insert:(i,t,e)=>{t.insertBefore(i,e||null)},remove:i=>{const t=i.parentNode;t&&t.removeChild(i)},createElement:(i,t,e,s)=>{const n=t==="svg"?rr.createElementNS(OT,i):t==="mathml"?rr.createElementNS(NT,i):e?rr.createElement(i,{is:e}):rr.createElement(i);return i==="select"&&s&&s.multiple!=null&&n.setAttribute("multiple",s.multiple),n},createText:i=>rr.createTextNode(i),createComment:i=>rr.createComment(i),setText:(i,t)=>{i.nodeValue=t},setElementText:(i,t)=>{i.textContent=t},parentNode:i=>i.parentNode,nextSibling:i=>i.nextSibling,querySelector:i=>rr.querySelector(i),setScopeId(i,t){i.setAttribute(t,"")},insertStaticContent(i,t,e,s,n,r){const o=e?e.previousSibling:t.lastChild;if(n&&(n===r||n.nextSibling))for(;t.insertBefore(n.cloneNode(!0),e),!(n===r||!(n=n.nextSibling)););else{Uy.innerHTML=JA(s==="svg"?`<svg>${i}</svg>`:s==="mathml"?`<math>${i}</math>`:i);const l=Uy.content;if(s==="svg"||s==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}t.insertBefore(l,e)}return[o?o.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}},$T=Symbol("_vtc");function BT(i,t,e){const s=i[$T];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?i.removeAttribute("class"):e?i.setAttribute("class",t):i.className=t}const Dp=Symbol("_vod"),ZA=Symbol("_vsh"),HT={beforeMount(i,{value:t},{transition:e}){i[Dp]=i.style.display==="none"?"":i.style.display,e&&t?e.beforeEnter(i):Dh(i,t)},mounted(i,{value:t},{transition:e}){e&&t&&e.enter(i)},updated(i,{value:t,oldValue:e},{transition:s}){!t!=!e&&(s?t?(s.beforeEnter(i),Dh(i,!0),s.enter(i)):s.leave(i,()=>{Dh(i,!1)}):Dh(i,t))},beforeUnmount(i,{value:t}){Dh(i,t)}};function Dh(i,t){i.style.display=t?i[Dp]:"none",i[ZA]=!t}const jT=Symbol(""),VT=/(^|;)\s*display\s*:/;function UT(i,t,e){const s=i.style,n=Qe(e);let r=!1;if(e&&!n){if(t)if(Qe(t))for(const o of t.split(";")){const l=o.slice(0,o.indexOf(":")).trim();e[l]==null&&Wf(s,l,"")}else for(const o in t)e[o]==null&&Wf(s,o,"");for(const o in e)o==="display"&&(r=!0),Wf(s,o,e[o])}else if(n){if(t!==e){const o=s[jT];o&&(e+=";"+o),s.cssText=e,r=VT.test(e)}}else t&&i.removeAttribute("style");Dp in i&&(i[Dp]=r?s.display:"",i[ZA]&&(s.display="none"))}const zy=/\s*!important$/;function Wf(i,t,e){if(Tt(e))e.forEach(s=>Wf(i,t,s));else if(e==null&&(e=""),t.startsWith("--"))i.setProperty(t,e);else{const s=zT(i,t);zy.test(e)?i.setProperty(Jo(s),e.replace(zy,""),"important"):i[s]=e}}const qy=["Webkit","Moz","ms"],bm={};function zT(i,t){const e=bm[t];if(e)return e;let s=Wi(t);if(s!=="filter"&&s in i)return bm[t]=s;s=fg(s);for(let n=0;n<qy.length;n++){const r=qy[n]+s;if(r in i)return bm[t]=r}return t}const Wy="http://www.w3.org/1999/xlink";function Gy(i,t,e,s,n,r=X1(t)){s&&t.startsWith("xlink:")?e==null?i.removeAttributeNS(Wy,t.slice(6,t.length)):i.setAttributeNS(Wy,t,e):e==null||r&&!Xw(e)?i.removeAttribute(t):i.setAttribute(t,r?"":Wn(e)?String(e):e)}function Xy(i,t,e,s,n){if(t==="innerHTML"||t==="textContent"){e!=null&&(i[t]=t==="innerHTML"?JA(e):e);return}const r=i.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const l=r==="OPTION"?i.getAttribute("value")||"":i.value,c=e==null?i.type==="checkbox"?"on":"":String(e);(l!==c||!("_value"in i))&&(i.value=c),e==null&&i.removeAttribute(t),i._value=e;return}let o=!1;if(e===""||e==null){const l=typeof i[t];l==="boolean"?e=Xw(e):e==null&&l==="string"?(e="",o=!0):l==="number"&&(e=0,o=!0)}try{i[t]=e}catch{}o&&i.removeAttribute(n||t)}function va(i,t,e,s){i.addEventListener(t,e,s)}function qT(i,t,e,s){i.removeEventListener(t,e,s)}const Ky=Symbol("_vei");function WT(i,t,e,s,n=null){const r=i[Ky]||(i[Ky]={}),o=r[t];if(s&&o)o.value=s;else{const[l,c]=GT(t);if(s){const h=r[t]=YT(s,n);va(i,l,h,c)}else o&&(qT(i,l,o,c),r[t]=void 0)}}const Yy=/(?:Once|Passive|Capture)$/;function GT(i){let t;if(Yy.test(i)){t={};let s;for(;s=i.match(Yy);)i=i.slice(0,i.length-s[0].length),t[s[0].toLowerCase()]=!0}return[i[2]===":"?i.slice(3):Jo(i.slice(2)),t]}let vm=0;const XT=Promise.resolve(),KT=()=>vm||(XT.then(()=>vm=0),vm=Date.now());function YT(i,t){const e=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=e.attached)return;Gn(QT(s,e.value),t,5,[s])};return e.value=i,e.attached=KT(),e}function QT(i,t){if(Tt(t)){const e=i.stopImmediatePropagation;return i.stopImmediatePropagation=()=>{e.call(i),i._stopped=!0},t.map(s=>n=>!n._stopped&&s&&s(n))}else return t}const Qy=i=>i.charCodeAt(0)===111&&i.charCodeAt(1)===110&&i.charCodeAt(2)>96&&i.charCodeAt(2)<123,JT=(i,t,e,s,n,r)=>{const o=n==="svg";t==="class"?BT(i,s,o):t==="style"?UT(i,e,s):hg(t)?uv(t)||WT(i,t,e,s,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):ZT(i,t,s,o))?(Xy(i,t,s),!i.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Gy(i,t,s,o,r,t!=="value")):i._isVueCE&&(/[A-Z]/.test(t)||!Qe(s))?Xy(i,Wi(t),s,r,t):(t==="true-value"?i._trueValue=s:t==="false-value"&&(i._falseValue=s),Gy(i,t,s,o))};function ZT(i,t,e,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in i&&Qy(t)&&Nt(e));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&i.tagName==="INPUT"||t==="type"&&i.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const n=i.tagName;if(n==="IMG"||n==="VIDEO"||n==="CANVAS"||n==="SOURCE")return!1}return Qy(t)&&Qe(e)?!1:t in i}const Op=i=>{const t=i.props["onUpdate:modelValue"]||!1;return Tt(t)?e=>Vf(t,e):t};function tP(i){i.target.composing=!0}function Jy(i){const t=i.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const pc=Symbol("_assign"),t0={created(i,{modifiers:{lazy:t,trim:e,number:s}},n){i[pc]=Op(n);const r=s||n.props&&n.props.type==="number";va(i,t?"change":"input",o=>{if(o.target.composing)return;let l=i.value;e&&(l=l.trim()),r&&(l=Im(l)),i[pc](l)}),e&&va(i,"change",()=>{i.value=i.value.trim()}),t||(va(i,"compositionstart",tP),va(i,"compositionend",Jy),va(i,"change",Jy))},mounted(i,{value:t}){i.value=t??""},beforeUpdate(i,{value:t,oldValue:e,modifiers:{lazy:s,trim:n,number:r}},o){if(i[pc]=Op(o),i.composing)return;const l=(r||i.type==="number")&&!/^0\d/.test(i.value)?Im(i.value):i.value,c=t??"";l!==c&&(document.activeElement===i&&i.type!=="range"&&(s&&t===e||n&&i.value.trim()===c)||(i.value=c))}},fa={deep:!0,created(i,t,e){i[pc]=Op(e),va(i,"change",()=>{const s=i._modelValue,n=eP(i),r=i.checked,o=i[pc];if(Tt(s)){const l=Kw(s,n),c=l!==-1;if(r&&!c)o(s.concat(n));else if(!r&&c){const h=[...s];h.splice(l,1),o(h)}}else if(ug(s)){const l=new Set(s);r?l.add(n):l.delete(n),o(l)}else o(e0(i,r))})},mounted:Zy,beforeUpdate(i,t,e){i[pc]=Op(e),Zy(i,t,e)}};function Zy(i,{value:t,oldValue:e},s){i._modelValue=t;let n;if(Tt(t))n=Kw(t,s.props.value)>-1;else if(ug(t))n=t.has(s.props.value);else{if(t===e)return;n=mg(t,e0(i,!0))}i.checked!==n&&(i.checked=n)}function eP(i){return"_value"in i?i._value:i.value}function e0(i,t){const e=t?"_trueValue":"_falseValue";return e in i?i[e]:t}const sP=["ctrl","shift","alt","meta"],iP={stop:i=>i.stopPropagation(),prevent:i=>i.preventDefault(),self:i=>i.target!==i.currentTarget,ctrl:i=>!i.ctrlKey,shift:i=>!i.shiftKey,alt:i=>!i.altKey,meta:i=>!i.metaKey,left:i=>"button"in i&&i.button!==0,middle:i=>"button"in i&&i.button!==1,right:i=>"button"in i&&i.button!==2,exact:(i,t)=>sP.some(e=>i[`${e}Key`]&&!t.includes(e))},tw=(i,t)=>{const e=i._withMods||(i._withMods={}),s=t.join(".");return e[s]||(e[s]=(n,...r)=>{for(let o=0;o<t.length;o++){const l=iP[t[o]];if(l&&l(n,t))return}return i(n,...r)})},nP={esc:"escape",space:" ",up:"arrow-up",left:"arrow-left",right:"arrow-right",down:"arrow-down",delete:"backspace"},rP=(i,t)=>{const e=i._withKeys||(i._withKeys={}),s=t.join(".");return e[s]||(e[s]=n=>{if(!("key"in n))return;const r=Jo(n.key);if(t.some(o=>o===r||nP[o]===r))return i(n)})},oP=Ms({patchProp:JT},FT);let ew;function aP(){return ew||(ew=aT(oP))}const lP=(...i)=>{const t=aP().createApp(...i),{mount:e}=t;return t.mount=s=>{const n=hP(s);if(!n)return;const r=t._component;!Nt(r)&&!r.render&&!r.template&&(r.template=n.innerHTML),n.nodeType===1&&(n.textContent="");const o=e(n,!1,cP(n));return n instanceof Element&&(n.removeAttribute("v-cloak"),n.setAttribute("data-v-app","")),o},t};function cP(i){if(i instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&i instanceof MathMLElement)return"mathml"}function hP(i){return Qe(i)?document.querySelector(i):i}/*!
 * pinia v3.0.2
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let s0;const Eg=i=>s0=i,i0=Symbol();function jm(i){return i&&typeof i=="object"&&Object.prototype.toString.call(i)==="[object Object]"&&typeof i.toJSON!="function"}var du;(function(i){i.direct="direct",i.patchObject="patch object",i.patchFunction="patch function"})(du||(du={}));function uP(){const i=Zw(!0),t=i.run(()=>zt({}));let e=[],s=[];const n=wv({install(r){Eg(n),n._a=r,r.provide(i0,n),r.config.globalProperties.$pinia=n,s.forEach(o=>e.push(o)),s=[]},use(r){return this._a?e.push(r):s.push(r),this},_p:e,_a:null,_e:i,_s:new Map,state:t});return n}const n0=()=>{};function sw(i,t,e,s=n0){i.push(t);const n=()=>{const r=i.indexOf(t);r>-1&&(i.splice(r,1),s())};return!e&&tA()&&Y1(n),n}function Jl(i,...t){i.slice().forEach(e=>{e(...t)})}const dP=i=>i(),iw=Symbol(),_m=Symbol();function Vm(i,t){i instanceof Map&&t instanceof Map?t.forEach((e,s)=>i.set(s,e)):i instanceof Set&&t instanceof Set&&t.forEach(i.add,i);for(const e in t){if(!t.hasOwnProperty(e))continue;const s=t[e],n=i[e];jm(n)&&jm(s)&&i.hasOwnProperty(e)&&!Oe(s)&&!Hr(s)?i[e]=Vm(n,s):i[e]=s}return i}const fP=Symbol();function pP(i){return!jm(i)||!Object.prototype.hasOwnProperty.call(i,fP)}const{assign:Qr}=Object;function gP(i){return!!(Oe(i)&&i.effect)}function mP(i,t,e,s){const{state:n,actions:r,getters:o}=t,l=e.state.value[i];let c;function h(){l||(e.state.value[i]=n?n():{});const u=_C(e.state.value[i]);return Qr(u,r,Object.keys(o||{}).reduce((f,p)=>(f[p]=wv($e(()=>{Eg(e);const g=e._s.get(i);return o[p].call(g,g)})),f),{}))}return c=r0(i,h,t,e,s,!0),c}function r0(i,t,e={},s,n,r){let o;const l=Qr({actions:{}},e),c={deep:!0};let h,u,f=[],p=[],g;const _=s.state.value[i];!r&&!_&&(s.state.value[i]={}),zt({});let v;function E(H){let U;h=u=!1,typeof H=="function"?(H(s.state.value[i]),U={type:du.patchFunction,storeId:i,events:g}):(Vm(s.state.value[i],H),U={type:du.patchObject,payload:H,storeId:i,events:g});const Q=v=Symbol();Vo().then(()=>{v===Q&&(h=!0)}),u=!0,Jl(f,U,s.state.value[i])}const S=r?function(){const{state:U}=e,Q=U?U():{};this.$patch(tt=>{Qr(tt,Q)})}:n0;function C(){o.stop(),f=[],p=[],s._s.delete(i)}const T=(H,U="")=>{if(iw in H)return H[_m]=U,H;const Q=function(){Eg(s);const tt=Array.from(arguments),Et=[],wt=[];function Rt(X){Et.push(X)}function oe(X){wt.push(X)}Jl(p,{args:tt,name:Q[_m],store:I,after:Rt,onError:oe});let J;try{J=H.apply(this&&this.$id===i?this:I,tt)}catch(X){throw Jl(wt,X),X}return J instanceof Promise?J.then(X=>(Jl(Et,X),X)).catch(X=>(Jl(wt,X),Promise.reject(X))):(Jl(Et,J),J)};return Q[iw]=!0,Q[_m]=U,Q},R={_p:s,$id:i,$onAction:sw.bind(null,p),$patch:E,$reset:S,$subscribe(H,U={}){const Q=sw(f,H,U.detached,()=>tt()),tt=o.run(()=>Rl(()=>s.state.value[i],Et=>{(U.flush==="sync"?u:h)&&H({storeId:i,type:du.direct,events:g},Et)},Qr({},c,U)));return Q},$dispose:C},I=tf(R);s._s.set(i,I);const N=(s._a&&s._a.runWithContext||dP)(()=>s._e.run(()=>(o=Zw()).run(()=>t({action:T}))));for(const H in N){const U=N[H];if(Oe(U)&&!gP(U)||Hr(U))r||(_&&pP(U)&&(Oe(U)?U.value=_[H]:Vm(U,_[H])),s.state.value[i][H]=U);else if(typeof U=="function"){const Q=T(U,H);N[H]=Q,l.actions[H]=U}}return Qr(I,N),Qr(Qt(I),N),Object.defineProperty(I,"$state",{get:()=>s.state.value[i],set:H=>{E(U=>{Qr(U,H)})}}),s._p.forEach(H=>{Qr(I,o.run(()=>H({store:I,app:s._a,pinia:s,options:l})))}),_&&r&&e.hydrate&&e.hydrate(I.$state,_),h=!0,u=!0,I}/*! #__NO_SIDE_EFFECTS__ */function bP(i,t,e){let s;const n=typeof t=="function";s=n?e:t;function r(o,l){const c=tT();return o=o||(c?fn(i0,null):null),o&&Eg(o),o=s0,o._s.has(i)||(n?r0(i,t,s,o):mP(i,s,o)),o._s.get(i)}return r.$id=i,r}function vP(i){const t=Qt(i),e={};for(const s in t){const n=t[s];n.effect?e[s]=$e({get:()=>i[s],set(r){i[s]=r}}):(Oe(n)||Hr(n))&&(e[s]=AC(i,s))}return e}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const tc=typeof document<"u";function o0(i){return typeof i=="object"||"displayName"in i||"props"in i||"__vccOpts"in i}function _P(i){return i.__esModule||i[Symbol.toStringTag]==="Module"||i.default&&o0(i.default)}const ie=Object.assign;function ym(i,t){const e={};for(const s in t){const n=t[s];e[s]=pn(n)?n.map(i):i(n)}return e}const fu=()=>{},pn=Array.isArray,a0=/#/g,yP=/&/g,wP=/\//g,AP=/=/g,EP=/\?/g,l0=/\+/g,SP=/%5B/g,xP=/%5D/g,c0=/%5E/g,CP=/%60/g,h0=/%7B/g,TP=/%7C/g,u0=/%7D/g,PP=/%20/g;function Pv(i){return encodeURI(""+i).replace(TP,"|").replace(SP,"[").replace(xP,"]")}function RP(i){return Pv(i).replace(h0,"{").replace(u0,"}").replace(c0,"^")}function Um(i){return Pv(i).replace(l0,"%2B").replace(PP,"+").replace(a0,"%23").replace(yP,"%26").replace(CP,"`").replace(h0,"{").replace(u0,"}").replace(c0,"^")}function kP(i){return Um(i).replace(AP,"%3D")}function IP(i){return Pv(i).replace(a0,"%23").replace(EP,"%3F")}function MP(i){return i==null?"":IP(i).replace(wP,"%2F")}function yu(i){try{return decodeURIComponent(""+i)}catch{}return""+i}const LP=/\/$/,DP=i=>i.replace(LP,"");function wm(i,t,e="/"){let s,n={},r="",o="";const l=t.indexOf("#");let c=t.indexOf("?");return l<c&&l>=0&&(c=-1),c>-1&&(s=t.slice(0,c),r=t.slice(c+1,l>-1?l:t.length),n=i(r)),l>-1&&(s=s||t.slice(0,l),o=t.slice(l,t.length)),s=$P(s??t,e),{fullPath:s+(r&&"?")+r+o,path:s,query:n,hash:yu(o)}}function OP(i,t){const e=t.query?i(t.query):"";return t.path+(e&&"?")+e+(t.hash||"")}function nw(i,t){return!t||!i.toLowerCase().startsWith(t.toLowerCase())?i:i.slice(t.length)||"/"}function NP(i,t,e){const s=t.matched.length-1,n=e.matched.length-1;return s>-1&&s===n&&Eh(t.matched[s],e.matched[n])&&d0(t.params,e.params)&&i(t.query)===i(e.query)&&t.hash===e.hash}function Eh(i,t){return(i.aliasOf||i)===(t.aliasOf||t)}function d0(i,t){if(Object.keys(i).length!==Object.keys(t).length)return!1;for(const e in i)if(!FP(i[e],t[e]))return!1;return!0}function FP(i,t){return pn(i)?rw(i,t):pn(t)?rw(t,i):i===t}function rw(i,t){return pn(t)?i.length===t.length&&i.every((e,s)=>e===t[s]):i.length===1&&i[0]===t}function $P(i,t){if(i.startsWith("/"))return i;if(!i)return t;const e=t.split("/"),s=i.split("/"),n=s[s.length-1];(n===".."||n===".")&&s.push("");let r=e.length-1,o,l;for(o=0;o<s.length;o++)if(l=s[o],l!==".")if(l==="..")r>1&&r--;else break;return e.slice(0,r).join("/")+"/"+s.slice(o).join("/")}const Yr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var wu;(function(i){i.pop="pop",i.push="push"})(wu||(wu={}));var pu;(function(i){i.back="back",i.forward="forward",i.unknown=""})(pu||(pu={}));function BP(i){if(!i)if(tc){const t=document.querySelector("base");i=t&&t.getAttribute("href")||"/",i=i.replace(/^\w+:\/\/[^\/]+/,"")}else i="/";return i[0]!=="/"&&i[0]!=="#"&&(i="/"+i),DP(i)}const HP=/^[^#]+#/;function jP(i,t){return i.replace(HP,"#")+t}function VP(i,t){const e=document.documentElement.getBoundingClientRect(),s=i.getBoundingClientRect();return{behavior:t.behavior,left:s.left-e.left-(t.left||0),top:s.top-e.top-(t.top||0)}}const Sg=()=>({left:window.scrollX,top:window.scrollY});function UP(i){let t;if("el"in i){const e=i.el,s=typeof e=="string"&&e.startsWith("#"),n=typeof e=="string"?s?document.getElementById(e.slice(1)):document.querySelector(e):e;if(!n)return;t=VP(n,i)}else t=i;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function ow(i,t){return(history.state?history.state.position-t:-1)+i}const zm=new Map;function zP(i,t){zm.set(i,t)}function qP(i){const t=zm.get(i);return zm.delete(i),t}let WP=()=>location.protocol+"//"+location.host;function f0(i,t){const{pathname:e,search:s,hash:n}=t,r=i.indexOf("#");if(r>-1){let l=n.includes(i.slice(r))?i.slice(r).length:1,c=n.slice(l);return c[0]!=="/"&&(c="/"+c),nw(c,"")}return nw(e,i)+s+n}function GP(i,t,e,s){let n=[],r=[],o=null;const l=({state:p})=>{const g=f0(i,location),_=e.value,v=t.value;let E=0;if(p){if(e.value=g,t.value=p,o&&o===_){o=null;return}E=v?p.position-v.position:0}else s(g);n.forEach(S=>{S(e.value,_,{delta:E,type:wu.pop,direction:E?E>0?pu.forward:pu.back:pu.unknown})})};function c(){o=e.value}function h(p){n.push(p);const g=()=>{const _=n.indexOf(p);_>-1&&n.splice(_,1)};return r.push(g),g}function u(){const{history:p}=window;p.state&&p.replaceState(ie({},p.state,{scroll:Sg()}),"")}function f(){for(const p of r)p();r=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:c,listen:h,destroy:f}}function aw(i,t,e,s=!1,n=!1){return{back:i,current:t,forward:e,replaced:s,position:window.history.length,scroll:n?Sg():null}}function XP(i){const{history:t,location:e}=window,s={value:f0(i,e)},n={value:t.state};n.value||r(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(c,h,u){const f=i.indexOf("#"),p=f>-1?(e.host&&document.querySelector("base")?i:i.slice(f))+c:WP()+i+c;try{t[u?"replaceState":"pushState"](h,"",p),n.value=h}catch(g){console.error(g),e[u?"replace":"assign"](p)}}function o(c,h){const u=ie({},t.state,aw(n.value.back,c,n.value.forward,!0),h,{position:n.value.position});r(c,u,!0),s.value=c}function l(c,h){const u=ie({},n.value,t.state,{forward:c,scroll:Sg()});r(u.current,u,!0);const f=ie({},aw(s.value,c,null),{position:u.position+1},h);r(c,f,!1),s.value=c}return{location:s,state:n,push:l,replace:o}}function KP(i){i=BP(i);const t=XP(i),e=GP(i,t.state,t.location,t.replace);function s(r,o=!0){o||e.pauseListeners(),history.go(r)}const n=ie({location:"",base:i,go:s,createHref:jP.bind(null,i)},t,e);return Object.defineProperty(n,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(n,"state",{enumerable:!0,get:()=>t.state.value}),n}function YP(i){return i=location.host?i||location.pathname+location.search:"",i.includes("#")||(i+="#"),KP(i)}function QP(i){return typeof i=="string"||i&&typeof i=="object"}function p0(i){return typeof i=="string"||typeof i=="symbol"}const g0=Symbol("");var lw;(function(i){i[i.aborted=4]="aborted",i[i.cancelled=8]="cancelled",i[i.duplicated=16]="duplicated"})(lw||(lw={}));function Sh(i,t){return ie(new Error,{type:i,[g0]:!0},t)}function er(i,t){return i instanceof Error&&g0 in i&&(t==null||!!(i.type&t))}const cw="[^/]+?",JP={sensitive:!1,strict:!1,start:!0,end:!0},ZP=/[.+*?^${}()[\]/\\]/g;function tR(i,t){const e=ie({},JP,t),s=[];let n=e.start?"^":"";const r=[];for(const h of i){const u=h.length?[]:[90];e.strict&&!h.length&&(n+="/");for(let f=0;f<h.length;f++){const p=h[f];let g=40+(e.sensitive?.25:0);if(p.type===0)f||(n+="/"),n+=p.value.replace(ZP,"\\$&"),g+=40;else if(p.type===1){const{value:_,repeatable:v,optional:E,regexp:S}=p;r.push({name:_,repeatable:v,optional:E});const C=S||cw;if(C!==cw){g+=10;try{new RegExp(`(${C})`)}catch(R){throw new Error(`Invalid custom RegExp for param "${_}" (${C}): `+R.message)}}let T=v?`((?:${C})(?:/(?:${C}))*)`:`(${C})`;f||(T=E&&h.length<2?`(?:/${T})`:"/"+T),E&&(T+="?"),n+=T,g+=20,E&&(g+=-8),v&&(g+=-20),C===".*"&&(g+=-50)}u.push(g)}s.push(u)}if(e.strict&&e.end){const h=s.length-1;s[h][s[h].length-1]+=.7000000000000001}e.strict||(n+="/?"),e.end?n+="$":e.strict&&!n.endsWith("/")&&(n+="(?:/|$)");const o=new RegExp(n,e.sensitive?"":"i");function l(h){const u=h.match(o),f={};if(!u)return null;for(let p=1;p<u.length;p++){const g=u[p]||"",_=r[p-1];f[_.name]=g&&_.repeatable?g.split("/"):g}return f}function c(h){let u="",f=!1;for(const p of i){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const g of p)if(g.type===0)u+=g.value;else if(g.type===1){const{value:_,repeatable:v,optional:E}=g,S=_ in h?h[_]:"";if(pn(S)&&!v)throw new Error(`Provided param "${_}" is an array but it is not repeatable (* or + modifiers)`);const C=pn(S)?S.join("/"):S;if(!C)if(E)p.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${_}"`);u+=C}}return u||"/"}return{re:o,score:s,keys:r,parse:l,stringify:c}}function eR(i,t){let e=0;for(;e<i.length&&e<t.length;){const s=t[e]-i[e];if(s)return s;e++}return i.length<t.length?i.length===1&&i[0]===80?-1:1:i.length>t.length?t.length===1&&t[0]===80?1:-1:0}function m0(i,t){let e=0;const s=i.score,n=t.score;for(;e<s.length&&e<n.length;){const r=eR(s[e],n[e]);if(r)return r;e++}if(Math.abs(n.length-s.length)===1){if(hw(s))return 1;if(hw(n))return-1}return n.length-s.length}function hw(i){const t=i[i.length-1];return i.length>0&&t[t.length-1]<0}const sR={type:0,value:""},iR=/[a-zA-Z0-9_]/;function nR(i){if(!i)return[[]];if(i==="/")return[[sR]];if(!i.startsWith("/"))throw new Error(`Invalid path "${i}"`);function t(g){throw new Error(`ERR (${e})/"${h}": ${g}`)}let e=0,s=e;const n=[];let r;function o(){r&&n.push(r),r=[]}let l=0,c,h="",u="";function f(){h&&(e===0?r.push({type:0,value:h}):e===1||e===2||e===3?(r.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:h,regexp:u,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),h="")}function p(){h+=c}for(;l<i.length;){if(c=i[l++],c==="\\"&&e!==2){s=e,e=4;continue}switch(e){case 0:c==="/"?(h&&f(),o()):c===":"?(f(),e=1):p();break;case 4:p(),e=s;break;case 1:c==="("?e=2:iR.test(c)?p():(f(),e=0,c!=="*"&&c!=="?"&&c!=="+"&&l--);break;case 2:c===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+c:e=3:u+=c;break;case 3:f(),e=0,c!=="*"&&c!=="?"&&c!=="+"&&l--,u="";break;default:t("Unknown state");break}}return e===2&&t(`Unfinished custom RegExp for param "${h}"`),f(),o(),n}function rR(i,t,e){const s=tR(nR(i.path),e),n=ie(s,{record:i,parent:t,children:[],alias:[]});return t&&!n.record.aliasOf==!t.record.aliasOf&&t.children.push(n),n}function oR(i,t){const e=[],s=new Map;t=pw({strict:!1,end:!0,sensitive:!1},t);function n(f){return s.get(f)}function r(f,p,g){const _=!g,v=dw(f);v.aliasOf=g&&g.record;const E=pw(t,f),S=[v];if("alias"in f){const R=typeof f.alias=="string"?[f.alias]:f.alias;for(const I of R)S.push(dw(ie({},v,{components:g?g.record.components:v.components,path:I,aliasOf:g?g.record:v})))}let C,T;for(const R of S){const{path:I}=R;if(p&&I[0]!=="/"){const F=p.record.path,N=F[F.length-1]==="/"?"":"/";R.path=p.record.path+(I&&N+I)}if(C=rR(R,p,E),g?g.alias.push(C):(T=T||C,T!==C&&T.alias.push(C),_&&f.name&&!fw(C)&&o(f.name)),b0(C)&&c(C),v.children){const F=v.children;for(let N=0;N<F.length;N++)r(F[N],C,g&&g.children[N])}g=g||C}return T?()=>{o(T)}:fu}function o(f){if(p0(f)){const p=s.get(f);p&&(s.delete(f),e.splice(e.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=e.indexOf(f);p>-1&&(e.splice(p,1),f.record.name&&s.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function l(){return e}function c(f){const p=cR(f,e);e.splice(p,0,f),f.record.name&&!fw(f)&&s.set(f.record.name,f)}function h(f,p){let g,_={},v,E;if("name"in f&&f.name){if(g=s.get(f.name),!g)throw Sh(1,{location:f});E=g.record.name,_=ie(uw(p.params,g.keys.filter(T=>!T.optional).concat(g.parent?g.parent.keys.filter(T=>T.optional):[]).map(T=>T.name)),f.params&&uw(f.params,g.keys.map(T=>T.name))),v=g.stringify(_)}else if(f.path!=null)v=f.path,g=e.find(T=>T.re.test(v)),g&&(_=g.parse(v),E=g.record.name);else{if(g=p.name?s.get(p.name):e.find(T=>T.re.test(p.path)),!g)throw Sh(1,{location:f,currentLocation:p});E=g.record.name,_=ie({},p.params,f.params),v=g.stringify(_)}const S=[];let C=g;for(;C;)S.unshift(C.record),C=C.parent;return{name:E,path:v,params:_,matched:S,meta:lR(S)}}i.forEach(f=>r(f));function u(){e.length=0,s.clear()}return{addRoute:r,resolve:h,removeRoute:o,clearRoutes:u,getRoutes:l,getRecordMatcher:n}}function uw(i,t){const e={};for(const s of t)s in i&&(e[s]=i[s]);return e}function dw(i){const t={path:i.path,redirect:i.redirect,name:i.name,meta:i.meta||{},aliasOf:i.aliasOf,beforeEnter:i.beforeEnter,props:aR(i),children:i.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in i?i.components||null:i.component&&{default:i.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function aR(i){const t={},e=i.props||!1;if("component"in i)t.default=e;else for(const s in i.components)t[s]=typeof e=="object"?e[s]:e;return t}function fw(i){for(;i;){if(i.record.aliasOf)return!0;i=i.parent}return!1}function lR(i){return i.reduce((t,e)=>ie(t,e.meta),{})}function pw(i,t){const e={};for(const s in i)e[s]=s in t?t[s]:i[s];return e}function cR(i,t){let e=0,s=t.length;for(;e!==s;){const r=e+s>>1;m0(i,t[r])<0?s=r:e=r+1}const n=hR(i);return n&&(s=t.lastIndexOf(n,s-1)),s}function hR(i){let t=i;for(;t=t.parent;)if(b0(t)&&m0(i,t)===0)return t}function b0({record:i}){return!!(i.name||i.components&&Object.keys(i.components).length||i.redirect)}function uR(i){const t={};if(i===""||i==="?")return t;const s=(i[0]==="?"?i.slice(1):i).split("&");for(let n=0;n<s.length;++n){const r=s[n].replace(l0," "),o=r.indexOf("="),l=yu(o<0?r:r.slice(0,o)),c=o<0?null:yu(r.slice(o+1));if(l in t){let h=t[l];pn(h)||(h=t[l]=[h]),h.push(c)}else t[l]=c}return t}function gw(i){let t="";for(let e in i){const s=i[e];if(e=kP(e),s==null){s!==void 0&&(t+=(t.length?"&":"")+e);continue}(pn(s)?s.map(r=>r&&Um(r)):[s&&Um(s)]).forEach(r=>{r!==void 0&&(t+=(t.length?"&":"")+e,r!=null&&(t+="="+r))})}return t}function dR(i){const t={};for(const e in i){const s=i[e];s!==void 0&&(t[e]=pn(s)?s.map(n=>n==null?null:""+n):s==null?s:""+s)}return t}const fR=Symbol(""),mw=Symbol(""),Rv=Symbol(""),kv=Symbol(""),qm=Symbol("");function Oh(){let i=[];function t(s){return i.push(s),()=>{const n=i.indexOf(s);n>-1&&i.splice(n,1)}}function e(){i=[]}return{add:t,list:()=>i.slice(),reset:e}}function eo(i,t,e,s,n,r=o=>o()){const o=s&&(s.enterCallbacks[n]=s.enterCallbacks[n]||[]);return()=>new Promise((l,c)=>{const h=p=>{p===!1?c(Sh(4,{from:e,to:t})):p instanceof Error?c(p):QP(p)?c(Sh(2,{from:t,to:p})):(o&&s.enterCallbacks[n]===o&&typeof p=="function"&&o.push(p),l())},u=r(()=>i.call(s&&s.instances[n],t,e,h));let f=Promise.resolve(u);i.length<3&&(f=f.then(h)),f.catch(p=>c(p))})}function Am(i,t,e,s,n=r=>r()){const r=[];for(const o of i)for(const l in o.components){let c=o.components[l];if(!(t!=="beforeRouteEnter"&&!o.instances[l]))if(o0(c)){const u=(c.__vccOpts||c)[t];u&&r.push(eo(u,e,s,o,l,n))}else{let h=c();r.push(()=>h.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${l}" at "${o.path}"`);const f=_P(u)?u.default:u;o.mods[l]=u,o.components[l]=f;const g=(f.__vccOpts||f)[t];return g&&eo(g,e,s,o,l,n)()}))}}return r}function bw(i){const t=fn(Rv),e=fn(kv),s=$e(()=>{const c=De(i.to);return t.resolve(c)}),n=$e(()=>{const{matched:c}=s.value,{length:h}=c,u=c[h-1],f=e.matched;if(!u||!f.length)return-1;const p=f.findIndex(Eh.bind(null,u));if(p>-1)return p;const g=vw(c[h-2]);return h>1&&vw(u)===g&&f[f.length-1].path!==g?f.findIndex(Eh.bind(null,c[h-2])):p}),r=$e(()=>n.value>-1&&bR(e.params,s.value.params)),o=$e(()=>n.value>-1&&n.value===e.matched.length-1&&d0(e.params,s.value.params));function l(c={}){if(mR(c)){const h=t[De(i.replace)?"replace":"push"](De(i.to)).catch(fu);return i.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>h),h}return Promise.resolve()}return{route:s,href:$e(()=>s.value.href),isActive:r,isExactActive:o,navigate:l}}function pR(i){return i.length===1?i[0]:i}const gR=Yn({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:bw,setup(i,{slots:t}){const e=tf(bw(i)),{options:s}=fn(Rv),n=$e(()=>({[_w(i.activeClass,s.linkActiveClass,"router-link-active")]:e.isActive,[_w(i.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:e.isExactActive}));return()=>{const r=t.default&&pR(t.default(e));return i.custom?r:QA("a",{"aria-current":e.isExactActive?i.ariaCurrentValue:null,href:e.href,onClick:e.navigate,class:n.value},r)}}}),Gf=gR;function mR(i){if(!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)&&!i.defaultPrevented&&!(i.button!==void 0&&i.button!==0)){if(i.currentTarget&&i.currentTarget.getAttribute){const t=i.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return i.preventDefault&&i.preventDefault(),!0}}function bR(i,t){for(const e in t){const s=t[e],n=i[e];if(typeof s=="string"){if(s!==n)return!1}else if(!pn(n)||n.length!==s.length||s.some((r,o)=>r!==n[o]))return!1}return!0}function vw(i){return i?i.aliasOf?i.aliasOf.path:i.path:""}const _w=(i,t,e)=>i??t??e,vR=Yn({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(i,{attrs:t,slots:e}){const s=fn(qm),n=$e(()=>i.route||s.value),r=fn(mw,0),o=$e(()=>{let h=De(r);const{matched:u}=n.value;let f;for(;(f=u[h])&&!f.components;)h++;return h}),l=$e(()=>n.value.matched[o.value]);Uf(mw,$e(()=>o.value+1)),Uf(fR,l),Uf(qm,n);const c=zt();return Rl(()=>[c.value,l.value,i.name],([h,u,f],[p,g,_])=>{u&&(u.instances[f]=h,g&&g!==u&&h&&h===p&&(u.leaveGuards.size||(u.leaveGuards=g.leaveGuards),u.updateGuards.size||(u.updateGuards=g.updateGuards))),h&&u&&(!g||!Eh(u,g)||!p)&&(u.enterCallbacks[f]||[]).forEach(v=>v(h))},{flush:"post"}),()=>{const h=n.value,u=i.name,f=l.value,p=f&&f.components[u];if(!p)return yw(e.default,{Component:p,route:h});const g=f.props[u],_=g?g===!0?h.params:typeof g=="function"?g(h):g:null,E=QA(p,ie({},_,t,{onVnodeUnmounted:S=>{S.component.isUnmounted&&(f.instances[u]=null)},ref:c}));return yw(e.default,{Component:E,route:h})||E}}});function yw(i,t){if(!i)return null;const e=i(t);return e.length===1?e[0]:e}const v0=vR;function _R(i){const t=oR(i.routes,i),e=i.parseQuery||uR,s=i.stringifyQuery||gw,n=i.history,r=Oh(),o=Oh(),l=Oh(),c=mC(Yr);let h=Yr;tc&&i.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=ym.bind(null,B=>""+B),f=ym.bind(null,MP),p=ym.bind(null,yu);function g(B,V){let st,pt;return p0(B)?(st=t.getRecordMatcher(B),pt=V):pt=B,t.addRoute(pt,st)}function _(B){const V=t.getRecordMatcher(B);V&&t.removeRoute(V)}function v(){return t.getRoutes().map(B=>B.record)}function E(B){return!!t.getRecordMatcher(B)}function S(B,V){if(V=ie({},V||c.value),typeof B=="string"){const $=wm(e,B,V.path),z=t.resolve({path:$.path},V),q=n.createHref($.fullPath);return ie($,z,{params:p(z.params),hash:yu($.hash),redirectedFrom:void 0,href:q})}let st;if(B.path!=null)st=ie({},B,{path:wm(e,B.path,V.path).path});else{const $=ie({},B.params);for(const z in $)$[z]==null&&delete $[z];st=ie({},B,{params:f($)}),V.params=f(V.params)}const pt=t.resolve(st,V),$t=B.hash||"";pt.params=u(p(pt.params));const P=OP(s,ie({},B,{hash:RP($t),path:pt.path})),k=n.createHref(P);return ie({fullPath:P,hash:$t,query:s===gw?dR(B.query):B.query||{}},pt,{redirectedFrom:void 0,href:k})}function C(B){return typeof B=="string"?wm(e,B,c.value.path):ie({},B)}function T(B,V){if(h!==B)return Sh(8,{from:V,to:B})}function R(B){return N(B)}function I(B){return R(ie(C(B),{replace:!0}))}function F(B){const V=B.matched[B.matched.length-1];if(V&&V.redirect){const{redirect:st}=V;let pt=typeof st=="function"?st(B):st;return typeof pt=="string"&&(pt=pt.includes("?")||pt.includes("#")?pt=C(pt):{path:pt},pt.params={}),ie({query:B.query,hash:B.hash,params:pt.path!=null?{}:B.params},pt)}}function N(B,V){const st=h=S(B),pt=c.value,$t=B.state,P=B.force,k=B.replace===!0,$=F(st);if($)return N(ie(C($),{state:typeof $=="object"?ie({},$t,$.state):$t,force:P,replace:k}),V||st);const z=st;z.redirectedFrom=V;let q;return!P&&NP(s,pt,st)&&(q=Sh(16,{to:z,from:pt}),bt(pt,pt,!0,!1)),(q?Promise.resolve(q):Q(z,pt)).catch(W=>er(W)?er(W,2)?W:L(W):et(W,z,pt)).then(W=>{if(W){if(er(W,2))return N(ie({replace:k},C(W.to),{state:typeof W.to=="object"?ie({},$t,W.to.state):$t,force:P}),V||z)}else W=Et(z,pt,!0,k,$t);return tt(z,pt,W),W})}function H(B,V){const st=T(B,V);return st?Promise.reject(st):Promise.resolve()}function U(B){const V=xe.values().next().value;return V&&typeof V.runWithContext=="function"?V.runWithContext(B):B()}function Q(B,V){let st;const[pt,$t,P]=yR(B,V);st=Am(pt.reverse(),"beforeRouteLeave",B,V);for(const $ of pt)$.leaveGuards.forEach(z=>{st.push(eo(z,B,V))});const k=H.bind(null,B,V);return st.push(k),Xt(st).then(()=>{st=[];for(const $ of r.list())st.push(eo($,B,V));return st.push(k),Xt(st)}).then(()=>{st=Am($t,"beforeRouteUpdate",B,V);for(const $ of $t)$.updateGuards.forEach(z=>{st.push(eo(z,B,V))});return st.push(k),Xt(st)}).then(()=>{st=[];for(const $ of P)if($.beforeEnter)if(pn($.beforeEnter))for(const z of $.beforeEnter)st.push(eo(z,B,V));else st.push(eo($.beforeEnter,B,V));return st.push(k),Xt(st)}).then(()=>(B.matched.forEach($=>$.enterCallbacks={}),st=Am(P,"beforeRouteEnter",B,V,U),st.push(k),Xt(st))).then(()=>{st=[];for(const $ of o.list())st.push(eo($,B,V));return st.push(k),Xt(st)}).catch($=>er($,8)?$:Promise.reject($))}function tt(B,V,st){l.list().forEach(pt=>U(()=>pt(B,V,st)))}function Et(B,V,st,pt,$t){const P=T(B,V);if(P)return P;const k=V===Yr,$=tc?history.state:{};st&&(pt||k?n.replace(B.fullPath,ie({scroll:k&&$&&$.scroll},$t)):n.push(B.fullPath,$t)),c.value=B,bt(B,V,st,k),L()}let wt;function Rt(){wt||(wt=n.listen((B,V,st)=>{if(!Be.listening)return;const pt=S(B),$t=F(pt);if($t){N(ie($t,{replace:!0,force:!0}),pt).catch(fu);return}h=pt;const P=c.value;tc&&zP(ow(P.fullPath,st.delta),Sg()),Q(pt,P).catch(k=>er(k,12)?k:er(k,2)?(N(ie(C(k.to),{force:!0}),pt).then($=>{er($,20)&&!st.delta&&st.type===wu.pop&&n.go(-1,!1)}).catch(fu),Promise.reject()):(st.delta&&n.go(-st.delta,!1),et(k,pt,P))).then(k=>{k=k||Et(pt,P,!1),k&&(st.delta&&!er(k,8)?n.go(-st.delta,!1):st.type===wu.pop&&er(k,20)&&n.go(-1,!1)),tt(pt,P,k)}).catch(fu)}))}let oe=Oh(),J=Oh(),X;function et(B,V,st){L(B);const pt=J.list();return pt.length?pt.forEach($t=>$t(B,V,st)):console.error(B),Promise.reject(B)}function Y(){return X&&c.value!==Yr?Promise.resolve():new Promise((B,V)=>{oe.add([B,V])})}function L(B){return X||(X=!B,Rt(),oe.list().forEach(([V,st])=>B?st(B):V()),oe.reset()),B}function bt(B,V,st,pt){const{scrollBehavior:$t}=i;if(!tc||!$t)return Promise.resolve();const P=!st&&qP(ow(B.fullPath,0))||(pt||!st)&&history.state&&history.state.scroll||null;return Vo().then(()=>$t(B,V,P)).then(k=>k&&UP(k)).catch(k=>et(k,B,V))}const Ct=B=>n.go(B);let Wt;const xe=new Set,Be={currentRoute:c,listening:!0,addRoute:g,removeRoute:_,clearRoutes:t.clearRoutes,hasRoute:E,getRoutes:v,resolve:S,options:i,push:R,replace:I,go:Ct,back:()=>Ct(-1),forward:()=>Ct(1),beforeEach:r.add,beforeResolve:o.add,afterEach:l.add,onError:J.add,isReady:Y,install(B){const V=this;B.component("RouterLink",Gf),B.component("RouterView",v0),B.config.globalProperties.$router=V,Object.defineProperty(B.config.globalProperties,"$route",{enumerable:!0,get:()=>De(c)}),tc&&!Wt&&c.value===Yr&&(Wt=!0,R(n.location).catch($t=>{}));const st={};for(const $t in Yr)Object.defineProperty(st,$t,{get:()=>c.value[$t],enumerable:!0});B.provide(Rv,V),B.provide(kv,gA(st)),B.provide(qm,c);const pt=B.unmount;xe.add(B),B.unmount=function(){xe.delete(B),xe.size<1&&(h=Yr,wt&&wt(),wt=null,c.value=Yr,Wt=!1,X=!1),pt()}}};function Xt(B){return B.reduce((V,st)=>V.then(()=>U(st)),Promise.resolve())}return Be}function yR(i,t){const e=[],s=[],n=[],r=Math.max(t.matched.length,i.matched.length);for(let o=0;o<r;o++){const l=t.matched[o];l&&(i.matched.find(h=>Eh(h,l))?s.push(l):e.push(l));const c=i.matched[o];c&&(t.matched.find(h=>Eh(h,c))||n.push(c))}return[e,s,n]}function wR(i){return fn(kv)}const Au="https://backend-seven-gamma-52.vercel.app",AR=bP("documents",{state:()=>({documents:[],isLoading:!1,error:null}),actions:{async loadDocuments(){this.isLoading=!0,this.error=null;try{const i=await fetch(`${Au}/api/documents`);if(!i.ok)throw new Error(`Erreur HTTP: ${i.status}`);const t=await i.json();if(Array.isArray(t))this.documents=t;else if(Array.isArray(t.documents))this.documents=t.documents;else throw new Error("Format de données invalide")}catch(i){console.error("Erreur:",i),this.error=i instanceof Error?i.message:"Une erreur est survenue",this.documents=[]}finally{this.isLoading=!1}}}}),Ws=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Wm=[.001,0,0,.001,0,0],Em=1.35,Ei={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},so={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},ER="pdfjs_internal_editor_",Dt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},Yt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},SR={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Ss={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Xf={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Ge={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},ec={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},xg={ERRORS:0,WARNINGS:1,INFOS:5},Np={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Df={moveTo:0,lineTo:1,curveTo:2,closePath:3},xR={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let Cg=xg.WARNINGS;function CR(i){Number.isInteger(i)&&(Cg=i)}function TR(){return Cg}function Tg(i){Cg>=xg.INFOS&&console.log(`Info: ${i}`)}function Ot(i){Cg>=xg.WARNINGS&&console.log(`Warning: ${i}`)}function ge(i){throw new Error(i)}function Ke(i,t){i||ge(t)}function PR(i){switch(i==null?void 0:i.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function _0(i,t=null,e=null){if(!i)return null;if(e&&typeof i=="string"){if(e.addDefaultProtocol&&i.startsWith("www.")){const n=i.match(/\./g);(n==null?void 0:n.length)>=2&&(i=`http://${i}`)}if(e.tryConvertEncoding)try{i=LR(i)}catch{}}const s=t?URL.parse(i,t):URL.parse(i);return PR(s)?s:null}function y0(i,t,e=!1){const s=URL.parse(i);return s?(s.hash=t,s.href):e&&_0(i,"http://example.com")?i.split("#",1)[0]+`${t?`#${t}`:""}`:""}function Gt(i,t,e,s=!1){return Object.defineProperty(i,t,{value:e,enumerable:!s,configurable:!0,writable:!1}),e}const Dl=function(){function t(e,s){this.message=e,this.name=s}return t.prototype=new Error,t.constructor=t,t}();class ww extends Dl{constructor(t,e){super(t,"PasswordException"),this.code=e}}class Sm extends Dl{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class Gm extends Dl{constructor(t){super(t,"InvalidPDFException")}}class Fp extends Dl{constructor(t,e,s){super(t,"ResponseException"),this.status=e,this.missing=s}}class RR extends Dl{constructor(t){super(t,"FormatError")}}class Go extends Dl{constructor(t){super(t,"AbortException")}}function w0(i){(typeof i!="object"||(i==null?void 0:i.length)===void 0)&&ge("Invalid argument for bytesToString");const t=i.length,e=8192;if(t<e)return String.fromCharCode.apply(null,i);const s=[];for(let n=0;n<t;n+=e){const r=Math.min(n+e,t),o=i.subarray(n,r);s.push(String.fromCharCode.apply(null,o))}return s.join("")}function rf(i){typeof i!="string"&&ge("Invalid argument for stringToBytes");const t=i.length,e=new Uint8Array(t);for(let s=0;s<t;++s)e[s]=i.charCodeAt(s)&255;return e}function kR(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function IR(){const i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function MR(){try{return new Function(""),!0}catch{return!1}}class Es{static get isLittleEndian(){return Gt(this,"isLittleEndian",IR())}static get isEvalSupported(){return Gt(this,"isEvalSupported",MR())}static get isOffscreenCanvasSupported(){return Gt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return Gt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){const{platform:t,userAgent:e}=navigator;return Gt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}static get isCSSRoundSupported(){var t,e;return Gt(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const xm=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0"));var jr,Kf,Xm;class At{static makeHexColor(t,e,s){return`#${xm[t]}${xm[e]}${xm[s]}`}static scaleMinMax(t,e){let s;t[0]?(t[0]<0&&(s=e[0],e[0]=e[2],e[2]=s),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(s=e[1],e[1]=e[3],e[3]=s),e[1]*=t[3],e[3]*=t[3]):(s=e[0],e[0]=e[1],e[1]=s,s=e[2],e[2]=e[3],e[3]=s,t[1]<0&&(s=e[1],e[1]=e[3],e[3]=s),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(s=e[0],e[0]=e[2],e[2]=s),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e,s=0){const n=t[s],r=t[s+1];t[s]=n*e[0]+r*e[2]+e[4],t[s+1]=n*e[1]+r*e[3]+e[5]}static applyTransformToBezier(t,e,s=0){const n=e[0],r=e[1],o=e[2],l=e[3],c=e[4],h=e[5];for(let u=0;u<6;u+=2){const f=t[s+u],p=t[s+u+1];t[s+u]=f*n+p*o+c,t[s+u+1]=f*r+p*l+h}}static applyInverseTransform(t,e){const s=t[0],n=t[1],r=e[0]*e[3]-e[1]*e[2];t[0]=(s*e[3]-n*e[2]+e[2]*e[5]-e[4]*e[3])/r,t[1]=(-s*e[1]+n*e[0]+e[4]*e[1]-e[5]*e[0])/r}static axialAlignedBoundingBox(t,e,s){const n=e[0],r=e[1],o=e[2],l=e[3],c=e[4],h=e[5],u=t[0],f=t[1],p=t[2],g=t[3];let _=n*u+c,v=_,E=n*p+c,S=E,C=l*f+h,T=C,R=l*g+h,I=R;if(r!==0||o!==0){const F=r*u,N=r*p,H=o*f,U=o*g;_+=H,S+=H,E+=U,v+=U,C+=F,I+=F,R+=N,T+=N}s[0]=Math.min(s[0],_,E,v,S),s[1]=Math.min(s[1],C,R,T,I),s[2]=Math.max(s[2],_,E,v,S),s[3]=Math.max(s[3],C,R,T,I)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const s=t[0],n=t[1],r=t[2],o=t[3],l=s**2+n**2,c=s*r+n*o,h=r**2+o**2,u=(l+h)/2,f=Math.sqrt(u**2-(l*h-c**2));e[0]=Math.sqrt(u+f||1),e[1]=Math.sqrt(u-f||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const s=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),n=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(s>n)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>o?null:[s,r,n,o]}static pointBoundingBox(t,e,s){s[0]=Math.min(s[0],t),s[1]=Math.min(s[1],e),s[2]=Math.max(s[2],t),s[3]=Math.max(s[3],e)}static rectBoundingBox(t,e,s,n,r){r[0]=Math.min(r[0],t,s),r[1]=Math.min(r[1],e,n),r[2]=Math.max(r[2],t,s),r[3]=Math.max(r[3],e,n)}static bezierBoundingBox(t,e,s,n,r,o,l,c,h){h[0]=Math.min(h[0],t,l),h[1]=Math.min(h[1],e,c),h[2]=Math.max(h[2],t,l),h[3]=Math.max(h[3],e,c),A(this,jr,Xm).call(this,t,s,r,l,e,n,o,c,3*(-t+3*(s-r)+l),6*(t-2*s+r),3*(s-t),h),A(this,jr,Xm).call(this,t,s,r,l,e,n,o,c,3*(-e+3*(n-o)+c),6*(e-2*n+o),3*(n-e),h)}}jr=new WeakSet,Kf=function(t,e,s,n,r,o,l,c,h,u){if(h<=0||h>=1)return;const f=1-h,p=h*h,g=p*h,_=f*(f*(f*t+3*h*e)+3*p*s)+g*n,v=f*(f*(f*r+3*h*o)+3*p*l)+g*c;u[0]=Math.min(u[0],_),u[1]=Math.min(u[1],v),u[2]=Math.max(u[2],_),u[3]=Math.max(u[3],v)},Xm=function(t,e,s,n,r,o,l,c,h,u,f,p){if(Math.abs(h)<1e-12){Math.abs(u)>=1e-12&&A(this,jr,Kf).call(this,t,e,s,n,r,o,l,c,-f/u,p);return}const g=u**2-4*f*h;if(g<0)return;const _=Math.sqrt(g),v=2*h;A(this,jr,Kf).call(this,t,e,s,n,r,o,l,c,(-u+_)/v,p),A(this,jr,Kf).call(this,t,e,s,n,r,o,l,c,(-u-_)/v,p)},w(At,jr);function LR(i){return decodeURIComponent(escape(i))}let Cm=null,Aw=null;function DR(i){return Cm||(Cm=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,Aw=new Map([["ﬅ","ſt"]])),i.replaceAll(Cm,(t,e,s)=>e?e.normalize("NFKC"):Aw.get(s))}function A0(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const i=new Uint8Array(32);return crypto.getRandomValues(i),w0(i)}const Iv="pdfjs_internal_id_";function OR(i,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[s,n,...r]=e;if(!i(s)&&!Number.isInteger(s)||!t(n))return!1;const o=r.length;let l=!0;switch(n.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;l=!1;break;default:return!1}for(const c of r)if(!(typeof c=="number"||l&&c===null))return!1;return!0}function Gs(i,t,e){return Math.min(Math.max(i,t),e)}function E0(i){return Uint8Array.prototype.toBase64?i.toBase64():btoa(w0(i))}function NR(i){return Uint8Array.fromBase64?Uint8Array.fromBase64(i):rf(atob(i))}typeof Promise.try!="function"&&(Promise.try=function(i,...t){return new Promise(e=>{e(i(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(i){return i.reduce((t,e)=>t+e,0)});const sr="http://www.w3.org/2000/svg",_a=class _a{};Z(_a,"CSS",96),Z(_a,"PDF",72),Z(_a,"PDF_TO_CSS_UNITS",_a.CSS/_a.PDF);let Xo=_a;async function of(i,t="text"){if(jh(i,document.baseURI)){const e=await fetch(i);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,s)=>{const n=new XMLHttpRequest;n.open("GET",i,!0),n.responseType=t,n.onreadystatechange=()=>{if(n.readyState===XMLHttpRequest.DONE){if(n.status===200||n.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(n.response);return}e(n.responseText);return}s(new Error(n.statusText))}},n.send(null)})}class af{constructor({viewBox:t,userUnit:e,scale:s,rotation:n,offsetX:r=0,offsetY:o=0,dontFlip:l=!1}){this.viewBox=t,this.userUnit=e,this.scale=s,this.rotation=n,this.offsetX=r,this.offsetY=o,s*=e;const c=(t[2]+t[0])/2,h=(t[3]+t[1])/2;let u,f,p,g;switch(n%=360,n<0&&(n+=360),n){case 180:u=-1,f=0,p=0,g=1;break;case 90:u=0,f=1,p=1,g=0;break;case 270:u=0,f=-1,p=-1,g=0;break;case 0:u=1,f=0,p=0,g=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}l&&(p=-p,g=-g);let _,v,E,S;u===0?(_=Math.abs(h-t[1])*s+r,v=Math.abs(c-t[0])*s+o,E=(t[3]-t[1])*s,S=(t[2]-t[0])*s):(_=Math.abs(c-t[0])*s+r,v=Math.abs(h-t[1])*s+o,E=(t[2]-t[0])*s,S=(t[3]-t[1])*s),this.transform=[u*s,f*s,p*s,g*s,_-u*s*c-p*s*h,v-f*s*c-g*s*h],this.width=E,this.height=S}get rawDims(){const t=this.viewBox;return Gt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:s=this.offsetX,offsetY:n=this.offsetY,dontFlip:r=!1}={}){return new af({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:s,offsetY:n,dontFlip:r})}convertToViewportPoint(t,e){const s=[t,e];return At.applyTransform(s,this.transform),s}convertToViewportRectangle(t){const e=[t[0],t[1]];At.applyTransform(e,this.transform);const s=[t[2],t[3]];return At.applyTransform(s,this.transform),[e[0],e[1],s[0],s[1]]}convertToPdfPoint(t,e){const s=[t,e];return At.applyInverseTransform(s,this.transform),s}}class Mv extends Dl{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function Pg(i){const t=i.length;let e=0;for(;e<t&&i[e].trim()==="";)e++;return i.substring(e,e+5).toLowerCase()==="data:"}function Lv(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function FR(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function $R(i,t="document.pdf"){if(typeof i!="string")return t;if(Pg(i))return Ot('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,s=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,n=e.exec(i);let r=s.exec(n[1])||s.exec(n[2])||s.exec(n[3]);if(r&&(r=r[0],r.includes("%")))try{r=s.exec(decodeURIComponent(r))[0]}catch{}return r||t}class Ew{constructor(){Z(this,"started",Object.create(null));Z(this,"times",[])}time(t){t in this.started&&Ot(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||Ot(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:s}of this.times)e=Math.max(s.length,e);for(const{name:s,start:n,end:r}of this.times)t.push(`${s.padEnd(e)} ${r-n}ms
`);return t.join("")}}function jh(i,t){const e=t?URL.parse(i,t):URL.parse(i);return(e==null?void 0:e.protocol)==="http:"||(e==null?void 0:e.protocol)==="https:"}function gn(i){i.preventDefault()}function Xe(i){i.preventDefault(),i.stopPropagation()}function BR(i){console.log("Deprecated API usage: "+i)}var Cu;class Dv{static toDateObject(t){if(!t||typeof t!="string")return null;a(this,Cu)||b(this,Cu,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=a(this,Cu).exec(t);if(!e)return null;const s=parseInt(e[1],10);let n=parseInt(e[2],10);n=n>=1&&n<=12?n-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let l=parseInt(e[5],10);l=l>=0&&l<=59?l:0;let c=parseInt(e[6],10);c=c>=0&&c<=59?c:0;const h=e[7]||"Z";let u=parseInt(e[8],10);u=u>=0&&u<=23?u:0;let f=parseInt(e[9],10)||0;return f=f>=0&&f<=59?f:0,h==="-"?(o+=u,l+=f):h==="+"&&(o-=u,l-=f),new Date(Date.UTC(s,n,r,o,l,c))}}Cu=new WeakMap,w(Dv,Cu);function HR(i,{scale:t=1,rotation:e=0}){const{width:s,height:n}=i.attributes.style,r=[0,0,parseInt(s),parseInt(n)];return new af({viewBox:r,userUnit:1,scale:t,rotation:e})}function Ov(i){if(i.startsWith("#")){const t=parseInt(i.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(t=>parseInt(t)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(Ot(`Not a valid color format: "${i}"`),[0,0,0])}function jR(i){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of i.keys()){t.style.color=e;const s=window.getComputedStyle(t).color;i.set(e,Ov(s))}t.remove()}function Le(i){const{a:t,b:e,c:s,d:n,e:r,f:o}=i.getTransform();return[t,e,s,n,r,o]}function An(i){const{a:t,b:e,c:s,d:n,e:r,f:o}=i.getTransform().invertSelf();return[t,e,s,n,r,o]}function Il(i,t,e=!1,s=!0){if(t instanceof af){const{pageWidth:n,pageHeight:r}=t.rawDims,{style:o}=i,l=Es.isCSSRoundSupported,c=`var(--total-scale-factor) * ${n}px`,h=`var(--total-scale-factor) * ${r}px`,u=l?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,f=l?`round(down, ${h}, var(--scale-round-y))`:`calc(${h})`;!e||t.rotation%180===0?(o.width=u,o.height=f):(o.width=f,o.height=u)}s&&i.setAttribute("data-main-rotation",t.rotation)}class Xn{constructor(){const{pixelRatio:t}=Xn;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,s,n,r=-1){let o=1/0,l=1/0,c=1/0;s=Xn.capPixels(s,r),s>0&&(o=Math.sqrt(s/(t*e))),n!==-1&&(l=n/t,c=n/e);const h=Math.min(o,l,c);return this.sx>h||this.sy>h?(this.sx=h,this.sy=h,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}static capPixels(t,e){if(e>=0){const s=Math.ceil(window.screen.availWidth*window.screen.availHeight*this.pixelRatio**2*(1+e/100));return t>0?Math.min(t,s):s}return t}}const Km=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var io,wa,Oi,no,Tu,mc,Pu,qp,S0,As,x0,C0,Vh,T0,Yf;const or=class or{constructor(t){w(this,As);w(this,io,null);w(this,wa,null);w(this,Oi);w(this,no,null);w(this,Tu,null);w(this,mc,null);b(this,Oi,t),a(or,Pu)||b(or,Pu,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=b(this,io,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=a(this,Oi)._uiManager._signal;t.addEventListener("contextmenu",gn,{signal:e}),t.addEventListener("pointerdown",A(or,qp,S0),{signal:e});const s=b(this,no,document.createElement("div"));s.className="buttons",t.append(s);const n=a(this,Oi).toolbarPosition;if(n){const{style:r}=t,o=a(this,Oi)._uiManager.direction==="ltr"?1-n[0]:n[0];r.insetInlineEnd=`${100*o}%`,r.top=`calc(${100*n[1]}% + var(--editor-toolbar-vert-offset))`}return A(this,As,T0).call(this),t}get div(){return a(this,io)}hide(){var t;a(this,io).classList.add("hidden"),(t=a(this,wa))==null||t.hideDropdown()}show(){var t;a(this,io).classList.remove("hidden"),(t=a(this,Tu))==null||t.shown()}async addAltText(t){const e=await t.render();A(this,As,Vh).call(this,e),a(this,no).prepend(e,a(this,As,Yf)),b(this,Tu,t)}addColorPicker(t){b(this,wa,t);const e=t.renderButton();A(this,As,Vh).call(this,e),a(this,no).prepend(e,a(this,As,Yf))}async addEditSignatureButton(t){const e=b(this,mc,await t.renderEditButton(a(this,Oi)));A(this,As,Vh).call(this,e),a(this,no).prepend(e,a(this,As,Yf))}updateEditSignatureButton(t){a(this,mc)&&(a(this,mc).title=t)}remove(){var t;a(this,io).remove(),(t=a(this,wa))==null||t.destroy(),b(this,wa,null)}};io=new WeakMap,wa=new WeakMap,Oi=new WeakMap,no=new WeakMap,Tu=new WeakMap,mc=new WeakMap,Pu=new WeakMap,qp=new WeakSet,S0=function(t){t.stopPropagation()},As=new WeakSet,x0=function(t){a(this,Oi)._focusEventsAllowed=!1,Xe(t)},C0=function(t){a(this,Oi)._focusEventsAllowed=!0,Xe(t)},Vh=function(t){const e=a(this,Oi)._uiManager._signal;t.addEventListener("focusin",A(this,As,x0).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",A(this,As,C0).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",gn,{signal:e})},T0=function(){const{editorType:t,_uiManager:e}=a(this,Oi),s=document.createElement("button");s.className="delete",s.tabIndex=0,s.setAttribute("data-l10n-id",a(or,Pu)[t]),A(this,As,Vh).call(this,s),s.addEventListener("click",n=>{e.delete()},{signal:e._signal}),a(this,no).append(s)},Yf=function(){const t=document.createElement("div");return t.className="divider",t},w(or,qp),w(or,Pu,null);let Ym=or;var Ru,Aa,Ea,Ko,P0,R0,k0;class VR{constructor(t){w(this,Ko);w(this,Ru,null);w(this,Aa,null);w(this,Ea);b(this,Ea,t)}show(t,e,s){const[n,r]=A(this,Ko,R0).call(this,e,s),{style:o}=a(this,Aa)||b(this,Aa,A(this,Ko,P0).call(this));t.append(a(this,Aa)),o.insetInlineEnd=`${100*n}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){a(this,Aa).remove()}}Ru=new WeakMap,Aa=new WeakMap,Ea=new WeakMap,Ko=new WeakSet,P0=function(){const t=b(this,Aa,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",gn,{signal:a(this,Ea)._signal});const e=b(this,Ru,document.createElement("div"));return e.className="buttons",t.append(e),A(this,Ko,k0).call(this),t},R0=function(t,e){let s=0,n=0;for(const r of t){const o=r.y+r.height;if(o<s)continue;const l=r.x+(e?r.width:0);if(o>s){n=l,s=o;continue}e?l>n&&(n=l):l<n&&(n=l)}return[e?1-n:n,s]},k0=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const s=a(this,Ea)._signal;t.addEventListener("contextmenu",gn,{signal:s}),t.addEventListener("click",()=>{a(this,Ea).highlightSelection("floating_button")},{signal:s}),a(this,Ru).append(t)};function I0(i,t,e){for(const s of e)t.addEventListener(s,i[s].bind(i))}var Wp;class UR{constructor(){w(this,Wp,0)}get id(){return`${ER}${Bs(this,Wp)._++}`}}Wp=new WeakMap;var bc,ku,Cs,vc,Qf;const Uv=class Uv{constructor(){w(this,vc);w(this,bc,A0());w(this,ku,0);w(this,Cs,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),n=new Image;n.src=t;const r=n.decode().then(()=>(s.drawImage(n,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return Gt(this,"_isSVGFittingCanvas",r)}async getFromFile(t){const{lastModified:e,name:s,size:n,type:r}=t;return A(this,vc,Qf).call(this,`${e}_${s}_${n}_${r}`,t)}async getFromUrl(t){return A(this,vc,Qf).call(this,t,t)}async getFromBlob(t,e){const s=await e;return A(this,vc,Qf).call(this,t,s)}async getFromId(t){a(this,Cs)||b(this,Cs,new Map);const e=a(this,Cs).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:s}=e;return delete e.blobPromise,this.getFromBlob(e.id,s)}return this.getFromUrl(e.url)}getFromCanvas(t,e){a(this,Cs)||b(this,Cs,new Map);let s=a(this,Cs).get(t);if(s!=null&&s.bitmap)return s.refCounter+=1,s;const n=new OffscreenCanvas(e.width,e.height);return n.getContext("2d").drawImage(e,0,0),s={bitmap:n.transferToImageBitmap(),id:`image_${a(this,bc)}_${Bs(this,ku)._++}`,refCounter:1,isSvg:!1},a(this,Cs).set(t,s),a(this,Cs).set(s.id,s),s}getSvgUrl(t){const e=a(this,Cs).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var n;a(this,Cs)||b(this,Cs,new Map);const e=a(this,Cs).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:s}=e;if(!e.url&&!e.file){const r=new OffscreenCanvas(s.width,s.height);r.getContext("bitmaprenderer").transferFromImageBitmap(s),e.blobPromise=r.convertToBlob()}(n=s.close)==null||n.call(s),e.bitmap=null}isValidId(t){return t.startsWith(`image_${a(this,bc)}_`)}};bc=new WeakMap,ku=new WeakMap,Cs=new WeakMap,vc=new WeakSet,Qf=async function(t,e){a(this,Cs)||b(this,Cs,new Map);let s=a(this,Cs).get(t);if(s===null)return null;if(s!=null&&s.bitmap)return s.refCounter+=1,s;try{s||(s={bitmap:null,id:`image_${a(this,bc)}_${Bs(this,ku)._++}`,refCounter:0,isSvg:!1});let n;if(typeof e=="string"?(s.url=e,n=await of(e,"blob")):e instanceof File?n=s.file=e:e instanceof Blob&&(n=e),n.type==="image/svg+xml"){const r=Uv._isSVGFittingCanvas,o=new FileReader,l=new Image,c=new Promise((h,u)=>{l.onload=()=>{s.bitmap=l,s.isSvg=!0,h()},o.onload=async()=>{const f=s.svgUrl=o.result;l.src=await r?`${f}#svgView(preserveAspectRatio(none))`:f},l.onerror=o.onerror=u});o.readAsDataURL(n),await c}else s.bitmap=await createImageBitmap(n);s.refCounter=1}catch(n){Ot(n),s=null}return a(this,Cs).set(t,s),s&&a(this,Cs).set(s.id,s),s};let Qm=Uv;var Ve,ro,Iu,Me;class zR{constructor(t=128){w(this,Ve,[]);w(this,ro,!1);w(this,Iu);w(this,Me,-1);b(this,Iu,t)}add({cmd:t,undo:e,post:s,mustExec:n,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:l=!1}){if(n&&t(),a(this,ro))return;const c={cmd:t,undo:e,post:s,type:r};if(a(this,Me)===-1){a(this,Ve).length>0&&(a(this,Ve).length=0),b(this,Me,0),a(this,Ve).push(c);return}if(o&&a(this,Ve)[a(this,Me)].type===r){l&&(c.undo=a(this,Ve)[a(this,Me)].undo),a(this,Ve)[a(this,Me)]=c;return}const h=a(this,Me)+1;h===a(this,Iu)?a(this,Ve).splice(0,1):(b(this,Me,h),h<a(this,Ve).length&&a(this,Ve).splice(h)),a(this,Ve).push(c)}undo(){if(a(this,Me)===-1)return;b(this,ro,!0);const{undo:t,post:e}=a(this,Ve)[a(this,Me)];t(),e==null||e(),b(this,ro,!1),b(this,Me,a(this,Me)-1)}redo(){if(a(this,Me)<a(this,Ve).length-1){b(this,Me,a(this,Me)+1),b(this,ro,!0);const{cmd:t,post:e}=a(this,Ve)[a(this,Me)];t(),e==null||e(),b(this,ro,!1)}}hasSomethingToUndo(){return a(this,Me)!==-1}hasSomethingToRedo(){return a(this,Me)<a(this,Ve).length-1}cleanType(t){if(a(this,Me)!==-1){for(let e=a(this,Me);e>=0;e--)if(a(this,Ve)[e].type!==t){a(this,Ve).splice(e+1,a(this,Me)-e),b(this,Me,e);return}a(this,Ve).length=0,b(this,Me,-1)}}destroy(){b(this,Ve,null)}}Ve=new WeakMap,ro=new WeakMap,Iu=new WeakMap,Me=new WeakMap;var Gp,M0;class lf{constructor(t){w(this,Gp);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=Es.platform;for(const[s,n,r={}]of t)for(const o of s){const l=o.startsWith("mac+");e&&l?(this.callbacks.set(o.slice(4),{callback:n,options:r}),this.allKeys.add(o.split("+").at(-1))):!e&&!l&&(this.callbacks.set(o,{callback:n,options:r}),this.allKeys.add(o.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const s=this.callbacks.get(A(this,Gp,M0).call(this,e));if(!s)return;const{callback:n,options:{bubbles:r=!1,args:o=[],checker:l=null}}=s;l&&!l(t,e)||(n.bind(t,...o,e)(),r||Xe(e))}}Gp=new WeakSet,M0=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const Xp=class Xp{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return jR(t),Gt(this,"_colors",t)}convert(t){const e=Ov(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[s,n]of this._colors)if(n.every((r,o)=>r===e[o]))return Xp._colorsMapping.get(s);return e}getHexCode(t){const e=this._colors.get(t);return e?At.makeHexColor(...e):t}};Z(Xp,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Jm=Xp;var _c,hi,es,fs,yc,lr,wc,Ni,oo,ao,Ac,Sa,Tn,Qi,xa,Mu,Lu,Ec,Du,Pn,lo,Sc,co,Rn,Kp,ho,Ou,uo,Ca,Ta,fo,Nu,os,ce,cr,po,Pa,Fu,$u,go,kn,hr,Bu,Fi,ot,Jf,Zm,L0,D0,Zf,O0,N0,F0,tb,$0,eb,sb,B0,js,ir,H0,j0,ib,V0,Uh,nb;const cc=class cc{constructor(t,e,s,n,r,o,l,c,h,u,f,p,g,_){w(this,ot);w(this,_c,new AbortController);w(this,hi,null);w(this,es,new Map);w(this,fs,new Map);w(this,yc,null);w(this,lr,null);w(this,wc,null);w(this,Ni,new zR);w(this,oo,null);w(this,ao,null);w(this,Ac,0);w(this,Sa,new Set);w(this,Tn,null);w(this,Qi,null);w(this,xa,new Set);Z(this,"_editorUndoBar",null);w(this,Mu,!1);w(this,Lu,!1);w(this,Ec,!1);w(this,Du,null);w(this,Pn,null);w(this,lo,null);w(this,Sc,null);w(this,co,!1);w(this,Rn,null);w(this,Kp,new UR);w(this,ho,!1);w(this,Ou,!1);w(this,uo,null);w(this,Ca,null);w(this,Ta,null);w(this,fo,null);w(this,Nu,null);w(this,os,Dt.NONE);w(this,ce,new Set);w(this,cr,null);w(this,po,null);w(this,Pa,null);w(this,Fu,null);w(this,$u,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});w(this,go,[0,0]);w(this,kn,null);w(this,hr,null);w(this,Bu,null);w(this,Fi,null);const v=this._signal=a(this,_c).signal;b(this,hr,t),b(this,Bu,e),b(this,yc,s),b(this,po,n),this._eventBus=r,r._on("editingaction",this.onEditingAction.bind(this),{signal:v}),r._on("pagechanging",this.onPageChanging.bind(this),{signal:v}),r._on("scalechanging",this.onScaleChanging.bind(this),{signal:v}),r._on("rotationchanging",this.onRotationChanging.bind(this),{signal:v}),r._on("setpreference",this.onSetPreference.bind(this),{signal:v}),r._on("switchannotationeditorparams",E=>this.updateParams(E.type,E.value),{signal:v}),A(this,ot,O0).call(this),A(this,ot,B0).call(this),A(this,ot,tb).call(this),b(this,lr,o.annotationStorage),b(this,Du,o.filterFactory),b(this,Pa,l),b(this,Sc,c||null),b(this,Mu,h),b(this,Lu,u),b(this,Ec,f),b(this,Nu,p||null),this.viewParameters={realScale:Xo.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=g||null,this._supportsPinchToZoom=_!==!1}static get _keyboardManager(){const t=cc.prototype,e=o=>a(o,hr).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),s=(o,{target:l})=>{if(l instanceof HTMLInputElement){const{type:c}=l;return c!=="text"&&c!=="number"}return!0},n=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return Gt(this,"_keyboardManager",new lf([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&a(o,hr).contains(l)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:l})=>!(l instanceof HTMLButtonElement)&&a(o,hr).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-n,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[n,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-n],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,n],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}destroy(){var t,e,s,n,r,o,l,c;(t=a(this,Fi))==null||t.resolve(),b(this,Fi,null),(e=a(this,_c))==null||e.abort(),b(this,_c,null),this._signal=null;for(const h of a(this,fs).values())h.destroy();a(this,fs).clear(),a(this,es).clear(),a(this,xa).clear(),(s=a(this,fo))==null||s.clear(),b(this,hi,null),a(this,ce).clear(),a(this,Ni).destroy(),(n=a(this,yc))==null||n.destroy(),(r=a(this,po))==null||r.destroy(),(o=a(this,Rn))==null||o.hide(),b(this,Rn,null),(l=a(this,Ta))==null||l.destroy(),b(this,Ta,null),a(this,Pn)&&(clearTimeout(a(this,Pn)),b(this,Pn,null)),a(this,kn)&&(clearTimeout(a(this,kn)),b(this,kn,null)),(c=this._editorUndoBar)==null||c.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return a(this,Nu)}get useNewAltTextFlow(){return a(this,Lu)}get useNewAltTextWhenAddingImage(){return a(this,Ec)}get hcmFilter(){return Gt(this,"hcmFilter",a(this,Pa)?a(this,Du).addHCMFilter(a(this,Pa).foreground,a(this,Pa).background):"none")}get direction(){return Gt(this,"direction",getComputedStyle(a(this,hr)).direction)}get highlightColors(){return Gt(this,"highlightColors",a(this,Sc)?new Map(a(this,Sc).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return Gt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),b(this,ao,t)}setMainHighlightColorPicker(t){b(this,Ta,t)}editAltText(t,e=!1){var s;(s=a(this,yc))==null||s.editAltText(this,t,e)}getSignature(t){var e;(e=a(this,po))==null||e.getSignature({uiManager:this,editor:t})}get signatureManager(){return a(this,po)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":b(this,Ec,e);break}}onPageChanging({pageNumber:t}){b(this,Ac,t-1)}focusMainContainer(){a(this,hr).focus()}findParent(t,e){for(const s of a(this,fs).values()){const{x:n,y:r,width:o,height:l}=s.div.getBoundingClientRect();if(t>=n&&t<=n+o&&e>=r&&e<=r+l)return s}return null}disableUserSelect(t=!1){a(this,Bu).classList.toggle("noUserSelect",t)}addShouldRescale(t){a(this,xa).add(t)}removeShouldRescale(t){a(this,xa).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*Xo.PDF_TO_CSS_UNITS;for(const s of a(this,xa))s.onScaleChanging();(e=a(this,ao))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:s,anchorOffset:n,focusNode:r,focusOffset:o}=e,l=e.toString(),h=A(this,ot,Jf).call(this,e).closest(".textLayer"),u=this.getSelectionBoxes(h);if(!u)return;e.empty();const f=A(this,ot,Zm).call(this,h),p=a(this,os)===Dt.NONE,g=()=>{f==null||f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:u,anchorNode:s,anchorOffset:n,focusNode:r,focusOffset:o,text:l}),p&&this.showAllEditors("highlight",!0,!0)};if(p){this.switchToMode(Dt.HIGHLIGHT,g);return}g()}addToAnnotationStorage(t){!t.isEmpty()&&a(this,lr)&&!a(this,lr).has(t.id)&&a(this,lr).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,a(this,co)&&(b(this,co,!1),A(this,ot,Zf).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of a(this,ce))if(e.div.contains(t)){b(this,Ca,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!a(this,Ca))return;const[t,e]=a(this,Ca);b(this,Ca,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){A(this,ot,tb).call(this),A(this,ot,eb).call(this)}removeEditListeners(){A(this,ot,$0).call(this),A(this,ot,sb).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const s of a(this,Qi))if(s.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const s of a(this,Qi))if(s.isHandlingMimeForPasting(e.type)){s.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var s;if(t.preventDefault(),(s=a(this,hi))==null||s.commitOrRemove(),!this.hasSelection)return;const e=[];for(const n of a(this,ce)){const r=n.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const o of a(this,Qi))if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let s=e.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(r){Ot(`paste: "${r.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const n=this.currentLayer;try{const r=[];for(const c of s){const h=await n.deserialize(c);if(!h)return;r.push(h)}const o=()=>{for(const c of r)A(this,ot,ib).call(this,c);A(this,ot,nb).call(this,r)},l=()=>{for(const c of r)c.remove()};this.addCommands({cmd:o,undo:l,mustExec:!0})}catch(r){Ot(`paste: "${r.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),a(this,os)!==Dt.NONE&&!this.isEditorHandlingKeyboard&&cc._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,a(this,co)&&(b(this,co,!1),A(this,ot,Zf).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(A(this,ot,N0).call(this),A(this,ot,eb).call(this),A(this,ot,js).call(this,{isEditing:a(this,os)!==Dt.NONE,isEmpty:A(this,ot,Uh).call(this),hasSomethingToUndo:a(this,Ni).hasSomethingToUndo(),hasSomethingToRedo:a(this,Ni).hasSomethingToRedo(),hasSelectedEditor:!1})):(A(this,ot,F0).call(this),A(this,ot,sb).call(this),A(this,ot,js).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!a(this,Qi)){b(this,Qi,t);for(const e of a(this,Qi))A(this,ot,ir).call(this,e.defaultPropertiesToUpdate)}}getId(){return a(this,Kp).id}get currentLayer(){return a(this,fs).get(a(this,Ac))}getLayer(t){return a(this,fs).get(t)}get currentPageIndex(){return a(this,Ac)}addLayer(t){a(this,fs).set(t.pageIndex,t),a(this,ho)?t.enable():t.disable()}removeLayer(t){a(this,fs).delete(t.pageIndex)}async updateMode(t,e=null,s=!1){var n,r,o;if(a(this,os)!==t&&!(a(this,Fi)&&(await a(this,Fi).promise,!a(this,Fi)))){if(b(this,Fi,Promise.withResolvers()),(n=a(this,ao))==null||n.commitOrRemove(),b(this,os,t),t===Dt.NONE){this.setEditingState(!1),A(this,ot,j0).call(this),(r=this._editorUndoBar)==null||r.hide(),a(this,Fi).resolve();return}t===Dt.SIGNATURE&&await((o=a(this,po))==null?void 0:o.loadSignatures()),this.setEditingState(!0),await A(this,ot,H0).call(this),this.unselectAll();for(const l of a(this,fs).values())l.updateMode(t);if(!e){s&&this.addNewEditorFromKeyboard(),a(this,Fi).resolve();return}for(const l of a(this,es).values())l.annotationElementId===e||l.id===e?(this.setSelected(l),l.enterInEditMode()):l.unselect();a(this,Fi).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t.mode!==a(this,os)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,...t})}updateParams(t,e){var s;if(a(this,Qi)){switch(t){case Yt.CREATE:this.currentLayer.addNewEditor(e);return;case Yt.HIGHLIGHT_DEFAULT_COLOR:(s=a(this,Ta))==null||s.updateColor(e);break;case Yt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(a(this,Fu)||b(this,Fu,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const n of a(this,ce))n.updateParams(t,e);for(const n of a(this,Qi))n.updateDefaultParams(t,e)}}showAllEditors(t,e,s=!1){var r;for(const o of a(this,es).values())o.editorType===t&&o.show(e);(((r=a(this,Fu))==null?void 0:r.get(Yt.HIGHLIGHT_SHOW_ALL))??!0)!==e&&A(this,ot,ir).call(this,[[Yt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(a(this,Ou)!==t){b(this,Ou,t);for(const e of a(this,fs).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const s of a(this,es).values())s.pageIndex===t&&e.push(s);return e}getEditor(t){return a(this,es).get(t)}addEditor(t){a(this,es).set(t.id,t)}removeEditor(t){var e,s;t.div.contains(document.activeElement)&&(a(this,Pn)&&clearTimeout(a(this,Pn)),b(this,Pn,setTimeout(()=>{this.focusMainContainer(),b(this,Pn,null)},0))),a(this,es).delete(t.id),t.annotationElementId&&((e=a(this,fo))==null||e.delete(t.annotationElementId)),this.unselect(t),(!t.annotationElementId||!a(this,Sa).has(t.annotationElementId))&&((s=a(this,lr))==null||s.remove(t.id))}addDeletedAnnotationElement(t){a(this,Sa).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return a(this,Sa).has(t)}removeDeletedAnnotationElement(t){a(this,Sa).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){a(this,hi)!==t&&(b(this,hi,t),t&&A(this,ot,ir).call(this,t.propertiesToUpdate))}updateUI(t){a(this,ot,V0)===t&&A(this,ot,ir).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){A(this,ot,ir).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(a(this,ce).has(t)){a(this,ce).delete(t),t.unselect(),A(this,ot,js).call(this,{hasSelectedEditor:this.hasSelection});return}a(this,ce).add(t),t.select(),A(this,ot,ir).call(this,t.propertiesToUpdate),A(this,ot,js).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;(e=a(this,ao))==null||e.commitOrRemove();for(const s of a(this,ce))s!==t&&s.unselect();a(this,ce).clear(),a(this,ce).add(t),t.select(),A(this,ot,ir).call(this,t.propertiesToUpdate),A(this,ot,js).call(this,{hasSelectedEditor:!0})}isSelected(t){return a(this,ce).has(t)}get firstSelectedEditor(){return a(this,ce).values().next().value}unselect(t){t.unselect(),a(this,ce).delete(t),A(this,ot,js).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return a(this,ce).size!==0}get isEnterHandled(){return a(this,ce).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;a(this,Ni).undo(),A(this,ot,js).call(this,{hasSomethingToUndo:a(this,Ni).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:A(this,ot,Uh).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){a(this,Ni).redo(),A(this,ot,js).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:a(this,Ni).hasSomethingToRedo(),isEmpty:A(this,ot,Uh).call(this)})}addCommands(t){a(this,Ni).add(t),A(this,ot,js).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:A(this,ot,Uh).call(this)})}cleanUndoStack(t){a(this,Ni).cleanType(t)}delete(){var r;this.commitOrRemove();const t=(r=this.currentLayer)==null?void 0:r.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...a(this,ce)],s=()=>{var o;(o=this._editorUndoBar)==null||o.show(n,e.length===1?e[0].editorType:e.length);for(const l of e)l.remove()},n=()=>{for(const o of e)A(this,ot,ib).call(this,o)};this.addCommands({cmd:s,undo:n,mustExec:!0})}commitOrRemove(){var t;(t=a(this,hi))==null||t.commitOrRemove()}hasSomethingToControl(){return a(this,hi)||this.hasSelection}selectAll(){for(const t of a(this,ce))t.commit();A(this,ot,nb).call(this,a(this,es).values())}unselectAll(){var t;if(!(a(this,hi)&&(a(this,hi).commitOrRemove(),a(this,os)!==Dt.NONE))&&!((t=a(this,ao))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of a(this,ce))e.unselect();a(this,ce).clear(),A(this,ot,js).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;a(this,go)[0]+=t,a(this,go)[1]+=e;const[n,r]=a(this,go),o=[...a(this,ce)],l=1e3;a(this,kn)&&clearTimeout(a(this,kn)),b(this,kn,setTimeout(()=>{b(this,kn,null),a(this,go)[0]=a(this,go)[1]=0,this.addCommands({cmd:()=>{for(const c of o)a(this,es).has(c.id)&&(c.translateInPage(n,r),c.translationDone())},undo:()=>{for(const c of o)a(this,es).has(c.id)&&(c.translateInPage(-n,-r),c.translationDone())},mustExec:!1})},l));for(const c of o)c.translateInPage(t,e),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),b(this,Tn,new Map);for(const t of a(this,ce))a(this,Tn).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!a(this,Tn))return!1;this.disableUserSelect(!1);const t=a(this,Tn);b(this,Tn,null);let e=!1;for(const[{x:n,y:r,pageIndex:o},l]of t)l.newX=n,l.newY=r,l.newPageIndex=o,e||(e=n!==l.savedX||r!==l.savedY||o!==l.savedPageIndex);if(!e)return!1;const s=(n,r,o,l)=>{if(a(this,es).has(n.id)){const c=a(this,fs).get(l);c?n._setParentAndPosition(c,r,o):(n.pageIndex=l,n.x=r,n.y=o)}};return this.addCommands({cmd:()=>{for(const[n,{newX:r,newY:o,newPageIndex:l}]of t)s(n,r,o,l)},undo:()=>{for(const[n,{savedX:r,savedY:o,savedPageIndex:l}]of t)s(n,r,o,l)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(a(this,Tn))for(const s of a(this,Tn).keys())s.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||a(this,ce).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return a(this,hi)===t}getActive(){return a(this,hi)}getMode(){return a(this,os)}get imageManager(){return Gt(this,"imageManager",new Qm)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let h=0,u=e.rangeCount;h<u;h++)if(!t.contains(e.getRangeAt(h).commonAncestorContainer))return null;const{x:s,y:n,width:r,height:o}=t.getBoundingClientRect();let l;switch(t.getAttribute("data-main-rotation")){case"90":l=(h,u,f,p)=>({x:(u-n)/o,y:1-(h+f-s)/r,width:p/o,height:f/r});break;case"180":l=(h,u,f,p)=>({x:1-(h+f-s)/r,y:1-(u+p-n)/o,width:f/r,height:p/o});break;case"270":l=(h,u,f,p)=>({x:1-(u+p-n)/o,y:(h-s)/r,width:p/o,height:f/r});break;default:l=(h,u,f,p)=>({x:(h-s)/r,y:(u-n)/o,width:f/r,height:p/o});break}const c=[];for(let h=0,u=e.rangeCount;h<u;h++){const f=e.getRangeAt(h);if(!f.collapsed)for(const{x:p,y:g,width:_,height:v}of f.getClientRects())_===0||v===0||c.push(l(p,g,_,v))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:t,id:e}){(a(this,wc)||b(this,wc,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=a(this,wc))==null||e.delete(t)}renderAnnotationElement(t){var n;const e=(n=a(this,wc))==null?void 0:n.get(t.data.id);if(!e)return;const s=a(this,lr).getRawValue(e);s&&(a(this,os)===Dt.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}setMissingCanvas(t,e,s){var r;const n=(r=a(this,fo))==null?void 0:r.get(t);n&&(n.setCanvas(e,s),a(this,fo).delete(t))}addMissingCanvas(t,e){(a(this,fo)||b(this,fo,new Map)).set(t,e)}};_c=new WeakMap,hi=new WeakMap,es=new WeakMap,fs=new WeakMap,yc=new WeakMap,lr=new WeakMap,wc=new WeakMap,Ni=new WeakMap,oo=new WeakMap,ao=new WeakMap,Ac=new WeakMap,Sa=new WeakMap,Tn=new WeakMap,Qi=new WeakMap,xa=new WeakMap,Mu=new WeakMap,Lu=new WeakMap,Ec=new WeakMap,Du=new WeakMap,Pn=new WeakMap,lo=new WeakMap,Sc=new WeakMap,co=new WeakMap,Rn=new WeakMap,Kp=new WeakMap,ho=new WeakMap,Ou=new WeakMap,uo=new WeakMap,Ca=new WeakMap,Ta=new WeakMap,fo=new WeakMap,Nu=new WeakMap,os=new WeakMap,ce=new WeakMap,cr=new WeakMap,po=new WeakMap,Pa=new WeakMap,Fu=new WeakMap,$u=new WeakMap,go=new WeakMap,kn=new WeakMap,hr=new WeakMap,Bu=new WeakMap,Fi=new WeakMap,ot=new WeakSet,Jf=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},Zm=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const s of a(this,fs).values())if(s.hasTextLayer(t))return s;return null},L0=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const s=A(this,ot,Jf).call(this,t).closest(".textLayer"),n=this.getSelectionBoxes(s);n&&(a(this,Rn)||b(this,Rn,new VR(this)),a(this,Rn).show(s,n,this.direction==="ltr"))},D0=function(){var r,o,l;const t=document.getSelection();if(!t||t.isCollapsed){a(this,cr)&&((r=a(this,Rn))==null||r.hide(),b(this,cr,null),A(this,ot,js).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===a(this,cr))return;const n=A(this,ot,Jf).call(this,t).closest(".textLayer");if(!n){a(this,cr)&&((o=a(this,Rn))==null||o.hide(),b(this,cr,null),A(this,ot,js).call(this,{hasSelectedText:!1}));return}if((l=a(this,Rn))==null||l.hide(),b(this,cr,e),A(this,ot,js).call(this,{hasSelectedText:!0}),!(a(this,os)!==Dt.HIGHLIGHT&&a(this,os)!==Dt.NONE)&&(a(this,os)===Dt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),b(this,co,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=a(this,os)===Dt.HIGHLIGHT?A(this,ot,Zm).call(this,n):null;c==null||c.toggleDrawing();const h=new AbortController,u=this.combinedSignal(h),f=p=>{p.type==="pointerup"&&p.button!==0||(h.abort(),c==null||c.toggleDrawing(!0),p.type==="pointerup"&&A(this,ot,Zf).call(this,"main_toolbar"))};window.addEventListener("pointerup",f,{signal:u}),window.addEventListener("blur",f,{signal:u})}},Zf=function(t=""){a(this,os)===Dt.HIGHLIGHT?this.highlightSelection(t):a(this,Mu)&&A(this,ot,L0).call(this)},O0=function(){document.addEventListener("selectionchange",A(this,ot,D0).bind(this),{signal:this._signal})},N0=function(){if(a(this,lo))return;b(this,lo,new AbortController);const t=this.combinedSignal(a(this,lo));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},F0=function(){var t;(t=a(this,lo))==null||t.abort(),b(this,lo,null)},tb=function(){if(a(this,uo))return;b(this,uo,new AbortController);const t=this.combinedSignal(a(this,uo));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},$0=function(){var t;(t=a(this,uo))==null||t.abort(),b(this,uo,null)},eb=function(){if(a(this,oo))return;b(this,oo,new AbortController);const t=this.combinedSignal(a(this,oo));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},sb=function(){var t;(t=a(this,oo))==null||t.abort(),b(this,oo,null)},B0=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},js=function(t){Object.entries(t).some(([s,n])=>a(this,$u)[s]!==n)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(a(this,$u),t)}),a(this,os)===Dt.HIGHLIGHT&&t.hasSelectedEditor===!1&&A(this,ot,ir).call(this,[[Yt.HIGHLIGHT_FREE,!0]]))},ir=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},H0=async function(){if(!a(this,ho)){b(this,ho,!0);const t=[];for(const e of a(this,fs).values())t.push(e.enable());await Promise.all(t);for(const e of a(this,es).values())e.enable()}},j0=function(){if(this.unselectAll(),a(this,ho)){b(this,ho,!1);for(const t of a(this,fs).values())t.disable();for(const t of a(this,es).values())t.disable()}},ib=function(t){const e=a(this,fs).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},V0=function(){let t=null;for(t of a(this,ce));return t},Uh=function(){if(a(this,es).size===0)return!0;if(a(this,es).size===1)for(const t of a(this,es).values())return t.isEmpty();return!1},nb=function(t){for(const e of a(this,ce))e.unselect();a(this,ce).clear();for(const e of t)e.isEmpty()||(a(this,ce).add(e),e.select());A(this,ot,js).call(this,{hasSelectedEditor:this.hasSelection})},Z(cc,"TRANSLATE_SMALL",1),Z(cc,"TRANSLATE_BIG",10);let Ml=cc;var as,In,Ji,xc,Mn,ui,Cc,Ln,Zs,ur,Ra,Dn,mo,un,zh,tp;const Vs=class Vs{constructor(t){w(this,un);w(this,as,null);w(this,In,!1);w(this,Ji,null);w(this,xc,null);w(this,Mn,null);w(this,ui,null);w(this,Cc,!1);w(this,Ln,null);w(this,Zs,null);w(this,ur,null);w(this,Ra,null);w(this,Dn,!1);b(this,Zs,t),b(this,Dn,t._uiManager.useNewAltTextFlow),a(Vs,mo)||b(Vs,mo,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){Vs._l10n??(Vs._l10n=t)}async render(){const t=b(this,Ji,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=b(this,xc,document.createElement("span"));t.append(e),a(this,Dn)?(t.classList.add("new"),t.setAttribute("data-l10n-id",a(Vs,mo).missing),e.setAttribute("data-l10n-id",a(Vs,mo)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=a(this,Zs)._uiManager._signal;t.addEventListener("contextmenu",gn,{signal:s}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:s});const n=r=>{r.preventDefault(),a(this,Zs)._uiManager.editAltText(a(this,Zs)),a(this,Dn)&&a(this,Zs)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:a(this,un,zh)}})};return t.addEventListener("click",n,{capture:!0,signal:s}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(b(this,Cc,!0),n(r))},{signal:s}),await A(this,un,tp).call(this),t}finish(){a(this,Ji)&&(a(this,Ji).focus({focusVisible:a(this,Cc)}),b(this,Cc,!1))}isEmpty(){return a(this,Dn)?a(this,as)===null:!a(this,as)&&!a(this,In)}hasData(){return a(this,Dn)?a(this,as)!==null||!!a(this,ur):this.isEmpty()}get guessedText(){return a(this,ur)}async setGuessedText(t){a(this,as)===null&&(b(this,ur,t),b(this,Ra,await Vs._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),A(this,un,tp).call(this))}toggleAltTextBadge(t=!1){var e;if(!a(this,Dn)||a(this,as)){(e=a(this,Ln))==null||e.remove(),b(this,Ln,null);return}if(!a(this,Ln)){const s=b(this,Ln,document.createElement("div"));s.className="noAltTextBadge",a(this,Zs).div.append(s)}a(this,Ln).classList.toggle("hidden",!t)}serialize(t){let e=a(this,as);return!t&&a(this,ur)===e&&(e=a(this,Ra)),{altText:e,decorative:a(this,In),guessedText:a(this,ur),textWithDisclaimer:a(this,Ra)}}get data(){return{altText:a(this,as),decorative:a(this,In)}}set data({altText:t,decorative:e,guessedText:s,textWithDisclaimer:n,cancel:r=!1}){s&&(b(this,ur,s),b(this,Ra,n)),!(a(this,as)===t&&a(this,In)===e)&&(r||(b(this,as,t),b(this,In,e)),A(this,un,tp).call(this))}toggle(t=!1){a(this,Ji)&&(!t&&a(this,ui)&&(clearTimeout(a(this,ui)),b(this,ui,null)),a(this,Ji).disabled=!t)}shown(){a(this,Zs)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:a(this,un,zh)}})}destroy(){var t,e;(t=a(this,Ji))==null||t.remove(),b(this,Ji,null),b(this,xc,null),b(this,Mn,null),(e=a(this,Ln))==null||e.remove(),b(this,Ln,null)}};as=new WeakMap,In=new WeakMap,Ji=new WeakMap,xc=new WeakMap,Mn=new WeakMap,ui=new WeakMap,Cc=new WeakMap,Ln=new WeakMap,Zs=new WeakMap,ur=new WeakMap,Ra=new WeakMap,Dn=new WeakMap,mo=new WeakMap,un=new WeakSet,zh=function(){return a(this,as)&&"added"||a(this,as)===null&&this.guessedText&&"review"||"missing"},tp=async function(){var n,r,o;const t=a(this,Ji);if(!t)return;if(a(this,Dn)){if(t.classList.toggle("done",!!a(this,as)),t.setAttribute("data-l10n-id",a(Vs,mo)[a(this,un,zh)]),(n=a(this,xc))==null||n.setAttribute("data-l10n-id",a(Vs,mo)[`${a(this,un,zh)}-label`]),!a(this,as)){(r=a(this,Mn))==null||r.remove();return}}else{if(!a(this,as)&&!a(this,In)){t.classList.remove("done"),(o=a(this,Mn))==null||o.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=a(this,Mn);if(!e){b(this,Mn,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${a(this,Zs).id}`;const l=100,c=a(this,Zs)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(a(this,ui)),b(this,ui,null)},{once:!0}),t.addEventListener("mouseenter",()=>{b(this,ui,setTimeout(()=>{b(this,ui,null),a(this,Mn).classList.add("show"),a(this,Zs)._reportTelemetry({action:"alt_text_tooltip"})},l))},{signal:c}),t.addEventListener("mouseleave",()=>{var h;a(this,ui)&&(clearTimeout(a(this,ui)),b(this,ui,null)),(h=a(this,Mn))==null||h.classList.remove("show")},{signal:c})}a(this,In)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=a(this,as)),e.parentNode||t.append(e);const s=a(this,Zs).getElementForAltText();s==null||s.setAttribute("aria-describedby",e.id)},w(Vs,mo,null),Z(Vs,"_l10n",null);let $p=Vs;var Tc,ka,Hu,ju,Vu,Uu,zu,dr,Ia,fr,Ma,pr,Yo,U0,z0,q0;const zv=class zv{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:s=null,onPinchStart:n=null,onPinching:r=null,onPinchEnd:o=null,signal:l}){w(this,Yo);w(this,Tc);w(this,ka,!1);w(this,Hu,null);w(this,ju);w(this,Vu);w(this,Uu);w(this,zu);w(this,dr,null);w(this,Ia);w(this,fr,null);w(this,Ma);w(this,pr,null);b(this,Tc,t),b(this,Hu,s),b(this,ju,e),b(this,Vu,n),b(this,Uu,r),b(this,zu,o),b(this,Ma,new AbortController),b(this,Ia,AbortSignal.any([l,a(this,Ma).signal])),t.addEventListener("touchstart",A(this,Yo,U0).bind(this),{passive:!1,signal:a(this,Ia)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Xn.pixelRatio}destroy(){var t,e;(t=a(this,Ma))==null||t.abort(),b(this,Ma,null),(e=a(this,dr))==null||e.abort(),b(this,dr,null)}};Tc=new WeakMap,ka=new WeakMap,Hu=new WeakMap,ju=new WeakMap,Vu=new WeakMap,Uu=new WeakMap,zu=new WeakMap,dr=new WeakMap,Ia=new WeakMap,fr=new WeakMap,Ma=new WeakMap,pr=new WeakMap,Yo=new WeakSet,U0=function(t){var n,r,o;if((n=a(this,ju))!=null&&n.call(this))return;if(t.touches.length===1){if(a(this,dr))return;const l=b(this,dr,new AbortController),c=AbortSignal.any([a(this,Ia),l.signal]),h=a(this,Tc),u={capture:!0,signal:c,passive:!1},f=p=>{var g;p.pointerType==="touch"&&((g=a(this,dr))==null||g.abort(),b(this,dr,null))};h.addEventListener("pointerdown",p=>{p.pointerType==="touch"&&(Xe(p),f(p))},u),h.addEventListener("pointerup",f,u),h.addEventListener("pointercancel",f,u);return}if(!a(this,pr)){b(this,pr,new AbortController);const l=AbortSignal.any([a(this,Ia),a(this,pr).signal]),c=a(this,Tc),h={signal:l,capture:!1,passive:!1};c.addEventListener("touchmove",A(this,Yo,z0).bind(this),h);const u=A(this,Yo,q0).bind(this);c.addEventListener("touchend",u,h),c.addEventListener("touchcancel",u,h),h.capture=!0,c.addEventListener("pointerdown",Xe,h),c.addEventListener("pointermove",Xe,h),c.addEventListener("pointercancel",Xe,h),c.addEventListener("pointerup",Xe,h),(r=a(this,Vu))==null||r.call(this)}if(Xe(t),t.touches.length!==2||(o=a(this,Hu))!=null&&o.call(this)){b(this,fr,null);return}let[e,s]=t.touches;e.identifier>s.identifier&&([e,s]=[s,e]),b(this,fr,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:s.screenX,touch1Y:s.screenY})},z0=function(t){var R;if(!a(this,fr)||t.touches.length!==2)return;Xe(t);let[e,s]=t.touches;e.identifier>s.identifier&&([e,s]=[s,e]);const{screenX:n,screenY:r}=e,{screenX:o,screenY:l}=s,c=a(this,fr),{touch0X:h,touch0Y:u,touch1X:f,touch1Y:p}=c,g=f-h,_=p-u,v=o-n,E=l-r,S=Math.hypot(v,E)||1,C=Math.hypot(g,_)||1;if(!a(this,ka)&&Math.abs(C-S)<=zv.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=n,c.touch0Y=r,c.touch1X=o,c.touch1Y=l,!a(this,ka)){b(this,ka,!0);return}const T=[(n+o)/2,(r+l)/2];(R=a(this,Uu))==null||R.call(this,T,C,S)},q0=function(t){var e;t.touches.length>=2||(a(this,pr)&&(a(this,pr).abort(),b(this,pr,null),(e=a(this,zu))==null||e.call(this)),a(this,fr)&&(Xe(t),b(this,fr,null),b(this,ka,!1)))};let Bp=zv;var La,Zi,Ce,Pc,bo,qu,Da,ps,Oa,gr,vo,Wu,Na,di,Gu,Fa,mr,On,Rc,kc,$i,$a,Xu,Yp,Pt,rb,Ku,ob,ep,W0,G0,ab,sp,lb,X0,K0,Y0,cb,Q0,hb,J0,Z0,tE,ub,qh;const jt=class jt{constructor(t){w(this,Pt);w(this,La,null);w(this,Zi,null);w(this,Ce,null);w(this,Pc,!1);w(this,bo,null);w(this,qu,"");w(this,Da,!1);w(this,ps,null);w(this,Oa,null);w(this,gr,null);w(this,vo,null);w(this,Wu,"");w(this,Na,!1);w(this,di,null);w(this,Gu,!1);w(this,Fa,!1);w(this,mr,!1);w(this,On,null);w(this,Rc,0);w(this,kc,0);w(this,$i,null);w(this,$a,null);Z(this,"isSelected",!1);Z(this,"_isCopy",!1);Z(this,"_editToolbar",null);Z(this,"_initialOptions",Object.create(null));Z(this,"_initialData",null);Z(this,"_isVisible",!0);Z(this,"_uiManager",null);Z(this,"_focusEventsAllowed",!0);w(this,Xu,!1);w(this,Yp,jt._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:s,pageHeight:n,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,n],this.pageTranslation=[r,o];const[l,c]=this.parentDimensions;this.x=t.x/l,this.y=t.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=jt.prototype._resizeWithKeyboard,e=Ml.TRANSLATE_SMALL,s=Ml.TRANSLATE_BIG;return Gt(this,"_resizerKeyboardManager",new lf([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],jt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return Gt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new qR({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(jt._l10n??(jt._l10n=t),jt._l10nResizer||(jt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),jt._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);jt._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){ge("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return a(this,Xu)}set _isDraggable(t){var e;b(this,Xu,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=a(this,Yp)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):A(this,Pt,qh).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(a(this,Na)?b(this,Na,!1):this.parent.setSelected(this))}focusout(t){var s;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(s=this.parent)!=null&&s.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,s,n){const[r,o]=this.parentDimensions;[s,n]=this.screenToPageTranslation(s,n),this.x=(t+s)/r,this.y=(e+n)/o,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[s,n]=this.parentDimensions;this.setAt(t*s,e*n,this.width*s,this.height*n),this._onTranslated()}translate(t,e){A(this,Pt,rb).call(this,this.parentDimensions,t,e)}translateInPage(t,e){a(this,di)||b(this,di,[this.x,this.y,this.width,this.height]),A(this,Pt,rb).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){a(this,di)||b(this,di,[this.x,this.y,this.width,this.height]);const{div:s,parentDimensions:[n,r]}=this;if(this.x+=t/n,this.y+=e/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:f,y:p}=this.div.getBoundingClientRect();this.parent.findNewParent(this,f,p)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:l}=this;const[c,h]=this.getBaseTranslation();o+=c,l+=h;const{style:u}=s;u.left=`${(100*o).toFixed(2)}%`,u.top=`${(100*l).toFixed(2)}%`,this._onTranslating(o,l),s.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!a(this,di)&&(a(this,di)[0]!==this.x||a(this,di)[1]!==this.y)}get _hasBeenResized(){return!!a(this,di)&&(a(this,di)[2]!==this.width||a(this,di)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:s}=jt,n=s/t,r=s/e;switch(this.rotation){case 90:return[-n,r];case 180:return[n,r];case 270:return[n,-r];default:return[-n,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[s,n]}=this;let{x:r,y:o,width:l,height:c}=this;if(l*=s,c*=n,r*=s,o*=n,this._mustFixPosition)switch(t){case 0:r=Gs(r,0,s-l),o=Gs(o,0,n-c);break;case 90:r=Gs(r,0,s-c),o=Gs(o,l,n);break;case 180:r=Gs(r,l,s),o=Gs(o,c,n);break;case 270:r=Gs(r,c,s),o=Gs(o,0,n-l);break}this.x=r/=s,this.y=o/=n;const[h,u]=this.getBaseTranslation();r+=h,o+=u,e.left=`${(100*r).toFixed(2)}%`,e.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var s;return A(s=jt,Ku,ob).call(s,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var s;return A(s=jt,Ku,ob).call(s,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,s]}=this;return[e*t,s*t]}setDims(t,e){const[s,n]=this.parentDimensions,{style:r}=this.div;r.width=`${(100*t/s).toFixed(2)}%`,a(this,Da)||(r.height=`${(100*e/n).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:s}=t,n=s.endsWith("%"),r=!a(this,Da)&&e.endsWith("%");if(n&&r)return;const[o,l]=this.parentDimensions;n||(t.width=`${(100*parseFloat(s)/o).toFixed(2)}%`),!a(this,Da)&&!r&&(t.height=`${(100*parseFloat(e)/l).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=a(this,Ce))==null||t.finish()}async addEditToolbar(){return this._editToolbar||a(this,Fa)?this._editToolbar:(this._editToolbar=new Ym(this),this.div.append(this._editToolbar.render()),a(this,Ce)&&await this._editToolbar.addAltText(a(this,Ce)),this._editToolbar)}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=a(this,Ce))==null||t.destroy())}addContainer(t){var s;const e=(s=this._editToolbar)==null?void 0:s.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){a(this,Ce)||($p.initialize(jt._l10n),b(this,Ce,new $p(this)),a(this,La)&&(a(this,Ce).data=a(this,La),b(this,La,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=a(this,Ce))==null?void 0:t.data}set altTextData(t){a(this,Ce)&&(a(this,Ce).data=t)}get guessedAltText(){var t;return(t=a(this,Ce))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=a(this,Ce))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=a(this,Ce))==null?void 0:e.serialize(t)}hasAltText(){return!!a(this,Ce)&&!a(this,Ce).isEmpty()}hasAltTextData(){var t;return((t=a(this,Ce))==null?void 0:t.hasData())??!1}render(){var o;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=a(this,Pc)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),A(this,Pt,hb).call(this);const[e,s]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*s/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/s).toFixed(2)}%`);const[n,r]=this.getInitialTranslation();return this.translate(n,r),I0(this,t,["keydown","pointerdown","dblclick"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(a(this,$a)||b(this,$a,new Bp({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:A(this,Pt,X0).bind(this),onPinching:A(this,Pt,K0).bind(this),onPinchEnd:A(this,Pt,Y0).bind(this),signal:this._uiManager._signal}))),(o=this._uiManager._editorUndoBar)==null||o.hide(),t}pointerdown(t){const{isMac:e}=Es.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(b(this,Na,!0),this._isDraggable){A(this,Pt,Q0).call(this,t);return}A(this,Pt,cb).call(this,t)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){a(this,On)&&clearTimeout(a(this,On)),b(this,On,setTimeout(()=>{var t;b(this,On,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,s){t.changeParent(this),this.x=e,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,s=this.rotation){const n=this.parentScale,[r,o]=this.pageDimensions,[l,c]=this.pageTranslation,h=t/n,u=e/n,f=this.x*r,p=this.y*o,g=this.width*r,_=this.height*o;switch(s){case 0:return[f+h+l,o-p-u-_+c,f+h+g+l,o-p-u+c];case 90:return[f+u+l,o-p+h+c,f+u+_+l,o-p+h+g+c];case 180:return[f-h-g+l,o-p+u+c,f-h+l,o-p+u+_+c];case 270:return[f-u-_+l,o-p-h-g+c,f-u+l,o-p-h+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[s,n,r,o]=t,l=r-s,c=o-n;switch(this.rotation){case 0:return[s,e-o,l,c];case 90:return[s,e-n,c,l];case 180:return[r,e-n,l,c];case 270:return[r,e-o,c,l];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){return this.isInEditMode()?!1:(this.parent.setEditingState(!1),b(this,Fa,!0),!0)}disableEditMode(){return this.isInEditMode()?(this.parent.setEditingState(!0),b(this,Fa,!1),!0):!1}isInEditMode(){return a(this,Fa)}shouldGetKeyboardEvents(){return a(this,mr)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:s,right:n}=this.getClientDimensions(),{innerHeight:r,innerWidth:o}=window;return e<o&&n>0&&t<r&&s>0}rebuild(){A(this,Pt,hb).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){ge("An editor must be serializable")}static async deserialize(t,e,s){const n=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:s});n.rotation=t.rotation,b(n,La,t.accessibilityData),n._isCopy=t.isCopy||!1;const[r,o]=n.pageDimensions,[l,c,h,u]=n.getRectInCurrentCoords(t.rect,o);return n.x=l/r,n.y=c/o,n.width=h/r,n.height=u/o,n}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e;if((t=a(this,vo))==null||t.abort(),b(this,vo,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),a(this,On)&&(clearTimeout(a(this,On)),b(this,On,null)),A(this,Pt,qh).call(this),this.removeEditToolbar(),a(this,$i)){for(const s of a(this,$i).values())clearTimeout(s);b(this,$i,null)}this.parent=null,(e=a(this,$a))==null||e.destroy(),b(this,$a,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(A(this,Pt,W0).call(this),a(this,ps).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),b(this,gr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=a(this,ps).children;if(!a(this,Zi)){b(this,Zi,Array.from(e));const o=A(this,Pt,J0).bind(this),l=A(this,Pt,Z0).bind(this),c=this._uiManager._signal;for(const h of a(this,Zi)){const u=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",o,{signal:c}),h.addEventListener("blur",l,{signal:c}),h.addEventListener("focus",A(this,Pt,tE).bind(this,u),{signal:c}),h.setAttribute("data-l10n-id",jt._l10nResizer[u])}}const s=a(this,Zi)[0];let n=0;for(const o of e){if(o===s)break;n++}const r=(360-this.rotation+this.parentRotation)%360/90*(a(this,Zi).length/4);if(r!==n){if(r<n)for(let l=0;l<n-r;l++)a(this,ps).append(a(this,ps).firstChild);else if(r>n)for(let l=0;l<r-n;l++)a(this,ps).firstChild.before(a(this,ps).lastChild);let o=0;for(const l of e){const h=a(this,Zi)[o++].getAttribute("data-resizer-name");l.setAttribute("data-l10n-id",jt._l10nResizer[h])}}A(this,Pt,ub).call(this,0),b(this,mr,!0),a(this,ps).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){a(this,mr)&&A(this,Pt,lb).call(this,a(this,Wu),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){A(this,Pt,qh).call(this),this.div.focus()}select(){var t,e,s;if(!(this.isSelected&&this._editToolbar)){if(this.isSelected=!0,this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var n,r;(n=this.div)!=null&&n.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(e=this._editToolbar)==null||e.show(),(s=a(this,Ce))==null||s.toggleAltTextBadge(!1)}}unselect(){var t,e,s,n,r;this.isSelected&&(this.isSelected=!1,(t=a(this,ps))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(s=this.div)!=null&&s.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(n=this._editToolbar)==null||n.hide(),(r=a(this,Ce))==null||r.toggleAltTextBadge(!0))}updateParams(t,e){}disableEditing(){}enableEditing(){}get canChangeContent(){return!1}enterInEditMode(){this.canChangeContent&&(this.enableEditMode(),this.div.focus())}dblclick(t){this.enterInEditMode(),this.parent.updateToolbar({mode:this.constructor._editorType,editId:this.id})}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return a(this,Gu)}set isEditing(t){b(this,Gu,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){b(this,Da,!0);const s=t/e,{style:n}=this.div;n.aspectRatio=s,n.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){a(this,$i)||b(this,$i,new Map);const{action:s}=t;let n=a(this,$i).get(s);n&&clearTimeout(n),n=setTimeout(()=>{this._reportTelemetry(t),a(this,$i).delete(s),a(this,$i).size===0&&b(this,$i,null)},jt._telemetryTimeout),a(this,$i).set(s,n);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),b(this,Pc,!1)}disable(){this.div&&(this.div.tabIndex=-1),b(this,Pc,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const s=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),s.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};La=new WeakMap,Zi=new WeakMap,Ce=new WeakMap,Pc=new WeakMap,bo=new WeakMap,qu=new WeakMap,Da=new WeakMap,ps=new WeakMap,Oa=new WeakMap,gr=new WeakMap,vo=new WeakMap,Wu=new WeakMap,Na=new WeakMap,di=new WeakMap,Gu=new WeakMap,Fa=new WeakMap,mr=new WeakMap,On=new WeakMap,Rc=new WeakMap,kc=new WeakMap,$i=new WeakMap,$a=new WeakMap,Xu=new WeakMap,Yp=new WeakMap,Pt=new WeakSet,rb=function([t,e],s,n){[s,n]=this.screenToPageTranslation(s,n),this.x+=s/t,this.y+=n/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},Ku=new WeakSet,ob=function(t,e,s){switch(s){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},ep=function(t){switch(t){case 90:{const[e,s]=this.pageDimensions;return[0,-e/s,s/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,s]=this.pageDimensions;return[0,e/s,-s/e,0]}default:return[1,0,0,1]}},W0=function(){if(a(this,ps))return;b(this,ps,document.createElement("div")),a(this,ps).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const s of t){const n=document.createElement("div");a(this,ps).append(n),n.classList.add("resizer",s),n.setAttribute("data-resizer-name",s),n.addEventListener("pointerdown",A(this,Pt,G0).bind(this,s),{signal:e}),n.addEventListener("contextmenu",gn,{signal:e}),n.tabIndex=-1}this.div.prepend(a(this,ps))},G0=function(t,e){var u;e.preventDefault();const{isMac:s}=Es.platform;if(e.button!==0||e.ctrlKey&&s)return;(u=a(this,Ce))==null||u.toggle(!1);const n=this._isDraggable;this._isDraggable=!1,b(this,Oa,[e.screenX,e.screenY]);const r=new AbortController,o=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",A(this,Pt,lb).bind(this,t),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",Xe,{passive:!1,signal:o}),window.addEventListener("contextmenu",gn,{signal:o}),b(this,gr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const l=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const h=()=>{var f;r.abort(),this.parent.togglePointerEvents(!0),(f=a(this,Ce))==null||f.toggle(!0),this._isDraggable=n,this.parent.div.style.cursor=l,this.div.style.cursor=c,A(this,Pt,sp).call(this)};window.addEventListener("pointerup",h,{signal:o}),window.addEventListener("blur",h,{signal:o})},ab=function(t,e,s,n){this.width=s,this.height=n,this.x=t,this.y=e;const[r,o]=this.parentDimensions;this.setDims(r*s,o*n),this.fixAndSetPosition(),this._onResized()},sp=function(){if(!a(this,gr))return;const{savedX:t,savedY:e,savedWidth:s,savedHeight:n}=a(this,gr);b(this,gr,null);const r=this.x,o=this.y,l=this.width,c=this.height;r===t&&o===e&&l===s&&c===n||this.addCommands({cmd:A(this,Pt,ab).bind(this,r,o,l,c),undo:A(this,Pt,ab).bind(this,t,e,s,n),mustExec:!0})},lb=function(t,e){const[s,n]=this.parentDimensions,r=this.x,o=this.y,l=this.width,c=this.height,h=jt.MIN_SIZE/s,u=jt.MIN_SIZE/n,f=A(this,Pt,ep).call(this,this.rotation),p=(J,X)=>[f[0]*J+f[2]*X,f[1]*J+f[3]*X],g=A(this,Pt,ep).call(this,360-this.rotation),_=(J,X)=>[g[0]*J+g[2]*X,g[1]*J+g[3]*X];let v,E,S=!1,C=!1;switch(t){case"topLeft":S=!0,v=(J,X)=>[0,0],E=(J,X)=>[J,X];break;case"topMiddle":v=(J,X)=>[J/2,0],E=(J,X)=>[J/2,X];break;case"topRight":S=!0,v=(J,X)=>[J,0],E=(J,X)=>[0,X];break;case"middleRight":C=!0,v=(J,X)=>[J,X/2],E=(J,X)=>[0,X/2];break;case"bottomRight":S=!0,v=(J,X)=>[J,X],E=(J,X)=>[0,0];break;case"bottomMiddle":v=(J,X)=>[J/2,X],E=(J,X)=>[J/2,0];break;case"bottomLeft":S=!0,v=(J,X)=>[0,X],E=(J,X)=>[J,0];break;case"middleLeft":C=!0,v=(J,X)=>[0,X/2],E=(J,X)=>[J,X/2];break}const T=v(l,c),R=E(l,c);let I=p(...R);const F=jt._round(r+I[0]),N=jt._round(o+I[1]);let H=1,U=1,Q,tt;if(e.fromKeyboard)({deltaX:Q,deltaY:tt}=e);else{const{screenX:J,screenY:X}=e,[et,Y]=a(this,Oa);[Q,tt]=this.screenToPageTranslation(J-et,X-Y),a(this,Oa)[0]=J,a(this,Oa)[1]=X}if([Q,tt]=_(Q/s,tt/n),S){const J=Math.hypot(l,c);H=U=Math.max(Math.min(Math.hypot(R[0]-T[0]-Q,R[1]-T[1]-tt)/J,1/l,1/c),h/l,u/c)}else C?H=Gs(Math.abs(R[0]-T[0]-Q),h,1)/l:U=Gs(Math.abs(R[1]-T[1]-tt),u,1)/c;const Et=jt._round(l*H),wt=jt._round(c*U);I=p(...E(Et,wt));const Rt=F-I[0],oe=N-I[1];a(this,di)||b(this,di,[this.x,this.y,this.width,this.height]),this.width=Et,this.height=wt,this.x=Rt,this.y=oe,this.setDims(s*Et,n*wt),this.fixAndSetPosition(),this._onResizing()},X0=function(){var t;b(this,gr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=a(this,Ce))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},K0=function(t,e,s){let r=.7*(s/e)+1-.7;if(r===1)return;const o=A(this,Pt,ep).call(this,this.rotation),l=(F,N)=>[o[0]*F+o[2]*N,o[1]*F+o[3]*N],[c,h]=this.parentDimensions,u=this.x,f=this.y,p=this.width,g=this.height,_=jt.MIN_SIZE/c,v=jt.MIN_SIZE/h;r=Math.max(Math.min(r,1/p,1/g),_/p,v/g);const E=jt._round(p*r),S=jt._round(g*r);if(E===p&&S===g)return;a(this,di)||b(this,di,[u,f,p,g]);const C=l(p/2,g/2),T=jt._round(u+C[0]),R=jt._round(f+C[1]),I=l(E/2,S/2);this.x=T-I[0],this.y=R-I[1],this.width=E,this.height=S,this.setDims(c*E,h*S),this.fixAndSetPosition(),this._onResizing()},Y0=function(){var t;(t=a(this,Ce))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),A(this,Pt,sp).call(this)},cb=function(t){const{isMac:e}=Es.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},Q0=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let s=!1;const n=new AbortController,r=this._uiManager.combinedSignal(n),o={capture:!0,passive:!1,signal:r},l=h=>{n.abort(),b(this,bo,null),b(this,Na,!1),this._uiManager.endDragSession()||A(this,Pt,cb).call(this,h),s&&this._onStopDragging()};e&&(b(this,Rc,t.clientX),b(this,kc,t.clientY),b(this,bo,t.pointerId),b(this,qu,t.pointerType),window.addEventListener("pointermove",h=>{s||(s=!0,this._onStartDragging());const{clientX:u,clientY:f,pointerId:p}=h;if(p!==a(this,bo)){Xe(h);return}const[g,_]=this.screenToPageTranslation(u-a(this,Rc),f-a(this,kc));b(this,Rc,u),b(this,kc,f),this._uiManager.dragSelectedEditors(g,_)},o),window.addEventListener("touchmove",Xe,o),window.addEventListener("pointerdown",h=>{h.pointerType===a(this,qu)&&(a(this,$a)||h.isPrimary)&&l(h),Xe(h)},o));const c=h=>{if(!a(this,bo)||a(this,bo)===h.pointerId){l(h);return}Xe(h)};window.addEventListener("pointerup",c,{signal:r}),window.addEventListener("blur",c,{signal:r})},hb=function(){if(a(this,vo)||!this.div)return;b(this,vo,new AbortController);const t=this._uiManager.combinedSignal(a(this,vo));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},J0=function(t){jt._resizerKeyboardManager.exec(this,t)},Z0=function(t){var e;a(this,mr)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==a(this,ps)&&A(this,Pt,qh).call(this)},tE=function(t){b(this,Wu,a(this,mr)?t:"")},ub=function(t){if(a(this,Zi))for(const e of a(this,Zi))e.tabIndex=t},qh=function(){b(this,mr,!1),A(this,Pt,ub).call(this,-1),A(this,Pt,sp).call(this)},w(jt,Ku),Z(jt,"_l10n",null),Z(jt,"_l10nResizer",null),Z(jt,"_borderLineWidth",-1),Z(jt,"_colorManager",new Jm),Z(jt,"_zIndex",1),Z(jt,"_telemetryTimeout",1e3);let Se=jt;class qR extends Se{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const Sw=3285377520,Di=4294901760,En=65535;class eE{constructor(t){this.h1=t?t&4294967295:Sw,this.h2=t?t&4294967295:Sw}update(t){let e,s;if(typeof t=="string"){e=new Uint8Array(t.length*2),s=0;for(let v=0,E=t.length;v<E;v++){const S=t.charCodeAt(v);S<=255?e[s++]=S:(e[s++]=S>>>8,e[s++]=S&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),s=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const n=s>>2,r=s-n*4,o=new Uint32Array(e.buffer,0,n);let l=0,c=0,h=this.h1,u=this.h2;const f=3432918353,p=461845907,g=f&En,_=p&En;for(let v=0;v<n;v++)v&1?(l=o[v],l=l*f&Di|l*g&En,l=l<<15|l>>>17,l=l*p&Di|l*_&En,h^=l,h=h<<13|h>>>19,h=h*5+3864292196):(c=o[v],c=c*f&Di|c*g&En,c=c<<15|c>>>17,c=c*p&Di|c*_&En,u^=c,u=u<<13|u>>>19,u=u*5+3864292196);switch(l=0,r){case 3:l^=e[n*4+2]<<16;case 2:l^=e[n*4+1]<<8;case 1:l^=e[n*4],l=l*f&Di|l*g&En,l=l<<15|l>>>17,l=l*p&Di|l*_&En,n&1?h^=l:u^=l}this.h1=h,this.h2=u}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Di|t*36045&En,e=e*4283543511&Di|((e<<16|t>>>16)*2950163797&Di)>>>16,t^=e>>>1,t=t*444984403&Di|t*60499&En,e=e*3301882366&Di|((e<<16|t>>>16)*3120437893&Di)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const db=Object.freeze({map:null,hash:"",transfer:void 0});var Ba,Ha,gs,Qp,sE;class Nv{constructor(){w(this,Qp);w(this,Ba,!1);w(this,Ha,null);w(this,gs,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const s=a(this,gs).get(t);return s===void 0?e:Object.assign(e,s)}getRawValue(t){return a(this,gs).get(t)}remove(t){if(a(this,gs).delete(t),a(this,gs).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of a(this,gs).values())if(e instanceof Se)return;this.onAnnotationEditor(null)}}setValue(t,e){const s=a(this,gs).get(t);let n=!1;if(s!==void 0)for(const[r,o]of Object.entries(e))s[r]!==o&&(n=!0,s[r]=o);else n=!0,a(this,gs).set(t,e);n&&A(this,Qp,sE).call(this),e instanceof Se&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return a(this,gs).has(t)}get size(){return a(this,gs).size}resetModified(){a(this,Ba)&&(b(this,Ba,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new iE(this)}get serializable(){if(a(this,gs).size===0)return db;const t=new Map,e=new eE,s=[],n=Object.create(null);let r=!1;for(const[o,l]of a(this,gs)){const c=l instanceof Se?l.serialize(!1,n):l;c&&(t.set(o,c),e.update(`${o}:${JSON.stringify(c)}`),r||(r=!!c.bitmap))}if(r)for(const o of t.values())o.bitmap&&s.push(o.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:s}:db}get editorStats(){let t=null;const e=new Map;for(const s of a(this,gs).values()){if(!(s instanceof Se))continue;const n=s.telemetryFinalData;if(!n)continue;const{type:r}=n;e.has(r)||e.set(r,Object.getPrototypeOf(s).constructor),t||(t=Object.create(null));const o=t[r]||(t[r]=new Map);for(const[l,c]of Object.entries(n)){if(l==="type")continue;let h=o.get(l);h||(h=new Map,o.set(l,h));const u=h.get(c)??0;h.set(c,u+1)}}for(const[s,n]of e)t[s]=n.computeTelemetryFinalData(t[s]);return t}resetModifiedIds(){b(this,Ha,null)}get modifiedIds(){if(a(this,Ha))return a(this,Ha);const t=[];for(const e of a(this,gs).values())!(e instanceof Se)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return b(this,Ha,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return a(this,gs).entries()}}Ba=new WeakMap,Ha=new WeakMap,gs=new WeakMap,Qp=new WeakSet,sE=function(){a(this,Ba)||(b(this,Ba,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Yu;class iE extends Nv{constructor(e){super();w(this,Yu);const{map:s,hash:n,transfer:r}=e.serializable,o=structuredClone(s,r?{transfer:r}:null);b(this,Yu,{map:o,hash:n,transfer:r})}get print(){ge("Should not call PrintAnnotationStorage.print")}get serializable(){return a(this,Yu)}get modifiedIds(){return Gt(this,"modifiedIds",{ids:new Set,hash:""})}}Yu=new WeakMap;var Ic;class WR{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){w(this,Ic,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),a(this,Ic).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:s}){if(!(!t||a(this,Ic).has(t.loadedName))){if(Ke(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:r,style:o}=t,l=new FontFace(n,r,o);this.addNativeFontFace(l);try{await l.load(),a(this,Ic).add(n),s==null||s(t)}catch{Ot(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(l)}return}ge("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const s=t.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(n){throw Ot(`Failed to load font '${s.family}': '${n}'.`),t.disableFontFace=!0,n}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const n=this._queueLoadingCallback(s);this._prepareFontLoadEvent(t,n)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return Gt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return Gt(this,"isSyncFontLoadingSupported",Ws||Es.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(Ke(!n.done,"completeRequest() cannot be called twice."),n.done=!0;s.length>0&&s[0].done;){const r=s.shift();setTimeout(r.callback,0)}}const{loadingRequests:s}=this,n={done:!1,complete:e,callback:t};return s.push(n),n}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return Gt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function s(R,I){return R.charCodeAt(I)<<24|R.charCodeAt(I+1)<<16|R.charCodeAt(I+2)<<8|R.charCodeAt(I+3)&255}function n(R,I,F,N){const H=R.substring(0,I),U=R.substring(I+F);return H+N+U}let r,o;const l=this._document.createElement("canvas");l.width=1,l.height=1;const c=l.getContext("2d");let h=0;function u(R,I){if(++h>30){Ot("Load test font never loaded."),I();return}if(c.font="30px "+R,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){I();return}setTimeout(u.bind(null,R,I))}const f=`lt${Date.now()}${this.loadTestFontId++}`;let p=this._loadTestFont;p=n(p,976,f.length,f);const _=16,v=1482184792;let E=s(p,_);for(r=0,o=f.length-3;r<o;r+=4)E=E-v+s(f,r)|0;r<f.length&&(E=E-v+s(f+"XXX",r)|0),p=n(p,_,4,kR(E));const S=`url(data:font/opentype;base64,${btoa(p)});`,C=`@font-face {font-family:"${f}";src:${S}}`;this.insertRule(C);const T=this._document.createElement("div");T.style.visibility="hidden",T.style.width=T.style.height="10px",T.style.position="absolute",T.style.top=T.style.left="0px";for(const R of[t.loadedName,f]){const I=this._document.createElement("span");I.textContent="Hi",I.style.fontFamily=R,T.append(I)}this._document.body.append(T),u(f,()=>{T.remove(),e.complete()})}}Ic=new WeakMap;class GR{constructor(t,e=null){this.compiledGlyphs=Object.create(null);for(const s in t)this[s]=t[s];this._inspectFont=e}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${E0(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let n=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(n+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${n}src:${t}}`}return(s=this._inspectFont)==null||s.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const s=this.loadedName+"_path_"+e;let n;try{n=t.get(s)}catch(o){Ot(`getPathGenerator - ignoring character: "${o}".`)}const r=new Path2D(n||"");return this.fontExtraProperties||t.delete(s),this.compiledGlyphs[e]=r}}function XR(i){if(i instanceof URL)return i.href;if(typeof i=="string"){if(Ws)return i;const t=URL.parse(i,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function KR(i){if(Ws&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return rf(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i==null?void 0:i.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Of(i){if(typeof i!="string")return null;if(i.endsWith("/"))return i;throw new Error(`Invalid factory url: "${i}" must include trailing slash.`)}const fb=i=>typeof i=="object"&&Number.isInteger(i==null?void 0:i.num)&&i.num>=0&&Number.isInteger(i==null?void 0:i.gen)&&i.gen>=0,YR=i=>typeof i=="object"&&typeof(i==null?void 0:i.name)=="string",QR=OR.bind(null,fb,YR);var br,Jp;class JR{constructor(){w(this,br,new Map);w(this,Jp,Promise.resolve())}postMessage(t,e){const s={data:structuredClone(t,e?{transfer:e}:null)};a(this,Jp).then(()=>{for(const[n]of a(this,br))n.call(this,s)})}addEventListener(t,e,s=null){let n=null;if((s==null?void 0:s.signal)instanceof AbortSignal){const{signal:r}=s;if(r.aborted){Ot("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(t,e);n=()=>r.removeEventListener("abort",o),r.addEventListener("abort",o)}a(this,br).set(e,n)}removeEventListener(t,e){const s=a(this,br).get(e);s==null||s(),a(this,br).delete(e)}terminate(){for(const[,t]of a(this,br))t==null||t();a(this,br).clear()}}br=new WeakMap,Jp=new WeakMap;const Nf={DATA:1,ERROR:2},We={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function xw(){}function Qs(i){if(i instanceof Go||i instanceof Gm||i instanceof ww||i instanceof Fp||i instanceof Sm)return i;switch(i instanceof Error||typeof i=="object"&&i!==null||ge('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new Go(i.message);case"InvalidPDFException":return new Gm(i.message);case"PasswordException":return new ww(i.message,i.code);case"ResponseException":return new Fp(i.message,i.status,i.missing);case"UnknownErrorException":return new Sm(i.message,i.details)}return new Sm(i.message,i.toString())}var Mc,qi,nE,rE,oE,ip;class Wh{constructor(t,e,s){w(this,qi);w(this,Mc,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",A(this,qi,nE).bind(this),{signal:a(this,Mc).signal})}on(t,e){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=e}send(t,e,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},s)}sendWithPromise(t,e,s){const n=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[n]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:n,data:e},s)}catch(o){r.reject(o)}return r.promise}sendWithStream(t,e,s,n){const r=this.streamId++,o=this.sourceName,l=this.targetName,c=this.comObj;return new ReadableStream({start:h=>{const u=Promise.withResolvers();return this.streamControllers[r]={controller:h,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:l,action:t,streamId:r,data:e,desiredSize:h.desiredSize},n),u.promise},pull:h=>{const u=Promise.withResolvers();return this.streamControllers[r].pullCall=u,c.postMessage({sourceName:o,targetName:l,stream:We.PULL,streamId:r,desiredSize:h.desiredSize}),u.promise},cancel:h=>{Ke(h instanceof Error,"cancel must have a valid reason");const u=Promise.withResolvers();return this.streamControllers[r].cancelCall=u,this.streamControllers[r].isClosed=!0,c.postMessage({sourceName:o,targetName:l,stream:We.CANCEL,streamId:r,reason:Qs(h)}),u.promise}},s)}destroy(){var t;(t=a(this,Mc))==null||t.abort(),b(this,Mc,null)}}Mc=new WeakMap,qi=new WeakSet,nE=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){A(this,qi,oE).call(this,t);return}if(t.callback){const s=t.callbackId,n=this.callbackCapabilities[s];if(!n)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],t.callback===Nf.DATA)n.resolve(t.data);else if(t.callback===Nf.ERROR)n.reject(Qs(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const s=this.sourceName,n=t.sourceName,r=this.comObj;Promise.try(e,t.data).then(function(o){r.postMessage({sourceName:s,targetName:n,callback:Nf.DATA,callbackId:t.callbackId,data:o})},function(o){r.postMessage({sourceName:s,targetName:n,callback:Nf.ERROR,callbackId:t.callbackId,reason:Qs(o)})});return}if(t.streamId){A(this,qi,rE).call(this,t);return}e(t.data)},rE=function(t){const e=t.streamId,s=this.sourceName,n=t.sourceName,r=this.comObj,o=this,l=this.actionHandler[t.action],c={enqueue(h,u=1,f){if(this.isCancelled)return;const p=this.desiredSize;this.desiredSize-=u,p>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:s,targetName:n,stream:We.ENQUEUE,streamId:e,chunk:h},f)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:n,stream:We.CLOSE,streamId:e}),delete o.streamSinks[e])},error(h){Ke(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:n,stream:We.ERROR,streamId:e,reason:Qs(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[e]=c,Promise.try(l,t.data,c).then(function(){r.postMessage({sourceName:s,targetName:n,stream:We.START_COMPLETE,streamId:e,success:!0})},function(h){r.postMessage({sourceName:s,targetName:n,stream:We.START_COMPLETE,streamId:e,reason:Qs(h)})})},oE=function(t){const e=t.streamId,s=this.sourceName,n=t.sourceName,r=this.comObj,o=this.streamControllers[e],l=this.streamSinks[e];switch(t.stream){case We.START_COMPLETE:t.success?o.startCall.resolve():o.startCall.reject(Qs(t.reason));break;case We.PULL_COMPLETE:t.success?o.pullCall.resolve():o.pullCall.reject(Qs(t.reason));break;case We.PULL:if(!l){r.postMessage({sourceName:s,targetName:n,stream:We.PULL_COMPLETE,streamId:e,success:!0});break}l.desiredSize<=0&&t.desiredSize>0&&l.sinkCapability.resolve(),l.desiredSize=t.desiredSize,Promise.try(l.onPull||xw).then(function(){r.postMessage({sourceName:s,targetName:n,stream:We.PULL_COMPLETE,streamId:e,success:!0})},function(h){r.postMessage({sourceName:s,targetName:n,stream:We.PULL_COMPLETE,streamId:e,reason:Qs(h)})});break;case We.ENQUEUE:if(Ke(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case We.CLOSE:if(Ke(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),A(this,qi,ip).call(this,o,e);break;case We.ERROR:Ke(o,"error should have stream controller"),o.controller.error(Qs(t.reason)),A(this,qi,ip).call(this,o,e);break;case We.CANCEL_COMPLETE:t.success?o.cancelCall.resolve():o.cancelCall.reject(Qs(t.reason)),A(this,qi,ip).call(this,o,e);break;case We.CANCEL:if(!l)break;const c=Qs(t.reason);Promise.try(l.onCancel||xw,c).then(function(){r.postMessage({sourceName:s,targetName:n,stream:We.CANCEL_COMPLETE,streamId:e,success:!0})},function(h){r.postMessage({sourceName:s,targetName:n,stream:We.CANCEL_COMPLETE,streamId:e,reason:Qs(h)})}),l.sinkCapability.reject(c),l.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},ip=async function(t,e){var s,n,r;await Promise.allSettled([(s=t.startCall)==null?void 0:s.promise,(n=t.pullCall)==null?void 0:n.promise,(r=t.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[e]};var Qu;class aE{constructor({enableHWA:t=!1}){w(this,Qu,!1);b(this,Qu,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(t,e);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!a(this,Qu)})}}reset(t,e,s){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){ge("Abstract method `_createCanvas` called.")}}Qu=new WeakMap;class ZR extends aE{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const s=this._document.createElement("canvas");return s.width=t,s.height=e,s}}class lE{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){ge("Abstract method `_fetch` called.")}}class Cw extends lE{async _fetch(t){const e=await of(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):rf(e)}}class cE{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,s,n,r){return"none"}destroy(t=!1){}}var ja,Lc,vr,_r,Ts,Va,Ua,ht,xs,Gh,sc,np,ic,hE,pb,nc,Xh,Kh,gb,Yh;class tk extends cE{constructor({docId:e,ownerDocument:s=globalThis.document}){super();w(this,ht);w(this,ja);w(this,Lc);w(this,vr);w(this,_r);w(this,Ts);w(this,Va);w(this,Ua,0);b(this,_r,e),b(this,Ts,s)}addFilter(e){if(!e)return"none";let s=a(this,ht,xs).get(e);if(s)return s;const[n,r,o]=A(this,ht,np).call(this,e),l=e.length===1?n:`${n}${r}${o}`;if(s=a(this,ht,xs).get(l),s)return a(this,ht,xs).set(e,s),s;const c=`g_${a(this,_r)}_transfer_map_${Bs(this,Ua)._++}`,h=A(this,ht,ic).call(this,c);a(this,ht,xs).set(e,h),a(this,ht,xs).set(l,h);const u=A(this,ht,nc).call(this,c);return A(this,ht,Kh).call(this,n,r,o,u),h}addHCMFilter(e,s){var _;const n=`${e}-${s}`,r="base";let o=a(this,ht,Gh).get(r);if((o==null?void 0:o.key)===n||(o?((_=o.filter)==null||_.remove(),o.key=n,o.url="none",o.filter=null):(o={key:n,url:"none",filter:null},a(this,ht,Gh).set(r,o)),!e||!s))return o.url;const l=A(this,ht,Yh).call(this,e);e=At.makeHexColor(...l);const c=A(this,ht,Yh).call(this,s);if(s=At.makeHexColor(...c),a(this,ht,sc).style.color="",e==="#000000"&&s==="#ffffff"||e===s)return o.url;const h=new Array(256);for(let v=0;v<=255;v++){const E=v/255;h[v]=E<=.03928?E/12.92:((E+.055)/1.055)**2.4}const u=h.join(","),f=`g_${a(this,_r)}_hcm_filter`,p=o.filter=A(this,ht,nc).call(this,f);A(this,ht,Kh).call(this,u,u,u,p),A(this,ht,pb).call(this,p);const g=(v,E)=>{const S=l[v]/255,C=c[v]/255,T=new Array(E+1);for(let R=0;R<=E;R++)T[R]=S+R/E*(C-S);return T.join(",")};return A(this,ht,Kh).call(this,g(0,5),g(1,5),g(2,5),p),o.url=A(this,ht,ic).call(this,f),o.url}addAlphaFilter(e){let s=a(this,ht,xs).get(e);if(s)return s;const[n]=A(this,ht,np).call(this,[e]),r=`alpha_${n}`;if(s=a(this,ht,xs).get(r),s)return a(this,ht,xs).set(e,s),s;const o=`g_${a(this,_r)}_alpha_map_${Bs(this,Ua)._++}`,l=A(this,ht,ic).call(this,o);a(this,ht,xs).set(e,l),a(this,ht,xs).set(r,l);const c=A(this,ht,nc).call(this,o);return A(this,ht,gb).call(this,n,c),l}addLuminosityFilter(e){let s=a(this,ht,xs).get(e||"luminosity");if(s)return s;let n,r;if(e?([n]=A(this,ht,np).call(this,[e]),r=`luminosity_${n}`):r="luminosity",s=a(this,ht,xs).get(r),s)return a(this,ht,xs).set(e,s),s;const o=`g_${a(this,_r)}_luminosity_map_${Bs(this,Ua)._++}`,l=A(this,ht,ic).call(this,o);a(this,ht,xs).set(e,l),a(this,ht,xs).set(r,l);const c=A(this,ht,nc).call(this,o);return A(this,ht,hE).call(this,c),e&&A(this,ht,gb).call(this,n,c),l}addHighlightHCMFilter(e,s,n,r,o){var C;const l=`${s}-${n}-${r}-${o}`;let c=a(this,ht,Gh).get(e);if((c==null?void 0:c.key)===l||(c?((C=c.filter)==null||C.remove(),c.key=l,c.url="none",c.filter=null):(c={key:l,url:"none",filter:null},a(this,ht,Gh).set(e,c)),!s||!n))return c.url;const[h,u]=[s,n].map(A(this,ht,Yh).bind(this));let f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),p=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[g,_]=[r,o].map(A(this,ht,Yh).bind(this));p<f&&([f,p,g,_]=[p,f,_,g]),a(this,ht,sc).style.color="";const v=(T,R,I)=>{const F=new Array(256),N=(p-f)/I,H=T/255,U=(R-T)/(255*I);let Q=0;for(let tt=0;tt<=I;tt++){const Et=Math.round(f+tt*N),wt=H+tt*U;for(let Rt=Q;Rt<=Et;Rt++)F[Rt]=wt;Q=Et+1}for(let tt=Q;tt<256;tt++)F[tt]=F[Q-1];return F.join(",")},E=`g_${a(this,_r)}_hcm_${e}_filter`,S=c.filter=A(this,ht,nc).call(this,E);return A(this,ht,pb).call(this,S),A(this,ht,Kh).call(this,v(g[0],_[0],5),v(g[1],_[1],5),v(g[2],_[2],5),S),c.url=A(this,ht,ic).call(this,E),c.url}destroy(e=!1){var s,n,r,o;e&&((s=a(this,Va))!=null&&s.size)||((n=a(this,vr))==null||n.parentNode.parentNode.remove(),b(this,vr,null),(r=a(this,Lc))==null||r.clear(),b(this,Lc,null),(o=a(this,Va))==null||o.clear(),b(this,Va,null),b(this,Ua,0))}}ja=new WeakMap,Lc=new WeakMap,vr=new WeakMap,_r=new WeakMap,Ts=new WeakMap,Va=new WeakMap,Ua=new WeakMap,ht=new WeakSet,xs=function(){return a(this,Lc)||b(this,Lc,new Map)},Gh=function(){return a(this,Va)||b(this,Va,new Map)},sc=function(){if(!a(this,vr)){const e=a(this,Ts).createElement("div"),{style:s}=e;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const n=a(this,Ts).createElementNS(sr,"svg");n.setAttribute("width",0),n.setAttribute("height",0),b(this,vr,a(this,Ts).createElementNS(sr,"defs")),e.append(n),n.append(a(this,vr)),a(this,Ts).body.append(e)}return a(this,vr)},np=function(e){if(e.length===1){const h=e[0],u=new Array(256);for(let p=0;p<256;p++)u[p]=h[p]/255;const f=u.join(",");return[f,f,f]}const[s,n,r]=e,o=new Array(256),l=new Array(256),c=new Array(256);for(let h=0;h<256;h++)o[h]=s[h]/255,l[h]=n[h]/255,c[h]=r[h]/255;return[o.join(","),l.join(","),c.join(",")]},ic=function(e){if(a(this,ja)===void 0){b(this,ja,"");const s=a(this,Ts).URL;s!==a(this,Ts).baseURI&&(Pg(s)?Ot('#createUrl: ignore "data:"-URL for performance reasons.'):b(this,ja,y0(s,"")))}return`url(${a(this,ja)}#${e})`},hE=function(e){const s=a(this,Ts).createElementNS(sr,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(s)},pb=function(e){const s=a(this,Ts).createElementNS(sr,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(s)},nc=function(e){const s=a(this,Ts).createElementNS(sr,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",e),a(this,ht,sc).append(s),s},Xh=function(e,s,n){const r=a(this,Ts).createElementNS(sr,s);r.setAttribute("type","discrete"),r.setAttribute("tableValues",n),e.append(r)},Kh=function(e,s,n,r){const o=a(this,Ts).createElementNS(sr,"feComponentTransfer");r.append(o),A(this,ht,Xh).call(this,o,"feFuncR",e),A(this,ht,Xh).call(this,o,"feFuncG",s),A(this,ht,Xh).call(this,o,"feFuncB",n)},gb=function(e,s){const n=a(this,Ts).createElementNS(sr,"feComponentTransfer");s.append(n),A(this,ht,Xh).call(this,n,"feFuncA",e)},Yh=function(e){return a(this,ht,sc).style.color=e,Ov(getComputedStyle(a(this,ht,sc)).getPropertyValue("color"))};class uE{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(s=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){ge("Abstract method `_fetch` called.")}}class Tw extends uE{async _fetch(t){const e=await of(t,"arraybuffer");return new Uint8Array(e)}}class dE{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(s=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){ge("Abstract method `_fetch` called.")}}class Pw extends dE{async _fetch(t){const e=await of(t,"arraybuffer");return new Uint8Array(e)}}Ws&&Ot("Please use the `legacy` build in Node.js environments.");async function Fv(i){const e=await process.getBuiltinModule("fs").promises.readFile(i);return new Uint8Array(e)}class ek extends cE{}class sk extends aE{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class ik extends lE{async _fetch(t){return Fv(t)}}class nk extends uE{async _fetch(t){return Fv(t)}}class rk extends dE{async _fetch(t){return Fv(t)}}const vs={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function mb(i,t){if(!t)return;const e=t[2]-t[0],s=t[3]-t[1],n=new Path2D;n.rect(t[0],t[1],e,s),i.clip(n)}class $v{isModifyingCurrentTransform(){return!1}getPattern(){ge("Abstract method `getPattern` called.")}}class ok extends $v{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)e.addColorStop(s[0],s[1]);return e}getPattern(t,e,s,n){let r;if(n===vs.STROKE||n===vs.FILL){const o=e.current.getClippedPathBoundingBox(n,Le(t))||[0,0,0,0],l=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,h=e.cachedCanvases.getCanvas("pattern",l,c),u=h.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-o[0],-o[1]),s=At.transform(s,[1,0,0,1,o[0],o[1]]),u.transform(...e.baseTransform),this.matrix&&u.transform(...this.matrix),mb(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),r=t.createPattern(h.canvas,"no-repeat");const f=new DOMMatrix(s);r.setTransform(f)}else mb(t,this._bbox),r=this._createGradient(t);return r}}function Tm(i,t,e,s,n,r,o,l){const c=t.coords,h=t.colors,u=i.data,f=i.width*4;let p;c[e+1]>c[s+1]&&(p=e,e=s,s=p,p=r,r=o,o=p),c[s+1]>c[n+1]&&(p=s,s=n,n=p,p=o,o=l,l=p),c[e+1]>c[s+1]&&(p=e,e=s,s=p,p=r,r=o,o=p);const g=(c[e]+t.offsetX)*t.scaleX,_=(c[e+1]+t.offsetY)*t.scaleY,v=(c[s]+t.offsetX)*t.scaleX,E=(c[s+1]+t.offsetY)*t.scaleY,S=(c[n]+t.offsetX)*t.scaleX,C=(c[n+1]+t.offsetY)*t.scaleY;if(_>=C)return;const T=h[r],R=h[r+1],I=h[r+2],F=h[o],N=h[o+1],H=h[o+2],U=h[l],Q=h[l+1],tt=h[l+2],Et=Math.round(_),wt=Math.round(C);let Rt,oe,J,X,et,Y,L,bt;for(let Ct=Et;Ct<=wt;Ct++){if(Ct<E){const B=Ct<_?0:(_-Ct)/(_-E);Rt=g-(g-v)*B,oe=T-(T-F)*B,J=R-(R-N)*B,X=I-(I-H)*B}else{let B;Ct>C?B=1:E===C?B=0:B=(E-Ct)/(E-C),Rt=v-(v-S)*B,oe=F-(F-U)*B,J=N-(N-Q)*B,X=H-(H-tt)*B}let Wt;Ct<_?Wt=0:Ct>C?Wt=1:Wt=(_-Ct)/(_-C),et=g-(g-S)*Wt,Y=T-(T-U)*Wt,L=R-(R-Q)*Wt,bt=I-(I-tt)*Wt;const xe=Math.round(Math.min(Rt,et)),Be=Math.round(Math.max(Rt,et));let Xt=f*Ct+xe*4;for(let B=xe;B<=Be;B++)Wt=(Rt-B)/(Rt-et),Wt<0?Wt=0:Wt>1&&(Wt=1),u[Xt++]=oe-(oe-Y)*Wt|0,u[Xt++]=J-(J-L)*Wt|0,u[Xt++]=X-(X-bt)*Wt|0,u[Xt++]=255}}function ak(i,t,e){const s=t.coords,n=t.colors;let r,o;switch(t.type){case"lattice":const l=t.verticesPerRow,c=Math.floor(s.length/l)-1,h=l-1;for(r=0;r<c;r++){let u=r*l;for(let f=0;f<h;f++,u++)Tm(i,e,s[u],s[u+1],s[u+l],n[u],n[u+1],n[u+l]),Tm(i,e,s[u+l+1],s[u+1],s[u+l],n[u+l+1],n[u+1],n[u+l])}break;case"triangles":for(r=0,o=s.length;r<o;r+=3)Tm(i,e,s[r],s[r+1],s[r+2],n[r],n[r+1],n[r+2]);break;default:throw new Error("illegal figure")}}class lk extends $v{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,s){const l=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-l,u=Math.ceil(this._bounds[3])-c,f=Math.min(Math.ceil(Math.abs(h*t[0]*1.1)),3e3),p=Math.min(Math.ceil(Math.abs(u*t[1]*1.1)),3e3),g=h/f,_=u/p,v={coords:this._coords,colors:this._colors,offsetX:-l,offsetY:-c,scaleX:1/g,scaleY:1/_},E=f+2*2,S=p+2*2,C=s.getCanvas("mesh",E,S),T=C.context,R=T.createImageData(f,p);if(e){const F=R.data;for(let N=0,H=F.length;N<H;N+=4)F[N]=e[0],F[N+1]=e[1],F[N+2]=e[2],F[N+3]=255}for(const F of this._figures)ak(R,F,v);return T.putImageData(R,2,2),{canvas:C.canvas,offsetX:l-2*g,offsetY:c-2*_,scaleX:g,scaleY:_}}isModifyingCurrentTransform(){return!0}getPattern(t,e,s,n){mb(t,this._bbox);const r=new Float32Array(2);if(n===vs.SHADING)At.singularValueDecompose2dScale(Le(t),r);else if(this.matrix){At.singularValueDecompose2dScale(this.matrix,r);const[l,c]=r;At.singularValueDecompose2dScale(e.baseTransform,r),r[0]*=l,r[1]*=c}else At.singularValueDecompose2dScale(e.baseTransform,r);const o=this._createMeshCanvas(r,n===vs.SHADING?null:this._background,e.cachedCanvases);return n!==vs.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(o.offsetX,o.offsetY),t.scale(o.scaleX,o.scaleY),t.createPattern(o.canvas,"no-repeat")}}class ck extends $v{getPattern(){return"hotpink"}}function hk(i){switch(i[0]){case"RadialAxial":return new ok(i);case"Mesh":return new lk(i);case"Dummy":return new ck}throw new Error(`Unknown IR type: ${i[0]}`)}const Rw={COLORED:1,UNCOLORED:2},Zp=class Zp{constructor(t,e,s,n){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=s,this.baseTransform=n}createPatternCanvas(t){const{bbox:e,operatorList:s,paintType:n,tilingType:r,color:o,canvasGraphicsFactory:l}=this;let{xstep:c,ystep:h}=this;c=Math.abs(c),h=Math.abs(h),Tg("TilingType: "+r);const u=e[0],f=e[1],p=e[2],g=e[3],_=p-u,v=g-f,E=new Float32Array(2);At.singularValueDecompose2dScale(this.matrix,E);const[S,C]=E;At.singularValueDecompose2dScale(this.baseTransform,E);const T=S*E[0],R=C*E[1];let I=_,F=v,N=!1,H=!1;const U=Math.ceil(c*T),Q=Math.ceil(h*R),tt=Math.ceil(_*T),Et=Math.ceil(v*R);U>=tt?I=c:N=!0,Q>=Et?F=h:H=!0;const wt=this.getSizeAndScale(I,this.ctx.canvas.width,T),Rt=this.getSizeAndScale(F,this.ctx.canvas.height,R),oe=t.cachedCanvases.getCanvas("pattern",wt.size,Rt.size),J=oe.context,X=l.createCanvasGraphics(J);if(X.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(X,n,o),J.translate(-wt.scale*u,-Rt.scale*f),X.transform(wt.scale,0,0,Rt.scale,0,0),J.save(),this.clipBbox(X,u,f,p,g),X.baseTransform=Le(X.ctx),X.executeOperatorList(s),X.endDrawing(),J.restore(),N||H){const et=oe.canvas;N&&(I=c),H&&(F=h);const Y=this.getSizeAndScale(I,this.ctx.canvas.width,T),L=this.getSizeAndScale(F,this.ctx.canvas.height,R),bt=Y.size,Ct=L.size,Wt=t.cachedCanvases.getCanvas("pattern-workaround",bt,Ct),xe=Wt.context,Be=N?Math.floor(_/c):0,Xt=H?Math.floor(v/h):0;for(let B=0;B<=Be;B++)for(let V=0;V<=Xt;V++)xe.drawImage(et,bt*B,Ct*V,bt,Ct,0,0,bt,Ct);return{canvas:Wt.canvas,scaleX:Y.scale,scaleY:L.scale,offsetX:u,offsetY:f}}return{canvas:oe.canvas,scaleX:wt.scale,scaleY:Rt.scale,offsetX:u,offsetY:f}}getSizeAndScale(t,e,s){const n=Math.max(Zp.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*s);return r>=n?r=n:s=r/t,{scale:s,size:r}}clipBbox(t,e,s,n,r){const o=n-e,l=r-s;t.ctx.rect(e,s,o,l),At.axialAlignedBoundingBox([e,s,n,r],Le(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,s){const n=t.ctx,r=t.current;switch(e){case Rw.COLORED:const{fillStyle:o,strokeStyle:l}=this.ctx;n.fillStyle=r.fillColor=o,n.strokeStyle=r.strokeColor=l;break;case Rw.UNCOLORED:n.fillStyle=n.strokeStyle=s,r.fillColor=r.strokeColor=s;break;default:throw new RR(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,s,n){let r=s;n!==vs.SHADING&&(r=At.transform(r,e.baseTransform),this.matrix&&(r=At.transform(r,this.matrix)));const o=this.createPatternCanvas(e);let l=new DOMMatrix(r);l=l.translate(o.offsetX,o.offsetY),l=l.scale(1/o.scaleX,1/o.scaleY);const c=t.createPattern(o.canvas,"repeat");return c.setTransform(l),c}};Z(Zp,"MAX_PATTERN_SIZE",3e3);let bb=Zp;function uk({src:i,srcPos:t=0,dest:e,width:s,height:n,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const l=Es.isLittleEndian?4278190080:255,[c,h]=o?[r,l]:[l,r],u=s>>3,f=s&7,p=i.length;e=new Uint32Array(e.buffer);let g=0;for(let _=0;_<n;_++){for(const E=t+u;t<E;t++){const S=t<p?i[t]:255;e[g++]=S&128?h:c,e[g++]=S&64?h:c,e[g++]=S&32?h:c,e[g++]=S&16?h:c,e[g++]=S&8?h:c,e[g++]=S&4?h:c,e[g++]=S&2?h:c,e[g++]=S&1?h:c}if(f===0)continue;const v=t<p?i[t++]:255;for(let E=0;E<f;E++)e[g++]=v&1<<7-E?h:c}return{srcPos:t,destPos:g}}const kw=16,Iw=100,dk=15,Mw=10,si=16,Pm=new DOMMatrix,Si=new Float32Array(2),lc=new Float32Array([1/0,1/0,-1/0,-1/0]);function fk(i,t){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){t.save(),this.__originalSave()},i.restore=function(){t.restore(),this.__originalRestore()},i.translate=function(e,s){t.translate(e,s),this.__originalTranslate(e,s)},i.scale=function(e,s){t.scale(e,s),this.__originalScale(e,s)},i.transform=function(e,s,n,r,o,l){t.transform(e,s,n,r,o,l),this.__originalTransform(e,s,n,r,o,l)},i.setTransform=function(e,s,n,r,o,l){t.setTransform(e,s,n,r,o,l),this.__originalSetTransform(e,s,n,r,o,l)},i.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},i.rotate=function(e){t.rotate(e),this.__originalRotate(e)},i.clip=function(e){t.clip(e),this.__originalClip(e)},i.moveTo=function(e,s){t.moveTo(e,s),this.__originalMoveTo(e,s)},i.lineTo=function(e,s){t.lineTo(e,s),this.__originalLineTo(e,s)},i.bezierCurveTo=function(e,s,n,r,o,l){t.bezierCurveTo(e,s,n,r,o,l),this.__originalBezierCurveTo(e,s,n,r,o,l)},i.rect=function(e,s,n,r){t.rect(e,s,n,r),this.__originalRect(e,s,n,r)},i.closePath=function(){t.closePath(),this.__originalClosePath()},i.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class pk{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,s){let n;return this.cache[t]!==void 0?(n=this.cache[t],this.canvasFactory.reset(n,e,s)):(n=this.canvasFactory.create(e,s),this.cache[t]=n),n}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Ff(i,t,e,s,n,r,o,l,c,h){const[u,f,p,g,_,v]=Le(i);if(f===0&&p===0){const C=o*u+_,T=Math.round(C),R=l*g+v,I=Math.round(R),F=(o+c)*u+_,N=Math.abs(Math.round(F)-T)||1,H=(l+h)*g+v,U=Math.abs(Math.round(H)-I)||1;return i.setTransform(Math.sign(u),0,0,Math.sign(g),T,I),i.drawImage(t,e,s,n,r,0,0,N,U),i.setTransform(u,f,p,g,_,v),[N,U]}if(u===0&&g===0){const C=l*p+_,T=Math.round(C),R=o*f+v,I=Math.round(R),F=(l+h)*p+_,N=Math.abs(Math.round(F)-T)||1,H=(o+c)*f+v,U=Math.abs(Math.round(H)-I)||1;return i.setTransform(0,Math.sign(f),Math.sign(p),0,T,I),i.drawImage(t,e,s,n,r,0,0,U,N),i.setTransform(u,f,p,g,_,v),[U,N]}i.drawImage(t,e,s,n,r,o,l,c,h);const E=Math.hypot(u,f),S=Math.hypot(p,g);return[E*c,S*h]}class Lw{constructor(t,e){Z(this,"alphaIsShape",!1);Z(this,"fontSize",0);Z(this,"fontSizeScale",1);Z(this,"textMatrix",null);Z(this,"textMatrixScale",1);Z(this,"fontMatrix",Wm);Z(this,"leading",0);Z(this,"x",0);Z(this,"y",0);Z(this,"lineX",0);Z(this,"lineY",0);Z(this,"charSpacing",0);Z(this,"wordSpacing",0);Z(this,"textHScale",1);Z(this,"textRenderingMode",Ss.FILL);Z(this,"textRise",0);Z(this,"fillColor","#000000");Z(this,"strokeColor","#000000");Z(this,"patternFill",!1);Z(this,"patternStroke",!1);Z(this,"fillAlpha",1);Z(this,"strokeAlpha",1);Z(this,"lineWidth",1);Z(this,"activeSMask",null);Z(this,"transferMaps","none");this.clipBox=new Float32Array([0,0,t,e]),this.minMax=lc.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=vs.FILL,e=null){const s=this.minMax.slice();if(t===vs.STROKE){e||ge("Stroke bounding box must include transform."),At.singularValueDecompose2dScale(e,Si);const n=Si[0]*this.lineWidth/2,r=Si[1]*this.lineWidth/2;s[0]-=n,s[1]-=r,s[2]+=n,s[3]+=r}return s}updateClipFromPath(){const t=At.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(lc,0)}getClippedPathBoundingBox(t=vs.FILL,e=null){return At.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function Dw(i,t){if(t instanceof ImageData){i.putImageData(t,0,0);return}const e=t.height,s=t.width,n=e%si,r=(e-n)/si,o=n===0?r:r+1,l=i.createImageData(s,si);let c=0,h;const u=t.data,f=l.data;let p,g,_,v;if(t.kind===Xf.GRAYSCALE_1BPP){const E=u.byteLength,S=new Uint32Array(f.buffer,0,f.byteLength>>2),C=S.length,T=s+7>>3,R=4294967295,I=Es.isLittleEndian?4278190080:255;for(p=0;p<o;p++){for(_=p<r?si:n,h=0,g=0;g<_;g++){const F=E-c;let N=0;const H=F>T?s:F*8-7,U=H&-8;let Q=0,tt=0;for(;N<U;N+=8)tt=u[c++],S[h++]=tt&128?R:I,S[h++]=tt&64?R:I,S[h++]=tt&32?R:I,S[h++]=tt&16?R:I,S[h++]=tt&8?R:I,S[h++]=tt&4?R:I,S[h++]=tt&2?R:I,S[h++]=tt&1?R:I;for(;N<H;N++)Q===0&&(tt=u[c++],Q=128),S[h++]=tt&Q?R:I,Q>>=1}for(;h<C;)S[h++]=0;i.putImageData(l,0,p*si)}}else if(t.kind===Xf.RGBA_32BPP){for(g=0,v=s*si*4,p=0;p<r;p++)f.set(u.subarray(c,c+v)),c+=v,i.putImageData(l,0,g),g+=si;p<o&&(v=s*n*4,f.set(u.subarray(c,c+v)),i.putImageData(l,0,g))}else if(t.kind===Xf.RGB_24BPP)for(_=si,v=s*_,p=0;p<o;p++){for(p>=r&&(_=n,v=s*_),h=0,g=v;g--;)f[h++]=u[c++],f[h++]=u[c++],f[h++]=u[c++],f[h++]=255;i.putImageData(l,0,p*si)}else throw new Error(`bad image kind: ${t.kind}`)}function Ow(i,t){if(t.bitmap){i.drawImage(t.bitmap,0,0);return}const e=t.height,s=t.width,n=e%si,r=(e-n)/si,o=n===0?r:r+1,l=i.createImageData(s,si);let c=0;const h=t.data,u=l.data;for(let f=0;f<o;f++){const p=f<r?si:n;({srcPos:c}=uk({src:h,srcPos:c,dest:u,width:s,height:p,nonBlackColor:0})),i.putImageData(l,0,f*si)}}function Nh(i,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of e)i[s]!==void 0&&(t[s]=i[s]);i.setLineDash!==void 0&&(t.setLineDash(i.getLineDash()),t.lineDashOffset=i.lineDashOffset)}function $f(i){i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0);const{filter:t}=i;t!=="none"&&t!==""&&(i.filter="none")}function Nw(i,t){if(t)return!0;At.singularValueDecompose2dScale(i,Si);const e=Math.fround(Xn.pixelRatio*Xo.PDF_TO_CSS_UNITS);return Si[0]<=e&&Si[1]<=e}const gk=["butt","round","square"],mk=["miter","round","bevel"],bk={},Fw={};var mn,vb,_b,yb;const qv=class qv{constructor(t,e,s,n,r,{optionalContentConfig:o,markedContentStack:l=null},c,h){w(this,mn);this.ctx=t,this.current=new Lw(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=s,this.canvasFactory=n,this.filterFactory=r,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=l||[],this.optionalContentConfig=o,this.cachedCanvases=new pk(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:s=!1,background:n=null}){const r=this.ctx.canvas.width,o=this.ctx.canvas.height,l=this.ctx.fillStyle;if(this.ctx.fillStyle=n||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=l,s){const c=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...Le(this.compositeCtx))}this.ctx.save(),$f(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=Le(this.ctx)}executeOperatorList(t,e,s,n){const r=t.argsArray,o=t.fnArray;let l=e||0;const c=r.length;if(c===l)return l;const h=c-l>Mw&&typeof s=="function",u=h?Date.now()+dk:0;let f=0;const p=this.commonObjs,g=this.objs;let _;for(;;){if(n!==void 0&&l===n.nextBreakPoint)return n.breakIt(l,s),l;if(_=o[l],_!==Np.dependency)this[_].apply(this,r[l]);else for(const v of r[l]){const E=v.startsWith("g_")?p:g;if(!E.has(v))return E.get(v,s),l}if(l++,l===c)return l;if(h&&++f>Mw){if(Date.now()>u)return s(),l;f=0}}}endDrawing(){A(this,mn,vb).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),A(this,mn,_b).call(this)}_scaleImage(t,e){const s=t.width??t.displayWidth,n=t.height??t.displayHeight;let r=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),l=s,c=n,h="prescale1",u,f;for(;r>2&&l>1||o>2&&c>1;){let p=l,g=c;r>2&&l>1&&(p=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l/2),r/=l/p),o>2&&c>1&&(g=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/g),u=this.cachedCanvases.getCanvas(h,p,g),f=u.context,f.clearRect(0,0,p,g),f.drawImage(t,0,0,l,c,0,0,p,g),t=u.canvas,l=p,c=g,h=h==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:l,paintHeight:c}}_createMaskCanvas(t){const e=this.ctx,{width:s,height:n}=t,r=this.current.fillColor,o=this.current.patternFill,l=Le(e);let c,h,u,f;if((t.bitmap||t.data)&&t.count>1){const U=t.bitmap||t.data.buffer;h=JSON.stringify(o?l:[l.slice(0,4),r]),c=this._cachedBitmapsMap.get(U),c||(c=new Map,this._cachedBitmapsMap.set(U,c));const Q=c.get(h);if(Q&&!o){const tt=Math.round(Math.min(l[0],l[2])+l[4]),Et=Math.round(Math.min(l[1],l[3])+l[5]);return{canvas:Q,offsetX:tt,offsetY:Et}}u=Q}u||(f=this.cachedCanvases.getCanvas("maskCanvas",s,n),Ow(f.context,t));let p=At.transform(l,[1/s,0,0,-1/n,0,0]);p=At.transform(p,[1,0,0,1,0,-n]);const g=lc.slice();At.axialAlignedBoundingBox([0,0,s,n],p,g);const[_,v,E,S]=g,C=Math.round(E-_)||1,T=Math.round(S-v)||1,R=this.cachedCanvases.getCanvas("fillCanvas",C,T),I=R.context,F=_,N=v;I.translate(-F,-N),I.transform(...p),u||(u=this._scaleImage(f.canvas,An(I)),u=u.img,c&&o&&c.set(h,u)),I.imageSmoothingEnabled=Nw(Le(I),t.interpolate),Ff(I,u,0,0,u.width,u.height,0,0,s,n),I.globalCompositeOperation="source-in";const H=At.transform(An(I),[1,0,0,1,-F,-N]);return I.fillStyle=o?r.getPattern(e,this,H,vs.FILL):r,I.fillRect(0,0,s,n),c&&!o&&(this.cachedCanvases.delete("fillCanvas"),c.set(h,R.canvas)),{canvas:R.canvas,offsetX:Math.round(F),offsetY:Math.round(N)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=gk[t]}setLineJoin(t){this.ctx.lineJoin=mk[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(t),s.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,s]of t)switch(e){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,n=this.cachedCanvases.getCanvas(s,t,e);this.suspendedCtx=this.ctx;const r=this.ctx=n.context;r.setTransform(this.suspendedCtx.getTransform()),Nh(this.suspendedCtx,r),fk(r,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Nh(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,s,n){const r=n[0],o=n[1],l=n[2]-r,c=n[3]-o;l===0||c===0||(this.genericComposeSMask(e.context,s,l,c,e.subtype,e.backdrop,e.transferMap,r,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(s.canvas,0,0),t.restore())}genericComposeSMask(t,e,s,n,r,o,l,c,h,u,f){let p=t.canvas,g=c-u,_=h-f;if(o)if(g<0||_<0||g+s>p.width||_+n>p.height){const E=this.cachedCanvases.getCanvas("maskExtension",s,n),S=E.context;S.drawImage(p,-g,-_),S.globalCompositeOperation="destination-atop",S.fillStyle=o,S.fillRect(0,0,s,n),S.globalCompositeOperation="source-over",p=E.canvas,g=_=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const E=new Path2D;E.rect(g,_,s,n),t.clip(E),t.globalCompositeOperation="destination-atop",t.fillStyle=o,t.fillRect(g,_,s,n),t.restore()}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&l?e.filter=this.filterFactory.addAlphaFilter(l):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(l));const v=new Path2D;v.rect(c,h,s,n),e.clip(v),e.globalCompositeOperation="destination-in",e.drawImage(p,g,_,s,n,c,h,s,n),e.restore()}save(){this.inSMaskMode&&Nh(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Nh(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,s,n,r,o){this.ctx.transform(t,e,s,n,r,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,s){let[n]=e;if(!s){n||(n=e[0]=new Path2D),this[t](n);return}if(!(n instanceof Path2D)){const r=e[0]=new Path2D;for(let o=0,l=n.length;o<l;)switch(n[o++]){case Df.moveTo:r.moveTo(n[o++],n[o++]);break;case Df.lineTo:r.lineTo(n[o++],n[o++]);break;case Df.curveTo:r.bezierCurveTo(n[o++],n[o++],n[o++],n[o++],n[o++],n[o++]);break;case Df.closePath:r.closePath();break;default:Ot(`Unrecognized drawing path operator: ${n[o-1]}`);break}n=r}At.axialAlignedBoundingBox(s,Le(this.ctx),this.current.minMax),this[t](n)}closePath(){this.ctx.closePath()}stroke(t,e=!0){const s=this.ctx,n=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof n=="object"&&(n!=null&&n.getPattern)){const r=n.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=n.getPattern(s,this,An(s),vs.STROKE),r){const o=new Path2D;o.addPath(t,s.getTransform().invertSelf().multiplySelf(r)),t=o}this.rescaleAndStroke(t,!1),s.restore()}else this.rescaleAndStroke(t,!0);e&&this.consumePath(t,this.current.getClippedPathBoundingBox(vs.STROKE,Le(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(t){this.stroke(t)}fill(t,e=!0){const s=this.ctx,n=this.current.fillColor,r=this.current.patternFill;let o=!1;if(r){const c=n.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.fillStyle=n.getPattern(s,this,An(s),vs.FILL),c){const h=new Path2D;h.addPath(t,s.getTransform().invertSelf().multiplySelf(c)),t=h}o=!0}const l=this.current.getClippedPathBoundingBox();this.contentVisible&&l!==null&&(this.pendingEOFill?(s.fill(t,"evenodd"),this.pendingEOFill=!1):s.fill(t)),o&&s.restore(),e&&this.consumePath(t,l)}eoFill(t){this.pendingEOFill=!0,this.fill(t)}fillStroke(t){this.fill(t,!1),this.stroke(t,!1),this.consumePath(t)}eoFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}closeFillStroke(t){this.fillStroke(t)}closeEOFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}endPath(t){this.consumePath(t)}rawFillPath(t){this.ctx.fill(t)}clip(){this.pendingClip=bk}eoClip(){this.pendingClip=Fw}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0)return;const s=new Path2D,n=e.getTransform().invertSelf();for(const{transform:r,x:o,y:l,fontSize:c,path:h}of t)s.addPath(h,new DOMMatrix(r).preMultiplySelf(n).translate(o,l).scale(c,-c));e.clip(s),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var u;const s=this.commonObjs.get(t),n=this.current;if(!s)throw new Error(`Can't find font for ${t}`);if(n.fontMatrix=s.fontMatrix||Wm,(n.fontMatrix[0]===0||n.fontMatrix[3]===0)&&Ot("Invalid font matrix for font "+t),e<0?(e=-e,n.fontDirection=-1):n.fontDirection=1,this.current.font=s,this.current.fontSize=e,s.isType3Font)return;const r=s.loadedName||"sans-serif",o=((u=s.systemFontInfo)==null?void 0:u.css)||`"${r}", ${s.fallbackName}`;let l="normal";s.black?l="900":s.bold&&(l="bold");const c=s.italic?"italic":"normal";let h=e;e<kw?h=kw:e>Iw&&(h=Iw),this.current.fontSizeScale=e/h,this.ctx.font=`${c} ${l} ${h}px ${o}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t){const{current:e}=this;e.textMatrix=t,e.textMatrixScale=Math.hypot(t[0],t[1]),e.x=e.lineX=0,e.y=e.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,s,n,r){const o=this.ctx,l=this.current,c=l.font,h=l.textRenderingMode,u=l.fontSize/l.fontSizeScale,f=h&Ss.FILL_STROKE_MASK,p=!!(h&Ss.ADD_TO_PATH_FLAG),g=l.patternFill&&!c.missingFile,_=l.patternStroke&&!c.missingFile;let v;if((c.disableFontFace||p||g||_)&&(v=c.getPathGenerator(this.commonObjs,t)),c.disableFontFace||g||_){o.save(),o.translate(e,s),o.scale(u,-u);let E;if((f===Ss.FILL||f===Ss.FILL_STROKE)&&(n?(E=o.getTransform(),o.setTransform(...n),o.fill(A(this,mn,yb).call(this,v,E,n))):o.fill(v)),f===Ss.STROKE||f===Ss.FILL_STROKE)if(r){E||(E=o.getTransform()),o.setTransform(...r);const{a:S,b:C,c:T,d:R}=E,I=At.inverseTransform(r),F=At.transform([S,C,T,R,0,0],I);At.singularValueDecompose2dScale(F,Si),o.lineWidth*=Math.max(Si[0],Si[1])/u,o.stroke(A(this,mn,yb).call(this,v,E,r))}else o.lineWidth/=u,o.stroke(v);o.restore()}else(f===Ss.FILL||f===Ss.FILL_STROKE)&&o.fillText(t,e,s),(f===Ss.STROKE||f===Ss.FILL_STROKE)&&o.strokeText(t,e,s);p&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:Le(o),x:e,y:s,fontSize:u,path:v})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let s=!1;for(let n=3;n<e.length;n+=4)if(e[n]>0&&e[n]<255){s=!0;break}return Gt(this,"isFontSubpixelAAEnabled",s)}showText(t){const e=this.current,s=e.font;if(s.isType3Font)return this.showType3Text(t);const n=e.fontSize;if(n===0)return;const r=this.ctx,o=e.fontSizeScale,l=e.charSpacing,c=e.wordSpacing,h=e.fontDirection,u=e.textHScale*h,f=t.length,p=s.vertical,g=p?1:-1,_=s.defaultVMetrics,v=n*e.fontMatrix[0],E=e.textRenderingMode===Ss.FILL&&!s.disableFontFace&&!e.patternFill;r.save(),e.textMatrix&&r.transform(...e.textMatrix),r.translate(e.x,e.y+e.textRise),h>0?r.scale(u,-1):r.scale(u,1);let S,C;if(e.patternFill){r.save();const N=e.fillColor.getPattern(r,this,An(r),vs.FILL);S=Le(r),r.restore(),r.fillStyle=N}if(e.patternStroke){r.save();const N=e.strokeColor.getPattern(r,this,An(r),vs.STROKE);C=Le(r),r.restore(),r.strokeStyle=N}let T=e.lineWidth;const R=e.textMatrixScale;if(R===0||T===0){const N=e.textRenderingMode&Ss.FILL_STROKE_MASK;(N===Ss.STROKE||N===Ss.FILL_STROKE)&&(T=this.getSinglePixelWidth())}else T/=R;if(o!==1&&(r.scale(o,o),T/=o),r.lineWidth=T,s.isInvalidPDFjsFont){const N=[];let H=0;for(const U of t)N.push(U.unicode),H+=U.width;r.fillText(N.join(""),0,0),e.x+=H*v*u,r.restore(),this.compose();return}let I=0,F;for(F=0;F<f;++F){const N=t[F];if(typeof N=="number"){I+=g*N*n/1e3;continue}let H=!1;const U=(N.isSpace?c:0)+l,Q=N.fontChar,tt=N.accent;let Et,wt,Rt=N.width;if(p){const J=N.vmetric||_,X=-(N.vmetric?J[1]:Rt*.5)*v,et=J[2]*v;Rt=J?-J[0]:Rt,Et=X/o,wt=(I+et)/o}else Et=I/o,wt=0;if(s.remeasure&&Rt>0){const J=r.measureText(Q).width*1e3/n*o;if(Rt<J&&this.isFontSubpixelAAEnabled){const X=Rt/J;H=!0,r.save(),r.scale(X,1),Et/=X}else Rt!==J&&(Et+=(Rt-J)/2e3*n/o)}if(this.contentVisible&&(N.isInFont||s.missingFile)){if(E&&!tt)r.fillText(Q,Et,wt);else if(this.paintChar(Q,Et,wt,S,C),tt){const J=Et+n*tt.offset.x/o,X=wt-n*tt.offset.y/o;this.paintChar(tt.fontChar,J,X,S,C)}}const oe=p?Rt*v-U*h:Rt*v+U*h;I+=oe,H&&r.restore()}p?e.y-=I:e.x+=I*u,r.restore(),this.compose()}showType3Text(t){const e=this.ctx,s=this.current,n=s.font,r=s.fontSize,o=s.fontDirection,l=n.vertical?1:-1,c=s.charSpacing,h=s.wordSpacing,u=s.textHScale*o,f=s.fontMatrix||Wm,p=t.length,g=s.textRenderingMode===Ss.INVISIBLE;let _,v,E,S;if(!(g||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),s.textMatrix&&e.transform(...s.textMatrix),e.translate(s.x,s.y+s.textRise),e.scale(u,o),_=0;_<p;++_){if(v=t[_],typeof v=="number"){S=l*v*r/1e3,this.ctx.translate(S,0),s.x+=S*u;continue}const C=(v.isSpace?h:0)+c,T=n.charProcOperatorList[v.operatorListId];T?this.contentVisible&&(this.save(),e.scale(r,r),e.transform(...f),this.executeOperatorList(T),this.restore()):Ot(`Type3 character "${v.operatorListId}" is not available.`);const R=[v.width,0];At.applyTransform(R,f),E=R[0]*r+C,e.translate(E,0),s.x+=E*u}e.restore()}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,s,n,r,o){const l=new Path2D;l.rect(s,n,r-s,o-n),this.ctx.clip(l),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const s=this.baseTransform||Le(this.ctx),n={createCanvasGraphics:r=>new qv(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new bb(t,this.ctx,n,s)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t){this.ctx.strokeStyle=this.current.strokeColor=t,this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t){this.ctx.fillStyle=this.current.fillColor=t,this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let s;return this.cachedPatterns.has(t)?s=this.cachedPatterns.get(t):(s=hk(this.getObject(t)),this.cachedPatterns.set(t,s)),e&&(s.matrix=e),s}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const s=this._getPattern(t);e.fillStyle=s.getPattern(e,this,An(e),vs.SHADING);const n=An(e);if(n){const{width:r,height:o}=e.canvas,l=lc.slice();At.axialAlignedBoundingBox([0,0,r,o],n,l);const[c,h,u,f]=l;this.ctx.fillRect(c,h,u-c,f-h)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){ge("Should not call beginInlineImage")}beginImageData(){ge("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=Le(this.ctx),e)){At.axialAlignedBoundingBox(e,this.baseTransform,this.current.minMax);const[s,n,r,o]=e,l=new Path2D;l.rect(s,n,r-s,o-n),this.ctx.clip(l),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||Tg("TODO: Support non-isolated groups."),t.knockout&&Ot("Knockout groups not supported.");const s=Le(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let n=lc.slice();At.axialAlignedBoundingBox(t.bbox,Le(e),n);const r=[0,0,e.canvas.width,e.canvas.height];n=At.intersect(n,r)||[0,0,0,0];const o=Math.floor(n[0]),l=Math.floor(n[1]),c=Math.max(Math.ceil(n[2])-o,1),h=Math.max(Math.ceil(n[3])-l,1);this.current.startNewPathAndClipBox([0,0,c,h]);let u="groupAt"+this.groupLevel;t.smask&&(u+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(u,c,h),p=f.context;p.translate(-o,-l),p.transform(...s);let g=new Path2D;const[_,v,E,S]=t.bbox;if(g.rect(_,v,E-_,S-v),t.matrix){const C=new Path2D;C.addPath(g,new DOMMatrix(t.matrix)),g=C}p.clip(g),t.smask?this.smaskStack.push({canvas:f.canvas,context:p,offsetX:o,offsetY:l,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(o,l),e.save()),Nh(e,p),this.ctx=p,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const n=Le(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...n);const r=lc.slice();At.axialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],n,r),this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(t,e,s,n,r){if(A(this,mn,vb).call(this),$f(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const o=e[2]-e[0],l=e[3]-e[1];if(r&&this.annotationCanvasMap){s=s.slice(),s[4]-=e[0],s[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=o,e[3]=l,At.singularValueDecompose2dScale(Le(this.ctx),Si);const{viewportScale:c}=this,h=Math.ceil(o*this.outputScaleX*c),u=Math.ceil(l*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(h,u);const{canvas:f,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(t,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=p,this.ctx.save(),this.ctx.setTransform(Si[0],0,0,-Si[1],0,l*Si[1]),$f(this.ctx)}else{$f(this.ctx),this.endPath();const c=new Path2D;c.rect(e[0],e[1],o,l),this.ctx.clip(c)}}this.current=new Lw(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...n)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),A(this,mn,_b).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const s=this.ctx,n=this._createMaskCanvas(t),r=n.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(r,n.offsetX,n.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,s=0,n=0,r,o){if(!this.contentVisible)return;t=this.getObject(t.data,t);const l=this.ctx;l.save();const c=Le(l);l.transform(e,s,n,r,0,0);const h=this._createMaskCanvas(t);l.setTransform(1,0,0,1,h.offsetX-c[4],h.offsetY-c[5]);for(let u=0,f=o.length;u<f;u+=2){const p=At.transform(c,[e,s,n,r,o[u],o[u+1]]);l.drawImage(h.canvas,p[4],p[5])}l.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,s=this.current.fillColor,n=this.current.patternFill;for(const r of t){const{data:o,width:l,height:c,transform:h}=r,u=this.cachedCanvases.getCanvas("maskCanvas",l,c),f=u.context;f.save();const p=this.getObject(o,r);Ow(f,p),f.globalCompositeOperation="source-in",f.fillStyle=n?s.getPattern(f,this,An(e),vs.FILL):s,f.fillRect(0,0,l,c),f.restore(),e.save(),e.transform(...h),e.scale(1,-1),Ff(e,u.canvas,0,0,l,c,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){Ot("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,s,n){if(!this.contentVisible)return;const r=this.getObject(t);if(!r){Ot("Dependent image isn't ready yet");return}const o=r.width,l=r.height,c=[];for(let h=0,u=n.length;h<u;h+=2)c.push({transform:[e,0,0,s,n[h],n[h+1]],x:0,y:0,w:o,h:l});this.paintInlineImageXObjectGroup(r,c)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:s,height:n}=t,r=this.cachedCanvases.getCanvas("inlineImage",s,n),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(e,0,0),o.filter="none",r.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,s=t.height,n=this.ctx;this.save();const{filter:r}=n;r!=="none"&&r!==""&&(n.filter="none"),n.scale(1/e,-1/s);let o;if(t.bitmap)o=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)o=t;else{const h=this.cachedCanvases.getCanvas("inlineImage",e,s).context;Dw(h,t),o=this.applyTransferMapsToCanvas(h)}const l=this._scaleImage(o,An(n));n.imageSmoothingEnabled=Nw(Le(n),t.interpolate),Ff(n,l.img,0,0,l.paintWidth,l.paintHeight,0,-s,e,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const s=this.ctx;let n;if(t.bitmap)n=t.bitmap;else{const r=t.width,o=t.height,c=this.cachedCanvases.getCanvas("inlineImage",r,o).context;Dw(c,t),n=this.applyTransferMapsToCanvas(c)}for(const r of e)s.save(),s.transform(...r.transform),s.scale(1,-1),Ff(s,n,r.x,r.y,r.w,r.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t,e){const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const n=this.ctx;this.pendingClip&&(s||(this.pendingClip===Fw?n.clip(t,"evenodd"):n.clip(t)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=Le(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),n=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,n)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:s,c:n,d:r}=this.ctx.getTransform();let o,l;if(s===0&&n===0){const c=Math.abs(e),h=Math.abs(r);if(c===h)if(t===0)o=l=1/c;else{const u=c*t;o=l=u<1?1/u:1}else if(t===0)o=1/c,l=1/h;else{const u=c*t,f=h*t;o=u<1?1/u:1,l=f<1?1/f:1}}else{const c=Math.abs(e*r-s*n),h=Math.hypot(e,s),u=Math.hypot(n,r);if(t===0)o=u/c,l=h/c;else{const f=t*c;o=u>f?u/f:1,l=h>f?h/f:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=l}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:s,current:{lineWidth:n}}=this,[r,o]=this.getScaleForStroking();if(r===o){s.lineWidth=(n||1)*r,s.stroke(t);return}const l=s.getLineDash();e&&s.save(),s.scale(r,o),Pm.a=1/r,Pm.d=1/o;const c=new Path2D;if(c.addPath(t,Pm),l.length>0){const h=Math.max(r,o);s.setLineDash(l.map(u=>u/h)),s.lineDashOffset/=h}s.lineWidth=n||1,s.stroke(c),e&&s.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};mn=new WeakSet,vb=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},_b=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},yb=function(t,e,s){const n=new Path2D;return n.addPath(t,new DOMMatrix(s).invertSelf().multiplySelf(e)),n};let gc=qv;for(const i in Np)gc.prototype[i]!==void 0&&(gc.prototype[Np[i]]=gc.prototype[i]);var Ju,Zu;class zn{static get workerPort(){return a(this,Ju)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");b(this,Ju,t)}static get workerSrc(){return a(this,Zu)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");b(this,Zu,t)}}Ju=new WeakMap,Zu=new WeakMap,w(zn,Ju,null),w(zn,Zu,"");var Dc,td;class vk{constructor({parsedData:t,rawData:e}){w(this,Dc);w(this,td);b(this,Dc,t),b(this,td,e)}getRaw(){return a(this,td)}get(t){return a(this,Dc).get(t)??null}[Symbol.iterator](){return a(this,Dc).entries()}}Dc=new WeakMap,td=new WeakMap;const rc=Symbol("INTERNAL");var ed,sd,id,Oc;class _k{constructor(t,{name:e,intent:s,usage:n,rbGroups:r}){w(this,ed,!1);w(this,sd,!1);w(this,id,!1);w(this,Oc,!0);b(this,ed,!!(t&Ei.DISPLAY)),b(this,sd,!!(t&Ei.PRINT)),this.name=e,this.intent=s,this.usage=n,this.rbGroups=r}get visible(){if(a(this,id))return a(this,Oc);if(!a(this,Oc))return!1;const{print:t,view:e}=this.usage;return a(this,ed)?(e==null?void 0:e.viewState)!=="OFF":a(this,sd)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,s=!1){t!==rc&&ge("Internal method `_setVisible` called."),b(this,id,s),b(this,Oc,e)}}ed=new WeakMap,sd=new WeakMap,id=new WeakMap,Oc=new WeakMap;var _o,fe,Nc,Fc,nd,wb;class yk{constructor(t,e=Ei.DISPLAY){w(this,nd);w(this,_o,null);w(this,fe,new Map);w(this,Nc,null);w(this,Fc,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,b(this,Fc,t.order);for(const s of t.groups)a(this,fe).set(s.id,new _k(e,s));if(t.baseState==="OFF")for(const s of a(this,fe).values())s._setVisible(rc,!1);for(const s of t.on)a(this,fe).get(s)._setVisible(rc,!0);for(const s of t.off)a(this,fe).get(s)._setVisible(rc,!1);b(this,Nc,this.getHash())}}isVisible(t){if(a(this,fe).size===0)return!0;if(!t)return Tg("Optional content group not defined."),!0;if(t.type==="OCG")return a(this,fe).has(t.id)?a(this,fe).get(t.id).visible:(Ot(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return A(this,nd,wb).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!a(this,fe).has(e))return Ot(`Optional content group not found: ${e}`),!0;if(a(this,fe).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!a(this,fe).has(e))return Ot(`Optional content group not found: ${e}`),!0;if(!a(this,fe).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!a(this,fe).has(e))return Ot(`Optional content group not found: ${e}`),!0;if(!a(this,fe).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!a(this,fe).has(e))return Ot(`Optional content group not found: ${e}`),!0;if(a(this,fe).get(e).visible)return!1}return!0}return Ot(`Unknown optional content policy ${t.policy}.`),!0}return Ot(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,s=!0){var r;const n=a(this,fe).get(t);if(!n){Ot(`Optional content group not found: ${t}`);return}if(s&&e&&n.rbGroups.length)for(const o of n.rbGroups)for(const l of o)l!==t&&((r=a(this,fe).get(l))==null||r._setVisible(rc,!1,!0));n._setVisible(rc,!!e,!0),b(this,_o,null)}setOCGState({state:t,preserveRB:e}){let s;for(const n of t){switch(n){case"ON":case"OFF":case"Toggle":s=n;continue}const r=a(this,fe).get(n);if(r)switch(s){case"ON":this.setVisibility(n,!0,e);break;case"OFF":this.setVisibility(n,!1,e);break;case"Toggle":this.setVisibility(n,!r.visible,e);break}}b(this,_o,null)}get hasInitialVisibility(){return a(this,Nc)===null||this.getHash()===a(this,Nc)}getOrder(){return a(this,fe).size?a(this,Fc)?a(this,Fc).slice():[...a(this,fe).keys()]:null}getGroup(t){return a(this,fe).get(t)||null}getHash(){if(a(this,_o)!==null)return a(this,_o);const t=new eE;for(const[e,s]of a(this,fe))t.update(`${e}:${s.visible}`);return b(this,_o,t.hexdigest())}[Symbol.iterator](){return a(this,fe).entries()}}_o=new WeakMap,fe=new WeakMap,Nc=new WeakMap,Fc=new WeakMap,nd=new WeakSet,wb=function(t){const e=t.length;if(e<2)return!0;const s=t[0];for(let n=1;n<e;n++){const r=t[n];let o;if(Array.isArray(r))o=A(this,nd,wb).call(this,r);else if(a(this,fe).has(r))o=a(this,fe).get(r).visible;else return Ot(`Optional content group not found: ${r}`),!0;switch(s){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return s==="And"};class wk{constructor(t,{disableRange:e=!1,disableStream:s=!1}){Ke(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:n,initialData:r,progressiveDone:o,contentDispositionFilename:l}=t;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=l,(r==null?void 0:r.length)>0){const c=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!s,this._isRangeSupported=!e,this._contentLength=n,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((c,h)=>{this._onReceiveData({begin:c,chunk:h})}),t.addProgressListener((c,h)=>{this._onProgress({loaded:c,total:h})}),t.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const s=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const n=this._rangeReaders.some(function(r){return r._begin!==t?!1:(r._enqueue(s),!0)});Ke(n,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,s,n,r;t.total===void 0?(s=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||s.call(e,{loaded:t.loaded}):(r=(n=this._fullRequestReader)==null?void 0:n.onProgress)==null||r.call(n,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){Ke(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new Ak(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new Ek(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeReaders.slice(0))s.cancel(t);this._pdfDataRangeTransport.abort()}}class Ak{constructor(t,e,s=!1,n=null){this._stream=t,this._done=s||!1,this._filename=Lv(n)?n:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class Ek{constructor(t,e,s){this._stream=t,this._begin=e,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function Sk(i){let t=!0,e=s("filename\\*","i").exec(i);if(e){e=e[1];let u=l(e);return u=unescape(u),u=c(u),u=h(u),r(u)}if(e=o(i),e){const u=h(e);return r(u)}if(e=s("filename","i").exec(i),e){e=e[1];let u=l(e);return u=h(u),r(u)}function s(u,f){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function n(u,f){if(u){if(!/^[\x00-\xFF]+$/.test(f))return f;try{const p=new TextDecoder(u,{fatal:!0}),g=rf(f);f=p.decode(g),t=!1}catch{}}return f}function r(u){return t&&/[\x80-\xff]/.test(u)&&(u=n("utf-8",u),t&&(u=n("iso-8859-1",u))),u}function o(u){const f=[];let p;const g=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(p=g.exec(u))!==null;){let[,v,E,S]=p;if(v=parseInt(v,10),v in f){if(v===0)break;continue}f[v]=[E,S]}const _=[];for(let v=0;v<f.length&&v in f;++v){let[E,S]=f[v];S=l(S),E&&(S=unescape(S),v===0&&(S=c(S))),_.push(S)}return _.join("")}function l(u){if(u.startsWith('"')){const f=u.slice(1).split('\\"');for(let p=0;p<f.length;++p){const g=f[p].indexOf('"');g!==-1&&(f[p]=f[p].slice(0,g),f.length=p+1),f[p]=f[p].replaceAll(/\\(.)/g,"$1")}u=f.join('"')}return u}function c(u){const f=u.indexOf("'");if(f===-1)return u;const p=u.slice(0,f),_=u.slice(f+1).replace(/^[^']*'/,"");return n(p,_)}function h(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,p,g,_){if(g==="q"||g==="Q")return _=_.replaceAll("_"," "),_=_.replaceAll(/=([0-9a-fA-F]{2})/g,function(v,E){return String.fromCharCode(parseInt(E,16))}),n(p,_);try{_=atob(_)}catch{}return n(p,_)})}return""}function fE(i,t){const e=new Headers;if(!i||!t||typeof t!="object")return e;for(const s in t){const n=t[s];n!==void 0&&e.append(s,n)}return e}function Rg(i){var t;return((t=URL.parse(i))==null?void 0:t.origin)??null}function pE({responseHeaders:i,isHttp:t,rangeChunkSize:e,disableRange:s}){const n={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(i.get("Content-Length"),10);return!Number.isInteger(r)||(n.suggestedLength=r,r<=2*e)||s||!t||i.get("Accept-Ranges")!=="bytes"||(i.get("Content-Encoding")||"identity")!=="identity"||(n.allowRangeRequests=!0),n}function gE(i){const t=i.get("Content-Disposition");if(t){let e=Sk(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(Lv(e))return e}return null}function cf(i,t){return new Fp(`Unexpected server response (${i}) while retrieving PDF "${t}".`,i,i===404||i===0&&t.startsWith("file:"))}function mE(i){return i===200||i===206}function bE(i,t,e){return{method:"GET",headers:i,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function vE(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(Ot(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class xk{constructor(t){Z(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=fE(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Ke(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new Ck(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new Tk(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class Ck{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const s=new Headers(t.headers),n=e.url;fetch(n,bE(s,this._withCredentials,this._abortController)).then(r=>{if(t._responseOrigin=Rg(r.url),!mE(r.status))throw cf(r.status,n);this._reader=r.body.getReader(),this._headersCapability.resolve();const o=r.headers,{allowRangeRequests:l,suggestedLength:c}=pE({responseHeaders:o,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=l,this._contentLength=c||this._contentLength,this._filename=gE(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Go("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:vE(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class Tk{constructor(t,e,s){this._stream=t,this._reader=null,this._loaded=0;const n=t.source;this._withCredentials=n.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!n.disableStream,this._abortController=new AbortController;const r=new Headers(t.headers);r.append("Range",`bytes=${e}-${s-1}`);const o=n.url;fetch(o,bE(r,this._withCredentials,this._abortController)).then(l=>{const c=Rg(l.url);if(c!==t._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${t._responseOrigin}".`);if(!mE(l.status))throw cf(l.status,o);this._readCapability.resolve(),this._reader=l.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:vE(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const Rm=200,km=206;function Pk(i){const t=i.response;return typeof t!="string"?t:rf(t).buffer}class Rk{constructor({url:t,httpHeaders:e,withCredentials:s}){Z(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=fE(this.isHttp,e),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,s=this.currXhrId++,n=this.pendingRequests[s]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[r,o]of this.headers)e.setRequestHeader(r,o);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),n.expectedStatus=km):n.expectedStatus=Rm,e.responseType="arraybuffer",Ke(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,s),e.onprogress=this.onProgress.bind(this,s),n.onHeadersReceived=t.onHeadersReceived,n.onDone=t.onDone,n.onError=t.onError,n.onProgress=t.onProgress,e.send(null),s}onProgress(t,e){var n;const s=this.pendingRequests[t];s&&((n=s.onProgress)==null||n.call(s,e))}onStateChange(t,e){const s=this.pendingRequests[t];if(!s)return;const n=s.xhr;if(n.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),n.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],n.status===0&&this.isHttp){s.onError(n.status);return}const r=n.status||Rm;if(!(r===Rm&&s.expectedStatus===km)&&r!==s.expectedStatus){s.onError(n.status);return}const l=Pk(n);if(r===km){const c=n.getResponseHeader("Content-Range"),h=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);h?s.onDone({begin:parseInt(h[1],10),chunk:l}):(Ot('Missing or invalid "Content-Range" header.'),s.onError(0))}else l?s.onDone({begin:0,chunk:l}):s.onError(n.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class kk{constructor(t){this._source=t,this._manager=new Rk(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return Ke(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new Ik(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const s=new Mk(this._manager,t,e);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class Ik{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=Rg(e.responseURL);const s=e.getAllResponseHeaders(),n=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(l=>{const[c,...h]=l.split(": ");return[c,h.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:o}=pE({responseHeaders:n,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=gE(n),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=cf(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class Mk{constructor(t,e,s){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=Rg((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=cf(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const Lk=/^[a-z][a-z0-9\-+.]+:/i;function Dk(i){if(Lk.test(i))return new URL(i);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(i))}class Ok{constructor(t){this.source=t,this.url=Dk(t.url),Ke(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return Ke(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new Nk(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new Fk(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class Nk{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(n=>{this._contentLength=n.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},n=>{n.code==="ENOENT"&&(n=cf(0,this._url.href)),this._storedError=n,this._headersCapability.reject(n)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Go("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class Fk{constructor(t,e,s){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const n=t.source;this._isStreamingSupported=!n.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:e,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const Fh=Symbol("INITIAL_DATA");var fi,rd,Ab;class _E{constructor(){w(this,rd);w(this,fi,Object.create(null))}get(t,e=null){if(e){const n=A(this,rd,Ab).call(this,t);return n.promise.then(()=>e(n.data)),null}const s=a(this,fi)[t];if(!s||s.data===Fh)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return s.data}has(t){const e=a(this,fi)[t];return!!e&&e.data!==Fh}delete(t){const e=a(this,fi)[t];return!e||e.data===Fh?!1:(delete a(this,fi)[t],!0)}resolve(t,e=null){const s=A(this,rd,Ab).call(this,t);s.data=e,s.resolve()}clear(){var t;for(const e in a(this,fi)){const{data:s}=a(this,fi)[e];(t=s==null?void 0:s.bitmap)==null||t.close()}b(this,fi,Object.create(null))}*[Symbol.iterator](){for(const t in a(this,fi)){const{data:e}=a(this,fi)[t];e!==Fh&&(yield[t,e])}}}fi=new WeakMap,rd=new WeakSet,Ab=function(t){var e;return(e=a(this,fi))[t]||(e[t]={...Promise.withResolvers(),data:Fh})};const $k=1e5,$w=30;var Uw,yo,ti,od,ad,za,yr,ld,cd,qa,$c,Bc,wo,Hc,hd,jc,Wa,ud,dd,Vc,Ga,fd,Ao,Uc,qr,yE,wE,Eb,Ti,rp,Sb,AE,EE;const Ze=class Ze{constructor({textContentSource:t,container:e,viewport:s}){w(this,qr);w(this,yo,Promise.withResolvers());w(this,ti,null);w(this,od,!1);w(this,ad,!!((Uw=globalThis.FontInspector)!=null&&Uw.enabled));w(this,za,null);w(this,yr,null);w(this,ld,0);w(this,cd,0);w(this,qa,null);w(this,$c,null);w(this,Bc,0);w(this,wo,0);w(this,Hc,Object.create(null));w(this,hd,[]);w(this,jc,null);w(this,Wa,[]);w(this,ud,new WeakMap);w(this,dd,null);var c;if(t instanceof ReadableStream)b(this,jc,t);else if(typeof t=="object")b(this,jc,new ReadableStream({start(h){h.enqueue(t),h.close()}}));else throw new Error('No "textContentSource" parameter specified.');b(this,ti,b(this,$c,e)),b(this,wo,s.scale*Xn.pixelRatio),b(this,Bc,s.rotation),b(this,yr,{div:null,properties:null,ctx:null});const{pageWidth:n,pageHeight:r,pageX:o,pageY:l}=s.rawDims;b(this,dd,[1,0,0,-1,-o,l+r]),b(this,cd,n),b(this,ld,r),A(c=Ze,Ti,AE).call(c),Il(e,s),a(this,yo).promise.finally(()=>{a(Ze,Uc).delete(this),b(this,yr,null),b(this,Hc,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=Es.platform;return Gt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{a(this,qa).read().then(({value:e,done:s})=>{if(s){a(this,yo).resolve();return}a(this,za)??b(this,za,e.lang),Object.assign(a(this,Hc),e.styles),A(this,qr,yE).call(this,e.items),t()},a(this,yo).reject)};return b(this,qa,a(this,jc).getReader()),a(Ze,Uc).add(this),t(),a(this,yo).promise}update({viewport:t,onBefore:e=null}){var r;const s=t.scale*Xn.pixelRatio,n=t.rotation;if(n!==a(this,Bc)&&(e==null||e(),b(this,Bc,n),Il(a(this,$c),{rotation:n})),s!==a(this,wo)){e==null||e(),b(this,wo,s);const o={div:null,properties:null,ctx:A(r=Ze,Ti,rp).call(r,a(this,za))};for(const l of a(this,Wa))o.properties=a(this,ud).get(l),o.div=l,A(this,qr,Eb).call(this,o)}}cancel(){var e;const t=new Go("TextLayer task cancelled.");(e=a(this,qa))==null||e.cancel(t).catch(()=>{}),b(this,qa,null),a(this,yo).reject(t)}get textDivs(){return a(this,Wa)}get textContentItemsStr(){return a(this,hd)}static cleanup(){if(!(a(this,Uc).size>0)){a(this,Vc).clear();for(const{canvas:t}of a(this,Ga).values())t.remove();a(this,Ga).clear()}}};yo=new WeakMap,ti=new WeakMap,od=new WeakMap,ad=new WeakMap,za=new WeakMap,yr=new WeakMap,ld=new WeakMap,cd=new WeakMap,qa=new WeakMap,$c=new WeakMap,Bc=new WeakMap,wo=new WeakMap,Hc=new WeakMap,hd=new WeakMap,jc=new WeakMap,Wa=new WeakMap,ud=new WeakMap,dd=new WeakMap,Vc=new WeakMap,Ga=new WeakMap,fd=new WeakMap,Ao=new WeakMap,Uc=new WeakMap,qr=new WeakSet,yE=function(t){var n,r;if(a(this,od))return;(r=a(this,yr)).ctx??(r.ctx=A(n=Ze,Ti,rp).call(n,a(this,za)));const e=a(this,Wa),s=a(this,hd);for(const o of t){if(e.length>$k){Ot("Ignoring additional textDivs for performance reasons."),b(this,od,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const l=a(this,ti);b(this,ti,document.createElement("span")),a(this,ti).classList.add("markedContent"),o.id!==null&&a(this,ti).setAttribute("id",`${o.id}`),l.append(a(this,ti))}else o.type==="endMarkedContent"&&b(this,ti,a(this,ti).parentNode);continue}s.push(o.str),A(this,qr,wE).call(this,o)}},wE=function(t){var v;const e=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};a(this,Wa).push(e);const n=At.transform(a(this,dd),t.transform);let r=Math.atan2(n[1],n[0]);const o=a(this,Hc)[t.fontName];o.vertical&&(r+=Math.PI/2);let l=a(this,ad)&&o.fontSubstitution||o.fontFamily;l=Ze.fontFamilyMap.get(l)||l;const c=Math.hypot(n[2],n[3]),h=c*A(v=Ze,Ti,EE).call(v,l,o,a(this,za));let u,f;r===0?(u=n[4],f=n[5]-h):(u=n[4]+h*Math.sin(r),f=n[5]-h*Math.cos(r));const p="calc(var(--total-scale-factor) *",g=e.style;a(this,ti)===a(this,$c)?(g.left=`${(100*u/a(this,cd)).toFixed(2)}%`,g.top=`${(100*f/a(this,ld)).toFixed(2)}%`):(g.left=`${p}${u.toFixed(2)}px)`,g.top=`${p}${f.toFixed(2)}px)`),g.fontSize=`${p}${(a(Ze,Ao)*c).toFixed(2)}px)`,g.fontFamily=l,s.fontSize=c,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,a(this,ad)&&(e.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),r!==0&&(s.angle=r*(180/Math.PI));let _=!1;if(t.str.length>1)_=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const E=Math.abs(t.transform[0]),S=Math.abs(t.transform[3]);E!==S&&Math.max(E,S)/Math.min(E,S)>1.5&&(_=!0)}if(_&&(s.canvasWidth=o.vertical?t.height:t.width),a(this,ud).set(e,s),a(this,yr).div=e,a(this,yr).properties=s,A(this,qr,Eb).call(this,a(this,yr)),s.hasText&&a(this,ti).append(e),s.hasEOL){const E=document.createElement("br");E.setAttribute("role","presentation"),a(this,ti).append(E)}},Eb=function(t){var l;const{div:e,properties:s,ctx:n}=t,{style:r}=e;let o="";if(a(Ze,Ao)>1&&(o=`scale(${1/a(Ze,Ao)})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:c}=r,{canvasWidth:h,fontSize:u}=s;A(l=Ze,Ti,Sb).call(l,n,u*a(this,wo),c);const{width:f}=n.measureText(e.textContent);f>0&&(o=`scaleX(${h*a(this,wo)/f}) ${o}`)}s.angle!==0&&(o=`rotate(${s.angle}deg) ${o}`),o.length>0&&(r.transform=o)},Ti=new WeakSet,rp=function(t=null){let e=a(this,Ga).get(t||(t=""));if(!e){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=t,document.body.append(s),e=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),a(this,Ga).set(t,e),a(this,fd).set(e,{size:0,family:""})}return e},Sb=function(t,e,s){const n=a(this,fd).get(t);e===n.size&&s===n.family||(t.font=`${e}px ${s}`,n.size=e,n.family=s)},AE=function(){if(a(this,Ao)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),b(this,Ao,t.getBoundingClientRect().height),t.remove()},EE=function(t,e,s){const n=a(this,Vc).get(t);if(n)return n;const r=A(this,Ti,rp).call(this,s);r.canvas.width=r.canvas.height=$w,A(this,Ti,Sb).call(this,r,$w,t);const o=r.measureText(""),l=o.fontBoundingBoxAscent,c=Math.abs(o.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let h=.8;return l?h=l/(l+c):(Es.platform.isFirefox&&Ot("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?h=e.ascent:e.descent&&(h=1+e.descent)),a(this,Vc).set(t,h),h},w(Ze,Ti),w(Ze,Vc,new Map),w(Ze,Ga,new Map),w(Ze,fd,new WeakMap),w(Ze,Ao,null),w(Ze,Uc,new Set);let Eu=Ze;class Su{static textContent(t){const e=[],s={items:e,styles:Object.create(null)};function n(r){var c;if(!r)return;let o=null;const l=r.name;if(l==="#text")o=r.value;else if(Su.shouldBuildText(l))(c=r==null?void 0:r.attributes)!=null&&c.textContent?o=r.attributes.textContent:r.value&&(o=r.value);else return;if(o!==null&&e.push({str:o}),!!r.children)for(const h of r.children)n(h)}return n(t),s}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const Bk=100;function SE(i={}){typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});const t=new xb,{docId:e}=t,s=i.url?XR(i.url):null,n=i.data?KR(i.data):null,r=i.httpHeaders||null,o=i.withCredentials===!0,l=i.password??null,c=i.range instanceof xE?i.range:null,h=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:2**16;let u=i.worker instanceof xu?i.worker:null;const f=i.verbosity,p=typeof i.docBaseUrl=="string"&&!Pg(i.docBaseUrl)?i.docBaseUrl:null,g=Of(i.cMapUrl),_=i.cMapPacked!==!1,v=i.CMapReaderFactory||(Ws?ik:Cw),E=Of(i.iccUrl),S=Of(i.standardFontDataUrl),C=i.StandardFontDataFactory||(Ws?nk:Tw),T=Of(i.wasmUrl),R=i.WasmFactory||(Ws?rk:Pw),I=i.stopAtErrors!==!0,F=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,N=i.isEvalSupported!==!1,H=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!Ws,U=typeof i.isImageDecoderSupported=="boolean"?i.isImageDecoderSupported:!Ws&&(Es.platform.isFirefox||!globalThis.chrome),Q=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,tt=typeof i.disableFontFace=="boolean"?i.disableFontFace:Ws,Et=i.fontExtraProperties===!0,wt=i.enableXfa===!0,Rt=i.ownerDocument||globalThis.document,oe=i.disableRange===!0,J=i.disableStream===!0,X=i.disableAutoFetch===!0,et=i.pdfBug===!0,Y=i.CanvasFactory||(Ws?sk:ZR),L=i.FilterFactory||(Ws?ek:tk),bt=i.enableHWA===!0,Ct=i.useWasm!==!1,Wt=c?c.length:i.length??NaN,xe=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!Ws&&!tt,Be=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:!!(v===Cw&&C===Tw&&R===Pw&&g&&S&&T&&jh(g,document.baseURI)&&jh(S,document.baseURI)&&jh(T,document.baseURI)),Xt=null;CR(f);const B={canvasFactory:new Y({ownerDocument:Rt,enableHWA:bt}),filterFactory:new L({docId:e,ownerDocument:Rt}),cMapReaderFactory:Be?null:new v({baseUrl:g,isCompressed:_}),standardFontDataFactory:Be?null:new C({baseUrl:S}),wasmFactory:Be?null:new R({baseUrl:T})};u||(u=xu.create({verbosity:f,port:zn.workerPort}),t._worker=u);const V={docId:e,apiVersion:"5.3.31",data:n,password:l,disableAutoFetch:X,rangeChunkSize:h,length:Wt,docBaseUrl:p,enableXfa:wt,evaluatorOptions:{maxImageSize:F,disableFontFace:tt,ignoreErrors:I,isEvalSupported:N,isOffscreenCanvasSupported:H,isImageDecoderSupported:U,canvasMaxAreaInBytes:Q,fontExtraProperties:Et,useSystemFonts:xe,useWasm:Ct,useWorkerFetch:Be,cMapUrl:g,iccUrl:E,standardFontDataUrl:S,wasmUrl:T}},st={ownerDocument:Rt,pdfBug:et,styleElement:Xt,loadingParams:{disableAutoFetch:X,enableXfa:wt}};return u.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const pt=u.messageHandler.sendWithPromise("GetDocRequest",V,n?[n.buffer]:null);let $t;if(c)$t=new wk(c,{disableRange:oe,disableStream:J});else if(!n){if(!s)throw new Error("getDocument - no `url` parameter provided.");const P=jh(s)?xk:Ws?Ok:kk;$t=new P({url:s,length:Wt,httpHeaders:r,withCredentials:o,rangeChunkSize:h,disableRange:oe,disableStream:J})}return pt.then(P=>{if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const k=new Wh(e,P,u.port),$=new Vk(k,t,$t,st,B);t._transport=$,k.send("Ready",null)})}).catch(t._capability.reject),t}var tg;const eg=class eg{constructor(){Z(this,"_capability",Promise.withResolvers());Z(this,"_transport",null);Z(this,"_worker",null);Z(this,"docId",`d${Bs(eg,tg)._++}`);Z(this,"destroyed",!1);Z(this,"onPassword",null);Z(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var t,e,s,n;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(r){throw(s=this._worker)!=null&&s.port&&delete this._worker._pendingDestroy,r}this._transport=null,(n=this._worker)==null||n.destroy(),this._worker=null}async getData(){return this._transport.getData()}};tg=new WeakMap,w(eg,tg,0);let xb=eg;var Xa,pd,gd,md,bd;class xE{constructor(t,e,s=!1,n=null){w(this,Xa,Promise.withResolvers());w(this,pd,[]);w(this,gd,[]);w(this,md,[]);w(this,bd,[]);this.length=t,this.initialData=e,this.progressiveDone=s,this.contentDispositionFilename=n}addRangeListener(t){a(this,bd).push(t)}addProgressListener(t){a(this,md).push(t)}addProgressiveReadListener(t){a(this,gd).push(t)}addProgressiveDoneListener(t){a(this,pd).push(t)}onDataRange(t,e){for(const s of a(this,bd))s(t,e)}onDataProgress(t,e){a(this,Xa).promise.then(()=>{for(const s of a(this,md))s(t,e)})}onDataProgressiveRead(t){a(this,Xa).promise.then(()=>{for(const e of a(this,gd))e(t)})}onDataProgressiveDone(){a(this,Xa).promise.then(()=>{for(const t of a(this,pd))t()})}transportReady(){a(this,Xa).resolve()}requestDataRange(t,e){ge("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}Xa=new WeakMap,pd=new WeakMap,gd=new WeakMap,md=new WeakMap,bd=new WeakMap;class Hk{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return Gt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var wr,Ka,Qh;class jk{constructor(t,e,s,n=!1){w(this,Ka);w(this,wr,!1);this._pageIndex=t,this._pageInfo=e,this._transport=s,this._stats=n?new Ew:null,this._pdfBug=n,this.commonObjs=s.commonObjs,this.objs=new _E,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:s=0,offsetY:n=0,dontFlip:r=!1}={}){return new af({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:s,offsetY:n,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return Gt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:s="display",annotationMode:n=so.ENABLE,transform:r=null,background:o=null,optionalContentConfigPromise:l=null,annotationCanvasMap:c=null,pageColors:h=null,printAnnotationStorage:u=null,isEditing:f=!1}){var R,I;(R=this._stats)==null||R.time("Overall");const p=this._transport.getRenderingIntent(s,n,u,f),{renderingIntent:g,cacheKey:_}=p;b(this,wr,!1),l||(l=this._transport.getOptionalContentConfig(g));let v=this._intentStates.get(_);v||(v=Object.create(null),this._intentStates.set(_,v)),v.streamReaderCancelTimeout&&(clearTimeout(v.streamReaderCancelTimeout),v.streamReaderCancelTimeout=null);const E=!!(g&Ei.PRINT);v.displayReadyCapability||(v.displayReadyCapability=Promise.withResolvers(),v.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(I=this._stats)==null||I.time("Page Request"),this._pumpOperatorList(p));const S=F=>{var N;v.renderTasks.delete(C),E&&b(this,wr,!0),A(this,Ka,Qh).call(this),F?(C.capability.reject(F),this._abortOperatorList({intentState:v,reason:F instanceof Error?F:new Error(F)})):C.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(N=globalThis.Stats)!=null&&N.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},C=new Cb({callback:S,params:{canvasContext:t,viewport:e,transform:r,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:v.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!E,pdfBug:this._pdfBug,pageColors:h});(v.renderTasks||(v.renderTasks=new Set)).add(C);const T=C.task;return Promise.all([v.displayReadyCapability.promise,l]).then(([F,N])=>{var H;if(this.destroyed){S();return}if((H=this._stats)==null||H.time("Rendering"),!(N.renderingIntent&g))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");C.initializeGraphics({transparency:F,optionalContentConfig:N}),C.operatorListChanged()}).catch(S),T}getOperatorList({intent:t="display",annotationMode:e=so.ENABLE,printAnnotationStorage:s=null,isEditing:n=!1}={}){var h;function r(){l.operatorList.lastChunk&&(l.opListReadCapability.resolve(l.operatorList),l.renderTasks.delete(c))}const o=this._transport.getRenderingIntent(t,e,s,n,!0);let l=this._intentStates.get(o.cacheKey);l||(l=Object.create(null),this._intentStates.set(o.cacheKey,l));let c;return l.opListReadCapability||(c=Object.create(null),c.operatorListChanged=r,l.opListReadCapability=Promise.withResolvers(),(l.renderTasks||(l.renderTasks=new Set)).add(c),l.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(h=this._stats)==null||h.time("Page Request"),this._pumpOperatorList(o)),l.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(n){return n.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>Su.textContent(s));const e=this.streamTextContent(t);return new Promise(function(s,n){function r(){o.read().then(function({value:c,done:h}){if(h){s(l);return}l.lang??(l.lang=c.lang),Object.assign(l.styles,c.styles),l.items.push(...c.items),r()},n)}const o=e.getReader(),l={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const s of e.renderTasks)t.push(s.completed),s.cancel();return this.objs.clear(),b(this,wr,!1),Promise.all(t)}cleanup(t=!1){b(this,wr,!0);const e=A(this,Ka,Qh).call(this);return t&&e&&this._stats&&(this._stats=new Ew),e}_startRenderPage(t,e){var n,r;const s=this._intentStates.get(e);s&&((n=this._stats)==null||n.timeEnd("Page Request"),(r=s.displayReadyCapability)==null||r.resolve(t))}_renderPageChunk(t,e){for(let s=0,n=t.length;s<n;s++)e.operatorList.fnArray.push(t.fnArray[s]),e.operatorList.argsArray.push(t.argsArray[s]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const s of e.renderTasks)s.operatorListChanged();t.lastChunk&&A(this,Ka,Qh).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:s,modifiedIds:n}){const{map:r,transfer:o}=s,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:r,modifiedIds:n},o).getReader(),h=this._intentStates.get(e);h.streamReader=c;const u=()=>{c.read().then(({value:f,done:p})=>{if(p){h.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(f,h),u())},f=>{if(h.streamReader=null,!this._transport.destroyed){if(h.operatorList){h.operatorList.lastChunk=!0;for(const p of h.renderTasks)p.operatorListChanged();A(this,Ka,Qh).call(this)}if(h.displayReadyCapability)h.displayReadyCapability.reject(f);else if(h.opListReadCapability)h.opListReadCapability.reject(f);else throw f}})};u()}_abortOperatorList({intentState:t,reason:e,force:s=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(e instanceof Mv){let n=Bk;e.extraDelay>0&&e.extraDelay<1e3&&(n+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},n);return}}if(t.streamReader.cancel(new Go(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[n,r]of this._intentStates)if(r===t){this._intentStates.delete(n);break}this.cleanup()}}}get stats(){return this._stats}}wr=new WeakMap,Ka=new WeakSet,Qh=function(){if(!a(this,wr)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),b(this,wr,!1),!0};var Eo,tn,Ar,Ya,sg,Qa,Ja,Ks,op,CE,TE,Jh,zc,ap;const Te=class Te{constructor({name:t=null,port:e=null,verbosity:s=TR()}={}){w(this,Ks);w(this,Eo,Promise.withResolvers());w(this,tn,null);w(this,Ar,null);w(this,Ya,null);if(this.name=t,this.destroyed=!1,this.verbosity=s,e){if(a(Te,Ja).has(e))throw new Error("Cannot use more than one PDFWorker per port.");a(Te,Ja).set(e,this),A(this,Ks,CE).call(this,e)}else A(this,Ks,TE).call(this)}get promise(){return a(this,Eo).promise}get port(){return a(this,Ar)}get messageHandler(){return a(this,tn)}destroy(){var t,e;this.destroyed=!0,(t=a(this,Ya))==null||t.terminate(),b(this,Ya,null),a(Te,Ja).delete(a(this,Ar)),b(this,Ar,null),(e=a(this,tn))==null||e.destroy(),b(this,tn,null)}static create(t){const e=a(this,Ja).get(t==null?void 0:t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.create - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Te(t)}static get workerSrc(){if(zn.workerSrc)return zn.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return Gt(this,"_setupFakeWorkerGlobal",(async()=>a(this,zc,ap)?a(this,zc,ap):(await import(this.workerSrc)).WorkerMessageHandler)())}};Eo=new WeakMap,tn=new WeakMap,Ar=new WeakMap,Ya=new WeakMap,sg=new WeakMap,Qa=new WeakMap,Ja=new WeakMap,Ks=new WeakSet,op=function(){a(this,Eo).resolve(),a(this,tn).send("configure",{verbosity:this.verbosity})},CE=function(t){b(this,Ar,t),b(this,tn,new Wh("main","worker",t)),a(this,tn).on("ready",()=>{}),A(this,Ks,op).call(this)},TE=function(){if(a(Te,Qa)||a(Te,zc,ap)){A(this,Ks,Jh).call(this);return}let{workerSrc:t}=Te;try{Te._isSameOrigin(window.location,t)||(t=Te._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),s=new Wh("main","worker",e),n=()=>{r.abort(),s.destroy(),e.terminate(),this.destroyed?a(this,Eo).reject(new Error("Worker was destroyed")):A(this,Ks,Jh).call(this)},r=new AbortController;e.addEventListener("error",()=>{a(this,Ya)||n()},{signal:r.signal}),s.on("test",l=>{if(r.abort(),this.destroyed||!l){n();return}b(this,tn,s),b(this,Ar,e),b(this,Ya,e),A(this,Ks,op).call(this)}),s.on("ready",l=>{if(r.abort(),this.destroyed){n();return}try{o()}catch{A(this,Ks,Jh).call(this)}});const o=()=>{const l=new Uint8Array;s.send("test",l,[l.buffer])};o();return}catch{Tg("The worker has been disabled.")}A(this,Ks,Jh).call(this)},Jh=function(){a(Te,Qa)||(Ot("Setting up fake worker."),b(Te,Qa,!0)),Te._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){a(this,Eo).reject(new Error("Worker was destroyed"));return}const e=new JR;b(this,Ar,e);const s=`fake${Bs(Te,sg)._++}`,n=new Wh(s+"_worker",s,e);t.setup(n,e),b(this,tn,new Wh(s,s+"_worker",e)),A(this,Ks,op).call(this)}).catch(t=>{a(this,Eo).reject(new Error(`Setting up fake worker failed: "${t.message}".`))})},zc=new WeakSet,ap=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},w(Te,zc),w(Te,sg,0),w(Te,Qa,!1),w(Te,Ja,new WeakMap),Ws&&(b(Te,Qa,!0),zn.workerSrc||(zn.workerSrc="./pdf.worker.mjs")),Te._isSameOrigin=(t,e)=>{const s=URL.parse(t);if(!(s!=null&&s.origin)||s.origin==="null")return!1;const n=new URL(e,s);return s.origin===n.origin},Te._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))},Te.fromPort=t=>{if(BR("`PDFWorker.fromPort` - please use `PDFWorker.create` instead."),!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");return Te.create(t)};let xu=Te;var Er,Nn,qc,Wc,Sr,Za,Zh;class Vk{constructor(t,e,s,n,r){w(this,Za);w(this,Er,new Map);w(this,Nn,new Map);w(this,qc,new Map);w(this,Wc,new Map);w(this,Sr,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new _E,this.fontLoader=new WR({ownerDocument:n.ownerDocument,styleElement:n.styleElement}),this.loadingParams=n.loadingParams,this._params=n,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.wasmFactory=r.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return Gt(this,"annotationStorage",new Nv)}getRenderingIntent(t,e=so.ENABLE,s=null,n=!1,r=!1){let o=Ei.DISPLAY,l=db;switch(t){case"any":o=Ei.ANY;break;case"display":break;case"print":o=Ei.PRINT;break;default:Ot(`getRenderingIntent - invalid intent: ${t}`)}const c=o&Ei.PRINT&&s instanceof iE?s:this.annotationStorage;switch(e){case so.DISABLE:o+=Ei.ANNOTATIONS_DISABLE;break;case so.ENABLE:break;case so.ENABLE_FORMS:o+=Ei.ANNOTATIONS_FORMS;break;case so.ENABLE_STORAGE:o+=Ei.ANNOTATIONS_STORAGE,l=c.serializable;break;default:Ot(`getRenderingIntent - invalid annotationMode: ${e}`)}n&&(o+=Ei.IS_EDITING),r&&(o+=Ei.OPLIST);const{ids:h,hash:u}=c.modifiedIds,f=[o,l.hash,u];return{renderingIntent:o,cacheKey:f.join("_"),annotationStorageSerializable:l,modifiedIds:h}}destroy(){var s;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(s=a(this,Sr))==null||s.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const n of a(this,Nn).values())t.push(n._destroy());a(this,Nn).clear(),a(this,qc).clear(),a(this,Wc).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var n,r;this.commonObjs.clear(),this.fontLoader.clear(),a(this,Er).clear(),this.filterFactory.destroy(),Eu.cleanup(),(n=this._networkStream)==null||n.cancelAllRequests(new Go("Worker was terminated.")),(r=this.messageHandler)==null||r.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(s,n)=>{Ke(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},n.onPull=()=>{this._fullReader.read().then(function({value:r,done:o}){if(o){n.close();return}Ke(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{n.error(r)})},n.onCancel=r=>{this._fullReader.cancel(r),n.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",async s=>{var l;await this._fullReader.headersReady;const{isStreamingSupported:n,isRangeSupported:r,contentLength:o}=this._fullReader;return(!n||!r)&&(this._lastProgress&&((l=e.onProgress)==null||l.call(e,this._lastProgress)),this._fullReader.onProgress=c=>{var h;(h=e.onProgress)==null||h.call(e,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:n,isRangeSupported:r,contentLength:o}}),t.on("GetRangeReader",(s,n)=>{Ke(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(s.begin,s.end);if(!r){n.close();return}n.onPull=()=>{r.read().then(function({value:o,done:l}){if(l){n.close();return}Ke(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),n.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{n.error(o)})},n.onCancel=o=>{r.cancel(o),n.ready.catch(l=>{if(!this.destroyed)throw l})}}),t.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,e._capability.resolve(new Hk(s,this))}),t.on("DocException",s=>{e._capability.reject(Qs(s))}),t.on("PasswordRequest",s=>{b(this,Sr,Promise.withResolvers());try{if(!e.onPassword)throw Qs(s);const n=r=>{r instanceof Error?a(this,Sr).reject(r):a(this,Sr).resolve({password:r})};e.onPassword(n,s.code)}catch(n){a(this,Sr).reject(n)}return a(this,Sr).promise}),t.on("DataLoaded",s=>{var n;(n=e.onProgress)==null||n.call(e,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),t.on("StartRenderPage",s=>{if(this.destroyed)return;a(this,Nn).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),t.on("commonobj",([s,n,r])=>{var o;if(this.destroyed||this.commonObjs.has(s))return null;switch(n){case"Font":if("error"in r){const u=r.error;Ot(`Error during font loading: ${u}`),this.commonObjs.resolve(s,u);break}const l=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(u,f)=>globalThis.FontInspector.fontAdded(u,f):null,c=new GR(r,l);this.fontLoader.bind(c).catch(()=>t.sendWithPromise("FontFallback",{id:s})).finally(()=>{!c.fontExtraProperties&&c.data&&(c.data=null),this.commonObjs.resolve(s,c)});break;case"CopyLocalImage":const{imageRef:h}=r;Ke(h,"The imageRef must be defined.");for(const u of a(this,Nn).values())for(const[,f]of u.objs)if((f==null?void 0:f.ref)===h)return f.dataLen?(this.commonObjs.resolve(s,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,r);break;default:throw new Error(`Got unknown common object type ${n}`)}return null}),t.on("obj",([s,n,r,o])=>{var c;if(this.destroyed)return;const l=a(this,Nn).get(n);if(!l.objs.has(s)){if(l._intentStates.size===0){(c=o==null?void 0:o.bitmap)==null||c.close();return}switch(r){case"Image":case"Pattern":l.objs.resolve(s,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",s=>{var n;this.destroyed||(n=e.onProgress)==null||n.call(e,{loaded:s.loaded,total:s.total})}),t.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const n=this[s.type];if(!n)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return n.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;this.annotationStorage.size<=0&&Ot("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((s=this._fullReader)==null?void 0:s.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,s=a(this,qc).get(e);if(s)return s;const n=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&a(this,Wc).set(r.refStr,t);const o=new jk(e,r,this,this._params.pdfBug);return a(this,Nn).set(e,o),o});return a(this,qc).set(e,n),n}getPageIndex(t){return fb(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return A(this,Za,Zh).call(this,"GetFieldObjects")}hasJSActions(){return A(this,Za,Zh).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return A(this,Za,Zh).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return A(this,Za,Zh).call(this,"GetOptionalContentConfig").then(e=>new yk(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=a(this,Er).get(t);if(e)return e;const s=this.messageHandler.sendWithPromise(t,null).then(n=>{var r,o;return{info:n[0],metadata:n[1]?new vk(n[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return a(this,Er).set(t,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of a(this,Nn).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),a(this,Er).clear(),this.filterFactory.destroy(!0),Eu.cleanup()}}cachedPageNumber(t){if(!fb(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return a(this,Wc).get(e)??null}}Er=new WeakMap,Nn=new WeakMap,qc=new WeakMap,Wc=new WeakMap,Sr=new WeakMap,Za=new WeakSet,Zh=function(t,e=null){const s=a(this,Er).get(t);if(s)return s;const n=this.messageHandler.sendWithPromise(t,e);return a(this,Er).set(t,n),n};var So;class Uk{constructor(t){w(this,So,null);Z(this,"onContinue",null);Z(this,"onError",null);b(this,So,t)}get promise(){return a(this,So).capability.promise}cancel(t=0){a(this,So).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=a(this,So).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=a(this,So);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}So=new WeakMap;var xo,tl;const ya=class ya{constructor({callback:t,params:e,objs:s,commonObjs:n,annotationCanvasMap:r,operatorList:o,pageIndex:l,canvasFactory:c,filterFactory:h,useRequestAnimationFrame:u=!1,pdfBug:f=!1,pageColors:p=null}){w(this,xo,null);this.callback=t,this.params=e,this.objs=s,this.commonObjs=n,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=l,this.canvasFactory=c,this.filterFactory=h,this._pdfBug=f,this.pageColors=p,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Uk(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var l,c;if(this.cancelled)return;if(this._canvas){if(a(ya,tl).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");a(ya,tl).add(this._canvas)}this._pdfBug&&((l=globalThis.StepperManager)!=null&&l.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:n,transform:r,background:o}=this.params;this.gfx=new gc(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:n,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(t=null,e=0){var s,n,r;this.running=!1,this.cancelled=!0,(s=this.gfx)==null||s.endDrawing(),a(this,xo)&&(window.cancelAnimationFrame(a(this,xo)),b(this,xo,null)),a(ya,tl).delete(this._canvas),t||(t=new Mv(`Rendering cancelled, page ${this._pageIndex+1}`,e)),this.callback(t),(r=(n=this.task).onError)==null||r.call(n,t)}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?b(this,xo,window.requestAnimationFrame(()=>{b(this,xo,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),a(ya,tl).delete(this._canvas),this.callback())))}};xo=new WeakMap,tl=new WeakMap,w(ya,tl,new WeakSet);let Cb=ya;const zk="5.3.31",qk="47ad820d9";function Bw(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function $h(i){return Math.max(0,Math.min(255,255*i))}class Hw{static CMYK_G([t,e,s,n]){return["G",1-Math.min(1,.3*t+.59*s+.11*e+n)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=$h(t),[t,t,t]}static G_HTML([t]){const e=Bw(t);return`#${e}${e}${e}`}static RGB_G([t,e,s]){return["G",.3*t+.59*e+.11*s]}static RGB_rgb(t){return t.map($h)}static RGB_HTML(t){return`#${t.map(Bw).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,s,n]){return["RGB",1-Math.min(1,t+n),1-Math.min(1,s+n),1-Math.min(1,e+n)]}static CMYK_rgb([t,e,s,n]){return[$h(1-Math.min(1,t+n)),$h(1-Math.min(1,s+n)),$h(1-Math.min(1,e+n))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,s]){const n=1-t,r=1-e,o=1-s,l=Math.min(n,r,o);return["CMYK",n,r,o,l]}}class Wk{create(t,e,s=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const n=this._createSVG("svg:svg");return n.setAttribute("version","1.1"),s||(n.setAttribute("width",`${t}px`),n.setAttribute("height",`${e}px`)),n.setAttribute("preserveAspectRatio","none"),n.setAttribute("viewBox",`0 0 ${t} ${e}`),n}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){ge("Abstract method `_createSVG` called.")}}class Hp extends Wk{_createSVG(t){return document.createElementNS(sr,t)}}class PE{static setupStorage(t,e,s,n,r){const o=n.getValue(e,{value:null});switch(s.name){case"textarea":if(o.value!==null&&(t.textContent=o.value),r==="print")break;t.addEventListener("input",l=>{n.setValue(e,{value:l.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(o.value===s.attributes.xfaOn?t.setAttribute("checked",!0):o.value===s.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",l=>{n.setValue(e,{value:l.target.checked?l.target.getAttribute("xfaOn"):l.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&t.setAttribute("value",o.value),r==="print")break;t.addEventListener("input",l=>{n.setValue(e,{value:l.target.value})})}break;case"select":if(o.value!==null){t.setAttribute("value",o.value);for(const l of s.children)l.attributes.value===o.value?l.attributes.selected=!0:l.attributes.hasOwnProperty("selected")&&delete l.attributes.selected}t.addEventListener("input",l=>{const c=l.target.options,h=c.selectedIndex===-1?"":c[c.selectedIndex].value;n.setValue(e,{value:h})});break}}static setAttributes({html:t,element:e,storage:s=null,intent:n,linkService:r}){const{attributes:o}=e,l=t instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${n}`);for(const[c,h]of Object.entries(o))if(h!=null)switch(c){case"class":h.length&&t.setAttribute(c,h.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",h);break;case"style":Object.assign(t.style,h);break;case"textContent":t.textContent=h;break;default:(!l||c!=="href"&&c!=="newWindow")&&t.setAttribute(c,h)}l&&r.addLinkAttributes(t,o.href,o.newWindow),s&&o.dataId&&this.setupStorage(t,o.dataId,e,s)}static render(t){var f,p;const e=t.annotationStorage,s=t.linkService,n=t.xfaHtml,r=t.intent||"display",o=document.createElement(n.name);n.attributes&&this.setAttributes({html:o,element:n,intent:r,linkService:s});const l=r!=="richText",c=t.div;if(c.append(o),t.viewport){const g=`matrix(${t.viewport.transform.join(",")})`;c.style.transform=g}l&&c.setAttribute("class","xfaLayer xfaFont");const h=[];if(n.children.length===0){if(n.value){const g=document.createTextNode(n.value);o.append(g),l&&Su.shouldBuildText(n.name)&&h.push(g)}return{textDivs:h}}const u=[[n,-1,o]];for(;u.length>0;){const[g,_,v]=u.at(-1);if(_+1===g.children.length){u.pop();continue}const E=g.children[++u.at(-1)[1]];if(E===null)continue;const{name:S}=E;if(S==="#text"){const T=document.createTextNode(E.value);h.push(T),v.append(T);continue}const C=(f=E==null?void 0:E.attributes)!=null&&f.xmlns?document.createElementNS(E.attributes.xmlns,S):document.createElement(S);if(v.append(C),E.attributes&&this.setAttributes({html:C,element:E,storage:e,intent:r,linkService:s}),((p=E.children)==null?void 0:p.length)>0)u.push([E,-1,C]);else if(E.value){const T=document.createTextNode(E.value);l&&Su.shouldBuildText(S)&&h.push(T),C.append(T)}}for(const g of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:h}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const hf=1e3,Gk=9,Ll=new WeakSet;class jw{static create(t){switch(t.data.annotationType){case Ge.LINK:return new RE(t);case Ge.TEXT:return new Xk(t);case Ge.WIDGET:switch(t.data.fieldType){case"Tx":return new Kk(t);case"Btn":return t.data.radioButton?new ME(t):t.data.checkBox?new Qk(t):new Jk(t);case"Ch":return new Zk(t);case"Sig":return new Yk(t)}return new Ol(t);case Ge.POPUP:return new Pb(t);case Ge.FREETEXT:return new FE(t);case Ge.LINE:return new eI(t);case Ge.SQUARE:return new sI(t);case Ge.CIRCLE:return new iI(t);case Ge.POLYLINE:return new $E(t);case Ge.CARET:return new rI(t);case Ge.INK:return new Bv(t);case Ge.POLYGON:return new nI(t);case Ge.HIGHLIGHT:return new BE(t);case Ge.UNDERLINE:return new oI(t);case Ge.SQUIGGLY:return new aI(t);case Ge.STRIKEOUT:return new lI(t);case Ge.STAMP:return new HE(t);case Ge.FILEATTACHMENT:return new cI(t);default:return new qe(t)}}}var el,Gc,Xc,vd,Tb;const Wv=class Wv{constructor(t,{isRenderable:e=!1,ignoreBorder:s=!1,createQuadrilaterals:n=!1}={}){w(this,vd);w(this,el,null);w(this,Gc,!1);w(this,Xc,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(s)),n&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:s}){return!!(t!=null&&t.str||e!=null&&e.str||s!=null&&s.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return Wv._hasPopupData(this.data)}updateEdited(t){var s;if(!this.container)return;a(this,el)||b(this,el,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&A(this,vd,Tb).call(this,e),(s=a(this,Xc))==null||s.popup.updateEdited(t)}resetEdited(){var t;a(this,el)&&(A(this,vd,Tb).call(this,a(this,el).rect),(t=a(this,Xc))==null||t.popup.resetEdited(),b(this,el,null))}_createContainer(t){const{data:e,parent:{page:s,viewport:n}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),this instanceof Ol||(r.tabIndex=hf);const{style:o}=r;if(o.zIndex=this.parent.zIndex++,e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof Pb){const{rotation:v}=e;return!e.hasOwnCanvas&&v!==0&&this.setRotation(v,r),r}const{width:l,height:c}=this;if(!t&&e.borderStyle.width>0){o.borderWidth=`${e.borderStyle.width}px`;const v=e.borderStyle.horizontalCornerRadius,E=e.borderStyle.verticalCornerRadius;if(v>0||E>0){const C=`calc(${v}px * var(--total-scale-factor)) / calc(${E}px * var(--total-scale-factor))`;o.borderRadius=C}else if(this instanceof ME){const C=`calc(${l}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;o.borderRadius=C}switch(e.borderStyle.style){case ec.SOLID:o.borderStyle="solid";break;case ec.DASHED:o.borderStyle="dashed";break;case ec.BEVELED:Ot("Unimplemented border style: beveled");break;case ec.INSET:Ot("Unimplemented border style: inset");break;case ec.UNDERLINE:o.borderBottomStyle="solid";break}const S=e.borderColor||null;S?(b(this,Gc,!0),o.borderColor=At.makeHexColor(S[0]|0,S[1]|0,S[2]|0)):o.borderWidth=0}const h=At.normalizeRect([e.rect[0],s.view[3]-e.rect[1]+s.view[1],e.rect[2],s.view[3]-e.rect[3]+s.view[1]]),{pageWidth:u,pageHeight:f,pageX:p,pageY:g}=n.rawDims;o.left=`${100*(h[0]-p)/u}%`,o.top=`${100*(h[1]-g)/f}%`;const{rotation:_}=e;return e.hasOwnCanvas||_===0?(o.width=`${100*l/u}%`,o.height=`${100*c/f}%`):this.setRotation(_,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:n}=this.parent.viewport.rawDims;let{width:r,height:o}=this;t%180!==0&&([r,o]=[o,r]),e.style.width=`${100*r/s}%`,e.style.height=`${100*o/n}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,s,n)=>{const r=n.detail[e],o=r[0],l=r.slice(1);n.target.style[s]=Hw[`${o}_HTML`](l),this.annotationStorage.setValue(this.data.id,{[s]:Hw[`${o}_rgb`](l)})};return Gt(this,"_commonActions",{display:e=>{const{display:s}=e.detail,n=s%2===1;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:n,noPrint:s===1||s===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:s}=e.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const s=e.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(t,e){const s=this._commonActions;for(const n of Object.keys(e.detail)){const r=t[n]||s[n];r==null||r(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const s=this._commonActions;for(const[n,r]of Object.entries(e)){const o=s[n];if(o){const l={detail:{[n]:r},target:t};o(l),delete e[n]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,s,n,r]=this.data.rect.map(v=>Math.fround(v));if(t.length===8){const[v,E,S,C]=t.subarray(2,6);if(n===v&&r===E&&e===S&&s===C)return}const{style:o}=this.container;let l;if(a(this,Gc)){const{borderColor:v,borderWidth:E}=o;o.borderWidth=0,l=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${v}" stroke-width="${E}">`],this.container.classList.add("hasBorder")}const c=n-e,h=r-s,{svgFactory:u}=this,f=u.createElement("svg");f.classList.add("quadrilateralsContainer"),f.setAttribute("width",0),f.setAttribute("height",0);const p=u.createElement("defs");f.append(p);const g=u.createElement("clipPath"),_=`clippath_${this.data.id}`;g.setAttribute("id",_),g.setAttribute("clipPathUnits","objectBoundingBox"),p.append(g);for(let v=2,E=t.length;v<E;v+=8){const S=t[v],C=t[v+1],T=t[v+2],R=t[v+3],I=u.createElement("rect"),F=(T-e)/c,N=(r-C)/h,H=(S-T)/c,U=(C-R)/h;I.setAttribute("x",F),I.setAttribute("y",N),I.setAttribute("width",H),I.setAttribute("height",U),g.append(I),l==null||l.push(`<rect vector-effect="non-scaling-stroke" x="${F}" y="${N}" width="${H}" height="${U}"/>`)}a(this,Gc)&&(l.push("</g></svg>')"),o.backgroundImage=l.join("")),this.container.append(f),this.container.style.clipPath=`url(#${_})`}_createPopup(){const{data:t}=this,e=b(this,Xc,new Pb({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(e.render())}render(){ge("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const s=[];if(this._fieldObjects){const n=this._fieldObjects[t];if(n)for(const{page:r,id:o,exportValues:l}of n){if(r===-1||o===e)continue;const c=typeof l=="string"?l:null,h=document.querySelector(`[data-element-id="${o}"]`);if(h&&!Ll.has(h)){Ot(`_getElementsByName - element not allowed: ${o}`);continue}s.push({id:o,exportValue:c,domElement:h})}return s}for(const n of document.getElementsByName(t)){const{exportValue:r}=n,o=n.getAttribute("data-element-id");o!==e&&Ll.has(n)&&s.push({id:o,exportValue:r,domElement:n})}return s}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};el=new WeakMap,Gc=new WeakMap,Xc=new WeakMap,vd=new WeakSet,Tb=function(t){const{container:{style:e},data:{rect:s,rotation:n},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:o,pageX:l,pageY:c}}}}=this;s==null||s.splice(0,4,...t),e.left=`${100*(t[0]-l)/r}%`,e.top=`${100*(o-t[3]+c)/o}%`,n===0?(e.width=`${100*(t[2]-t[0])/r}%`,e.height=`${100*(t[3]-t[1])/o}%`):this.setRotation(n)};let qe=Wv;var xi,ga,kE,IE;class RE extends qe{constructor(e,s=null){super(e,{isRenderable:!0,ignoreBorder:!!(s!=null&&s.ignoreBorder),createQuadrilaterals:!0});w(this,xi);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:s}=this,n=document.createElement("a");n.setAttribute("data-element-id",e.id);let r=!1;return e.url?(s.addLinkAttributes(n,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(n,e.action),r=!0):e.attachment?(A(this,xi,kE).call(this,n,e.attachment,e.attachmentDest),r=!0):e.setOCGState?(A(this,xi,IE).call(this,n,e.setOCGState),r=!0):e.dest?(this._bindLink(n,e.dest),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(n,e),r=!0),e.resetForm?(this._bindResetFormAction(n,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(n,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(n),this.container}_bindLink(e,s){e.href=this.linkService.getDestinationHash(s),e.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&A(this,xi,ga).call(this)}_bindNamedAction(e,s){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(s),!1),A(this,xi,ga).call(this)}_bindJSAction(e,s){e.href=this.linkService.getAnchorUrl("");const n=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(s.actions)){const o=n.get(r);o&&(e[o]=()=>{var l;return(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:r}}),!1})}e.onclick||(e.onclick=()=>!1),A(this,xi,ga).call(this)}_bindResetFormAction(e,s){const n=e.onclick;if(n||(e.href=this.linkService.getAnchorUrl("")),A(this,xi,ga).call(this),!this._fieldObjects){Ot('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),n||(e.onclick=()=>!1);return}e.onclick=()=>{var f;n==null||n();const{fields:r,refs:o,include:l}=s,c=[];if(r.length!==0||o.length!==0){const p=new Set(o);for(const g of r){const _=this._fieldObjects[g]||[];for(const{id:v}of _)p.add(v)}for(const g of Object.values(this._fieldObjects))for(const _ of g)p.has(_.id)===l&&c.push(_)}else for(const p of Object.values(this._fieldObjects))c.push(...p);const h=this.annotationStorage,u=[];for(const p of c){const{id:g}=p;switch(u.push(g),p.type){case"text":{const v=p.defaultValue||"";h.setValue(g,{value:v});break}case"checkbox":case"radiobutton":{const v=p.defaultValue===p.exportValues;h.setValue(g,{value:v});break}case"combobox":case"listbox":{const v=p.defaultValue||"";h.setValue(g,{value:v});break}default:continue}const _=document.querySelector(`[data-element-id="${g}"]`);if(_){if(!Ll.has(_)){Ot(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;_.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((f=this.linkService.eventBus)==null||f.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:u,name:"ResetForm"}})),!1}}}xi=new WeakSet,ga=function(){this.container.setAttribute("data-internal-link","")},kE=function(e,s,n=null){e.href=this.linkService.getAnchorUrl(""),s.description&&(e.title=s.description),e.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(s.content,s.filename,n),!1},A(this,xi,ga).call(this)},IE=function(e,s){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(s),!1),A(this,xi,ga).call(this)};class Xk extends qe{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class Ol extends qe{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return Es.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,s,n,r){s.includes("mouse")?t.addEventListener(s,o=>{var l;(l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):t.addEventListener(s,o=>{var l;if(s==="blur"){if(!e.focused||!o.relatedTarget)return;e.focused=!1}else if(s==="focus"){if(e.focused)return;e.focused=!0}r&&((l=this.linkService.eventBus)==null||l.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:n,value:r(o)}}))})}_setEventListeners(t,e,s,n){var r,o,l;for(const[c,h]of s)(h==="Action"||(r=this.data.actions)!=null&&r[h])&&((h==="Focus"||h==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,c,h,n),h==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(t,e,"blur","Blur",null):h==="Blur"&&!((l=this.data.actions)!=null&&l.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":At.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,n=this.data.defaultAppearanceData.fontSize||Gk,r=t.style;let o;const l=2,c=h=>Math.round(10*h)/10;if(this.data.multiLine){const h=Math.abs(this.data.rect[3]-this.data.rect[1]-l),u=Math.round(h/(Em*n))||1,f=h/u;o=Math.min(n,c(f/Em))}else{const h=Math.abs(this.data.rect[3]-this.data.rect[1]-l);o=Math.min(n,c(h/Em))}r.fontSize=`calc(${o}px * var(--total-scale-factor))`,r.color=At.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class Kk extends Ol{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,s,n){const r=this.annotationStorage;for(const o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=s),r.setValue(o.id,{[n]:s})}render(){var n,r;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const o=t.getValue(e,{value:this.data.fieldValue});let l=o.value||"";const c=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;c&&l.length>c&&(l=l.slice(0,c));let h=o.formattedValue||((n=this.data.textContent)==null?void 0:n.join(`
`))||null;h&&this.data.comb&&(h=h.replaceAll(/\s+/g,""));const u={userValue:l,formattedValue:h,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=h??l,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",h??l),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),Ll.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=hf,this._setRequired(s,this.data.required),c&&(s.maxLength=c),s.addEventListener("input",p=>{t.setValue(e,{value:p.target.value}),this.setPropertyOnSiblings(s,"value",p.target.value,"value"),u.formattedValue=null}),s.addEventListener("resetform",p=>{const g=this.data.defaultFieldValue??"";s.value=u.userValue=g,u.formattedValue=null});let f=p=>{const{formattedValue:g}=u;g!=null&&(p.target.value=g),p.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",g=>{var v;if(u.focused)return;const{target:_}=g;u.userValue&&(_.value=u.userValue),u.lastCommittedValue=_.value,u.commitKey=1,(v=this.data.actions)!=null&&v.Focus||(u.focused=!0)}),s.addEventListener("updatefromsandbox",g=>{this.showElementAndHideCanvas(g.target);const _={value(v){u.userValue=v.detail.value??"",t.setValue(e,{value:u.userValue.toString()}),v.target.value=u.userValue},formattedValue(v){const{formattedValue:E}=v.detail;u.formattedValue=E,E!=null&&v.target!==document.activeElement&&(v.target.value=E),t.setValue(e,{formattedValue:E})},selRange(v){v.target.setSelectionRange(...v.detail.selRange)},charLimit:v=>{var T;const{charLimit:E}=v.detail,{target:S}=v;if(E===0){S.removeAttribute("maxLength");return}S.setAttribute("maxLength",E);let C=u.userValue;!C||C.length<=E||(C=C.slice(0,E),S.value=u.userValue=C,t.setValue(e,{value:C}),(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:C,willCommit:!0,commitKey:1,selStart:S.selectionStart,selEnd:S.selectionEnd}}))}};this._dispatchEventFromSandbox(_,g)}),s.addEventListener("keydown",g=>{var E;u.commitKey=1;let _=-1;if(g.key==="Escape"?_=0:g.key==="Enter"&&!this.data.multiLine?_=2:g.key==="Tab"&&(u.commitKey=3),_===-1)return;const{value:v}=g.target;u.lastCommittedValue!==v&&(u.lastCommittedValue=v,u.userValue=v,(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:v,willCommit:!0,commitKey:_,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}))});const p=f;f=null,s.addEventListener("blur",g=>{var v,E;if(!u.focused||!g.relatedTarget)return;(v=this.data.actions)!=null&&v.Blur||(u.focused=!1);const{value:_}=g.target;u.userValue=_,u.lastCommittedValue!==_&&((E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:_,willCommit:!0,commitKey:u.commitKey,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}})),p(g)}),(r=this.data.actions)!=null&&r.Keystroke&&s.addEventListener("beforeinput",g=>{var I;u.lastCommittedValue=null;const{data:_,target:v}=g,{value:E,selectionStart:S,selectionEnd:C}=v;let T=S,R=C;switch(g.inputType){case"deleteWordBackward":{const F=E.substring(0,S).match(/\w*[^\w]*$/);F&&(T-=F[0].length);break}case"deleteWordForward":{const F=E.substring(S).match(/^[^\w]*\w*/);F&&(R+=F[0].length);break}case"deleteContentBackward":S===C&&(T-=1);break;case"deleteContentForward":S===C&&(R+=1);break}g.preventDefault(),(I=this.linkService.eventBus)==null||I.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:E,change:_||"",willCommit:!1,selStart:T,selEnd:R}})}),this._setEventListeners(s,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],g=>g.target.value)}if(f&&s.addEventListener("blur",f),this.data.comb){const g=(this.data.rect[2]-this.data.rect[0])/c;s.classList.add("comb"),s.style.letterSpacing=`calc(${g}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Yk extends Ol{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class Qk extends Ol{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,s=e.id;let n=t.getValue(s,{value:e.exportValue===e.fieldValue}).value;typeof n=="string"&&(n=n!=="Off",t.setValue(s,{value:n})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return Ll.add(r),r.setAttribute("data-element-id",s),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,n&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=hf,r.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const h of this._getElementsByName(l,s)){const u=c&&h.exportValue===e.exportValue;h.domElement&&(h.domElement.checked=u),t.setValue(h.id,{value:u})}t.setValue(s,{value:c})}),r.addEventListener("resetform",o=>{const l=e.defaultFieldValue||"Off";o.target.checked=l===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{const l={value(c){c.target.checked=c.detail.value!=="Off",t.setValue(s,{value:c.target.checked})}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class ME extends Ol{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,s=e.id;let n=t.getValue(s,{value:e.fieldValue===e.buttonValue}).value;if(typeof n=="string"&&(n=n!==e.buttonValue,t.setValue(s,{value:n})),n)for(const o of this._getElementsByName(e.fieldName,s))t.setValue(o.id,{value:!1});const r=document.createElement("input");if(Ll.add(r),r.setAttribute("data-element-id",s),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,n&&r.setAttribute("checked",!0),r.tabIndex=hf,r.addEventListener("change",o=>{const{name:l,checked:c}=o.target;for(const h of this._getElementsByName(l,s))t.setValue(h.id,{value:!1});t.setValue(s,{value:c})}),r.addEventListener("resetform",o=>{const l=e.defaultFieldValue;o.target.checked=l!=null&&l===e.buttonValue}),this.enableScripting&&this.hasJSActions){const o=e.buttonValue;r.addEventListener("updatefromsandbox",l=>{const c={value:h=>{const u=o===h.detail.value;for(const f of this._getElementsByName(h.target.name)){const p=u&&f.id===s;f.domElement&&(f.domElement.checked=p),t.setValue(f.id,{value:p})}}};this._dispatchEventFromSandbox(c,l)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],l=>l.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Jk extends RE{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),t}}class Zk extends Ol{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,s=t.getValue(e,{value:this.data.fieldValue}),n=document.createElement("select");Ll.add(n),n.setAttribute("data-element-id",e),n.disabled=this.data.readOnly,this._setRequired(n,this.data.required),n.name=this.data.fieldName,n.tabIndex=hf;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(n.size=this.data.options.length,this.data.multiSelect&&(n.multiple=!0)),n.addEventListener("resetform",u=>{const f=this.data.defaultFieldValue;for(const p of n.options)p.selected=p.value===f});for(const u of this.data.options){const f=document.createElement("option");f.textContent=u.displayValue,f.value=u.exportValue,s.value.includes(u.exportValue)&&(f.setAttribute("selected",!0),r=!1),n.append(f)}let o=null;if(r){const u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),n.prepend(u),o=()=>{u.remove(),n.removeEventListener("input",o),o=null},n.addEventListener("input",o)}const l=u=>{const f=u?"value":"textContent",{options:p,multiple:g}=n;return g?Array.prototype.filter.call(p,_=>_.selected).map(_=>_[f]):p.selectedIndex===-1?null:p[p.selectedIndex][f]};let c=l(!1);const h=u=>{const f=u.target.options;return Array.prototype.map.call(f,p=>({displayValue:p.textContent,exportValue:p.value}))};return this.enableScripting&&this.hasJSActions?(n.addEventListener("updatefromsandbox",u=>{const f={value(p){o==null||o();const g=p.detail.value,_=new Set(Array.isArray(g)?g:[g]);for(const v of n.options)v.selected=_.has(v.value);t.setValue(e,{value:l(!0)}),c=l(!1)},multipleSelection(p){n.multiple=!0},remove(p){const g=n.options,_=p.detail.remove;g[_].selected=!1,n.remove(_),g.length>0&&Array.prototype.findIndex.call(g,E=>E.selected)===-1&&(g[0].selected=!0),t.setValue(e,{value:l(!0),items:h(p)}),c=l(!1)},clear(p){for(;n.length!==0;)n.remove(0);t.setValue(e,{value:null,items:[]}),c=l(!1)},insert(p){const{index:g,displayValue:_,exportValue:v}=p.detail.insert,E=n.children[g],S=document.createElement("option");S.textContent=_,S.value=v,E?E.before(S):n.append(S),t.setValue(e,{value:l(!0),items:h(p)}),c=l(!1)},items(p){const{items:g}=p.detail;for(;n.length!==0;)n.remove(0);for(const _ of g){const{displayValue:v,exportValue:E}=_,S=document.createElement("option");S.textContent=v,S.value=E,n.append(S)}n.options.length>0&&(n.options[0].selected=!0),t.setValue(e,{value:l(!0),items:h(p)}),c=l(!1)},indices(p){const g=new Set(p.detail.indices);for(const _ of p.target.options)_.selected=g.has(_.index);t.setValue(e,{value:l(!0)}),c=l(!1)},editable(p){p.target.disabled=!p.detail.editable}};this._dispatchEventFromSandbox(f,u)}),n.addEventListener("input",u=>{var g;const f=l(!0),p=l(!1);t.setValue(e,{value:f}),u.preventDefault(),(g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:c,change:p,changeEx:f,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(n,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):n.addEventListener("input",function(u){t.setValue(e,{value:l(!0)})}),this.data.combo&&this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class Pb extends qe{constructor(t){const{data:e,elements:s}=t;super(t,{isRenderable:qe._hasPopupData(e)}),this.elements=s,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new tI({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const s of this.elements)s.popup=t,s.container.ariaHasPopup="dialog",e.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(s=>`${Iv}${s}`).join(",")),this.container}}var Kc,ig,ng,Yc,Qc,Fe,xr,Jc,_d,yd,Zc,Cr,en,Tr,wd,Pr,Ad,sl,il,me,lp,Rb,LE,DE,OE,NE,cp,hp,kb;class tI{constructor({container:t,color:e,elements:s,titleObj:n,modificationDate:r,contentsObj:o,richText:l,parent:c,rect:h,parentRect:u,open:f}){w(this,me);w(this,Kc,A(this,me,OE).bind(this));w(this,ig,A(this,me,kb).bind(this));w(this,ng,A(this,me,hp).bind(this));w(this,Yc,A(this,me,cp).bind(this));w(this,Qc,null);w(this,Fe,null);w(this,xr,null);w(this,Jc,null);w(this,_d,null);w(this,yd,null);w(this,Zc,null);w(this,Cr,!1);w(this,en,null);w(this,Tr,null);w(this,wd,null);w(this,Pr,null);w(this,Ad,null);w(this,sl,null);w(this,il,!1);var p;b(this,Fe,t),b(this,Ad,n),b(this,xr,o),b(this,Pr,l),b(this,yd,c),b(this,Qc,e),b(this,wd,h),b(this,Zc,u),b(this,_d,s),b(this,Jc,Dv.toDateObject(r)),this.trigger=s.flatMap(g=>g.getElementsToTriggerPopup());for(const g of this.trigger)g.addEventListener("click",a(this,Yc)),g.addEventListener("mouseenter",a(this,ng)),g.addEventListener("mouseleave",a(this,ig)),g.classList.add("popupTriggerArea");for(const g of s)(p=g.container)==null||p.addEventListener("keydown",a(this,Kc));a(this,Fe).hidden=!0,f&&A(this,me,cp).call(this)}render(){if(a(this,en))return;const t=b(this,en,document.createElement("div"));if(t.className="popup",a(this,Qc)){const r=t.style.outlineColor=At.makeHexColor(...a(this,Qc));t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`}const e=document.createElement("span");e.className="header";const s=document.createElement("h1");if(e.append(s),{dir:s.dir,str:s.textContent}=a(this,Ad),t.append(e),a(this,Jc)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:a(this,Jc).valueOf()})),e.append(r)}const n=a(this,me,lp);if(n)PE.render({xfaHtml:n,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(a(this,xr));t.append(r)}a(this,Fe).append(t)}_formatContents({str:t,dir:e}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=e;const n=t.split(/(?:\r\n?|\n)/);for(let r=0,o=n.length;r<o;++r){const l=n[r];s.append(document.createTextNode(l)),r<o-1&&s.append(document.createElement("br"))}return s}updateEdited({rect:t,popupContent:e}){var s;a(this,sl)||b(this,sl,{contentsObj:a(this,xr),richText:a(this,Pr)}),t&&b(this,Tr,null),e&&(b(this,Pr,A(this,me,DE).call(this,e)),b(this,xr,null)),(s=a(this,en))==null||s.remove(),b(this,en,null)}resetEdited(){var t;a(this,sl)&&({contentsObj:Bs(this,xr)._,richText:Bs(this,Pr)._}=a(this,sl),b(this,sl,null),(t=a(this,en))==null||t.remove(),b(this,en,null),b(this,Tr,null))}forceHide(){b(this,il,this.isVisible),a(this,il)&&(a(this,Fe).hidden=!0)}maybeShow(){a(this,il)&&(a(this,en)||A(this,me,hp).call(this),b(this,il,!1),a(this,Fe).hidden=!1)}get isVisible(){return a(this,Fe).hidden===!1}}Kc=new WeakMap,ig=new WeakMap,ng=new WeakMap,Yc=new WeakMap,Qc=new WeakMap,Fe=new WeakMap,xr=new WeakMap,Jc=new WeakMap,_d=new WeakMap,yd=new WeakMap,Zc=new WeakMap,Cr=new WeakMap,en=new WeakMap,Tr=new WeakMap,wd=new WeakMap,Pr=new WeakMap,Ad=new WeakMap,sl=new WeakMap,il=new WeakMap,me=new WeakSet,lp=function(){const t=a(this,Pr),e=a(this,xr);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&a(this,Pr).html||null},Rb=function(){var t,e,s;return((s=(e=(t=a(this,me,lp))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:s.fontSize)||0},LE=function(){var t,e,s;return((s=(e=(t=a(this,me,lp))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:s.color)||null},DE=function(t){const e=[],s={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},n={style:{color:a(this,me,LE),fontSize:a(this,me,Rb)?`calc(${a(this,me,Rb)}px * var(--total-scale-factor))`:""}};for(const r of t.split(`
`))e.push({name:"span",value:r,attributes:n});return s},OE=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&a(this,Cr))&&A(this,me,cp).call(this)},NE=function(){if(a(this,Tr)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:s,pageX:n,pageY:r}}}=a(this,yd);let o=!!a(this,Zc),l=o?a(this,Zc):a(this,wd);for(const _ of a(this,_d))if(!l||At.intersect(_.data.rect,l)!==null){l=_.data.rect,o=!0;break}const c=At.normalizeRect([l[0],t[3]-l[1]+t[1],l[2],t[3]-l[3]+t[1]]),u=o?l[2]-l[0]+5:0,f=c[0]+u,p=c[1];b(this,Tr,[100*(f-n)/e,100*(p-r)/s]);const{style:g}=a(this,Fe);g.left=`${a(this,Tr)[0]}%`,g.top=`${a(this,Tr)[1]}%`},cp=function(){b(this,Cr,!a(this,Cr)),a(this,Cr)?(A(this,me,hp).call(this),a(this,Fe).addEventListener("click",a(this,Yc)),a(this,Fe).addEventListener("keydown",a(this,Kc))):(A(this,me,kb).call(this),a(this,Fe).removeEventListener("click",a(this,Yc)),a(this,Fe).removeEventListener("keydown",a(this,Kc)))},hp=function(){a(this,en)||this.render(),this.isVisible?a(this,Cr)&&a(this,Fe).classList.add("focused"):(A(this,me,NE).call(this),a(this,Fe).hidden=!1,a(this,Fe).style.zIndex=parseInt(a(this,Fe).style.zIndex)+1e3)},kb=function(){a(this,Fe).classList.remove("focused"),!(a(this,Cr)||!this.isVisible)&&(a(this,Fe).hidden=!0,a(this,Fe).style.zIndex=parseInt(a(this,Fe).style.zIndex)-1e3)};class FE extends qe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Dt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const s=document.createElement("span");s.textContent=e,t.append(s)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Ed;class eI extends qe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,Ed,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:s,height:n}=this,r=this.svgFactory.create(s,n,!0),o=b(this,Ed,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),o.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),o.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),o.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),o.setAttribute("stroke-width",e.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Ed)}addHighlightArea(){this.container.classList.add("highlightArea")}}Ed=new WeakMap;var Sd;class sI extends qe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,Sd,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:s,height:n}=this,r=this.svgFactory.create(s,n,!0),o=e.borderStyle.width,l=b(this,Sd,this.svgFactory.createElement("svg:rect"));return l.setAttribute("x",o/2),l.setAttribute("y",o/2),l.setAttribute("width",s-o),l.setAttribute("height",n-o),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Sd)}addHighlightArea(){this.container.classList.add("highlightArea")}}Sd=new WeakMap;var xd;class iI extends qe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,xd,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:s,height:n}=this,r=this.svgFactory.create(s,n,!0),o=e.borderStyle.width,l=b(this,xd,this.svgFactory.createElement("svg:ellipse"));return l.setAttribute("cx",s/2),l.setAttribute("cy",n/2),l.setAttribute("rx",s/2-o/2),l.setAttribute("ry",n/2-o/2),l.setAttribute("stroke-width",o||1),l.setAttribute("stroke","transparent"),l.setAttribute("fill","transparent"),r.append(l),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,xd)}addHighlightArea(){this.container.classList.add("highlightArea")}}xd=new WeakMap;var Cd;class $E extends qe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,Cd,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:s,borderStyle:n,popupRef:r},width:o,height:l}=this;if(!s)return this.container;const c=this.svgFactory.create(o,l,!0);let h=[];for(let f=0,p=s.length;f<p;f+=2){const g=s[f]-e[0],_=e[3]-s[f+1];h.push(`${g},${_}`)}h=h.join(" ");const u=b(this,Cd,this.svgFactory.createElement(this.svgElementName));return u.setAttribute("points",h),u.setAttribute("stroke-width",n.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),c.append(u),this.container.append(c),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return a(this,Cd)}addHighlightArea(){this.container.classList.add("highlightArea")}}Cd=new WeakMap;class nI extends $E{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class rI extends qe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var Td,nl,Pd,Ib;class Bv extends qe{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,Pd);w(this,Td,null);w(this,nl,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Dt.HIGHLIGHT:Dt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:s,inkLists:n,borderStyle:r,popupRef:o}}=this,{transform:l,width:c,height:h}=A(this,Pd,Ib).call(this,s,e),u=this.svgFactory.create(c,h,!0),f=b(this,Td,this.svgFactory.createElement("svg:g"));u.append(f),f.setAttribute("stroke-width",r.width||1),f.setAttribute("stroke-linecap","round"),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-miterlimit",10),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),f.setAttribute("transform",l);for(let p=0,g=n.length;p<g;p++){const _=this.svgFactory.createElement(this.svgElementName);a(this,nl).push(_),_.setAttribute("points",n[p].join(",")),f.append(_)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(u),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:s,points:n,rect:r}=e,o=a(this,Td);if(s>=0&&o.setAttribute("stroke-width",s||1),n)for(let l=0,c=a(this,nl).length;l<c;l++)a(this,nl)[l].setAttribute("points",n[l].join(","));if(r){const{transform:l,width:c,height:h}=A(this,Pd,Ib).call(this,this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${c} ${h}`),o.setAttribute("transform",l)}}getElementsToTriggerPopup(){return a(this,nl)}addHighlightArea(){this.container.classList.add("highlightArea")}}Td=new WeakMap,nl=new WeakMap,Pd=new WeakSet,Ib=function(e,s){switch(e){case 90:return{transform:`rotate(90) translate(${-s[0]},${s[1]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};case 180:return{transform:`rotate(180) translate(${-s[2]},${s[1]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]};case 270:return{transform:`rotate(270) translate(${-s[2]},${s[3]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};default:return{transform:`translate(${-s[0]},${s[3]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]}}};class BE extends qe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Dt.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class oI extends qe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class aI extends qe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class lI extends qe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class HE extends qe{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Dt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var Rd,kd,Mb;class cI extends qe{constructor(e){var n;super(e,{isRenderable:!0});w(this,kd);w(this,Rd,null);const{file:s}=this.data;this.filename=s.filename,this.content=s.content,(n=this.linkService.eventBus)==null||n.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:s}=this;let n;s.hasAppearance||s.fillAlpha===0?n=document.createElement("div"):(n=document.createElement("img"),n.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(n.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),n.addEventListener("dblclick",A(this,kd,Mb).bind(this)),b(this,Rd,n);const{isMac:r}=Es.platform;return e.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&A(this,kd,Mb).call(this)}),!s.popupRef&&this.hasPopupData?this._createPopup():n.classList.add("popupTriggerArea"),e.append(n),e}getElementsToTriggerPopup(){return a(this,Rd)}addHighlightArea(){this.container.classList.add("highlightArea")}}Rd=new WeakMap,kd=new WeakSet,Mb=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var Id,rl,Co,Md,Qo,Db,Ob;const Gv=class Gv{constructor({div:t,accessibilityManager:e,annotationCanvasMap:s,annotationEditorUIManager:n,page:r,viewport:o,structTreeLayer:l}){w(this,Qo);w(this,Id,null);w(this,rl,null);w(this,Co,new Map);w(this,Md,null);this.div=t,b(this,Id,e),b(this,rl,s),b(this,Md,l||null),this.page=r,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=n}hasEditableAnnotations(){return a(this,Co).size>0}async render(t){var o;const{annotations:e}=t,s=this.div;Il(s,this.viewport);const n=new Map,r={data:null,layer:s,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Hp,annotationStorage:t.annotationStorage||new Nv,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const l of e){if(l.noHTML)continue;const c=l.annotationType===Ge.POPUP;if(c){const f=n.get(l.id);if(!f)continue;r.elements=f}else if(l.rect[2]===l.rect[0]||l.rect[3]===l.rect[1])continue;r.data=l;const h=jw.create(r);if(!h.isRenderable)continue;if(!c&&l.popupRef){const f=n.get(l.popupRef);f?f.push(h):n.set(l.popupRef,[h])}const u=h.render();l.hidden&&(u.style.visibility="hidden"),await A(this,Qo,Db).call(this,u,l.id),h._isEditable&&(a(this,Co).set(h.data.id,h),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(h))}A(this,Qo,Ob).call(this)}async addLinkAnnotations(t,e){const s={data:null,layer:this.div,linkService:e,svgFactory:new Hp,parent:this};for(const n of t){n.borderStyle||(n.borderStyle=Gv._defaultBorderStyle),s.data=n;const r=jw.create(s);if(!r.isRenderable)continue;const o=r.render();await A(this,Qo,Db).call(this,o,n.id)}}update({viewport:t}){const e=this.div;this.viewport=t,Il(e,{rotation:t.rotation}),A(this,Qo,Ob).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(a(this,Co).values())}getEditableAnnotation(t){return a(this,Co).get(t)}static get _defaultBorderStyle(){return Gt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:ec.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};Id=new WeakMap,rl=new WeakMap,Co=new WeakMap,Md=new WeakMap,Qo=new WeakSet,Db=async function(t,e){var o,l;const s=t.firstChild||t,n=s.id=`${Iv}${e}`,r=await((o=a(this,Md))==null?void 0:o.getAriaAttributes(n));if(r)for(const[c,h]of r)s.setAttribute(c,h);this.div.append(t),(l=a(this,Id))==null||l.moveElementInDOM(this.div,t,s,!1)},Ob=function(){var e;if(!a(this,rl))return;const t=this.div;for(const[s,n]of a(this,rl)){const r=t.querySelector(`[data-annotation-id="${s}"]`);if(!r)continue;n.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(n):o.classList.contains("annotationContent")?o.after(n):o.before(n):r.append(n);const l=a(this,Co).get(s);l&&(l._hasNoCanvas?((e=this._annotationEditorUIManager)==null||e.setMissingCanvas(s,r.id,n),l._hasNoCanvas=!1):l.canvas=n)}a(this,rl).clear()};let Lb=Gv;const Bf=/\r\n?|\n/g;var sn,pi,Ld,ol,gi,Ye,jE,VE,UE,up,Vr,dp,fp,zE,Fb,qE;const we=class we extends Se{constructor(e){super({...e,name:"freeTextEditor"});w(this,Ye);w(this,sn);w(this,pi,"");w(this,Ld,`${this.id}-editor`);w(this,ol,null);w(this,gi);b(this,sn,e.color||we._defaultColor||Se._defaultLineColor),b(this,gi,e.fontSize||we._defaultFontSize)}static get _keyboardManager(){const e=we.prototype,s=o=>o.isEmpty(),n=Ml.TRANSLATE_SMALL,r=Ml.TRANSLATE_BIG;return Gt(this,"_keyboardManager",new lf([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-n,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:s}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[n,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:s}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-n],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:s}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,n],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:s}]]))}static initialize(e,s){Se.initialize(e,s);const n=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(n.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,s){switch(e){case Yt.FREETEXT_SIZE:we._defaultFontSize=s;break;case Yt.FREETEXT_COLOR:we._defaultColor=s;break}}updateParams(e,s){switch(e){case Yt.FREETEXT_SIZE:A(this,Ye,jE).call(this,s);break;case Yt.FREETEXT_COLOR:A(this,Ye,VE).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[Yt.FREETEXT_SIZE,we._defaultFontSize],[Yt.FREETEXT_COLOR,we._defaultColor||Se._defaultLineColor]]}get propertiesToUpdate(){return[[Yt.FREETEXT_SIZE,a(this,gi)],[Yt.FREETEXT_COLOR,a(this,sn)]]}_translateEmpty(e,s){this._uiManager.translateSelectedEditors(e,s,!0)}getInitialTranslation(){const e=this.parentScale;return[-we._internalPadding*e,-(we._internalPadding+a(this,gi))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(!super.enableEditMode())return!1;this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),b(this,ol,new AbortController);const e=this._uiManager.combinedSignal(a(this,ol));return this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e}),!0}disableEditMode(){var e;return super.disableEditMode()?(this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",a(this,Ld)),this._isDraggable=!0,(e=a(this,ol))==null||e.abort(),b(this,ol,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"),!0):!1}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var s;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(s=this._initialOptions)!=null&&s.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=a(this,pi),s=b(this,pi,A(this,Ye,UE).call(this).trimEnd());if(e===s)return;const n=r=>{if(b(this,pi,r),!r){this.remove();return}A(this,Ye,fp).call(this),this._uiManager.rebuild(this),A(this,Ye,up).call(this)};this.addCommands({cmd:()=>{n(s)},undo:()=>{n(e)},mustExec:!1}),A(this,Ye,up).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){we._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}get canChangeContent(){return!0}render(){if(this.div)return this.div;let e,s;(this._isCopy||this.annotationElementId)&&(e=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",a(this,Ld)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:n}=this.editorDiv;if(n.fontSize=`calc(${a(this,gi)}px * var(--total-scale-factor))`,n.color=a(this,sn),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),this._isCopy||this.annotationElementId){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:l}=this._initialData;let[c,h]=this.getInitialTranslation();[c,h]=this.pageTranslationToScreen(c,h);const[u,f]=this.pageDimensions,[p,g]=this.pageTranslation;let _,v;switch(this.rotation){case 0:_=e+(l[0]-p)/u,v=s+this.height-(l[1]-g)/f;break;case 90:_=e+(l[0]-p)/u,v=s-(l[1]-g)/f,[c,h]=[h,-c];break;case 180:_=e-this.width+(l[0]-p)/u,v=s-(l[1]-g)/f,[c,h]=[-c,-h];break;case 270:_=e+(l[0]-p-this.height*f)/u,v=s+(l[1]-g-this.width*u)/f,[c,h]=[-h,c];break}this.setAt(_*r,v*o,c,h)}else this._moveAfterPaste(e,s);A(this,Ye,fp).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var _,v,E;const s=e.clipboardData||window.clipboardData,{types:n}=s;if(n.length===1&&n[0]==="text/plain")return;e.preventDefault();const r=A(_=we,Vr,Fb).call(_,s.getData("text")||"").replaceAll(Bf,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const l=o.getRangeAt(0);if(!r.includes(`
`)){l.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:h}=l,u=[],f=[];if(c.nodeType===Node.TEXT_NODE){const S=c.parentElement;if(f.push(c.nodeValue.slice(h).replaceAll(Bf,"")),S!==this.editorDiv){let C=u;for(const T of this.editorDiv.childNodes){if(T===S){C=f;continue}C.push(A(v=we,Vr,dp).call(v,T))}}u.push(c.nodeValue.slice(0,h).replaceAll(Bf,""))}else if(c===this.editorDiv){let S=u,C=0;for(const T of this.editorDiv.childNodes)C++===h&&(S=f),S.push(A(E=we,Vr,dp).call(E,T))}b(this,pi,`${u.join(`
`)}${r}${f.join(`
`)}`),A(this,Ye,fp).call(this);const p=new Range;let g=Math.sumPrecise(u.map(S=>S.length));for(const{firstChild:S}of this.editorDiv.childNodes)if(S.nodeType===Node.TEXT_NODE){const C=S.nodeValue.length;if(g<=C){p.setStart(S,g),p.setEnd(S,g);break}g-=C}o.removeAllRanges(),o.addRange(p)}get contentDiv(){return this.editorDiv}static async deserialize(e,s,n){var l;let r=null;if(e instanceof FE){const{data:{defaultAppearanceData:{fontSize:c,fontColor:h},rect:u,rotation:f,id:p,popupRef:g},textContent:_,textPosition:v,parent:{page:{pageNumber:E}}}=e;if(!_||_.length===0)return null;r=e={annotationType:Dt.FREETEXT,color:Array.from(h),fontSize:c,value:_.join(`
`),position:v,pageIndex:E-1,rect:u.slice(0),rotation:f,id:p,deleted:!1,popupRef:g}}const o=await super.deserialize(e,s,n);return b(o,gi,e.fontSize),b(o,sn,At.makeHexColor(...e.color)),b(o,pi,A(l=we,Vr,Fb).call(l,e.value)),o.annotationElementId=e.id||null,o._initialData=r,o}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=we._internalPadding*this.parentScale,n=this.getRect(s,s),r=Se._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:a(this,sn)),o={annotationType:Dt.FREETEXT,color:r,fontSize:a(this,gi),value:A(this,Ye,zE).call(this),pageIndex:this.pageIndex,rect:n,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(o.isCopy=!0,o):this.annotationElementId&&!A(this,Ye,qE).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(e){const s=super.renderAnnotationElement(e);if(this.deleted)return s;const{style:n}=s;n.fontSize=`calc(${a(this,gi)}px * var(--total-scale-factor))`,n.color=a(this,sn),s.replaceChildren();for(const o of a(this,pi).split(`
`)){const l=document.createElement("div");l.append(o?document.createTextNode(o):document.createElement("br")),s.append(l)}const r=we._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(r,r),popupContent:a(this,pi)}),s}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};sn=new WeakMap,pi=new WeakMap,Ld=new WeakMap,ol=new WeakMap,gi=new WeakMap,Ye=new WeakSet,jE=function(e){const s=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-a(this,gi))*this.parentScale),b(this,gi,r),A(this,Ye,up).call(this)},n=a(this,gi);this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Yt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},VE=function(e){const s=r=>{b(this,sn,this.editorDiv.style.color=r)},n=a(this,sn);this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Yt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},UE=function(){var n;const e=[];this.editorDiv.normalize();let s=null;for(const r of this.editorDiv.childNodes)(s==null?void 0:s.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(e.push(A(n=we,Vr,dp).call(n,r)),s=r);return e.join(`
`)},up=function(){const[e,s]=this.parentDimensions;let n;if(this.isAttachedToDOM)n=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,l=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),n=o.getBoundingClientRect(),o.remove(),o.style.display=l,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=n.width/e,this.height=n.height/s):(this.width=n.height/e,this.height=n.width/s),this.fixAndSetPosition()},Vr=new WeakSet,dp=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Bf,"")},fp=function(){if(this.editorDiv.replaceChildren(),!!a(this,pi))for(const e of a(this,pi).split(`
`)){const s=document.createElement("div");s.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(s)}},zE=function(){return a(this,pi).replaceAll(" "," ")},Fb=function(e){return e.replaceAll(" "," ")},qE=function(e){const{value:s,fontSize:n,color:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||e.value!==s||e.fontSize!==n||e.color.some((l,c)=>l!==r[c])||e.pageIndex!==o},w(we,Vr),Z(we,"_freeTextDefaultContent",""),Z(we,"_internalPadding",0),Z(we,"_defaultColor",null),Z(we,"_defaultFontSize",10),Z(we,"_type","freetext"),Z(we,"_editorType",Dt.FREETEXT);let Nb=we;class ut{toSVGPath(){ge("Abstract method `toSVGPath` must be implemented.")}get box(){ge("Abstract getter `box` must be implemented.")}serialize(t,e){ge("Abstract method `serialize` must be implemented.")}static _rescale(t,e,s,n,r,o){o||(o=new Float32Array(t.length));for(let l=0,c=t.length;l<c;l+=2)o[l]=e+t[l]*n,o[l+1]=s+t[l+1]*r;return o}static _rescaleAndSwap(t,e,s,n,r,o){o||(o=new Float32Array(t.length));for(let l=0,c=t.length;l<c;l+=2)o[l]=e+t[l+1]*n,o[l+1]=s+t[l]*r;return o}static _translate(t,e,s,n){n||(n=new Float32Array(t.length));for(let r=0,o=t.length;r<o;r+=2)n[r]=e+t[r],n[r+1]=s+t[r+1];return n}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,s,n,r){switch(r){case 90:return[1-e/s,t/n];case 180:return[1-t/s,1-e/n];case 270:return[e/s,1-t/n];default:return[t/s,e/n]}}static _normalizePagePoint(t,e,s){switch(s){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,s,n,r,o){return[(t+5*s)/6,(e+5*n)/6,(5*s+r)/6,(5*n+o)/6,(s+r)/2,(n+o)/2]}}Z(ut,"PRECISION",1e-4);var mi,nn,th,eh,Fn,Ut,al,ll,Dd,Od,sh,ih,To,Nd,rg,og,ns,tu,WE,GE,XE,KE,YE,QE;const ar=class ar{constructor({x:t,y:e},s,n,r,o,l=0){w(this,ns);w(this,mi);w(this,nn,[]);w(this,th);w(this,eh);w(this,Fn,[]);w(this,Ut,new Float32Array(18));w(this,al);w(this,ll);w(this,Dd);w(this,Od);w(this,sh);w(this,ih);w(this,To,[]);b(this,mi,s),b(this,ih,r*n),b(this,eh,o),a(this,Ut).set([NaN,NaN,NaN,NaN,t,e],6),b(this,th,l),b(this,Od,a(ar,Nd)*n),b(this,Dd,a(ar,og)*n),b(this,sh,n),a(this,To).push(t,e)}isEmpty(){return isNaN(a(this,Ut)[8])}add({x:t,y:e}){var U;b(this,al,t),b(this,ll,e);const[s,n,r,o]=a(this,mi);let[l,c,h,u]=a(this,Ut).subarray(8,12);const f=t-h,p=e-u,g=Math.hypot(f,p);if(g<a(this,Dd))return!1;const _=g-a(this,Od),v=_/g,E=v*f,S=v*p;let C=l,T=c;l=h,c=u,h+=E,u+=S,(U=a(this,To))==null||U.push(t,e);const R=-S/_,I=E/_,F=R*a(this,ih),N=I*a(this,ih);return a(this,Ut).set(a(this,Ut).subarray(2,8),0),a(this,Ut).set([h+F,u+N],4),a(this,Ut).set(a(this,Ut).subarray(14,18),12),a(this,Ut).set([h-F,u-N],16),isNaN(a(this,Ut)[6])?(a(this,Fn).length===0&&(a(this,Ut).set([l+F,c+N],2),a(this,Fn).push(NaN,NaN,NaN,NaN,(l+F-s)/r,(c+N-n)/o),a(this,Ut).set([l-F,c-N],14),a(this,nn).push(NaN,NaN,NaN,NaN,(l-F-s)/r,(c-N-n)/o)),a(this,Ut).set([C,T,l,c,h,u],6),!this.isEmpty()):(a(this,Ut).set([C,T,l,c,h,u],6),Math.abs(Math.atan2(T-c,C-l)-Math.atan2(S,E))<Math.PI/2?([l,c,h,u]=a(this,Ut).subarray(2,6),a(this,Fn).push(NaN,NaN,NaN,NaN,((l+h)/2-s)/r,((c+u)/2-n)/o),[l,c,C,T]=a(this,Ut).subarray(14,18),a(this,nn).push(NaN,NaN,NaN,NaN,((C+l)/2-s)/r,((T+c)/2-n)/o),!0):([C,T,l,c,h,u]=a(this,Ut).subarray(0,6),a(this,Fn).push(((C+5*l)/6-s)/r,((T+5*c)/6-n)/o,((5*l+h)/6-s)/r,((5*c+u)/6-n)/o,((l+h)/2-s)/r,((c+u)/2-n)/o),[h,u,l,c,C,T]=a(this,Ut).subarray(12,18),a(this,nn).push(((C+5*l)/6-s)/r,((T+5*c)/6-n)/o,((5*l+h)/6-s)/r,((5*c+u)/6-n)/o,((l+h)/2-s)/r,((c+u)/2-n)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const t=a(this,Fn),e=a(this,nn);if(isNaN(a(this,Ut)[6])&&!this.isEmpty())return A(this,ns,WE).call(this);const s=[];s.push(`M${t[4]} ${t[5]}`);for(let n=6;n<t.length;n+=6)isNaN(t[n])?s.push(`L${t[n+4]} ${t[n+5]}`):s.push(`C${t[n]} ${t[n+1]} ${t[n+2]} ${t[n+3]} ${t[n+4]} ${t[n+5]}`);A(this,ns,XE).call(this,s);for(let n=e.length-6;n>=6;n-=6)isNaN(e[n])?s.push(`L${e[n+4]} ${e[n+5]}`):s.push(`C${e[n]} ${e[n+1]} ${e[n+2]} ${e[n+3]} ${e[n+4]} ${e[n+5]}`);return A(this,ns,GE).call(this,s),s.join(" ")}newFreeDrawOutline(t,e,s,n,r,o){return new JE(t,e,s,n,r,o)}getOutlines(){var f;const t=a(this,Fn),e=a(this,nn),s=a(this,Ut),[n,r,o,l]=a(this,mi),c=new Float32Array((((f=a(this,To))==null?void 0:f.length)??0)+2);for(let p=0,g=c.length-2;p<g;p+=2)c[p]=(a(this,To)[p]-n)/o,c[p+1]=(a(this,To)[p+1]-r)/l;if(c[c.length-2]=(a(this,al)-n)/o,c[c.length-1]=(a(this,ll)-r)/l,isNaN(s[6])&&!this.isEmpty())return A(this,ns,KE).call(this,c);const h=new Float32Array(a(this,Fn).length+24+a(this,nn).length);let u=t.length;for(let p=0;p<u;p+=2){if(isNaN(t[p])){h[p]=h[p+1]=NaN;continue}h[p]=t[p],h[p+1]=t[p+1]}u=A(this,ns,QE).call(this,h,u);for(let p=e.length-6;p>=6;p-=6)for(let g=0;g<6;g+=2){if(isNaN(e[p+g])){h[u]=h[u+1]=NaN,u+=2;continue}h[u]=e[p+g],h[u+1]=e[p+g+1],u+=2}return A(this,ns,YE).call(this,h,u),this.newFreeDrawOutline(h,c,a(this,mi),a(this,sh),a(this,th),a(this,eh))}};mi=new WeakMap,nn=new WeakMap,th=new WeakMap,eh=new WeakMap,Fn=new WeakMap,Ut=new WeakMap,al=new WeakMap,ll=new WeakMap,Dd=new WeakMap,Od=new WeakMap,sh=new WeakMap,ih=new WeakMap,To=new WeakMap,Nd=new WeakMap,rg=new WeakMap,og=new WeakMap,ns=new WeakSet,tu=function(){const t=a(this,Ut).subarray(4,6),e=a(this,Ut).subarray(16,18),[s,n,r,o]=a(this,mi);return[(a(this,al)+(t[0]-e[0])/2-s)/r,(a(this,ll)+(t[1]-e[1])/2-n)/o,(a(this,al)+(e[0]-t[0])/2-s)/r,(a(this,ll)+(e[1]-t[1])/2-n)/o]},WE=function(){const[t,e,s,n]=a(this,mi),[r,o,l,c]=A(this,ns,tu).call(this);return`M${(a(this,Ut)[2]-t)/s} ${(a(this,Ut)[3]-e)/n} L${(a(this,Ut)[4]-t)/s} ${(a(this,Ut)[5]-e)/n} L${r} ${o} L${l} ${c} L${(a(this,Ut)[16]-t)/s} ${(a(this,Ut)[17]-e)/n} L${(a(this,Ut)[14]-t)/s} ${(a(this,Ut)[15]-e)/n} Z`},GE=function(t){const e=a(this,nn);t.push(`L${e[4]} ${e[5]} Z`)},XE=function(t){const[e,s,n,r]=a(this,mi),o=a(this,Ut).subarray(4,6),l=a(this,Ut).subarray(16,18),[c,h,u,f]=A(this,ns,tu).call(this);t.push(`L${(o[0]-e)/n} ${(o[1]-s)/r} L${c} ${h} L${u} ${f} L${(l[0]-e)/n} ${(l[1]-s)/r}`)},KE=function(t){const e=a(this,Ut),[s,n,r,o]=a(this,mi),[l,c,h,u]=A(this,ns,tu).call(this),f=new Float32Array(36);return f.set([NaN,NaN,NaN,NaN,(e[2]-s)/r,(e[3]-n)/o,NaN,NaN,NaN,NaN,(e[4]-s)/r,(e[5]-n)/o,NaN,NaN,NaN,NaN,l,c,NaN,NaN,NaN,NaN,h,u,NaN,NaN,NaN,NaN,(e[16]-s)/r,(e[17]-n)/o,NaN,NaN,NaN,NaN,(e[14]-s)/r,(e[15]-n)/o],0),this.newFreeDrawOutline(f,t,a(this,mi),a(this,sh),a(this,th),a(this,eh))},YE=function(t,e){const s=a(this,nn);return t.set([NaN,NaN,NaN,NaN,s[4],s[5]],e),e+=6},QE=function(t,e){const s=a(this,Ut).subarray(4,6),n=a(this,Ut).subarray(16,18),[r,o,l,c]=a(this,mi),[h,u,f,p]=A(this,ns,tu).call(this);return t.set([NaN,NaN,NaN,NaN,(s[0]-r)/l,(s[1]-o)/c,NaN,NaN,NaN,NaN,h,u,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,(n[0]-r)/l,(n[1]-o)/c],e),e+=24},w(ar,Nd,8),w(ar,rg,2),w(ar,og,a(ar,Nd)+a(ar,rg));let jp=ar;var nh,cl,Rr,Fd,bi,$d,Ue,ag,ZE;class JE extends ut{constructor(e,s,n,r,o,l){super();w(this,ag);w(this,nh);w(this,cl,new Float32Array(4));w(this,Rr);w(this,Fd);w(this,bi);w(this,$d);w(this,Ue);b(this,Ue,e),b(this,bi,s),b(this,nh,n),b(this,$d,r),b(this,Rr,o),b(this,Fd,l),this.lastPoint=[NaN,NaN],A(this,ag,ZE).call(this,l);const[c,h,u,f]=a(this,cl);for(let p=0,g=e.length;p<g;p+=2)e[p]=(e[p]-c)/u,e[p+1]=(e[p+1]-h)/f;for(let p=0,g=s.length;p<g;p+=2)s[p]=(s[p]-c)/u,s[p+1]=(s[p+1]-h)/f}toSVGPath(){const e=[`M${a(this,Ue)[4]} ${a(this,Ue)[5]}`];for(let s=6,n=a(this,Ue).length;s<n;s+=6){if(isNaN(a(this,Ue)[s])){e.push(`L${a(this,Ue)[s+4]} ${a(this,Ue)[s+5]}`);continue}e.push(`C${a(this,Ue)[s]} ${a(this,Ue)[s+1]} ${a(this,Ue)[s+2]} ${a(this,Ue)[s+3]} ${a(this,Ue)[s+4]} ${a(this,Ue)[s+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,s,n,r],o){const l=n-e,c=r-s;let h,u;switch(o){case 0:h=ut._rescale(a(this,Ue),e,r,l,-c),u=ut._rescale(a(this,bi),e,r,l,-c);break;case 90:h=ut._rescaleAndSwap(a(this,Ue),e,s,l,c),u=ut._rescaleAndSwap(a(this,bi),e,s,l,c);break;case 180:h=ut._rescale(a(this,Ue),n,s,-l,c),u=ut._rescale(a(this,bi),n,s,-l,c);break;case 270:h=ut._rescaleAndSwap(a(this,Ue),n,r,-l,-c),u=ut._rescaleAndSwap(a(this,bi),n,r,-l,-c);break}return{outline:Array.from(h),points:[Array.from(u)]}}get box(){return a(this,cl)}newOutliner(e,s,n,r,o,l=0){return new jp(e,s,n,r,o,l)}getNewOutline(e,s){const[n,r,o,l]=a(this,cl),[c,h,u,f]=a(this,nh),p=o*u,g=l*f,_=n*u+c,v=r*f+h,E=this.newOutliner({x:a(this,bi)[0]*p+_,y:a(this,bi)[1]*g+v},a(this,nh),a(this,$d),e,a(this,Fd),s??a(this,Rr));for(let S=2;S<a(this,bi).length;S+=2)E.add({x:a(this,bi)[S]*p+_,y:a(this,bi)[S+1]*g+v});return E.getOutlines()}}nh=new WeakMap,cl=new WeakMap,Rr=new WeakMap,Fd=new WeakMap,bi=new WeakMap,$d=new WeakMap,Ue=new WeakMap,ag=new WeakSet,ZE=function(e){const s=a(this,Ue);let n=s[4],r=s[5];const o=[n,r,n,r];let l=n,c=r;const h=e?Math.max:Math.min;for(let f=6,p=s.length;f<p;f+=6){const g=s[f+4],_=s[f+5];if(isNaN(s[f]))At.pointBoundingBox(g,_,o),c<_?(l=g,c=_):c===_&&(l=h(l,g));else{const v=[1/0,1/0,-1/0,-1/0];At.bezierBoundingBox(n,r,...s.slice(f,f+6),v),At.rectBoundingBox(...v,o),c<v[3]?(l=v[2],c=v[3]):c===v[3]&&(l=h(l,v[2]))}n=g,r=_}const u=a(this,cl);u[0]=o[0]-a(this,Rr),u[1]=o[1]-a(this,Rr),u[2]=o[2]-o[0]+2*a(this,Rr),u[3]=o[3]-o[1]+2*a(this,Rr),this.lastPoint=[l,c]};var Bd,Hd,Po,rn,Ys,tS,pp,eS,sS,Bb;class $b{constructor(t,e=0,s=0,n=!0){w(this,Ys);w(this,Bd);w(this,Hd);w(this,Po,[]);w(this,rn,[]);const r=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:g,y:_,width:v,height:E}of t){const S=Math.floor((g-e)/o)*o,C=Math.ceil((g+v+e)/o)*o,T=Math.floor((_-e)/o)*o,R=Math.ceil((_+E+e)/o)*o,I=[S,T,R,!0],F=[C,T,R,!1];a(this,Po).push(I,F),At.rectBoundingBox(S,T,C,R,r)}const l=r[2]-r[0]+2*s,c=r[3]-r[1]+2*s,h=r[0]-s,u=r[1]-s,f=a(this,Po).at(n?-1:-2),p=[f[0],f[2]];for(const g of a(this,Po)){const[_,v,E]=g;g[0]=(_-h)/l,g[1]=(v-u)/c,g[2]=(E-u)/c}b(this,Bd,new Float32Array([h,u,l,c])),b(this,Hd,p)}getOutlines(){a(this,Po).sort((e,s)=>e[0]-s[0]||e[1]-s[1]||e[2]-s[2]);const t=[];for(const e of a(this,Po))e[3]?(t.push(...A(this,Ys,Bb).call(this,e)),A(this,Ys,eS).call(this,e)):(A(this,Ys,sS).call(this,e),t.push(...A(this,Ys,Bb).call(this,e)));return A(this,Ys,tS).call(this,t)}}Bd=new WeakMap,Hd=new WeakMap,Po=new WeakMap,rn=new WeakMap,Ys=new WeakSet,tS=function(t){const e=[],s=new Set;for(const o of t){const[l,c,h]=o;e.push([l,c,o],[l,h,o])}e.sort((o,l)=>o[1]-l[1]||o[0]-l[0]);for(let o=0,l=e.length;o<l;o+=2){const c=e[o][2],h=e[o+1][2];c.push(h),h.push(c),s.add(c),s.add(h)}const n=[];let r;for(;s.size>0;){const o=s.values().next().value;let[l,c,h,u,f]=o;s.delete(o);let p=l,g=c;for(r=[l,h],n.push(r);;){let _;if(s.has(u))_=u;else if(s.has(f))_=f;else break;s.delete(_),[l,c,h,u,f]=_,p!==l&&(r.push(p,g,l,g===c?c:h),p=l),g=g===c?h:c}r.push(p,g)}return new hI(n,a(this,Bd),a(this,Hd))},pp=function(t){const e=a(this,rn);let s=0,n=e.length-1;for(;s<=n;){const r=s+n>>1,o=e[r][0];if(o===t)return r;o<t?s=r+1:n=r-1}return n+1},eS=function([,t,e]){const s=A(this,Ys,pp).call(this,t);a(this,rn).splice(s,0,[t,e])},sS=function([,t,e]){const s=A(this,Ys,pp).call(this,t);for(let n=s;n<a(this,rn).length;n++){const[r,o]=a(this,rn)[n];if(r!==t)break;if(r===t&&o===e){a(this,rn).splice(n,1);return}}for(let n=s-1;n>=0;n--){const[r,o]=a(this,rn)[n];if(r!==t)break;if(r===t&&o===e){a(this,rn).splice(n,1);return}}},Bb=function(t){const[e,s,n]=t,r=[[e,s,n]],o=A(this,Ys,pp).call(this,n);for(let l=0;l<o;l++){const[c,h]=a(this,rn)[l];for(let u=0,f=r.length;u<f;u++){const[,p,g]=r[u];if(!(h<=p||g<=c)){if(p>=c){if(g>h)r[u][1]=h;else{if(f===1)return[];r.splice(u,1),u--,f--}continue}r[u][2]=c,g>h&&r.push([e,h,g])}}}return r};var jd,rh;class hI extends ut{constructor(e,s,n){super();w(this,jd);w(this,rh);b(this,rh,e),b(this,jd,s),this.lastPoint=n}toSVGPath(){const e=[];for(const s of a(this,rh)){let[n,r]=s;e.push(`M${n} ${r}`);for(let o=2;o<s.length;o+=2){const l=s[o],c=s[o+1];l===n?(e.push(`V${c}`),r=c):c===r&&(e.push(`H${l}`),n=l)}e.push("Z")}return e.join(" ")}serialize([e,s,n,r],o){const l=[],c=n-e,h=r-s;for(const u of a(this,rh)){const f=new Array(u.length);for(let p=0;p<u.length;p+=2)f[p]=e+u[p]*c,f[p+1]=r-u[p+1]*h;l.push(f)}return l}get box(){return a(this,jd)}get classNamesForOutlining(){return["highlightOutline"]}}jd=new WeakMap,rh=new WeakMap;class Hb extends jp{newFreeDrawOutline(t,e,s,n,r,o){return new uI(t,e,s,n,r,o)}}class uI extends JE{newOutliner(t,e,s,n,r,o=0){return new Hb(t,e,s,n,r,o)}}var on,hl,oh,ss,Vd,ah,Ud,zd,Ro,an,lh,qd,pe,jb,Vb,Ub,ma,iS,Jr;const Js=class Js{constructor({editor:t=null,uiManager:e=null}){w(this,pe);w(this,on,null);w(this,hl,null);w(this,oh);w(this,ss,null);w(this,Vd,!1);w(this,ah,!1);w(this,Ud,null);w(this,zd);w(this,Ro,null);w(this,an,null);w(this,lh);var s;t?(b(this,ah,!1),b(this,lh,Yt.HIGHLIGHT_COLOR),b(this,Ud,t)):(b(this,ah,!0),b(this,lh,Yt.HIGHLIGHT_DEFAULT_COLOR)),b(this,an,(t==null?void 0:t._uiManager)||e),b(this,zd,a(this,an)._eventBus),b(this,oh,(t==null?void 0:t.color)||((s=a(this,an))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),a(Js,qd)||b(Js,qd,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return Gt(this,"_keyboardManager",new lf([[["Escape","mac+Escape"],Js.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Js.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Js.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Js.prototype._moveToPrevious],[["Home","mac+Home"],Js.prototype._moveToBeginning],[["End","mac+End"],Js.prototype._moveToEnd]]))}renderButton(){const t=b(this,on,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=a(this,an)._signal;t.addEventListener("click",A(this,pe,ma).bind(this),{signal:e}),t.addEventListener("keydown",A(this,pe,Ub).bind(this),{signal:e});const s=b(this,hl,document.createElement("span"));return s.className="swatch",s.setAttribute("aria-hidden",!0),s.style.backgroundColor=a(this,oh),t.append(s),t}renderMainDropdown(){const t=b(this,ss,A(this,pe,jb).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===a(this,on)){A(this,pe,ma).call(this,t);return}const e=t.target.getAttribute("data-color");e&&A(this,pe,Vb).call(this,e,t)}_moveToNext(t){var e,s;if(!a(this,pe,Jr)){A(this,pe,ma).call(this,t);return}if(t.target===a(this,on)){(e=a(this,ss).firstChild)==null||e.focus();return}(s=t.target.nextSibling)==null||s.focus()}_moveToPrevious(t){var e,s;if(t.target===((e=a(this,ss))==null?void 0:e.firstChild)||t.target===a(this,on)){a(this,pe,Jr)&&this._hideDropdownFromKeyboard();return}a(this,pe,Jr)||A(this,pe,ma).call(this,t),(s=t.target.previousSibling)==null||s.focus()}_moveToBeginning(t){var e;if(!a(this,pe,Jr)){A(this,pe,ma).call(this,t);return}(e=a(this,ss).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!a(this,pe,Jr)){A(this,pe,ma).call(this,t);return}(e=a(this,ss).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=a(this,ss))==null||t.classList.add("hidden"),(e=a(this,Ro))==null||e.abort(),b(this,Ro,null)}_hideDropdownFromKeyboard(){var t;if(!a(this,ah)){if(!a(this,pe,Jr)){(t=a(this,Ud))==null||t.unselect();return}this.hideDropdown(),a(this,on).focus({preventScroll:!0,focusVisible:a(this,Vd)})}}updateColor(t){if(a(this,hl)&&(a(this,hl).style.backgroundColor=t),!a(this,ss))return;const e=a(this,an).highlightColors.values();for(const s of a(this,ss).children)s.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=a(this,on))==null||t.remove(),b(this,on,null),b(this,hl,null),(e=a(this,ss))==null||e.remove(),b(this,ss,null)}};on=new WeakMap,hl=new WeakMap,oh=new WeakMap,ss=new WeakMap,Vd=new WeakMap,ah=new WeakMap,Ud=new WeakMap,zd=new WeakMap,Ro=new WeakMap,an=new WeakMap,lh=new WeakMap,qd=new WeakMap,pe=new WeakSet,jb=function(){const t=document.createElement("div"),e=a(this,an)._signal;t.addEventListener("contextmenu",gn,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[s,n]of a(this,an).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",n),r.title=s,r.setAttribute("data-l10n-id",a(Js,qd)[s]);const o=document.createElement("span");r.append(o),o.className="swatch",o.style.backgroundColor=n,r.setAttribute("aria-selected",n===a(this,oh)),r.addEventListener("click",A(this,pe,Vb).bind(this,n),{signal:e}),t.append(r)}return t.addEventListener("keydown",A(this,pe,Ub).bind(this),{signal:e}),t},Vb=function(t,e){e.stopPropagation(),a(this,zd).dispatch("switchannotationeditorparams",{source:this,type:a(this,lh),value:t})},Ub=function(t){Js._keyboardManager.exec(this,t)},ma=function(t){if(a(this,pe,Jr)){this.hideDropdown();return}if(b(this,Vd,t.detail===0),a(this,Ro)||(b(this,Ro,new AbortController),window.addEventListener("pointerdown",A(this,pe,iS).bind(this),{signal:a(this,an).combinedSignal(a(this,Ro))})),a(this,ss)){a(this,ss).classList.remove("hidden");return}const e=b(this,ss,A(this,pe,jb).call(this));a(this,on).append(e)},iS=function(t){var e;(e=a(this,ss))!=null&&e.contains(t.target)||this.hideDropdown()},Jr=function(){return a(this,ss)&&!a(this,ss).classList.contains("hidden")},w(Js,qd,null);let Vp=Js;var ch,Wd,kr,ul,hh,ei,Gd,Xd,dl,Bi,vi,ms,uh,Ir,Ps,dh,Hi,Kd,Ft,zb,gp,nS,rS,oS,qb,ba,Ui,oc,aS,mp,eu,lS,cS,hS,uS,dS;const se=class se extends Se{constructor(e){super({...e,name:"highlightEditor"});w(this,Ft);w(this,ch,null);w(this,Wd,0);w(this,kr);w(this,ul,null);w(this,hh,null);w(this,ei,null);w(this,Gd,null);w(this,Xd,0);w(this,dl,null);w(this,Bi,null);w(this,vi,null);w(this,ms,!1);w(this,uh,null);w(this,Ir);w(this,Ps,null);w(this,dh,"");w(this,Hi);w(this,Kd,"");this.color=e.color||se._defaultColor,b(this,Hi,e.thickness||se._defaultThickness),b(this,Ir,e.opacity||se._defaultOpacity),b(this,kr,e.boxes||null),b(this,Kd,e.methodOfCreation||""),b(this,dh,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(b(this,ms,!0),A(this,Ft,gp).call(this,e),A(this,Ft,ba).call(this)):a(this,kr)&&(b(this,ch,e.anchorNode),b(this,Wd,e.anchorOffset),b(this,Gd,e.focusNode),b(this,Xd,e.focusOffset),A(this,Ft,zb).call(this),A(this,Ft,ba).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=se.prototype;return Gt(this,"_keyboardManager",new lf([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:a(this,ms)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:a(this,Hi),methodOfCreation:a(this,Kd)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,s){var n;Se.initialize(e,s),se._defaultColor||(se._defaultColor=((n=s.highlightColors)==null?void 0:n.values().next().value)||"#fff066")}static updateDefaultParams(e,s){switch(e){case Yt.HIGHLIGHT_DEFAULT_COLOR:se._defaultColor=s;break;case Yt.HIGHLIGHT_THICKNESS:se._defaultThickness=s;break}}translateInPage(e,s){}get toolbarPosition(){return a(this,uh)}updateParams(e,s){switch(e){case Yt.HIGHLIGHT_COLOR:A(this,Ft,nS).call(this,s);break;case Yt.HIGHLIGHT_THICKNESS:A(this,Ft,rS).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[Yt.HIGHLIGHT_DEFAULT_COLOR,se._defaultColor],[Yt.HIGHLIGHT_THICKNESS,se._defaultThickness]]}get propertiesToUpdate(){return[[Yt.HIGHLIGHT_COLOR,this.color||se._defaultColor],[Yt.HIGHLIGHT_THICKNESS,a(this,Hi)||se._defaultThickness],[Yt.HIGHLIGHT_FREE,a(this,ms)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(b(this,hh,new Vp({editor:this})),e.addColorPicker(a(this,hh))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(A(this,Ft,eu).call(this))}getBaseTranslation(){return[0,0]}getRect(e,s){return super.getRect(e,s,A(this,Ft,eu).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){A(this,Ft,qb).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(A(this,Ft,ba).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var n;let s=!1;this.parent&&!e?A(this,Ft,qb).call(this):e&&(A(this,Ft,ba).call(this,e),s=!this.parent&&((n=this.div)==null?void 0:n.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),s&&this.select()}rotate(e){var r,o,l;const{drawLayer:s}=this.parent;let n;a(this,ms)?(e=(e-this.rotation+360)%360,n=A(r=se,Ui,oc).call(r,a(this,Bi).box,e)):n=A(o=se,Ui,oc).call(o,[this.x,this.y,this.width,this.height],e),s.updateProperties(a(this,vi),{bbox:n,root:{"data-main-rotation":e}}),s.updateProperties(a(this,Ps),{bbox:A(l=se,Ui,oc).call(l,a(this,ei).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();a(this,dh)&&(e.setAttribute("aria-label",a(this,dh)),e.setAttribute("role","mark")),a(this,ms)?e.classList.add("free"):this.div.addEventListener("keydown",A(this,Ft,aS).bind(this),{signal:this._uiManager._signal});const s=b(this,dl,document.createElement("div"));e.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=a(this,ul);const[n,r]=this.parentDimensions;return this.setDims(this.width*n,this.height*r),I0(this,a(this,dl),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(a(this,Ps),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(a(this,Ps),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:A(this,Ft,mp).call(this,!0);break;case 1:case 3:A(this,Ft,mp).call(this,!1);break}}select(){var e;super.select(),a(this,Ps)&&((e=this.parent)==null||e.drawLayer.updateProperties(a(this,Ps),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),a(this,Ps)&&((e=this.parent)==null||e.drawLayer.updateProperties(a(this,Ps),{rootClass:{selected:!1}}),a(this,ms)||A(this,Ft,mp).call(this,!1))}get _mustFixPosition(){return!a(this,ms)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(a(this,vi),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(a(this,Ps),{rootClass:{hidden:!e}}))}static startHighlighting(e,s,{target:n,x:r,y:o}){const{x:l,y:c,width:h,height:u}=n.getBoundingClientRect(),f=new AbortController,p=e.combinedSignal(f),g=_=>{f.abort(),A(this,Ui,uS).call(this,e,_)};window.addEventListener("blur",g,{signal:p}),window.addEventListener("pointerup",g,{signal:p}),window.addEventListener("pointerdown",Xe,{capture:!0,passive:!1,signal:p}),window.addEventListener("contextmenu",gn,{signal:p}),n.addEventListener("pointermove",A(this,Ui,hS).bind(this,e),{signal:p}),this._freeHighlight=new Hb({x:r,y:o},[l,c,h,u],e.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,s,n){var v,E,S,C;let r=null;if(e instanceof BE){const{data:{quadPoints:T,rect:R,rotation:I,id:F,color:N,opacity:H,popupRef:U},parent:{page:{pageNumber:Q}}}=e;r=e={annotationType:Dt.HIGHLIGHT,color:Array.from(N),opacity:H,quadPoints:T,boxes:null,pageIndex:Q-1,rect:R.slice(0),rotation:I,id:F,deleted:!1,popupRef:U}}else if(e instanceof Bv){const{data:{inkLists:T,rect:R,rotation:I,id:F,color:N,borderStyle:{rawWidth:H},popupRef:U},parent:{page:{pageNumber:Q}}}=e;r=e={annotationType:Dt.HIGHLIGHT,color:Array.from(N),thickness:H,inkLists:T,boxes:null,pageIndex:Q-1,rect:R.slice(0),rotation:I,id:F,deleted:!1,popupRef:U}}const{color:o,quadPoints:l,inkLists:c,opacity:h}=e,u=await super.deserialize(e,s,n);u.color=At.makeHexColor(...o),b(u,Ir,h||1),c&&b(u,Hi,e.thickness),u.annotationElementId=e.id||null,u._initialData=r;const[f,p]=u.pageDimensions,[g,_]=u.pageTranslation;if(l){const T=b(u,kr,[]);for(let R=0;R<l.length;R+=8)T.push({x:(l[R]-g)/f,y:1-(l[R+1]-_)/p,width:(l[R+2]-l[R])/f,height:(l[R+1]-l[R+5])/p});A(v=u,Ft,zb).call(v),A(E=u,Ft,ba).call(E),u.rotate(u.rotation)}else if(c){b(u,ms,!0);const T=c[0],R={x:T[0]-g,y:p-(T[1]-_)},I=new Hb(R,[0,0,f,p],1,a(u,Hi)/2,!0,.001);for(let H=0,U=T.length;H<U;H+=2)R.x=T[H]-g,R.y=p-(T[H+1]-_),I.add(R);const{id:F,clipPathId:N}=s.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:u.color,"fill-opacity":u._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:I.toSVGPath()}},!0,!0);A(S=u,Ft,gp).call(S,{highlightOutlines:I.getOutlines(),highlightId:F,clipPathId:N}),A(C=u,Ft,ba).call(C),u.rotate(u.parentRotation)}return u}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const s=this.getRect(0,0),n=Se._colorManager.convert(this.color),r={annotationType:Dt.HIGHLIGHT,color:n,opacity:a(this,Ir),thickness:a(this,Hi),quadPoints:A(this,Ft,lS).call(this),outlines:A(this,Ft,cS).call(this,s),pageIndex:this.pageIndex,rect:s,rotation:A(this,Ft,eu).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!A(this,Ft,dS).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};ch=new WeakMap,Wd=new WeakMap,kr=new WeakMap,ul=new WeakMap,hh=new WeakMap,ei=new WeakMap,Gd=new WeakMap,Xd=new WeakMap,dl=new WeakMap,Bi=new WeakMap,vi=new WeakMap,ms=new WeakMap,uh=new WeakMap,Ir=new WeakMap,Ps=new WeakMap,dh=new WeakMap,Hi=new WeakMap,Kd=new WeakMap,Ft=new WeakSet,zb=function(){const e=new $b(a(this,kr),.001);b(this,Bi,e.getOutlines()),[this.x,this.y,this.width,this.height]=a(this,Bi).box;const s=new $b(a(this,kr),.0025,.001,this._uiManager.direction==="ltr");b(this,ei,s.getOutlines());const{lastPoint:n}=a(this,ei);b(this,uh,[(n[0]-this.x)/this.width,(n[1]-this.y)/this.height])},gp=function({highlightOutlines:e,highlightId:s,clipPathId:n}){var f,p;if(b(this,Bi,e),b(this,ei,e.getNewOutline(a(this,Hi)/2+1.5,.0025)),s>=0)b(this,vi,s),b(this,ul,n),this.parent.drawLayer.finalizeDraw(s,{bbox:e.box,path:{d:e.toSVGPath()}}),b(this,Ps,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:a(this,ei).box,path:{d:a(this,ei).toSVGPath()}},!0));else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(a(this,vi),{bbox:A(f=se,Ui,oc).call(f,a(this,Bi).box,(g-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(a(this,Ps),{bbox:A(p=se,Ui,oc).call(p,a(this,ei).box,g),path:{d:a(this,ei).toSVGPath()}})}const[o,l,c,h]=e.box;switch(this.rotation){case 0:this.x=o,this.y=l,this.width=c,this.height=h;break;case 90:{const[g,_]=this.parentDimensions;this.x=l,this.y=1-o,this.width=c*_/g,this.height=h*g/_;break}case 180:this.x=1-o,this.y=1-l,this.width=c,this.height=h;break;case 270:{const[g,_]=this.parentDimensions;this.x=1-l,this.y=o,this.width=c*_/g,this.height=h*g/_;break}}const{lastPoint:u}=a(this,ei);b(this,uh,[(u[0]-o)/c,(u[1]-l)/h])},nS=function(e){const s=(o,l)=>{var c,h;this.color=o,b(this,Ir,l),(c=this.parent)==null||c.drawLayer.updateProperties(a(this,vi),{root:{fill:o,"fill-opacity":l}}),(h=a(this,hh))==null||h.updateColor(o)},n=this.color,r=a(this,Ir);this.addCommands({cmd:s.bind(this,e,se._defaultOpacity),undo:s.bind(this,n,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Yt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},rS=function(e){const s=a(this,Hi),n=r=>{b(this,Hi,r),A(this,Ft,oS).call(this,r)};this.addCommands({cmd:n.bind(this,e),undo:n.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:Yt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},oS=function(e){if(!a(this,ms))return;A(this,Ft,gp).call(this,{highlightOutlines:a(this,Bi).getNewOutline(e/2)}),this.fixAndSetPosition();const[s,n]=this.parentDimensions;this.setDims(this.width*s,this.height*n)},qb=function(){a(this,vi)===null||!this.parent||(this.parent.drawLayer.remove(a(this,vi)),b(this,vi,null),this.parent.drawLayer.remove(a(this,Ps)),b(this,Ps,null))},ba=function(e=this.parent){a(this,vi)===null&&({id:Bs(this,vi)._,clipPathId:Bs(this,ul)._}=e.drawLayer.draw({bbox:a(this,Bi).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":a(this,Ir)},rootClass:{highlight:!0,free:a(this,ms)},path:{d:a(this,Bi).toSVGPath()}},!1,!0),b(this,Ps,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:a(this,ms)},bbox:a(this,ei).box,path:{d:a(this,ei).toSVGPath()}},a(this,ms))),a(this,dl)&&(a(this,dl).style.clipPath=a(this,ul)))},Ui=new WeakSet,oc=function([e,s,n,r],o){switch(o){case 90:return[1-s-r,e,r,n];case 180:return[1-e-n,1-s-r,n,r];case 270:return[s,1-e-n,r,n]}return[e,s,n,r]},aS=function(e){se._keyboardManager.exec(this,e)},mp=function(e){if(!a(this,ch))return;const s=window.getSelection();e?s.setPosition(a(this,ch),a(this,Wd)):s.setPosition(a(this,Gd),a(this,Xd))},eu=function(){return a(this,ms)?this.rotation:0},lS=function(){if(a(this,ms))return null;const[e,s]=this.pageDimensions,[n,r]=this.pageTranslation,o=a(this,kr),l=new Float32Array(o.length*8);let c=0;for(const{x:h,y:u,width:f,height:p}of o){const g=h*e+n,_=(1-u)*s+r;l[c]=l[c+4]=g,l[c+1]=l[c+3]=_,l[c+2]=l[c+6]=g+f*e,l[c+5]=l[c+7]=_-p*s,c+=8}return l},cS=function(e){return a(this,Bi).serialize(e,A(this,Ft,eu).call(this))},hS=function(e,s){this._freeHighlight.add(s)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},uS=function(e,s){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},dS=function(e){const{color:s}=this._initialData;return e.color.some((n,r)=>n!==s[r])},w(se,Ui),Z(se,"_defaultColor",null),Z(se,"_defaultOpacity",1),Z(se,"_defaultThickness",12),Z(se,"_type","highlight"),Z(se,"_editorType",Dt.HIGHLIGHT),Z(se,"_freeHighlightId",-1),Z(se,"_freeHighlight",null),Z(se,"_freeHighlightClipId","");let Up=se;var fl;class fS{constructor(){w(this,fl,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,s]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,s)}updateSVGProperty(t,e){a(this,fl)[t]=e}toSVGProperties(){const t=a(this,fl);return b(this,fl,Object.create(null)),{root:t}}reset(){b(this,fl,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){ge("Not implemented")}}fl=new WeakMap;var _i,fh,ls,pl,gl,ko,Io,Mo,ml,Jt,Wb,Gb,Xb,su,pS,bp,iu,ac;const mt=class mt extends Se{constructor(e){super(e);w(this,Jt);w(this,_i,null);w(this,fh);Z(this,"_drawId",null);b(this,fh,e.mustBeCommitted||!1),this._addOutlines(e)}_addOutlines(e){e.drawOutlines&&(A(this,Jt,Wb).call(this,e),A(this,Jt,su).call(this))}static _mergeSVGProperties(e,s){const n=new Set(Object.keys(e));for(const[r,o]of Object.entries(s))n.has(r)?Object.assign(e[r],o):e[r]=o;return e}static getDefaultDrawingOptions(e){ge("Not implemented")}static get typesMap(){ge("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,s){const n=this.typesMap.get(e);n&&this._defaultDrawingOptions.updateProperty(n,s),this._currentParent&&(a(mt,ls).updateProperty(n,s),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,s){const n=this.constructor.typesMap.get(e);n&&this._updateProperty(e,n,s)}static get defaultPropertiesToUpdate(){const e=[],s=this._defaultDrawingOptions;for(const[n,r]of this.typesMap)e.push([n,s[r]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:s}=this;for(const[n,r]of this.constructor.typesMap)e.push([n,s[r]]);return e}_updateProperty(e,s,n){const r=this._drawingOptions,o=r[s],l=c=>{var u;r.updateProperty(s,c);const h=a(this,_i).updateProperty(s,c);h&&A(this,Jt,iu).call(this,h),(u=this.parent)==null||u.drawLayer.updateProperties(this._drawId,r.toSVGProperties())};this.addCommands({cmd:l.bind(this,n),undo:l.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,mt._mergeSVGProperties(a(this,_i).getPathResizingSVGProperties(A(this,Jt,bp).call(this)),{bbox:A(this,Jt,ac).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,mt._mergeSVGProperties(a(this,_i).getPathResizedSVGProperties(A(this,Jt,bp).call(this)),{bbox:A(this,Jt,ac).call(this)}))}_onTranslating(e,s){var n;(n=this.parent)==null||n.drawLayer.updateProperties(this._drawId,{bbox:A(this,Jt,ac).call(this)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,mt._mergeSVGProperties(a(this,_i).getPathTranslatedSVGProperties(A(this,Jt,bp).call(this),this.parentDimensions),{bbox:A(this,Jt,ac).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,a(this,fh)&&(b(this,fh,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){A(this,Jt,Xb).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(A(this,Jt,su).call(this),A(this,Jt,iu).call(this,a(this,_i).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var n;let s=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),A(this,Jt,Xb).call(this)):e&&(this._uiManager.addShouldRescale(this),A(this,Jt,su).call(this,e),s=!this.parent&&((n=this.div)==null?void 0:n.classList.contains("selectedEditor"))),super.setParent(e),s&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,mt._mergeSVGProperties({bbox:A(this,Jt,ac).call(this)},a(this,_i).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&A(this,Jt,iu).call(this,a(this,_i).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,s;this._isCopy&&(e=this.x,s=this.y);const n=super.render();n.classList.add("draw");const r=document.createElement("div");n.append(r),r.setAttribute("aria-hidden","true"),r.className="internal";const[o,l]=this.parentDimensions;return this.setDims(this.width*o,this.height*l),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,s),n}static createDrawerInstance(e,s,n,r,o){ge("Not implemented")}static startDrawing(e,s,n,r){var E;const{target:o,offsetX:l,offsetY:c,pointerId:h,pointerType:u}=r;if(a(mt,Io)&&a(mt,Io)!==u)return;const{viewport:{rotation:f}}=e,{width:p,height:g}=o.getBoundingClientRect(),_=b(mt,pl,new AbortController),v=e.combinedSignal(_);if(a(mt,ko)||b(mt,ko,h),a(mt,Io)??b(mt,Io,u),window.addEventListener("pointerup",S=>{var C;a(mt,ko)===S.pointerId?this._endDraw(S):(C=a(mt,Mo))==null||C.delete(S.pointerId)},{signal:v}),window.addEventListener("pointercancel",S=>{var C;a(mt,ko)===S.pointerId?this._currentParent.endDrawingSession():(C=a(mt,Mo))==null||C.delete(S.pointerId)},{signal:v}),window.addEventListener("pointerdown",S=>{a(mt,Io)===S.pointerType&&((a(mt,Mo)||b(mt,Mo,new Set)).add(S.pointerId),a(mt,ls).isCancellable()&&(a(mt,ls).removeLastElement(),a(mt,ls).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:v}),window.addEventListener("contextmenu",gn,{signal:v}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:v}),o.addEventListener("touchmove",S=>{S.timeStamp===a(mt,ml)&&Xe(S)},{signal:v}),e.toggleDrawing(),(E=s._editorUndoBar)==null||E.hide(),a(mt,ls)){e.drawLayer.updateProperties(this._currentDrawId,a(mt,ls).startNew(l,c,p,g,f));return}s.updateUIForDefaultProperties(this),b(mt,ls,this.createDrawerInstance(l,c,p,g,f)),b(mt,gl,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(a(mt,gl).toSVGProperties(),a(mt,ls).defaultSVGProperties),!0,!1)}static _drawMove(e){var o;if(b(mt,ml,-1),!a(mt,ls))return;const{offsetX:s,offsetY:n,pointerId:r}=e;if(a(mt,ko)===r){if(((o=a(mt,Mo))==null?void 0:o.size)>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,a(mt,ls).add(s,n)),b(mt,ml,e.timeStamp),Xe(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,b(mt,ls,null),b(mt,gl,null),b(mt,Io,null),b(mt,ml,NaN)),a(mt,pl)&&(a(mt,pl).abort(),b(mt,pl,null),b(mt,ko,NaN),b(mt,Mo,null))}static _endDraw(e){const s=this._currentParent;if(s){if(s.toggleDrawing(!0),this._cleanup(!1),(e==null?void 0:e.target)===s.div&&s.drawLayer.updateProperties(this._currentDrawId,a(mt,ls).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const n=a(mt,ls),r=this._currentDrawId,o=n.getLastElement();s.addCommands({cmd:()=>{s.drawLayer.updateProperties(r,n.setLastElement(o))},undo:()=>{s.drawLayer.updateProperties(r,n.removeLastElement())},mustExec:!1,type:Yt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const s=this._currentParent;if(!s)return null;if(s.toggleDrawing(!0),s.cleanUndoStack(Yt.DRAW_STEP),!a(mt,ls).isEmpty()){const{pageDimensions:[n,r],scale:o}=s,l=s.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:a(mt,ls).getOutlines(n*o,r*o,o,this._INNER_MARGIN),drawingOptions:a(mt,gl),mustBeCommitted:!e});return this._cleanup(!0),l}return s.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,s,n,r,o,l){ge("Not implemented")}static async deserialize(e,s,n){var f,p;const{rawDims:{pageWidth:r,pageHeight:o,pageX:l,pageY:c}}=s.viewport,h=this.deserializeDraw(l,c,r,o,this._INNER_MARGIN,e),u=await super.deserialize(e,s,n);return u.createDrawingOptions(e),A(f=u,Jt,Wb).call(f,{drawOutlines:h}),A(p=u,Jt,su).call(p),u.onScaleChanging(),u.rotate(),u}serializeDraw(e){const[s,n]=this.pageTranslation,[r,o]=this.pageDimensions;return a(this,_i).serialize([s,n,r,o],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};_i=new WeakMap,fh=new WeakMap,ls=new WeakMap,pl=new WeakMap,gl=new WeakMap,ko=new WeakMap,Io=new WeakMap,Mo=new WeakMap,ml=new WeakMap,Jt=new WeakSet,Wb=function({drawOutlines:e,drawId:s,drawingOptions:n}){b(this,_i,e),this._drawingOptions||(this._drawingOptions=n),s>=0?(this._drawId=s,this.parent.drawLayer.finalizeDraw(s,e.defaultProperties)):this._drawId=A(this,Jt,Gb).call(this,e,this.parent),A(this,Jt,iu).call(this,e.box)},Gb=function(e,s){const{id:n}=s.drawLayer.draw(mt._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return n},Xb=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},su=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=A(this,Jt,Gb).call(this,a(this,_i),e)}},pS=function([e,s,n,r]){const{parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[s,1-e,n*(l/o),r*(o/l)];case 180:return[1-e,1-s,n,r];case 270:return[1-s,e,n*(l/o),r*(o/l)];default:return[e,s,n,r]}},bp=function(){const{x:e,y:s,width:n,height:r,parentDimensions:[o,l],rotation:c}=this;switch(c){case 90:return[1-s,e,n*(o/l),r*(l/o)];case 180:return[1-e,1-s,n,r];case 270:return[s,1-e,n*(o/l),r*(l/o)];default:return[e,s,n,r]}},iu=function(e){if([this.x,this.y,this.width,this.height]=A(this,Jt,pS).call(this,e),this.div){this.fixAndSetPosition();const[s,n]=this.parentDimensions;this.setDims(this.width*s,this.height*n)}this._onResized()},ac=function(){const{x:e,y:s,width:n,height:r,rotation:o,parentRotation:l,parentDimensions:[c,h]}=this;switch((o*4+l)/90){case 1:return[1-s-r,e,r,n];case 2:return[1-e-n,1-s-r,n,r];case 3:return[s,1-e-n,r,n];case 4:return[e,s-n*(c/h),r*(h/c),n*(c/h)];case 5:return[1-s,e,n*(c/h),r*(h/c)];case 6:return[1-e-r*(h/c),1-s,r*(h/c),n*(c/h)];case 7:return[s-n*(c/h),1-e-r*(h/c),n*(c/h),r*(h/c)];case 8:return[e-n,s-r,n,r];case 9:return[1-s,e-n,r,n];case 10:return[1-e,1-s,n,r];case 11:return[s-r,1-e,r,n];case 12:return[e-r*(h/c),s,r*(h/c),n*(c/h)];case 13:return[1-s-n*(c/h),e-r*(h/c),n*(c/h),r*(h/c)];case 14:return[1-e,1-s-n*(c/h),r*(h/c),n*(c/h)];case 15:return[s,1-e,n*(c/h),r*(h/c)];default:return[e,s,n,r]}},Z(mt,"_currentDrawId",-1),Z(mt,"_currentParent",null),w(mt,ls,null),w(mt,pl,null),w(mt,gl,null),w(mt,ko,NaN),w(mt,Io,null),w(mt,Mo,null),w(mt,ml,NaN),Z(mt,"_INNER_MARGIN",3);let zp=mt;var $n,cs,hs,bl,ph,Us,bs,ji,vl,_l,yl,gh,vp;class dI{constructor(t,e,s,n,r,o){w(this,gh);w(this,$n,new Float64Array(6));w(this,cs);w(this,hs);w(this,bl);w(this,ph);w(this,Us);w(this,bs,"");w(this,ji,0);w(this,vl,new uf);w(this,_l);w(this,yl);b(this,_l,s),b(this,yl,n),b(this,bl,r),b(this,ph,o),[t,e]=A(this,gh,vp).call(this,t,e);const l=b(this,cs,[NaN,NaN,NaN,NaN,t,e]);b(this,Us,[t,e]),b(this,hs,[{line:l,points:a(this,Us)}]),a(this,$n).set(l,0)}updateProperty(t,e){t==="stroke-width"&&b(this,ph,e)}isEmpty(){return!a(this,hs)||a(this,hs).length===0}isCancellable(){return a(this,Us).length<=10}add(t,e){[t,e]=A(this,gh,vp).call(this,t,e);const[s,n,r,o]=a(this,$n).subarray(2,6),l=t-r,c=e-o;return Math.hypot(a(this,_l)*l,a(this,yl)*c)<=2?null:(a(this,Us).push(t,e),isNaN(s)?(a(this,$n).set([r,o,t,e],2),a(this,cs).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(a(this,$n)[0])&&a(this,cs).splice(6,6),a(this,$n).set([s,n,r,o,t,e],0),a(this,cs).push(...ut.createBezierPoints(s,n,r,o,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const s=this.add(t,e);return s||(a(this,Us).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,s,n,r){b(this,_l,s),b(this,yl,n),b(this,bl,r),[t,e]=A(this,gh,vp).call(this,t,e);const o=b(this,cs,[NaN,NaN,NaN,NaN,t,e]);b(this,Us,[t,e]);const l=a(this,hs).at(-1);return l&&(l.line=new Float32Array(l.line),l.points=new Float32Array(l.points)),a(this,hs).push({line:o,points:a(this,Us)}),a(this,$n).set(o,0),b(this,ji,0),this.toSVGPath(),null}getLastElement(){return a(this,hs).at(-1)}setLastElement(t){return a(this,hs)?(a(this,hs).push(t),b(this,cs,t.line),b(this,Us,t.points),b(this,ji,0),{path:{d:this.toSVGPath()}}):a(this,vl).setLastElement(t)}removeLastElement(){if(!a(this,hs))return a(this,vl).removeLastElement();a(this,hs).pop(),b(this,bs,"");for(let t=0,e=a(this,hs).length;t<e;t++){const{line:s,points:n}=a(this,hs)[t];b(this,cs,s),b(this,Us,n),b(this,ji,0),this.toSVGPath()}return{path:{d:a(this,bs)}}}toSVGPath(){const t=ut.svgRound(a(this,cs)[4]),e=ut.svgRound(a(this,cs)[5]);if(a(this,Us).length===2)return b(this,bs,`${a(this,bs)} M ${t} ${e} Z`),a(this,bs);if(a(this,Us).length<=6){const n=a(this,bs).lastIndexOf("M");b(this,bs,`${a(this,bs).slice(0,n)} M ${t} ${e}`),b(this,ji,6)}if(a(this,Us).length===4){const n=ut.svgRound(a(this,cs)[10]),r=ut.svgRound(a(this,cs)[11]);return b(this,bs,`${a(this,bs)} L ${n} ${r}`),b(this,ji,12),a(this,bs)}const s=[];a(this,ji)===0&&(s.push(`M ${t} ${e}`),b(this,ji,6));for(let n=a(this,ji),r=a(this,cs).length;n<r;n+=6){const[o,l,c,h,u,f]=a(this,cs).slice(n,n+6).map(ut.svgRound);s.push(`C${o} ${l} ${c} ${h} ${u} ${f}`)}return b(this,bs,a(this,bs)+s.join(" ")),b(this,ji,a(this,cs).length),a(this,bs)}getOutlines(t,e,s,n){const r=a(this,hs).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),a(this,vl).build(a(this,hs),t,e,s,a(this,bl),a(this,ph),n),b(this,$n,null),b(this,cs,null),b(this,hs,null),b(this,bs,null),a(this,vl)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}$n=new WeakMap,cs=new WeakMap,hs=new WeakMap,bl=new WeakMap,ph=new WeakMap,Us=new WeakMap,bs=new WeakMap,ji=new WeakMap,vl=new WeakMap,_l=new WeakMap,yl=new WeakMap,gh=new WeakSet,vp=function(t,e){return ut._normalizePoint(t,e,a(this,_l),a(this,yl),a(this,bl))};var zs,Yd,Qd,yi,Bn,Hn,mh,bh,wl,_s,nr,gS,mS,bS;class uf extends ut{constructor(){super(...arguments);w(this,_s);w(this,zs);w(this,Yd,0);w(this,Qd);w(this,yi);w(this,Bn);w(this,Hn);w(this,mh);w(this,bh);w(this,wl)}build(e,s,n,r,o,l,c){b(this,Bn,s),b(this,Hn,n),b(this,mh,r),b(this,bh,o),b(this,wl,l),b(this,Qd,c??0),b(this,yi,e),A(this,_s,mS).call(this)}get thickness(){return a(this,wl)}setLastElement(e){return a(this,yi).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return a(this,yi).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:s}of a(this,yi)){if(e.push(`M${ut.svgRound(s[4])} ${ut.svgRound(s[5])}`),s.length===6){e.push("Z");continue}if(s.length===12&&isNaN(s[6])){e.push(`L${ut.svgRound(s[10])} ${ut.svgRound(s[11])}`);continue}for(let n=6,r=s.length;n<r;n+=6){const[o,l,c,h,u,f]=s.subarray(n,n+6).map(ut.svgRound);e.push(`C${o} ${l} ${c} ${h} ${u} ${f}`)}}return e.join("")}serialize([e,s,n,r],o){const l=[],c=[],[h,u,f,p]=A(this,_s,gS).call(this);let g,_,v,E,S,C,T,R,I;switch(a(this,bh)){case 0:I=ut._rescale,g=e,_=s+r,v=n,E=-r,S=e+h*n,C=s+(1-u-p)*r,T=e+(h+f)*n,R=s+(1-u)*r;break;case 90:I=ut._rescaleAndSwap,g=e,_=s,v=n,E=r,S=e+u*n,C=s+h*r,T=e+(u+p)*n,R=s+(h+f)*r;break;case 180:I=ut._rescale,g=e+n,_=s,v=-n,E=r,S=e+(1-h-f)*n,C=s+u*r,T=e+(1-h)*n,R=s+(u+p)*r;break;case 270:I=ut._rescaleAndSwap,g=e+n,_=s+r,v=-n,E=-r,S=e+(1-u-p)*n,C=s+(1-h-f)*r,T=e+(1-u)*n,R=s+(1-h)*r;break}for(const{line:F,points:N}of a(this,yi))l.push(I(F,g,_,v,E,o?new Array(F.length):null)),c.push(I(N,g,_,v,E,o?new Array(N.length):null));return{lines:l,points:c,rect:[S,C,T,R]}}static deserialize(e,s,n,r,o,{paths:{lines:l,points:c},rotation:h,thickness:u}){const f=[];let p,g,_,v,E;switch(h){case 0:E=ut._rescale,p=-e/n,g=s/r+1,_=1/n,v=-1/r;break;case 90:E=ut._rescaleAndSwap,p=-s/r,g=-e/n,_=1/r,v=1/n;break;case 180:E=ut._rescale,p=e/n+1,g=-s/r,_=-1/n,v=1/r;break;case 270:E=ut._rescaleAndSwap,p=s/r+1,g=e/n+1,_=-1/r,v=-1/n;break}if(!l){l=[];for(const C of c){const T=C.length;if(T===2){l.push(new Float32Array([NaN,NaN,NaN,NaN,C[0],C[1]]));continue}if(T===4){l.push(new Float32Array([NaN,NaN,NaN,NaN,C[0],C[1],NaN,NaN,NaN,NaN,C[2],C[3]]));continue}const R=new Float32Array(3*(T-2));l.push(R);let[I,F,N,H]=C.subarray(0,4);R.set([NaN,NaN,NaN,NaN,I,F],0);for(let U=4;U<T;U+=2){const Q=C[U],tt=C[U+1];R.set(ut.createBezierPoints(I,F,N,H,Q,tt),(U-2)*3),[I,F,N,H]=[N,H,Q,tt]}}}for(let C=0,T=l.length;C<T;C++)f.push({line:E(l[C].map(R=>R??NaN),p,g,_,v),points:E(c[C].map(R=>R??NaN),p,g,_,v)});const S=new this.prototype.constructor;return S.build(f,n,r,1,h,u,o),S}get box(){return a(this,zs)}updateProperty(e,s){return e==="stroke-width"?A(this,_s,bS).call(this,s):null}updateParentDimensions([e,s],n){const[r,o]=A(this,_s,nr).call(this);b(this,Bn,e),b(this,Hn,s),b(this,mh,n);const[l,c]=A(this,_s,nr).call(this),h=l-r,u=c-o,f=a(this,zs);return f[0]-=h,f[1]-=u,f[2]+=2*h,f[3]+=2*u,f}updateRotation(e){return b(this,Yd,e),{path:{transform:this.rotationTransform}}}get viewBox(){return a(this,zs).map(ut.svgRound).join(" ")}get defaultProperties(){const[e,s]=a(this,zs);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ut.svgRound(e)} ${ut.svgRound(s)}`}}}get rotationTransform(){const[,,e,s]=a(this,zs);let n=0,r=0,o=0,l=0,c=0,h=0;switch(a(this,Yd)){case 90:r=s/e,o=-e/s,c=e;break;case 180:n=-1,l=-1,c=e,h=s;break;case 270:r=-s/e,o=e/s,h=s;break;default:return""}return`matrix(${n} ${r} ${o} ${l} ${ut.svgRound(c)} ${ut.svgRound(h)})`}getPathResizingSVGProperties([e,s,n,r]){const[o,l]=A(this,_s,nr).call(this),[c,h,u,f]=a(this,zs);if(Math.abs(u-o)<=ut.PRECISION||Math.abs(f-l)<=ut.PRECISION){const E=e+n/2-(c+u/2),S=s+r/2-(h+f/2);return{path:{"transform-origin":`${ut.svgRound(e)} ${ut.svgRound(s)}`,transform:`${this.rotationTransform} translate(${E} ${S})`}}}const p=(n-2*o)/(u-2*o),g=(r-2*l)/(f-2*l),_=u/n,v=f/r;return{path:{"transform-origin":`${ut.svgRound(c)} ${ut.svgRound(h)}`,transform:`${this.rotationTransform} scale(${_} ${v}) translate(${ut.svgRound(o)} ${ut.svgRound(l)}) scale(${p} ${g}) translate(${ut.svgRound(-o)} ${ut.svgRound(-l)})`}}}getPathResizedSVGProperties([e,s,n,r]){const[o,l]=A(this,_s,nr).call(this),c=a(this,zs),[h,u,f,p]=c;if(c[0]=e,c[1]=s,c[2]=n,c[3]=r,Math.abs(f-o)<=ut.PRECISION||Math.abs(p-l)<=ut.PRECISION){const S=e+n/2-(h+f/2),C=s+r/2-(u+p/2);for(const{line:T,points:R}of a(this,yi))ut._translate(T,S,C,T),ut._translate(R,S,C,R);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ut.svgRound(e)} ${ut.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const g=(n-2*o)/(f-2*o),_=(r-2*l)/(p-2*l),v=-g*(h+o)+e+o,E=-_*(u+l)+s+l;if(g!==1||_!==1||v!==0||E!==0)for(const{line:S,points:C}of a(this,yi))ut._rescale(S,v,E,g,_,S),ut._rescale(C,v,E,g,_,C);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ut.svgRound(e)} ${ut.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,s],n){const[r,o]=n,l=a(this,zs),c=e-l[0],h=s-l[1];if(a(this,Bn)===r&&a(this,Hn)===o)for(const{line:u,points:f}of a(this,yi))ut._translate(u,c,h,u),ut._translate(f,c,h,f);else{const u=a(this,Bn)/r,f=a(this,Hn)/o;b(this,Bn,r),b(this,Hn,o);for(const{line:p,points:g}of a(this,yi))ut._rescale(p,c,h,u,f,p),ut._rescale(g,c,h,u,f,g);l[2]*=u,l[3]*=f}return l[0]=e,l[1]=s,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ut.svgRound(e)} ${ut.svgRound(s)}`}}}get defaultSVGProperties(){const e=a(this,zs);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ut.svgRound(e[0])} ${ut.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}zs=new WeakMap,Yd=new WeakMap,Qd=new WeakMap,yi=new WeakMap,Bn=new WeakMap,Hn=new WeakMap,mh=new WeakMap,bh=new WeakMap,wl=new WeakMap,_s=new WeakSet,nr=function(e=a(this,wl)){const s=a(this,Qd)+e/2*a(this,mh);return a(this,bh)%180===0?[s/a(this,Bn),s/a(this,Hn)]:[s/a(this,Hn),s/a(this,Bn)]},gS=function(){const[e,s,n,r]=a(this,zs),[o,l]=A(this,_s,nr).call(this,0);return[e+o,s+l,n-2*o,r-2*l]},mS=function(){const e=b(this,zs,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:r}of a(this,yi)){if(r.length<=12){for(let c=4,h=r.length;c<h;c+=6)At.pointBoundingBox(r[c],r[c+1],e);continue}let o=r[4],l=r[5];for(let c=6,h=r.length;c<h;c+=6){const[u,f,p,g,_,v]=r.subarray(c,c+6);At.bezierBoundingBox(o,l,u,f,p,g,_,v,e),o=_,l=v}}const[s,n]=A(this,_s,nr).call(this);e[0]=Gs(e[0]-s,0,1),e[1]=Gs(e[1]-n,0,1),e[2]=Gs(e[2]+s,0,1),e[3]=Gs(e[3]+n,0,1),e[2]-=e[0],e[3]-=e[1]},bS=function(e){const[s,n]=A(this,_s,nr).call(this);b(this,wl,e);const[r,o]=A(this,_s,nr).call(this),[l,c]=[r-s,o-n],h=a(this,zs);return h[0]-=l,h[1]-=c,h[2]+=2*l,h[3]+=2*c,h};class kg extends fS{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:Se._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new kg(this._viewParameters);return t.updateAll(this),t}}var lg,vS;const hc=class hc extends zp{constructor(e){super({...e,name:"inkEditor"});w(this,lg);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,s){Se.initialize(e,s),this._defaultDrawingOptions=new kg(s.viewParameters)}static getDefaultDrawingOptions(e){const s=this._defaultDrawingOptions.clone();return s.updateProperties(e),s}static get supportMultipleDrawings(){return!0}static get typesMap(){return Gt(this,"typesMap",new Map([[Yt.INK_THICKNESS,"stroke-width"],[Yt.INK_COLOR,"stroke"],[Yt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,s,n,r,o){return new dI(e,s,n,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,s,n,r,o,l){return uf.deserialize(e,s,n,r,o,l)}static async deserialize(e,s,n){let r=null;if(e instanceof Bv){const{data:{inkLists:l,rect:c,rotation:h,id:u,color:f,opacity:p,borderStyle:{rawWidth:g},popupRef:_},parent:{page:{pageNumber:v}}}=e;r=e={annotationType:Dt.INK,color:Array.from(f),thickness:g,opacity:p,paths:{points:l},boxes:null,pageIndex:v-1,rect:c.slice(0),rotation:h,id:u,deleted:!1,popupRef:_}}const o=await super.deserialize(e,s,n);return o.annotationElementId=e.id||null,o._initialData=r,o}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:s,parent:n}=this;s.updateSVGProperty("stroke-width"),n.drawLayer.updateProperties(e,s.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:s,opacity:n}){this._drawingOptions=hc.getDefaultDrawingOptions({stroke:At.makeHexColor(...e),"stroke-width":s,"stroke-opacity":n})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:s,points:n,rect:r}=this.serializeDraw(e),{_drawingOptions:{stroke:o,"stroke-opacity":l,"stroke-width":c}}=this,h={annotationType:Dt.INK,color:Se._colorManager.convert(o),opacity:l,thickness:c,paths:{lines:s,points:n},pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(h.isCopy=!0,h):this.annotationElementId&&!A(this,lg,vS).call(this,h)?null:(h.id=this.annotationElementId,h)}renderAnnotationElement(e){const{points:s,rect:n}=this.serializeDraw(!1);return e.updateEdited({rect:n,thickness:this._drawingOptions["stroke-width"],points:s}),null}};lg=new WeakSet,vS=function(e){const{color:s,thickness:n,opacity:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((l,c)=>l!==s[c])||e.thickness!==n||e.opacity!==r||e.pageIndex!==o},Z(hc,"_type","ink"),Z(hc,"_editorType",Dt.INK),Z(hc,"_defaultDrawingOptions",null);let Kb=hc;class Yb extends uf{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const Hf=8,Bh=3;var Al,re,Qb,ln,_S,yS,Jb,_p,wS,AS,ES,Zb,tv,SS;class Br{static extractContoursFromText(t,{fontFamily:e,fontStyle:s,fontWeight:n},r,o,l,c){let h=new OffscreenCanvas(1,1),u=h.getContext("2d",{alpha:!1});const f=200,p=u.font=`${s} ${n} ${f}px ${e}`,{actualBoundingBoxLeft:g,actualBoundingBoxRight:_,actualBoundingBoxAscent:v,actualBoundingBoxDescent:E,fontBoundingBoxAscent:S,fontBoundingBoxDescent:C,width:T}=u.measureText(t),R=1.5,I=Math.ceil(Math.max(Math.abs(g)+Math.abs(_)||0,T)*R),F=Math.ceil(Math.max(Math.abs(v)+Math.abs(E)||f,Math.abs(S)+Math.abs(C)||f)*R);h=new OffscreenCanvas(I,F),u=h.getContext("2d",{alpha:!0,willReadFrequently:!0}),u.font=p,u.filter="grayscale(1)",u.fillStyle="white",u.fillRect(0,0,I,F),u.fillStyle="black",u.fillText(t,I*(R-1)/2,F*(3-R)/2);const N=A(this,re,Zb).call(this,u.getImageData(0,0,I,F).data),H=A(this,re,ES).call(this,N),U=A(this,re,tv).call(this,H),Q=A(this,re,Jb).call(this,N,I,F,U);return this.processDrawnLines({lines:{curves:Q,width:I,height:F},pageWidth:r,pageHeight:o,rotation:l,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(t,e,s,n,r){const[o,l,c]=A(this,re,SS).call(this,t),[h,u]=A(this,re,AS).call(this,o,l,c,Math.hypot(l,c)*a(this,Al).sigmaSFactor,a(this,Al).sigmaR,a(this,Al).kernelSize),f=A(this,re,tv).call(this,u),p=A(this,re,Jb).call(this,h,l,c,f);return this.processDrawnLines({lines:{curves:p,width:l,height:c},pageWidth:e,pageHeight:s,rotation:n,innerMargin:r,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:s,rotation:n,innerMargin:r,mustSmooth:o,areContours:l}){n%180!==0&&([e,s]=[s,e]);const{curves:c,width:h,height:u}=t,f=t.thickness??0,p=[],g=Math.min(e/h,s/u),_=g/e,v=g/s,E=[];for(const{points:C}of c){const T=o?A(this,re,wS).call(this,C):C;if(!T)continue;E.push(T);const R=T.length,I=new Float32Array(R),F=new Float32Array(3*(R===2?2:R-2));if(p.push({line:F,points:I}),R===2){I[0]=T[0]*_,I[1]=T[1]*v,F.set([NaN,NaN,NaN,NaN,I[0],I[1]],0);continue}let[N,H,U,Q]=T;N*=_,H*=v,U*=_,Q*=v,I.set([N,H,U,Q],0),F.set([NaN,NaN,NaN,NaN,N,H],0);for(let tt=4;tt<R;tt+=2){const Et=I[tt]=T[tt]*_,wt=I[tt+1]=T[tt+1]*v;F.set(ut.createBezierPoints(N,H,U,Q,Et,wt),(tt-2)*3),[N,H,U,Q]=[U,Q,Et,wt]}}if(p.length===0)return null;const S=l?new Yb:new uf;return S.build(p,e,s,1,n,l?0:f,r),{outline:S,newCurves:E,areContours:l,thickness:f,width:h,height:u}}static async compressSignature({outlines:t,areContours:e,thickness:s,width:n,height:r}){let o=1/0,l=-1/0,c=0;for(const T of t){c+=T.length;for(let R=2,I=T.length;R<I;R++){const F=T[R]-T[R-2];o=Math.min(o,F),l=Math.max(l,F)}}let h;o>=-128&&l<=127?h=Int8Array:o>=-32768&&l<=32767?h=Int16Array:h=Int32Array;const u=t.length,f=Hf+Bh*u,p=new Uint32Array(f);let g=0;p[g++]=f*Uint32Array.BYTES_PER_ELEMENT+(c-2*u)*h.BYTES_PER_ELEMENT,p[g++]=0,p[g++]=n,p[g++]=r,p[g++]=e?0:1,p[g++]=Math.max(0,Math.floor(s??0)),p[g++]=u,p[g++]=h.BYTES_PER_ELEMENT;for(const T of t)p[g++]=T.length-2,p[g++]=T[0],p[g++]=T[1];const _=new CompressionStream("deflate-raw"),v=_.writable.getWriter();await v.ready,v.write(p);const E=h.prototype.constructor;for(const T of t){const R=new E(T.length-2);for(let I=2,F=T.length;I<F;I++)R[I-2]=T[I]-T[I-2];v.write(R)}v.close();const S=await new Response(_.readable).arrayBuffer(),C=new Uint8Array(S);return E0(C)}static async decompressSignature(t){try{const e=NR(t),{readable:s,writable:n}=new DecompressionStream("deflate-raw"),r=n.getWriter();await r.ready,r.write(e).then(async()=>{await r.ready,await r.close()}).catch(()=>{});let o=null,l=0;for await(const T of s)o||(o=new Uint8Array(new Uint32Array(T.buffer,0,4)[0])),o.set(T,l),l+=T.length;const c=new Uint32Array(o.buffer,0,o.length>>2),h=c[1];if(h!==0)throw new Error(`Invalid version: ${h}`);const u=c[2],f=c[3],p=c[4]===0,g=c[5],_=c[6],v=c[7],E=[],S=(Hf+Bh*_)*Uint32Array.BYTES_PER_ELEMENT;let C;switch(v){case Int8Array.BYTES_PER_ELEMENT:C=new Int8Array(o.buffer,S);break;case Int16Array.BYTES_PER_ELEMENT:C=new Int16Array(o.buffer,S);break;case Int32Array.BYTES_PER_ELEMENT:C=new Int32Array(o.buffer,S);break}l=0;for(let T=0;T<_;T++){const R=c[Bh*T+Hf],I=new Float32Array(R+2);E.push(I);for(let F=0;F<Bh-1;F++)I[F]=c[Bh*T+Hf+F+1];for(let F=0;F<R;F++)I[F+2]=I[F]+C[l++]}return{areContours:p,thickness:g,outlines:E,width:u,height:f}}catch(e){return Ot(`decompressSignature: ${e}`),null}}}Al=new WeakMap,re=new WeakSet,Qb=function(t,e,s,n){return s-=t,n-=e,s===0?n>0?0:4:s===1?n+6:2-n},ln=new WeakMap,_S=function(t,e,s,n,r,o,l){const c=A(this,re,Qb).call(this,s,n,r,o);for(let h=0;h<8;h++){const u=(-h+c-l+16)%8,f=a(this,ln)[2*u],p=a(this,ln)[2*u+1];if(t[(s+f)*e+(n+p)]!==0)return u}return-1},yS=function(t,e,s,n,r,o,l){const c=A(this,re,Qb).call(this,s,n,r,o);for(let h=0;h<8;h++){const u=(h+c+l+16)%8,f=a(this,ln)[2*u],p=a(this,ln)[2*u+1];if(t[(s+f)*e+(n+p)]!==0)return u}return-1},Jb=function(t,e,s,n){const r=t.length,o=new Int32Array(r);for(let u=0;u<r;u++)o[u]=t[u]<=n?1:0;for(let u=1;u<s-1;u++)o[u*e]=o[u*e+e-1]=0;for(let u=0;u<e;u++)o[u]=o[e*s-1-u]=0;let l=1,c;const h=[];for(let u=1;u<s-1;u++){c=1;for(let f=1;f<e-1;f++){const p=u*e+f,g=o[p];if(g===0)continue;let _=u,v=f;if(g===1&&o[p-1]===0)l+=1,v-=1;else if(g>=1&&o[p+1]===0)l+=1,v+=1,g>1&&(c=g);else{g!==1&&(c=Math.abs(g));continue}const E=[f,u],S=v===f+1,C={isHole:S,points:E,id:l,parent:0};h.push(C);let T;for(const tt of h)if(tt.id===c){T=tt;break}T?T.isHole?C.parent=S?T.parent:c:C.parent=S?c:T.parent:C.parent=S?c:0;const R=A(this,re,_S).call(this,o,e,u,f,_,v,0);if(R===-1){o[p]=-l,o[p]!==1&&(c=Math.abs(o[p]));continue}let I=a(this,ln)[2*R],F=a(this,ln)[2*R+1];const N=u+I,H=f+F;_=N,v=H;let U=u,Q=f;for(;;){const tt=A(this,re,yS).call(this,o,e,U,Q,_,v,1);I=a(this,ln)[2*tt],F=a(this,ln)[2*tt+1];const Et=U+I,wt=Q+F;E.push(wt,Et);const Rt=U*e+Q;if(o[Rt+1]===0?o[Rt]=-l:o[Rt]===1&&(o[Rt]=l),Et===u&&wt===f&&U===N&&Q===H){o[p]!==1&&(c=Math.abs(o[p]));break}else _=U,v=Q,U=Et,Q=wt}}}return h},_p=function(t,e,s,n){if(s-e<=4){for(let N=e;N<s-2;N+=2)n.push(t[N],t[N+1]);return}const r=t[e],o=t[e+1],l=t[s-4]-r,c=t[s-3]-o,h=Math.hypot(l,c),u=l/h,f=c/h,p=u*o-f*r,g=c/l,_=1/h,v=Math.atan(g),E=Math.cos(v),S=Math.sin(v),C=_*(Math.abs(E)+Math.abs(S)),T=_*(1-C+C**2),R=Math.max(Math.atan(Math.abs(S+E)*T),Math.atan(Math.abs(S-E)*T));let I=0,F=e;for(let N=e+2;N<s-2;N+=2){const H=Math.abs(p-u*t[N+1]+f*t[N]);H>I&&(F=N,I=H)}I>(h*R)**2?(A(this,re,_p).call(this,t,e,F+2,n),A(this,re,_p).call(this,t,F,s,n)):n.push(r,o)},wS=function(t){const e=[],s=t.length;return A(this,re,_p).call(this,t,0,s,e),e.push(t[s-2],t[s-1]),e.length<=4?null:e},AS=function(t,e,s,n,r,o){const l=new Float32Array(o**2),c=-2*n**2,h=o>>1;for(let v=0;v<o;v++){const E=(v-h)**2;for(let S=0;S<o;S++)l[v*o+S]=Math.exp((E+(S-h)**2)/c)}const u=new Float32Array(256),f=-2*r**2;for(let v=0;v<256;v++)u[v]=Math.exp(v**2/f);const p=t.length,g=new Uint8Array(p),_=new Uint32Array(256);for(let v=0;v<s;v++)for(let E=0;E<e;E++){const S=v*e+E,C=t[S];let T=0,R=0;for(let F=0;F<o;F++){const N=v+F-h;if(!(N<0||N>=s))for(let H=0;H<o;H++){const U=E+H-h;if(U<0||U>=e)continue;const Q=t[N*e+U],tt=l[F*o+H]*u[Math.abs(Q-C)];T+=Q*tt,R+=tt}}const I=g[S]=Math.round(T/R);_[I]++}return[g,_]},ES=function(t){const e=new Uint32Array(256);for(const s of t)e[s]++;return e},Zb=function(t){const e=t.length,s=new Uint8ClampedArray(e>>2);let n=-1/0,r=1/0;for(let l=0,c=s.length;l<c;l++){if(t[(l<<2)+3]===0){n=s[l]=255;continue}const u=s[l]=t[l<<2];u>n&&(n=u),u<r&&(r=u)}const o=255/(n-r);for(let l=0;l<e;l++)s[l]=(s[l]-r)*o;return s},tv=function(t){let e,s=-1/0,n=-1/0;const r=t.findIndex(c=>c!==0);let o=r,l=r;for(e=r;e<256;e++){const c=t[e];c>s&&(e-o>n&&(n=e-o,l=e-1),s=c,o=e)}for(e=l-1;e>=0&&!(t[e]>t[e+1]);e--);return e},SS=function(t){const e=t,{width:s,height:n}=t,{maxDim:r}=a(this,Al);let o=s,l=n;if(s>r||n>r){let p=s,g=n,_=Math.log2(Math.max(s,n)/r);const v=Math.floor(_);_=_===v?v-1:v;for(let S=0;S<_;S++){o=Math.ceil(p/2),l=Math.ceil(g/2);const C=new OffscreenCanvas(o,l);C.getContext("2d").drawImage(t,0,0,p,g,0,0,o,l),p=o,g=l,t!==e&&t.close(),t=C.transferToImageBitmap()}const E=Math.min(r/o,r/l);o=Math.round(o*E),l=Math.round(l*E)}const h=new OffscreenCanvas(o,l).getContext("2d",{willReadFrequently:!0});h.filter="grayscale(1)",h.drawImage(t,0,0,t.width,t.height,0,0,o,l);const u=h.getImageData(0,0,o,l).data;return[A(this,re,Zb).call(this,u),o,l]},w(Br,re),w(Br,Al,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),w(Br,ln,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class Hv extends fS{constructor(){super(),super.updateProperties({fill:Se._defaultLineColor,"stroke-width":0})}clone(){const t=new Hv;return t.updateAll(this),t}}class jv extends kg{constructor(t){super(t),super.updateProperties({stroke:Se._defaultLineColor,"stroke-width":1})}clone(){const t=new jv(this._viewParameters);return t.updateAll(this),t}}var Lo,wi,Do,Oo;const ci=class ci extends zp{constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"});w(this,Lo,!1);w(this,wi,null);w(this,Do,null);w(this,Oo,null);this._willKeepAspectRatio=!0,b(this,Do,e.signatureData||null),b(this,wi,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,s){Se.initialize(e,s),this._defaultDrawingOptions=new Hv,this._defaultDrawnSignatureOptions=new jv(s.viewParameters)}static getDefaultDrawingOptions(e){const s=this._defaultDrawingOptions.clone();return s.updateProperties(e),s}static get supportMultipleDrawings(){return!1}static get typesMap(){return Gt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!a(this,wi)}}static computeTelemetryFinalData(e){const s=e.get("hasDescription");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,s;const{_isCopy:n}=this;if(n&&(this._isCopy=!1,e=this.x,s=this.y),super.render(),this._drawId===null)if(a(this,Do)){const{lines:r,mustSmooth:o,areContours:l,description:c,uuid:h,heightInPage:u}=a(this,Do),{rawDims:{pageWidth:f,pageHeight:p},rotation:g}=this.parent.viewport,_=Br.processDrawnLines({lines:r,pageWidth:f,pageHeight:p,rotation:g,innerMargin:ci._INNER_MARGIN,mustSmooth:o,areContours:l});this.addSignature(_,u,c,h)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return n&&(this._isCopy=!0,this._moveAfterPaste(e,s)),this.div}setUuid(e){b(this,Oo,e),this.addEditToolbar()}getUuid(){return a(this,Oo)}get description(){return a(this,wi)}set description(e){b(this,wi,e),super.addEditToolbar().then(s=>{s==null||s.updateEditSignatureButton(e)})}getSignaturePreview(){const{newCurves:e,areContours:s,thickness:n,width:r,height:o}=a(this,Do),l=Math.max(r,o),c=Br.processDrawnLines({lines:{curves:e.map(h=>({points:h})),thickness:n,width:r,height:o},pageWidth:l,pageHeight:l,rotation:0,innerMargin:0,mustSmooth:!1,areContours:s});return{areContours:s,outline:c.outline}}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.signatureManager&&a(this,wi)!==null&&(await e.addEditSignatureButton(this._uiManager.signatureManager,a(this,Oo),a(this,wi)),e.show()),e):null}addSignature(e,s,n,r){const{x:o,y:l}=this,{outline:c}=b(this,Do,e);b(this,Lo,c instanceof Yb),b(this,wi,n),this.div.setAttribute("data-l10n-args",JSON.stringify({description:n}));let h;a(this,Lo)?h=ci.getDefaultDrawingOptions():(h=ci._defaultDrawnSignatureOptions.clone(),h.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:h});const[u,f]=this.parentDimensions,[,p]=this.pageDimensions;let g=s/p;g=g>=1?.5:g,this.width*=g/this.height,this.width>=1&&(g*=.9/this.width,this.width=.9),this.height=g,this.setDims(u*this.width,f*this.height),this.x=o,this.y=l,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!n}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:s,pageHeight:n},rotation:r}=this.parent.viewport;return Br.process(e,s,n,r,ci._INNER_MARGIN)}getFromText(e,s){const{rawDims:{pageWidth:n,pageHeight:r},rotation:o}=this.parent.viewport;return Br.extractContoursFromText(e,s,n,r,o,ci._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:s,pageHeight:n},rotation:r}=this.parent.viewport;return Br.processDrawnLines({lines:e,pageWidth:s,pageHeight:n,rotation:r,innerMargin:ci._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:s}){e?this._drawingOptions=ci.getDefaultDrawingOptions():(this._drawingOptions=ci._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":s}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:s,points:n,rect:r}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":o}}=this,l={annotationType:Dt.SIGNATURE,isSignature:!0,areContours:a(this,Lo),color:[0,0,0],thickness:a(this,Lo)?0:o,pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(l.paths={lines:s,points:n},l.uuid=a(this,Oo),l.isCopy=!0):l.lines=s,a(this,wi)&&(l.accessibilityData={type:"Figure",alt:a(this,wi)}),l}static deserializeDraw(e,s,n,r,o,l){return l.areContours?Yb.deserialize(e,s,n,r,o,l):uf.deserialize(e,s,n,r,o,l)}static async deserialize(e,s,n){var o;const r=await super.deserialize(e,s,n);return b(r,Lo,e.areContours),b(r,wi,((o=e.accessibilityData)==null?void 0:o.alt)||""),b(r,Oo,e.uuid),r}};Lo=new WeakMap,wi=new WeakMap,Do=new WeakMap,Oo=new WeakMap,Z(ci,"_type","signature"),Z(ci,"_editorType",Dt.SIGNATURE),Z(ci,"_defaultDrawingOptions",null);let ev=ci;var Pe,us,No,Mr,Fo,vh,Lr,El,jn,Ai,_h,Zt,nu,ru,yp,wp,Ap,iv,Ep,xS;class sv extends Se{constructor(e){super({...e,name:"stampEditor"});w(this,Zt);w(this,Pe,null);w(this,us,null);w(this,No,null);w(this,Mr,null);w(this,Fo,null);w(this,vh,"");w(this,Lr,null);w(this,El,!1);w(this,jn,null);w(this,Ai,!1);w(this,_h,!1);b(this,Mr,e.bitmapUrl),b(this,Fo,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,s){Se.initialize(e,s)}static isHandlingMimeForPasting(e){return Km.includes(e)}static paste(e,s){s.pasteEditor({mode:Dt.STAMP},{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const s=e.get("hasAltText");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}async mlGuessAltText(e=null,s=!0){if(this.hasAltTextData())return null;const{mlManager:n}=this._uiManager;if(!n)throw new Error("No ML.");if(!await n.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:l}=e||this.copyCanvas(null,null,!0).imageData,c=await n.guess({name:"altText",request:{data:r,width:o,height:l,channels:r.length/(o*l)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const h=c.output;return await this.setGuessedAltText(h),s&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}remove(){var e;a(this,us)&&(b(this,Pe,null),this._uiManager.imageManager.deleteId(a(this,us)),(e=a(this,Lr))==null||e.remove(),b(this,Lr,null),a(this,jn)&&(clearTimeout(a(this,jn)),b(this,jn,null))),super.remove()}rebuild(){if(!this.parent){a(this,us)&&A(this,Zt,yp).call(this);return}super.rebuild(),this.div!==null&&(a(this,us)&&a(this,Lr)===null&&A(this,Zt,yp).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(a(this,No)||a(this,Pe)||a(this,Mr)||a(this,Fo)||a(this,us)||a(this,El))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,s;return this._isCopy&&(e=this.x,s=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),a(this,El)||(a(this,Pe)?A(this,Zt,wp).call(this):A(this,Zt,yp).call(this)),this._isCopy&&this._moveAfterPaste(e,s),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,s){const{id:n,bitmap:r}=this._uiManager.imageManager.getFromCanvas(e,s);s.remove(),n&&this._uiManager.imageManager.isValidId(n)&&(b(this,us,n),r&&b(this,Pe,r),b(this,El,!1),A(this,Zt,wp).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;a(this,jn)!==null&&clearTimeout(a(this,jn)),b(this,jn,setTimeout(()=>{b(this,jn,null),A(this,Zt,iv).call(this)},200))}copyCanvas(e,s,n=!1){var g;e||(e=224);const{width:r,height:o}=a(this,Pe),l=new Xn;let c=a(this,Pe),h=r,u=o,f=null;if(s){if(r>s||o>s){const H=Math.min(s/r,s/o);h=Math.floor(r*H),u=Math.floor(o*H)}f=document.createElement("canvas");const _=f.width=Math.ceil(h*l.sx),v=f.height=Math.ceil(u*l.sy);a(this,Ai)||(c=A(this,Zt,Ap).call(this,_,v));const E=f.getContext("2d");E.filter=this._uiManager.hcmFilter;let S="white",C="#cfcfd8";this._uiManager.hcmFilter!=="none"?C="black":(g=window.matchMedia)!=null&&g.call(window,"(prefers-color-scheme: dark)").matches&&(S="#8f8f9d",C="#42414d");const T=15,R=T*l.sx,I=T*l.sy,F=new OffscreenCanvas(R*2,I*2),N=F.getContext("2d");N.fillStyle=S,N.fillRect(0,0,R*2,I*2),N.fillStyle=C,N.fillRect(0,0,R,I),N.fillRect(R,I,R,I),E.fillStyle=E.createPattern(F,"repeat"),E.fillRect(0,0,_,v),E.drawImage(c,0,0,c.width,c.height,0,0,_,v)}let p=null;if(n){let _,v;if(l.symmetric&&c.width<e&&c.height<e)_=c.width,v=c.height;else if(c=a(this,Pe),r>e||o>e){const C=Math.min(e/r,e/o);_=Math.floor(r*C),v=Math.floor(o*C),a(this,Ai)||(c=A(this,Zt,Ap).call(this,_,v))}const S=new OffscreenCanvas(_,v).getContext("2d",{willReadFrequently:!0});S.drawImage(c,0,0,c.width,c.height,0,0,_,v),p={width:_,height:v,data:S.getImageData(0,0,_,v).data}}return{canvas:f,width:h,height:u,imageData:p}}static async deserialize(e,s,n){var E;let r=null,o=!1;if(e instanceof HE){const{data:{rect:S,rotation:C,id:T,structParent:R,popupRef:I},container:F,parent:{page:{pageNumber:N}},canvas:H}=e;let U,Q;H?(delete e.canvas,{id:U,bitmap:Q}=n.imageManager.getFromCanvas(F.id,H),H.remove()):(o=!0,e._hasNoCanvas=!0);const tt=((E=await s._structTree.getAriaAttributes(`${Iv}${T}`))==null?void 0:E.get("aria-label"))||"";r=e={annotationType:Dt.STAMP,bitmapId:U,bitmap:Q,pageIndex:N-1,rect:S.slice(0),rotation:C,id:T,deleted:!1,accessibilityData:{decorative:!1,altText:tt},isSvg:!1,structParent:R,popupRef:I}}const l=await super.deserialize(e,s,n),{rect:c,bitmap:h,bitmapUrl:u,bitmapId:f,isSvg:p,accessibilityData:g}=e;o?(n.addMissingCanvas(e.id,l),b(l,El,!0)):f&&n.imageManager.isValidId(f)?(b(l,us,f),h&&b(l,Pe,h)):b(l,Mr,u),b(l,Ai,p);const[_,v]=l.pageDimensions;return l.width=(c[2]-c[0])/_,l.height=(c[3]-c[1])/v,l.annotationElementId=e.id||null,g&&(l.altTextData=g),l._initialData=r,b(l,_h,!!r),l}serialize(e=!1,s=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n={annotationType:Dt.STAMP,bitmapId:a(this,us),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:a(this,Ai),structTreeParentId:this._structTreeParentId};if(e)return n.bitmapUrl=A(this,Zt,Ep).call(this,!0),n.accessibilityData=this.serializeAltText(!0),n.isCopy=!0,n;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(n.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const c=A(this,Zt,xS).call(this,n);if(c.isSame)return null;c.isSameAltText?delete n.accessibilityData:n.accessibilityData.structParent=this._initialData.structParent??-1}if(n.id=this.annotationElementId,s===null)return n;s.stamps||(s.stamps=new Map);const l=a(this,Ai)?(n.rect[2]-n.rect[0])*(n.rect[3]-n.rect[1]):null;if(!s.stamps.has(a(this,us)))s.stamps.set(a(this,us),{area:l,serialized:n}),n.bitmap=A(this,Zt,Ep).call(this,!1);else if(a(this,Ai)){const c=s.stamps.get(a(this,us));l>c.area&&(c.area=l,c.serialized.bitmap.close(),c.serialized.bitmap=A(this,Zt,Ep).call(this,!1))}return n}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}}Pe=new WeakMap,us=new WeakMap,No=new WeakMap,Mr=new WeakMap,Fo=new WeakMap,vh=new WeakMap,Lr=new WeakMap,El=new WeakMap,jn=new WeakMap,Ai=new WeakMap,_h=new WeakMap,Zt=new WeakSet,nu=function(e,s=!1){if(!e){this.remove();return}b(this,Pe,e.bitmap),s||(b(this,us,e.id),b(this,Ai,e.isSvg)),e.file&&b(this,vh,e.file.name),A(this,Zt,wp).call(this)},ru=function(){if(b(this,No,null),this._uiManager.enableWaiting(!1),!!a(this,Lr)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,Pe)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&a(this,Pe)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},yp=function(){if(a(this,us)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(a(this,us)).then(n=>A(this,Zt,nu).call(this,n,!0)).finally(()=>A(this,Zt,ru).call(this));return}if(a(this,Mr)){const n=a(this,Mr);b(this,Mr,null),this._uiManager.enableWaiting(!0),b(this,No,this._uiManager.imageManager.getFromUrl(n).then(r=>A(this,Zt,nu).call(this,r)).finally(()=>A(this,Zt,ru).call(this)));return}if(a(this,Fo)){const n=a(this,Fo);b(this,Fo,null),this._uiManager.enableWaiting(!0),b(this,No,this._uiManager.imageManager.getFromFile(n).then(r=>A(this,Zt,nu).call(this,r)).finally(()=>A(this,Zt,ru).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=Km.join(",");const s=this._uiManager._signal;b(this,No,new Promise(n=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),A(this,Zt,nu).call(this,r)}n()},{signal:s}),e.addEventListener("cancel",()=>{this.remove(),n()},{signal:s})}).finally(()=>A(this,Zt,ru).call(this))),e.click()},wp=function(){var f;const{div:e}=this;let{width:s,height:n}=a(this,Pe);const[r,o]=this.pageDimensions,l=.75;if(this.width)s=this.width*r,n=this.height*o;else if(s>l*r||n>l*o){const p=Math.min(l*r/s,l*o/n);s*=p,n*=p}const[c,h]=this.parentDimensions;this.setDims(s*c/r,n*h/o),this._uiManager.enableWaiting(!1);const u=b(this,Lr,document.createElement("canvas"));u.setAttribute("role","img"),this.addContainer(u),this.width=s/r,this.height=n/o,(f=this._initialOptions)!=null&&f.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),A(this,Zt,iv).call(this),a(this,_h)||(this.parent.addUndoableEditor(this),b(this,_h,!0)),this._reportTelemetry({action:"inserted_image"}),a(this,vh)&&this.div.setAttribute("aria-description",a(this,vh))},Ap=function(e,s){const{width:n,height:r}=a(this,Pe);let o=n,l=r,c=a(this,Pe);for(;o>2*e||l>2*s;){const h=o,u=l;o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),l>2*s&&(l=l>=16384?Math.floor(l/2)-1:Math.ceil(l/2));const f=new OffscreenCanvas(o,l);f.getContext("2d").drawImage(c,0,0,h,u,0,0,o,l),c=f.transferToImageBitmap()}return c},iv=function(){const[e,s]=this.parentDimensions,{width:n,height:r}=this,o=new Xn,l=Math.ceil(n*e*o.sx),c=Math.ceil(r*s*o.sy),h=a(this,Lr);if(!h||h.width===l&&h.height===c)return;h.width=l,h.height=c;const u=a(this,Ai)?a(this,Pe):A(this,Zt,Ap).call(this,l,c),f=h.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(u,0,0,u.width,u.height,0,0,l,c)},Ep=function(e){if(e){if(a(this,Ai)){const r=this._uiManager.imageManager.getSvgUrl(a(this,us));if(r)return r}const s=document.createElement("canvas");return{width:s.width,height:s.height}=a(this,Pe),s.getContext("2d").drawImage(a(this,Pe),0,0),s.toDataURL()}if(a(this,Ai)){const[s,n]=this.pageDimensions,r=Math.round(this.width*s*Xo.PDF_TO_CSS_UNITS),o=Math.round(this.height*n*Xo.PDF_TO_CSS_UNITS),l=new OffscreenCanvas(r,o);return l.getContext("2d").drawImage(a(this,Pe),0,0,a(this,Pe).width,a(this,Pe).height,0,0,r,o),l.transferToImageBitmap()}return structuredClone(a(this,Pe))},xS=function(e){var l;const{pageIndex:s,accessibilityData:{altText:n}}=this._initialData,r=e.pageIndex===s,o=(((l=e.accessibilityData)==null?void 0:l.alt)||"")===n;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}},Z(sv,"_type","stamp"),Z(sv,"_editorType",Dt.STAMP);var Sl,yh,Vn,$o,Dr,Vi,Bo,wh,xl,cn,Or,Rs,Nr,yt,Ho,ke,CS,Sn,rv,ov,Sp;const Yi=class Yi{constructor({uiManager:t,pageIndex:e,div:s,structTreeLayer:n,accessibilityManager:r,annotationLayer:o,drawLayer:l,textLayer:c,viewport:h,l10n:u}){w(this,ke);w(this,Sl);w(this,yh,!1);w(this,Vn,null);w(this,$o,null);w(this,Dr,null);w(this,Vi,new Map);w(this,Bo,!1);w(this,wh,!1);w(this,xl,!1);w(this,cn,null);w(this,Or,null);w(this,Rs,null);w(this,Nr,null);w(this,yt);const f=[...a(Yi,Ho).values()];if(!Yi._initialized){Yi._initialized=!0;for(const p of f)p.initialize(u,t)}t.registerEditorTypes(f),b(this,yt,t),this.pageIndex=e,this.div=s,b(this,Sl,r),b(this,Vn,o),this.viewport=h,b(this,Rs,c),this.drawLayer=l,this._structTree=n,a(this,yt).addLayer(this)}get isEmpty(){return a(this,Vi).size===0}get isInvisible(){return this.isEmpty&&a(this,yt).getMode()===Dt.NONE}updateToolbar(t){a(this,yt).updateToolbar(t)}updateMode(t=a(this,yt).getMode()){switch(A(this,ke,Sp).call(this),t){case Dt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Dt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Dt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const s of a(Yi,Ho).values())e.toggle(`${s._type}Editing`,t===s._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=a(this,Rs))==null?void 0:e.div)}setEditingState(t){a(this,yt).setEditingState(t)}addCommands(t){a(this,yt).addCommands(t)}cleanUndoStack(t){a(this,yt).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=a(this,Vn))==null||e.div.classList.toggle("disabled",!t)}async enable(){b(this,xl,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const s of a(this,Vi).values())s.enableEditing(),s.show(!0),s.annotationElementId&&(a(this,yt).removeChangedExistingAnnotation(s),t.add(s.annotationElementId));if(!a(this,Vn)){b(this,xl,!1);return}const e=a(this,Vn).getEditableAnnotations();for(const s of e){if(s.hide(),a(this,yt).isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const n=await this.deserialize(s);n&&(this.addOrRebuild(n),n.enableEditing())}b(this,xl,!1)}disable(){var n;b(this,wh,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const r of a(this,Vi).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){t.set(r.annotationElementId,r);continue}else e.set(r.annotationElementId,r);(n=this.getEditableAnnotation(r.annotationElementId))==null||n.show(),r.remove()}if(a(this,Vn)){const r=a(this,Vn).getEditableAnnotations();for(const o of r){const{id:l}=o.data;if(a(this,yt).isDeletedAnnotationElement(l))continue;let c=e.get(l);if(c){c.resetAnnotationElement(o),c.show(!1),o.show();continue}c=t.get(l),c&&(a(this,yt).addChangedExistingAnnotation(c),c.renderAnnotationElement(o)&&c.show(!1)),o.show()}}A(this,ke,Sp).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const r of a(Yi,Ho).values())s.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),b(this,wh,!1)}getEditableAnnotation(t){var e;return((e=a(this,Vn))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){a(this,yt).getActive()!==t&&a(this,yt).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=a(this,Rs))!=null&&t.div&&!a(this,Nr)){b(this,Nr,new AbortController);const e=a(this,yt).combinedSignal(a(this,Nr));a(this,Rs).div.addEventListener("pointerdown",A(this,ke,CS).bind(this),{signal:e}),a(this,Rs).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=a(this,Rs))!=null&&t.div&&a(this,Nr)&&(a(this,Nr).abort(),b(this,Nr,null),a(this,Rs).div.classList.remove("highlighting"))}enableClick(){if(a(this,$o))return;b(this,$o,new AbortController);const t=a(this,yt).combinedSignal(a(this,$o));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=a(this,$o))==null||t.abort(),b(this,$o,null)}attach(t){a(this,Vi).set(t.id,t);const{annotationElementId:e}=t;e&&a(this,yt).isDeletedAnnotationElement(e)&&a(this,yt).removeDeletedAnnotationElement(t)}detach(t){var e;a(this,Vi).delete(t.id),(e=a(this,Sl))==null||e.removePointerInTextLayer(t.contentDiv),!a(this,wh)&&t.annotationElementId&&a(this,yt).addDeletedAnnotationElement(t)}remove(t){this.detach(t),a(this,yt).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(a(this,yt).addDeletedAnnotationElement(t.annotationElementId),Se.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),a(this,yt).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!a(this,xl)),a(this,yt).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var s;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!a(this,Dr)&&(t._focusEventsAllowed=!1,b(this,Dr,setTimeout(()=>{b(this,Dr,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:a(this,yt)._signal}),e.focus())},0))),t._structTreeParentId=(s=a(this,Sl))==null?void 0:s.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),s=()=>{t.remove()};this.addCommands({cmd:e,undo:s,mustExec:!1})}getNextId(){return a(this,yt).getId()}combinedSignal(t){return a(this,yt).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=a(this,ke,Sn))==null?void 0:t.canCreateNewEmptyEditor()}async pasteEditor(t,e){this.updateToolbar(t),await a(this,yt).updateMode(t.mode);const{offsetX:s,offsetY:n}=A(this,ke,ov).call(this),r=this.getNextId(),o=A(this,ke,rv).call(this,{parent:this,id:r,x:s,y:n,uiManager:a(this,yt),isCentered:!0,...e});o&&this.add(o)}async deserialize(t){var e;return await((e=a(Yi,Ho).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,a(this,yt)))||null}createAndAddNewEditor(t,e,s={}){const n=this.getNextId(),r=A(this,ke,rv).call(this,{parent:this,id:n,x:t.offsetX,y:t.offsetY,uiManager:a(this,yt),isCentered:e,...s});return r&&this.add(r),r}addNewEditor(t={}){this.createAndAddNewEditor(A(this,ke,ov).call(this),!0,t)}setSelected(t){a(this,yt).setSelected(t)}toggleSelected(t){a(this,yt).toggleSelected(t)}unselect(t){a(this,yt).unselect(t)}pointerup(t){var n;const{isMac:e}=Es.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!a(this,Bo)||(b(this,Bo,!1),(n=a(this,ke,Sn))!=null&&n.isDrawer&&a(this,ke,Sn).supportMultipleDrawings))return;if(!a(this,yh)){b(this,yh,!0);return}const s=a(this,yt).getMode();if(s===Dt.STAMP||s===Dt.SIGNATURE){a(this,yt).unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){var n;if(a(this,yt).getMode()===Dt.HIGHLIGHT&&this.enableTextSelection(),a(this,Bo)){b(this,Bo,!1);return}const{isMac:e}=Es.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(b(this,Bo,!0),(n=a(this,ke,Sn))!=null&&n.isDrawer){this.startDrawingSession(t);return}const s=a(this,yt).getActive();b(this,yh,!s||s.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),a(this,cn)){a(this,ke,Sn).startDrawing(this,a(this,yt),!1,t);return}a(this,yt).setCurrentDrawingSession(this),b(this,cn,new AbortController);const e=a(this,yt).combinedSignal(a(this,cn));this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(b(this,Or,null),this.commitOrRemove())},{signal:e}),a(this,ke,Sn).startDrawing(this,a(this,yt),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&b(this,Or,e);return}a(this,Or)&&setTimeout(()=>{var e;(e=a(this,Or))==null||e.focus(),b(this,Or,null)},0)}endDrawingSession(t=!1){return a(this,cn)?(a(this,yt).setCurrentDrawingSession(null),a(this,cn).abort(),b(this,cn,null),b(this,Or,null),a(this,ke,Sn).endDrawing(t)):null}findNewParent(t,e,s){const n=a(this,yt).findParent(e,s);return n===null||n===this?!1:(n.changeParent(t),!0)}commitOrRemove(){return a(this,cn)?(this.endDrawingSession(),!0):!1}onScaleChanging(){a(this,cn)&&a(this,ke,Sn).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=a(this,yt).getActive())==null?void 0:t.parent)===this&&(a(this,yt).commitOrRemove(),a(this,yt).setActiveEditor(null)),a(this,Dr)&&(clearTimeout(a(this,Dr)),b(this,Dr,null));for(const s of a(this,Vi).values())(e=a(this,Sl))==null||e.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,a(this,Vi).clear(),a(this,yt).removeLayer(this)}render({viewport:t}){this.viewport=t,Il(this.div,t);for(const e of a(this,yt).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){a(this,yt).commitOrRemove(),A(this,ke,Sp).call(this);const e=this.viewport.rotation,s=t.rotation;if(this.viewport=t,Il(this.div,{rotation:s}),e!==s)for(const n of a(this,Vi).values())n.rotate(s)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return a(this,yt).viewParameters.realScale}};Sl=new WeakMap,yh=new WeakMap,Vn=new WeakMap,$o=new WeakMap,Dr=new WeakMap,Vi=new WeakMap,Bo=new WeakMap,wh=new WeakMap,xl=new WeakMap,cn=new WeakMap,Or=new WeakMap,Rs=new WeakMap,Nr=new WeakMap,yt=new WeakMap,Ho=new WeakMap,ke=new WeakSet,CS=function(t){a(this,yt).unselectAll();const{target:e}=t;if(e===a(this,Rs).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&a(this,Rs).div.contains(e)){const{isMac:s}=Es.platform;if(t.button!==0||t.ctrlKey&&s)return;a(this,yt).showAllEditors("highlight",!0,!0),a(this,Rs).div.classList.add("free"),this.toggleDrawing(),Up.startHighlighting(this,a(this,yt).direction==="ltr",{target:a(this,Rs).div,x:t.x,y:t.y}),a(this,Rs).div.addEventListener("pointerup",()=>{a(this,Rs).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:a(this,yt)._signal}),t.preventDefault()}},Sn=function(){return a(Yi,Ho).get(a(this,yt).getMode())},rv=function(t){const e=a(this,ke,Sn);return e?new e.prototype.constructor(t):null},ov=function(){const{x:t,y:e,width:s,height:n}=this.div.getBoundingClientRect(),r=Math.max(0,t),o=Math.max(0,e),l=Math.min(window.innerWidth,t+s),c=Math.min(window.innerHeight,e+n),h=(r+l)/2-t,u=(o+c)/2-e,[f,p]=this.viewport.rotation%180===0?[h,u]:[u,h];return{offsetX:f,offsetY:p}},Sp=function(){for(const t of a(this,Vi).values())t.isEmpty()&&t.remove()},Z(Yi,"_initialized",!1),w(Yi,Ho,new Map([Nb,Kb,sv,Up,ev].map(t=>[t._editorType,t])));let nv=Yi;var hn,qs,Cl,Jd,cg,TS,Kn,lv,PS,cv;const ts=class ts{constructor({pageIndex:t}){w(this,Kn);w(this,hn,null);w(this,qs,new Map);w(this,Cl,new Map);this.pageIndex=t}setParent(t){if(!a(this,hn)){b(this,hn,t);return}if(a(this,hn)!==t){if(a(this,qs).size>0)for(const e of a(this,qs).values())e.remove(),t.append(e);b(this,hn,t)}}static get _svgFactory(){return Gt(this,"_svgFactory",new Hp)}draw(t,e=!1,s=!1){const n=Bs(ts,Jd)._++,r=A(this,Kn,lv).call(this),o=ts._svgFactory.createElement("defs");r.append(o);const l=ts._svgFactory.createElement("path");o.append(l);const c=`path_p${this.pageIndex}_${n}`;l.setAttribute("id",c),l.setAttribute("vector-effect","non-scaling-stroke"),e&&a(this,Cl).set(n,l);const h=s?A(this,Kn,PS).call(this,o,c):null,u=ts._svgFactory.createElement("use");return r.append(u),u.setAttribute("href",`#${c}`),this.updateProperties(r,t),a(this,qs).set(n,r),{id:n,clipPathId:`url(#${h})`}}drawOutline(t,e){const s=Bs(ts,Jd)._++,n=A(this,Kn,lv).call(this),r=ts._svgFactory.createElement("defs");n.append(r);const o=ts._svgFactory.createElement("path");r.append(o);const l=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke");let c;if(e){const f=ts._svgFactory.createElement("mask");r.append(f),c=`mask_p${this.pageIndex}_${s}`,f.setAttribute("id",c),f.setAttribute("maskUnits","objectBoundingBox");const p=ts._svgFactory.createElement("rect");f.append(p),p.setAttribute("width","1"),p.setAttribute("height","1"),p.setAttribute("fill","white");const g=ts._svgFactory.createElement("use");f.append(g),g.setAttribute("href",`#${l}`),g.setAttribute("stroke","none"),g.setAttribute("fill","black"),g.setAttribute("fill-rule","nonzero"),g.classList.add("mask")}const h=ts._svgFactory.createElement("use");n.append(h),h.setAttribute("href",`#${l}`),c&&h.setAttribute("mask",`url(#${c})`);const u=h.cloneNode();return n.append(u),h.classList.add("mainOutline"),u.classList.add("secondaryOutline"),this.updateProperties(n,t),a(this,qs).set(s,n),s}finalizeDraw(t,e){a(this,Cl).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var c;if(!e)return;const{root:s,bbox:n,rootClass:r,path:o}=e,l=typeof t=="number"?a(this,qs).get(t):t;if(l){if(s&&A(this,Kn,cv).call(this,l,s),n&&A(c=ts,cg,TS).call(c,l,n),r){const{classList:h}=l;for(const[u,f]of Object.entries(r))h.toggle(u,f)}if(o){const u=l.firstChild.firstChild;A(this,Kn,cv).call(this,u,o)}}}updateParent(t,e){if(e===this)return;const s=a(this,qs).get(t);s&&(a(e,hn).append(s),a(this,qs).delete(t),a(e,qs).set(t,s))}remove(t){a(this,Cl).delete(t),a(this,hn)!==null&&(a(this,qs).get(t).remove(),a(this,qs).delete(t))}destroy(){b(this,hn,null);for(const t of a(this,qs).values())t.remove();a(this,qs).clear(),a(this,Cl).clear()}};hn=new WeakMap,qs=new WeakMap,Cl=new WeakMap,Jd=new WeakMap,cg=new WeakSet,TS=function(t,[e,s,n,r]){const{style:o}=t;o.top=`${100*s}%`,o.left=`${100*e}%`,o.width=`${100*n}%`,o.height=`${100*r}%`},Kn=new WeakSet,lv=function(){const t=ts._svgFactory.create(1,1,!0);return a(this,hn).append(t),t.setAttribute("aria-hidden",!0),t},PS=function(t,e){const s=ts._svgFactory.createElement("clipPath");t.append(s);const n=`clip_${e}`;s.setAttribute("id",n),s.setAttribute("clipPathUnits","objectBoundingBox");const r=ts._svgFactory.createElement("use");return s.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),n},cv=function(t,e){for(const[s,n]of Object.entries(e))n===null?t.removeAttribute(s):t.setAttribute(s,n)},w(ts,cg),w(ts,Jd,0);let av=ts;globalThis._pdfjsTestingUtils={HighlightOutliner:$b};globalThis.pdfjsLib={AbortException:Go,AnnotationEditorLayer:nv,AnnotationEditorParamsType:Yt,AnnotationEditorType:Dt,AnnotationEditorUIManager:Ml,AnnotationLayer:Lb,AnnotationMode:so,AnnotationType:Ge,build:qk,ColorPicker:Vp,createValidAbsoluteUrl:_0,DOMSVGFactory:Hp,DrawLayer:av,FeatureTest:Es,fetchData:of,getDocument:SE,getFilenameFromUrl:FR,getPdfFilenameFromUrl:$R,getUuid:A0,getXfaPageViewport:HR,GlobalWorkerOptions:zn,ImageKind:Xf,InvalidPDFException:Gm,isDataScheme:Pg,isPdfFile:Lv,isValidExplicitDest:QR,MathClamp:Gs,noContextMenu:gn,normalizeUnicode:DR,OPS:Np,OutputScale:Xn,PasswordResponses:xR,PDFDataRangeTransport:xE,PDFDateString:Dv,PDFWorker:xu,PermissionFlag:SR,PixelsPerInch:Xo,RenderingCancelledException:Mv,ResponseException:Fp,setLayerDimensions:Il,shadow:Gt,SignatureExtractor:Br,stopEvent:Xe,SupportedImageMimeTypes:Km,TextLayer:Eu,TouchManager:Bp,updateUrlHash:y0,Util:At,VerbosityLevel:xg,version:zk,XfaLayer:PE};const fI={key:0,class:"position-absolute top-50 start-50 translate-middle"},pI={key:1,class:"position-absolute top-50 start-50 translate-middle text-center"},gI={class:"text-muted"},mI=Yn({__name:"PDFThumbnail",props:{pdfPath:{}},setup(i){zn.workerSrc=new URL("/RestFigBank/assets/pdf.worker-2ru0a0LU.mjs",import.meta.url).toString();const t=i,e=zt(null),s=zt(null),n=zt(!0),r=zt(!1),o=zt(""),l=f=>{var p,g;return f.name==="InvalidPDFException"?"Le fichier PDF est invalide ou corrompu":(p=f.message)!=null&&p.includes("404")?"Le fichier PDF est introuvable":(g=f.message)!=null&&g.includes("Network")?"Erreur réseau lors du chargement du PDF":"Erreur lors du chargement du PDF"},c=f=>f.startsWith("/pdfs/")?Au+f:Au+"/pdfs/"+f.replace(/^\//,""),h=async f=>{try{const p=c(f),g=await fetch(p);if(!g.ok)throw new Error("Network response was not ok: "+g.status);const _=await g.arrayBuffer();if(_.byteLength===0)throw new Error("Le fichier PDF est vide");return _}catch(p){throw console.error("Error loading PDF:",p),p}},u=async f=>{try{if(n.value=!0,r.value=!1,o.value="",await Vo(),!e.value)throw console.error("Canvas not found in DOM"),new Error("Canvas non initialisé");if(!s.value)throw console.error("Canvas container not found in DOM"),new Error("Conteneur du canvas non initialisé");let p=0;const g=10;for(;s.value.clientWidth===0&&p<g;)await new Promise(N=>setTimeout(N,100)),p++;const _=s.value.clientWidth;if(_===0)throw new Error("Le conteneur du canvas n'a pas de dimensions");const v=await h(f),S=await SE({data:v}).promise;if(S.numPages===0)throw new Error("Le PDF ne contient aucune page");const C=await S.getPage(1),T=C.getViewport({scale:1}),R=_/T.width,I=C.getViewport({scale:R});if(!e.value)throw new Error("Canvas perdu pendant le rendu");e.value.width=I.width,e.value.height=I.height;const F=e.value.getContext("2d");if(!F)throw new Error("Impossible d'obtenir le contexte du canvas");await C.render({canvasContext:F,viewport:I}).promise}catch(p){console.error("Error rendering PDF:",p),r.value=!0,o.value=l(p)}finally{n.value=!1}};return sf(async()=>{await Vo(),u(t.pdfPath)}),Rl(()=>t.pdfPath,f=>{u(f)}),(f,p)=>(ft(),vt("div",{class:"pdf-thumbnail",ref_key:"canvasContainer",ref:s},[Cn(M("canvas",{ref_key:"canvas",ref:e,class:"w-100 h-100"},null,512),[[HT,!r.value&&!n.value]]),n.value?(ft(),vt("div",fI,p[0]||(p[0]=[M("div",{class:"spinner-border text-primary",role:"status"},[M("span",{class:"visually-hidden"},"Chargement...")],-1)]))):is("",!0),r.value?(ft(),vt("div",pI,[p[1]||(p[1]=M("div",{class:"text-danger mb-2"},[M("i",{class:"bi bi-file-earmark-x fs-1"})],-1)),M("small",gI,Re(o.value),1)])):is("",!0)],512))}}),Nl=(i,t)=>{const e=i.__vccOpts||i;for(const[s,n]of t)e[s]=n;return e},bI=Nl(mI,[["__scopeId","data-v-09ca12ba"]]),vI=`${Au}/api/openai`;async function _I(i){const t=await fetch(vI,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:i})});if(!t.ok)throw new Error(`Erreur HTTP: ${t.status}`);const e=await t.json();return{documents:e.documents,searchSummary:e.searchSummary,suggestions:e.suggestions||[]}}const yI={class:"card shadow-sm mb-4"},wI={class:"card-body"},AI={key:0,class:"text-center text-muted"},EI={class:"small mb-0 text-start example-list"},SI={key:1,class:"messages"},xI={class:"message-content",style:{"white-space":"pre-line"}},CI=["disabled","onKeydown"],TI=["disabled"],PI={class:"button-content"},RI={key:0,class:"bi bi-arrow-repeat spin"},kI={key:1,class:"bi bi-search"},II={key:2,class:"button-text"},MI={key:3,class:"button-text"},LI=Yn({__name:"SearchChatbot",props:{documents:{},messages:{},currentCriteria:{}},emits:["updateResults","updateMessages","updateCriteria"],setup(i,{emit:t}){const e=i,s=t,n=zt(""),r=zt(!1),o=zt(null),l=zt("");$e(()=>{var E,S,C,T;const v=e.currentCriteria;return(((E=v.levels)==null?void 0:E.length)??0)>0||(((S=v.vision)==null?void 0:S.length)??0)>0||(((C=v.instruments)==null?void 0:C.length)??0)>0||(((T=v.keywords)==null?void 0:T.length)??0)>0||v.withCost||v.isScaled||v.hasRotation});const c=zt(null),h=()=>{s("updateMessages",[]),s("updateCriteria",{}),s("updateResults",e.documents),n.value="",r.value=!1},u=(v,E)=>[...v.filter(T=>T.type==="user").slice(-9).map(T=>T.text),E].join(" "),f=async()=>{if(!(!n.value.trim()||r.value))try{r.value=!0;const v={text:n.value,type:"user"},E=[...e.messages,v];s("updateMessages",E);const S=u(e.messages,n.value);console.log("Prompt envoyé à l'API:",S);const C=await _I(S);console.log("Réponse de l'API:",C),l.value=C.searchSummary;let T=C.documents.length>0?`J'ai trouvé ${C.documents.length} document${C.documents.length>1?"s":""} correspondant à votre recherche.`:"Je n'ai trouvé aucun document correspondant à votre recherche. Essayez peut-être avec d'autres critères ?";C.suggestions&&C.suggestions.length>0&&(T+=`

`+C.suggestions.map(I=>`• ${I}`).join(`
`));const R={text:T,type:"bot"};s("updateMessages",[...E,R]),s("updateResults",C.documents),n.value=""}catch(v){console.error("Erreur lors de la recherche:",v);const E={text:"Désolé, une erreur est survenue lors de la recherche. Veuillez réessayer.",type:"bot"};s("updateMessages",[...e.messages,E])}finally{r.value=!1}},p=()=>{Vo(()=>{const v=o.value;v&&(v.scrollTop=0,setTimeout(()=>{const E=v.scrollHeight-v.clientHeight,S=1e3,C=v.scrollTop,T=performance.now(),R=I=>{const F=I-T,N=Math.min(F/S,1),H=U=>U<.5?2*U*U:-1+(4-2*U)*U;v.scrollTop=C+(E-C)*H(N),N<1&&requestAnimationFrame(R)};requestAnimationFrame(R)},100))})},g=()=>{Vo(()=>{const v=o.value;v&&(v.scrollTop=v.scrollHeight)})};Rl(()=>e.messages,()=>{g()},{deep:!0}),sf(()=>{e.messages.length>0&&p()});const _=async v=>{n.value=v,Vo(()=>{var E;(E=c.value)==null||E.focus()}),await f()};return(v,E)=>(ft(),vt("div",yI,[M("div",wI,[E[10]||(E[10]=M("div",{class:"d-flex align-items-center justify-content-between mb-3"},null,-1)),M("div",{class:"chat-container mb-3",ref_key:"chatContainer",ref:o},[e.messages.length===0?(ft(),vt("div",AI,[E[8]||(E[8]=M("p",null,"Décrivez ce que vous recherchez en langage naturel.",-1)),M("ul",EI,[M("li",{onClick:E[0]||(E[0]=S=>_("Je cherche des situations pour des CE2 qui utilisent une bande de papier")),role:"button"},E[4]||(E[4]=[M("i",{class:"bi bi-lightbulb me-2"},null,-1),Ee('"Je cherche des situations pour des CE2 qui utilisent une bande de papier" ')])),M("li",{onClick:E[1]||(E[1]=S=>_("Je cherche des situations avec un carré")),role:"button"},E[5]||(E[5]=[M("i",{class:"bi bi-lightbulb me-2"},null,-1),Ee('"Je cherche des situations avec un carré" ')])),M("li",{onClick:E[2]||(E[2]=S=>_("Je cherche des situations sur les propriétés")),role:"button"},E[6]||(E[6]=[M("i",{class:"bi bi-lightbulb me-2"},null,-1),Ee('"Je cherche des situations sur les propriétés" ')])),E[7]||(E[7]=M("li",null,[M("i",{class:"bi bi-three-dots me-2"})],-1))])])):(ft(),vt("div",SI,[(ft(!0),vt(ze,null,Ki(e.messages,(S,C)=>(ft(),vt("div",{key:C,class:zo(["message",S.type])},[M("div",xI,Re(S.text),1)],2))),128))]))],512),M("form",{onSubmit:tw(f,["prevent"]),class:"d-flex gap-2"},[Cn(M("input",{"onUpdate:modelValue":E[3]||(E[3]=S=>n.value=S),type:"text",class:"form-control chatbot-input",placeholder:"Décrivez ce que vous recherchez...",disabled:r.value,onKeydown:rP(tw(f,["prevent"]),["enter"]),ref_key:"inputField",ref:c},null,40,CI),[[t0,n.value]]),M("button",{type:"button",onClick:f,class:zo(["btn btn-primary send-button",{"is-processing":r.value}]),disabled:!n.value.trim()||r.value},[M("span",PI,[r.value?(ft(),vt("i",RI)):(ft(),vt("i",kI)),r.value?(ft(),vt("span",MI,"Recherche...")):(ft(),vt("span",II,"Rechercher"))])],10,TI),e.messages.length>0?(ft(),vt("button",{key:0,type:"button",onClick:h,class:"btn btn-outline-secondary",title:"Réinitialiser la conversation"},E[9]||(E[9]=[M("i",{class:"bi bi-arrow-counterclockwise"},null,-1)]))):is("",!0)],32)])]))}}),DI=Nl(LI,[["__scopeId","data-v-344a23bd"]]),OI={class:"container"},NI={key:0,class:"alert alert-danger",role:"alert"},FI={key:1,class:"text-center my-5"},$I={key:1,class:"row mb-4"},BI={class:"col-12"},HI={class:"card shadow-sm"},jI={class:"card-body"},VI={class:"mb-3"},UI={class:"d-flex gap-3 flex-wrap"},zI=["value"],qI={class:"form-check-label"},WI={class:"mb-3"},GI={class:"d-flex gap-3 flex-wrap"},XI=["value"],KI={class:"form-check-label"},YI={class:"mb-3"},QI={class:"d-flex gap-3 flex-wrap"},JI=["value"],ZI={class:"form-check-label"},tM={class:"mb-3"},eM={class:"d-flex gap-3 flex-wrap"},sM={class:"form-check"},iM={class:"form-check"},nM={class:"form-check"},rM={class:"form-check"},oM={class:"mb-3"},aM={class:"text"},lM=["onClick"],cM={key:0,class:"ms-1 small"},hM={class:"text-center mb-3 d-flex align-items-center justify-content-center gap-2"},uM={class:"text-muted fst-italic"},dM={class:"text-center mt-4"},fM={class:"d-inline-block px-4 py-2 rounded-pill bg-success-subtle border border-success"},pM={class:"fw-semibold text-success"},gM={key:2,class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3"},mM={class:"card shadow-sm h-100"},bM={class:"card-body d-flex flex-column"},vM={class:"card-title"},_M={class:"card-text"},yM={key:0,class:"mb-2"},wM={key:1,class:"mb-2"},AM={key:2,class:"mb-2"},EM={key:3,class:"mb-2"},SM={key:0,class:"badge text-warning-emphasis bg-warning-subtle border border-warning-subtle me-1 mb-1"},xM={key:1,class:"badge text-warning-emphasis bg-warning-subtle border border-warning-subtle me-1 mb-1"},CM={key:2,class:"badge text-warning-emphasis bg-warning-subtle border border-warning-subtle me-1 mb-1"},TM={key:3,class:"badge text-warning-emphasis bg-warning-subtle border border-warning-subtle me-1 mb-1"},PM={class:"mb-3"},RM={class:"d-flex justify-content-center mb-2"},kM=["href"],IM={class:"text-center"},MM=["href"],LM={key:1,class:"text-muted small"},DM={key:3,class:"alert alert-info"},OM=Yn({__name:"PDFLibrary",setup(i){const t=AR(),{documents:e,isLoading:s,error:n}=vP(t),r=[{value:"CE1",label:"CE1"},{value:"CE2",label:"CE2"},{value:"CM1",label:"CM1"},{value:"CM2",label:"CM2"},{value:"6EME",label:"6ème"},{value:"5EME",label:"5ème"}],o=["Surface","Ligne","Point"],l=["Ficelle","Règle non informable","Règle informable","Bande de papier","Compas","Gabarit angle droit","Équerre","Autre gabarit","Pochoir"],c=$e(()=>{if(!e.value)return r;const et=new Set;e.value.forEach(L=>{var bt;(bt=L.level)==null||bt.forEach(Ct=>et.add(Ct))});const Y=Array.from(et).filter(L=>!r.some(bt=>bt.value===L)).map(L=>({value:L,label:L}));return[...r,...Y]}),h=$e(()=>{if(!e.value)return o;const et=new Set;e.value.forEach(L=>{var bt;(bt=L.vision)==null||bt.forEach(Ct=>et.add(Ct))});const Y=Array.from(et).filter(L=>!o.some(bt=>bt.toLowerCase()===L.toLowerCase()));return[...o,...Y]}),u=$e(()=>{if(!e.value)return l;const et=new Set;e.value.forEach(L=>{var bt;(bt=L.instruments)==null||bt.forEach(Ct=>et.add(Ct))});const Y=Array.from(et).filter(L=>!l.some(bt=>bt.toLowerCase()===L.toLowerCase()));return[...l,...Y]}),f=zt([]),p=zt([]),g=zt([]),_=zt([]),v=zt(!1),E=zt(!1),S=zt(!1),C=zt(!1),T=zt([]),R=zt(!1),I=zt("filters"),F=zt([]),N=zt({}),H=zt([]);zt({levels:[],visions:[],instruments:[],tags:[],withCost:!1,isScaled:!1,hasRotation:!1,withoutAmorce:!1});const U=et=>{const Y=_.value.indexOf(et);Y===-1?_.value.push(et):_.value.splice(Y,1)},Q=et=>{T.value=et,R.value=!0,I.value==="chatbot"&&(H.value=et)},tt=et=>{F.value=et},Et=et=>{N.value=et},wt=$e(()=>I.value==="chatbot"&&R.value?T.value:t.documents?t.documents.filter(et=>{var B,V,st,pt;const Y=f.value.length===0||((B=et.level)==null?void 0:B.some($t=>f.value.includes($t))),L=p.value.length===0||((V=et.vision)==null?void 0:V.some($t=>p.value.some(P=>P.toLowerCase()===$t.toLowerCase()))),bt=g.value.length===0||((st=et.instruments)==null?void 0:st.some($t=>g.value.some(P=>P.toLowerCase()===$t.toLowerCase()))),Ct=_.value.length===0||((pt=et.tags)==null?void 0:pt.some($t=>_.value.includes($t))),Wt=!v.value||et.withCost,xe=!E.value||et.isScaled,Be=!S.value||et.hasRotation,Xt=!C.value||et.withoutAmorce;return Y&&L&&bt&&Ct&&Wt&&xe&&Be&&Xt}):[]),Rt=$e(()=>{const et=[];if(f.value.length>0){const L=f.value.map(bt=>{var Ct;return(Ct=c.value.find(Wt=>Wt.value===bt))==null?void 0:Ct.label}).filter(Boolean);et.push(`en ${L.join(" ou ")}`)}if(p.value.length>0){const L=p.value.map(bt=>bt.toLowerCase());et.push(`utilisant les visions ${L.join(" ou ")}`)}g.value.length>0&&et.push(`nécessitant ${g.value.join(" ou ")}`),_.value.length>0&&(_.value.length===1?et.push(`avec pour mot-clef #${_.value[0]}`):et.push(`avec pour mots-clefs #${_.value.join(" ou #")}`));const Y=[];return v.value&&Y.push("avec coûts"),E.value&&Y.push("pas à l'échelle"),S.value&&Y.push("avec rotation"),C.value&&Y.push("sans amorce"),Y.length>0&&et.push(Y.join(", ")),et.length===0?"Recherche de toutes les situations":`Recherche des situations ${et.join(", ")}`}),oe=$e(()=>{if(!e.value)return[];const et={};return wt.value.forEach(Y=>{Y.tags.forEach(L=>{et[L]=(et[L]||0)+1})}),Object.entries(et).sort((Y,L)=>L[1]-Y[1]).map(([Y,L])=>({tag:Y,count:L}))}),J=()=>{f.value=[],p.value=[],g.value=[],_.value=[],v.value=!1,E.value=!1,S.value=!1,C.value=!1},X=$e(()=>f.value.length>0||p.value.length>0||g.value.length>0||_.value.length>0||v.value||E.value||S.value||C.value);return sf(async()=>{await t.loadDocuments()}),(et,Y)=>(ft(),vt("div",OI,[De(n)?(ft(),vt("div",NI,[Y[7]||(Y[7]=M("i",{class:"bi bi-exclamation-triangle me-2"},null,-1)),Ee(Re(De(n)),1)])):is("",!0),De(s)?(ft(),vt("div",FI,Y[8]||(Y[8]=[M("div",{class:"spinner-border text-primary",role:"status"},[M("span",{class:"visually-hidden"},"Chargement...")],-1),M("div",{class:"mt-2 text-primary"},[M("i",{class:"bi bi-arrow-repeat me-2"}),Ee("Chargement... ")],-1)]))):(ft(),vt(ze,{key:2},[I.value==="chatbot"?(ft(),GA(DI,{key:0,documents:De(e),messages:F.value,"current-criteria":N.value,onUpdateResults:Q,onUpdateMessages:tt,onUpdateCriteria:Et},null,8,["documents","messages","current-criteria"])):(ft(),vt("div",$I,[M("div",BI,[M("div",HI,[M("div",jI,[M("div",VI,[Y[9]||(Y[9]=M("label",{class:"form-label fw-bold badge text-primary-emphasis bg-primary-subtle border border-primary-subtle px-2"},[M("i",{class:"bi bi-mortarboard me-1"}),Ee("Niveau ")],-1)),M("div",UI,[(ft(!0),vt(ze,null,Ki(c.value,(L,bt)=>(ft(),vt("div",{class:"form-check",key:bt},[Cn(M("input",{class:"form-check-input",type:"checkbox",value:L.value,"onUpdate:modelValue":Y[0]||(Y[0]=Ct=>f.value=Ct)},null,8,zI),[[fa,f.value]]),M("label",qI,Re(L.label),1)]))),128))])]),M("div",WI,[Y[10]||(Y[10]=M("label",{class:"form-label fw-bold badge text-info-emphasis bg-info-subtle border border-info-subtle px-2"},[M("i",{class:"bi bi-eye me-1"}),Ee("Vision ")],-1)),M("div",GI,[(ft(!0),vt(ze,null,Ki(h.value,(L,bt)=>(ft(),vt("div",{class:"form-check",key:bt},[Cn(M("input",{class:"form-check-input",type:"checkbox",value:L,"onUpdate:modelValue":Y[1]||(Y[1]=Ct=>p.value=Ct)},null,8,XI),[[fa,p.value]]),M("label",KI,Re(L),1)]))),128))])]),M("div",YI,[Y[11]||(Y[11]=M("label",{class:"form-label fw-bold badge text-success-emphasis bg-success-subtle border border-success-subtle px-2"},[M("i",{class:"bi bi-tools me-1"}),Ee("Instruments ")],-1)),M("div",QI,[(ft(!0),vt(ze,null,Ki(u.value,(L,bt)=>(ft(),vt("div",{class:"form-check",key:bt},[Cn(M("input",{class:"form-check-input",type:"checkbox",value:L,"onUpdate:modelValue":Y[2]||(Y[2]=Ct=>g.value=Ct)},null,8,JI),[[fa,g.value]]),M("label",ZI,Re(L),1)]))),128))])]),M("div",tM,[Y[16]||(Y[16]=M("label",{class:"form-label fw-bold badge text-warning-emphasis bg-warning-subtle border border-warning-subtle px-2"},[M("i",{class:"bi bi-sliders me-1"}),Ee("Options ")],-1)),M("div",eM,[M("div",sM,[Cn(M("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":Y[3]||(Y[3]=L=>v.value=L)},null,512),[[fa,v.value]]),Y[12]||(Y[12]=M("label",{class:"form-check-label"},"Avec coûts",-1))]),M("div",iM,[Cn(M("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":Y[4]||(Y[4]=L=>E.value=L)},null,512),[[fa,E.value]]),Y[13]||(Y[13]=M("label",{class:"form-check-label"},"Pas à l'échelle",-1))]),M("div",nM,[Cn(M("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":Y[5]||(Y[5]=L=>S.value=L)},null,512),[[fa,S.value]]),Y[14]||(Y[14]=M("label",{class:"form-check-label"},"Avec rotation",-1))]),M("div",rM,[Cn(M("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":Y[6]||(Y[6]=L=>C.value=L)},null,512),[[fa,C.value]]),Y[15]||(Y[15]=M("label",{class:"form-check-label"},"Sans amorce (reproduction simple)",-1))])])]),M("div",oM,[Y[17]||(Y[17]=M("label",{class:"form-label fw-bold badge text-danger-emphasis bg-danger-subtle border border-danger-subtle px-2 mb-2"},[M("i",{class:"bi bi-tags me-1"}),Ee("Mots clefs ")],-1)),M("div",aM,[(ft(!0),vt(ze,null,Ki(oe.value,L=>(ft(),vt("span",{key:L.tag,onClick:bt=>U(L.tag),class:zo(["badge me-1 mb-1",{"text-danger-emphasis bg-danger-subtle border border-danger-subtle":_.value.includes(L.tag),"text-secondary border":!_.value.includes(L.tag)}]),role:"button",style:{"font-size":"0.8em",padding:"0.3em 0.6em",cursor:"pointer"}},[Ee(Re(L.tag)+" ",1),L.count>1?(ft(),vt("span",cM,"("+Re(L.count)+")",1)):is("",!0)],10,lM))),128))])]),M("div",hM,[M("span",uM,Re(Rt.value),1),X.value?(ft(),vt("button",{key:0,onClick:J,class:"btn btn-outline-secondary btn-sm",title:"Réinitialiser les filtres"},Y[18]||(Y[18]=[M("i",{class:"bi bi-arrow-counterclockwise"},null,-1)]))):is("",!0)]),M("div",dM,[M("div",fM,[M("span",pM,[Y[19]||(Y[19]=M("i",{class:"bi bi-files me-1"},null,-1)),Ee(Re(wt.value.length>0?wt.value.length:"Aucune")+" situation"+Re(wt.value.length>1?"s":"")+" trouvée"+Re(wt.value.length>1?"s":""),1)])])])])])])])),wt.value.length?(ft(),vt("div",gM,[(ft(!0),vt(ze,null,Ki(wt.value,L=>(ft(),vt("div",{class:"col",key:L.id},[M("div",mM,[Ie(bI,{"pdf-path":L.path,class:"card-img-top"},null,8,["pdf-path"]),M("div",bM,[M("h5",vM,Re(L.title),1),M("p",_M,Re(L.description),1),L.level&&L.level.length>0?(ft(),vt("div",yM,[(ft(!0),vt(ze,null,Ki(L.level,bt=>(ft(),vt("span",{key:bt,class:"badge text-primary-emphasis bg-primary-subtle border border-primary-subtle me-1 mb-1"},Re(bt),1))),128))])):is("",!0),L.vision&&L.vision.length>0?(ft(),vt("div",wM,[(ft(!0),vt(ze,null,Ki(L.vision,bt=>(ft(),vt("span",{key:bt,class:"badge text-info-emphasis bg-info-subtle border border-info-subtle me-1 mb-1"},Re(bt),1))),128))])):is("",!0),L.instruments&&L.instruments.length>0?(ft(),vt("div",AM,[(ft(!0),vt(ze,null,Ki(L.instruments,bt=>(ft(),vt("span",{key:bt,class:"badge text-success-emphasis bg-success-subtle border border-success-subtle me-1 mb-1"},Re(bt),1))),128))])):is("",!0),L.withCost||L.isScaled||L.hasRotation||L.withoutAmorce?(ft(),vt("div",EM,[L.withCost?(ft(),vt("span",SM,"Avec coûts")):is("",!0),L.isScaled?(ft(),vt("span",xM,"Pas à l'échelle")):is("",!0),L.hasRotation?(ft(),vt("span",CM,"Avec rotation")):is("",!0),L.withoutAmorce?(ft(),vt("span",TM,"Sans amorce")):is("",!0)])):is("",!0),M("div",PM,[(ft(!0),vt(ze,null,Ki(L.tags,bt=>(ft(),vt("span",{key:bt,class:"badge text-danger-emphasis bg-danger-subtle border border-danger-subtle me-1 mb-1"},Re(bt),1))),128))]),M("div",RM,[M("a",{href:De(Au)+L.path,target:"_blank",class:"btn btn-sm btn-outline-primary"},Y[20]||(Y[20]=[M("i",{class:"bi bi-file-earmark-pdf me-1"},null,-1),Ee("Ouvrir ")]),8,kM)]),M("div",IM,[L.source_url?(ft(),vt("a",{key:0,href:L.source_url,target:"_blank",class:"text-muted small"},[Y[21]||(Y[21]=M("i",{class:"bi bi-link-45deg me-1"},null,-1)),Ee(Re(L.source_url_title||"Source"),1)],8,MM)):L.source_url_title?(ft(),vt("span",LM,[Y[22]||(Y[22]=M("i",{class:"bi bi-link-45deg me-1"},null,-1)),Ee(Re(L.source_url_title),1)])):is("",!0)])])])]))),128))])):(ft(),vt("div",DM," Aucun document ne correspond aux critères sélectionnés. "))],64))]))}}),NM=Nl(OM,[["__scopeId","data-v-ee270bba"]]),FM={class:"d-flex flex-column min-vh-100"},$M={key:0,"data-bs-theme":"dark",class:"fixed-top"},BM={class:"collapse text-bg-dark",id:"navbarHeader"},HM={class:"container"},jM={class:"row"},VM={class:"col-sm-4 offset-md-1 py-4"},UM={class:"list-unstyled"},zM={class:"navbar navbar-dark bg-dark shadow-sm"},qM={class:"container"},WM={key:1,class:"text-body-secondary py-5 mt-auto"},GM=Yn({__name:"App",setup(i){const t=wR(),e=$e(()=>!["howto","license","instruments","contribute"].includes(t.name));return(s,n)=>(ft(),vt("div",FM,[e.value?(ft(),vt("header",$M,[M("div",BM,[M("div",HM,[M("div",jM,[n[3]||(n[3]=M("div",{class:"col-sm-8 col-md-7 py-4"},[M("h4",{class:"text-white"},"À propos"),M("p",{class:"text-body-secondary"}," Cette banque de figures permet de travailler la restauration de figures géométriques. Vous pouvez filtrer les documents selon différents critères comme le niveau, la vision, les instruments utilisés et d'autres options. ")],-1)),M("div",VM,[M("ul",UM,[M("li",null,[Ie(De(Gf),{to:"/contribuer",class:"text-white",target:"_blank"},{default:Uo(()=>n[0]||(n[0]=[Ee("Comment contribuer ?")])),_:1,__:[0]})]),n[2]||(n[2]=M("li",null,[M("a",{href:"https://arnaud-lierville.github.io/",target:"_blank",class:"text-white"},"Autres outils Maths en classe !")],-1)),M("li",null,[Ie(De(Gf),{to:"/licence",class:"text-white",target:"_blank"},{default:Uo(()=>n[1]||(n[1]=[Ee("Licence")])),_:1,__:[1]})])])])])])]),M("div",zM,[M("div",qM,[Ie(De(Gf),{to:"/",class:"navbar-brand d-flex align-items-center"},{default:Uo(()=>n[4]||(n[4]=[M("strong",null,"RestFigBank",-1)])),_:1,__:[4]}),n[5]||(n[5]=M("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarHeader","aria-controls":"navbarHeader","aria-expanded":"false","aria-label":"Toggle navigation"},[M("span",{class:"navbar-toggler-icon"})],-1))])])])):is("",!0),M("main",{class:zo(["main-content flex-grow-1",{"no-navbar":!e.value}])},[Ie(De(v0))],2),e.value?(ft(),vt("footer",WM,n[6]||(n[6]=[M("div",{class:"container"},[M("p",{class:"float-end mb-1"},[M("a",{href:"#"},"Retour en haut")]),M("p",{class:"mb-1"},"Cette banque de figures est un outil pédagogique et didactique pour l'enseignement de la géométrie.")],-1)]))):is("",!0)]))}}),XM="modulepreload",KM=function(i){return"/RestFigBank/"+i},Vw={},YM=function(t,e,s){let n=Promise.resolve();if(e&&e.length>0){let o=function(h){return Promise.all(h.map(u=>Promise.resolve(u).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),c=(l==null?void 0:l.nonce)||(l==null?void 0:l.getAttribute("nonce"));n=o(e.map(h=>{if(h=KM(h),h in Vw)return;Vw[h]=!0;const u=h.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${f}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":XM,u||(p.as="script"),p.crossOrigin="",p.href=h,c&&p.setAttribute("nonce",c),document.head.appendChild(p),u)return new Promise((g,_)=>{p.addEventListener("load",g),p.addEventListener("error",()=>_(new Error(`Unable to preload CSS for ${h}`)))})}))}function r(o){const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=o,window.dispatchEvent(l),!l.defaultPrevented)throw o}return n.then(o=>{for(const l of o||[])l.status==="rejected"&&r(l.reason);return t().catch(r)})},QM={class:"py-3 text-center container"},JM={class:"row py-3"},ZM={class:"col-lg-6 col-md-8 mx-auto"},tL={class:"d-flex justify-content-center gap-3 mt-4"},eL={class:"album py-5 bg-body-tertiary"},sL=Yn({__name:"HomeView",setup(i){return(t,e)=>{const s=Sv("RouterLink");return ft(),vt("div",null,[M("section",QM,[M("div",JM,[M("div",ZM,[e[2]||(e[2]=M("h1",{class:"fw-light"},"Restauration de figures",-1)),e[3]||(e[3]=M("p",{class:"lead text-body-secondary"}," Explorez la collection de figures géométriques à restaurer. Utilisez les filtres ci-dessous et cliquez sur des mots clefs pour trouver les documents adaptés à vos besoins. ",-1)),M("div",tL,[Ie(s,{to:"/mode-emploi",class:"btn btn-outline-primary btn-sm",target:"_blank",rel:"noopener noreferrer"},{default:Uo(()=>e[0]||(e[0]=[M("i",{class:"bi bi-question-circle me-2"},null,-1),Ee("Comment ça marche ? ")])),_:1,__:[0]}),Ie(s,{to:"/instruments",class:"btn btn-outline-success btn-sm",target:"_blank",rel:"noopener noreferrer"},{default:Uo(()=>e[1]||(e[1]=[M("i",{class:"bi bi-tools me-2"},null,-1),Ee("Les instruments ")])),_:1,__:[1]})])])])]),M("div",eL,[Ie(NM)])])}}}),iL="/RestFigBank/assets/fleche-carre-CIKwgwNQ.png",nL={class:"container py-5"},rL={class:"row"},oL={class:"col-12"},aL={class:"card shadow-sm mb-4"},lL={class:"card-body"},cL={class:"alert alert-light border mb-4"},hL={class:"row"},uL={class:"col-12 text-center"},dL=["src"],fL={class:"card shadow-sm mb-4"},pL={class:"card-body"},gL={class:"mt-3"},mL=Yn({__name:"HowToView",setup(i){return(t,e)=>{const s=Sv("RouterLink");return ft(),vt("div",nL,[e[10]||(e[10]=M("h1",{class:"mb-4"},"Comment ça marche ?",-1)),M("div",rL,[M("div",oL,[e[7]||(e[7]=M("div",{class:"card shadow-sm mb-4"},[M("div",{class:"card-body"},[M("h2",{class:"h5 mb-3"},"Objectif général"),M("p",null," L'approche vise à assurer une continuité et une progression cohérentes de l'enseignement de la géométrie du cycle 2 au cycle 4, en transformant progressivement le regard des élèves sur les figures géométriques. ")])],-1)),M("div",aL,[M("div",lL,[e[2]||(e[2]=kl('<h2 class="h5 mb-3" data-v-2d930c55>La restauration de figures comme levier didactique</h2><div class="mb-4" data-v-2d930c55><p data-v-2d930c55> La restauration de figures est une activité géométrique qui consiste à compléter une figure donnée partiellement appelée &quot;amorce&quot;, à partir d&#39;une figure &quot;modèle&quot;, en utilisant divers instruments de tracé et de prise d&#39;informations (comme la règle non informable, informable, la bande de papier, l&#39;équerre, le compas, des gabarits ou des pochoir). </p></div><div class="mb-4" data-v-2d930c55><h3 class="h6 mb-3" data-v-2d930c55>Objectifs principaux :</h3><div class="list-group" data-v-2d930c55><div class="list-group-item" data-v-2d930c55><strong data-v-2d930c55>Faire évoluer le regard des élèves :</strong> passer d&#39;une perception globale (vision &quot;surface&quot;) à une analyse fine des relations géométriques (alignements, égalités, intersections). </div><div class="list-group-item" data-v-2d930c55><strong data-v-2d930c55>Favoriser le raisonnement géométrique :</strong> les élèves doivent identifier et utiliser les propriétés géométriques implicites dans la figure modèle pour compléter la figure amorce. </div><div class="list-group-item" data-v-2d930c55><strong data-v-2d930c55>Développer des compétences en construction :</strong> cette activité mobilise des gestes précis et des instruments adaptés pour reproduire ou prolonger des traits géométriques. </div></div></div>',3)),M("div",cL,[e[1]||(e[1]=M("h3",{class:"h6 mb-3"},"Exemple :",-1)),M("div",hL,[M("div",uL,[M("img",{src:De(iL),alt:"Exemple de restauration de figures",class:"img-fluid rounded shadow-sm example-image"},null,8,dL)]),e[0]||(e[0]=kl('<div class="col-12 mb-3" data-v-2d930c55><p class="mb-2" data-v-2d930c55>Matériel fourni :</p><ul class="mb-0" data-v-2d930c55><li class="mb-2" data-v-2d930c55> Sur la même feuille, la figure modèle et l&#39;amorce à la même échelle mais orientée différemment (pour éviter le transfert par « glissement » de la figure à restaurer). </li><li class="mb-2" data-v-2d930c55> Un gabarit d&#39;angle droit informable (sur lequel on peut prendre et garder des informations pour reporter des longueurs) dont les côtés sont plus longs que ceux du carré. </li><li data-v-2d930c55> Ficelle </li></ul><p class="mt-3 text-muted small" data-v-2d930c55> Source : <a href="https://lea-geometrie.etab.ac-lille.fr/" target="_blank" rel="noopener noreferrer" data-v-2d930c55>LEA Géométrie - Académie de Lille</a></p></div>',1))])])])]),e[8]||(e[8]=kl('<div class="card shadow-sm mb-4" data-v-2d930c55><div class="card-body" data-v-2d930c55><h2 class="h5 mb-3" data-v-2d930c55>Évolution du regard sur les figures</h2><div class="mb-3" data-v-2d930c55><h3 class="h6 text-primary-emphasis bg-primary-subtle p-2 rounded" data-v-2d930c55>Cycle 2</h3><p data-v-2d930c55> Apprentissage fondé sur la manipulation et la restauration de figures simples (à l&#39;aide de gabarits, descriptions, programmes de construction simples). </p></div><div class="mb-3" data-v-2d930c55><h3 class="h6 text-info-emphasis bg-info-subtle p-2 rounded" data-v-2d930c55>Cycle 3</h3><p data-v-2d930c55> Passage d&#39;une géométrie perceptive à une géométrie instrumentée, puis déductive. </p></div><div class="mb-3" data-v-2d930c55><h3 class="h6 text-success-emphasis bg-success-subtle p-2 rounded" data-v-2d930c55>Cycle 4</h3><p data-v-2d930c55> Accès à une géométrie plus abstraite et théorique, reposant sur des relations entre points, droites, segments, angles, etc. </p></div></div></div><div class="card shadow-sm mb-4" data-v-2d930c55><div class="card-body" data-v-2d930c55><h2 class="h5 mb-3" data-v-2d930c55>Trois types de &quot;regards&quot; à développer</h2><ul class="list-unstyled" data-v-2d930c55><li class="mb-3" data-v-2d930c55><span class="badge text-primary-emphasis bg-primary-subtle" data-v-2d930c55>Vision surface</span><p class="mt-2 mb-0" data-v-2d930c55>Forme globale, aspect visuel</p></li><li class="mb-3" data-v-2d930c55><span class="badge text-info-emphasis bg-info-subtle" data-v-2d930c55>Vision lignes</span><p class="mt-2 mb-0" data-v-2d930c55>Attention portée aux alignements, côtés, segments</p></li><li class="mb-3" data-v-2d930c55><span class="badge text-success-emphasis bg-success-subtle" data-v-2d930c55>Vision points</span><p class="mt-2 mb-0" data-v-2d930c55>Analyse des relations entre les lignes, intersections</p></li></ul><div class="alert alert-info" data-v-2d930c55><p class="mb-0" data-v-2d930c55> 👉 L&#39;objectif est d&#39;acquérir une flexibilité du regard, c&#39;est-à-dire de savoir mobiliser ces différentes visions selon le contexte. </p></div></div></div>',2)),M("div",fL,[M("div",pL,[e[4]||(e[4]=M("h2",{class:"h5 mb-3"},"Rôle des instruments de géométrie",-1)),e[5]||(e[5]=M("p",null,"Les instruments (règle, équerre, compas, bande de papier) permettent :",-1)),e[6]||(e[6]=M("ul",null,[M("li",null,"de tracer des figures,"),M("li",null,"de vérifier des propriétés géométriques,"),M("li",null,"de mobiliser des relations fondamentales : appartenance, égalité, perpendicularité, parallélisme…")],-1)),M("div",gL,[Ie(s,{to:"/instruments",class:"text-decoration-none",target:"_blank"},{default:Uo(()=>e[3]||(e[3]=[Ee(" 👉 Découvrir tous les instruments et leur utilisation ")])),_:1,__:[3]})])])]),e[9]||(e[9]=M("div",{class:"card shadow-sm"},[M("div",{class:"card-body"},[M("h2",{class:"h5 mb-3"},"Conclusion"),M("p",null,"La restauration de figures :"),M("ul",null,[M("li",null,"est une source de problèmes adaptés à différents niveaux,"),M("li",null,"permet d'introduire des notions géométriques progressivement,"),M("li",null,"favorise le passage du dessin à la figure géométrique.")]),M("p",{class:"mb-0"}," Cette approche repose sur une progression graduelle à partir de la perception globale des figures vers une compréhension plus fine et plus abstraite de la géométrie. Le travail sur les restaurations, le choix des outils et le jeu sur les allers et retours entre figure modèle et amorce (prise d'informations, validation) favorisent l'appropriation des concepts géométriques fondamentaux. ")])],-1))])])])}}}),bL=Nl(mL,[["__scopeId","data-v-2d930c55"]]),vL={},_L={class:"container py-5"};function yL(i,t){return ft(),vt("div",_L,t[0]||(t[0]=[kl('<h1 class="mb-4">Licence</h1><div class="row"><div class="col-12"><div class="card shadow-sm mb-4"><div class="card-body"><div class="text-center mb-4"><a href="https://creativecommons.org/licenses/by/4.0/deed.fr" target="_blank" rel="license"><img alt="Licence Creative Commons" style="border-width:0;" src="https://i.creativecommons.org/l/by/4.0/88x31.png"></a></div><p> Cet site est mis à disposition selon les termes de la <a href="https://creativecommons.org/licenses/by/4.0/deed.fr" target="_blank">Licence Creative Commons Attribution 4.0 International</a>. </p><h2 class="h5 mt-4 mb-3">Vous êtes autorisé à :</h2><ul><li><strong>Partager</strong> — copier, distribuer et communiquer le matériel par tous moyens et sous tous formats</li><li><strong>Adapter</strong> — remixer, transformer et créer à partir du matériel pour toute utilisation, y compris commerciale</li></ul><h2 class="h5 mt-4 mb-3">Selon les conditions suivantes :</h2><ul><li><strong>Attribution</strong> — Vous devez créditer l&#39;Œuvre, intégrer un lien vers la licence et indiquer si des modifications ont été effectuées à l&#39;Œuvre. Vous devez indiquer ces informations par tous les moyens raisonnables, sans toutefois suggérer que l&#39;Offrant vous soutient ou soutient la façon dont vous avez utilisé son Œuvre. </li><li><strong>Pas de restrictions complémentaires</strong> — Vous n&#39;êtes pas autorisé à appliquer des conditions légales ou des mesures techniques qui restreindraient légalement autrui à utiliser l&#39;Œuvre dans les conditions décrites par la licence. </li></ul><h2 class="h5 mt-4 mb-3">Notes :</h2><ul><li>Vous n&#39;êtes pas dans l&#39;obligation de respecter la licence pour les éléments ou matériel appartenant au domaine public ou dans le cas où l&#39;utilisation que vous souhaitez faire est couverte par une exception.</li><li>Aucune garantie n&#39;est donnée. Il se peut que la licence ne vous donne pas toutes les permissions nécessaires pour votre utilisation. Par exemple, certains droits comme les droits moraux, le droit des données personnelles et le droit à l&#39;image sont susceptibles de limiter votre utilisation.</li></ul></div></div></div></div>',2)]))}const wL=Nl(vL,[["render",yL]]),AL="/RestFigBank/assets/gabarit%20-%20exemple%201-C-Ja61j1.png",EL="/RestFigBank/assets/gabarit%20-%20exemple%202-DXucNH3D.png",SL="/RestFigBank/assets/gabarit%20-%20exemple%203-Chh1wVgl.png",xL="/RestFigBank/assets/gabarit%20-%20exemple%204-coP-T9cZ.png",CL="/RestFigBank/assets/gabarit%20-%20exemple%205-DNmuAQBx.png",TL="/RestFigBank/assets/gabarit%20-%20exemple%206-DlwugcoY.png",PL="/RestFigBank/assets/gabarit%20-%20exemple%207-Dp8Txuq7.png",RL="/RestFigBank/assets/gabarit%20-%20exemple%208-Cnvk_vqU.png",kL="/RestFigBank/assets/gabarit%20-%20exemple%209-DqUNh1K1.png",IL="/RestFigBank/assets/gabarit%20-%20exemple%204-coP-T9cZ.png",ML="/RestFigBank/assets/Regle-non-informable-RR3Hikmg.png",LL="/RestFigBank/assets/equerre1-DydbFGJ7.png",DL="/RestFigBank/assets/equerre2-CLCdw-J7.png",OL="/RestFigBank/assets/compas-CoSNoTS8.png",NL="/RestFigBank/assets/ficelle-CEbd2ffs.png",FL="/RestFigBank/assets/pochoir-CMD66YVv.png",$L={class:"container py-5"},BL={class:"text-center mb-5"},HL={class:"row g-4"},jL={class:"col-md-6"},VL={class:"card h-100"},UL=["src"],zL={class:"col-md-6"},qL={class:"card h-100"},WL={class:"row g-0 p-3 justify-content-center"},GL={class:"col-4"},XL=["src"],KL={class:"col-4"},YL=["src"],QL={class:"col-md-6"},JL={class:"card h-100"},ZL={class:"row g-0 p-3 justify-content-center"},tD={class:"col-6"},eD=["src"],sD={class:"col-12"},iD={class:"card h-100"},nD={class:"card-body"},rD={class:"row g-4"},oD=["src","alt"],aD={class:"col-md-6"},lD={class:"card h-100"},cD={class:"row g-0 p-3 justify-content-center"},hD={class:"col-8"},uD=["src"],dD={class:"col-md-6"},fD={class:"card h-100"},pD={class:"row g-0 p-3 justify-content-center"},gD={class:"col-8"},mD=["src"],bD=Yn({__name:"InstrumentsView",setup(i){const t=Array.from({length:9},(e,s)=>new URL(Object.assign({"../assets/tools-img/gabarit - exemple 1.png":AL,"../assets/tools-img/gabarit - exemple 2.png":EL,"../assets/tools-img/gabarit - exemple 3.png":SL,"../assets/tools-img/gabarit - exemple 4.png":xL,"../assets/tools-img/gabarit - exemple 5.png":CL,"../assets/tools-img/gabarit - exemple 6.png":TL,"../assets/tools-img/gabarit - exemple 7.png":PL,"../assets/tools-img/gabarit - exemple 8.png":RL,"../assets/tools-img/gabarit - exemple 9.png":kL})[`../assets/tools-img/gabarit - exemple ${s+1}.png`],import.meta.url).href);return(e,s)=>{const n=Sv("RouterLink");return ft(),vt("div",$L,[s[10]||(s[10]=M("h1",{class:"text-center mb-3"},"Les instruments de géométrie en restauration de figures",-1)),M("div",BL,[Ie(n,{to:"/mode-emploi",class:"text-decoration-none",target:"_blank"},{default:Uo(()=>s[0]||(s[0]=[Ee(" 👉 En savoir plus sur la restauration de figures ")])),_:1,__:[0]})]),M("div",HL,[M("div",jL,[M("div",VL,[M("img",{src:De(ML),class:"card-img-top p-3",alt:"Règle non informable"},null,8,UL),s[1]||(s[1]=M("div",{class:"card-body"},[M("h5",{class:"card-title"},"Règle non informable (RNI)"),M("p",{class:"card-text"},[Ee(" Une règle non informable est une règle sans graduation, avec un seul bord utile et sur laquelle on ne peut pas écrire et ni reporter de marque."),M("br"),Ee(" Elle permet uniquement de tracer des lignes droites et de vérifier l'alignement de points. Elle ne permet pas de mesurer des longueurs. ")]),M("p",null,[M("em",null,"On peut fabriquer des RNI avec des intercalaires transparentes en plastique souple.")])],-1))])]),s[8]||(s[8]=kl('<div class="col-md-6" data-v-eb5be388><div class="card h-100" data-v-eb5be388><div class="card-body" data-v-eb5be388><h5 class="card-title" data-v-eb5be388>Règle informable (RI)</h5><p class="card-text" data-v-eb5be388> Une règle informable est une règle sans graduation, avec un seul bord utile sur laquelle on reporter des marques.<br data-v-eb5be388> Elle permet de tracer des lignes droites et de vérifier l&#39;alignement de points. Elle permet de reporter et comparer des longueurs. </p><p data-v-eb5be388><em data-v-eb5be388>On peut fabriquer des RI avec des intercalaires transparentes en carton.</em></p></div></div></div>',1)),M("div",zL,[M("div",qL,[M("div",WL,[M("div",GL,[M("img",{src:De(LL),class:"img-fluid rounded equerre-img",alt:"Équerre 1"},null,8,XL)]),M("div",KL,[M("img",{src:De(DL),class:"img-fluid rounded equerre-img",alt:"Équerre 2"},null,8,YL)])]),s[2]||(s[2]=M("div",{class:"card-body"},[M("h5",{class:"card-title"},"Équerre"),M("p",{class:"card-text"}," L'équerre permet de tracer des angles droits (90°) et de vérifier la perpendicularité entre deux droites. ")],-1))])]),M("div",QL,[M("div",JL,[M("div",ZL,[M("div",tD,[M("img",{src:De(OL),class:"img-fluid rounded tool-img",alt:"Compas"},null,8,eD)])]),s[3]||(s[3]=M("div",{class:"card-body"},[M("h5",{class:"card-title"},"Compas"),M("p",{class:"card-text"}," Le compas permet de tracer des cercles et des arcs de cercle. Il permet aussi de reporter des distances et de comparer des longueurs. ")],-1))])]),M("div",sD,[M("div",iD,[M("div",nD,[s[4]||(s[4]=M("h5",{class:"card-title"},"Gabarit",-1)),s[5]||(s[5]=M("p",{class:"card-text mb-4"}," Le gabarit est un modèle qui permet de reproduire des formes géométriques spécifiques. Il est particulièrement utile pour tracer des formes complexes ou répétitives. Voici quelques exemples de gabarits utilisés dans les exercices : ",-1)),M("div",rD,[(ft(!0),vt(ze,null,Ki(De(t),(r,o)=>(ft(),vt("div",{class:"col-md-2 col-sm-3 col-4",key:o},[M("img",{src:r,alt:`Exemple de gabarit ${o+1}`,class:"img-fluid rounded shadow-sm gabarit-img"},null,8,oD)]))),128))])])])]),s[9]||(s[9]=kl('<div class="col-md-6" data-v-eb5be388><div class="card h-100" data-v-eb5be388><div class="row g-0 p-3 justify-content-center" data-v-eb5be388><div class="col-6" data-v-eb5be388><img src="'+IL+'" class="img-fluid rounded tool-img" alt="Gabarit angle droit" data-v-eb5be388></div></div><div class="card-body" data-v-eb5be388><h5 class="card-title" data-v-eb5be388>Gabarit angle droit</h5><p class="card-text" data-v-eb5be388> Le gabarit d&#39;angle droit est un outil qui permet de vérifier ou de tracer des angles droits. </p><p data-v-eb5be388><em data-v-eb5be388>On peut fabriquer gabarit d&#39;angle droit en pliant une feuille A4 en deux selon une diagonale, puis encore en deux.</em></p></div></div></div><div class="col-md-6" data-v-eb5be388><div class="card h-100" data-v-eb5be388><div class="card-body" data-v-eb5be388><h5 class="card-title" data-v-eb5be388>Bande de papier</h5><p class="card-text" data-v-eb5be388> La bande de papier permet de comparer des longueurs, de reporter des longueurs et elle peut être utilisée par pliage pour construire des milieux. </p></div></div></div>',2)),M("div",aD,[M("div",lD,[M("div",cD,[M("div",hD,[M("img",{src:De(NL),class:"img-fluid rounded ficelle-img",alt:"Ficelle"},null,8,uD)])]),s[6]||(s[6]=M("div",{class:"card-body"},[M("h5",{class:"card-title"},"Ficelle"),M("p",{class:"card-text"}," La ficelle permet de vérifier les alignements. ")],-1))])]),M("div",dD,[M("div",fD,[M("div",pD,[M("div",gD,[M("img",{src:De(FL),class:"img-fluid rounded pochoir-img",alt:"Pochoir"},null,8,mD)])]),s[7]||(s[7]=M("div",{class:"card-body"},[M("h5",{class:"card-title"},"Pochoir"),M("p",{class:"card-text"},` Le pochoir est un gabarit "en creux". Il permet d'analyser la figure modèle et de restaurer la figure en examinant différemment "l'empreinte" de la figure. `)],-1))])])])])}}}),vD=Nl(bD,[["__scopeId","data-v-eb5be388"]]),_D="/RestFigBank/assets/img-trapeze-cercle-BdWke2bp.png",yD={class:"container py-5"},wD={class:"row"},AD={class:"col-12"},ED={class:"card shadow-sm mb-4"},SD={class:"card-body"},xD={class:"bg-light p-4 rounded mb-4 position-relative"},CD={key:0},TD={key:1},PD={class:"position-relative"},RD={key:0,class:"text-danger mt-2 small"},kD=Yn({__name:"ContributeView",setup(i){const t=zt(!1),e=zt(""),s=zt(""),n=zt(""),r=zt(""),o=zt(!1),l=zt(0),c=zt(0),h=zt(null);let u=null;const f={id:"trapeze-cercle",title:"Trapèze et cercle",description:"Restauration d'une figure combinant trapèze et cercle",path:"/pdfs/Trapeze-cercle.pdf",level:["CM2","6EME"],vision:["Ligne","Point"],instruments:["Compas","Règle non informable","Équerre","Gabarit angle droit"],withCost:!1,isScaled:!1,hasRotation:!1,withoutAmorce:!1,tags:["trapèze","cercle","centre"],source_url:"https://lea-geometrie.etab.ac-lille.fr/",source_url_title:"LéA géométrie"},p={id:"Identifiant unique de la situation (en minuscules, sans espaces ni caractères spéciaux)",title:"Titre de la situation tel qu'il apparaîtra dans l'interface",description:"Brève description de la situation",path:"Chemin vers le fichier PDF dans le dossier public (/pdfs/nom-du-fichier.pdf)",level:"Liste des niveaux concernés (CE1, CE2, CM1, CM2, 6EME, 5EME)",vision:"Liste des types de vision géométrique (Surface, Ligne, Point)",instruments:"Liste des instruments autorisés (Ficelle, Règle non informable, Règle informable, etc.)",withCost:"Indique si la situation inclut des coûts (true/false)",isScaled:"Indique si l'amorce n'est pas à l'échelle (true/false)",hasRotation:"La figure amorce a subit une rotation par rapport à la figure modèle (true/false)",withoutAmorce:"Avec ou sans amorce - Sans amorce, il s'agit d'une reproduction (true/false)",tags:"Liste de mots-clés pour faciliter la recherche",source_url:"URL de la source (optionnel)",source_url_title:"Titre de la source à afficher (optionnel)"},g=(C,T=2)=>JSON.stringify(C,null,T).replace(/^(\s{2}"[^"]+": \[)([\s\S]*?)(\n\s{2}\])/gm,(I,F,N,H)=>{const U=N.replace(/\n\s{4}/g," ").trim();return`${F}${U}${H}`}).replace(/\n\s{2}],/g,"],");sf(()=>{s.value=g(f)});const _=()=>{try{JSON.parse(s.value),e.value=""}catch{e.value="JSON invalide"}},v=async()=>{try{const C=JSON.parse(s.value),T=g(C);await navigator.clipboard.writeText(T),t.value=!0,setTimeout(()=>{t.value=!1},2e3)}catch{e.value="Impossible de copier : JSON invalide"}},E=C=>{if(!h.value)return;const T=h.value.getBoundingClientRect(),R=h.value.scrollTop,I=h.value.value;h.value.selectionStart,C.clientX-T.left;const F=C.clientY-T.top+R,N=I.split(`
`);let H="",U=0;const Q=24;for(let Et=0;Et<N.length;Et++){if(U<=F&&F<=U+Q){H=N[Et];break}U+=Q}const tt=/"([^"]+)"\s*:/.exec(H);if(tt){const Et=tt[1],wt=p[Et];wt?(u&&clearTimeout(u),r.value=Et,n.value=wt,o.value=!0,l.value=C.clientX-T.left+10,c.value=C.clientY-T.top-20,u=window.setTimeout(()=>{S(),u=null},1500)):S()}else S()},S=()=>{o.value=!1,r.value="",u&&(clearTimeout(u),u=null)};return(C,T)=>(ft(),vt("div",yD,[T[4]||(T[4]=M("h1",{class:"mb-4"},"Comment contribuer ?",-1)),M("div",wD,[M("div",AD,[M("div",ED,[M("div",SD,[T[2]||(T[2]=M("p",{class:"lead"}," Pour ajouter une nouvelle situation à la bibliothèque, vous devez fournir un fichier PDF et ses métadonnées au format JSON. Voici la structure à suivre, illustrée par un exemple que vous pouvez modifier : ",-1)),M("div",xD,[M("button",{class:zo(["btn btn-sm btn-outline-primary position-absolute top-0 end-0 m-2",{"btn-success":t.value}]),onClick:v},[t.value?(ft(),vt("span",TD,"Copié !")):(ft(),vt("span",CD,"Copier"))],2),M("div",PD,[Cn(M("textarea",{"onUpdate:modelValue":T[0]||(T[0]=R=>s.value=R),class:"form-control code-editor",rows:"20",spellcheck:"false",onInput:_,onMousemove:E,onMouseout:S,ref_key:"textarea",ref:h},null,544),[[t0,s.value]]),o.value?(ft(),vt("div",{key:0,class:"custom-tooltip",style:gg({top:c.value+"px",left:l.value+"px"})},[M("strong",null,Re(r.value),1),Ee(" : "+Re(n.value),1)],4)):is("",!0)]),e.value?(ft(),vt("div",RD,[T[1]||(T[1]=M("i",{class:"bi bi-exclamation-triangle"},null,-1)),Ee(" "+Re(e.value),1)])):is("",!0)]),T[3]||(T[3]=kl('<div class="mt-4" data-v-f6b8a5b1><div class="text-center" data-v-f6b8a5b1><img src="'+_D+'" alt="Exemple : Trapèze et cercle" class="img-fluid rounded shadow-sm half-size" data-v-f6b8a5b1></div></div><h2 class="h5 mt-4 mb-3" data-v-f6b8a5b1>Description des champs :</h2><ul class="list-group list-group-flush" data-v-f6b8a5b1><li class="list-group-item" data-v-f6b8a5b1><strong data-v-f6b8a5b1>id</strong> : Identifiant unique de la situation (en minuscules, sans espaces ni caractères spéciaux) </li><li class="list-group-item" data-v-f6b8a5b1><strong data-v-f6b8a5b1>title</strong> : Titre de la situation tel qu&#39;il apparaîtra dans l&#39;interface </li><li class="list-group-item" data-v-f6b8a5b1><strong data-v-f6b8a5b1>description</strong> : Brève description de la situation </li><li class="list-group-item" data-v-f6b8a5b1><strong data-v-f6b8a5b1>path</strong> : Chemin vers le fichier PDF dans le dossier public (/pdfs/nom-du-fichier.pdf) </li><li class="list-group-item" data-v-f6b8a5b1><strong data-v-f6b8a5b1>level</strong> : Liste des niveaux concernés. Valeurs possibles : <ul class="mt-2" data-v-f6b8a5b1><li data-v-f6b8a5b1>CE1</li><li data-v-f6b8a5b1>CE2</li><li data-v-f6b8a5b1>CM1</li><li data-v-f6b8a5b1>CM2</li><li data-v-f6b8a5b1>6EME</li><li data-v-f6b8a5b1>5EME</li></ul></li><li class="list-group-item" data-v-f6b8a5b1><strong data-v-f6b8a5b1>vision</strong> : Liste des types de vision géométrique. Valeurs possibles : <ul class="mt-2" data-v-f6b8a5b1><li data-v-f6b8a5b1>Surface</li><li data-v-f6b8a5b1>Ligne</li><li data-v-f6b8a5b1>Point</li></ul></li><li class="list-group-item" data-v-f6b8a5b1><strong data-v-f6b8a5b1>instruments</strong> : Liste des instruments autorisés. Valeurs possibles : <ul class="mt-2" data-v-f6b8a5b1><li data-v-f6b8a5b1>Ficelle</li><li data-v-f6b8a5b1>Règle non informable</li><li data-v-f6b8a5b1>Règle informable</li><li data-v-f6b8a5b1>Bande de papier</li><li data-v-f6b8a5b1>Compas</li><li data-v-f6b8a5b1>Gabarit angle droit</li><li data-v-f6b8a5b1>Équerre</li><li data-v-f6b8a5b1>Autre gabarit</li><li data-v-f6b8a5b1>Pochoir</li></ul></li><li class="list-group-item" data-v-f6b8a5b1><strong data-v-f6b8a5b1>withCost</strong> : Indique si la situation inclut des coûts (true/false) </li><li class="list-group-item" data-v-f6b8a5b1><strong data-v-f6b8a5b1>isScaled</strong> : Indique si l&#39;amorce n&#39;est pas à l&#39;échelle (true/false) </li><li class="list-group-item" data-v-f6b8a5b1><strong data-v-f6b8a5b1>hasRotation</strong> : La figure amorce a subit une rotation par rapport à la figure modèle (true/false) </li><li class="list-group-item" data-v-f6b8a5b1><strong data-v-f6b8a5b1>withoutAmorce</strong> : Avec ou sans amorce - Sans amorce, il s&#39;agit d&#39;une reproduction (true/false) </li><li class="list-group-item" data-v-f6b8a5b1><strong data-v-f6b8a5b1>tags</strong> : Liste de mots-clés pour faciliter la recherche </li><li class="list-group-item" data-v-f6b8a5b1><strong data-v-f6b8a5b1>source_url</strong> : URL de la source (optionnel) </li><li class="list-group-item" data-v-f6b8a5b1><strong data-v-f6b8a5b1>source_url_title</strong> : Titre de la source à afficher (optionnel) </li></ul><h2 class="h5 mt-4 mb-3" data-v-f6b8a5b1>Comment l&#39;envoyer ?</h2><ol data-v-f6b8a5b1><li data-v-f6b8a5b1>Votre fichier PDF doit contenir une ou deux pages : <ul data-v-f6b8a5b1><li data-v-f6b8a5b1>la première page est la situation avec la figure modèle et l&#39;amorce.</li><li data-v-f6b8a5b1>La deuxième (optionnelle) donne les outils nécessaires à la situation.</li></ul></li><li data-v-f6b8a5b1>Envoyer copier le json dans un mail, joindre le PDF et envoyer à <a href="mailto:restfigbankupload@gmail.com" target="_blank" data-v-f6b8a5b1>restfigbankupload@gmail.com</a></li></ol>',5))])])])])]))}}),ID=Nl(kD,[["__scopeId","data-v-f6b8a5b1"]]),MD=_R({history:YP("/RestFigBank/"),routes:[{path:"/",name:"home",component:sL},{path:"/about",name:"about",component:()=>YM(()=>import("./AboutView-CVXPuyns.js"),__vite__mapDeps([0,1]))},{path:"/mode-emploi",name:"howto",component:bL},{path:"/licence",name:"license",component:wL},{path:"/instruments",name:"instruments",component:vD},{path:"/contribuer",name:"contribute",component:ID}]}),Vv=lP(GM);Vv.use(uP());Vv.use(MD);Vv.mount("#app");export{Nl as _,M as a,vt as c,ft as o};
