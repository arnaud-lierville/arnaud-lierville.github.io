const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/AboutView-CeOW05w4.js","assets/AboutView-CSIvawM9.css"])))=>i.map(i=>d[i]);
var _C=Object.defineProperty;var dy=n=>{throw TypeError(n)};var vC=(n,t,e)=>t in n?_C(n,t,{enumerable:!0,configurable:!0,writable:!0,value:e}):n[t]=e;var J=(n,t,e)=>vC(n,typeof t!="symbol"?t+"":t,e),Qg=(n,t,e)=>t.has(n)||dy("Cannot "+e);var l=(n,t,e)=>(Qg(n,t,"read from private field"),e?e.call(n):t.get(n)),w=(n,t,e)=>t.has(n)?dy("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(n):t.set(n,e),b=(n,t,e,s)=>(Qg(n,t,"write to private field"),s?s.call(n,e):t.set(n,e),e),A=(n,t,e)=>(Qg(n,t,"access private method"),e);var Ns=(n,t,e,s)=>({set _(i){b(n,t,i,e)},get _(){return l(n,t,s)}});(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))s(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const o of r.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function e(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerPolicy&&(r.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?r.credentials="include":i.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function s(i){if(i.ep)return;i.ep=!0;const r=e(i);fetch(i.href,r)}})();var Rf={exports:{}};/*!
  * Bootstrap v5.3.6 (https://getbootstrap.com/)
  * Copyright 2011-2025 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
  * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE)
  */var yC=Rf.exports,fy;function wC(){return fy||(fy=1,function(n,t){(function(e,s){n.exports=s()})(yC,function(){const e=new Map,s={set(y,d,m){e.has(y)||e.set(y,new Map);const E=e.get(y);E.has(d)||E.size===0?E.set(d,m):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(E.keys())[0]}.`)},get:(y,d)=>e.has(y)&&e.get(y).get(d)||null,remove(y,d){if(!e.has(y))return;const m=e.get(y);m.delete(d),m.size===0&&e.delete(y)}},i="transitionend",r=y=>(y&&window.CSS&&window.CSS.escape&&(y=y.replace(/#([^\s"#']+)/g,(d,m)=>`#${CSS.escape(m)}`)),y),o=y=>{y.dispatchEvent(new Event(i))},a=y=>!(!y||typeof y!="object")&&(y.jquery!==void 0&&(y=y[0]),y.nodeType!==void 0),c=y=>a(y)?y.jquery?y[0]:y:typeof y=="string"&&y.length>0?document.querySelector(r(y)):null,h=y=>{if(!a(y)||y.getClientRects().length===0)return!1;const d=getComputedStyle(y).getPropertyValue("visibility")==="visible",m=y.closest("details:not([open])");if(!m)return d;if(m!==y){const E=y.closest("summary");if(E&&E.parentNode!==m||E===null)return!1}return d},u=y=>!y||y.nodeType!==Node.ELEMENT_NODE||!!y.classList.contains("disabled")||(y.disabled!==void 0?y.disabled:y.hasAttribute("disabled")&&y.getAttribute("disabled")!=="false"),f=y=>{if(!document.documentElement.attachShadow)return null;if(typeof y.getRootNode=="function"){const d=y.getRootNode();return d instanceof ShadowRoot?d:null}return y instanceof ShadowRoot?y:y.parentNode?f(y.parentNode):null},p=()=>{},g=y=>{y.offsetHeight},v=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,_=[],x=()=>document.documentElement.dir==="rtl",S=y=>{var d;d=()=>{const m=v();if(m){const E=y.NAME,L=m.fn[E];m.fn[E]=y.jQueryInterface,m.fn[E].Constructor=y,m.fn[E].noConflict=()=>(m.fn[E]=L,y.jQueryInterface)}},document.readyState==="loading"?(_.length||document.addEventListener("DOMContentLoaded",()=>{for(const m of _)m()}),_.push(d)):d()},C=(y,d=[],m=y)=>typeof y=="function"?y.call(...d):m,T=(y,d,m=!0)=>{if(!m)return void C(y);const E=(B=>{if(!B)return 0;let{transitionDuration:G,transitionDelay:et}=window.getComputedStyle(B);const ut=Number.parseFloat(G),dt=Number.parseFloat(et);return ut||dt?(G=G.split(",")[0],et=et.split(",")[0],1e3*(Number.parseFloat(G)+Number.parseFloat(et))):0})(d)+5;let L=!1;const D=({target:B})=>{B===d&&(L=!0,d.removeEventListener(i,D),C(y))};d.addEventListener(i,D),setTimeout(()=>{L||o(d)},E)},R=(y,d,m,E)=>{const L=y.length;let D=y.indexOf(d);return D===-1?!m&&E?y[L-1]:y[0]:(D+=m?1:-1,E&&(D=(D+L)%L),y[Math.max(0,Math.min(D,L-1))])},I=/[^.]*(?=\..*)\.|.*/,F=/\..*/,N=/::\d+$/,H={};let V=1;const Y={mouseenter:"mouseover",mouseleave:"mouseout"},Z=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function vt(y,d){return d&&`${d}::${V++}`||y.uidEvent||V++}function At(y){const d=vt(y);return y.uidEvent=d,H[d]=H[d]||{},H[d]}function St(y,d,m=null){return Object.values(y).find(E=>E.callable===d&&E.delegationSelector===m)}function fe(y,d,m){const E=typeof d=="string",L=E?m:d||m;let D=Le(y);return Z.has(D)||(D=y),[E,L,D]}function Q(y,d,m,E,L){if(typeof d!="string"||!y)return;let[D,B,G]=fe(d,m,E);d in Y&&(B=(Pt=>function(xt){if(!xt.relatedTarget||xt.relatedTarget!==xt.delegateTarget&&!xt.delegateTarget.contains(xt.relatedTarget))return Pt.call(this,xt)})(B));const et=At(y),ut=et[G]||(et[G]={}),dt=St(ut,B,D?m:null);if(dt)return void(dt.oneOff=dt.oneOff&&L);const at=vt(B,d.replace(I,"")),Mt=D?function(Et,Pt,xt){return function Rt(ae){const me=Et.querySelectorAll(Pt);for(let{target:$t}=ae;$t&&$t!==this;$t=$t.parentNode)for(const Jt of me)if(Jt===$t)return Ee(ae,{delegateTarget:$t}),Rt.oneOff&&z.off(Et,ae.type,Pt,xt),xt.apply($t,[ae])}}(y,m,B):function(Et,Pt){return function xt(Rt){return Ee(Rt,{delegateTarget:Et}),xt.oneOff&&z.off(Et,Rt.type,Pt),Pt.apply(Et,[Rt])}}(y,B);Mt.delegationSelector=D?m:null,Mt.callable=B,Mt.oneOff=L,Mt.uidEvent=at,ut[at]=Mt,y.addEventListener(G,Mt,D)}function X(y,d,m,E,L){const D=St(d[m],E,L);D&&(y.removeEventListener(m,D,!!L),delete d[m][D.uidEvent])}function Ct(y,d,m,E){const L=d[m]||{};for(const[D,B]of Object.entries(L))D.includes(E)&&X(y,d,m,B.callable,B.delegationSelector)}function Le(y){return y=y.replace(F,""),Y[y]||y}const z={on(y,d,m,E){Q(y,d,m,E,!1)},one(y,d,m,E){Q(y,d,m,E,!0)},off(y,d,m,E){if(typeof d!="string"||!y)return;const[L,D,B]=fe(d,m,E),G=B!==d,et=At(y),ut=et[B]||{},dt=d.startsWith(".");if(D===void 0){if(dt)for(const at of Object.keys(et))Ct(y,et,at,d.slice(1));for(const[at,Mt]of Object.entries(ut)){const Et=at.replace(N,"");G&&!d.includes(Et)||X(y,et,B,Mt.callable,Mt.delegationSelector)}}else{if(!Object.keys(ut).length)return;X(y,et,B,D,L?m:null)}},trigger(y,d,m){if(typeof d!="string"||!y)return null;const E=v();let L=null,D=!0,B=!0,G=!1;d!==Le(d)&&E&&(L=E.Event(d,m),E(y).trigger(L),D=!L.isPropagationStopped(),B=!L.isImmediatePropagationStopped(),G=L.isDefaultPrevented());const et=Ee(new Event(d,{bubbles:D,cancelable:!0}),m);return G&&et.preventDefault(),B&&y.dispatchEvent(et),et.defaultPrevented&&L&&L.preventDefault(),et}};function Ee(y,d={}){for(const[m,E]of Object.entries(d))try{y[m]=E}catch{Object.defineProperty(y,m,{configurable:!0,get:()=>E})}return y}function Vt(y){if(y==="true")return!0;if(y==="false")return!1;if(y===Number(y).toString())return Number(y);if(y===""||y==="null")return null;if(typeof y!="string")return y;try{return JSON.parse(decodeURIComponent(y))}catch{return y}}function Kt(y){return y.replace(/[A-Z]/g,d=>`-${d.toLowerCase()}`)}const Pe={setDataAttribute(y,d,m){y.setAttribute(`data-bs-${Kt(d)}`,m)},removeDataAttribute(y,d){y.removeAttribute(`data-bs-${Kt(d)}`)},getDataAttributes(y){if(!y)return{};const d={},m=Object.keys(y.dataset).filter(E=>E.startsWith("bs")&&!E.startsWith("bsConfig"));for(const E of m){let L=E.replace(/^bs/,"");L=L.charAt(0).toLowerCase()+L.slice(1),d[L]=Vt(y.dataset[E])}return d},getDataAttribute:(y,d)=>Vt(y.getAttribute(`data-bs-${Kt(d)}`))};class Ge{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(d){return d=this._mergeConfigObj(d),d=this._configAfterMerge(d),this._typeCheckConfig(d),d}_configAfterMerge(d){return d}_mergeConfigObj(d,m){const E=a(m)?Pe.getDataAttribute(m,"config"):{};return{...this.constructor.Default,...typeof E=="object"?E:{},...a(m)?Pe.getDataAttributes(m):{},...typeof d=="object"?d:{}}}_typeCheckConfig(d,m=this.constructor.DefaultType){for(const[L,D]of Object.entries(m)){const B=d[L],G=a(B)?"element":(E=B)==null?`${E}`:Object.prototype.toString.call(E).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(D).test(G))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${L}" provided type "${G}" but expected type "${D}".`)}var E}}class Wt extends Ge{constructor(d,m){super(),(d=c(d))&&(this._element=d,this._config=this._getConfig(m),s.set(this._element,this.constructor.DATA_KEY,this))}dispose(){s.remove(this._element,this.constructor.DATA_KEY),z.off(this._element,this.constructor.EVENT_KEY);for(const d of Object.getOwnPropertyNames(this))this[d]=null}_queueCallback(d,m,E=!0){T(d,m,E)}_getConfig(d){return d=this._mergeConfigObj(d,this._element),d=this._configAfterMerge(d),this._typeCheckConfig(d),d}static getInstance(d){return s.get(c(d),this.DATA_KEY)}static getOrCreateInstance(d,m={}){return this.getInstance(d)||new this(d,typeof m=="object"?m:null)}static get VERSION(){return"5.3.6"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(d){return`${d}${this.EVENT_KEY}`}}const $=y=>{let d=y.getAttribute("data-bs-target");if(!d||d==="#"){let m=y.getAttribute("href");if(!m||!m.includes("#")&&!m.startsWith("."))return null;m.includes("#")&&!m.startsWith("#")&&(m=`#${m.split("#")[1]}`),d=m&&m!=="#"?m.trim():null}return d?d.split(",").map(m=>r(m)).join(","):null},j={find:(y,d=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(d,y)),findOne:(y,d=document.documentElement)=>Element.prototype.querySelector.call(d,y),children:(y,d)=>[].concat(...y.children).filter(m=>m.matches(d)),parents(y,d){const m=[];let E=y.parentNode.closest(d);for(;E;)m.push(E),E=E.parentNode.closest(d);return m},prev(y,d){let m=y.previousElementSibling;for(;m;){if(m.matches(d))return[m];m=m.previousElementSibling}return[]},next(y,d){let m=y.nextElementSibling;for(;m;){if(m.matches(d))return[m];m=m.nextElementSibling}return[]},focusableChildren(y){const d=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map(m=>`${m}:not([tabindex^="-"])`).join(",");return this.find(d,y).filter(m=>!u(m)&&h(m))},getSelectorFromElement(y){const d=$(y);return d&&j.findOne(d)?d:null},getElementFromSelector(y){const d=$(y);return d?j.findOne(d):null},getMultipleElementsFromSelector(y){const d=$(y);return d?j.find(d):[]}},it=(y,d="hide")=>{const m=`click.dismiss${y.EVENT_KEY}`,E=y.NAME;z.on(document,m,`[data-bs-dismiss="${E}"]`,function(L){if(["A","AREA"].includes(this.tagName)&&L.preventDefault(),u(this))return;const D=j.getElementFromSelector(this)||this.closest(`.${E}`);y.getOrCreateInstance(D)[d]()})},ht=".bs.alert",qt=`close${ht}`,P=`closed${ht}`;class k extends Wt{static get NAME(){return"alert"}close(){if(z.trigger(this._element,qt).defaultPrevented)return;this._element.classList.remove("show");const d=this._element.classList.contains("fade");this._queueCallback(()=>this._destroyElement(),this._element,d)}_destroyElement(){this._element.remove(),z.trigger(this._element,P),this.dispose()}static jQueryInterface(d){return this.each(function(){const m=k.getOrCreateInstance(this);if(typeof d=="string"){if(m[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);m[d](this)}})}}it(k,"close"),S(k);const O='[data-bs-toggle="button"]';class U extends Wt{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(d){return this.each(function(){const m=U.getOrCreateInstance(this);d==="toggle"&&m[d]()})}}z.on(document,"click.bs.button.data-api",O,y=>{y.preventDefault();const d=y.target.closest(O);U.getOrCreateInstance(d).toggle()}),S(U);const W=".bs.swipe",q=`touchstart${W}`,rt=`touchmove${W}`,st=`touchend${W}`,tt=`pointerdown${W}`,K=`pointerup${W}`,bt={endCallback:null,leftCallback:null,rightCallback:null},ot={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class gt extends Ge{constructor(d,m){super(),this._element=d,d&&gt.isSupported()&&(this._config=this._getConfig(m),this._deltaX=0,this._supportPointerEvents=!!window.PointerEvent,this._initEvents())}static get Default(){return bt}static get DefaultType(){return ot}static get NAME(){return"swipe"}dispose(){z.off(this._element,W)}_start(d){this._supportPointerEvents?this._eventIsPointerPenTouch(d)&&(this._deltaX=d.clientX):this._deltaX=d.touches[0].clientX}_end(d){this._eventIsPointerPenTouch(d)&&(this._deltaX=d.clientX-this._deltaX),this._handleSwipe(),C(this._config.endCallback)}_move(d){this._deltaX=d.touches&&d.touches.length>1?0:d.touches[0].clientX-this._deltaX}_handleSwipe(){const d=Math.abs(this._deltaX);if(d<=40)return;const m=d/this._deltaX;this._deltaX=0,m&&C(m>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(z.on(this._element,tt,d=>this._start(d)),z.on(this._element,K,d=>this._end(d)),this._element.classList.add("pointer-event")):(z.on(this._element,q,d=>this._start(d)),z.on(this._element,rt,d=>this._move(d)),z.on(this._element,st,d=>this._end(d)))}_eventIsPointerPenTouch(d){return this._supportPointerEvents&&(d.pointerType==="pen"||d.pointerType==="touch")}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const _t=".bs.carousel",Ht=".data-api",oe="ArrowLeft",Qt="ArrowRight",Xe="next",Oe="prev",cs="left",ks="right",Go=`slide${_t}`,Cl=`slid${_t}`,Is=`keydown${_t}`,xi=`mouseenter${_t}`,Zd=`mouseleave${_t}`,fS=`dragstart${_t}`,pS=`load${_t}${Ht}`,gS=`click${_t}${Ht}`,F_="carousel",tf="active",$_=".active",B_=".carousel-item",mS=$_+B_,bS={[oe]:ks,[Qt]:cs},_S={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},vS={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class Tl extends Wt{constructor(d,m){super(d,m),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=j.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===F_&&this.cycle()}static get Default(){return _S}static get DefaultType(){return vS}static get NAME(){return"carousel"}next(){this._slide(Xe)}nextWhenVisible(){!document.hidden&&h(this._element)&&this.next()}prev(){this._slide(Oe)}pause(){this._isSliding&&o(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval(()=>this.nextWhenVisible(),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?z.one(this._element,Cl,()=>this.cycle()):this.cycle())}to(d){const m=this._getItems();if(d>m.length-1||d<0)return;if(this._isSliding)return void z.one(this._element,Cl,()=>this.to(d));const E=this._getItemIndex(this._getActive());if(E===d)return;const L=d>E?Xe:Oe;this._slide(L,m[d])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(d){return d.defaultInterval=d.interval,d}_addEventListeners(){this._config.keyboard&&z.on(this._element,Is,d=>this._keydown(d)),this._config.pause==="hover"&&(z.on(this._element,xi,()=>this.pause()),z.on(this._element,Zd,()=>this._maybeEnableCycle())),this._config.touch&&gt.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const m of j.find(".carousel-item img",this._element))z.on(m,fS,E=>E.preventDefault());const d={leftCallback:()=>this._slide(this._directionToOrder(cs)),rightCallback:()=>this._slide(this._directionToOrder(ks)),endCallback:()=>{this._config.pause==="hover"&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout(()=>this._maybeEnableCycle(),500+this._config.interval))}};this._swipeHelper=new gt(this._element,d)}_keydown(d){if(/input|textarea/i.test(d.target.tagName))return;const m=bS[d.key];m&&(d.preventDefault(),this._slide(this._directionToOrder(m)))}_getItemIndex(d){return this._getItems().indexOf(d)}_setActiveIndicatorElement(d){if(!this._indicatorsElement)return;const m=j.findOne($_,this._indicatorsElement);m.classList.remove(tf),m.removeAttribute("aria-current");const E=j.findOne(`[data-bs-slide-to="${d}"]`,this._indicatorsElement);E&&(E.classList.add(tf),E.setAttribute("aria-current","true"))}_updateInterval(){const d=this._activeElement||this._getActive();if(!d)return;const m=Number.parseInt(d.getAttribute("data-bs-interval"),10);this._config.interval=m||this._config.defaultInterval}_slide(d,m=null){if(this._isSliding)return;const E=this._getActive(),L=d===Xe,D=m||R(this._getItems(),E,L,this._config.wrap);if(D===E)return;const B=this._getItemIndex(D),G=at=>z.trigger(this._element,at,{relatedTarget:D,direction:this._orderToDirection(d),from:this._getItemIndex(E),to:B});if(G(Go).defaultPrevented||!E||!D)return;const et=!!this._interval;this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(B),this._activeElement=D;const ut=L?"carousel-item-start":"carousel-item-end",dt=L?"carousel-item-next":"carousel-item-prev";D.classList.add(dt),g(D),E.classList.add(ut),D.classList.add(ut),this._queueCallback(()=>{D.classList.remove(ut,dt),D.classList.add(tf),E.classList.remove(tf,dt,ut),this._isSliding=!1,G(Cl)},E,this._isAnimated()),et&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return j.findOne(mS,this._element)}_getItems(){return j.find(B_,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(d){return x()?d===cs?Oe:Xe:d===cs?Xe:Oe}_orderToDirection(d){return x()?d===Oe?cs:ks:d===Oe?ks:cs}static jQueryInterface(d){return this.each(function(){const m=Tl.getOrCreateInstance(this,d);if(typeof d!="number"){if(typeof d=="string"){if(m[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);m[d]()}}else m.to(d)})}}z.on(document,gS,"[data-bs-slide], [data-bs-slide-to]",function(y){const d=j.getElementFromSelector(this);if(!d||!d.classList.contains(F_))return;y.preventDefault();const m=Tl.getOrCreateInstance(d),E=this.getAttribute("data-bs-slide-to");return E?(m.to(E),void m._maybeEnableCycle()):Pe.getDataAttribute(this,"slide")==="next"?(m.next(),void m._maybeEnableCycle()):(m.prev(),void m._maybeEnableCycle())}),z.on(window,pS,()=>{const y=j.find('[data-bs-ride="carousel"]');for(const d of y)Tl.getOrCreateInstance(d)}),S(Tl);const wh=".bs.collapse",yS=`show${wh}`,wS=`shown${wh}`,AS=`hide${wh}`,ES=`hidden${wh}`,SS=`click${wh}.data-api`,vg="show",Pl="collapse",ef="collapsing",xS=`:scope .${Pl} .${Pl}`,yg='[data-bs-toggle="collapse"]',CS={parent:null,toggle:!0},TS={parent:"(null|element)",toggle:"boolean"};class Rl extends Wt{constructor(d,m){super(d,m),this._isTransitioning=!1,this._triggerArray=[];const E=j.find(yg);for(const L of E){const D=j.getSelectorFromElement(L),B=j.find(D).filter(G=>G===this._element);D!==null&&B.length&&this._triggerArray.push(L)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return CS}static get DefaultType(){return TS}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let d=[];if(this._config.parent&&(d=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter(L=>L!==this._element).map(L=>Rl.getOrCreateInstance(L,{toggle:!1}))),d.length&&d[0]._isTransitioning||z.trigger(this._element,yS).defaultPrevented)return;for(const L of d)L.hide();const m=this._getDimension();this._element.classList.remove(Pl),this._element.classList.add(ef),this._element.style[m]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const E=`scroll${m[0].toUpperCase()+m.slice(1)}`;this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(ef),this._element.classList.add(Pl,vg),this._element.style[m]="",z.trigger(this._element,wS)},this._element,!0),this._element.style[m]=`${this._element[E]}px`}hide(){if(this._isTransitioning||!this._isShown()||z.trigger(this._element,AS).defaultPrevented)return;const d=this._getDimension();this._element.style[d]=`${this._element.getBoundingClientRect()[d]}px`,g(this._element),this._element.classList.add(ef),this._element.classList.remove(Pl,vg);for(const m of this._triggerArray){const E=j.getElementFromSelector(m);E&&!this._isShown(E)&&this._addAriaAndCollapsedClass([m],!1)}this._isTransitioning=!0,this._element.style[d]="",this._queueCallback(()=>{this._isTransitioning=!1,this._element.classList.remove(ef),this._element.classList.add(Pl),z.trigger(this._element,ES)},this._element,!0)}_isShown(d=this._element){return d.classList.contains(vg)}_configAfterMerge(d){return d.toggle=!!d.toggle,d.parent=c(d.parent),d}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const d=this._getFirstLevelChildren(yg);for(const m of d){const E=j.getElementFromSelector(m);E&&this._addAriaAndCollapsedClass([m],this._isShown(E))}}_getFirstLevelChildren(d){const m=j.find(xS,this._config.parent);return j.find(d,this._config.parent).filter(E=>!m.includes(E))}_addAriaAndCollapsedClass(d,m){if(d.length)for(const E of d)E.classList.toggle("collapsed",!m),E.setAttribute("aria-expanded",m)}static jQueryInterface(d){const m={};return typeof d=="string"&&/show|hide/.test(d)&&(m.toggle=!1),this.each(function(){const E=Rl.getOrCreateInstance(this,m);if(typeof d=="string"){if(E[d]===void 0)throw new TypeError(`No method named "${d}"`);E[d]()}})}}z.on(document,SS,yg,function(y){(y.target.tagName==="A"||y.delegateTarget&&y.delegateTarget.tagName==="A")&&y.preventDefault();for(const d of j.getMultipleElementsFromSelector(this))Rl.getOrCreateInstance(d,{toggle:!1}).toggle()}),S(Rl);var Ls="top",ei="bottom",si="right",Ms="left",sf="auto",kl=[Ls,ei,si,Ms],Xo="start",Il="end",H_="clippingParents",wg="viewport",Ll="popper",j_="reference",Ag=kl.reduce(function(y,d){return y.concat([d+"-"+Xo,d+"-"+Il])},[]),Eg=[].concat(kl,[sf]).reduce(function(y,d){return y.concat([d,d+"-"+Xo,d+"-"+Il])},[]),V_="beforeRead",U_="read",z_="afterRead",W_="beforeMain",q_="main",G_="afterMain",X_="beforeWrite",K_="write",Y_="afterWrite",Q_=[V_,U_,z_,W_,q_,G_,X_,K_,Y_];function pn(y){return y?(y.nodeName||"").toLowerCase():null}function ii(y){if(y==null)return window;if(y.toString()!=="[object Window]"){var d=y.ownerDocument;return d&&d.defaultView||window}return y}function Ko(y){return y instanceof ii(y).Element||y instanceof Element}function Ci(y){return y instanceof ii(y).HTMLElement||y instanceof HTMLElement}function Sg(y){return typeof ShadowRoot<"u"&&(y instanceof ii(y).ShadowRoot||y instanceof ShadowRoot)}const xg={name:"applyStyles",enabled:!0,phase:"write",fn:function(y){var d=y.state;Object.keys(d.elements).forEach(function(m){var E=d.styles[m]||{},L=d.attributes[m]||{},D=d.elements[m];Ci(D)&&pn(D)&&(Object.assign(D.style,E),Object.keys(L).forEach(function(B){var G=L[B];G===!1?D.removeAttribute(B):D.setAttribute(B,G===!0?"":G)}))})},effect:function(y){var d=y.state,m={popper:{position:d.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(d.elements.popper.style,m.popper),d.styles=m,d.elements.arrow&&Object.assign(d.elements.arrow.style,m.arrow),function(){Object.keys(d.elements).forEach(function(E){var L=d.elements[E],D=d.attributes[E]||{},B=Object.keys(d.styles.hasOwnProperty(E)?d.styles[E]:m[E]).reduce(function(G,et){return G[et]="",G},{});Ci(L)&&pn(L)&&(Object.assign(L.style,B),Object.keys(D).forEach(function(G){L.removeAttribute(G)}))})}},requires:["computeStyles"]};function gn(y){return y.split("-")[0]}var Yo=Math.max,nf=Math.min,Ml=Math.round;function Cg(){var y=navigator.userAgentData;return y!=null&&y.brands&&Array.isArray(y.brands)?y.brands.map(function(d){return d.brand+"/"+d.version}).join(" "):navigator.userAgent}function J_(){return!/^((?!chrome|android).)*safari/i.test(Cg())}function Dl(y,d,m){d===void 0&&(d=!1),m===void 0&&(m=!1);var E=y.getBoundingClientRect(),L=1,D=1;d&&Ci(y)&&(L=y.offsetWidth>0&&Ml(E.width)/y.offsetWidth||1,D=y.offsetHeight>0&&Ml(E.height)/y.offsetHeight||1);var B=(Ko(y)?ii(y):window).visualViewport,G=!J_()&&m,et=(E.left+(G&&B?B.offsetLeft:0))/L,ut=(E.top+(G&&B?B.offsetTop:0))/D,dt=E.width/L,at=E.height/D;return{width:dt,height:at,top:ut,right:et+dt,bottom:ut+at,left:et,x:et,y:ut}}function Tg(y){var d=Dl(y),m=y.offsetWidth,E=y.offsetHeight;return Math.abs(d.width-m)<=1&&(m=d.width),Math.abs(d.height-E)<=1&&(E=d.height),{x:y.offsetLeft,y:y.offsetTop,width:m,height:E}}function Z_(y,d){var m=d.getRootNode&&d.getRootNode();if(y.contains(d))return!0;if(m&&Sg(m)){var E=d;do{if(E&&y.isSameNode(E))return!0;E=E.parentNode||E.host}while(E)}return!1}function Wn(y){return ii(y).getComputedStyle(y)}function PS(y){return["table","td","th"].indexOf(pn(y))>=0}function jr(y){return((Ko(y)?y.ownerDocument:y.document)||window.document).documentElement}function rf(y){return pn(y)==="html"?y:y.assignedSlot||y.parentNode||(Sg(y)?y.host:null)||jr(y)}function tv(y){return Ci(y)&&Wn(y).position!=="fixed"?y.offsetParent:null}function Ah(y){for(var d=ii(y),m=tv(y);m&&PS(m)&&Wn(m).position==="static";)m=tv(m);return m&&(pn(m)==="html"||pn(m)==="body"&&Wn(m).position==="static")?d:m||function(E){var L=/firefox/i.test(Cg());if(/Trident/i.test(Cg())&&Ci(E)&&Wn(E).position==="fixed")return null;var D=rf(E);for(Sg(D)&&(D=D.host);Ci(D)&&["html","body"].indexOf(pn(D))<0;){var B=Wn(D);if(B.transform!=="none"||B.perspective!=="none"||B.contain==="paint"||["transform","perspective"].indexOf(B.willChange)!==-1||L&&B.willChange==="filter"||L&&B.filter&&B.filter!=="none")return D;D=D.parentNode}return null}(y)||d}function Pg(y){return["top","bottom"].indexOf(y)>=0?"x":"y"}function Eh(y,d,m){return Yo(y,nf(d,m))}function ev(y){return Object.assign({},{top:0,right:0,bottom:0,left:0},y)}function sv(y,d){return d.reduce(function(m,E){return m[E]=y,m},{})}const iv={name:"arrow",enabled:!0,phase:"main",fn:function(y){var d,m=y.state,E=y.name,L=y.options,D=m.elements.arrow,B=m.modifiersData.popperOffsets,G=gn(m.placement),et=Pg(G),ut=[Ms,si].indexOf(G)>=0?"height":"width";if(D&&B){var dt=function(le,ne){return ev(typeof(le=typeof le=="function"?le(Object.assign({},ne.rects,{placement:ne.placement})):le)!="number"?le:sv(le,kl))}(L.padding,m),at=Tg(D),Mt=et==="y"?Ls:Ms,Et=et==="y"?ei:si,Pt=m.rects.reference[ut]+m.rects.reference[et]-B[et]-m.rects.popper[ut],xt=B[et]-m.rects.reference[et],Rt=Ah(D),ae=Rt?et==="y"?Rt.clientHeight||0:Rt.clientWidth||0:0,me=Pt/2-xt/2,$t=dt[Mt],Jt=ae-at[ut]-dt[Et],Dt=ae/2-at[ut]/2+me,Ut=Eh($t,Dt,Jt),ie=et;m.modifiersData[E]=((d={})[ie]=Ut,d.centerOffset=Ut-Dt,d)}},effect:function(y){var d=y.state,m=y.options.element,E=m===void 0?"[data-popper-arrow]":m;E!=null&&(typeof E!="string"||(E=d.elements.popper.querySelector(E)))&&Z_(d.elements.popper,E)&&(d.elements.arrow=E)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Ol(y){return y.split("-")[1]}var RS={top:"auto",right:"auto",bottom:"auto",left:"auto"};function nv(y){var d,m=y.popper,E=y.popperRect,L=y.placement,D=y.variation,B=y.offsets,G=y.position,et=y.gpuAcceleration,ut=y.adaptive,dt=y.roundOffsets,at=y.isFixed,Mt=B.x,Et=Mt===void 0?0:Mt,Pt=B.y,xt=Pt===void 0?0:Pt,Rt=typeof dt=="function"?dt({x:Et,y:xt}):{x:Et,y:xt};Et=Rt.x,xt=Rt.y;var ae=B.hasOwnProperty("x"),me=B.hasOwnProperty("y"),$t=Ms,Jt=Ls,Dt=window;if(ut){var Ut=Ah(m),ie="clientHeight",le="clientWidth";Ut===ii(m)&&Wn(Ut=jr(m)).position!=="static"&&G==="absolute"&&(ie="scrollHeight",le="scrollWidth"),(L===Ls||(L===Ms||L===si)&&D===Il)&&(Jt=ei,xt-=(at&&Ut===Dt&&Dt.visualViewport?Dt.visualViewport.height:Ut[ie])-E.height,xt*=et?1:-1),L!==Ms&&(L!==Ls&&L!==ei||D!==Il)||($t=si,Et-=(at&&Ut===Dt&&Dt.visualViewport?Dt.visualViewport.width:Ut[le])-E.width,Et*=et?1:-1)}var ne,Ne=Object.assign({position:G},ut&&RS),ni=dt===!0?function(Wi,Ds){var Pi=Wi.x,Ri=Wi.y,Me=Ds.devicePixelRatio||1;return{x:Ml(Pi*Me)/Me||0,y:Ml(Ri*Me)/Me||0}}({x:Et,y:xt},ii(m)):{x:Et,y:xt};return Et=ni.x,xt=ni.y,et?Object.assign({},Ne,((ne={})[Jt]=me?"0":"",ne[$t]=ae?"0":"",ne.transform=(Dt.devicePixelRatio||1)<=1?"translate("+Et+"px, "+xt+"px)":"translate3d("+Et+"px, "+xt+"px, 0)",ne)):Object.assign({},Ne,((d={})[Jt]=me?xt+"px":"",d[$t]=ae?Et+"px":"",d.transform="",d))}const Rg={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(y){var d=y.state,m=y.options,E=m.gpuAcceleration,L=E===void 0||E,D=m.adaptive,B=D===void 0||D,G=m.roundOffsets,et=G===void 0||G,ut={placement:gn(d.placement),variation:Ol(d.placement),popper:d.elements.popper,popperRect:d.rects.popper,gpuAcceleration:L,isFixed:d.options.strategy==="fixed"};d.modifiersData.popperOffsets!=null&&(d.styles.popper=Object.assign({},d.styles.popper,nv(Object.assign({},ut,{offsets:d.modifiersData.popperOffsets,position:d.options.strategy,adaptive:B,roundOffsets:et})))),d.modifiersData.arrow!=null&&(d.styles.arrow=Object.assign({},d.styles.arrow,nv(Object.assign({},ut,{offsets:d.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:et})))),d.attributes.popper=Object.assign({},d.attributes.popper,{"data-popper-placement":d.placement})},data:{}};var of={passive:!0};const kg={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(y){var d=y.state,m=y.instance,E=y.options,L=E.scroll,D=L===void 0||L,B=E.resize,G=B===void 0||B,et=ii(d.elements.popper),ut=[].concat(d.scrollParents.reference,d.scrollParents.popper);return D&&ut.forEach(function(dt){dt.addEventListener("scroll",m.update,of)}),G&&et.addEventListener("resize",m.update,of),function(){D&&ut.forEach(function(dt){dt.removeEventListener("scroll",m.update,of)}),G&&et.removeEventListener("resize",m.update,of)}},data:{}};var kS={left:"right",right:"left",bottom:"top",top:"bottom"};function af(y){return y.replace(/left|right|bottom|top/g,function(d){return kS[d]})}var IS={start:"end",end:"start"};function rv(y){return y.replace(/start|end/g,function(d){return IS[d]})}function Ig(y){var d=ii(y);return{scrollLeft:d.pageXOffset,scrollTop:d.pageYOffset}}function Lg(y){return Dl(jr(y)).left+Ig(y).scrollLeft}function Mg(y){var d=Wn(y),m=d.overflow,E=d.overflowX,L=d.overflowY;return/auto|scroll|overlay|hidden/.test(m+L+E)}function ov(y){return["html","body","#document"].indexOf(pn(y))>=0?y.ownerDocument.body:Ci(y)&&Mg(y)?y:ov(rf(y))}function Sh(y,d){var m;d===void 0&&(d=[]);var E=ov(y),L=E===((m=y.ownerDocument)==null?void 0:m.body),D=ii(E),B=L?[D].concat(D.visualViewport||[],Mg(E)?E:[]):E,G=d.concat(B);return L?G:G.concat(Sh(rf(B)))}function Dg(y){return Object.assign({},y,{left:y.x,top:y.y,right:y.x+y.width,bottom:y.y+y.height})}function av(y,d,m){return d===wg?Dg(function(E,L){var D=ii(E),B=jr(E),G=D.visualViewport,et=B.clientWidth,ut=B.clientHeight,dt=0,at=0;if(G){et=G.width,ut=G.height;var Mt=J_();(Mt||!Mt&&L==="fixed")&&(dt=G.offsetLeft,at=G.offsetTop)}return{width:et,height:ut,x:dt+Lg(E),y:at}}(y,m)):Ko(d)?function(E,L){var D=Dl(E,!1,L==="fixed");return D.top=D.top+E.clientTop,D.left=D.left+E.clientLeft,D.bottom=D.top+E.clientHeight,D.right=D.left+E.clientWidth,D.width=E.clientWidth,D.height=E.clientHeight,D.x=D.left,D.y=D.top,D}(d,m):Dg(function(E){var L,D=jr(E),B=Ig(E),G=(L=E.ownerDocument)==null?void 0:L.body,et=Yo(D.scrollWidth,D.clientWidth,G?G.scrollWidth:0,G?G.clientWidth:0),ut=Yo(D.scrollHeight,D.clientHeight,G?G.scrollHeight:0,G?G.clientHeight:0),dt=-B.scrollLeft+Lg(E),at=-B.scrollTop;return Wn(G||D).direction==="rtl"&&(dt+=Yo(D.clientWidth,G?G.clientWidth:0)-et),{width:et,height:ut,x:dt,y:at}}(jr(y)))}function lv(y){var d,m=y.reference,E=y.element,L=y.placement,D=L?gn(L):null,B=L?Ol(L):null,G=m.x+m.width/2-E.width/2,et=m.y+m.height/2-E.height/2;switch(D){case Ls:d={x:G,y:m.y-E.height};break;case ei:d={x:G,y:m.y+m.height};break;case si:d={x:m.x+m.width,y:et};break;case Ms:d={x:m.x-E.width,y:et};break;default:d={x:m.x,y:m.y}}var ut=D?Pg(D):null;if(ut!=null){var dt=ut==="y"?"height":"width";switch(B){case Xo:d[ut]=d[ut]-(m[dt]/2-E[dt]/2);break;case Il:d[ut]=d[ut]+(m[dt]/2-E[dt]/2)}}return d}function Nl(y,d){d===void 0&&(d={});var m=d,E=m.placement,L=E===void 0?y.placement:E,D=m.strategy,B=D===void 0?y.strategy:D,G=m.boundary,et=G===void 0?H_:G,ut=m.rootBoundary,dt=ut===void 0?wg:ut,at=m.elementContext,Mt=at===void 0?Ll:at,Et=m.altBoundary,Pt=Et!==void 0&&Et,xt=m.padding,Rt=xt===void 0?0:xt,ae=ev(typeof Rt!="number"?Rt:sv(Rt,kl)),me=Mt===Ll?j_:Ll,$t=y.rects.popper,Jt=y.elements[Pt?me:Mt],Dt=function(Ds,Pi,Ri,Me){var mn=Pi==="clippingParents"?function(pe){var Os=Sh(rf(pe)),ki=["absolute","fixed"].indexOf(Wn(pe).position)>=0&&Ci(pe)?Ah(pe):pe;return Ko(ki)?Os.filter(function(Ur){return Ko(Ur)&&Z_(Ur,ki)&&pn(Ur)!=="body"}):[]}(Ds):[].concat(Pi),bn=[].concat(mn,[Ri]),Bl=bn[0],es=bn.reduce(function(pe,Os){var ki=av(Ds,Os,Me);return pe.top=Yo(ki.top,pe.top),pe.right=nf(ki.right,pe.right),pe.bottom=nf(ki.bottom,pe.bottom),pe.left=Yo(ki.left,pe.left),pe},av(Ds,Bl,Me));return es.width=es.right-es.left,es.height=es.bottom-es.top,es.x=es.left,es.y=es.top,es}(Ko(Jt)?Jt:Jt.contextElement||jr(y.elements.popper),et,dt,B),Ut=Dl(y.elements.reference),ie=lv({reference:Ut,element:$t,placement:L}),le=Dg(Object.assign({},$t,ie)),ne=Mt===Ll?le:Ut,Ne={top:Dt.top-ne.top+ae.top,bottom:ne.bottom-Dt.bottom+ae.bottom,left:Dt.left-ne.left+ae.left,right:ne.right-Dt.right+ae.right},ni=y.modifiersData.offset;if(Mt===Ll&&ni){var Wi=ni[L];Object.keys(Ne).forEach(function(Ds){var Pi=[si,ei].indexOf(Ds)>=0?1:-1,Ri=[Ls,ei].indexOf(Ds)>=0?"y":"x";Ne[Ds]+=Wi[Ri]*Pi})}return Ne}function LS(y,d){d===void 0&&(d={});var m=d,E=m.placement,L=m.boundary,D=m.rootBoundary,B=m.padding,G=m.flipVariations,et=m.allowedAutoPlacements,ut=et===void 0?Eg:et,dt=Ol(E),at=dt?G?Ag:Ag.filter(function(Pt){return Ol(Pt)===dt}):kl,Mt=at.filter(function(Pt){return ut.indexOf(Pt)>=0});Mt.length===0&&(Mt=at);var Et=Mt.reduce(function(Pt,xt){return Pt[xt]=Nl(y,{placement:xt,boundary:L,rootBoundary:D,padding:B})[gn(xt)],Pt},{});return Object.keys(Et).sort(function(Pt,xt){return Et[Pt]-Et[xt]})}const cv={name:"flip",enabled:!0,phase:"main",fn:function(y){var d=y.state,m=y.options,E=y.name;if(!d.modifiersData[E]._skip){for(var L=m.mainAxis,D=L===void 0||L,B=m.altAxis,G=B===void 0||B,et=m.fallbackPlacements,ut=m.padding,dt=m.boundary,at=m.rootBoundary,Mt=m.altBoundary,Et=m.flipVariations,Pt=Et===void 0||Et,xt=m.allowedAutoPlacements,Rt=d.options.placement,ae=gn(Rt),me=et||(ae!==Rt&&Pt?function(pe){if(gn(pe)===sf)return[];var Os=af(pe);return[rv(pe),Os,rv(Os)]}(Rt):[af(Rt)]),$t=[Rt].concat(me).reduce(function(pe,Os){return pe.concat(gn(Os)===sf?LS(d,{placement:Os,boundary:dt,rootBoundary:at,padding:ut,flipVariations:Pt,allowedAutoPlacements:xt}):Os)},[]),Jt=d.rects.reference,Dt=d.rects.popper,Ut=new Map,ie=!0,le=$t[0],ne=0;ne<$t.length;ne++){var Ne=$t[ne],ni=gn(Ne),Wi=Ol(Ne)===Xo,Ds=[Ls,ei].indexOf(ni)>=0,Pi=Ds?"width":"height",Ri=Nl(d,{placement:Ne,boundary:dt,rootBoundary:at,altBoundary:Mt,padding:ut}),Me=Ds?Wi?si:Ms:Wi?ei:Ls;Jt[Pi]>Dt[Pi]&&(Me=af(Me));var mn=af(Me),bn=[];if(D&&bn.push(Ri[ni]<=0),G&&bn.push(Ri[Me]<=0,Ri[mn]<=0),bn.every(function(pe){return pe})){le=Ne,ie=!1;break}Ut.set(Ne,bn)}if(ie)for(var Bl=function(pe){var Os=$t.find(function(ki){var Ur=Ut.get(ki);if(Ur)return Ur.slice(0,pe).every(function(mf){return mf})});if(Os)return le=Os,"break"},es=Pt?3:1;es>0&&Bl(es)!=="break";es--);d.placement!==le&&(d.modifiersData[E]._skip=!0,d.placement=le,d.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function hv(y,d,m){return m===void 0&&(m={x:0,y:0}),{top:y.top-d.height-m.y,right:y.right-d.width+m.x,bottom:y.bottom-d.height+m.y,left:y.left-d.width-m.x}}function uv(y){return[Ls,si,ei,Ms].some(function(d){return y[d]>=0})}const dv={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(y){var d=y.state,m=y.name,E=d.rects.reference,L=d.rects.popper,D=d.modifiersData.preventOverflow,B=Nl(d,{elementContext:"reference"}),G=Nl(d,{altBoundary:!0}),et=hv(B,E),ut=hv(G,L,D),dt=uv(et),at=uv(ut);d.modifiersData[m]={referenceClippingOffsets:et,popperEscapeOffsets:ut,isReferenceHidden:dt,hasPopperEscaped:at},d.attributes.popper=Object.assign({},d.attributes.popper,{"data-popper-reference-hidden":dt,"data-popper-escaped":at})}},fv={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(y){var d=y.state,m=y.options,E=y.name,L=m.offset,D=L===void 0?[0,0]:L,B=Eg.reduce(function(dt,at){return dt[at]=function(Mt,Et,Pt){var xt=gn(Mt),Rt=[Ms,Ls].indexOf(xt)>=0?-1:1,ae=typeof Pt=="function"?Pt(Object.assign({},Et,{placement:Mt})):Pt,me=ae[0],$t=ae[1];return me=me||0,$t=($t||0)*Rt,[Ms,si].indexOf(xt)>=0?{x:$t,y:me}:{x:me,y:$t}}(at,d.rects,D),dt},{}),G=B[d.placement],et=G.x,ut=G.y;d.modifiersData.popperOffsets!=null&&(d.modifiersData.popperOffsets.x+=et,d.modifiersData.popperOffsets.y+=ut),d.modifiersData[E]=B}},Og={name:"popperOffsets",enabled:!0,phase:"read",fn:function(y){var d=y.state,m=y.name;d.modifiersData[m]=lv({reference:d.rects.reference,element:d.rects.popper,placement:d.placement})},data:{}},pv={name:"preventOverflow",enabled:!0,phase:"main",fn:function(y){var d=y.state,m=y.options,E=y.name,L=m.mainAxis,D=L===void 0||L,B=m.altAxis,G=B!==void 0&&B,et=m.boundary,ut=m.rootBoundary,dt=m.altBoundary,at=m.padding,Mt=m.tether,Et=Mt===void 0||Mt,Pt=m.tetherOffset,xt=Pt===void 0?0:Pt,Rt=Nl(d,{boundary:et,rootBoundary:ut,padding:at,altBoundary:dt}),ae=gn(d.placement),me=Ol(d.placement),$t=!me,Jt=Pg(ae),Dt=Jt==="x"?"y":"x",Ut=d.modifiersData.popperOffsets,ie=d.rects.reference,le=d.rects.popper,ne=typeof xt=="function"?xt(Object.assign({},d.rects,{placement:d.placement})):xt,Ne=typeof ne=="number"?{mainAxis:ne,altAxis:ne}:Object.assign({mainAxis:0,altAxis:0},ne),ni=d.modifiersData.offset?d.modifiersData.offset[d.placement]:null,Wi={x:0,y:0};if(Ut){if(D){var Ds,Pi=Jt==="y"?Ls:Ms,Ri=Jt==="y"?ei:si,Me=Jt==="y"?"height":"width",mn=Ut[Jt],bn=mn+Rt[Pi],Bl=mn-Rt[Ri],es=Et?-le[Me]/2:0,pe=me===Xo?ie[Me]:le[Me],Os=me===Xo?-le[Me]:-ie[Me],ki=d.elements.arrow,Ur=Et&&ki?Tg(ki):{width:0,height:0},mf=d.modifiersData["arrow#persistent"]?d.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},ty=mf[Pi],ey=mf[Ri],bf=Eh(0,ie[Me],Ur[Me]),hC=$t?ie[Me]/2-es-bf-ty-Ne.mainAxis:pe-bf-ty-Ne.mainAxis,uC=$t?-ie[Me]/2+es+bf+ey+Ne.mainAxis:Os+bf+ey+Ne.mainAxis,Xg=d.elements.arrow&&Ah(d.elements.arrow),dC=Xg?Jt==="y"?Xg.clientTop||0:Xg.clientLeft||0:0,sy=(Ds=ni==null?void 0:ni[Jt])!=null?Ds:0,fC=mn+uC-sy,iy=Eh(Et?nf(bn,mn+hC-sy-dC):bn,mn,Et?Yo(Bl,fC):Bl);Ut[Jt]=iy,Wi[Jt]=iy-mn}if(G){var ny,pC=Jt==="x"?Ls:Ms,gC=Jt==="x"?ei:si,na=Ut[Dt],_f=Dt==="y"?"height":"width",ry=na+Rt[pC],oy=na-Rt[gC],Kg=[Ls,Ms].indexOf(ae)!==-1,ay=(ny=ni==null?void 0:ni[Dt])!=null?ny:0,ly=Kg?ry:na-ie[_f]-le[_f]-ay+Ne.altAxis,cy=Kg?na+ie[_f]+le[_f]-ay-Ne.altAxis:oy,hy=Et&&Kg?function(mC,bC,Yg){var uy=Eh(mC,bC,Yg);return uy>Yg?Yg:uy}(ly,na,cy):Eh(Et?ly:ry,na,Et?cy:oy);Ut[Dt]=hy,Wi[Dt]=hy-na}d.modifiersData[E]=Wi}},requiresIfExists:["offset"]};function MS(y,d,m){m===void 0&&(m=!1);var E,L,D=Ci(d),B=Ci(d)&&function(at){var Mt=at.getBoundingClientRect(),Et=Ml(Mt.width)/at.offsetWidth||1,Pt=Ml(Mt.height)/at.offsetHeight||1;return Et!==1||Pt!==1}(d),G=jr(d),et=Dl(y,B,m),ut={scrollLeft:0,scrollTop:0},dt={x:0,y:0};return(D||!D&&!m)&&((pn(d)!=="body"||Mg(G))&&(ut=(E=d)!==ii(E)&&Ci(E)?{scrollLeft:(L=E).scrollLeft,scrollTop:L.scrollTop}:Ig(E)),Ci(d)?((dt=Dl(d,!0)).x+=d.clientLeft,dt.y+=d.clientTop):G&&(dt.x=Lg(G))),{x:et.left+ut.scrollLeft-dt.x,y:et.top+ut.scrollTop-dt.y,width:et.width,height:et.height}}function DS(y){var d=new Map,m=new Set,E=[];function L(D){m.add(D.name),[].concat(D.requires||[],D.requiresIfExists||[]).forEach(function(B){if(!m.has(B)){var G=d.get(B);G&&L(G)}}),E.push(D)}return y.forEach(function(D){d.set(D.name,D)}),y.forEach(function(D){m.has(D.name)||L(D)}),E}var gv={placement:"bottom",modifiers:[],strategy:"absolute"};function mv(){for(var y=arguments.length,d=new Array(y),m=0;m<y;m++)d[m]=arguments[m];return!d.some(function(E){return!(E&&typeof E.getBoundingClientRect=="function")})}function lf(y){y===void 0&&(y={});var d=y,m=d.defaultModifiers,E=m===void 0?[]:m,L=d.defaultOptions,D=L===void 0?gv:L;return function(B,G,et){et===void 0&&(et=D);var ut,dt,at={placement:"bottom",orderedModifiers:[],options:Object.assign({},gv,D),modifiersData:{},elements:{reference:B,popper:G},attributes:{},styles:{}},Mt=[],Et=!1,Pt={state:at,setOptions:function(Rt){var ae=typeof Rt=="function"?Rt(at.options):Rt;xt(),at.options=Object.assign({},D,at.options,ae),at.scrollParents={reference:Ko(B)?Sh(B):B.contextElement?Sh(B.contextElement):[],popper:Sh(G)};var me,$t,Jt=function(Dt){var Ut=DS(Dt);return Q_.reduce(function(ie,le){return ie.concat(Ut.filter(function(ne){return ne.phase===le}))},[])}((me=[].concat(E,at.options.modifiers),$t=me.reduce(function(Dt,Ut){var ie=Dt[Ut.name];return Dt[Ut.name]=ie?Object.assign({},ie,Ut,{options:Object.assign({},ie.options,Ut.options),data:Object.assign({},ie.data,Ut.data)}):Ut,Dt},{}),Object.keys($t).map(function(Dt){return $t[Dt]})));return at.orderedModifiers=Jt.filter(function(Dt){return Dt.enabled}),at.orderedModifiers.forEach(function(Dt){var Ut=Dt.name,ie=Dt.options,le=ie===void 0?{}:ie,ne=Dt.effect;if(typeof ne=="function"){var Ne=ne({state:at,name:Ut,instance:Pt,options:le});Mt.push(Ne||function(){})}}),Pt.update()},forceUpdate:function(){if(!Et){var Rt=at.elements,ae=Rt.reference,me=Rt.popper;if(mv(ae,me)){at.rects={reference:MS(ae,Ah(me),at.options.strategy==="fixed"),popper:Tg(me)},at.reset=!1,at.placement=at.options.placement,at.orderedModifiers.forEach(function(ne){return at.modifiersData[ne.name]=Object.assign({},ne.data)});for(var $t=0;$t<at.orderedModifiers.length;$t++)if(at.reset!==!0){var Jt=at.orderedModifiers[$t],Dt=Jt.fn,Ut=Jt.options,ie=Ut===void 0?{}:Ut,le=Jt.name;typeof Dt=="function"&&(at=Dt({state:at,options:ie,name:le,instance:Pt})||at)}else at.reset=!1,$t=-1}}},update:(ut=function(){return new Promise(function(Rt){Pt.forceUpdate(),Rt(at)})},function(){return dt||(dt=new Promise(function(Rt){Promise.resolve().then(function(){dt=void 0,Rt(ut())})})),dt}),destroy:function(){xt(),Et=!0}};if(!mv(B,G))return Pt;function xt(){Mt.forEach(function(Rt){return Rt()}),Mt=[]}return Pt.setOptions(et).then(function(Rt){!Et&&et.onFirstUpdate&&et.onFirstUpdate(Rt)}),Pt}}var OS=lf(),NS=lf({defaultModifiers:[kg,Og,Rg,xg]}),Ng=lf({defaultModifiers:[kg,Og,Rg,xg,fv,cv,pv,iv,dv]});const bv=Object.freeze(Object.defineProperty({__proto__:null,afterMain:G_,afterRead:z_,afterWrite:Y_,applyStyles:xg,arrow:iv,auto:sf,basePlacements:kl,beforeMain:W_,beforeRead:V_,beforeWrite:X_,bottom:ei,clippingParents:H_,computeStyles:Rg,createPopper:Ng,createPopperBase:OS,createPopperLite:NS,detectOverflow:Nl,end:Il,eventListeners:kg,flip:cv,hide:dv,left:Ms,main:q_,modifierPhases:Q_,offset:fv,placements:Eg,popper:Ll,popperGenerator:lf,popperOffsets:Og,preventOverflow:pv,read:U_,reference:j_,right:si,start:Xo,top:Ls,variationPlacements:Ag,viewport:wg,write:K_},Symbol.toStringTag,{value:"Module"})),_v="dropdown",Qo=".bs.dropdown",Fg=".data-api",FS="ArrowUp",vv="ArrowDown",$S=`hide${Qo}`,BS=`hidden${Qo}`,HS=`show${Qo}`,jS=`shown${Qo}`,yv=`click${Qo}${Fg}`,wv=`keydown${Qo}${Fg}`,VS=`keyup${Qo}${Fg}`,Fl="show",Jo='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',US=`${Jo}.${Fl}`,cf=".dropdown-menu",zS=x()?"top-end":"top-start",WS=x()?"top-start":"top-end",qS=x()?"bottom-end":"bottom-start",GS=x()?"bottom-start":"bottom-end",XS=x()?"left-start":"right-start",KS=x()?"right-start":"left-start",YS={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},QS={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class zi extends Wt{constructor(d,m){super(d,m),this._popper=null,this._parent=this._element.parentNode,this._menu=j.next(this._element,cf)[0]||j.prev(this._element,cf)[0]||j.findOne(cf,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return YS}static get DefaultType(){return QS}static get NAME(){return _v}toggle(){return this._isShown()?this.hide():this.show()}show(){if(u(this._element)||this._isShown())return;const d={relatedTarget:this._element};if(!z.trigger(this._element,HS,d).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const m of[].concat(...document.body.children))z.on(m,"mouseover",p);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(Fl),this._element.classList.add(Fl),z.trigger(this._element,jS,d)}}hide(){if(u(this._element)||!this._isShown())return;const d={relatedTarget:this._element};this._completeHide(d)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(d){if(!z.trigger(this._element,$S,d).defaultPrevented){if("ontouchstart"in document.documentElement)for(const m of[].concat(...document.body.children))z.off(m,"mouseover",p);this._popper&&this._popper.destroy(),this._menu.classList.remove(Fl),this._element.classList.remove(Fl),this._element.setAttribute("aria-expanded","false"),Pe.removeDataAttribute(this._menu,"popper"),z.trigger(this._element,BS,d),this._element.focus()}}_getConfig(d){if(typeof(d=super._getConfig(d)).reference=="object"&&!a(d.reference)&&typeof d.reference.getBoundingClientRect!="function")throw new TypeError(`${_v.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return d}_createPopper(){if(bv===void 0)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org/docs/v2/)");let d=this._element;this._config.reference==="parent"?d=this._parent:a(this._config.reference)?d=c(this._config.reference):typeof this._config.reference=="object"&&(d=this._config.reference);const m=this._getPopperConfig();this._popper=Ng(d,this._menu,m)}_isShown(){return this._menu.classList.contains(Fl)}_getPlacement(){const d=this._parent;if(d.classList.contains("dropend"))return XS;if(d.classList.contains("dropstart"))return KS;if(d.classList.contains("dropup-center"))return"top";if(d.classList.contains("dropdown-center"))return"bottom";const m=getComputedStyle(this._menu).getPropertyValue("--bs-position").trim()==="end";return d.classList.contains("dropup")?m?WS:zS:m?GS:qS}_detectNavbar(){return this._element.closest(".navbar")!==null}_getOffset(){const{offset:d}=this._config;return typeof d=="string"?d.split(",").map(m=>Number.parseInt(m,10)):typeof d=="function"?m=>d(m,this._element):d}_getPopperConfig(){const d={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||this._config.display==="static")&&(Pe.setDataAttribute(this._menu,"popper","static"),d.modifiers=[{name:"applyStyles",enabled:!1}]),{...d,...C(this._config.popperConfig,[void 0,d])}}_selectMenuItem({key:d,target:m}){const E=j.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter(L=>h(L));E.length&&R(E,m,d===vv,!E.includes(m)).focus()}static jQueryInterface(d){return this.each(function(){const m=zi.getOrCreateInstance(this,d);if(typeof d=="string"){if(m[d]===void 0)throw new TypeError(`No method named "${d}"`);m[d]()}})}static clearMenus(d){if(d.button===2||d.type==="keyup"&&d.key!=="Tab")return;const m=j.find(US);for(const E of m){const L=zi.getInstance(E);if(!L||L._config.autoClose===!1)continue;const D=d.composedPath(),B=D.includes(L._menu);if(D.includes(L._element)||L._config.autoClose==="inside"&&!B||L._config.autoClose==="outside"&&B||L._menu.contains(d.target)&&(d.type==="keyup"&&d.key==="Tab"||/input|select|option|textarea|form/i.test(d.target.tagName)))continue;const G={relatedTarget:L._element};d.type==="click"&&(G.clickEvent=d),L._completeHide(G)}}static dataApiKeydownHandler(d){const m=/input|textarea/i.test(d.target.tagName),E=d.key==="Escape",L=[FS,vv].includes(d.key);if(!L&&!E||m&&!E)return;d.preventDefault();const D=this.matches(Jo)?this:j.prev(this,Jo)[0]||j.next(this,Jo)[0]||j.findOne(Jo,d.delegateTarget.parentNode),B=zi.getOrCreateInstance(D);if(L)return d.stopPropagation(),B.show(),void B._selectMenuItem(d);B._isShown()&&(d.stopPropagation(),B.hide(),D.focus())}}z.on(document,wv,Jo,zi.dataApiKeydownHandler),z.on(document,wv,cf,zi.dataApiKeydownHandler),z.on(document,yv,zi.clearMenus),z.on(document,VS,zi.clearMenus),z.on(document,yv,Jo,function(y){y.preventDefault(),zi.getOrCreateInstance(this).toggle()}),S(zi);const Av="backdrop",Ev="show",Sv=`mousedown.bs.${Av}`,JS={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},ZS={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class xv extends Ge{constructor(d){super(),this._config=this._getConfig(d),this._isAppended=!1,this._element=null}static get Default(){return JS}static get DefaultType(){return ZS}static get NAME(){return Av}show(d){if(!this._config.isVisible)return void C(d);this._append();const m=this._getElement();this._config.isAnimated&&g(m),m.classList.add(Ev),this._emulateAnimation(()=>{C(d)})}hide(d){this._config.isVisible?(this._getElement().classList.remove(Ev),this._emulateAnimation(()=>{this.dispose(),C(d)})):C(d)}dispose(){this._isAppended&&(z.off(this._element,Sv),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const d=document.createElement("div");d.className=this._config.className,this._config.isAnimated&&d.classList.add("fade"),this._element=d}return this._element}_configAfterMerge(d){return d.rootElement=c(d.rootElement),d}_append(){if(this._isAppended)return;const d=this._getElement();this._config.rootElement.append(d),z.on(d,Sv,()=>{C(this._config.clickCallback)}),this._isAppended=!0}_emulateAnimation(d){T(d,this._getElement(),this._config.isAnimated)}}const hf=".bs.focustrap",tx=`focusin${hf}`,ex=`keydown.tab${hf}`,Cv="backward",sx={autofocus:!0,trapElement:null},ix={autofocus:"boolean",trapElement:"element"};class Tv extends Ge{constructor(d){super(),this._config=this._getConfig(d),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return sx}static get DefaultType(){return ix}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),z.off(document,hf),z.on(document,tx,d=>this._handleFocusin(d)),z.on(document,ex,d=>this._handleKeydown(d)),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,z.off(document,hf))}_handleFocusin(d){const{trapElement:m}=this._config;if(d.target===document||d.target===m||m.contains(d.target))return;const E=j.focusableChildren(m);E.length===0?m.focus():this._lastTabNavDirection===Cv?E[E.length-1].focus():E[0].focus()}_handleKeydown(d){d.key==="Tab"&&(this._lastTabNavDirection=d.shiftKey?Cv:"forward")}}const Pv=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",Rv=".sticky-top",uf="padding-right",kv="margin-right";class $g{constructor(){this._element=document.body}getWidth(){const d=document.documentElement.clientWidth;return Math.abs(window.innerWidth-d)}hide(){const d=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,uf,m=>m+d),this._setElementAttributes(Pv,uf,m=>m+d),this._setElementAttributes(Rv,kv,m=>m-d)}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,uf),this._resetElementAttributes(Pv,uf),this._resetElementAttributes(Rv,kv)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(d,m,E){const L=this.getWidth();this._applyManipulationCallback(d,D=>{if(D!==this._element&&window.innerWidth>D.clientWidth+L)return;this._saveInitialAttribute(D,m);const B=window.getComputedStyle(D).getPropertyValue(m);D.style.setProperty(m,`${E(Number.parseFloat(B))}px`)})}_saveInitialAttribute(d,m){const E=d.style.getPropertyValue(m);E&&Pe.setDataAttribute(d,m,E)}_resetElementAttributes(d,m){this._applyManipulationCallback(d,E=>{const L=Pe.getDataAttribute(E,m);L!==null?(Pe.removeDataAttribute(E,m),E.style.setProperty(m,L)):E.style.removeProperty(m)})}_applyManipulationCallback(d,m){if(a(d))m(d);else for(const E of j.find(d,this._element))m(E)}}const Ti=".bs.modal",nx=`hide${Ti}`,rx=`hidePrevented${Ti}`,Iv=`hidden${Ti}`,Lv=`show${Ti}`,ox=`shown${Ti}`,ax=`resize${Ti}`,lx=`click.dismiss${Ti}`,cx=`mousedown.dismiss${Ti}`,hx=`keydown.dismiss${Ti}`,ux=`click${Ti}.data-api`,Mv="modal-open",Dv="show",Bg="modal-static",dx={backdrop:!0,focus:!0,keyboard:!0},fx={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Zo extends Wt{constructor(d,m){super(d,m),this._dialog=j.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new $g,this._addEventListeners()}static get Default(){return dx}static get DefaultType(){return fx}static get NAME(){return"modal"}toggle(d){return this._isShown?this.hide():this.show(d)}show(d){this._isShown||this._isTransitioning||z.trigger(this._element,Lv,{relatedTarget:d}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(Mv),this._adjustDialog(),this._backdrop.show(()=>this._showElement(d)))}hide(){this._isShown&&!this._isTransitioning&&(z.trigger(this._element,nx).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(Dv),this._queueCallback(()=>this._hideModal(),this._element,this._isAnimated())))}dispose(){z.off(window,Ti),z.off(this._dialog,Ti),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new xv({isVisible:!!this._config.backdrop,isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new Tv({trapElement:this._element})}_showElement(d){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const m=j.findOne(".modal-body",this._dialog);m&&(m.scrollTop=0),g(this._element),this._element.classList.add(Dv),this._queueCallback(()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,z.trigger(this._element,ox,{relatedTarget:d})},this._dialog,this._isAnimated())}_addEventListeners(){z.on(this._element,hx,d=>{d.key==="Escape"&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())}),z.on(window,ax,()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()}),z.on(this._element,cx,d=>{z.one(this._element,lx,m=>{this._element===d.target&&this._element===m.target&&(this._config.backdrop!=="static"?this._config.backdrop&&this.hide():this._triggerBackdropTransition())})})}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide(()=>{document.body.classList.remove(Mv),this._resetAdjustments(),this._scrollBar.reset(),z.trigger(this._element,Iv)})}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(z.trigger(this._element,rx).defaultPrevented)return;const d=this._element.scrollHeight>document.documentElement.clientHeight,m=this._element.style.overflowY;m==="hidden"||this._element.classList.contains(Bg)||(d||(this._element.style.overflowY="hidden"),this._element.classList.add(Bg),this._queueCallback(()=>{this._element.classList.remove(Bg),this._queueCallback(()=>{this._element.style.overflowY=m},this._dialog)},this._dialog),this._element.focus())}_adjustDialog(){const d=this._element.scrollHeight>document.documentElement.clientHeight,m=this._scrollBar.getWidth(),E=m>0;if(E&&!d){const L=x()?"paddingLeft":"paddingRight";this._element.style[L]=`${m}px`}if(!E&&d){const L=x()?"paddingRight":"paddingLeft";this._element.style[L]=`${m}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(d,m){return this.each(function(){const E=Zo.getOrCreateInstance(this,d);if(typeof d=="string"){if(E[d]===void 0)throw new TypeError(`No method named "${d}"`);E[d](m)}})}}z.on(document,ux,'[data-bs-toggle="modal"]',function(y){const d=j.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&y.preventDefault(),z.one(d,Lv,E=>{E.defaultPrevented||z.one(d,Iv,()=>{h(this)&&this.focus()})});const m=j.findOne(".modal.show");m&&Zo.getInstance(m).hide(),Zo.getOrCreateInstance(d).toggle(this)}),it(Zo),S(Zo);const qn=".bs.offcanvas",Ov=".data-api",px=`load${qn}${Ov}`,Nv="show",Fv="showing",$v="hiding",Bv=".offcanvas.show",gx=`show${qn}`,mx=`shown${qn}`,bx=`hide${qn}`,Hv=`hidePrevented${qn}`,jv=`hidden${qn}`,_x=`resize${qn}`,vx=`click${qn}${Ov}`,yx=`keydown.dismiss${qn}`,wx={backdrop:!0,keyboard:!0,scroll:!1},Ax={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Gn extends Wt{constructor(d,m){super(d,m),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return wx}static get DefaultType(){return Ax}static get NAME(){return"offcanvas"}toggle(d){return this._isShown?this.hide():this.show(d)}show(d){this._isShown||z.trigger(this._element,gx,{relatedTarget:d}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||new $g().hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Fv),this._queueCallback(()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Nv),this._element.classList.remove(Fv),z.trigger(this._element,mx,{relatedTarget:d})},this._element,!0))}hide(){this._isShown&&(z.trigger(this._element,bx).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add($v),this._backdrop.hide(),this._queueCallback(()=>{this._element.classList.remove(Nv,$v),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||new $g().reset(),z.trigger(this._element,jv)},this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const d=!!this._config.backdrop;return new xv({className:"offcanvas-backdrop",isVisible:d,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:d?()=>{this._config.backdrop!=="static"?this.hide():z.trigger(this._element,Hv)}:null})}_initializeFocusTrap(){return new Tv({trapElement:this._element})}_addEventListeners(){z.on(this._element,yx,d=>{d.key==="Escape"&&(this._config.keyboard?this.hide():z.trigger(this._element,Hv))})}static jQueryInterface(d){return this.each(function(){const m=Gn.getOrCreateInstance(this,d);if(typeof d=="string"){if(m[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);m[d](this)}})}}z.on(document,vx,'[data-bs-toggle="offcanvas"]',function(y){const d=j.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&y.preventDefault(),u(this))return;z.one(d,jv,()=>{h(this)&&this.focus()});const m=j.findOne(Bv);m&&m!==d&&Gn.getInstance(m).hide(),Gn.getOrCreateInstance(d).toggle(this)}),z.on(window,px,()=>{for(const y of j.find(Bv))Gn.getOrCreateInstance(y).show()}),z.on(window,_x,()=>{for(const y of j.find("[aria-modal][class*=show][class*=offcanvas-]"))getComputedStyle(y).position!=="fixed"&&Gn.getOrCreateInstance(y).hide()}),it(Gn),S(Gn);const Vv={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Ex=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Sx=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,xx=(y,d)=>{const m=y.nodeName.toLowerCase();return d.includes(m)?!Ex.has(m)||!!Sx.test(y.nodeValue):d.filter(E=>E instanceof RegExp).some(E=>E.test(m))},Cx={allowList:Vv,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Tx={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},Px={entry:"(string|element|function|null)",selector:"(string|element)"};class Rx extends Ge{constructor(d){super(),this._config=this._getConfig(d)}static get Default(){return Cx}static get DefaultType(){return Tx}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map(d=>this._resolvePossibleFunction(d)).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(d){return this._checkContent(d),this._config.content={...this._config.content,...d},this}toHtml(){const d=document.createElement("div");d.innerHTML=this._maybeSanitize(this._config.template);for(const[L,D]of Object.entries(this._config.content))this._setContent(d,D,L);const m=d.children[0],E=this._resolvePossibleFunction(this._config.extraClass);return E&&m.classList.add(...E.split(" ")),m}_typeCheckConfig(d){super._typeCheckConfig(d),this._checkContent(d.content)}_checkContent(d){for(const[m,E]of Object.entries(d))super._typeCheckConfig({selector:m,entry:E},Px)}_setContent(d,m,E){const L=j.findOne(E,d);L&&((m=this._resolvePossibleFunction(m))?a(m)?this._putElementInTemplate(c(m),L):this._config.html?L.innerHTML=this._maybeSanitize(m):L.textContent=m:L.remove())}_maybeSanitize(d){return this._config.sanitize?function(m,E,L){if(!m.length)return m;if(L&&typeof L=="function")return L(m);const D=new window.DOMParser().parseFromString(m,"text/html"),B=[].concat(...D.body.querySelectorAll("*"));for(const G of B){const et=G.nodeName.toLowerCase();if(!Object.keys(E).includes(et)){G.remove();continue}const ut=[].concat(...G.attributes),dt=[].concat(E["*"]||[],E[et]||[]);for(const at of ut)xx(at,dt)||G.removeAttribute(at.nodeName)}return D.body.innerHTML}(d,this._config.allowList,this._config.sanitizeFn):d}_resolvePossibleFunction(d){return C(d,[void 0,this])}_putElementInTemplate(d,m){if(this._config.html)return m.innerHTML="",void m.append(d);m.textContent=d.textContent}}const kx=new Set(["sanitize","allowList","sanitizeFn"]),Hg="fade",df="show",Ix=".tooltip-inner",Uv=".modal",zv="hide.bs.modal",xh="hover",jg="focus",Lx={AUTO:"auto",TOP:"top",RIGHT:x()?"left":"right",BOTTOM:"bottom",LEFT:x()?"right":"left"},Mx={allowList:Vv,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},Dx={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class ta extends Wt{constructor(d,m){if(bv===void 0)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org/docs/v2/)");super(d,m),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return Mx}static get DefaultType(){return Dx}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),z.off(this._element.closest(Uv),zv,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if(this._element.style.display==="none")throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const d=z.trigger(this._element,this.constructor.eventName("show")),m=(f(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(d.defaultPrevented||!m)return;this._disposePopper();const E=this._getTipElement();this._element.setAttribute("aria-describedby",E.getAttribute("id"));const{container:L}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(L.append(E),z.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(E),E.classList.add(df),"ontouchstart"in document.documentElement)for(const D of[].concat(...document.body.children))z.on(D,"mouseover",p);this._queueCallback(()=>{z.trigger(this._element,this.constructor.eventName("shown")),this._isHovered===!1&&this._leave(),this._isHovered=!1},this.tip,this._isAnimated())}hide(){if(this._isShown()&&!z.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(df),"ontouchstart"in document.documentElement)for(const d of[].concat(...document.body.children))z.off(d,"mouseover",p);this._activeTrigger.click=!1,this._activeTrigger[jg]=!1,this._activeTrigger[xh]=!1,this._isHovered=null,this._queueCallback(()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),z.trigger(this._element,this.constructor.eventName("hidden")))},this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return!!this._getTitle()}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(d){const m=this._getTemplateFactory(d).toHtml();if(!m)return null;m.classList.remove(Hg,df),m.classList.add(`bs-${this.constructor.NAME}-auto`);const E=(L=>{do L+=Math.floor(1e6*Math.random());while(document.getElementById(L));return L})(this.constructor.NAME).toString();return m.setAttribute("id",E),this._isAnimated()&&m.classList.add(Hg),m}setContent(d){this._newContent=d,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(d){return this._templateFactory?this._templateFactory.changeContent(d):this._templateFactory=new Rx({...this._config,content:d,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{[Ix]:this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(d){return this.constructor.getOrCreateInstance(d.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Hg)}_isShown(){return this.tip&&this.tip.classList.contains(df)}_createPopper(d){const m=C(this._config.placement,[this,d,this._element]),E=Lx[m.toUpperCase()];return Ng(this._element,d,this._getPopperConfig(E))}_getOffset(){const{offset:d}=this._config;return typeof d=="string"?d.split(",").map(m=>Number.parseInt(m,10)):typeof d=="function"?m=>d(m,this._element):d}_resolvePossibleFunction(d){return C(d,[this._element,this._element])}_getPopperConfig(d){const m={placement:d,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:E=>{this._getTipElement().setAttribute("data-popper-placement",E.state.placement)}}]};return{...m,...C(this._config.popperConfig,[void 0,m])}}_setListeners(){const d=this._config.trigger.split(" ");for(const m of d)if(m==="click")z.on(this._element,this.constructor.eventName("click"),this._config.selector,E=>{this._initializeOnDelegatedTarget(E).toggle()});else if(m!=="manual"){const E=m===xh?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),L=m===xh?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");z.on(this._element,E,this._config.selector,D=>{const B=this._initializeOnDelegatedTarget(D);B._activeTrigger[D.type==="focusin"?jg:xh]=!0,B._enter()}),z.on(this._element,L,this._config.selector,D=>{const B=this._initializeOnDelegatedTarget(D);B._activeTrigger[D.type==="focusout"?jg:xh]=B._element.contains(D.relatedTarget),B._leave()})}this._hideModalHandler=()=>{this._element&&this.hide()},z.on(this._element.closest(Uv),zv,this._hideModalHandler)}_fixTitle(){const d=this._element.getAttribute("title");d&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",d),this._element.setAttribute("data-bs-original-title",d),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout(()=>{this._isHovered&&this.show()},this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout(()=>{this._isHovered||this.hide()},this._config.delay.hide))}_setTimeout(d,m){clearTimeout(this._timeout),this._timeout=setTimeout(d,m)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(d){const m=Pe.getDataAttributes(this._element);for(const E of Object.keys(m))kx.has(E)&&delete m[E];return d={...m,...typeof d=="object"&&d?d:{}},d=this._mergeConfigObj(d),d=this._configAfterMerge(d),this._typeCheckConfig(d),d}_configAfterMerge(d){return d.container=d.container===!1?document.body:c(d.container),typeof d.delay=="number"&&(d.delay={show:d.delay,hide:d.delay}),typeof d.title=="number"&&(d.title=d.title.toString()),typeof d.content=="number"&&(d.content=d.content.toString()),d}_getDelegateConfig(){const d={};for(const[m,E]of Object.entries(this._config))this.constructor.Default[m]!==E&&(d[m]=E);return d.selector=!1,d.trigger="manual",d}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(d){return this.each(function(){const m=ta.getOrCreateInstance(this,d);if(typeof d=="string"){if(m[d]===void 0)throw new TypeError(`No method named "${d}"`);m[d]()}})}}S(ta);const Ox=".popover-header",Nx=".popover-body",Fx={...ta.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},$x={...ta.DefaultType,content:"(null|string|element|function)"};class ff extends ta{static get Default(){return Fx}static get DefaultType(){return $x}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{[Ox]:this._getTitle(),[Nx]:this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(d){return this.each(function(){const m=ff.getOrCreateInstance(this,d);if(typeof d=="string"){if(m[d]===void 0)throw new TypeError(`No method named "${d}"`);m[d]()}})}}S(ff);const Vg=".bs.scrollspy",Bx=`activate${Vg}`,Wv=`click${Vg}`,Hx=`load${Vg}.data-api`,$l="active",Ug="[href]",qv=".nav-link",jx=`${qv}, .nav-item > ${qv}, .list-group-item`,Vx={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},Ux={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class Ch extends Wt{constructor(d,m){super(d,m),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement=getComputedStyle(this._element).overflowY==="visible"?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return Vx}static get DefaultType(){return Ux}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const d of this._observableSections.values())this._observer.observe(d)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(d){return d.target=c(d.target)||document.body,d.rootMargin=d.offset?`${d.offset}px 0px -30%`:d.rootMargin,typeof d.threshold=="string"&&(d.threshold=d.threshold.split(",").map(m=>Number.parseFloat(m))),d}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(z.off(this._config.target,Wv),z.on(this._config.target,Wv,Ug,d=>{const m=this._observableSections.get(d.target.hash);if(m){d.preventDefault();const E=this._rootElement||window,L=m.offsetTop-this._element.offsetTop;if(E.scrollTo)return void E.scrollTo({top:L,behavior:"smooth"});E.scrollTop=L}}))}_getNewObserver(){const d={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver(m=>this._observerCallback(m),d)}_observerCallback(d){const m=B=>this._targetLinks.get(`#${B.target.id}`),E=B=>{this._previousScrollData.visibleEntryTop=B.target.offsetTop,this._process(m(B))},L=(this._rootElement||document.documentElement).scrollTop,D=L>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=L;for(const B of d){if(!B.isIntersecting){this._activeTarget=null,this._clearActiveClass(m(B));continue}const G=B.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(D&&G){if(E(B),!L)return}else D||G||E(B)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const d=j.find(Ug,this._config.target);for(const m of d){if(!m.hash||u(m))continue;const E=j.findOne(decodeURI(m.hash),this._element);h(E)&&(this._targetLinks.set(decodeURI(m.hash),m),this._observableSections.set(m.hash,E))}}_process(d){this._activeTarget!==d&&(this._clearActiveClass(this._config.target),this._activeTarget=d,d.classList.add($l),this._activateParents(d),z.trigger(this._element,Bx,{relatedTarget:d}))}_activateParents(d){if(d.classList.contains("dropdown-item"))j.findOne(".dropdown-toggle",d.closest(".dropdown")).classList.add($l);else for(const m of j.parents(d,".nav, .list-group"))for(const E of j.prev(m,jx))E.classList.add($l)}_clearActiveClass(d){d.classList.remove($l);const m=j.find(`${Ug}.${$l}`,d);for(const E of m)E.classList.remove($l)}static jQueryInterface(d){return this.each(function(){const m=Ch.getOrCreateInstance(this,d);if(typeof d=="string"){if(m[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);m[d]()}})}}z.on(window,Hx,()=>{for(const y of j.find('[data-bs-spy="scroll"]'))Ch.getOrCreateInstance(y)}),S(Ch);const ea=".bs.tab",zx=`hide${ea}`,Wx=`hidden${ea}`,qx=`show${ea}`,Gx=`shown${ea}`,Xx=`click${ea}`,Kx=`keydown${ea}`,Yx=`load${ea}`,Qx="ArrowLeft",Gv="ArrowRight",Jx="ArrowUp",Xv="ArrowDown",zg="Home",Kv="End",sa="active",Yv="fade",Wg="show",Qv=".dropdown-toggle",qg=`:not(${Qv})`,Jv='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Gg=`.nav-link${qg}, .list-group-item${qg}, [role="tab"]${qg}, ${Jv}`,Zx=`.${sa}[data-bs-toggle="tab"], .${sa}[data-bs-toggle="pill"], .${sa}[data-bs-toggle="list"]`;class ia extends Wt{constructor(d){super(d),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),z.on(this._element,Kx,m=>this._keydown(m)))}static get NAME(){return"tab"}show(){const d=this._element;if(this._elemIsActive(d))return;const m=this._getActiveElem(),E=m?z.trigger(m,zx,{relatedTarget:d}):null;z.trigger(d,qx,{relatedTarget:m}).defaultPrevented||E&&E.defaultPrevented||(this._deactivate(m,d),this._activate(d,m))}_activate(d,m){d&&(d.classList.add(sa),this._activate(j.getElementFromSelector(d)),this._queueCallback(()=>{d.getAttribute("role")==="tab"?(d.removeAttribute("tabindex"),d.setAttribute("aria-selected",!0),this._toggleDropDown(d,!0),z.trigger(d,Gx,{relatedTarget:m})):d.classList.add(Wg)},d,d.classList.contains(Yv)))}_deactivate(d,m){d&&(d.classList.remove(sa),d.blur(),this._deactivate(j.getElementFromSelector(d)),this._queueCallback(()=>{d.getAttribute("role")==="tab"?(d.setAttribute("aria-selected",!1),d.setAttribute("tabindex","-1"),this._toggleDropDown(d,!1),z.trigger(d,Wx,{relatedTarget:m})):d.classList.remove(Wg)},d,d.classList.contains(Yv)))}_keydown(d){if(![Qx,Gv,Jx,Xv,zg,Kv].includes(d.key))return;d.stopPropagation(),d.preventDefault();const m=this._getChildren().filter(L=>!u(L));let E;if([zg,Kv].includes(d.key))E=m[d.key===zg?0:m.length-1];else{const L=[Gv,Xv].includes(d.key);E=R(m,d.target,L,!0)}E&&(E.focus({preventScroll:!0}),ia.getOrCreateInstance(E).show())}_getChildren(){return j.find(Gg,this._parent)}_getActiveElem(){return this._getChildren().find(d=>this._elemIsActive(d))||null}_setInitialAttributes(d,m){this._setAttributeIfNotExists(d,"role","tablist");for(const E of m)this._setInitialAttributesOnChild(E)}_setInitialAttributesOnChild(d){d=this._getInnerElement(d);const m=this._elemIsActive(d),E=this._getOuterElement(d);d.setAttribute("aria-selected",m),E!==d&&this._setAttributeIfNotExists(E,"role","presentation"),m||d.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(d,"role","tab"),this._setInitialAttributesOnTargetPanel(d)}_setInitialAttributesOnTargetPanel(d){const m=j.getElementFromSelector(d);m&&(this._setAttributeIfNotExists(m,"role","tabpanel"),d.id&&this._setAttributeIfNotExists(m,"aria-labelledby",`${d.id}`))}_toggleDropDown(d,m){const E=this._getOuterElement(d);if(!E.classList.contains("dropdown"))return;const L=(D,B)=>{const G=j.findOne(D,E);G&&G.classList.toggle(B,m)};L(Qv,sa),L(".dropdown-menu",Wg),E.setAttribute("aria-expanded",m)}_setAttributeIfNotExists(d,m,E){d.hasAttribute(m)||d.setAttribute(m,E)}_elemIsActive(d){return d.classList.contains(sa)}_getInnerElement(d){return d.matches(Gg)?d:j.findOne(Gg,d)}_getOuterElement(d){return d.closest(".nav-item, .list-group-item")||d}static jQueryInterface(d){return this.each(function(){const m=ia.getOrCreateInstance(this);if(typeof d=="string"){if(m[d]===void 0||d.startsWith("_")||d==="constructor")throw new TypeError(`No method named "${d}"`);m[d]()}})}}z.on(document,Xx,Jv,function(y){["A","AREA"].includes(this.tagName)&&y.preventDefault(),u(this)||ia.getOrCreateInstance(this).show()}),z.on(window,Yx,()=>{for(const y of j.find(Zx))ia.getOrCreateInstance(y)}),S(ia);const Vr=".bs.toast",tC=`mouseover${Vr}`,eC=`mouseout${Vr}`,sC=`focusin${Vr}`,iC=`focusout${Vr}`,nC=`hide${Vr}`,rC=`hidden${Vr}`,oC=`show${Vr}`,aC=`shown${Vr}`,Zv="hide",pf="show",gf="showing",lC={animation:"boolean",autohide:"boolean",delay:"number"},cC={animation:!0,autohide:!0,delay:5e3};class Th extends Wt{constructor(d,m){super(d,m),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return cC}static get DefaultType(){return lC}static get NAME(){return"toast"}show(){z.trigger(this._element,oC).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(Zv),g(this._element),this._element.classList.add(pf,gf),this._queueCallback(()=>{this._element.classList.remove(gf),z.trigger(this._element,aC),this._maybeScheduleHide()},this._element,this._config.animation))}hide(){this.isShown()&&(z.trigger(this._element,nC).defaultPrevented||(this._element.classList.add(gf),this._queueCallback(()=>{this._element.classList.add(Zv),this._element.classList.remove(gf,pf),z.trigger(this._element,rC)},this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(pf),super.dispose()}isShown(){return this._element.classList.contains(pf)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout(()=>{this.hide()},this._config.delay)))}_onInteraction(d,m){switch(d.type){case"mouseover":case"mouseout":this._hasMouseInteraction=m;break;case"focusin":case"focusout":this._hasKeyboardInteraction=m}if(m)return void this._clearTimeout();const E=d.relatedTarget;this._element===E||this._element.contains(E)||this._maybeScheduleHide()}_setListeners(){z.on(this._element,tC,d=>this._onInteraction(d,!0)),z.on(this._element,eC,d=>this._onInteraction(d,!1)),z.on(this._element,sC,d=>this._onInteraction(d,!0)),z.on(this._element,iC,d=>this._onInteraction(d,!1))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(d){return this.each(function(){const m=Th.getOrCreateInstance(this,d);if(typeof d=="string"){if(m[d]===void 0)throw new TypeError(`No method named "${d}"`);m[d](this)}})}}return it(Th),S(Th),{Alert:k,Button:U,Carousel:Tl,Collapse:Rl,Dropdown:zi,Modal:Zo,Offcanvas:Gn,Popover:ff,ScrollSpy:Ch,Tab:ia,Toast:Th,Tooltip:ta}})}(Rf)),Rf.exports}wC();/**
* @vue/shared v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function Jb(n){const t=Object.create(null);for(const e of n.split(","))t[e]=1;return e=>e in t}const ge={},ic=[],jn=()=>{},AC=()=>!1,Qp=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&(n.charCodeAt(2)>122||n.charCodeAt(2)<97),Zb=n=>n.startsWith("onUpdate:"),Rs=Object.assign,t_=(n,t)=>{const e=n.indexOf(t);e>-1&&n.splice(e,1)},EC=Object.prototype.hasOwnProperty,ee=(n,t)=>EC.call(n,t),yt=Array.isArray,nc=n=>jd(n)==="[object Map]",Jp=n=>jd(n)==="[object Set]",py=n=>jd(n)==="[object Date]",It=n=>typeof n=="function",qe=n=>typeof n=="string",Vn=n=>typeof n=="symbol",we=n=>n!==null&&typeof n=="object",Mw=n=>(we(n)||It(n))&&It(n.then)&&It(n.catch),Dw=Object.prototype.toString,jd=n=>Dw.call(n),SC=n=>jd(n).slice(8,-1),Ow=n=>jd(n)==="[object Object]",e_=n=>qe(n)&&n!=="NaN"&&n[0]!=="-"&&""+parseInt(n,10)===n,tu=Jb(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Zp=n=>{const t=Object.create(null);return e=>t[e]||(t[e]=n(e))},xC=/-(\w)/g,Ui=Zp(n=>n.replace(xC,(t,e)=>e?e.toUpperCase():"")),CC=/\B([A-Z])/g,El=Zp(n=>n.replace(CC,"-$1").toLowerCase()),tg=Zp(n=>n.charAt(0).toUpperCase()+n.slice(1)),Jg=Zp(n=>n?`on${tg(n)}`:""),Fo=(n,t)=>!Object.is(n,t),kf=(n,...t)=>{for(let e=0;e<n.length;e++)n[e](...t)},Nw=(n,t,e,s=!1)=>{Object.defineProperty(n,t,{configurable:!0,enumerable:!1,writable:s,value:e})},vm=n=>{const t=parseFloat(n);return isNaN(t)?n:t};let gy;const eg=()=>gy||(gy=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function sg(n){if(yt(n)){const t={};for(let e=0;e<n.length;e++){const s=n[e],i=qe(s)?kC(s):sg(s);if(i)for(const r in i)t[r]=i[r]}return t}else if(qe(n)||we(n))return n}const TC=/;(?![^(]*\))/g,PC=/:([^]+)/,RC=/\/\*[^]*?\*\//g;function kC(n){const t={};return n.replace(RC,"").split(TC).forEach(e=>{if(e){const s=e.split(PC);s.length>1&&(t[s[0].trim()]=s[1].trim())}}),t}function Vd(n){let t="";if(qe(n))t=n;else if(yt(n))for(let e=0;e<n.length;e++){const s=Vd(n[e]);s&&(t+=s+" ")}else if(we(n))for(const e in n)n[e]&&(t+=e+" ");return t.trim()}const IC="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",LC=Jb(IC);function Fw(n){return!!n||n===""}function MC(n,t){if(n.length!==t.length)return!1;let e=!0;for(let s=0;e&&s<n.length;s++)e=ig(n[s],t[s]);return e}function ig(n,t){if(n===t)return!0;let e=py(n),s=py(t);if(e||s)return e&&s?n.getTime()===t.getTime():!1;if(e=Vn(n),s=Vn(t),e||s)return n===t;if(e=yt(n),s=yt(t),e||s)return e&&s?MC(n,t):!1;if(e=we(n),s=we(t),e||s){if(!e||!s)return!1;const i=Object.keys(n).length,r=Object.keys(t).length;if(i!==r)return!1;for(const o in n){const a=n.hasOwnProperty(o),c=t.hasOwnProperty(o);if(a&&!c||!a&&c||!ig(n[o],t[o]))return!1}}return String(n)===String(t)}function $w(n,t){return n.findIndex(e=>ig(e,t))}const Bw=n=>!!(n&&n.__v_isRef===!0),Ze=n=>qe(n)?n:n==null?"":yt(n)||we(n)&&(n.toString===Dw||!It(n.toString))?Bw(n)?Ze(n.value):JSON.stringify(n,Hw,2):String(n),Hw=(n,t)=>Bw(t)?Hw(n,t.value):nc(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((e,[s,i],r)=>(e[Zg(s,r)+" =>"]=i,e),{})}:Jp(t)?{[`Set(${t.size})`]:[...t.values()].map(e=>Zg(e))}:Vn(t)?Zg(t):we(t)&&!yt(t)&&!Ow(t)?String(t):t,Zg=(n,t="")=>{var e;return Vn(n)?`Symbol(${(e=n.description)!=null?e:t})`:n};/**
* @vue/reactivity v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Ts;class jw{constructor(t=!1){this.detached=t,this._active=!0,this._on=0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=Ts,!t&&Ts&&(this.index=(Ts.scopes||(Ts.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].pause();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,e;if(this.scopes)for(t=0,e=this.scopes.length;t<e;t++)this.scopes[t].resume();for(t=0,e=this.effects.length;t<e;t++)this.effects[t].resume()}}run(t){if(this._active){const e=Ts;try{return Ts=this,t()}finally{Ts=e}}}on(){++this._on===1&&(this.prevScope=Ts,Ts=this)}off(){this._on>0&&--this._on===0&&(Ts=this.prevScope,this.prevScope=void 0)}stop(t){if(this._active){this._active=!1;let e,s;for(e=0,s=this.effects.length;e<s;e++)this.effects[e].stop();for(this.effects.length=0,e=0,s=this.cleanups.length;e<s;e++)this.cleanups[e]();if(this.cleanups.length=0,this.scopes){for(e=0,s=this.scopes.length;e<s;e++)this.scopes[e].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const i=this.parent.scopes.pop();i&&i!==this&&(this.parent.scopes[this.index]=i,i.index=this.index)}this.parent=void 0}}}function Vw(n){return new jw(n)}function Uw(){return Ts}function DC(n,t=!1){Ts&&Ts.cleanups.push(n)}let _e;const tm=new WeakSet;class zw{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,Ts&&Ts.active&&Ts.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,tm.has(this)&&(tm.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||qw(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,my(this),Gw(this);const t=_e,e=cn;_e=this,cn=!0;try{return this.fn()}finally{Xw(this),_e=t,cn=e,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)n_(t);this.deps=this.depsTail=void 0,my(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?tm.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){ym(this)&&this.run()}get dirty(){return ym(this)}}let Ww=0,eu,su;function qw(n,t=!1){if(n.flags|=8,t){n.next=su,su=n;return}n.next=eu,eu=n}function s_(){Ww++}function i_(){if(--Ww>0)return;if(su){let t=su;for(su=void 0;t;){const e=t.next;t.next=void 0,t.flags&=-9,t=e}}let n;for(;eu;){let t=eu;for(eu=void 0;t;){const e=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(s){n||(n=s)}t=e}}if(n)throw n}function Gw(n){for(let t=n.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Xw(n){let t,e=n.depsTail,s=e;for(;s;){const i=s.prevDep;s.version===-1?(s===e&&(e=i),n_(s),OC(s)):t=s,s.dep.activeLink=s.prevActiveLink,s.prevActiveLink=void 0,s=i}n.deps=t,n.depsTail=e}function ym(n){for(let t=n.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&(Kw(t.dep.computed)||t.dep.version!==t.version))return!0;return!!n._dirty}function Kw(n){if(n.flags&4&&!(n.flags&16)||(n.flags&=-17,n.globalVersion===cu)||(n.globalVersion=cu,!n.isSSR&&n.flags&128&&(!n.deps&&!n._dirty||!ym(n))))return;n.flags|=2;const t=n.dep,e=_e,s=cn;_e=n,cn=!0;try{Gw(n);const i=n.fn(n._value);(t.version===0||Fo(i,n._value))&&(n.flags|=128,n._value=i,t.version++)}catch(i){throw t.version++,i}finally{_e=e,cn=s,Xw(n),n.flags&=-3}}function n_(n,t=!1){const{dep:e,prevSub:s,nextSub:i}=n;if(s&&(s.nextSub=i,n.prevSub=void 0),i&&(i.prevSub=s,n.nextSub=void 0),e.subs===n&&(e.subs=s,!s&&e.computed)){e.computed.flags&=-5;for(let r=e.computed.deps;r;r=r.nextDep)n_(r,!0)}!t&&!--e.sc&&e.map&&e.map.delete(e.key)}function OC(n){const{prevDep:t,nextDep:e}=n;t&&(t.nextDep=e,n.prevDep=void 0),e&&(e.prevDep=t,n.nextDep=void 0)}let cn=!0;const Yw=[];function Or(){Yw.push(cn),cn=!1}function Nr(){const n=Yw.pop();cn=n===void 0?!0:n}function my(n){const{cleanup:t}=n;if(n.cleanup=void 0,t){const e=_e;_e=void 0;try{t()}finally{_e=e}}}let cu=0;class NC{constructor(t,e){this.sub=t,this.dep=e,this.version=e.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class r_{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!_e||!cn||_e===this.computed)return;let e=this.activeLink;if(e===void 0||e.sub!==_e)e=this.activeLink=new NC(_e,this),_e.deps?(e.prevDep=_e.depsTail,_e.depsTail.nextDep=e,_e.depsTail=e):_e.deps=_e.depsTail=e,Qw(e);else if(e.version===-1&&(e.version=this.version,e.nextDep)){const s=e.nextDep;s.prevDep=e.prevDep,e.prevDep&&(e.prevDep.nextDep=s),e.prevDep=_e.depsTail,e.nextDep=void 0,_e.depsTail.nextDep=e,_e.depsTail=e,_e.deps===e&&(_e.deps=s)}return e}trigger(t){this.version++,cu++,this.notify(t)}notify(t){s_();try{for(let e=this.subs;e;e=e.prevSub)e.sub.notify()&&e.sub.dep.notify()}finally{i_()}}}function Qw(n){if(n.dep.sc++,n.sub.flags&4){const t=n.dep.computed;if(t&&!n.dep.subs){t.flags|=20;for(let s=t.deps;s;s=s.nextDep)Qw(s)}const e=n.dep.subs;e!==n&&(n.prevSub=e,e&&(e.nextSub=n)),n.dep.subs=n}}const dp=new WeakMap,_l=Symbol(""),wm=Symbol(""),hu=Symbol("");function Ps(n,t,e){if(cn&&_e){let s=dp.get(n);s||dp.set(n,s=new Map);let i=s.get(e);i||(s.set(e,i=new r_),i.map=s,i.key=e),i.track()}}function kr(n,t,e,s,i,r){const o=dp.get(n);if(!o){cu++;return}const a=c=>{c&&c.trigger()};if(s_(),t==="clear")o.forEach(a);else{const c=yt(n),h=c&&e_(e);if(c&&e==="length"){const u=Number(s);o.forEach((f,p)=>{(p==="length"||p===hu||!Vn(p)&&p>=u)&&a(f)})}else switch((e!==void 0||o.has(void 0))&&a(o.get(e)),h&&a(o.get(hu)),t){case"add":c?h&&a(o.get("length")):(a(o.get(_l)),nc(n)&&a(o.get(wm)));break;case"delete":c||(a(o.get(_l)),nc(n)&&a(o.get(wm)));break;case"set":nc(n)&&a(o.get(_l));break}}i_()}function FC(n,t){const e=dp.get(n);return e&&e.get(t)}function Hl(n){const t=Yt(n);return t===n?t:(Ps(t,"iterate",hu),ji(n)?t:t.map(bs))}function ng(n){return Ps(n=Yt(n),"iterate",hu),n}const $C={__proto__:null,[Symbol.iterator](){return em(this,Symbol.iterator,bs)},concat(...n){return Hl(this).concat(...n.map(t=>yt(t)?Hl(t):t))},entries(){return em(this,"entries",n=>(n[1]=bs(n[1]),n))},every(n,t){return Xn(this,"every",n,t,void 0,arguments)},filter(n,t){return Xn(this,"filter",n,t,e=>e.map(bs),arguments)},find(n,t){return Xn(this,"find",n,t,bs,arguments)},findIndex(n,t){return Xn(this,"findIndex",n,t,void 0,arguments)},findLast(n,t){return Xn(this,"findLast",n,t,bs,arguments)},findLastIndex(n,t){return Xn(this,"findLastIndex",n,t,void 0,arguments)},forEach(n,t){return Xn(this,"forEach",n,t,void 0,arguments)},includes(...n){return sm(this,"includes",n)},indexOf(...n){return sm(this,"indexOf",n)},join(n){return Hl(this).join(n)},lastIndexOf(...n){return sm(this,"lastIndexOf",n)},map(n,t){return Xn(this,"map",n,t,void 0,arguments)},pop(){return Ph(this,"pop")},push(...n){return Ph(this,"push",n)},reduce(n,...t){return by(this,"reduce",n,t)},reduceRight(n,...t){return by(this,"reduceRight",n,t)},shift(){return Ph(this,"shift")},some(n,t){return Xn(this,"some",n,t,void 0,arguments)},splice(...n){return Ph(this,"splice",n)},toReversed(){return Hl(this).toReversed()},toSorted(n){return Hl(this).toSorted(n)},toSpliced(...n){return Hl(this).toSpliced(...n)},unshift(...n){return Ph(this,"unshift",n)},values(){return em(this,"values",bs)}};function em(n,t,e){const s=ng(n),i=s[t]();return s!==n&&!ji(n)&&(i._next=i.next,i.next=()=>{const r=i._next();return r.value&&(r.value=e(r.value)),r}),i}const BC=Array.prototype;function Xn(n,t,e,s,i,r){const o=ng(n),a=o!==n&&!ji(n),c=o[t];if(c!==BC[t]){const f=c.apply(n,r);return a?bs(f):f}let h=e;o!==n&&(a?h=function(f,p){return e.call(this,bs(f),p,n)}:e.length>2&&(h=function(f,p){return e.call(this,f,p,n)}));const u=c.call(o,h,s);return a&&i?i(u):u}function by(n,t,e,s){const i=ng(n);let r=e;return i!==n&&(ji(n)?e.length>3&&(r=function(o,a,c){return e.call(this,o,a,c,n)}):r=function(o,a,c){return e.call(this,o,bs(a),c,n)}),i[t](r,...s)}function sm(n,t,e){const s=Yt(n);Ps(s,"iterate",hu);const i=s[t](...e);return(i===-1||i===!1)&&l_(e[0])?(e[0]=Yt(e[0]),s[t](...e)):i}function Ph(n,t,e=[]){Or(),s_();const s=Yt(n)[t].apply(n,e);return i_(),Nr(),s}const HC=Jb("__proto__,__v_isRef,__isVue"),Jw=new Set(Object.getOwnPropertyNames(Symbol).filter(n=>n!=="arguments"&&n!=="caller").map(n=>Symbol[n]).filter(Vn));function jC(n){Vn(n)||(n=String(n));const t=Yt(this);return Ps(t,"has",n),t.hasOwnProperty(n)}class Zw{constructor(t=!1,e=!1){this._isReadonly=t,this._isShallow=e}get(t,e,s){if(e==="__v_skip")return t.__v_skip;const i=this._isReadonly,r=this._isShallow;if(e==="__v_isReactive")return!i;if(e==="__v_isReadonly")return i;if(e==="__v_isShallow")return r;if(e==="__v_raw")return s===(i?r?QC:iA:r?sA:eA).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(s)?t:void 0;const o=yt(t);if(!i){let c;if(o&&(c=$C[e]))return c;if(e==="hasOwnProperty")return jC}const a=Reflect.get(t,e,Be(t)?t:s);return(Vn(e)?Jw.has(e):HC(e))||(i||Ps(t,"get",e),r)?a:Be(a)?o&&e_(e)?a:a.value:we(a)?i?rA(a):Ud(a):a}}class tA extends Zw{constructor(t=!1){super(!1,t)}set(t,e,s,i){let r=t[e];if(!this._isShallow){const c=Ho(r);if(!ji(s)&&!Ho(s)&&(r=Yt(r),s=Yt(s)),!yt(t)&&Be(r)&&!Be(s))return c?!1:(r.value=s,!0)}const o=yt(t)&&e_(e)?Number(e)<t.length:ee(t,e),a=Reflect.set(t,e,s,Be(t)?t:i);return t===Yt(i)&&(o?Fo(s,r)&&kr(t,"set",e,s):kr(t,"add",e,s)),a}deleteProperty(t,e){const s=ee(t,e);t[e];const i=Reflect.deleteProperty(t,e);return i&&s&&kr(t,"delete",e,void 0),i}has(t,e){const s=Reflect.has(t,e);return(!Vn(e)||!Jw.has(e))&&Ps(t,"has",e),s}ownKeys(t){return Ps(t,"iterate",yt(t)?"length":_l),Reflect.ownKeys(t)}}class VC extends Zw{constructor(t=!1){super(!0,t)}set(t,e){return!0}deleteProperty(t,e){return!0}}const UC=new tA,zC=new VC,WC=new tA(!0);const Am=n=>n,vf=n=>Reflect.getPrototypeOf(n);function qC(n,t,e){return function(...s){const i=this.__v_raw,r=Yt(i),o=nc(r),a=n==="entries"||n===Symbol.iterator&&o,c=n==="keys"&&o,h=i[n](...s),u=e?Am:t?fp:bs;return!t&&Ps(r,"iterate",c?wm:_l),{next(){const{value:f,done:p}=h.next();return p?{value:f,done:p}:{value:a?[u(f[0]),u(f[1])]:u(f),done:p}},[Symbol.iterator](){return this}}}}function yf(n){return function(...t){return n==="delete"?!1:n==="clear"?void 0:this}}function GC(n,t){const e={get(i){const r=this.__v_raw,o=Yt(r),a=Yt(i);n||(Fo(i,a)&&Ps(o,"get",i),Ps(o,"get",a));const{has:c}=vf(o),h=t?Am:n?fp:bs;if(c.call(o,i))return h(r.get(i));if(c.call(o,a))return h(r.get(a));r!==o&&r.get(i)},get size(){const i=this.__v_raw;return!n&&Ps(Yt(i),"iterate",_l),Reflect.get(i,"size",i)},has(i){const r=this.__v_raw,o=Yt(r),a=Yt(i);return n||(Fo(i,a)&&Ps(o,"has",i),Ps(o,"has",a)),i===a?r.has(i):r.has(i)||r.has(a)},forEach(i,r){const o=this,a=o.__v_raw,c=Yt(a),h=t?Am:n?fp:bs;return!n&&Ps(c,"iterate",_l),a.forEach((u,f)=>i.call(r,h(u),h(f),o))}};return Rs(e,n?{add:yf("add"),set:yf("set"),delete:yf("delete"),clear:yf("clear")}:{add(i){!t&&!ji(i)&&!Ho(i)&&(i=Yt(i));const r=Yt(this);return vf(r).has.call(r,i)||(r.add(i),kr(r,"add",i,i)),this},set(i,r){!t&&!ji(r)&&!Ho(r)&&(r=Yt(r));const o=Yt(this),{has:a,get:c}=vf(o);let h=a.call(o,i);h||(i=Yt(i),h=a.call(o,i));const u=c.call(o,i);return o.set(i,r),h?Fo(r,u)&&kr(o,"set",i,r):kr(o,"add",i,r),this},delete(i){const r=Yt(this),{has:o,get:a}=vf(r);let c=o.call(r,i);c||(i=Yt(i),c=o.call(r,i)),a&&a.call(r,i);const h=r.delete(i);return c&&kr(r,"delete",i,void 0),h},clear(){const i=Yt(this),r=i.size!==0,o=i.clear();return r&&kr(i,"clear",void 0,void 0),o}}),["keys","values","entries",Symbol.iterator].forEach(i=>{e[i]=qC(i,n,t)}),e}function o_(n,t){const e=GC(n,t);return(s,i,r)=>i==="__v_isReactive"?!n:i==="__v_isReadonly"?n:i==="__v_raw"?s:Reflect.get(ee(e,i)&&i in s?e:s,i,r)}const XC={get:o_(!1,!1)},KC={get:o_(!1,!0)},YC={get:o_(!0,!1)};const eA=new WeakMap,sA=new WeakMap,iA=new WeakMap,QC=new WeakMap;function JC(n){switch(n){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function ZC(n){return n.__v_skip||!Object.isExtensible(n)?0:JC(SC(n))}function Ud(n){return Ho(n)?n:a_(n,!1,UC,XC,eA)}function nA(n){return a_(n,!1,WC,KC,sA)}function rA(n){return a_(n,!0,zC,YC,iA)}function a_(n,t,e,s,i){if(!we(n)||n.__v_raw&&!(t&&n.__v_isReactive))return n;const r=ZC(n);if(r===0)return n;const o=i.get(n);if(o)return o;const a=new Proxy(n,r===2?s:e);return i.set(n,a),a}function $o(n){return Ho(n)?$o(n.__v_raw):!!(n&&n.__v_isReactive)}function Ho(n){return!!(n&&n.__v_isReadonly)}function ji(n){return!!(n&&n.__v_isShallow)}function l_(n){return n?!!n.__v_raw:!1}function Yt(n){const t=n&&n.__v_raw;return t?Yt(t):n}function c_(n){return!ee(n,"__v_skip")&&Object.isExtensible(n)&&Nw(n,"__v_skip",!0),n}const bs=n=>we(n)?Ud(n):n,fp=n=>we(n)?rA(n):n;function Be(n){return n?n.__v_isRef===!0:!1}function ve(n){return oA(n,!1)}function t1(n){return oA(n,!0)}function oA(n,t){return Be(n)?n:new e1(n,t)}class e1{constructor(t,e){this.dep=new r_,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=e?t:Yt(t),this._value=e?t:bs(t),this.__v_isShallow=e}get value(){return this.dep.track(),this._value}set value(t){const e=this._rawValue,s=this.__v_isShallow||ji(t)||Ho(t);t=s?t:Yt(t),Fo(t,e)&&(this._rawValue=t,this._value=s?t:bs(t),this.dep.trigger())}}function Ie(n){return Be(n)?n.value:n}const s1={get:(n,t,e)=>t==="__v_raw"?n:Ie(Reflect.get(n,t,e)),set:(n,t,e,s)=>{const i=n[t];return Be(i)&&!Be(e)?(i.value=e,!0):Reflect.set(n,t,e,s)}};function aA(n){return $o(n)?n:new Proxy(n,s1)}function i1(n){const t=yt(n)?new Array(n.length):{};for(const e in n)t[e]=r1(n,e);return t}class n1{constructor(t,e,s){this._object=t,this._key=e,this._defaultValue=s,this.__v_isRef=!0,this._value=void 0}get value(){const t=this._object[this._key];return this._value=t===void 0?this._defaultValue:t}set value(t){this._object[this._key]=t}get dep(){return FC(Yt(this._object),this._key)}}function r1(n,t,e){const s=n[t];return Be(s)?s:new n1(n,t,e)}class o1{constructor(t,e,s){this.fn=t,this.setter=e,this._value=void 0,this.dep=new r_(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=cu-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!e,this.isSSR=s}notify(){if(this.flags|=16,!(this.flags&8)&&_e!==this)return qw(this,!0),!0}get value(){const t=this.dep.track();return Kw(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function a1(n,t,e=!1){let s,i;return It(n)?s=n:(s=n.get,i=n.set),new o1(s,i,e)}const wf={},pp=new WeakMap;let aa;function l1(n,t=!1,e=aa){if(e){let s=pp.get(e);s||pp.set(e,s=[]),s.push(n)}}function c1(n,t,e=ge){const{immediate:s,deep:i,once:r,scheduler:o,augmentJob:a,call:c}=e,h=R=>i?R:ji(R)||i===!1||i===0?Ir(R,1):Ir(R);let u,f,p,g,v=!1,_=!1;if(Be(n)?(f=()=>n.value,v=ji(n)):$o(n)?(f=()=>h(n),v=!0):yt(n)?(_=!0,v=n.some(R=>$o(R)||ji(R)),f=()=>n.map(R=>{if(Be(R))return R.value;if($o(R))return h(R);if(It(R))return c?c(R,2):R()})):It(n)?t?f=c?()=>c(n,2):n:f=()=>{if(p){Or();try{p()}finally{Nr()}}const R=aa;aa=u;try{return c?c(n,3,[g]):n(g)}finally{aa=R}}:f=jn,t&&i){const R=f,I=i===!0?1/0:i;f=()=>Ir(R(),I)}const x=Uw(),S=()=>{u.stop(),x&&x.active&&t_(x.effects,u)};if(r&&t){const R=t;t=(...I)=>{R(...I),S()}}let C=_?new Array(n.length).fill(wf):wf;const T=R=>{if(!(!(u.flags&1)||!u.dirty&&!R))if(t){const I=u.run();if(i||v||(_?I.some((F,N)=>Fo(F,C[N])):Fo(I,C))){p&&p();const F=aa;aa=u;try{const N=[I,C===wf?void 0:_&&C[0]===wf?[]:C,g];c?c(t,3,N):t(...N),C=I}finally{aa=F}}}else u.run()};return a&&a(T),u=new zw(f),u.scheduler=o?()=>o(T,!1):T,g=R=>l1(R,!1,u),p=u.onStop=()=>{const R=pp.get(u);if(R){if(c)c(R,4);else for(const I of R)I();pp.delete(u)}},t?s?T(!0):C=u.run():o?o(T.bind(null,!0),!0):u.run(),S.pause=u.pause.bind(u),S.resume=u.resume.bind(u),S.stop=S,S}function Ir(n,t=1/0,e){if(t<=0||!we(n)||n.__v_skip||(e=e||new Set,e.has(n)))return n;if(e.add(n),t--,Be(n))Ir(n.value,t,e);else if(yt(n))for(let s=0;s<n.length;s++)Ir(n[s],t,e);else if(Jp(n)||nc(n))n.forEach(s=>{Ir(s,t,e)});else if(Ow(n)){for(const s in n)Ir(n[s],t,e);for(const s of Object.getOwnPropertySymbols(n))Object.prototype.propertyIsEnumerable.call(n,s)&&Ir(n[s],t,e)}return n}/**
* @vue/runtime-core v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function zd(n,t,e,s){try{return s?n(...s):n()}catch(i){rg(i,t,e)}}function Un(n,t,e,s){if(It(n)){const i=zd(n,t,e,s);return i&&Mw(i)&&i.catch(r=>{rg(r,t,e)}),i}if(yt(n)){const i=[];for(let r=0;r<n.length;r++)i.push(Un(n[r],t,e,s));return i}}function rg(n,t,e,s=!0){const i=t?t.vnode:null,{errorHandler:r,throwUnhandledErrorInProduction:o}=t&&t.appContext.config||ge;if(t){let a=t.parent;const c=t.proxy,h=`https://vuejs.org/error-reference/#runtime-${e}`;for(;a;){const u=a.ec;if(u){for(let f=0;f<u.length;f++)if(u[f](n,c,h)===!1)return}a=a.parent}if(r){Or(),zd(r,null,10,[n,c,h]),Nr();return}}h1(n,e,i,s,o)}function h1(n,t,e,s=!0,i=!1){if(i)throw n;console.error(n)}const Ws=[];let An=-1;const rc=[];let Xr=null,Ul=0;const lA=Promise.resolve();let gp=null;function h_(n){const t=gp||lA;return n?t.then(this?n.bind(this):n):t}function u1(n){let t=An+1,e=Ws.length;for(;t<e;){const s=t+e>>>1,i=Ws[s],r=uu(i);r<n||r===n&&i.flags&2?t=s+1:e=s}return t}function u_(n){if(!(n.flags&1)){const t=uu(n),e=Ws[Ws.length-1];!e||!(n.flags&2)&&t>=uu(e)?Ws.push(n):Ws.splice(u1(t),0,n),n.flags|=1,cA()}}function cA(){gp||(gp=lA.then(uA))}function d1(n){yt(n)?rc.push(...n):Xr&&n.id===-1?Xr.splice(Ul+1,0,n):n.flags&1||(rc.push(n),n.flags|=1),cA()}function _y(n,t,e=An+1){for(;e<Ws.length;e++){const s=Ws[e];if(s&&s.flags&2){if(n&&s.id!==n.uid)continue;Ws.splice(e,1),e--,s.flags&4&&(s.flags&=-2),s(),s.flags&4||(s.flags&=-2)}}}function hA(n){if(rc.length){const t=[...new Set(rc)].sort((e,s)=>uu(e)-uu(s));if(rc.length=0,Xr){Xr.push(...t);return}for(Xr=t,Ul=0;Ul<Xr.length;Ul++){const e=Xr[Ul];e.flags&4&&(e.flags&=-2),e.flags&8||e(),e.flags&=-2}Xr=null,Ul=0}}const uu=n=>n.id==null?n.flags&2?-1:1/0:n.id;function uA(n){try{for(An=0;An<Ws.length;An++){const t=Ws[An];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),zd(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;An<Ws.length;An++){const t=Ws[An];t&&(t.flags&=-2)}An=-1,Ws.length=0,hA(),gp=null,(Ws.length||rc.length)&&uA()}}let ti=null,dA=null;function mp(n){const t=ti;return ti=n,dA=n&&n.type.__scopeId||null,t}function Jr(n,t=ti,e){if(!t||n._n)return n;const s=(...i)=>{s._d&&Py(-1);const r=mp(t);let o;try{o=n(...i)}finally{mp(r),s._d&&Py(1)}return o};return s._n=!0,s._c=!0,s._d=!0,s}function Kr(n,t){if(ti===null)return n;const e=hg(ti),s=n.dirs||(n.dirs=[]);for(let i=0;i<t.length;i++){let[r,o,a,c=ge]=t[i];r&&(It(r)&&(r={mounted:r,updated:r}),r.deep&&Ir(o),s.push({dir:r,instance:e,value:o,oldValue:void 0,arg:a,modifiers:c}))}return n}function ra(n,t,e,s){const i=n.dirs,r=t&&t.dirs;for(let o=0;o<i.length;o++){const a=i[o];r&&(a.oldValue=r[o].value);let c=a.dir[s];c&&(Or(),Un(c,e,8,[n.el,a,n,t]),Nr())}}const f1=Symbol("_vte"),p1=n=>n.__isTeleport;function d_(n,t){n.shapeFlag&6&&n.component?(n.transition=t,d_(n.component.subTree,t)):n.shapeFlag&128?(n.ssContent.transition=t.clone(n.ssContent),n.ssFallback.transition=t.clone(n.ssFallback)):n.transition=t}/*! #__NO_SIDE_EFFECTS__ */function Br(n,t){return It(n)?Rs({name:n.name},t,{setup:n}):n}function fA(n){n.ids=[n.ids[0]+n.ids[2]+++"-",0,0]}function bp(n,t,e,s,i=!1){if(yt(n)){n.forEach((v,_)=>bp(v,t&&(yt(t)?t[_]:t),e,s,i));return}if(iu(s)&&!i){s.shapeFlag&512&&s.type.__asyncResolved&&s.component.subTree.component&&bp(n,t,e,s.component.subTree);return}const r=s.shapeFlag&4?hg(s.component):s.el,o=i?null:r,{i:a,r:c}=n,h=t&&t.r,u=a.refs===ge?a.refs={}:a.refs,f=a.setupState,p=Yt(f),g=f===ge?()=>!1:v=>ee(p,v);if(h!=null&&h!==c&&(qe(h)?(u[h]=null,g(h)&&(f[h]=null)):Be(h)&&(h.value=null)),It(c))zd(c,a,12,[o,u]);else{const v=qe(c),_=Be(c);if(v||_){const x=()=>{if(n.f){const S=v?g(c)?f[c]:u[c]:c.value;i?yt(S)&&t_(S,r):yt(S)?S.includes(r)||S.push(r):v?(u[c]=[r],g(c)&&(f[c]=u[c])):(c.value=[r],n.k&&(u[n.k]=c.value))}else v?(u[c]=o,g(c)&&(f[c]=o)):_&&(c.value=o,n.k&&(u[n.k]=o))};o?(x.id=-1,ri(x,e)):x()}}}eg().requestIdleCallback;eg().cancelIdleCallback;const iu=n=>!!n.type.__asyncLoader,pA=n=>n.type.__isKeepAlive;function g1(n,t){gA(n,"a",t)}function m1(n,t){gA(n,"da",t)}function gA(n,t,e=_s){const s=n.__wdc||(n.__wdc=()=>{let i=e;for(;i;){if(i.isDeactivated)return;i=i.parent}return n()});if(og(t,s,e),e){let i=e.parent;for(;i&&i.parent;)pA(i.parent.vnode)&&b1(s,t,e,i),i=i.parent}}function b1(n,t,e,s){const i=og(t,n,s,!0);mA(()=>{t_(s[t],i)},e)}function og(n,t,e=_s,s=!1){if(e){const i=e[n]||(e[n]=[]),r=t.__weh||(t.__weh=(...o)=>{Or();const a=Wd(e),c=Un(t,e,n,o);return a(),Nr(),c});return s?i.unshift(r):i.push(r),r}}const Hr=n=>(t,e=_s)=>{(!fu||n==="sp")&&og(n,(...s)=>t(...s),e)},_1=Hr("bm"),ag=Hr("m"),v1=Hr("bu"),y1=Hr("u"),w1=Hr("bum"),mA=Hr("um"),A1=Hr("sp"),E1=Hr("rtg"),S1=Hr("rtc");function x1(n,t=_s){og("ec",n,t)}const C1="components";function bA(n,t){return P1(C1,n,!0,t)||n}const T1=Symbol.for("v-ndc");function P1(n,t,e=!0,s=!1){const i=ti||_s;if(i){const r=i.type;{const a=mT(r,!1);if(a&&(a===t||a===Ui(t)||a===tg(Ui(t))))return r}const o=vy(i[n]||r[n],t)||vy(i.appContext[n],t);return!o&&s?r:o}}function vy(n,t){return n&&(n[t]||n[Ui(t)]||n[tg(Ui(t))])}function Wr(n,t,e,s){let i;const r=e,o=yt(n);if(o||qe(n)){const a=o&&$o(n);let c=!1,h=!1;a&&(c=!ji(n),h=Ho(n),n=ng(n)),i=new Array(n.length);for(let u=0,f=n.length;u<f;u++)i[u]=t(c?h?fp(bs(n[u])):bs(n[u]):n[u],u,void 0,r)}else if(typeof n=="number"){i=new Array(n);for(let a=0;a<n;a++)i[a]=t(a+1,a,void 0,r)}else if(we(n))if(n[Symbol.iterator])i=Array.from(n,(a,c)=>t(a,c,void 0,r));else{const a=Object.keys(n);i=new Array(a.length);for(let c=0,h=a.length;c<h;c++){const u=a[c];i[c]=t(n[u],u,c,r)}}else i=[];return i}const Em=n=>n?FA(n)?hg(n):Em(n.parent):null,nu=Rs(Object.create(null),{$:n=>n,$el:n=>n.vnode.el,$data:n=>n.data,$props:n=>n.props,$attrs:n=>n.attrs,$slots:n=>n.slots,$refs:n=>n.refs,$parent:n=>Em(n.parent),$root:n=>Em(n.root),$host:n=>n.ce,$emit:n=>n.emit,$options:n=>vA(n),$forceUpdate:n=>n.f||(n.f=()=>{u_(n.update)}),$nextTick:n=>n.n||(n.n=h_.bind(n.proxy)),$watch:n=>Y1.bind(n)}),im=(n,t)=>n!==ge&&!n.__isScriptSetup&&ee(n,t),R1={get({_:n},t){if(t==="__v_skip")return!0;const{ctx:e,setupState:s,data:i,props:r,accessCache:o,type:a,appContext:c}=n;let h;if(t[0]!=="$"){const g=o[t];if(g!==void 0)switch(g){case 1:return s[t];case 2:return i[t];case 4:return e[t];case 3:return r[t]}else{if(im(s,t))return o[t]=1,s[t];if(i!==ge&&ee(i,t))return o[t]=2,i[t];if((h=n.propsOptions[0])&&ee(h,t))return o[t]=3,r[t];if(e!==ge&&ee(e,t))return o[t]=4,e[t];Sm&&(o[t]=0)}}const u=nu[t];let f,p;if(u)return t==="$attrs"&&Ps(n.attrs,"get",""),u(n);if((f=a.__cssModules)&&(f=f[t]))return f;if(e!==ge&&ee(e,t))return o[t]=4,e[t];if(p=c.config.globalProperties,ee(p,t))return p[t]},set({_:n},t,e){const{data:s,setupState:i,ctx:r}=n;return im(i,t)?(i[t]=e,!0):s!==ge&&ee(s,t)?(s[t]=e,!0):ee(n.props,t)||t[0]==="$"&&t.slice(1)in n?!1:(r[t]=e,!0)},has({_:{data:n,setupState:t,accessCache:e,ctx:s,appContext:i,propsOptions:r}},o){let a;return!!e[o]||n!==ge&&ee(n,o)||im(t,o)||(a=r[0])&&ee(a,o)||ee(s,o)||ee(nu,o)||ee(i.config.globalProperties,o)},defineProperty(n,t,e){return e.get!=null?n._.accessCache[t]=0:ee(e,"value")&&this.set(n,t,e.value,null),Reflect.defineProperty(n,t,e)}};function yy(n){return yt(n)?n.reduce((t,e)=>(t[e]=null,t),{}):n}let Sm=!0;function k1(n){const t=vA(n),e=n.proxy,s=n.ctx;Sm=!1,t.beforeCreate&&wy(t.beforeCreate,n,"bc");const{data:i,computed:r,methods:o,watch:a,provide:c,inject:h,created:u,beforeMount:f,mounted:p,beforeUpdate:g,updated:v,activated:_,deactivated:x,beforeDestroy:S,beforeUnmount:C,destroyed:T,unmounted:R,render:I,renderTracked:F,renderTriggered:N,errorCaptured:H,serverPrefetch:V,expose:Y,inheritAttrs:Z,components:vt,directives:At,filters:St}=t;if(h&&I1(h,s,null),o)for(const X in o){const Ct=o[X];It(Ct)&&(s[X]=Ct.bind(e))}if(i){const X=i.call(e,e);we(X)&&(n.data=Ud(X))}if(Sm=!0,r)for(const X in r){const Ct=r[X],Le=It(Ct)?Ct.bind(e,e):It(Ct.get)?Ct.get.bind(e,e):jn,z=!It(Ct)&&It(Ct.set)?Ct.set.bind(e):jn,Ee=qs({get:Le,set:z});Object.defineProperty(s,X,{enumerable:!0,configurable:!0,get:()=>Ee.value,set:Vt=>Ee.value=Vt})}if(a)for(const X in a)_A(a[X],s,e,X);if(c){const X=It(c)?c.call(e):c;Reflect.ownKeys(X).forEach(Ct=>{If(Ct,X[Ct])})}u&&wy(u,n,"c");function Q(X,Ct){yt(Ct)?Ct.forEach(Le=>X(Le.bind(e))):Ct&&X(Ct.bind(e))}if(Q(_1,f),Q(ag,p),Q(v1,g),Q(y1,v),Q(g1,_),Q(m1,x),Q(x1,H),Q(S1,F),Q(E1,N),Q(w1,C),Q(mA,R),Q(A1,V),yt(Y))if(Y.length){const X=n.exposed||(n.exposed={});Y.forEach(Ct=>{Object.defineProperty(X,Ct,{get:()=>e[Ct],set:Le=>e[Ct]=Le})})}else n.exposed||(n.exposed={});I&&n.render===jn&&(n.render=I),Z!=null&&(n.inheritAttrs=Z),vt&&(n.components=vt),At&&(n.directives=At),V&&fA(n)}function I1(n,t,e=jn){yt(n)&&(n=xm(n));for(const s in n){const i=n[s];let r;we(i)?"default"in i?r=hn(i.from||s,i.default,!0):r=hn(i.from||s):r=hn(i),Be(r)?Object.defineProperty(t,s,{enumerable:!0,configurable:!0,get:()=>r.value,set:o=>r.value=o}):t[s]=r}}function wy(n,t,e){Un(yt(n)?n.map(s=>s.bind(t.proxy)):n.bind(t.proxy),t,e)}function _A(n,t,e,s){let i=s.includes(".")?LA(e,s):()=>e[s];if(qe(n)){const r=t[n];It(r)&&oc(i,r)}else if(It(n))oc(i,n.bind(e));else if(we(n))if(yt(n))n.forEach(r=>_A(r,t,e,s));else{const r=It(n.handler)?n.handler.bind(e):t[n.handler];It(r)&&oc(i,r,n)}}function vA(n){const t=n.type,{mixins:e,extends:s}=t,{mixins:i,optionsCache:r,config:{optionMergeStrategies:o}}=n.appContext,a=r.get(t);let c;return a?c=a:!i.length&&!e&&!s?c=t:(c={},i.length&&i.forEach(h=>_p(c,h,o,!0)),_p(c,t,o)),we(t)&&r.set(t,c),c}function _p(n,t,e,s=!1){const{mixins:i,extends:r}=t;r&&_p(n,r,e,!0),i&&i.forEach(o=>_p(n,o,e,!0));for(const o in t)if(!(s&&o==="expose")){const a=L1[o]||e&&e[o];n[o]=a?a(n[o],t[o]):t[o]}return n}const L1={data:Ay,props:Ey,emits:Ey,methods:Nh,computed:Nh,beforeCreate:Fs,created:Fs,beforeMount:Fs,mounted:Fs,beforeUpdate:Fs,updated:Fs,beforeDestroy:Fs,beforeUnmount:Fs,destroyed:Fs,unmounted:Fs,activated:Fs,deactivated:Fs,errorCaptured:Fs,serverPrefetch:Fs,components:Nh,directives:Nh,watch:D1,provide:Ay,inject:M1};function Ay(n,t){return t?n?function(){return Rs(It(n)?n.call(this,this):n,It(t)?t.call(this,this):t)}:t:n}function M1(n,t){return Nh(xm(n),xm(t))}function xm(n){if(yt(n)){const t={};for(let e=0;e<n.length;e++)t[n[e]]=n[e];return t}return n}function Fs(n,t){return n?[...new Set([].concat(n,t))]:t}function Nh(n,t){return n?Rs(Object.create(null),n,t):t}function Ey(n,t){return n?yt(n)&&yt(t)?[...new Set([...n,...t])]:Rs(Object.create(null),yy(n),yy(t??{})):t}function D1(n,t){if(!n)return t;if(!t)return n;const e=Rs(Object.create(null),n);for(const s in t)e[s]=Fs(n[s],t[s]);return e}function yA(){return{app:null,config:{isNativeTag:AC,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let O1=0;function N1(n,t){return function(s,i=null){It(s)||(s=Rs({},s)),i!=null&&!we(i)&&(i=null);const r=yA(),o=new WeakSet,a=[];let c=!1;const h=r.app={_uid:O1++,_component:s,_props:i,_container:null,_context:r,_instance:null,version:_T,get config(){return r.config},set config(u){},use(u,...f){return o.has(u)||(u&&It(u.install)?(o.add(u),u.install(h,...f)):It(u)&&(o.add(u),u(h,...f))),h},mixin(u){return r.mixins.includes(u)||r.mixins.push(u),h},component(u,f){return f?(r.components[u]=f,h):r.components[u]},directive(u,f){return f?(r.directives[u]=f,h):r.directives[u]},mount(u,f,p){if(!c){const g=h._ceVNode||Te(s,i);return g.appContext=r,p===!0?p="svg":p===!1&&(p=void 0),n(g,u,p),c=!0,h._container=u,u.__vue_app__=h,hg(g.component)}},onUnmount(u){a.push(u)},unmount(){c&&(Un(a,h._instance,16),n(null,h._container),delete h._container.__vue_app__)},provide(u,f){return r.provides[u]=f,h},runWithContext(u){const f=vl;vl=h;try{return u()}finally{vl=f}}};return h}}let vl=null;function If(n,t){if(_s){let e=_s.provides;const s=_s.parent&&_s.parent.provides;s===e&&(e=_s.provides=Object.create(s)),e[n]=t}}function hn(n,t,e=!1){const s=_s||ti;if(s||vl){const i=vl?vl._context.provides:s?s.parent==null?s.vnode.appContext&&s.vnode.appContext.provides:s.parent.provides:void 0;if(i&&n in i)return i[n];if(arguments.length>1)return e&&It(t)?t.call(s&&s.proxy):t}}function F1(){return!!(_s||ti||vl)}const wA={},AA=()=>Object.create(wA),EA=n=>Object.getPrototypeOf(n)===wA;function $1(n,t,e,s=!1){const i={},r=AA();n.propsDefaults=Object.create(null),SA(n,t,i,r);for(const o in n.propsOptions[0])o in i||(i[o]=void 0);e?n.props=s?i:nA(i):n.type.props?n.props=i:n.props=r,n.attrs=r}function B1(n,t,e,s){const{props:i,attrs:r,vnode:{patchFlag:o}}=n,a=Yt(i),[c]=n.propsOptions;let h=!1;if((s||o>0)&&!(o&16)){if(o&8){const u=n.vnode.dynamicProps;for(let f=0;f<u.length;f++){let p=u[f];if(lg(n.emitsOptions,p))continue;const g=t[p];if(c)if(ee(r,p))g!==r[p]&&(r[p]=g,h=!0);else{const v=Ui(p);i[v]=Cm(c,a,v,g,n,!1)}else g!==r[p]&&(r[p]=g,h=!0)}}}else{SA(n,t,i,r)&&(h=!0);let u;for(const f in a)(!t||!ee(t,f)&&((u=El(f))===f||!ee(t,u)))&&(c?e&&(e[f]!==void 0||e[u]!==void 0)&&(i[f]=Cm(c,a,f,void 0,n,!0)):delete i[f]);if(r!==a)for(const f in r)(!t||!ee(t,f))&&(delete r[f],h=!0)}h&&kr(n.attrs,"set","")}function SA(n,t,e,s){const[i,r]=n.propsOptions;let o=!1,a;if(t)for(let c in t){if(tu(c))continue;const h=t[c];let u;i&&ee(i,u=Ui(c))?!r||!r.includes(u)?e[u]=h:(a||(a={}))[u]=h:lg(n.emitsOptions,c)||(!(c in s)||h!==s[c])&&(s[c]=h,o=!0)}if(r){const c=Yt(e),h=a||ge;for(let u=0;u<r.length;u++){const f=r[u];e[f]=Cm(i,c,f,h[f],n,!ee(h,f))}}return o}function Cm(n,t,e,s,i,r){const o=n[e];if(o!=null){const a=ee(o,"default");if(a&&s===void 0){const c=o.default;if(o.type!==Function&&!o.skipFactory&&It(c)){const{propsDefaults:h}=i;if(e in h)s=h[e];else{const u=Wd(i);s=h[e]=c.call(null,t),u()}}else s=c;i.ce&&i.ce._setProp(e,s)}o[0]&&(r&&!a?s=!1:o[1]&&(s===""||s===El(e))&&(s=!0))}return s}const H1=new WeakMap;function xA(n,t,e=!1){const s=e?H1:t.propsCache,i=s.get(n);if(i)return i;const r=n.props,o={},a=[];let c=!1;if(!It(n)){const u=f=>{c=!0;const[p,g]=xA(f,t,!0);Rs(o,p),g&&a.push(...g)};!e&&t.mixins.length&&t.mixins.forEach(u),n.extends&&u(n.extends),n.mixins&&n.mixins.forEach(u)}if(!r&&!c)return we(n)&&s.set(n,ic),ic;if(yt(r))for(let u=0;u<r.length;u++){const f=Ui(r[u]);Sy(f)&&(o[f]=ge)}else if(r)for(const u in r){const f=Ui(u);if(Sy(f)){const p=r[u],g=o[f]=yt(p)||It(p)?{type:p}:Rs({},p),v=g.type;let _=!1,x=!0;if(yt(v))for(let S=0;S<v.length;++S){const C=v[S],T=It(C)&&C.name;if(T==="Boolean"){_=!0;break}else T==="String"&&(x=!1)}else _=It(v)&&v.name==="Boolean";g[0]=_,g[1]=x,(_||ee(g,"default"))&&a.push(f)}}const h=[o,a];return we(n)&&s.set(n,h),h}function Sy(n){return n[0]!=="$"&&!tu(n)}const f_=n=>n[0]==="_"||n==="$stable",p_=n=>yt(n)?n.map(Bn):[Bn(n)],j1=(n,t,e)=>{if(t._n)return t;const s=Jr((...i)=>p_(t(...i)),e);return s._c=!1,s},CA=(n,t,e)=>{const s=n._ctx;for(const i in n){if(f_(i))continue;const r=n[i];if(It(r))t[i]=j1(i,r,s);else if(r!=null){const o=p_(r);t[i]=()=>o}}},TA=(n,t)=>{const e=p_(t);n.slots.default=()=>e},PA=(n,t,e)=>{for(const s in t)(e||!f_(s))&&(n[s]=t[s])},V1=(n,t,e)=>{const s=n.slots=AA();if(n.vnode.shapeFlag&32){const i=t._;i?(PA(s,t,e),e&&Nw(s,"_",i,!0)):CA(t,s)}else t&&TA(n,t)},U1=(n,t,e)=>{const{vnode:s,slots:i}=n;let r=!0,o=ge;if(s.shapeFlag&32){const a=t._;a?e&&a===1?r=!1:PA(i,t,e):(r=!t.$stable,CA(t,i)),o=t}else t&&(TA(n,t),o={default:1});if(r)for(const a in i)!f_(a)&&o[a]==null&&delete i[a]},ri=iT;function z1(n){return W1(n)}function W1(n,t){const e=eg();e.__VUE__=!0;const{insert:s,remove:i,patchProp:r,createElement:o,createText:a,createComment:c,setText:h,setElementText:u,parentNode:f,nextSibling:p,setScopeId:g=jn,insertStaticContent:v}=n,_=(P,k,O,U=null,W=null,q=null,rt=void 0,st=null,tt=!!k.dynamicChildren)=>{if(P===k)return;P&&!Rh(P,k)&&(U=$(P),Vt(P,W,q,!0),P=null),k.patchFlag===-2&&(tt=!1,k.dynamicChildren=null);const{type:K,ref:bt,shapeFlag:ot}=k;switch(K){case cg:x(P,k,O,U);break;case jo:S(P,k,O,U);break;case Lf:P==null&&C(k,O,U,rt);break;case ls:vt(P,k,O,U,W,q,rt,st,tt);break;default:ot&1?I(P,k,O,U,W,q,rt,st,tt):ot&6?At(P,k,O,U,W,q,rt,st,tt):(ot&64||ot&128)&&K.process(P,k,O,U,W,q,rt,st,tt,ht)}bt!=null&&W&&bp(bt,P&&P.ref,q,k||P,!k)},x=(P,k,O,U)=>{if(P==null)s(k.el=a(k.children),O,U);else{const W=k.el=P.el;k.children!==P.children&&h(W,k.children)}},S=(P,k,O,U)=>{P==null?s(k.el=c(k.children||""),O,U):k.el=P.el},C=(P,k,O,U)=>{[P.el,P.anchor]=v(P.children,k,O,U,P.el,P.anchor)},T=({el:P,anchor:k},O,U)=>{let W;for(;P&&P!==k;)W=p(P),s(P,O,U),P=W;s(k,O,U)},R=({el:P,anchor:k})=>{let O;for(;P&&P!==k;)O=p(P),i(P),P=O;i(k)},I=(P,k,O,U,W,q,rt,st,tt)=>{k.type==="svg"?rt="svg":k.type==="math"&&(rt="mathml"),P==null?F(k,O,U,W,q,rt,st,tt):V(P,k,W,q,rt,st,tt)},F=(P,k,O,U,W,q,rt,st)=>{let tt,K;const{props:bt,shapeFlag:ot,transition:gt,dirs:_t}=P;if(tt=P.el=o(P.type,q,bt&&bt.is,bt),ot&8?u(tt,P.children):ot&16&&H(P.children,tt,null,U,W,nm(P,q),rt,st),_t&&ra(P,null,U,"created"),N(tt,P,P.scopeId,rt,U),bt){for(const oe in bt)oe!=="value"&&!tu(oe)&&r(tt,oe,null,bt[oe],q,U);"value"in bt&&r(tt,"value",null,bt.value,q),(K=bt.onVnodeBeforeMount)&&_n(K,U,P)}_t&&ra(P,null,U,"beforeMount");const Ht=q1(W,gt);Ht&&gt.beforeEnter(tt),s(tt,k,O),((K=bt&&bt.onVnodeMounted)||Ht||_t)&&ri(()=>{K&&_n(K,U,P),Ht&&gt.enter(tt),_t&&ra(P,null,U,"mounted")},W)},N=(P,k,O,U,W)=>{if(O&&g(P,O),U)for(let q=0;q<U.length;q++)g(P,U[q]);if(W){let q=W.subTree;if(k===q||DA(q.type)&&(q.ssContent===k||q.ssFallback===k)){const rt=W.vnode;N(P,rt,rt.scopeId,rt.slotScopeIds,W.parent)}}},H=(P,k,O,U,W,q,rt,st,tt=0)=>{for(let K=tt;K<P.length;K++){const bt=P[K]=st?Yr(P[K]):Bn(P[K]);_(null,bt,k,O,U,W,q,rt,st)}},V=(P,k,O,U,W,q,rt)=>{const st=k.el=P.el;let{patchFlag:tt,dynamicChildren:K,dirs:bt}=k;tt|=P.patchFlag&16;const ot=P.props||ge,gt=k.props||ge;let _t;if(O&&oa(O,!1),(_t=gt.onVnodeBeforeUpdate)&&_n(_t,O,k,P),bt&&ra(k,P,O,"beforeUpdate"),O&&oa(O,!0),(ot.innerHTML&&gt.innerHTML==null||ot.textContent&&gt.textContent==null)&&u(st,""),K?Y(P.dynamicChildren,K,st,O,U,nm(k,W),q):rt||Ct(P,k,st,null,O,U,nm(k,W),q,!1),tt>0){if(tt&16)Z(st,ot,gt,O,W);else if(tt&2&&ot.class!==gt.class&&r(st,"class",null,gt.class,W),tt&4&&r(st,"style",ot.style,gt.style,W),tt&8){const Ht=k.dynamicProps;for(let oe=0;oe<Ht.length;oe++){const Qt=Ht[oe],Xe=ot[Qt],Oe=gt[Qt];(Oe!==Xe||Qt==="value")&&r(st,Qt,Xe,Oe,W,O)}}tt&1&&P.children!==k.children&&u(st,k.children)}else!rt&&K==null&&Z(st,ot,gt,O,W);((_t=gt.onVnodeUpdated)||bt)&&ri(()=>{_t&&_n(_t,O,k,P),bt&&ra(k,P,O,"updated")},U)},Y=(P,k,O,U,W,q,rt)=>{for(let st=0;st<k.length;st++){const tt=P[st],K=k[st],bt=tt.el&&(tt.type===ls||!Rh(tt,K)||tt.shapeFlag&70)?f(tt.el):O;_(tt,K,bt,null,U,W,q,rt,!0)}},Z=(P,k,O,U,W)=>{if(k!==O){if(k!==ge)for(const q in k)!tu(q)&&!(q in O)&&r(P,q,k[q],null,W,U);for(const q in O){if(tu(q))continue;const rt=O[q],st=k[q];rt!==st&&q!=="value"&&r(P,q,st,rt,W,U)}"value"in O&&r(P,"value",k.value,O.value,W)}},vt=(P,k,O,U,W,q,rt,st,tt)=>{const K=k.el=P?P.el:a(""),bt=k.anchor=P?P.anchor:a("");let{patchFlag:ot,dynamicChildren:gt,slotScopeIds:_t}=k;_t&&(st=st?st.concat(_t):_t),P==null?(s(K,O,U),s(bt,O,U),H(k.children||[],O,bt,W,q,rt,st,tt)):ot>0&&ot&64&&gt&&P.dynamicChildren?(Y(P.dynamicChildren,gt,O,W,q,rt,st),(k.key!=null||W&&k===W.subTree)&&RA(P,k,!0)):Ct(P,k,O,bt,W,q,rt,st,tt)},At=(P,k,O,U,W,q,rt,st,tt)=>{k.slotScopeIds=st,P==null?k.shapeFlag&512?W.ctx.activate(k,O,U,rt,tt):St(k,O,U,W,q,rt,tt):fe(P,k,tt)},St=(P,k,O,U,W,q,rt)=>{const st=P.component=uT(P,U,W);if(pA(P)&&(st.ctx.renderer=ht),dT(st,!1,rt),st.asyncDep){if(W&&W.registerDep(st,Q,rt),!P.el){const tt=st.subTree=Te(jo);S(null,tt,k,O)}}else Q(st,P,k,O,W,q,rt)},fe=(P,k,O)=>{const U=k.component=P.component;if(eT(P,k,O))if(U.asyncDep&&!U.asyncResolved){X(U,k,O);return}else U.next=k,U.update();else k.el=P.el,U.vnode=k},Q=(P,k,O,U,W,q,rt)=>{const st=()=>{if(P.isMounted){let{next:ot,bu:gt,u:_t,parent:Ht,vnode:oe}=P;{const ks=kA(P);if(ks){ot&&(ot.el=oe.el,X(P,ot,rt)),ks.asyncDep.then(()=>{P.isUnmounted||st()});return}}let Qt=ot,Xe;oa(P,!1),ot?(ot.el=oe.el,X(P,ot,rt)):ot=oe,gt&&kf(gt),(Xe=ot.props&&ot.props.onVnodeBeforeUpdate)&&_n(Xe,Ht,ot,oe),oa(P,!0);const Oe=Cy(P),cs=P.subTree;P.subTree=Oe,_(cs,Oe,f(cs.el),$(cs),P,W,q),ot.el=Oe.el,Qt===null&&sT(P,Oe.el),_t&&ri(_t,W),(Xe=ot.props&&ot.props.onVnodeUpdated)&&ri(()=>_n(Xe,Ht,ot,oe),W)}else{let ot;const{el:gt,props:_t}=k,{bm:Ht,m:oe,parent:Qt,root:Xe,type:Oe}=P,cs=iu(k);oa(P,!1),Ht&&kf(Ht),!cs&&(ot=_t&&_t.onVnodeBeforeMount)&&_n(ot,Qt,k),oa(P,!0);{Xe.ce&&Xe.ce._injectChildStyle(Oe);const ks=P.subTree=Cy(P);_(null,ks,O,U,P,W,q),k.el=ks.el}if(oe&&ri(oe,W),!cs&&(ot=_t&&_t.onVnodeMounted)){const ks=k;ri(()=>_n(ot,Qt,ks),W)}(k.shapeFlag&256||Qt&&iu(Qt.vnode)&&Qt.vnode.shapeFlag&256)&&P.a&&ri(P.a,W),P.isMounted=!0,k=O=U=null}};P.scope.on();const tt=P.effect=new zw(st);P.scope.off();const K=P.update=tt.run.bind(tt),bt=P.job=tt.runIfDirty.bind(tt);bt.i=P,bt.id=P.uid,tt.scheduler=()=>u_(bt),oa(P,!0),K()},X=(P,k,O)=>{k.component=P;const U=P.vnode.props;P.vnode=k,P.next=null,B1(P,k.props,U,O),U1(P,k.children,O),Or(),_y(P),Nr()},Ct=(P,k,O,U,W,q,rt,st,tt=!1)=>{const K=P&&P.children,bt=P?P.shapeFlag:0,ot=k.children,{patchFlag:gt,shapeFlag:_t}=k;if(gt>0){if(gt&128){z(K,ot,O,U,W,q,rt,st,tt);return}else if(gt&256){Le(K,ot,O,U,W,q,rt,st,tt);return}}_t&8?(bt&16&&Wt(K,W,q),ot!==K&&u(O,ot)):bt&16?_t&16?z(K,ot,O,U,W,q,rt,st,tt):Wt(K,W,q,!0):(bt&8&&u(O,""),_t&16&&H(ot,O,U,W,q,rt,st,tt))},Le=(P,k,O,U,W,q,rt,st,tt)=>{P=P||ic,k=k||ic;const K=P.length,bt=k.length,ot=Math.min(K,bt);let gt;for(gt=0;gt<ot;gt++){const _t=k[gt]=tt?Yr(k[gt]):Bn(k[gt]);_(P[gt],_t,O,null,W,q,rt,st,tt)}K>bt?Wt(P,W,q,!0,!1,ot):H(k,O,U,W,q,rt,st,tt,ot)},z=(P,k,O,U,W,q,rt,st,tt)=>{let K=0;const bt=k.length;let ot=P.length-1,gt=bt-1;for(;K<=ot&&K<=gt;){const _t=P[K],Ht=k[K]=tt?Yr(k[K]):Bn(k[K]);if(Rh(_t,Ht))_(_t,Ht,O,null,W,q,rt,st,tt);else break;K++}for(;K<=ot&&K<=gt;){const _t=P[ot],Ht=k[gt]=tt?Yr(k[gt]):Bn(k[gt]);if(Rh(_t,Ht))_(_t,Ht,O,null,W,q,rt,st,tt);else break;ot--,gt--}if(K>ot){if(K<=gt){const _t=gt+1,Ht=_t<bt?k[_t].el:U;for(;K<=gt;)_(null,k[K]=tt?Yr(k[K]):Bn(k[K]),O,Ht,W,q,rt,st,tt),K++}}else if(K>gt)for(;K<=ot;)Vt(P[K],W,q,!0),K++;else{const _t=K,Ht=K,oe=new Map;for(K=Ht;K<=gt;K++){const Is=k[K]=tt?Yr(k[K]):Bn(k[K]);Is.key!=null&&oe.set(Is.key,K)}let Qt,Xe=0;const Oe=gt-Ht+1;let cs=!1,ks=0;const Go=new Array(Oe);for(K=0;K<Oe;K++)Go[K]=0;for(K=_t;K<=ot;K++){const Is=P[K];if(Xe>=Oe){Vt(Is,W,q,!0);continue}let xi;if(Is.key!=null)xi=oe.get(Is.key);else for(Qt=Ht;Qt<=gt;Qt++)if(Go[Qt-Ht]===0&&Rh(Is,k[Qt])){xi=Qt;break}xi===void 0?Vt(Is,W,q,!0):(Go[xi-Ht]=K+1,xi>=ks?ks=xi:cs=!0,_(Is,k[xi],O,null,W,q,rt,st,tt),Xe++)}const Cl=cs?G1(Go):ic;for(Qt=Cl.length-1,K=Oe-1;K>=0;K--){const Is=Ht+K,xi=k[Is],Zd=Is+1<bt?k[Is+1].el:U;Go[K]===0?_(null,xi,O,Zd,W,q,rt,st,tt):cs&&(Qt<0||K!==Cl[Qt]?Ee(xi,O,Zd,2):Qt--)}}},Ee=(P,k,O,U,W=null)=>{const{el:q,type:rt,transition:st,children:tt,shapeFlag:K}=P;if(K&6){Ee(P.component.subTree,k,O,U);return}if(K&128){P.suspense.move(k,O,U);return}if(K&64){rt.move(P,k,O,ht);return}if(rt===ls){s(q,k,O);for(let ot=0;ot<tt.length;ot++)Ee(tt[ot],k,O,U);s(P.anchor,k,O);return}if(rt===Lf){T(P,k,O);return}if(U!==2&&K&1&&st)if(U===0)st.beforeEnter(q),s(q,k,O),ri(()=>st.enter(q),W);else{const{leave:ot,delayLeave:gt,afterLeave:_t}=st,Ht=()=>{P.ctx.isUnmounted?i(q):s(q,k,O)},oe=()=>{ot(q,()=>{Ht(),_t&&_t()})};gt?gt(q,Ht,oe):oe()}else s(q,k,O)},Vt=(P,k,O,U=!1,W=!1)=>{const{type:q,props:rt,ref:st,children:tt,dynamicChildren:K,shapeFlag:bt,patchFlag:ot,dirs:gt,cacheIndex:_t}=P;if(ot===-2&&(W=!1),st!=null&&(Or(),bp(st,null,O,P,!0),Nr()),_t!=null&&(k.renderCache[_t]=void 0),bt&256){k.ctx.deactivate(P);return}const Ht=bt&1&&gt,oe=!iu(P);let Qt;if(oe&&(Qt=rt&&rt.onVnodeBeforeUnmount)&&_n(Qt,k,P),bt&6)Ge(P.component,O,U);else{if(bt&128){P.suspense.unmount(O,U);return}Ht&&ra(P,null,k,"beforeUnmount"),bt&64?P.type.remove(P,k,O,ht,U):K&&!K.hasOnce&&(q!==ls||ot>0&&ot&64)?Wt(K,k,O,!1,!0):(q===ls&&ot&384||!W&&bt&16)&&Wt(tt,k,O),U&&Kt(P)}(oe&&(Qt=rt&&rt.onVnodeUnmounted)||Ht)&&ri(()=>{Qt&&_n(Qt,k,P),Ht&&ra(P,null,k,"unmounted")},O)},Kt=P=>{const{type:k,el:O,anchor:U,transition:W}=P;if(k===ls){Pe(O,U);return}if(k===Lf){R(P);return}const q=()=>{i(O),W&&!W.persisted&&W.afterLeave&&W.afterLeave()};if(P.shapeFlag&1&&W&&!W.persisted){const{leave:rt,delayLeave:st}=W,tt=()=>rt(O,q);st?st(P.el,q,tt):tt()}else q()},Pe=(P,k)=>{let O;for(;P!==k;)O=p(P),i(P),P=O;i(k)},Ge=(P,k,O)=>{const{bum:U,scope:W,job:q,subTree:rt,um:st,m:tt,a:K,parent:bt,slots:{__:ot}}=P;xy(tt),xy(K),U&&kf(U),bt&&yt(ot)&&ot.forEach(gt=>{bt.renderCache[gt]=void 0}),W.stop(),q&&(q.flags|=8,Vt(rt,P,k,O)),st&&ri(st,k),ri(()=>{P.isUnmounted=!0},k),k&&k.pendingBranch&&!k.isUnmounted&&P.asyncDep&&!P.asyncResolved&&P.suspenseId===k.pendingId&&(k.deps--,k.deps===0&&k.resolve())},Wt=(P,k,O,U=!1,W=!1,q=0)=>{for(let rt=q;rt<P.length;rt++)Vt(P[rt],k,O,U,W)},$=P=>{if(P.shapeFlag&6)return $(P.component.subTree);if(P.shapeFlag&128)return P.suspense.next();const k=p(P.anchor||P.el),O=k&&k[f1];return O?p(O):k};let j=!1;const it=(P,k,O)=>{P==null?k._vnode&&Vt(k._vnode,null,null,!0):_(k._vnode||null,P,k,null,null,null,O),k._vnode=P,j||(j=!0,_y(),hA(),j=!1)},ht={p:_,um:Vt,m:Ee,r:Kt,mt:St,mc:H,pc:Ct,pbc:Y,n:$,o:n};return{render:it,hydrate:void 0,createApp:N1(it)}}function nm({type:n,props:t},e){return e==="svg"&&n==="foreignObject"||e==="mathml"&&n==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:e}function oa({effect:n,job:t},e){e?(n.flags|=32,t.flags|=4):(n.flags&=-33,t.flags&=-5)}function q1(n,t){return(!n||n&&!n.pendingBranch)&&t&&!t.persisted}function RA(n,t,e=!1){const s=n.children,i=t.children;if(yt(s)&&yt(i))for(let r=0;r<s.length;r++){const o=s[r];let a=i[r];a.shapeFlag&1&&!a.dynamicChildren&&((a.patchFlag<=0||a.patchFlag===32)&&(a=i[r]=Yr(i[r]),a.el=o.el),!e&&a.patchFlag!==-2&&RA(o,a)),a.type===cg&&(a.el=o.el),a.type===jo&&!a.el&&(a.el=o.el)}}function G1(n){const t=n.slice(),e=[0];let s,i,r,o,a;const c=n.length;for(s=0;s<c;s++){const h=n[s];if(h!==0){if(i=e[e.length-1],n[i]<h){t[s]=i,e.push(s);continue}for(r=0,o=e.length-1;r<o;)a=r+o>>1,n[e[a]]<h?r=a+1:o=a;h<n[e[r]]&&(r>0&&(t[s]=e[r-1]),e[r]=s)}}for(r=e.length,o=e[r-1];r-- >0;)e[r]=o,o=t[o];return e}function kA(n){const t=n.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:kA(t)}function xy(n){if(n)for(let t=0;t<n.length;t++)n[t].flags|=8}const X1=Symbol.for("v-scx"),K1=()=>hn(X1);function oc(n,t,e){return IA(n,t,e)}function IA(n,t,e=ge){const{immediate:s,deep:i,flush:r,once:o}=e,a=Rs({},e),c=t&&s||!t&&r!=="post";let h;if(fu){if(r==="sync"){const g=K1();h=g.__watcherHandles||(g.__watcherHandles=[])}else if(!c){const g=()=>{};return g.stop=jn,g.resume=jn,g.pause=jn,g}}const u=_s;a.call=(g,v,_)=>Un(g,u,v,_);let f=!1;r==="post"?a.scheduler=g=>{ri(g,u&&u.suspense)}:r!=="sync"&&(f=!0,a.scheduler=(g,v)=>{v?g():u_(g)}),a.augmentJob=g=>{t&&(g.flags|=4),f&&(g.flags|=2,u&&(g.id=u.uid,g.i=u))};const p=c1(n,t,a);return fu&&(h?h.push(p):c&&p()),p}function Y1(n,t,e){const s=this.proxy,i=qe(n)?n.includes(".")?LA(s,n):()=>s[n]:n.bind(s,s);let r;It(t)?r=t:(r=t.handler,e=t);const o=Wd(this),a=IA(i,r.bind(s),e);return o(),a}function LA(n,t){const e=t.split(".");return()=>{let s=n;for(let i=0;i<e.length&&s;i++)s=s[e[i]];return s}}const Q1=(n,t)=>t==="modelValue"||t==="model-value"?n.modelModifiers:n[`${t}Modifiers`]||n[`${Ui(t)}Modifiers`]||n[`${El(t)}Modifiers`];function J1(n,t,...e){if(n.isUnmounted)return;const s=n.vnode.props||ge;let i=e;const r=t.startsWith("update:"),o=r&&Q1(s,t.slice(7));o&&(o.trim&&(i=e.map(u=>qe(u)?u.trim():u)),o.number&&(i=e.map(vm)));let a,c=s[a=Jg(t)]||s[a=Jg(Ui(t))];!c&&r&&(c=s[a=Jg(El(t))]),c&&Un(c,n,6,i);const h=s[a+"Once"];if(h){if(!n.emitted)n.emitted={};else if(n.emitted[a])return;n.emitted[a]=!0,Un(h,n,6,i)}}function MA(n,t,e=!1){const s=t.emitsCache,i=s.get(n);if(i!==void 0)return i;const r=n.emits;let o={},a=!1;if(!It(n)){const c=h=>{const u=MA(h,t,!0);u&&(a=!0,Rs(o,u))};!e&&t.mixins.length&&t.mixins.forEach(c),n.extends&&c(n.extends),n.mixins&&n.mixins.forEach(c)}return!r&&!a?(we(n)&&s.set(n,null),null):(yt(r)?r.forEach(c=>o[c]=null):Rs(o,r),we(n)&&s.set(n,o),o)}function lg(n,t){return!n||!Qp(t)?!1:(t=t.slice(2).replace(/Once$/,""),ee(n,t[0].toLowerCase()+t.slice(1))||ee(n,El(t))||ee(n,t))}function Cy(n){const{type:t,vnode:e,proxy:s,withProxy:i,propsOptions:[r],slots:o,attrs:a,emit:c,render:h,renderCache:u,props:f,data:p,setupState:g,ctx:v,inheritAttrs:_}=n,x=mp(n);let S,C;try{if(e.shapeFlag&4){const R=i||s,I=R;S=Bn(h.call(I,R,u,f,g,p,v)),C=a}else{const R=t;S=Bn(R.length>1?R(f,{attrs:a,slots:o,emit:c}):R(f,null)),C=t.props?a:Z1(a)}}catch(R){ru.length=0,rg(R,n,1),S=Te(jo)}let T=S;if(C&&_!==!1){const R=Object.keys(C),{shapeFlag:I}=T;R.length&&I&7&&(r&&R.some(Zb)&&(C=tT(C,r)),T=bh(T,C,!1,!0))}return e.dirs&&(T=bh(T,null,!1,!0),T.dirs=T.dirs?T.dirs.concat(e.dirs):e.dirs),e.transition&&d_(T,e.transition),S=T,mp(x),S}const Z1=n=>{let t;for(const e in n)(e==="class"||e==="style"||Qp(e))&&((t||(t={}))[e]=n[e]);return t},tT=(n,t)=>{const e={};for(const s in n)(!Zb(s)||!(s.slice(9)in t))&&(e[s]=n[s]);return e};function eT(n,t,e){const{props:s,children:i,component:r}=n,{props:o,children:a,patchFlag:c}=t,h=r.emitsOptions;if(t.dirs||t.transition)return!0;if(e&&c>=0){if(c&1024)return!0;if(c&16)return s?Ty(s,o,h):!!o;if(c&8){const u=t.dynamicProps;for(let f=0;f<u.length;f++){const p=u[f];if(o[p]!==s[p]&&!lg(h,p))return!0}}}else return(i||a)&&(!a||!a.$stable)?!0:s===o?!1:s?o?Ty(s,o,h):!0:!!o;return!1}function Ty(n,t,e){const s=Object.keys(t);if(s.length!==Object.keys(n).length)return!0;for(let i=0;i<s.length;i++){const r=s[i];if(t[r]!==n[r]&&!lg(e,r))return!0}return!1}function sT({vnode:n,parent:t},e){for(;t;){const s=t.subTree;if(s.suspense&&s.suspense.activeBranch===n&&(s.el=n.el),s===n)(n=t.vnode).el=e,t=t.parent;else break}}const DA=n=>n.__isSuspense;function iT(n,t){t&&t.pendingBranch?yt(n)?t.effects.push(...n):t.effects.push(n):d1(n)}const ls=Symbol.for("v-fgt"),cg=Symbol.for("v-txt"),jo=Symbol.for("v-cmt"),Lf=Symbol.for("v-stc"),ru=[];let Ei=null;function Nt(n=!1){ru.push(Ei=n?null:[])}function nT(){ru.pop(),Ei=ru[ru.length-1]||null}let du=1;function Py(n,t=!1){du+=n,n<0&&Ei&&t&&(Ei.hasOnce=!0)}function OA(n){return n.dynamicChildren=du>0?Ei||ic:null,nT(),du>0&&Ei&&Ei.push(n),n}function Ft(n,t,e,s,i,r){return OA(M(n,t,e,s,i,r,!0))}function rT(n,t,e,s,i){return OA(Te(n,t,e,s,i,!0))}function vp(n){return n?n.__v_isVNode===!0:!1}function Rh(n,t){return n.type===t.type&&n.key===t.key}const NA=({key:n})=>n??null,Mf=({ref:n,ref_key:t,ref_for:e})=>(typeof n=="number"&&(n=""+n),n!=null?qe(n)||Be(n)||It(n)?{i:ti,r:n,k:t,f:!!e}:n:null);function M(n,t=null,e=null,s=0,i=null,r=n===ls?0:1,o=!1,a=!1){const c={__v_isVNode:!0,__v_skip:!0,type:n,props:t,key:t&&NA(t),ref:t&&Mf(t),scopeId:dA,slotScopeIds:null,children:e,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:r,patchFlag:s,dynamicProps:i,dynamicChildren:null,appContext:null,ctx:ti};return a?(g_(c,e),r&128&&n.normalize(c)):e&&(c.shapeFlag|=qe(e)?8:16),du>0&&!o&&Ei&&(c.patchFlag>0||r&6)&&c.patchFlag!==32&&Ei.push(c),c}const Te=oT;function oT(n,t=null,e=null,s=0,i=null,r=!1){if((!n||n===T1)&&(n=jo),vp(n)){const a=bh(n,t,!0);return e&&g_(a,e),du>0&&!r&&Ei&&(a.shapeFlag&6?Ei[Ei.indexOf(n)]=a:Ei.push(a)),a.patchFlag=-2,a}if(bT(n)&&(n=n.__vccOpts),t){t=aT(t);let{class:a,style:c}=t;a&&!qe(a)&&(t.class=Vd(a)),we(c)&&(l_(c)&&!yt(c)&&(c=Rs({},c)),t.style=sg(c))}const o=qe(n)?1:DA(n)?128:p1(n)?64:we(n)?4:It(n)?2:0;return M(n,t,e,s,i,o,r,!0)}function aT(n){return n?l_(n)||EA(n)?Rs({},n):n:null}function bh(n,t,e=!1,s=!1){const{props:i,ref:r,patchFlag:o,children:a,transition:c}=n,h=t?lT(i||{},t):i,u={__v_isVNode:!0,__v_skip:!0,type:n.type,props:h,key:h&&NA(h),ref:t&&t.ref?e&&r?yt(r)?r.concat(Mf(t)):[r,Mf(t)]:Mf(t):r,scopeId:n.scopeId,slotScopeIds:n.slotScopeIds,children:a,target:n.target,targetStart:n.targetStart,targetAnchor:n.targetAnchor,staticCount:n.staticCount,shapeFlag:n.shapeFlag,patchFlag:t&&n.type!==ls?o===-1?16:o|16:o,dynamicProps:n.dynamicProps,dynamicChildren:n.dynamicChildren,appContext:n.appContext,dirs:n.dirs,transition:c,component:n.component,suspense:n.suspense,ssContent:n.ssContent&&bh(n.ssContent),ssFallback:n.ssFallback&&bh(n.ssFallback),el:n.el,anchor:n.anchor,ctx:n.ctx,ce:n.ce};return c&&s&&d_(u,c.clone(u)),u}function an(n=" ",t=0){return Te(cg,null,n,t)}function Bo(n,t){const e=Te(Lf,null,n);return e.staticCount=t,e}function on(n="",t=!1){return t?(Nt(),rT(jo,null,n)):Te(jo,null,n)}function Bn(n){return n==null||typeof n=="boolean"?Te(jo):yt(n)?Te(ls,null,n.slice()):vp(n)?Yr(n):Te(cg,null,String(n))}function Yr(n){return n.el===null&&n.patchFlag!==-1||n.memo?n:bh(n)}function g_(n,t){let e=0;const{shapeFlag:s}=n;if(t==null)t=null;else if(yt(t))e=16;else if(typeof t=="object")if(s&65){const i=t.default;i&&(i._c&&(i._d=!1),g_(n,i()),i._c&&(i._d=!0));return}else{e=32;const i=t._;!i&&!EA(t)?t._ctx=ti:i===3&&ti&&(ti.slots._===1?t._=1:(t._=2,n.patchFlag|=1024))}else It(t)?(t={default:t,_ctx:ti},e=32):(t=String(t),s&64?(e=16,t=[an(t)]):e=8);n.children=t,n.shapeFlag|=e}function lT(...n){const t={};for(let e=0;e<n.length;e++){const s=n[e];for(const i in s)if(i==="class")t.class!==s.class&&(t.class=Vd([t.class,s.class]));else if(i==="style")t.style=sg([t.style,s.style]);else if(Qp(i)){const r=t[i],o=s[i];o&&r!==o&&!(yt(r)&&r.includes(o))&&(t[i]=r?[].concat(r,o):o)}else i!==""&&(t[i]=s[i])}return t}function _n(n,t,e,s=null){Un(n,t,7,[e,s])}const cT=yA();let hT=0;function uT(n,t,e){const s=n.type,i=(t?t.appContext:n.appContext)||cT,r={uid:hT++,vnode:n,type:s,parent:t,appContext:i,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new jw(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(i.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:xA(s,i),emitsOptions:MA(s,i),emit:null,emitted:null,propsDefaults:ge,inheritAttrs:s.inheritAttrs,ctx:ge,data:ge,props:ge,attrs:ge,slots:ge,refs:ge,setupState:ge,setupContext:null,suspense:e,suspenseId:e?e.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return r.ctx={_:r},r.root=t?t.root:r,r.emit=J1.bind(null,r),n.ce&&n.ce(r),r}let _s=null,yp,Tm;{const n=eg(),t=(e,s)=>{let i;return(i=n[e])||(i=n[e]=[]),i.push(s),r=>{i.length>1?i.forEach(o=>o(r)):i[0](r)}};yp=t("__VUE_INSTANCE_SETTERS__",e=>_s=e),Tm=t("__VUE_SSR_SETTERS__",e=>fu=e)}const Wd=n=>{const t=_s;return yp(n),n.scope.on(),()=>{n.scope.off(),yp(t)}},Ry=()=>{_s&&_s.scope.off(),yp(null)};function FA(n){return n.vnode.shapeFlag&4}let fu=!1;function dT(n,t=!1,e=!1){t&&Tm(t);const{props:s,children:i}=n.vnode,r=FA(n);$1(n,s,r,t),V1(n,i,e||t);const o=r?fT(n,t):void 0;return t&&Tm(!1),o}function fT(n,t){const e=n.type;n.accessCache=Object.create(null),n.proxy=new Proxy(n.ctx,R1);const{setup:s}=e;if(s){Or();const i=n.setupContext=s.length>1?gT(n):null,r=Wd(n),o=zd(s,n,0,[n.props,i]),a=Mw(o);if(Nr(),r(),(a||n.sp)&&!iu(n)&&fA(n),a){if(o.then(Ry,Ry),t)return o.then(c=>{ky(n,c)}).catch(c=>{rg(c,n,0)});n.asyncDep=o}else ky(n,o)}else $A(n)}function ky(n,t,e){It(t)?n.type.__ssrInlineRender?n.ssrRender=t:n.render=t:we(t)&&(n.setupState=aA(t)),$A(n)}function $A(n,t,e){const s=n.type;n.render||(n.render=s.render||jn);{const i=Wd(n);Or();try{k1(n)}finally{Nr(),i()}}}const pT={get(n,t){return Ps(n,"get",""),n[t]}};function gT(n){const t=e=>{n.exposed=e||{}};return{attrs:new Proxy(n.attrs,pT),slots:n.slots,emit:n.emit,expose:t}}function hg(n){return n.exposed?n.exposeProxy||(n.exposeProxy=new Proxy(aA(c_(n.exposed)),{get(t,e){if(e in t)return t[e];if(e in nu)return nu[e](n)},has(t,e){return e in t||e in nu}})):n.proxy}function mT(n,t=!0){return It(n)?n.displayName||n.name:n.name||t&&n.__name}function bT(n){return It(n)&&"__vccOpts"in n}const qs=(n,t)=>a1(n,t,fu);function BA(n,t,e){const s=arguments.length;return s===2?we(t)&&!yt(t)?vp(t)?Te(n,null,[t]):Te(n,t):Te(n,null,t):(s>3?e=Array.prototype.slice.call(arguments,2):s===3&&vp(e)&&(e=[e]),Te(n,t,e))}const _T="3.5.14";/**
* @vue/runtime-dom v3.5.14
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let Pm;const Iy=typeof window<"u"&&window.trustedTypes;if(Iy)try{Pm=Iy.createPolicy("vue",{createHTML:n=>n})}catch{}const HA=Pm?n=>Pm.createHTML(n):n=>n,vT="http://www.w3.org/2000/svg",yT="http://www.w3.org/1998/Math/MathML",Zn=typeof document<"u"?document:null,Ly=Zn&&Zn.createElement("template"),wT={insert:(n,t,e)=>{t.insertBefore(n,e||null)},remove:n=>{const t=n.parentNode;t&&t.removeChild(n)},createElement:(n,t,e,s)=>{const i=t==="svg"?Zn.createElementNS(vT,n):t==="mathml"?Zn.createElementNS(yT,n):e?Zn.createElement(n,{is:e}):Zn.createElement(n);return n==="select"&&s&&s.multiple!=null&&i.setAttribute("multiple",s.multiple),i},createText:n=>Zn.createTextNode(n),createComment:n=>Zn.createComment(n),setText:(n,t)=>{n.nodeValue=t},setElementText:(n,t)=>{n.textContent=t},parentNode:n=>n.parentNode,nextSibling:n=>n.nextSibling,querySelector:n=>Zn.querySelector(n),setScopeId(n,t){n.setAttribute(t,"")},insertStaticContent(n,t,e,s,i,r){const o=e?e.previousSibling:t.lastChild;if(i&&(i===r||i.nextSibling))for(;t.insertBefore(i.cloneNode(!0),e),!(i===r||!(i=i.nextSibling)););else{Ly.innerHTML=HA(s==="svg"?`<svg>${n}</svg>`:s==="mathml"?`<math>${n}</math>`:n);const a=Ly.content;if(s==="svg"||s==="mathml"){const c=a.firstChild;for(;c.firstChild;)a.appendChild(c.firstChild);a.removeChild(c)}t.insertBefore(a,e)}return[o?o.nextSibling:t.firstChild,e?e.previousSibling:t.lastChild]}},AT=Symbol("_vtc");function ET(n,t,e){const s=n[AT];s&&(t=(t?[t,...s]:[...s]).join(" ")),t==null?n.removeAttribute("class"):e?n.setAttribute("class",t):n.className=t}const wp=Symbol("_vod"),jA=Symbol("_vsh"),ST={beforeMount(n,{value:t},{transition:e}){n[wp]=n.style.display==="none"?"":n.style.display,e&&t?e.beforeEnter(n):kh(n,t)},mounted(n,{value:t},{transition:e}){e&&t&&e.enter(n)},updated(n,{value:t,oldValue:e},{transition:s}){!t!=!e&&(s?t?(s.beforeEnter(n),kh(n,!0),s.enter(n)):s.leave(n,()=>{kh(n,!1)}):kh(n,t))},beforeUnmount(n,{value:t}){kh(n,t)}};function kh(n,t){n.style.display=t?n[wp]:"none",n[jA]=!t}const xT=Symbol(""),CT=/(^|;)\s*display\s*:/;function TT(n,t,e){const s=n.style,i=qe(e);let r=!1;if(e&&!i){if(t)if(qe(t))for(const o of t.split(";")){const a=o.slice(0,o.indexOf(":")).trim();e[a]==null&&Df(s,a,"")}else for(const o in t)e[o]==null&&Df(s,o,"");for(const o in e)o==="display"&&(r=!0),Df(s,o,e[o])}else if(i){if(t!==e){const o=s[xT];o&&(e+=";"+o),s.cssText=e,r=CT.test(e)}}else t&&n.removeAttribute("style");wp in n&&(n[wp]=r?s.display:"",n[jA]&&(s.display="none"))}const My=/\s*!important$/;function Df(n,t,e){if(yt(e))e.forEach(s=>Df(n,t,s));else if(e==null&&(e=""),t.startsWith("--"))n.setProperty(t,e);else{const s=PT(n,t);My.test(e)?n.setProperty(El(s),e.replace(My,""),"important"):n[s]=e}}const Dy=["Webkit","Moz","ms"],rm={};function PT(n,t){const e=rm[t];if(e)return e;let s=Ui(t);if(s!=="filter"&&s in n)return rm[t]=s;s=tg(s);for(let i=0;i<Dy.length;i++){const r=Dy[i]+s;if(r in n)return rm[t]=r}return t}const Oy="http://www.w3.org/1999/xlink";function Ny(n,t,e,s,i,r=LC(t)){s&&t.startsWith("xlink:")?e==null?n.removeAttributeNS(Oy,t.slice(6,t.length)):n.setAttributeNS(Oy,t,e):e==null||r&&!Fw(e)?n.removeAttribute(t):n.setAttribute(t,r?"":Vn(e)?String(e):e)}function Fy(n,t,e,s,i){if(t==="innerHTML"||t==="textContent"){e!=null&&(n[t]=t==="innerHTML"?HA(e):e);return}const r=n.tagName;if(t==="value"&&r!=="PROGRESS"&&!r.includes("-")){const a=r==="OPTION"?n.getAttribute("value")||"":n.value,c=e==null?n.type==="checkbox"?"on":"":String(e);(a!==c||!("_value"in n))&&(n.value=c),e==null&&n.removeAttribute(t),n._value=e;return}let o=!1;if(e===""||e==null){const a=typeof n[t];a==="boolean"?e=Fw(e):e==null&&a==="string"?(e="",o=!0):a==="number"&&(e=0,o=!0)}try{n[t]=e}catch{}o&&n.removeAttribute(i||t)}function ua(n,t,e,s){n.addEventListener(t,e,s)}function RT(n,t,e,s){n.removeEventListener(t,e,s)}const $y=Symbol("_vei");function kT(n,t,e,s,i=null){const r=n[$y]||(n[$y]={}),o=r[t];if(s&&o)o.value=s;else{const[a,c]=IT(t);if(s){const h=r[t]=DT(s,i);ua(n,a,h,c)}else o&&(RT(n,a,o,c),r[t]=void 0)}}const By=/(?:Once|Passive|Capture)$/;function IT(n){let t;if(By.test(n)){t={};let s;for(;s=n.match(By);)n=n.slice(0,n.length-s[0].length),t[s[0].toLowerCase()]=!0}return[n[2]===":"?n.slice(3):El(n.slice(2)),t]}let om=0;const LT=Promise.resolve(),MT=()=>om||(LT.then(()=>om=0),om=Date.now());function DT(n,t){const e=s=>{if(!s._vts)s._vts=Date.now();else if(s._vts<=e.attached)return;Un(OT(s,e.value),t,5,[s])};return e.value=n,e.attached=MT(),e}function OT(n,t){if(yt(t)){const e=n.stopImmediatePropagation;return n.stopImmediatePropagation=()=>{e.call(n),n._stopped=!0},t.map(s=>i=>!i._stopped&&s&&s(i))}else return t}const Hy=n=>n.charCodeAt(0)===111&&n.charCodeAt(1)===110&&n.charCodeAt(2)>96&&n.charCodeAt(2)<123,NT=(n,t,e,s,i,r)=>{const o=i==="svg";t==="class"?ET(n,s,o):t==="style"?TT(n,e,s):Qp(t)?Zb(t)||kT(n,t,e,s,r):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):FT(n,t,s,o))?(Fy(n,t,s),!n.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Ny(n,t,s,o,r,t!=="value")):n._isVueCE&&(/[A-Z]/.test(t)||!qe(s))?Fy(n,Ui(t),s,r,t):(t==="true-value"?n._trueValue=s:t==="false-value"&&(n._falseValue=s),Ny(n,t,s,o))};function FT(n,t,e,s){if(s)return!!(t==="innerHTML"||t==="textContent"||t in n&&Hy(t)&&It(e));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="autocorrect"||t==="form"||t==="list"&&n.tagName==="INPUT"||t==="type"&&n.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const i=n.tagName;if(i==="IMG"||i==="VIDEO"||i==="CANVAS"||i==="SOURCE")return!1}return Hy(t)&&qe(e)?!1:t in n}const Ap=n=>{const t=n.props["onUpdate:modelValue"]||!1;return yt(t)?e=>kf(t,e):t};function $T(n){n.target.composing=!0}function jy(n){const t=n.target;t.composing&&(t.composing=!1,t.dispatchEvent(new Event("input")))}const ac=Symbol("_assign"),BT={created(n,{modifiers:{lazy:t,trim:e,number:s}},i){n[ac]=Ap(i);const r=s||i.props&&i.props.type==="number";ua(n,t?"change":"input",o=>{if(o.target.composing)return;let a=n.value;e&&(a=a.trim()),r&&(a=vm(a)),n[ac](a)}),e&&ua(n,"change",()=>{n.value=n.value.trim()}),t||(ua(n,"compositionstart",$T),ua(n,"compositionend",jy),ua(n,"change",jy))},mounted(n,{value:t}){n.value=t??""},beforeUpdate(n,{value:t,oldValue:e,modifiers:{lazy:s,trim:i,number:r}},o){if(n[ac]=Ap(o),n.composing)return;const a=(r||n.type==="number")&&!/^0\d/.test(n.value)?vm(n.value):n.value,c=t??"";a!==c&&(document.activeElement===n&&n.type!=="range"&&(s&&t===e||i&&n.value.trim()===c)||(n.value=c))}},jl={deep:!0,created(n,t,e){n[ac]=Ap(e),ua(n,"change",()=>{const s=n._modelValue,i=HT(n),r=n.checked,o=n[ac];if(yt(s)){const a=$w(s,i),c=a!==-1;if(r&&!c)o(s.concat(i));else if(!r&&c){const h=[...s];h.splice(a,1),o(h)}}else if(Jp(s)){const a=new Set(s);r?a.add(i):a.delete(i),o(a)}else o(VA(n,r))})},mounted:Vy,beforeUpdate(n,t,e){n[ac]=Ap(e),Vy(n,t,e)}};function Vy(n,{value:t,oldValue:e},s){n._modelValue=t;let i;if(yt(t))i=$w(t,s.props.value)>-1;else if(Jp(t))i=t.has(s.props.value);else{if(t===e)return;i=ig(t,VA(n,!0))}n.checked!==i&&(n.checked=i)}function HT(n){return"_value"in n?n._value:n.value}function VA(n,t){const e=t?"_trueValue":"_falseValue";return e in n?n[e]:t}const jT=Rs({patchProp:NT},wT);let Uy;function VT(){return Uy||(Uy=z1(jT))}const UT=(...n)=>{const t=VT().createApp(...n),{mount:e}=t;return t.mount=s=>{const i=WT(s);if(!i)return;const r=t._component;!It(r)&&!r.render&&!r.template&&(r.template=i.innerHTML),i.nodeType===1&&(i.textContent="");const o=e(i,!1,zT(i));return i instanceof Element&&(i.removeAttribute("v-cloak"),i.setAttribute("data-v-app","")),o},t};function zT(n){if(n instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&n instanceof MathMLElement)return"mathml"}function WT(n){return qe(n)?document.querySelector(n):n}/*!
 * pinia v3.0.2
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */let UA;const ug=n=>UA=n,zA=Symbol();function Rm(n){return n&&typeof n=="object"&&Object.prototype.toString.call(n)==="[object Object]"&&typeof n.toJSON!="function"}var ou;(function(n){n.direct="direct",n.patchObject="patch object",n.patchFunction="patch function"})(ou||(ou={}));function qT(){const n=Vw(!0),t=n.run(()=>ve({}));let e=[],s=[];const i=c_({install(r){ug(i),i._a=r,r.provide(zA,i),r.config.globalProperties.$pinia=i,s.forEach(o=>e.push(o)),s=[]},use(r){return this._a?e.push(r):s.push(r),this},_p:e,_a:null,_e:n,_s:new Map,state:t});return i}const WA=()=>{};function zy(n,t,e,s=WA){n.push(t);const i=()=>{const r=n.indexOf(t);r>-1&&(n.splice(r,1),s())};return!e&&Uw()&&DC(i),i}function Vl(n,...t){n.slice().forEach(e=>{e(...t)})}const GT=n=>n(),Wy=Symbol(),am=Symbol();function km(n,t){n instanceof Map&&t instanceof Map?t.forEach((e,s)=>n.set(s,e)):n instanceof Set&&t instanceof Set&&t.forEach(n.add,n);for(const e in t){if(!t.hasOwnProperty(e))continue;const s=t[e],i=n[e];Rm(i)&&Rm(s)&&n.hasOwnProperty(e)&&!Be(s)&&!$o(s)?n[e]=km(i,s):n[e]=s}return n}const XT=Symbol();function KT(n){return!Rm(n)||!Object.prototype.hasOwnProperty.call(n,XT)}const{assign:qr}=Object;function YT(n){return!!(Be(n)&&n.effect)}function QT(n,t,e,s){const{state:i,actions:r,getters:o}=t,a=e.state.value[n];let c;function h(){a||(e.state.value[n]=i?i():{});const u=i1(e.state.value[n]);return qr(u,r,Object.keys(o||{}).reduce((f,p)=>(f[p]=c_(qs(()=>{ug(e);const g=e._s.get(n);return o[p].call(g,g)})),f),{}))}return c=qA(n,h,t,e,s,!0),c}function qA(n,t,e={},s,i,r){let o;const a=qr({actions:{}},e),c={deep:!0};let h,u,f=[],p=[],g;const v=s.state.value[n];!r&&!v&&(s.state.value[n]={}),ve({});let _;function x(H){let V;h=u=!1,typeof H=="function"?(H(s.state.value[n]),V={type:ou.patchFunction,storeId:n,events:g}):(km(s.state.value[n],H),V={type:ou.patchObject,payload:H,storeId:n,events:g});const Y=_=Symbol();h_().then(()=>{_===Y&&(h=!0)}),u=!0,Vl(f,V,s.state.value[n])}const S=r?function(){const{state:V}=e,Y=V?V():{};this.$patch(Z=>{qr(Z,Y)})}:WA;function C(){o.stop(),f=[],p=[],s._s.delete(n)}const T=(H,V="")=>{if(Wy in H)return H[am]=V,H;const Y=function(){ug(s);const Z=Array.from(arguments),vt=[],At=[];function St(X){vt.push(X)}function fe(X){At.push(X)}Vl(p,{args:Z,name:Y[am],store:I,after:St,onError:fe});let Q;try{Q=H.apply(this&&this.$id===n?this:I,Z)}catch(X){throw Vl(At,X),X}return Q instanceof Promise?Q.then(X=>(Vl(vt,X),X)).catch(X=>(Vl(At,X),Promise.reject(X))):(Vl(vt,Q),Q)};return Y[Wy]=!0,Y[am]=V,Y},R={_p:s,$id:n,$onAction:zy.bind(null,p),$patch:x,$reset:S,$subscribe(H,V={}){const Y=zy(f,H,V.detached,()=>Z()),Z=o.run(()=>oc(()=>s.state.value[n],vt=>{(V.flush==="sync"?u:h)&&H({storeId:n,type:ou.direct,events:g},vt)},qr({},c,V)));return Y},$dispose:C},I=Ud(R);s._s.set(n,I);const N=(s._a&&s._a.runWithContext||GT)(()=>s._e.run(()=>(o=Vw()).run(()=>t({action:T}))));for(const H in N){const V=N[H];if(Be(V)&&!YT(V)||$o(V))r||(v&&KT(V)&&(Be(V)?V.value=v[H]:km(V,v[H])),s.state.value[n][H]=V);else if(typeof V=="function"){const Y=T(V,H);N[H]=Y,a.actions[H]=V}}return qr(I,N),qr(Yt(I),N),Object.defineProperty(I,"$state",{get:()=>s.state.value[n],set:H=>{x(V=>{qr(V,H)})}}),s._p.forEach(H=>{qr(I,o.run(()=>H({store:I,app:s._a,pinia:s,options:a})))}),v&&r&&e.hydrate&&e.hydrate(I.$state,v),h=!0,u=!0,I}/*! #__NO_SIDE_EFFECTS__ */function JT(n,t,e){let s;const i=typeof t=="function";s=i?e:t;function r(o,a){const c=F1();return o=o||(c?hn(zA,null):null),o&&ug(o),o=UA,o._s.has(n)||(i?qA(n,t,s,o):QT(n,s,o)),o._s.get(n)}return r.$id=n,r}/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const zl=typeof document<"u";function GA(n){return typeof n=="object"||"displayName"in n||"props"in n||"__vccOpts"in n}function ZT(n){return n.__esModule||n[Symbol.toStringTag]==="Module"||n.default&&GA(n.default)}const te=Object.assign;function lm(n,t){const e={};for(const s in t){const i=t[s];e[s]=un(i)?i.map(n):n(i)}return e}const au=()=>{},un=Array.isArray,XA=/#/g,tP=/&/g,eP=/\//g,sP=/=/g,iP=/\?/g,KA=/\+/g,nP=/%5B/g,rP=/%5D/g,YA=/%5E/g,oP=/%60/g,QA=/%7B/g,aP=/%7C/g,JA=/%7D/g,lP=/%20/g;function m_(n){return encodeURI(""+n).replace(aP,"|").replace(nP,"[").replace(rP,"]")}function cP(n){return m_(n).replace(QA,"{").replace(JA,"}").replace(YA,"^")}function Im(n){return m_(n).replace(KA,"%2B").replace(lP,"+").replace(XA,"%23").replace(tP,"%26").replace(oP,"`").replace(QA,"{").replace(JA,"}").replace(YA,"^")}function hP(n){return Im(n).replace(sP,"%3D")}function uP(n){return m_(n).replace(XA,"%23").replace(iP,"%3F")}function dP(n){return n==null?"":uP(n).replace(eP,"%2F")}function pu(n){try{return decodeURIComponent(""+n)}catch{}return""+n}const fP=/\/$/,pP=n=>n.replace(fP,"");function cm(n,t,e="/"){let s,i={},r="",o="";const a=t.indexOf("#");let c=t.indexOf("?");return a<c&&a>=0&&(c=-1),c>-1&&(s=t.slice(0,c),r=t.slice(c+1,a>-1?a:t.length),i=n(r)),a>-1&&(s=s||t.slice(0,a),o=t.slice(a,t.length)),s=_P(s??t,e),{fullPath:s+(r&&"?")+r+o,path:s,query:i,hash:pu(o)}}function gP(n,t){const e=t.query?n(t.query):"";return t.path+(e&&"?")+e+(t.hash||"")}function qy(n,t){return!t||!n.toLowerCase().startsWith(t.toLowerCase())?n:n.slice(t.length)||"/"}function mP(n,t,e){const s=t.matched.length-1,i=e.matched.length-1;return s>-1&&s===i&&_h(t.matched[s],e.matched[i])&&ZA(t.params,e.params)&&n(t.query)===n(e.query)&&t.hash===e.hash}function _h(n,t){return(n.aliasOf||n)===(t.aliasOf||t)}function ZA(n,t){if(Object.keys(n).length!==Object.keys(t).length)return!1;for(const e in n)if(!bP(n[e],t[e]))return!1;return!0}function bP(n,t){return un(n)?Gy(n,t):un(t)?Gy(t,n):n===t}function Gy(n,t){return un(t)?n.length===t.length&&n.every((e,s)=>e===t[s]):n.length===1&&n[0]===t}function _P(n,t){if(n.startsWith("/"))return n;if(!n)return t;const e=t.split("/"),s=n.split("/"),i=s[s.length-1];(i===".."||i===".")&&s.push("");let r=e.length-1,o,a;for(o=0;o<s.length;o++)if(a=s[o],a!==".")if(a==="..")r>1&&r--;else break;return e.slice(0,r).join("/")+"/"+s.slice(o).join("/")}const zr={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var gu;(function(n){n.pop="pop",n.push="push"})(gu||(gu={}));var lu;(function(n){n.back="back",n.forward="forward",n.unknown=""})(lu||(lu={}));function vP(n){if(!n)if(zl){const t=document.querySelector("base");n=t&&t.getAttribute("href")||"/",n=n.replace(/^\w+:\/\/[^\/]+/,"")}else n="/";return n[0]!=="/"&&n[0]!=="#"&&(n="/"+n),pP(n)}const yP=/^[^#]+#/;function wP(n,t){return n.replace(yP,"#")+t}function AP(n,t){const e=document.documentElement.getBoundingClientRect(),s=n.getBoundingClientRect();return{behavior:t.behavior,left:s.left-e.left-(t.left||0),top:s.top-e.top-(t.top||0)}}const dg=()=>({left:window.scrollX,top:window.scrollY});function EP(n){let t;if("el"in n){const e=n.el,s=typeof e=="string"&&e.startsWith("#"),i=typeof e=="string"?s?document.getElementById(e.slice(1)):document.querySelector(e):e;if(!i)return;t=AP(i,n)}else t=n;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function Xy(n,t){return(history.state?history.state.position-t:-1)+n}const Lm=new Map;function SP(n,t){Lm.set(n,t)}function xP(n){const t=Lm.get(n);return Lm.delete(n),t}let CP=()=>location.protocol+"//"+location.host;function t0(n,t){const{pathname:e,search:s,hash:i}=t,r=n.indexOf("#");if(r>-1){let a=i.includes(n.slice(r))?n.slice(r).length:1,c=i.slice(a);return c[0]!=="/"&&(c="/"+c),qy(c,"")}return qy(e,n)+s+i}function TP(n,t,e,s){let i=[],r=[],o=null;const a=({state:p})=>{const g=t0(n,location),v=e.value,_=t.value;let x=0;if(p){if(e.value=g,t.value=p,o&&o===v){o=null;return}x=_?p.position-_.position:0}else s(g);i.forEach(S=>{S(e.value,v,{delta:x,type:gu.pop,direction:x?x>0?lu.forward:lu.back:lu.unknown})})};function c(){o=e.value}function h(p){i.push(p);const g=()=>{const v=i.indexOf(p);v>-1&&i.splice(v,1)};return r.push(g),g}function u(){const{history:p}=window;p.state&&p.replaceState(te({},p.state,{scroll:dg()}),"")}function f(){for(const p of r)p();r=[],window.removeEventListener("popstate",a),window.removeEventListener("beforeunload",u)}return window.addEventListener("popstate",a),window.addEventListener("beforeunload",u,{passive:!0}),{pauseListeners:c,listen:h,destroy:f}}function Ky(n,t,e,s=!1,i=!1){return{back:n,current:t,forward:e,replaced:s,position:window.history.length,scroll:i?dg():null}}function PP(n){const{history:t,location:e}=window,s={value:t0(n,e)},i={value:t.state};i.value||r(s.value,{back:null,current:s.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function r(c,h,u){const f=n.indexOf("#"),p=f>-1?(e.host&&document.querySelector("base")?n:n.slice(f))+c:CP()+n+c;try{t[u?"replaceState":"pushState"](h,"",p),i.value=h}catch(g){console.error(g),e[u?"replace":"assign"](p)}}function o(c,h){const u=te({},t.state,Ky(i.value.back,c,i.value.forward,!0),h,{position:i.value.position});r(c,u,!0),s.value=c}function a(c,h){const u=te({},i.value,t.state,{forward:c,scroll:dg()});r(u.current,u,!0);const f=te({},Ky(s.value,c,null),{position:u.position+1},h);r(c,f,!1),s.value=c}return{location:s,state:i,push:a,replace:o}}function RP(n){n=vP(n);const t=PP(n),e=TP(n,t.state,t.location,t.replace);function s(r,o=!0){o||e.pauseListeners(),history.go(r)}const i=te({location:"",base:n,go:s,createHref:wP.bind(null,n)},t,e);return Object.defineProperty(i,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(i,"state",{enumerable:!0,get:()=>t.state.value}),i}function kP(n){return n=location.host?n||location.pathname+location.search:"",n.includes("#")||(n+="#"),RP(n)}function IP(n){return typeof n=="string"||n&&typeof n=="object"}function e0(n){return typeof n=="string"||typeof n=="symbol"}const s0=Symbol("");var Yy;(function(n){n[n.aborted=4]="aborted",n[n.cancelled=8]="cancelled",n[n.duplicated=16]="duplicated"})(Yy||(Yy={}));function vh(n,t){return te(new Error,{type:n,[s0]:!0},t)}function Kn(n,t){return n instanceof Error&&s0 in n&&(t==null||!!(n.type&t))}const Qy="[^/]+?",LP={sensitive:!1,strict:!1,start:!0,end:!0},MP=/[.+*?^${}()[\]/\\]/g;function DP(n,t){const e=te({},LP,t),s=[];let i=e.start?"^":"";const r=[];for(const h of n){const u=h.length?[]:[90];e.strict&&!h.length&&(i+="/");for(let f=0;f<h.length;f++){const p=h[f];let g=40+(e.sensitive?.25:0);if(p.type===0)f||(i+="/"),i+=p.value.replace(MP,"\\$&"),g+=40;else if(p.type===1){const{value:v,repeatable:_,optional:x,regexp:S}=p;r.push({name:v,repeatable:_,optional:x});const C=S||Qy;if(C!==Qy){g+=10;try{new RegExp(`(${C})`)}catch(R){throw new Error(`Invalid custom RegExp for param "${v}" (${C}): `+R.message)}}let T=_?`((?:${C})(?:/(?:${C}))*)`:`(${C})`;f||(T=x&&h.length<2?`(?:/${T})`:"/"+T),x&&(T+="?"),i+=T,g+=20,x&&(g+=-8),_&&(g+=-20),C===".*"&&(g+=-50)}u.push(g)}s.push(u)}if(e.strict&&e.end){const h=s.length-1;s[h][s[h].length-1]+=.7000000000000001}e.strict||(i+="/?"),e.end?i+="$":e.strict&&!i.endsWith("/")&&(i+="(?:/|$)");const o=new RegExp(i,e.sensitive?"":"i");function a(h){const u=h.match(o),f={};if(!u)return null;for(let p=1;p<u.length;p++){const g=u[p]||"",v=r[p-1];f[v.name]=g&&v.repeatable?g.split("/"):g}return f}function c(h){let u="",f=!1;for(const p of n){(!f||!u.endsWith("/"))&&(u+="/"),f=!1;for(const g of p)if(g.type===0)u+=g.value;else if(g.type===1){const{value:v,repeatable:_,optional:x}=g,S=v in h?h[v]:"";if(un(S)&&!_)throw new Error(`Provided param "${v}" is an array but it is not repeatable (* or + modifiers)`);const C=un(S)?S.join("/"):S;if(!C)if(x)p.length<2&&(u.endsWith("/")?u=u.slice(0,-1):f=!0);else throw new Error(`Missing required param "${v}"`);u+=C}}return u||"/"}return{re:o,score:s,keys:r,parse:a,stringify:c}}function OP(n,t){let e=0;for(;e<n.length&&e<t.length;){const s=t[e]-n[e];if(s)return s;e++}return n.length<t.length?n.length===1&&n[0]===80?-1:1:n.length>t.length?t.length===1&&t[0]===80?1:-1:0}function i0(n,t){let e=0;const s=n.score,i=t.score;for(;e<s.length&&e<i.length;){const r=OP(s[e],i[e]);if(r)return r;e++}if(Math.abs(i.length-s.length)===1){if(Jy(s))return 1;if(Jy(i))return-1}return i.length-s.length}function Jy(n){const t=n[n.length-1];return n.length>0&&t[t.length-1]<0}const NP={type:0,value:""},FP=/[a-zA-Z0-9_]/;function $P(n){if(!n)return[[]];if(n==="/")return[[NP]];if(!n.startsWith("/"))throw new Error(`Invalid path "${n}"`);function t(g){throw new Error(`ERR (${e})/"${h}": ${g}`)}let e=0,s=e;const i=[];let r;function o(){r&&i.push(r),r=[]}let a=0,c,h="",u="";function f(){h&&(e===0?r.push({type:0,value:h}):e===1||e===2||e===3?(r.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${h}) must be alone in its segment. eg: '/:ids+.`),r.push({type:1,value:h,regexp:u,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),h="")}function p(){h+=c}for(;a<n.length;){if(c=n[a++],c==="\\"&&e!==2){s=e,e=4;continue}switch(e){case 0:c==="/"?(h&&f(),o()):c===":"?(f(),e=1):p();break;case 4:p(),e=s;break;case 1:c==="("?e=2:FP.test(c)?p():(f(),e=0,c!=="*"&&c!=="?"&&c!=="+"&&a--);break;case 2:c===")"?u[u.length-1]=="\\"?u=u.slice(0,-1)+c:e=3:u+=c;break;case 3:f(),e=0,c!=="*"&&c!=="?"&&c!=="+"&&a--,u="";break;default:t("Unknown state");break}}return e===2&&t(`Unfinished custom RegExp for param "${h}"`),f(),o(),i}function BP(n,t,e){const s=DP($P(n.path),e),i=te(s,{record:n,parent:t,children:[],alias:[]});return t&&!i.record.aliasOf==!t.record.aliasOf&&t.children.push(i),i}function HP(n,t){const e=[],s=new Map;t=sw({strict:!1,end:!0,sensitive:!1},t);function i(f){return s.get(f)}function r(f,p,g){const v=!g,_=tw(f);_.aliasOf=g&&g.record;const x=sw(t,f),S=[_];if("alias"in f){const R=typeof f.alias=="string"?[f.alias]:f.alias;for(const I of R)S.push(tw(te({},_,{components:g?g.record.components:_.components,path:I,aliasOf:g?g.record:_})))}let C,T;for(const R of S){const{path:I}=R;if(p&&I[0]!=="/"){const F=p.record.path,N=F[F.length-1]==="/"?"":"/";R.path=p.record.path+(I&&N+I)}if(C=BP(R,p,x),g?g.alias.push(C):(T=T||C,T!==C&&T.alias.push(C),v&&f.name&&!ew(C)&&o(f.name)),n0(C)&&c(C),_.children){const F=_.children;for(let N=0;N<F.length;N++)r(F[N],C,g&&g.children[N])}g=g||C}return T?()=>{o(T)}:au}function o(f){if(e0(f)){const p=s.get(f);p&&(s.delete(f),e.splice(e.indexOf(p),1),p.children.forEach(o),p.alias.forEach(o))}else{const p=e.indexOf(f);p>-1&&(e.splice(p,1),f.record.name&&s.delete(f.record.name),f.children.forEach(o),f.alias.forEach(o))}}function a(){return e}function c(f){const p=UP(f,e);e.splice(p,0,f),f.record.name&&!ew(f)&&s.set(f.record.name,f)}function h(f,p){let g,v={},_,x;if("name"in f&&f.name){if(g=s.get(f.name),!g)throw vh(1,{location:f});x=g.record.name,v=te(Zy(p.params,g.keys.filter(T=>!T.optional).concat(g.parent?g.parent.keys.filter(T=>T.optional):[]).map(T=>T.name)),f.params&&Zy(f.params,g.keys.map(T=>T.name))),_=g.stringify(v)}else if(f.path!=null)_=f.path,g=e.find(T=>T.re.test(_)),g&&(v=g.parse(_),x=g.record.name);else{if(g=p.name?s.get(p.name):e.find(T=>T.re.test(p.path)),!g)throw vh(1,{location:f,currentLocation:p});x=g.record.name,v=te({},p.params,f.params),_=g.stringify(v)}const S=[];let C=g;for(;C;)S.unshift(C.record),C=C.parent;return{name:x,path:_,params:v,matched:S,meta:VP(S)}}n.forEach(f=>r(f));function u(){e.length=0,s.clear()}return{addRoute:r,resolve:h,removeRoute:o,clearRoutes:u,getRoutes:a,getRecordMatcher:i}}function Zy(n,t){const e={};for(const s of t)s in n&&(e[s]=n[s]);return e}function tw(n){const t={path:n.path,redirect:n.redirect,name:n.name,meta:n.meta||{},aliasOf:n.aliasOf,beforeEnter:n.beforeEnter,props:jP(n),children:n.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in n?n.components||null:n.component&&{default:n.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function jP(n){const t={},e=n.props||!1;if("component"in n)t.default=e;else for(const s in n.components)t[s]=typeof e=="object"?e[s]:e;return t}function ew(n){for(;n;){if(n.record.aliasOf)return!0;n=n.parent}return!1}function VP(n){return n.reduce((t,e)=>te(t,e.meta),{})}function sw(n,t){const e={};for(const s in n)e[s]=s in t?t[s]:n[s];return e}function UP(n,t){let e=0,s=t.length;for(;e!==s;){const r=e+s>>1;i0(n,t[r])<0?s=r:e=r+1}const i=zP(n);return i&&(s=t.lastIndexOf(i,s-1)),s}function zP(n){let t=n;for(;t=t.parent;)if(n0(t)&&i0(n,t)===0)return t}function n0({record:n}){return!!(n.name||n.components&&Object.keys(n.components).length||n.redirect)}function WP(n){const t={};if(n===""||n==="?")return t;const s=(n[0]==="?"?n.slice(1):n).split("&");for(let i=0;i<s.length;++i){const r=s[i].replace(KA," "),o=r.indexOf("="),a=pu(o<0?r:r.slice(0,o)),c=o<0?null:pu(r.slice(o+1));if(a in t){let h=t[a];un(h)||(h=t[a]=[h]),h.push(c)}else t[a]=c}return t}function iw(n){let t="";for(let e in n){const s=n[e];if(e=hP(e),s==null){s!==void 0&&(t+=(t.length?"&":"")+e);continue}(un(s)?s.map(r=>r&&Im(r)):[s&&Im(s)]).forEach(r=>{r!==void 0&&(t+=(t.length?"&":"")+e,r!=null&&(t+="="+r))})}return t}function qP(n){const t={};for(const e in n){const s=n[e];s!==void 0&&(t[e]=un(s)?s.map(i=>i==null?null:""+i):s==null?s:""+s)}return t}const GP=Symbol(""),nw=Symbol(""),b_=Symbol(""),__=Symbol(""),Mm=Symbol("");function Ih(){let n=[];function t(s){return n.push(s),()=>{const i=n.indexOf(s);i>-1&&n.splice(i,1)}}function e(){n=[]}return{add:t,list:()=>n.slice(),reset:e}}function Qr(n,t,e,s,i,r=o=>o()){const o=s&&(s.enterCallbacks[i]=s.enterCallbacks[i]||[]);return()=>new Promise((a,c)=>{const h=p=>{p===!1?c(vh(4,{from:e,to:t})):p instanceof Error?c(p):IP(p)?c(vh(2,{from:t,to:p})):(o&&s.enterCallbacks[i]===o&&typeof p=="function"&&o.push(p),a())},u=r(()=>n.call(s&&s.instances[i],t,e,h));let f=Promise.resolve(u);n.length<3&&(f=f.then(h)),f.catch(p=>c(p))})}function hm(n,t,e,s,i=r=>r()){const r=[];for(const o of n)for(const a in o.components){let c=o.components[a];if(!(t!=="beforeRouteEnter"&&!o.instances[a]))if(GA(c)){const u=(c.__vccOpts||c)[t];u&&r.push(Qr(u,e,s,o,a,i))}else{let h=c();r.push(()=>h.then(u=>{if(!u)throw new Error(`Couldn't resolve component "${a}" at "${o.path}"`);const f=ZT(u)?u.default:u;o.mods[a]=u,o.components[a]=f;const g=(f.__vccOpts||f)[t];return g&&Qr(g,e,s,o,a,i)()}))}}return r}function rw(n){const t=hn(b_),e=hn(__),s=qs(()=>{const c=Ie(n.to);return t.resolve(c)}),i=qs(()=>{const{matched:c}=s.value,{length:h}=c,u=c[h-1],f=e.matched;if(!u||!f.length)return-1;const p=f.findIndex(_h.bind(null,u));if(p>-1)return p;const g=ow(c[h-2]);return h>1&&ow(u)===g&&f[f.length-1].path!==g?f.findIndex(_h.bind(null,c[h-2])):p}),r=qs(()=>i.value>-1&&QP(e.params,s.value.params)),o=qs(()=>i.value>-1&&i.value===e.matched.length-1&&ZA(e.params,s.value.params));function a(c={}){if(YP(c)){const h=t[Ie(n.replace)?"replace":"push"](Ie(n.to)).catch(au);return n.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>h),h}return Promise.resolve()}return{route:s,href:qs(()=>s.value.href),isActive:r,isExactActive:o,navigate:a}}function XP(n){return n.length===1?n[0]:n}const KP=Br({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:rw,setup(n,{slots:t}){const e=Ud(rw(n)),{options:s}=hn(b_),i=qs(()=>({[aw(n.activeClass,s.linkActiveClass,"router-link-active")]:e.isActive,[aw(n.exactActiveClass,s.linkExactActiveClass,"router-link-exact-active")]:e.isExactActive}));return()=>{const r=t.default&&XP(t.default(e));return n.custom?r:BA("a",{"aria-current":e.isExactActive?n.ariaCurrentValue:null,href:e.href,onClick:e.navigate,class:i.value},r)}}}),Wl=KP;function YP(n){if(!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)&&!n.defaultPrevented&&!(n.button!==void 0&&n.button!==0)){if(n.currentTarget&&n.currentTarget.getAttribute){const t=n.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return n.preventDefault&&n.preventDefault(),!0}}function QP(n,t){for(const e in t){const s=t[e],i=n[e];if(typeof s=="string"){if(s!==i)return!1}else if(!un(i)||i.length!==s.length||s.some((r,o)=>r!==i[o]))return!1}return!0}function ow(n){return n?n.aliasOf?n.aliasOf.path:n.path:""}const aw=(n,t,e)=>n??t??e,JP=Br({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(n,{attrs:t,slots:e}){const s=hn(Mm),i=qs(()=>n.route||s.value),r=hn(nw,0),o=qs(()=>{let h=Ie(r);const{matched:u}=i.value;let f;for(;(f=u[h])&&!f.components;)h++;return h}),a=qs(()=>i.value.matched[o.value]);If(nw,qs(()=>o.value+1)),If(GP,a),If(Mm,i);const c=ve();return oc(()=>[c.value,a.value,n.name],([h,u,f],[p,g,v])=>{u&&(u.instances[f]=h,g&&g!==u&&h&&h===p&&(u.leaveGuards.size||(u.leaveGuards=g.leaveGuards),u.updateGuards.size||(u.updateGuards=g.updateGuards))),h&&u&&(!g||!_h(u,g)||!p)&&(u.enterCallbacks[f]||[]).forEach(_=>_(h))},{flush:"post"}),()=>{const h=i.value,u=n.name,f=a.value,p=f&&f.components[u];if(!p)return lw(e.default,{Component:p,route:h});const g=f.props[u],v=g?g===!0?h.params:typeof g=="function"?g(h):g:null,x=BA(p,te({},v,t,{onVnodeUnmounted:S=>{S.component.isUnmounted&&(f.instances[u]=null)},ref:c}));return lw(e.default,{Component:x,route:h})||x}}});function lw(n,t){if(!n)return null;const e=n(t);return e.length===1?e[0]:e}const r0=JP;function ZP(n){const t=HP(n.routes,n),e=n.parseQuery||WP,s=n.stringifyQuery||iw,i=n.history,r=Ih(),o=Ih(),a=Ih(),c=t1(zr);let h=zr;zl&&n.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const u=lm.bind(null,$=>""+$),f=lm.bind(null,dP),p=lm.bind(null,pu);function g($,j){let it,ht;return e0($)?(it=t.getRecordMatcher($),ht=j):ht=$,t.addRoute(ht,it)}function v($){const j=t.getRecordMatcher($);j&&t.removeRoute(j)}function _(){return t.getRoutes().map($=>$.record)}function x($){return!!t.getRecordMatcher($)}function S($,j){if(j=te({},j||c.value),typeof $=="string"){const O=cm(e,$,j.path),U=t.resolve({path:O.path},j),W=i.createHref(O.fullPath);return te(O,U,{params:p(U.params),hash:pu(O.hash),redirectedFrom:void 0,href:W})}let it;if($.path!=null)it=te({},$,{path:cm(e,$.path,j.path).path});else{const O=te({},$.params);for(const U in O)O[U]==null&&delete O[U];it=te({},$,{params:f(O)}),j.params=f(j.params)}const ht=t.resolve(it,j),qt=$.hash||"";ht.params=u(p(ht.params));const P=gP(s,te({},$,{hash:cP(qt),path:ht.path})),k=i.createHref(P);return te({fullPath:P,hash:qt,query:s===iw?qP($.query):$.query||{}},ht,{redirectedFrom:void 0,href:k})}function C($){return typeof $=="string"?cm(e,$,c.value.path):te({},$)}function T($,j){if(h!==$)return vh(8,{from:j,to:$})}function R($){return N($)}function I($){return R(te(C($),{replace:!0}))}function F($){const j=$.matched[$.matched.length-1];if(j&&j.redirect){const{redirect:it}=j;let ht=typeof it=="function"?it($):it;return typeof ht=="string"&&(ht=ht.includes("?")||ht.includes("#")?ht=C(ht):{path:ht},ht.params={}),te({query:$.query,hash:$.hash,params:ht.path!=null?{}:$.params},ht)}}function N($,j){const it=h=S($),ht=c.value,qt=$.state,P=$.force,k=$.replace===!0,O=F(it);if(O)return N(te(C(O),{state:typeof O=="object"?te({},qt,O.state):qt,force:P,replace:k}),j||it);const U=it;U.redirectedFrom=j;let W;return!P&&mP(s,ht,it)&&(W=vh(16,{to:U,from:ht}),Ee(ht,ht,!0,!1)),(W?Promise.resolve(W):Y(U,ht)).catch(q=>Kn(q)?Kn(q,2)?q:z(q):Ct(q,U,ht)).then(q=>{if(q){if(Kn(q,2))return N(te({replace:k},C(q.to),{state:typeof q.to=="object"?te({},qt,q.to.state):qt,force:P}),j||U)}else q=vt(U,ht,!0,k,qt);return Z(U,ht,q),q})}function H($,j){const it=T($,j);return it?Promise.reject(it):Promise.resolve()}function V($){const j=Pe.values().next().value;return j&&typeof j.runWithContext=="function"?j.runWithContext($):$()}function Y($,j){let it;const[ht,qt,P]=tR($,j);it=hm(ht.reverse(),"beforeRouteLeave",$,j);for(const O of ht)O.leaveGuards.forEach(U=>{it.push(Qr(U,$,j))});const k=H.bind(null,$,j);return it.push(k),Wt(it).then(()=>{it=[];for(const O of r.list())it.push(Qr(O,$,j));return it.push(k),Wt(it)}).then(()=>{it=hm(qt,"beforeRouteUpdate",$,j);for(const O of qt)O.updateGuards.forEach(U=>{it.push(Qr(U,$,j))});return it.push(k),Wt(it)}).then(()=>{it=[];for(const O of P)if(O.beforeEnter)if(un(O.beforeEnter))for(const U of O.beforeEnter)it.push(Qr(U,$,j));else it.push(Qr(O.beforeEnter,$,j));return it.push(k),Wt(it)}).then(()=>($.matched.forEach(O=>O.enterCallbacks={}),it=hm(P,"beforeRouteEnter",$,j,V),it.push(k),Wt(it))).then(()=>{it=[];for(const O of o.list())it.push(Qr(O,$,j));return it.push(k),Wt(it)}).catch(O=>Kn(O,8)?O:Promise.reject(O))}function Z($,j,it){a.list().forEach(ht=>V(()=>ht($,j,it)))}function vt($,j,it,ht,qt){const P=T($,j);if(P)return P;const k=j===zr,O=zl?history.state:{};it&&(ht||k?i.replace($.fullPath,te({scroll:k&&O&&O.scroll},qt)):i.push($.fullPath,qt)),c.value=$,Ee($,j,it,k),z()}let At;function St(){At||(At=i.listen(($,j,it)=>{if(!Ge.listening)return;const ht=S($),qt=F(ht);if(qt){N(te(qt,{replace:!0,force:!0}),ht).catch(au);return}h=ht;const P=c.value;zl&&SP(Xy(P.fullPath,it.delta),dg()),Y(ht,P).catch(k=>Kn(k,12)?k:Kn(k,2)?(N(te(C(k.to),{force:!0}),ht).then(O=>{Kn(O,20)&&!it.delta&&it.type===gu.pop&&i.go(-1,!1)}).catch(au),Promise.reject()):(it.delta&&i.go(-it.delta,!1),Ct(k,ht,P))).then(k=>{k=k||vt(ht,P,!1),k&&(it.delta&&!Kn(k,8)?i.go(-it.delta,!1):it.type===gu.pop&&Kn(k,20)&&i.go(-1,!1)),Z(ht,P,k)}).catch(au)}))}let fe=Ih(),Q=Ih(),X;function Ct($,j,it){z($);const ht=Q.list();return ht.length?ht.forEach(qt=>qt($,j,it)):console.error($),Promise.reject($)}function Le(){return X&&c.value!==zr?Promise.resolve():new Promise(($,j)=>{fe.add([$,j])})}function z($){return X||(X=!$,St(),fe.list().forEach(([j,it])=>$?it($):j()),fe.reset()),$}function Ee($,j,it,ht){const{scrollBehavior:qt}=n;if(!zl||!qt)return Promise.resolve();const P=!it&&xP(Xy($.fullPath,0))||(ht||!it)&&history.state&&history.state.scroll||null;return h_().then(()=>qt($,j,P)).then(k=>k&&EP(k)).catch(k=>Ct(k,$,j))}const Vt=$=>i.go($);let Kt;const Pe=new Set,Ge={currentRoute:c,listening:!0,addRoute:g,removeRoute:v,clearRoutes:t.clearRoutes,hasRoute:x,getRoutes:_,resolve:S,options:n,push:R,replace:I,go:Vt,back:()=>Vt(-1),forward:()=>Vt(1),beforeEach:r.add,beforeResolve:o.add,afterEach:a.add,onError:Q.add,isReady:Le,install($){const j=this;$.component("RouterLink",Wl),$.component("RouterView",r0),$.config.globalProperties.$router=j,Object.defineProperty($.config.globalProperties,"$route",{enumerable:!0,get:()=>Ie(c)}),zl&&!Kt&&c.value===zr&&(Kt=!0,R(i.location).catch(qt=>{}));const it={};for(const qt in zr)Object.defineProperty(it,qt,{get:()=>c.value[qt],enumerable:!0});$.provide(b_,j),$.provide(__,nA(it)),$.provide(Mm,c);const ht=$.unmount;Pe.add($),$.unmount=function(){Pe.delete($),Pe.size<1&&(h=zr,At&&At(),At=null,c.value=zr,Kt=!1,X=!1),ht()}}};function Wt($){return $.reduce((j,it)=>j.then(()=>V(it)),Promise.resolve())}return Ge}function tR(n,t){const e=[],s=[],i=[],r=Math.max(t.matched.length,n.matched.length);for(let o=0;o<r;o++){const a=t.matched[o];a&&(n.matched.find(h=>_h(h,a))?s.push(a):e.push(a));const c=n.matched[o];c&&(t.matched.find(h=>_h(h,c))||i.push(c))}return[e,s,i]}function eR(n){return hn(__)}const sR=JT("documents",()=>{const n=ve([]),t=ve(!1),e=ve(null);async function s(){t.value=!0,e.value=null;try{const i=await fetch("/FigBank/data/documents.json");if(!i.ok)throw new Error("Erreur lors du chargement des documents");const r=await i.json();n.value=r.documents||[]}catch(i){e.value=i instanceof Error?i.message:"Une erreur est survenue",console.error("Erreur lors du chargement des documents:",i)}finally{t.value=!1}}return{documents:n,isLoading:t,error:e,loadDocuments:s}}),Us=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),Dm=[.001,0,0,.001,0,0],um=1.35,yi={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},Zr={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},iR="pdfjs_internal_editor_",Tt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15,SIGNATURE:101},zt={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},nR={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},ws={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},Of={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},Ve={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,SOUND:18,MOVIE:19,WIDGET:20,SCREEN:21,PRINTERMARK:22,TRAPNET:23,WATERMARK:24,THREED:25,REDACT:26},ql={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},fg={ERRORS:0,WARNINGS:1,INFOS:5},Ep={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93,rawFillPath:94},Af={moveTo:0,lineTo:1,curveTo:2,closePath:3},rR={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let pg=fg.WARNINGS;function oR(n){Number.isInteger(n)&&(pg=n)}function aR(){return pg}function gg(n){pg>=fg.INFOS&&console.log(`Info: ${n}`)}function kt(n){pg>=fg.WARNINGS&&console.log(`Warning: ${n}`)}function ue(n){throw new Error(n)}function ze(n,t){n||ue(t)}function lR(n){switch(n==null?void 0:n.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function o0(n,t=null,e=null){if(!n)return null;if(e&&typeof n=="string"){if(e.addDefaultProtocol&&n.startsWith("www.")){const i=n.match(/\./g);(i==null?void 0:i.length)>=2&&(n=`http://${n}`)}if(e.tryConvertEncoding)try{n=fR(n)}catch{}}const s=t?URL.parse(n,t):URL.parse(n);return lR(s)?s:null}function a0(n,t,e=!1){const s=URL.parse(n);return s?(s.hash=t,s.href):e&&o0(n,"http://example.com")?n.split("#",1)[0]+`${t?`#${t}`:""}`:""}function jt(n,t,e,s=!1){return Object.defineProperty(n,t,{value:e,enumerable:!s,configurable:!0,writable:!1}),e}const Sl=function(){function t(e,s){this.message=e,this.name=s}return t.prototype=new Error,t.constructor=t,t}();class cw extends Sl{constructor(t,e){super(t,"PasswordException"),this.code=e}}class dm extends Sl{constructor(t,e){super(t,"UnknownErrorException"),this.details=e}}class Om extends Sl{constructor(t){super(t,"InvalidPDFException")}}class Sp extends Sl{constructor(t,e,s){super(t,"ResponseException"),this.status=e,this.missing=s}}class cR extends Sl{constructor(t){super(t,"FormatError")}}class Vo extends Sl{constructor(t){super(t,"AbortException")}}function l0(n){(typeof n!="object"||(n==null?void 0:n.length)===void 0)&&ue("Invalid argument for bytesToString");const t=n.length,e=8192;if(t<e)return String.fromCharCode.apply(null,n);const s=[];for(let i=0;i<t;i+=e){const r=Math.min(i+e,t),o=n.subarray(i,r);s.push(String.fromCharCode.apply(null,o))}return s.join("")}function qd(n){typeof n!="string"&&ue("Invalid argument for stringToBytes");const t=n.length,e=new Uint8Array(t);for(let s=0;s<t;++s)e[s]=n.charCodeAt(s)&255;return e}function hR(n){return String.fromCharCode(n>>24&255,n>>16&255,n>>8&255,n&255)}function uR(){const n=new Uint8Array(4);return n[0]=1,new Uint32Array(n.buffer,0,1)[0]===1}function dR(){try{return new Function(""),!0}catch{return!1}}class ys{static get isLittleEndian(){return jt(this,"isLittleEndian",uR())}static get isEvalSupported(){return jt(this,"isEvalSupported",dR())}static get isOffscreenCanvasSupported(){return jt(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return jt(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){if(typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"){const{platform:t,userAgent:e}=navigator;return jt(this,"platform",{isAndroid:e.includes("Android"),isLinux:t.includes("Linux"),isMac:t.includes("Mac"),isWindows:t.includes("Win"),isFirefox:e.includes("Firefox")})}return jt(this,"platform",{isAndroid:!1,isLinux:!1,isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var t,e;return jt(this,"isCSSRoundSupported",(e=(t=globalThis.CSS)==null?void 0:t.supports)==null?void 0:e.call(t,"width: round(1.5px, 1px)"))}}const fm=Array.from(Array(256).keys(),n=>n.toString(16).padStart(2,"0"));var Mr,Nf,Nm;class pt{static makeHexColor(t,e,s){return`#${fm[t]}${fm[e]}${fm[s]}`}static scaleMinMax(t,e){let s;t[0]?(t[0]<0&&(s=e[0],e[0]=e[2],e[2]=s),e[0]*=t[0],e[2]*=t[0],t[3]<0&&(s=e[1],e[1]=e[3],e[3]=s),e[1]*=t[3],e[3]*=t[3]):(s=e[0],e[0]=e[1],e[1]=s,s=e[2],e[2]=e[3],e[3]=s,t[1]<0&&(s=e[1],e[1]=e[3],e[3]=s),e[1]*=t[1],e[3]*=t[1],t[2]<0&&(s=e[0],e[0]=e[2],e[2]=s),e[0]*=t[2],e[2]*=t[2]),e[0]+=t[4],e[1]+=t[5],e[2]+=t[4],e[3]+=t[5]}static transform(t,e){return[t[0]*e[0]+t[2]*e[1],t[1]*e[0]+t[3]*e[1],t[0]*e[2]+t[2]*e[3],t[1]*e[2]+t[3]*e[3],t[0]*e[4]+t[2]*e[5]+t[4],t[1]*e[4]+t[3]*e[5]+t[5]]}static applyTransform(t,e,s=0){const i=t[s],r=t[s+1];t[s]=i*e[0]+r*e[2]+e[4],t[s+1]=i*e[1]+r*e[3]+e[5]}static applyTransformToBezier(t,e,s=0){const i=e[0],r=e[1],o=e[2],a=e[3],c=e[4],h=e[5];for(let u=0;u<6;u+=2){const f=t[s+u],p=t[s+u+1];t[s+u]=f*i+p*o+c,t[s+u+1]=f*r+p*a+h}}static applyInverseTransform(t,e){const s=t[0],i=t[1],r=e[0]*e[3]-e[1]*e[2];t[0]=(s*e[3]-i*e[2]+e[2]*e[5]-e[4]*e[3])/r,t[1]=(-s*e[1]+i*e[0]+e[4]*e[1]-e[5]*e[0])/r}static axialAlignedBoundingBox(t,e,s){const i=e[0],r=e[1],o=e[2],a=e[3],c=e[4],h=e[5],u=t[0],f=t[1],p=t[2],g=t[3];let v=i*u+c,_=v,x=i*p+c,S=x,C=a*f+h,T=C,R=a*g+h,I=R;if(r!==0||o!==0){const F=r*u,N=r*p,H=o*f,V=o*g;v+=H,S+=H,x+=V,_+=V,C+=F,I+=F,R+=N,T+=N}s[0]=Math.min(s[0],v,x,_,S),s[1]=Math.min(s[1],C,R,T,I),s[2]=Math.max(s[2],v,x,_,S),s[3]=Math.max(s[3],C,R,T,I)}static inverseTransform(t){const e=t[0]*t[3]-t[1]*t[2];return[t[3]/e,-t[1]/e,-t[2]/e,t[0]/e,(t[2]*t[5]-t[4]*t[3])/e,(t[4]*t[1]-t[5]*t[0])/e]}static singularValueDecompose2dScale(t,e){const s=t[0],i=t[1],r=t[2],o=t[3],a=s**2+i**2,c=s*r+i*o,h=r**2+o**2,u=(a+h)/2,f=Math.sqrt(u**2-(a*h-c**2));e[0]=Math.sqrt(u+f||1),e[1]=Math.sqrt(u-f||1)}static normalizeRect(t){const e=t.slice(0);return t[0]>t[2]&&(e[0]=t[2],e[2]=t[0]),t[1]>t[3]&&(e[1]=t[3],e[3]=t[1]),e}static intersect(t,e){const s=Math.max(Math.min(t[0],t[2]),Math.min(e[0],e[2])),i=Math.min(Math.max(t[0],t[2]),Math.max(e[0],e[2]));if(s>i)return null;const r=Math.max(Math.min(t[1],t[3]),Math.min(e[1],e[3])),o=Math.min(Math.max(t[1],t[3]),Math.max(e[1],e[3]));return r>o?null:[s,r,i,o]}static pointBoundingBox(t,e,s){s[0]=Math.min(s[0],t),s[1]=Math.min(s[1],e),s[2]=Math.max(s[2],t),s[3]=Math.max(s[3],e)}static rectBoundingBox(t,e,s,i,r){r[0]=Math.min(r[0],t,s),r[1]=Math.min(r[1],e,i),r[2]=Math.max(r[2],t,s),r[3]=Math.max(r[3],e,i)}static bezierBoundingBox(t,e,s,i,r,o,a,c,h){h[0]=Math.min(h[0],t,a),h[1]=Math.min(h[1],e,c),h[2]=Math.max(h[2],t,a),h[3]=Math.max(h[3],e,c),A(this,Mr,Nm).call(this,t,s,r,a,e,i,o,c,3*(-t+3*(s-r)+a),6*(t-2*s+r),3*(s-t),h),A(this,Mr,Nm).call(this,t,s,r,a,e,i,o,c,3*(-e+3*(i-o)+c),6*(e-2*i+o),3*(i-e),h)}}Mr=new WeakSet,Nf=function(t,e,s,i,r,o,a,c,h,u){if(h<=0||h>=1)return;const f=1-h,p=h*h,g=p*h,v=f*(f*(f*t+3*h*e)+3*p*s)+g*i,_=f*(f*(f*r+3*h*o)+3*p*a)+g*c;u[0]=Math.min(u[0],v),u[1]=Math.min(u[1],_),u[2]=Math.max(u[2],v),u[3]=Math.max(u[3],_)},Nm=function(t,e,s,i,r,o,a,c,h,u,f,p){if(Math.abs(h)<1e-12){Math.abs(u)>=1e-12&&A(this,Mr,Nf).call(this,t,e,s,i,r,o,a,c,-f/u,p);return}const g=u**2-4*f*h;if(g<0)return;const v=Math.sqrt(g),_=2*h;A(this,Mr,Nf).call(this,t,e,s,i,r,o,a,c,(-u+v)/_,p),A(this,Mr,Nf).call(this,t,e,s,i,r,o,a,c,(-u-v)/_,p)},w(pt,Mr);function fR(n){return decodeURIComponent(escape(n))}let pm=null,hw=null;function pR(n){return pm||(pm=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,hw=new Map([["ﬅ","ſt"]])),n.replaceAll(pm,(t,e,s)=>e?e.normalize("NFKC"):hw.get(s))}function c0(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const n=new Uint8Array(32);return crypto.getRandomValues(n),l0(n)}const v_="pdfjs_internal_id_";function gR(n,t,e){if(!Array.isArray(e)||e.length<2)return!1;const[s,i,...r]=e;if(!n(s)&&!Number.isInteger(s)||!t(i))return!1;const o=r.length;let a=!0;switch(i.name){case"XYZ":if(o<2||o>3)return!1;break;case"Fit":case"FitB":return o===0;case"FitH":case"FitBH":case"FitV":case"FitBV":if(o>1)return!1;break;case"FitR":if(o!==4)return!1;a=!1;break;default:return!1}for(const c of r)if(!(typeof c=="number"||a&&c===null))return!1;return!0}function zs(n,t,e){return Math.min(Math.max(n,t),e)}function h0(n){return Uint8Array.prototype.toBase64?n.toBase64():btoa(l0(n))}function mR(n){return Uint8Array.fromBase64?Uint8Array.fromBase64(n):qd(atob(n))}typeof Promise.try!="function"&&(Promise.try=function(n,...t){return new Promise(e=>{e(n(...t))})});typeof Math.sumPrecise!="function"&&(Math.sumPrecise=function(n){return n.reduce((t,e)=>t+e,0)});const Yn="http://www.w3.org/2000/svg",da=class da{};J(da,"CSS",96),J(da,"PDF",72),J(da,"PDF_TO_CSS_UNITS",da.CSS/da.PDF);let Uo=da;async function Gd(n,t="text"){if(Gl(n,document.baseURI)){const e=await fetch(n);if(!e.ok)throw new Error(e.statusText);switch(t){case"arraybuffer":return e.arrayBuffer();case"blob":return e.blob();case"json":return e.json()}return e.text()}return new Promise((e,s)=>{const i=new XMLHttpRequest;i.open("GET",n,!0),i.responseType=t,i.onreadystatechange=()=>{if(i.readyState===XMLHttpRequest.DONE){if(i.status===200||i.status===0){switch(t){case"arraybuffer":case"blob":case"json":e(i.response);return}e(i.responseText);return}s(new Error(i.statusText))}},i.send(null)})}class Xd{constructor({viewBox:t,userUnit:e,scale:s,rotation:i,offsetX:r=0,offsetY:o=0,dontFlip:a=!1}){this.viewBox=t,this.userUnit=e,this.scale=s,this.rotation=i,this.offsetX=r,this.offsetY=o,s*=e;const c=(t[2]+t[0])/2,h=(t[3]+t[1])/2;let u,f,p,g;switch(i%=360,i<0&&(i+=360),i){case 180:u=-1,f=0,p=0,g=1;break;case 90:u=0,f=1,p=1,g=0;break;case 270:u=0,f=-1,p=-1,g=0;break;case 0:u=1,f=0,p=0,g=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}a&&(p=-p,g=-g);let v,_,x,S;u===0?(v=Math.abs(h-t[1])*s+r,_=Math.abs(c-t[0])*s+o,x=(t[3]-t[1])*s,S=(t[2]-t[0])*s):(v=Math.abs(c-t[0])*s+r,_=Math.abs(h-t[1])*s+o,x=(t[2]-t[0])*s,S=(t[3]-t[1])*s),this.transform=[u*s,f*s,p*s,g*s,v-u*s*c-p*s*h,_-f*s*c-g*s*h],this.width=x,this.height=S}get rawDims(){const t=this.viewBox;return jt(this,"rawDims",{pageWidth:t[2]-t[0],pageHeight:t[3]-t[1],pageX:t[0],pageY:t[1]})}clone({scale:t=this.scale,rotation:e=this.rotation,offsetX:s=this.offsetX,offsetY:i=this.offsetY,dontFlip:r=!1}={}){return new Xd({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:t,rotation:e,offsetX:s,offsetY:i,dontFlip:r})}convertToViewportPoint(t,e){const s=[t,e];return pt.applyTransform(s,this.transform),s}convertToViewportRectangle(t){const e=[t[0],t[1]];pt.applyTransform(e,this.transform);const s=[t[2],t[3]];return pt.applyTransform(s,this.transform),[e[0],e[1],s[0],s[1]]}convertToPdfPoint(t,e){const s=[t,e];return pt.applyInverseTransform(s,this.transform),s}}class y_ extends Sl{constructor(t,e=0){super(t,"RenderingCancelledException"),this.extraDelay=e}}function mg(n){const t=n.length;let e=0;for(;e<t&&n[e].trim()==="";)e++;return n.substring(e,e+5).toLowerCase()==="data:"}function w_(n){return typeof n=="string"&&/\.pdf$/i.test(n)}function bR(n){return[n]=n.split(/[#?]/,1),n.substring(n.lastIndexOf("/")+1)}function _R(n,t="document.pdf"){if(typeof n!="string")return t;if(mg(n))return kt('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),t;const e=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,s=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,i=e.exec(n);let r=s.exec(i[1])||s.exec(i[2])||s.exec(i[3]);if(r&&(r=r[0],r.includes("%")))try{r=s.exec(decodeURIComponent(r))[0]}catch{}return r||t}class uw{constructor(){J(this,"started",Object.create(null));J(this,"times",[])}time(t){t in this.started&&kt(`Timer is already running for ${t}`),this.started[t]=Date.now()}timeEnd(t){t in this.started||kt(`Timer has not been started for ${t}`),this.times.push({name:t,start:this.started[t],end:Date.now()}),delete this.started[t]}toString(){const t=[];let e=0;for(const{name:s}of this.times)e=Math.max(s.length,e);for(const{name:s,start:i,end:r}of this.times)t.push(`${s.padEnd(e)} ${r-i}ms
`);return t.join("")}}function Gl(n,t){const e=t?URL.parse(n,t):URL.parse(n);return(e==null?void 0:e.protocol)==="http:"||(e==null?void 0:e.protocol)==="https:"}function dn(n){n.preventDefault()}function Ue(n){n.preventDefault(),n.stopPropagation()}var _u;class A_{static toDateObject(t){if(!t||typeof t!="string")return null;l(this,_u)||b(this,_u,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const e=l(this,_u).exec(t);if(!e)return null;const s=parseInt(e[1],10);let i=parseInt(e[2],10);i=i>=1&&i<=12?i-1:0;let r=parseInt(e[3],10);r=r>=1&&r<=31?r:1;let o=parseInt(e[4],10);o=o>=0&&o<=23?o:0;let a=parseInt(e[5],10);a=a>=0&&a<=59?a:0;let c=parseInt(e[6],10);c=c>=0&&c<=59?c:0;const h=e[7]||"Z";let u=parseInt(e[8],10);u=u>=0&&u<=23?u:0;let f=parseInt(e[9],10)||0;return f=f>=0&&f<=59?f:0,h==="-"?(o+=u,a+=f):h==="+"&&(o-=u,a-=f),new Date(Date.UTC(s,i,r,o,a,c))}}_u=new WeakMap,w(A_,_u);function vR(n,{scale:t=1,rotation:e=0}){const{width:s,height:i}=n.attributes.style,r=[0,0,parseInt(s),parseInt(i)];return new Xd({viewBox:r,userUnit:1,scale:t,rotation:e})}function E_(n){if(n.startsWith("#")){const t=parseInt(n.slice(1),16);return[(t&16711680)>>16,(t&65280)>>8,t&255]}return n.startsWith("rgb(")?n.slice(4,-1).split(",").map(t=>parseInt(t)):n.startsWith("rgba(")?n.slice(5,-1).split(",").map(t=>parseInt(t)).slice(0,3):(kt(`Not a valid color format: "${n}"`),[0,0,0])}function yR(n){const t=document.createElement("span");t.style.visibility="hidden",t.style.colorScheme="only light",document.body.append(t);for(const e of n.keys()){t.style.color=e;const s=window.getComputedStyle(t).color;n.set(e,E_(s))}t.remove()}function ke(n){const{a:t,b:e,c:s,d:i,e:r,f:o}=n.getTransform();return[t,e,s,i,r,o]}function vn(n){const{a:t,b:e,c:s,d:i,e:r,f:o}=n.getTransform().invertSelf();return[t,e,s,i,r,o]}function yl(n,t,e=!1,s=!0){if(t instanceof Xd){const{pageWidth:i,pageHeight:r}=t.rawDims,{style:o}=n,a=ys.isCSSRoundSupported,c=`var(--total-scale-factor) * ${i}px`,h=`var(--total-scale-factor) * ${r}px`,u=a?`round(down, ${c}, var(--scale-round-x))`:`calc(${c})`,f=a?`round(down, ${h}, var(--scale-round-y))`:`calc(${h})`;!e||t.rotation%180===0?(o.width=u,o.height=f):(o.width=f,o.height=u)}s&&n.setAttribute("data-main-rotation",t.rotation)}class Fr{constructor(){const{pixelRatio:t}=Fr;this.sx=t,this.sy=t}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}limitCanvas(t,e,s,i){let r=1/0,o=1/0,a=1/0;s>0&&(r=Math.sqrt(s/(t*e))),i!==-1&&(o=i/t,a=i/e);const c=Math.min(r,o,a);return this.sx>c||this.sy>c?(this.sx=c,this.sy=c,!0):!1}static get pixelRatio(){return globalThis.devicePixelRatio||1}}const Fm=["image/apng","image/avif","image/bmp","image/gif","image/jpeg","image/png","image/svg+xml","image/webp","image/x-icon"];var to,pa,Li,eo,vu,hc,yu,Lp,u0,vs,d0,f0,Fh,p0,Ff;const tr=class tr{constructor(t){w(this,vs);w(this,to,null);w(this,pa,null);w(this,Li);w(this,eo,null);w(this,vu,null);w(this,hc,null);b(this,Li,t),l(tr,yu)||b(tr,yu,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button",signature:"pdfjs-editor-remove-signature-button"}))}render(){const t=b(this,to,document.createElement("div"));t.classList.add("editToolbar","hidden"),t.setAttribute("role","toolbar");const e=l(this,Li)._uiManager._signal;t.addEventListener("contextmenu",dn,{signal:e}),t.addEventListener("pointerdown",A(tr,Lp,u0),{signal:e});const s=b(this,eo,document.createElement("div"));s.className="buttons",t.append(s);const i=l(this,Li).toolbarPosition;if(i){const{style:r}=t,o=l(this,Li)._uiManager.direction==="ltr"?1-i[0]:i[0];r.insetInlineEnd=`${100*o}%`,r.top=`calc(${100*i[1]}% + var(--editor-toolbar-vert-offset))`}return A(this,vs,p0).call(this),t}get div(){return l(this,to)}hide(){var t;l(this,to).classList.add("hidden"),(t=l(this,pa))==null||t.hideDropdown()}show(){var t;l(this,to).classList.remove("hidden"),(t=l(this,vu))==null||t.shown()}async addAltText(t){const e=await t.render();A(this,vs,Fh).call(this,e),l(this,eo).prepend(e,l(this,vs,Ff)),b(this,vu,t)}addColorPicker(t){b(this,pa,t);const e=t.renderButton();A(this,vs,Fh).call(this,e),l(this,eo).prepend(e,l(this,vs,Ff))}async addEditSignatureButton(t){const e=b(this,hc,await t.renderEditButton(l(this,Li)));A(this,vs,Fh).call(this,e),l(this,eo).prepend(e,l(this,vs,Ff))}updateEditSignatureButton(t){l(this,hc)&&(l(this,hc).title=t)}remove(){var t;l(this,to).remove(),(t=l(this,pa))==null||t.destroy(),b(this,pa,null)}};to=new WeakMap,pa=new WeakMap,Li=new WeakMap,eo=new WeakMap,vu=new WeakMap,hc=new WeakMap,yu=new WeakMap,Lp=new WeakSet,u0=function(t){t.stopPropagation()},vs=new WeakSet,d0=function(t){l(this,Li)._focusEventsAllowed=!1,Ue(t)},f0=function(t){l(this,Li)._focusEventsAllowed=!0,Ue(t)},Fh=function(t){const e=l(this,Li)._uiManager._signal;t.addEventListener("focusin",A(this,vs,d0).bind(this),{capture:!0,signal:e}),t.addEventListener("focusout",A(this,vs,f0).bind(this),{capture:!0,signal:e}),t.addEventListener("contextmenu",dn,{signal:e})},p0=function(){const{editorType:t,_uiManager:e}=l(this,Li),s=document.createElement("button");s.className="delete",s.tabIndex=0,s.setAttribute("data-l10n-id",l(tr,yu)[t]),A(this,vs,Fh).call(this,s),s.addEventListener("click",i=>{e.delete()},{signal:e._signal}),l(this,eo).append(s)},Ff=function(){const t=document.createElement("div");return t.className="divider",t},w(tr,Lp),w(tr,yu,null);let $m=tr;var wu,ga,ma,zo,g0,m0,b0;class wR{constructor(t){w(this,zo);w(this,wu,null);w(this,ga,null);w(this,ma);b(this,ma,t)}show(t,e,s){const[i,r]=A(this,zo,m0).call(this,e,s),{style:o}=l(this,ga)||b(this,ga,A(this,zo,g0).call(this));t.append(l(this,ga)),o.insetInlineEnd=`${100*i}%`,o.top=`calc(${100*r}% + var(--editor-toolbar-vert-offset))`}hide(){l(this,ga).remove()}}wu=new WeakMap,ga=new WeakMap,ma=new WeakMap,zo=new WeakSet,g0=function(){const t=b(this,ga,document.createElement("div"));t.className="editToolbar",t.setAttribute("role","toolbar"),t.addEventListener("contextmenu",dn,{signal:l(this,ma)._signal});const e=b(this,wu,document.createElement("div"));return e.className="buttons",t.append(e),A(this,zo,b0).call(this),t},m0=function(t,e){let s=0,i=0;for(const r of t){const o=r.y+r.height;if(o<s)continue;const a=r.x+(e?r.width:0);if(o>s){i=a,s=o;continue}e?a>i&&(i=a):a<i&&(i=a)}return[e?1-i:i,s]},b0=function(){const t=document.createElement("button");t.className="highlightButton",t.tabIndex=0,t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const e=document.createElement("span");t.append(e),e.className="visuallyHidden",e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const s=l(this,ma)._signal;t.addEventListener("contextmenu",dn,{signal:s}),t.addEventListener("click",()=>{l(this,ma).highlightSelection("floating_button")},{signal:s}),l(this,wu).append(t)};function S_(n,t,e){for(const s of e)t.addEventListener(s,n[s].bind(n))}var Mp;class AR{constructor(){w(this,Mp,0)}get id(){return`${iR}${Ns(this,Mp)._++}`}}Mp=new WeakMap;var uc,Au,Es,dc,$f;const L_=class L_{constructor(){w(this,dc);w(this,uc,c0());w(this,Au,0);w(this,Es,null)}static get _isSVGFittingCanvas(){const t='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',s=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),i=new Image;i.src=t;const r=i.decode().then(()=>(s.drawImage(i,0,0,1,1,0,0,1,3),new Uint32Array(s.getImageData(0,0,1,1).data.buffer)[0]===0));return jt(this,"_isSVGFittingCanvas",r)}async getFromFile(t){const{lastModified:e,name:s,size:i,type:r}=t;return A(this,dc,$f).call(this,`${e}_${s}_${i}_${r}`,t)}async getFromUrl(t){return A(this,dc,$f).call(this,t,t)}async getFromBlob(t,e){const s=await e;return A(this,dc,$f).call(this,t,s)}async getFromId(t){l(this,Es)||b(this,Es,new Map);const e=l(this,Es).get(t);if(!e)return null;if(e.bitmap)return e.refCounter+=1,e;if(e.file)return this.getFromFile(e.file);if(e.blobPromise){const{blobPromise:s}=e;return delete e.blobPromise,this.getFromBlob(e.id,s)}return this.getFromUrl(e.url)}getFromCanvas(t,e){l(this,Es)||b(this,Es,new Map);let s=l(this,Es).get(t);if(s!=null&&s.bitmap)return s.refCounter+=1,s;const i=new OffscreenCanvas(e.width,e.height);return i.getContext("2d").drawImage(e,0,0),s={bitmap:i.transferToImageBitmap(),id:`image_${l(this,uc)}_${Ns(this,Au)._++}`,refCounter:1,isSvg:!1},l(this,Es).set(t,s),l(this,Es).set(s.id,s),s}getSvgUrl(t){const e=l(this,Es).get(t);return e!=null&&e.isSvg?e.svgUrl:null}deleteId(t){var i;l(this,Es)||b(this,Es,new Map);const e=l(this,Es).get(t);if(!e||(e.refCounter-=1,e.refCounter!==0))return;const{bitmap:s}=e;if(!e.url&&!e.file){const r=new OffscreenCanvas(s.width,s.height);r.getContext("bitmaprenderer").transferFromImageBitmap(s),e.blobPromise=r.convertToBlob()}(i=s.close)==null||i.call(s),e.bitmap=null}isValidId(t){return t.startsWith(`image_${l(this,uc)}_`)}};uc=new WeakMap,Au=new WeakMap,Es=new WeakMap,dc=new WeakSet,$f=async function(t,e){l(this,Es)||b(this,Es,new Map);let s=l(this,Es).get(t);if(s===null)return null;if(s!=null&&s.bitmap)return s.refCounter+=1,s;try{s||(s={bitmap:null,id:`image_${l(this,uc)}_${Ns(this,Au)._++}`,refCounter:0,isSvg:!1});let i;if(typeof e=="string"?(s.url=e,i=await Gd(e,"blob")):e instanceof File?i=s.file=e:e instanceof Blob&&(i=e),i.type==="image/svg+xml"){const r=L_._isSVGFittingCanvas,o=new FileReader,a=new Image,c=new Promise((h,u)=>{a.onload=()=>{s.bitmap=a,s.isSvg=!0,h()},o.onload=async()=>{const f=s.svgUrl=o.result;a.src=await r?`${f}#svgView(preserveAspectRatio(none))`:f},a.onerror=o.onerror=u});o.readAsDataURL(i),await c}else s.bitmap=await createImageBitmap(i);s.refCounter=1}catch(i){kt(i),s=null}return l(this,Es).set(t,s),s&&l(this,Es).set(s.id,s),s};let Bm=L_;var Fe,so,Eu,Re;class ER{constructor(t=128){w(this,Fe,[]);w(this,so,!1);w(this,Eu);w(this,Re,-1);b(this,Eu,t)}add({cmd:t,undo:e,post:s,mustExec:i,type:r=NaN,overwriteIfSameType:o=!1,keepUndo:a=!1}){if(i&&t(),l(this,so))return;const c={cmd:t,undo:e,post:s,type:r};if(l(this,Re)===-1){l(this,Fe).length>0&&(l(this,Fe).length=0),b(this,Re,0),l(this,Fe).push(c);return}if(o&&l(this,Fe)[l(this,Re)].type===r){a&&(c.undo=l(this,Fe)[l(this,Re)].undo),l(this,Fe)[l(this,Re)]=c;return}const h=l(this,Re)+1;h===l(this,Eu)?l(this,Fe).splice(0,1):(b(this,Re,h),h<l(this,Fe).length&&l(this,Fe).splice(h)),l(this,Fe).push(c)}undo(){if(l(this,Re)===-1)return;b(this,so,!0);const{undo:t,post:e}=l(this,Fe)[l(this,Re)];t(),e==null||e(),b(this,so,!1),b(this,Re,l(this,Re)-1)}redo(){if(l(this,Re)<l(this,Fe).length-1){b(this,Re,l(this,Re)+1),b(this,so,!0);const{cmd:t,post:e}=l(this,Fe)[l(this,Re)];t(),e==null||e(),b(this,so,!1)}}hasSomethingToUndo(){return l(this,Re)!==-1}hasSomethingToRedo(){return l(this,Re)<l(this,Fe).length-1}cleanType(t){if(l(this,Re)!==-1){for(let e=l(this,Re);e>=0;e--)if(l(this,Fe)[e].type!==t){l(this,Fe).splice(e+1,l(this,Re)-e),b(this,Re,e);return}l(this,Fe).length=0,b(this,Re,-1)}}destroy(){b(this,Fe,null)}}Fe=new WeakMap,so=new WeakMap,Eu=new WeakMap,Re=new WeakMap;var Dp,_0;class Kd{constructor(t){w(this,Dp);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:e}=ys.platform;for(const[s,i,r={}]of t)for(const o of s){const a=o.startsWith("mac+");e&&a?(this.callbacks.set(o.slice(4),{callback:i,options:r}),this.allKeys.add(o.split("+").at(-1))):!e&&!a&&(this.callbacks.set(o,{callback:i,options:r}),this.allKeys.add(o.split("+").at(-1)))}}exec(t,e){if(!this.allKeys.has(e.key))return;const s=this.callbacks.get(A(this,Dp,_0).call(this,e));if(!s)return;const{callback:i,options:{bubbles:r=!1,args:o=[],checker:a=null}}=s;a&&!a(t,e)||(i.bind(t,...o,e)(),r||Ue(e))}}Dp=new WeakSet,_0=function(t){t.altKey&&this.buffer.push("alt"),t.ctrlKey&&this.buffer.push("ctrl"),t.metaKey&&this.buffer.push("meta"),t.shiftKey&&this.buffer.push("shift"),this.buffer.push(t.key);const e=this.buffer.join("+");return this.buffer.length=0,e};const Op=class Op{get _colors(){const t=new Map([["CanvasText",null],["Canvas",null]]);return yR(t),jt(this,"_colors",t)}convert(t){const e=E_(t);if(!window.matchMedia("(forced-colors: active)").matches)return e;for(const[s,i]of this._colors)if(i.every((r,o)=>r===e[o]))return Op._colorsMapping.get(s);return e}getHexCode(t){const e=this._colors.get(t);return e?pt.makeHexColor(...e):t}};J(Op,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Hm=Op;var fc,ai,Qe,hs,pc,sr,gc,Mi,io,no,mc,ba,En,Gi,_a,Su,xu,bc,Cu,Sn,ro,_c,oo,xn,Np,ao,Tu,lo,va,ya,co,Pu,ss,re,ir,ho,wa,Ru,ku,uo,Cn,nr,Iu,Di,nt,Bf,jm,v0,y0,Hf,w0,A0,E0,Vm,S0,Um,zm,x0,$s,Qn,C0,T0,Wm,P0,$h,qm;const ec=class ec{constructor(t,e,s,i,r,o,a,c,h,u,f,p,g,v){w(this,nt);w(this,fc,new AbortController);w(this,ai,null);w(this,Qe,new Map);w(this,hs,new Map);w(this,pc,null);w(this,sr,null);w(this,gc,null);w(this,Mi,new ER);w(this,io,null);w(this,no,null);w(this,mc,0);w(this,ba,new Set);w(this,En,null);w(this,Gi,null);w(this,_a,new Set);J(this,"_editorUndoBar",null);w(this,Su,!1);w(this,xu,!1);w(this,bc,!1);w(this,Cu,null);w(this,Sn,null);w(this,ro,null);w(this,_c,null);w(this,oo,!1);w(this,xn,null);w(this,Np,new AR);w(this,ao,!1);w(this,Tu,!1);w(this,lo,null);w(this,va,null);w(this,ya,null);w(this,co,null);w(this,Pu,null);w(this,ss,Tt.NONE);w(this,re,new Set);w(this,ir,null);w(this,ho,null);w(this,wa,null);w(this,Ru,null);w(this,ku,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});w(this,uo,[0,0]);w(this,Cn,null);w(this,nr,null);w(this,Iu,null);w(this,Di,null);const _=this._signal=l(this,fc).signal;b(this,nr,t),b(this,Iu,e),b(this,pc,s),b(this,ho,i),this._eventBus=r,r._on("editingaction",this.onEditingAction.bind(this),{signal:_}),r._on("pagechanging",this.onPageChanging.bind(this),{signal:_}),r._on("scalechanging",this.onScaleChanging.bind(this),{signal:_}),r._on("rotationchanging",this.onRotationChanging.bind(this),{signal:_}),r._on("setpreference",this.onSetPreference.bind(this),{signal:_}),r._on("switchannotationeditorparams",x=>this.updateParams(x.type,x.value),{signal:_}),A(this,nt,w0).call(this),A(this,nt,x0).call(this),A(this,nt,Vm).call(this),b(this,sr,o.annotationStorage),b(this,Cu,o.filterFactory),b(this,wa,a),b(this,_c,c||null),b(this,Su,h),b(this,xu,u),b(this,bc,f),b(this,Pu,p||null),this.viewParameters={realScale:Uo.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=g||null,this._supportsPinchToZoom=v!==!1}static get _keyboardManager(){const t=ec.prototype,e=o=>l(o,nr).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&o.hasSomethingToControl(),s=(o,{target:a})=>{if(a instanceof HTMLInputElement){const{type:c}=a;return c!=="text"&&c!=="number"}return!0},i=this.TRANSLATE_SMALL,r=this.TRANSLATE_BIG;return jt(this,"_keyboardManager",new Kd([[["ctrl+a","mac+meta+a"],t.selectAll,{checker:s}],[["ctrl+z","mac+meta+z"],t.undo,{checker:s}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],t.redo,{checker:s}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],t.delete,{checker:s}],[["Enter","mac+Enter"],t.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&l(o,nr).contains(a)&&!o.isEnterHandled}],[[" ","mac+ "],t.addNewEditorFromKeyboard,{checker:(o,{target:a})=>!(a instanceof HTMLButtonElement)&&l(o,nr).contains(document.activeElement)}],[["Escape","mac+Escape"],t.unselectAll],[["ArrowLeft","mac+ArrowLeft"],t.translateSelectedEditors,{args:[-i,0],checker:e}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t.translateSelectedEditors,{args:[-r,0],checker:e}],[["ArrowRight","mac+ArrowRight"],t.translateSelectedEditors,{args:[i,0],checker:e}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t.translateSelectedEditors,{args:[r,0],checker:e}],[["ArrowUp","mac+ArrowUp"],t.translateSelectedEditors,{args:[0,-i],checker:e}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t.translateSelectedEditors,{args:[0,-r],checker:e}],[["ArrowDown","mac+ArrowDown"],t.translateSelectedEditors,{args:[0,i],checker:e}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t.translateSelectedEditors,{args:[0,r],checker:e}]]))}destroy(){var t,e,s,i,r,o,a,c;(t=l(this,Di))==null||t.resolve(),b(this,Di,null),(e=l(this,fc))==null||e.abort(),b(this,fc,null),this._signal=null;for(const h of l(this,hs).values())h.destroy();l(this,hs).clear(),l(this,Qe).clear(),l(this,_a).clear(),(s=l(this,co))==null||s.clear(),b(this,ai,null),l(this,re).clear(),l(this,Mi).destroy(),(i=l(this,pc))==null||i.destroy(),(r=l(this,ho))==null||r.destroy(),(o=l(this,xn))==null||o.hide(),b(this,xn,null),(a=l(this,ya))==null||a.destroy(),b(this,ya,null),l(this,Sn)&&(clearTimeout(l(this,Sn)),b(this,Sn,null)),l(this,Cn)&&(clearTimeout(l(this,Cn)),b(this,Cn,null)),(c=this._editorUndoBar)==null||c.destroy()}combinedSignal(t){return AbortSignal.any([this._signal,t.signal])}get mlManager(){return l(this,Pu)}get useNewAltTextFlow(){return l(this,xu)}get useNewAltTextWhenAddingImage(){return l(this,bc)}get hcmFilter(){return jt(this,"hcmFilter",l(this,wa)?l(this,Cu).addHCMFilter(l(this,wa).foreground,l(this,wa).background):"none")}get direction(){return jt(this,"direction",getComputedStyle(l(this,nr)).direction)}get highlightColors(){return jt(this,"highlightColors",l(this,_c)?new Map(l(this,_c).split(",").map(t=>t.split("=").map(e=>e.trim()))):null)}get highlightColorNames(){return jt(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,t=>t.reverse())):null)}setCurrentDrawingSession(t){t?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),b(this,no,t)}setMainHighlightColorPicker(t){b(this,ya,t)}editAltText(t,e=!1){var s;(s=l(this,pc))==null||s.editAltText(this,t,e)}getSignature(t){var e;(e=l(this,ho))==null||e.getSignature({uiManager:this,editor:t})}get signatureManager(){return l(this,ho)}switchToMode(t,e){this._eventBus.on("annotationeditormodechanged",e,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:t})}setPreference(t,e){this._eventBus.dispatch("setpreference",{source:this,name:t,value:e})}onSetPreference({name:t,value:e}){switch(t){case"enableNewAltTextWhenAddingImage":b(this,bc,e);break}}onPageChanging({pageNumber:t}){b(this,mc,t-1)}focusMainContainer(){l(this,nr).focus()}findParent(t,e){for(const s of l(this,hs).values()){const{x:i,y:r,width:o,height:a}=s.div.getBoundingClientRect();if(t>=i&&t<=i+o&&e>=r&&e<=r+a)return s}return null}disableUserSelect(t=!1){l(this,Iu).classList.toggle("noUserSelect",t)}addShouldRescale(t){l(this,_a).add(t)}removeShouldRescale(t){l(this,_a).delete(t)}onScaleChanging({scale:t}){var e;this.commitOrRemove(),this.viewParameters.realScale=t*Uo.PDF_TO_CSS_UNITS;for(const s of l(this,_a))s.onScaleChanging();(e=l(this,no))==null||e.onScaleChanging()}onRotationChanging({pagesRotation:t}){this.commitOrRemove(),this.viewParameters.rotation=t}highlightSelection(t=""){const e=document.getSelection();if(!e||e.isCollapsed)return;const{anchorNode:s,anchorOffset:i,focusNode:r,focusOffset:o}=e,a=e.toString(),h=A(this,nt,Bf).call(this,e).closest(".textLayer"),u=this.getSelectionBoxes(h);if(!u)return;e.empty();const f=A(this,nt,jm).call(this,h),p=l(this,ss)===Tt.NONE,g=()=>{f==null||f.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:t,boxes:u,anchorNode:s,anchorOffset:i,focusNode:r,focusOffset:o,text:a}),p&&this.showAllEditors("highlight",!0,!0)};if(p){this.switchToMode(Tt.HIGHLIGHT,g);return}g()}addToAnnotationStorage(t){!t.isEmpty()&&l(this,sr)&&!l(this,sr).has(t.id)&&l(this,sr).setValue(t.id,t)}blur(){if(this.isShiftKeyDown=!1,l(this,oo)&&(b(this,oo,!1),A(this,nt,Hf).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:t}=document;for(const e of l(this,re))if(e.div.contains(t)){b(this,va,[e,t]),e._focusEventsAllowed=!1;break}}focus(){if(!l(this,va))return;const[t,e]=l(this,va);b(this,va,null),e.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:this._signal}),e.focus()}addEditListeners(){A(this,nt,Vm).call(this),A(this,nt,Um).call(this)}removeEditListeners(){A(this,nt,S0).call(this),A(this,nt,zm).call(this)}dragOver(t){for(const{type:e}of t.dataTransfer.items)for(const s of l(this,Gi))if(s.isHandlingMimeForPasting(e)){t.dataTransfer.dropEffect="copy",t.preventDefault();return}}drop(t){for(const e of t.dataTransfer.items)for(const s of l(this,Gi))if(s.isHandlingMimeForPasting(e.type)){s.paste(e,this.currentLayer),t.preventDefault();return}}copy(t){var s;if(t.preventDefault(),(s=l(this,ai))==null||s.commitOrRemove(),!this.hasSelection)return;const e=[];for(const i of l(this,re)){const r=i.serialize(!0);r&&e.push(r)}e.length!==0&&t.clipboardData.setData("application/pdfjs",JSON.stringify(e))}cut(t){this.copy(t),this.delete()}async paste(t){t.preventDefault();const{clipboardData:e}=t;for(const r of e.items)for(const o of l(this,Gi))if(o.isHandlingMimeForPasting(r.type)){o.paste(r,this.currentLayer);return}let s=e.getData("application/pdfjs");if(!s)return;try{s=JSON.parse(s)}catch(r){kt(`paste: "${r.message}".`);return}if(!Array.isArray(s))return;this.unselectAll();const i=this.currentLayer;try{const r=[];for(const c of s){const h=await i.deserialize(c);if(!h)return;r.push(h)}const o=()=>{for(const c of r)A(this,nt,Wm).call(this,c);A(this,nt,qm).call(this,r)},a=()=>{for(const c of r)c.remove()};this.addCommands({cmd:o,undo:a,mustExec:!0})}catch(r){kt(`paste: "${r.message}".`)}}keydown(t){!this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!0),l(this,ss)!==Tt.NONE&&!this.isEditorHandlingKeyboard&&ec._keyboardManager.exec(this,t)}keyup(t){this.isShiftKeyDown&&t.key==="Shift"&&(this.isShiftKeyDown=!1,l(this,oo)&&(b(this,oo,!1),A(this,nt,Hf).call(this,"main_toolbar")))}onEditingAction({name:t}){switch(t){case"undo":case"redo":case"delete":case"selectAll":this[t]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(t){t?(A(this,nt,A0).call(this),A(this,nt,Um).call(this),A(this,nt,$s).call(this,{isEditing:l(this,ss)!==Tt.NONE,isEmpty:A(this,nt,$h).call(this),hasSomethingToUndo:l(this,Mi).hasSomethingToUndo(),hasSomethingToRedo:l(this,Mi).hasSomethingToRedo(),hasSelectedEditor:!1})):(A(this,nt,E0).call(this),A(this,nt,zm).call(this),A(this,nt,$s).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(t){if(!l(this,Gi)){b(this,Gi,t);for(const e of l(this,Gi))A(this,nt,Qn).call(this,e.defaultPropertiesToUpdate)}}getId(){return l(this,Np).id}get currentLayer(){return l(this,hs).get(l(this,mc))}getLayer(t){return l(this,hs).get(t)}get currentPageIndex(){return l(this,mc)}addLayer(t){l(this,hs).set(t.pageIndex,t),l(this,ao)?t.enable():t.disable()}removeLayer(t){l(this,hs).delete(t.pageIndex)}async updateMode(t,e=null,s=!1){var i,r,o;if(l(this,ss)!==t&&!(l(this,Di)&&(await l(this,Di).promise,!l(this,Di)))){if(b(this,Di,Promise.withResolvers()),(i=l(this,no))==null||i.commitOrRemove(),b(this,ss,t),t===Tt.NONE){this.setEditingState(!1),A(this,nt,T0).call(this),(r=this._editorUndoBar)==null||r.hide(),l(this,Di).resolve();return}t===Tt.SIGNATURE&&await((o=l(this,ho))==null?void 0:o.loadSignatures()),this.setEditingState(!0),await A(this,nt,C0).call(this),this.unselectAll();for(const a of l(this,hs).values())a.updateMode(t);if(!e){s&&this.addNewEditorFromKeyboard(),l(this,Di).resolve();return}for(const a of l(this,Qe).values())a.annotationElementId===e?(this.setSelected(a),a.enterInEditMode()):a.unselect();l(this,Di).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(t){t!==l(this,ss)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:t})}updateParams(t,e){var s;if(l(this,Gi)){switch(t){case zt.CREATE:this.currentLayer.addNewEditor(e);return;case zt.HIGHLIGHT_DEFAULT_COLOR:(s=l(this,ya))==null||s.updateColor(e);break;case zt.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(l(this,Ru)||b(this,Ru,new Map)).set(t,e),this.showAllEditors("highlight",e);break}for(const i of l(this,re))i.updateParams(t,e);for(const i of l(this,Gi))i.updateDefaultParams(t,e)}}showAllEditors(t,e,s=!1){var r;for(const o of l(this,Qe).values())o.editorType===t&&o.show(e);(((r=l(this,Ru))==null?void 0:r.get(zt.HIGHLIGHT_SHOW_ALL))??!0)!==e&&A(this,nt,Qn).call(this,[[zt.HIGHLIGHT_SHOW_ALL,e]])}enableWaiting(t=!1){if(l(this,Tu)!==t){b(this,Tu,t);for(const e of l(this,hs).values())t?e.disableClick():e.enableClick(),e.div.classList.toggle("waiting",t)}}getEditors(t){const e=[];for(const s of l(this,Qe).values())s.pageIndex===t&&e.push(s);return e}getEditor(t){return l(this,Qe).get(t)}addEditor(t){l(this,Qe).set(t.id,t)}removeEditor(t){var e,s;t.div.contains(document.activeElement)&&(l(this,Sn)&&clearTimeout(l(this,Sn)),b(this,Sn,setTimeout(()=>{this.focusMainContainer(),b(this,Sn,null)},0))),l(this,Qe).delete(t.id),t.annotationElementId&&((e=l(this,co))==null||e.delete(t.annotationElementId)),this.unselect(t),(!t.annotationElementId||!l(this,ba).has(t.annotationElementId))&&((s=l(this,sr))==null||s.remove(t.id))}addDeletedAnnotationElement(t){l(this,ba).add(t.annotationElementId),this.addChangedExistingAnnotation(t),t.deleted=!0}isDeletedAnnotationElement(t){return l(this,ba).has(t)}removeDeletedAnnotationElement(t){l(this,ba).delete(t.annotationElementId),this.removeChangedExistingAnnotation(t),t.deleted=!1}setActiveEditor(t){l(this,ai)!==t&&(b(this,ai,t),t&&A(this,nt,Qn).call(this,t.propertiesToUpdate))}updateUI(t){l(this,nt,P0)===t&&A(this,nt,Qn).call(this,t.propertiesToUpdate)}updateUIForDefaultProperties(t){A(this,nt,Qn).call(this,t.defaultPropertiesToUpdate)}toggleSelected(t){if(l(this,re).has(t)){l(this,re).delete(t),t.unselect(),A(this,nt,$s).call(this,{hasSelectedEditor:this.hasSelection});return}l(this,re).add(t),t.select(),A(this,nt,Qn).call(this,t.propertiesToUpdate),A(this,nt,$s).call(this,{hasSelectedEditor:!0})}setSelected(t){var e;(e=l(this,no))==null||e.commitOrRemove();for(const s of l(this,re))s!==t&&s.unselect();l(this,re).clear(),l(this,re).add(t),t.select(),A(this,nt,Qn).call(this,t.propertiesToUpdate),A(this,nt,$s).call(this,{hasSelectedEditor:!0})}isSelected(t){return l(this,re).has(t)}get firstSelectedEditor(){return l(this,re).values().next().value}unselect(t){t.unselect(),l(this,re).delete(t),A(this,nt,$s).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return l(this,re).size!==0}get isEnterHandled(){return l(this,re).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var t;l(this,Mi).undo(),A(this,nt,$s).call(this,{hasSomethingToUndo:l(this,Mi).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:A(this,nt,$h).call(this)}),(t=this._editorUndoBar)==null||t.hide()}redo(){l(this,Mi).redo(),A(this,nt,$s).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:l(this,Mi).hasSomethingToRedo(),isEmpty:A(this,nt,$h).call(this)})}addCommands(t){l(this,Mi).add(t),A(this,nt,$s).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:A(this,nt,$h).call(this)})}cleanUndoStack(t){l(this,Mi).cleanType(t)}delete(){var r;this.commitOrRemove();const t=(r=this.currentLayer)==null?void 0:r.endDrawingSession(!0);if(!this.hasSelection&&!t)return;const e=t?[t]:[...l(this,re)],s=()=>{var o;(o=this._editorUndoBar)==null||o.show(i,e.length===1?e[0].editorType:e.length);for(const a of e)a.remove()},i=()=>{for(const o of e)A(this,nt,Wm).call(this,o)};this.addCommands({cmd:s,undo:i,mustExec:!0})}commitOrRemove(){var t;(t=l(this,ai))==null||t.commitOrRemove()}hasSomethingToControl(){return l(this,ai)||this.hasSelection}selectAll(){for(const t of l(this,re))t.commit();A(this,nt,qm).call(this,l(this,Qe).values())}unselectAll(){var t;if(!(l(this,ai)&&(l(this,ai).commitOrRemove(),l(this,ss)!==Tt.NONE))&&!((t=l(this,no))!=null&&t.commitOrRemove())&&this.hasSelection){for(const e of l(this,re))e.unselect();l(this,re).clear(),A(this,nt,$s).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(t,e,s=!1){if(s||this.commitOrRemove(),!this.hasSelection)return;l(this,uo)[0]+=t,l(this,uo)[1]+=e;const[i,r]=l(this,uo),o=[...l(this,re)],a=1e3;l(this,Cn)&&clearTimeout(l(this,Cn)),b(this,Cn,setTimeout(()=>{b(this,Cn,null),l(this,uo)[0]=l(this,uo)[1]=0,this.addCommands({cmd:()=>{for(const c of o)l(this,Qe).has(c.id)&&(c.translateInPage(i,r),c.translationDone())},undo:()=>{for(const c of o)l(this,Qe).has(c.id)&&(c.translateInPage(-i,-r),c.translationDone())},mustExec:!1})},a));for(const c of o)c.translateInPage(t,e),c.translationDone()}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),b(this,En,new Map);for(const t of l(this,re))l(this,En).set(t,{savedX:t.x,savedY:t.y,savedPageIndex:t.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!l(this,En))return!1;this.disableUserSelect(!1);const t=l(this,En);b(this,En,null);let e=!1;for(const[{x:i,y:r,pageIndex:o},a]of t)a.newX=i,a.newY=r,a.newPageIndex=o,e||(e=i!==a.savedX||r!==a.savedY||o!==a.savedPageIndex);if(!e)return!1;const s=(i,r,o,a)=>{if(l(this,Qe).has(i.id)){const c=l(this,hs).get(a);c?i._setParentAndPosition(c,r,o):(i.pageIndex=a,i.x=r,i.y=o)}};return this.addCommands({cmd:()=>{for(const[i,{newX:r,newY:o,newPageIndex:a}]of t)s(i,r,o,a)},undo:()=>{for(const[i,{savedX:r,savedY:o,savedPageIndex:a}]of t)s(i,r,o,a)},mustExec:!0}),!0}dragSelectedEditors(t,e){if(l(this,En))for(const s of l(this,En).keys())s.drag(t,e)}rebuild(t){if(t.parent===null){const e=this.getLayer(t.pageIndex);e?(e.changeParent(t),e.addOrRebuild(t)):(this.addEditor(t),this.addToAnnotationStorage(t),t.rebuild())}else t.parent.addOrRebuild(t)}get isEditorHandlingKeyboard(){var t;return((t=this.getActive())==null?void 0:t.shouldGetKeyboardEvents())||l(this,re).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(t){return l(this,ai)===t}getActive(){return l(this,ai)}getMode(){return l(this,ss)}get imageManager(){return jt(this,"imageManager",new Bm)}getSelectionBoxes(t){if(!t)return null;const e=document.getSelection();for(let h=0,u=e.rangeCount;h<u;h++)if(!t.contains(e.getRangeAt(h).commonAncestorContainer))return null;const{x:s,y:i,width:r,height:o}=t.getBoundingClientRect();let a;switch(t.getAttribute("data-main-rotation")){case"90":a=(h,u,f,p)=>({x:(u-i)/o,y:1-(h+f-s)/r,width:p/o,height:f/r});break;case"180":a=(h,u,f,p)=>({x:1-(h+f-s)/r,y:1-(u+p-i)/o,width:f/r,height:p/o});break;case"270":a=(h,u,f,p)=>({x:1-(u+p-i)/o,y:(h-s)/r,width:p/o,height:f/r});break;default:a=(h,u,f,p)=>({x:(h-s)/r,y:(u-i)/o,width:f/r,height:p/o});break}const c=[];for(let h=0,u=e.rangeCount;h<u;h++){const f=e.getRangeAt(h);if(!f.collapsed)for(const{x:p,y:g,width:v,height:_}of f.getClientRects())v===0||_===0||c.push(a(p,g,v,_))}return c.length===0?null:c}addChangedExistingAnnotation({annotationElementId:t,id:e}){(l(this,gc)||b(this,gc,new Map)).set(t,e)}removeChangedExistingAnnotation({annotationElementId:t}){var e;(e=l(this,gc))==null||e.delete(t)}renderAnnotationElement(t){var i;const e=(i=l(this,gc))==null?void 0:i.get(t.data.id);if(!e)return;const s=l(this,sr).getRawValue(e);s&&(l(this,ss)===Tt.NONE&&!s.hasBeenModified||s.renderAnnotationElement(t))}setMissingCanvas(t,e,s){var r;const i=(r=l(this,co))==null?void 0:r.get(t);i&&(i.setCanvas(e,s),l(this,co).delete(t))}addMissingCanvas(t,e){(l(this,co)||b(this,co,new Map)).set(t,e)}};fc=new WeakMap,ai=new WeakMap,Qe=new WeakMap,hs=new WeakMap,pc=new WeakMap,sr=new WeakMap,gc=new WeakMap,Mi=new WeakMap,io=new WeakMap,no=new WeakMap,mc=new WeakMap,ba=new WeakMap,En=new WeakMap,Gi=new WeakMap,_a=new WeakMap,Su=new WeakMap,xu=new WeakMap,bc=new WeakMap,Cu=new WeakMap,Sn=new WeakMap,ro=new WeakMap,_c=new WeakMap,oo=new WeakMap,xn=new WeakMap,Np=new WeakMap,ao=new WeakMap,Tu=new WeakMap,lo=new WeakMap,va=new WeakMap,ya=new WeakMap,co=new WeakMap,Pu=new WeakMap,ss=new WeakMap,re=new WeakMap,ir=new WeakMap,ho=new WeakMap,wa=new WeakMap,Ru=new WeakMap,ku=new WeakMap,uo=new WeakMap,Cn=new WeakMap,nr=new WeakMap,Iu=new WeakMap,Di=new WeakMap,nt=new WeakSet,Bf=function({anchorNode:t}){return t.nodeType===Node.TEXT_NODE?t.parentElement:t},jm=function(t){const{currentLayer:e}=this;if(e.hasTextLayer(t))return e;for(const s of l(this,hs).values())if(s.hasTextLayer(t))return s;return null},v0=function(){const t=document.getSelection();if(!t||t.isCollapsed)return;const s=A(this,nt,Bf).call(this,t).closest(".textLayer"),i=this.getSelectionBoxes(s);i&&(l(this,xn)||b(this,xn,new wR(this)),l(this,xn).show(s,i,this.direction==="ltr"))},y0=function(){var r,o,a;const t=document.getSelection();if(!t||t.isCollapsed){l(this,ir)&&((r=l(this,xn))==null||r.hide(),b(this,ir,null),A(this,nt,$s).call(this,{hasSelectedText:!1}));return}const{anchorNode:e}=t;if(e===l(this,ir))return;const i=A(this,nt,Bf).call(this,t).closest(".textLayer");if(!i){l(this,ir)&&((o=l(this,xn))==null||o.hide(),b(this,ir,null),A(this,nt,$s).call(this,{hasSelectedText:!1}));return}if((a=l(this,xn))==null||a.hide(),b(this,ir,e),A(this,nt,$s).call(this,{hasSelectedText:!0}),!(l(this,ss)!==Tt.HIGHLIGHT&&l(this,ss)!==Tt.NONE)&&(l(this,ss)===Tt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),b(this,oo,this.isShiftKeyDown),!this.isShiftKeyDown)){const c=l(this,ss)===Tt.HIGHLIGHT?A(this,nt,jm).call(this,i):null;c==null||c.toggleDrawing();const h=new AbortController,u=this.combinedSignal(h),f=p=>{p.type==="pointerup"&&p.button!==0||(h.abort(),c==null||c.toggleDrawing(!0),p.type==="pointerup"&&A(this,nt,Hf).call(this,"main_toolbar"))};window.addEventListener("pointerup",f,{signal:u}),window.addEventListener("blur",f,{signal:u})}},Hf=function(t=""){l(this,ss)===Tt.HIGHLIGHT?this.highlightSelection(t):l(this,Su)&&A(this,nt,v0).call(this)},w0=function(){document.addEventListener("selectionchange",A(this,nt,y0).bind(this),{signal:this._signal})},A0=function(){if(l(this,ro))return;b(this,ro,new AbortController);const t=this.combinedSignal(l(this,ro));window.addEventListener("focus",this.focus.bind(this),{signal:t}),window.addEventListener("blur",this.blur.bind(this),{signal:t})},E0=function(){var t;(t=l(this,ro))==null||t.abort(),b(this,ro,null)},Vm=function(){if(l(this,lo))return;b(this,lo,new AbortController);const t=this.combinedSignal(l(this,lo));window.addEventListener("keydown",this.keydown.bind(this),{signal:t}),window.addEventListener("keyup",this.keyup.bind(this),{signal:t})},S0=function(){var t;(t=l(this,lo))==null||t.abort(),b(this,lo,null)},Um=function(){if(l(this,io))return;b(this,io,new AbortController);const t=this.combinedSignal(l(this,io));document.addEventListener("copy",this.copy.bind(this),{signal:t}),document.addEventListener("cut",this.cut.bind(this),{signal:t}),document.addEventListener("paste",this.paste.bind(this),{signal:t})},zm=function(){var t;(t=l(this,io))==null||t.abort(),b(this,io,null)},x0=function(){const t=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:t}),document.addEventListener("drop",this.drop.bind(this),{signal:t})},$s=function(t){Object.entries(t).some(([s,i])=>l(this,ku)[s]!==i)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(l(this,ku),t)}),l(this,ss)===Tt.HIGHLIGHT&&t.hasSelectedEditor===!1&&A(this,nt,Qn).call(this,[[zt.HIGHLIGHT_FREE,!0]]))},Qn=function(t){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:t})},C0=async function(){if(!l(this,ao)){b(this,ao,!0);const t=[];for(const e of l(this,hs).values())t.push(e.enable());await Promise.all(t);for(const e of l(this,Qe).values())e.enable()}},T0=function(){if(this.unselectAll(),l(this,ao)){b(this,ao,!1);for(const t of l(this,hs).values())t.disable();for(const t of l(this,Qe).values())t.disable()}},Wm=function(t){const e=l(this,hs).get(t.pageIndex);e?e.addOrRebuild(t):(this.addEditor(t),this.addToAnnotationStorage(t))},P0=function(){let t=null;for(t of l(this,re));return t},$h=function(){if(l(this,Qe).size===0)return!0;if(l(this,Qe).size===1)for(const t of l(this,Qe).values())return t.isEmpty();return!1},qm=function(t){for(const e of l(this,re))e.unselect();l(this,re).clear();for(const e of t)e.isEmpty()||(l(this,re).add(e),e.select());A(this,nt,$s).call(this,{hasSelectedEditor:this.hasSelection})},J(ec,"TRANSLATE_SMALL",1),J(ec,"TRANSLATE_BIG",10);let wl=ec;var is,Tn,Xi,vc,Pn,li,yc,Rn,Ys,rr,Aa,kn,fo,ln,Bh,jf;const Bs=class Bs{constructor(t){w(this,ln);w(this,is,null);w(this,Tn,!1);w(this,Xi,null);w(this,vc,null);w(this,Pn,null);w(this,li,null);w(this,yc,!1);w(this,Rn,null);w(this,Ys,null);w(this,rr,null);w(this,Aa,null);w(this,kn,!1);b(this,Ys,t),b(this,kn,t._uiManager.useNewAltTextFlow),l(Bs,fo)||b(Bs,fo,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(t){Bs._l10n??(Bs._l10n=t)}async render(){const t=b(this,Xi,document.createElement("button"));t.className="altText",t.tabIndex="0";const e=b(this,vc,document.createElement("span"));t.append(e),l(this,kn)?(t.classList.add("new"),t.setAttribute("data-l10n-id",l(Bs,fo).missing),e.setAttribute("data-l10n-id",l(Bs,fo)["missing-label"])):(t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const s=l(this,Ys)._uiManager._signal;t.addEventListener("contextmenu",dn,{signal:s}),t.addEventListener("pointerdown",r=>r.stopPropagation(),{signal:s});const i=r=>{r.preventDefault(),l(this,Ys)._uiManager.editAltText(l(this,Ys)),l(this,kn)&&l(this,Ys)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:l(this,ln,Bh)}})};return t.addEventListener("click",i,{capture:!0,signal:s}),t.addEventListener("keydown",r=>{r.target===t&&r.key==="Enter"&&(b(this,yc,!0),i(r))},{signal:s}),await A(this,ln,jf).call(this),t}finish(){l(this,Xi)&&(l(this,Xi).focus({focusVisible:l(this,yc)}),b(this,yc,!1))}isEmpty(){return l(this,kn)?l(this,is)===null:!l(this,is)&&!l(this,Tn)}hasData(){return l(this,kn)?l(this,is)!==null||!!l(this,rr):this.isEmpty()}get guessedText(){return l(this,rr)}async setGuessedText(t){l(this,is)===null&&(b(this,rr,t),b(this,Aa,await Bs._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:t})),A(this,ln,jf).call(this))}toggleAltTextBadge(t=!1){var e;if(!l(this,kn)||l(this,is)){(e=l(this,Rn))==null||e.remove(),b(this,Rn,null);return}if(!l(this,Rn)){const s=b(this,Rn,document.createElement("div"));s.className="noAltTextBadge",l(this,Ys).div.append(s)}l(this,Rn).classList.toggle("hidden",!t)}serialize(t){let e=l(this,is);return!t&&l(this,rr)===e&&(e=l(this,Aa)),{altText:e,decorative:l(this,Tn),guessedText:l(this,rr),textWithDisclaimer:l(this,Aa)}}get data(){return{altText:l(this,is),decorative:l(this,Tn)}}set data({altText:t,decorative:e,guessedText:s,textWithDisclaimer:i,cancel:r=!1}){s&&(b(this,rr,s),b(this,Aa,i)),!(l(this,is)===t&&l(this,Tn)===e)&&(r||(b(this,is,t),b(this,Tn,e)),A(this,ln,jf).call(this))}toggle(t=!1){l(this,Xi)&&(!t&&l(this,li)&&(clearTimeout(l(this,li)),b(this,li,null)),l(this,Xi).disabled=!t)}shown(){l(this,Ys)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:l(this,ln,Bh)}})}destroy(){var t,e;(t=l(this,Xi))==null||t.remove(),b(this,Xi,null),b(this,vc,null),b(this,Pn,null),(e=l(this,Rn))==null||e.remove(),b(this,Rn,null)}};is=new WeakMap,Tn=new WeakMap,Xi=new WeakMap,vc=new WeakMap,Pn=new WeakMap,li=new WeakMap,yc=new WeakMap,Rn=new WeakMap,Ys=new WeakMap,rr=new WeakMap,Aa=new WeakMap,kn=new WeakMap,fo=new WeakMap,ln=new WeakSet,Bh=function(){return l(this,is)&&"added"||l(this,is)===null&&this.guessedText&&"review"||"missing"},jf=async function(){var i,r,o;const t=l(this,Xi);if(!t)return;if(l(this,kn)){if(t.classList.toggle("done",!!l(this,is)),t.setAttribute("data-l10n-id",l(Bs,fo)[l(this,ln,Bh)]),(i=l(this,vc))==null||i.setAttribute("data-l10n-id",l(Bs,fo)[`${l(this,ln,Bh)}-label`]),!l(this,is)){(r=l(this,Pn))==null||r.remove();return}}else{if(!l(this,is)&&!l(this,Tn)){t.classList.remove("done"),(o=l(this,Pn))==null||o.remove();return}t.classList.add("done"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let e=l(this,Pn);if(!e){b(this,Pn,e=document.createElement("span")),e.className="tooltip",e.setAttribute("role","tooltip"),e.id=`alt-text-tooltip-${l(this,Ys).id}`;const a=100,c=l(this,Ys)._uiManager._signal;c.addEventListener("abort",()=>{clearTimeout(l(this,li)),b(this,li,null)},{once:!0}),t.addEventListener("mouseenter",()=>{b(this,li,setTimeout(()=>{b(this,li,null),l(this,Pn).classList.add("show"),l(this,Ys)._reportTelemetry({action:"alt_text_tooltip"})},a))},{signal:c}),t.addEventListener("mouseleave",()=>{var h;l(this,li)&&(clearTimeout(l(this,li)),b(this,li,null)),(h=l(this,Pn))==null||h.classList.remove("show")},{signal:c})}l(this,Tn)?e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(e.removeAttribute("data-l10n-id"),e.textContent=l(this,is)),e.parentNode||t.append(e);const s=l(this,Ys).getElementForAltText();s==null||s.setAttribute("aria-describedby",e.id)},w(Bs,fo,null),J(Bs,"_l10n",null);let xp=Bs;var wc,Ea,Lu,Mu,Du,Ou,Nu,or,Sa,ar,xa,lr,Wo,R0,k0,I0;const M_=class M_{constructor({container:t,isPinchingDisabled:e=null,isPinchingStopped:s=null,onPinchStart:i=null,onPinching:r=null,onPinchEnd:o=null,signal:a}){w(this,Wo);w(this,wc);w(this,Ea,!1);w(this,Lu,null);w(this,Mu);w(this,Du);w(this,Ou);w(this,Nu);w(this,or,null);w(this,Sa);w(this,ar,null);w(this,xa);w(this,lr,null);b(this,wc,t),b(this,Lu,s),b(this,Mu,e),b(this,Du,i),b(this,Ou,r),b(this,Nu,o),b(this,xa,new AbortController),b(this,Sa,AbortSignal.any([a,l(this,xa).signal])),t.addEventListener("touchstart",A(this,Wo,R0).bind(this),{passive:!1,signal:l(this,Sa)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return 35/Fr.pixelRatio}destroy(){var t,e;(t=l(this,xa))==null||t.abort(),b(this,xa,null),(e=l(this,or))==null||e.abort(),b(this,or,null)}};wc=new WeakMap,Ea=new WeakMap,Lu=new WeakMap,Mu=new WeakMap,Du=new WeakMap,Ou=new WeakMap,Nu=new WeakMap,or=new WeakMap,Sa=new WeakMap,ar=new WeakMap,xa=new WeakMap,lr=new WeakMap,Wo=new WeakSet,R0=function(t){var i,r,o;if((i=l(this,Mu))!=null&&i.call(this))return;if(t.touches.length===1){if(l(this,or))return;const a=b(this,or,new AbortController),c=AbortSignal.any([l(this,Sa),a.signal]),h=l(this,wc),u={capture:!0,signal:c,passive:!1},f=p=>{var g;p.pointerType==="touch"&&((g=l(this,or))==null||g.abort(),b(this,or,null))};h.addEventListener("pointerdown",p=>{p.pointerType==="touch"&&(Ue(p),f(p))},u),h.addEventListener("pointerup",f,u),h.addEventListener("pointercancel",f,u);return}if(!l(this,lr)){b(this,lr,new AbortController);const a=AbortSignal.any([l(this,Sa),l(this,lr).signal]),c=l(this,wc),h={signal:a,capture:!1,passive:!1};c.addEventListener("touchmove",A(this,Wo,k0).bind(this),h);const u=A(this,Wo,I0).bind(this);c.addEventListener("touchend",u,h),c.addEventListener("touchcancel",u,h),h.capture=!0,c.addEventListener("pointerdown",Ue,h),c.addEventListener("pointermove",Ue,h),c.addEventListener("pointercancel",Ue,h),c.addEventListener("pointerup",Ue,h),(r=l(this,Du))==null||r.call(this)}if(Ue(t),t.touches.length!==2||(o=l(this,Lu))!=null&&o.call(this)){b(this,ar,null);return}let[e,s]=t.touches;e.identifier>s.identifier&&([e,s]=[s,e]),b(this,ar,{touch0X:e.screenX,touch0Y:e.screenY,touch1X:s.screenX,touch1Y:s.screenY})},k0=function(t){var R;if(!l(this,ar)||t.touches.length!==2)return;Ue(t);let[e,s]=t.touches;e.identifier>s.identifier&&([e,s]=[s,e]);const{screenX:i,screenY:r}=e,{screenX:o,screenY:a}=s,c=l(this,ar),{touch0X:h,touch0Y:u,touch1X:f,touch1Y:p}=c,g=f-h,v=p-u,_=o-i,x=a-r,S=Math.hypot(_,x)||1,C=Math.hypot(g,v)||1;if(!l(this,Ea)&&Math.abs(C-S)<=M_.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(c.touch0X=i,c.touch0Y=r,c.touch1X=o,c.touch1Y=a,!l(this,Ea)){b(this,Ea,!0);return}const T=[(i+o)/2,(r+a)/2];(R=l(this,Ou))==null||R.call(this,T,C,S)},I0=function(t){var e;t.touches.length>=2||(l(this,lr)&&(l(this,lr).abort(),b(this,lr,null),(e=l(this,Nu))==null||e.call(this)),l(this,ar)&&(Ue(t),b(this,ar,null),b(this,Ea,!1)))};let Cp=M_;var Ca,Ki,Ae,Ac,po,Fu,Ta,us,Pa,cr,go,$u,Ra,ci,Bu,ka,hr,In,Ec,Sc,Oi,Ia,Hu,Fp,wt,Gm,ju,Xm,Vf,L0,M0,Km,Uf,Ym,D0,O0,N0,Qm,F0,Jm,$0,B0,H0,Zm,Hh;const Ot=class Ot{constructor(t){w(this,wt);w(this,Ca,null);w(this,Ki,null);w(this,Ae,null);w(this,Ac,!1);w(this,po,null);w(this,Fu,"");w(this,Ta,!1);w(this,us,null);w(this,Pa,null);w(this,cr,null);w(this,go,null);w(this,$u,"");w(this,Ra,!1);w(this,ci,null);w(this,Bu,!1);w(this,ka,!1);w(this,hr,!1);w(this,In,null);w(this,Ec,0);w(this,Sc,0);w(this,Oi,null);w(this,Ia,null);J(this,"_isCopy",!1);J(this,"_editToolbar",null);J(this,"_initialOptions",Object.create(null));J(this,"_initialData",null);J(this,"_isVisible",!0);J(this,"_uiManager",null);J(this,"_focusEventsAllowed",!0);w(this,Hu,!1);w(this,Fp,Ot._zIndex++);this.parent=t.parent,this.id=t.id,this.width=this.height=null,this.pageIndex=t.parent.pageIndex,this.name=t.name,this.div=null,this._uiManager=t.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=t.isCentered,this._structTreeParentId=null;const{rotation:e,rawDims:{pageWidth:s,pageHeight:i,pageX:r,pageY:o}}=this.parent.viewport;this.rotation=e,this.pageRotation=(360+e-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[s,i],this.pageTranslation=[r,o];const[a,c]=this.parentDimensions;this.x=t.x/a,this.y=t.y/c,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const t=Ot.prototype._resizeWithKeyboard,e=wl.TRANSLATE_SMALL,s=wl.TRANSLATE_BIG;return jt(this,"_resizerKeyboardManager",new Kd([[["ArrowLeft","mac+ArrowLeft"],t,{args:[-e,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t,{args:[-s,0]}],[["ArrowRight","mac+ArrowRight"],t,{args:[e,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t,{args:[s,0]}],[["ArrowUp","mac+ArrowUp"],t,{args:[0,-e]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t,{args:[0,-s]}],[["ArrowDown","mac+ArrowDown"],t,{args:[0,e]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t,{args:[0,s]}],[["Escape","mac+Escape"],Ot.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return jt(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(t){const e=new SR({id:t.parent.getNextId(),parent:t.parent,uiManager:t._uiManager});e.annotationElementId=t.annotationElementId,e.deleted=!0,e._uiManager.addToAnnotationStorage(e)}static initialize(t,e){if(Ot._l10n??(Ot._l10n=t),Ot._l10nResizer||(Ot._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),Ot._borderLineWidth!==-1)return;const s=getComputedStyle(document.documentElement);Ot._borderLineWidth=parseFloat(s.getPropertyValue("--outline-width"))||0}static updateDefaultParams(t,e){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(t){return!1}static paste(t,e){ue("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return l(this,Hu)}set _isDraggable(t){var e;b(this,Hu,t),(e=this.div)==null||e.classList.toggle("draggable",t)}get isEnterHandled(){return!0}center(){const[t,e]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*e/(t*2),this.y+=this.width*t/(e*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*e/(t*2),this.y-=this.width*t/(e*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(t){this._uiManager.addCommands(t)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=l(this,Fp)}setParent(t){t!==null?(this.pageIndex=t.pageIndex,this.pageDimensions=t.pageDimensions):A(this,wt,Hh).call(this),this.parent=t}focusin(t){this._focusEventsAllowed&&(l(this,Ra)?b(this,Ra,!1):this.parent.setSelected(this))}focusout(t){var s;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const e=t.relatedTarget;e!=null&&e.closest(`#${this.id}`)||(t.preventDefault(),(s=this.parent)!=null&&s.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(t,e,s,i){const[r,o]=this.parentDimensions;[s,i]=this.screenToPageTranslation(s,i),this.x=(t+s)/r,this.y=(e+i)/o,this.fixAndSetPosition()}_moveAfterPaste(t,e){const[s,i]=this.parentDimensions;this.setAt(t*s,e*i,this.width*s,this.height*i),this._onTranslated()}translate(t,e){A(this,wt,Gm).call(this,this.parentDimensions,t,e)}translateInPage(t,e){l(this,ci)||b(this,ci,[this.x,this.y,this.width,this.height]),A(this,wt,Gm).call(this,this.pageDimensions,t,e),this.div.scrollIntoView({block:"nearest"})}translationDone(){this._onTranslated(this.x,this.y)}drag(t,e){l(this,ci)||b(this,ci,[this.x,this.y,this.width,this.height]);const{div:s,parentDimensions:[i,r]}=this;if(this.x+=t/i,this.y+=e/r,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:f,y:p}=this.div.getBoundingClientRect();this.parent.findNewParent(this,f,p)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:o,y:a}=this;const[c,h]=this.getBaseTranslation();o+=c,a+=h;const{style:u}=s;u.left=`${(100*o).toFixed(2)}%`,u.top=`${(100*a).toFixed(2)}%`,this._onTranslating(o,a),s.scrollIntoView({block:"nearest"})}_onTranslating(t,e){}_onTranslated(t,e){}get _hasBeenMoved(){return!!l(this,ci)&&(l(this,ci)[0]!==this.x||l(this,ci)[1]!==this.y)}get _hasBeenResized(){return!!l(this,ci)&&(l(this,ci)[2]!==this.width||l(this,ci)[3]!==this.height)}getBaseTranslation(){const[t,e]=this.parentDimensions,{_borderLineWidth:s}=Ot,i=s/t,r=s/e;switch(this.rotation){case 90:return[-i,r];case 180:return[i,r];case 270:return[i,-r];default:return[-i,-r]}}get _mustFixPosition(){return!0}fixAndSetPosition(t=this.rotation){const{div:{style:e},pageDimensions:[s,i]}=this;let{x:r,y:o,width:a,height:c}=this;if(a*=s,c*=i,r*=s,o*=i,this._mustFixPosition)switch(t){case 0:r=zs(r,0,s-a),o=zs(o,0,i-c);break;case 90:r=zs(r,0,s-c),o=zs(o,a,i);break;case 180:r=zs(r,a,s),o=zs(o,c,i);break;case 270:r=zs(r,c,s),o=zs(o,0,i-a);break}this.x=r/=s,this.y=o/=i;const[h,u]=this.getBaseTranslation();r+=h,o+=u,e.left=`${(100*r).toFixed(2)}%`,e.top=`${(100*o).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(t,e){var s;return A(s=Ot,ju,Xm).call(s,t,e,this.parentRotation)}pageTranslationToScreen(t,e){var s;return A(s=Ot,ju,Xm).call(s,t,e,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:t,pageDimensions:[e,s]}=this;return[e*t,s*t]}setDims(t,e){const[s,i]=this.parentDimensions,{style:r}=this.div;r.width=`${(100*t/s).toFixed(2)}%`,l(this,Ta)||(r.height=`${(100*e/i).toFixed(2)}%`)}fixDims(){const{style:t}=this.div,{height:e,width:s}=t,i=s.endsWith("%"),r=!l(this,Ta)&&e.endsWith("%");if(i&&r)return;const[o,a]=this.parentDimensions;i||(t.width=`${(100*parseFloat(s)/o).toFixed(2)}%`),!l(this,Ta)&&!r&&(t.height=`${(100*parseFloat(e)/a).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(t){return Math.round(t*1e4)/1e4}_onResizing(){}altTextFinish(){var t;(t=l(this,Ae))==null||t.finish()}async addEditToolbar(){return this._editToolbar||l(this,ka)?this._editToolbar:(this._editToolbar=new $m(this),this.div.append(this._editToolbar.render()),l(this,Ae)&&await this._editToolbar.addAltText(l(this,Ae)),this._editToolbar)}removeEditToolbar(){var t;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(t=l(this,Ae))==null||t.destroy())}addContainer(t){var s;const e=(s=this._editToolbar)==null?void 0:s.div;e?e.before(t):this.div.append(t)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){l(this,Ae)||(xp.initialize(Ot._l10n),b(this,Ae,new xp(this)),l(this,Ca)&&(l(this,Ae).data=l(this,Ca),b(this,Ca,null)),await this.addEditToolbar())}get altTextData(){var t;return(t=l(this,Ae))==null?void 0:t.data}set altTextData(t){l(this,Ae)&&(l(this,Ae).data=t)}get guessedAltText(){var t;return(t=l(this,Ae))==null?void 0:t.guessedText}async setGuessedAltText(t){var e;await((e=l(this,Ae))==null?void 0:e.setGuessedText(t))}serializeAltText(t){var e;return(e=l(this,Ae))==null?void 0:e.serialize(t)}hasAltText(){return!!l(this,Ae)&&!l(this,Ae).isEmpty()}hasAltTextData(){var t;return((t=l(this,Ae))==null?void 0:t.hasData())??!1}render(){var o;const t=this.div=document.createElement("div");t.setAttribute("data-editor-rotation",(360-this.rotation)%360),t.className=this.name,t.setAttribute("id",this.id),t.tabIndex=l(this,Ac)?-1:0,t.setAttribute("role","application"),this.defaultL10nId&&t.setAttribute("data-l10n-id",this.defaultL10nId),this._isVisible||t.classList.add("hidden"),this.setInForeground(),A(this,wt,Jm).call(this);const[e,s]=this.parentDimensions;this.parentRotation%180!==0&&(t.style.maxWidth=`${(100*s/e).toFixed(2)}%`,t.style.maxHeight=`${(100*e/s).toFixed(2)}%`);const[i,r]=this.getInitialTranslation();return this.translate(i,r),S_(this,t,["keydown","pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(l(this,Ia)||b(this,Ia,new Cp({container:t,isPinchingDisabled:()=>!this.isSelected,onPinchStart:A(this,wt,D0).bind(this),onPinching:A(this,wt,O0).bind(this),onPinchEnd:A(this,wt,N0).bind(this),signal:this._uiManager._signal}))),(o=this._uiManager._editorUndoBar)==null||o.hide(),t}pointerdown(t){const{isMac:e}=ys.platform;if(t.button!==0||t.ctrlKey&&e){t.preventDefault();return}if(b(this,Ra,!0),this._isDraggable){A(this,wt,F0).call(this,t);return}A(this,wt,Qm).call(this,t)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){l(this,In)&&clearTimeout(l(this,In)),b(this,In,setTimeout(()=>{var t;b(this,In,null),(t=this.parent)==null||t.moveEditorInDOM(this)},0))}_setParentAndPosition(t,e,s){t.changeParent(this),this.x=e,this.y=s,this.fixAndSetPosition(),this._onTranslated()}getRect(t,e,s=this.rotation){const i=this.parentScale,[r,o]=this.pageDimensions,[a,c]=this.pageTranslation,h=t/i,u=e/i,f=this.x*r,p=this.y*o,g=this.width*r,v=this.height*o;switch(s){case 0:return[f+h+a,o-p-u-v+c,f+h+g+a,o-p-u+c];case 90:return[f+u+a,o-p+h+c,f+u+v+a,o-p+h+g+c];case 180:return[f-h-g+a,o-p+u+c,f-h+a,o-p+u+v+c];case 270:return[f-u-v+a,o-p-h-g+c,f-u+a,o-p-h+c];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(t,e){const[s,i,r,o]=t,a=r-s,c=o-i;switch(this.rotation){case 0:return[s,e-o,a,c];case 90:return[s,e-i,c,a];case 180:return[r,e-i,a,c];case 270:return[r,e-o,c,a];default:throw new Error("Invalid rotation")}}onceAdded(t){}isEmpty(){return!1}enableEditMode(){b(this,ka,!0)}disableEditMode(){b(this,ka,!1)}isInEditMode(){return l(this,ka)}shouldGetKeyboardEvents(){return l(this,hr)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:t,left:e,bottom:s,right:i}=this.getClientDimensions(),{innerHeight:r,innerWidth:o}=window;return e<o&&i>0&&t<r&&s>0}rebuild(){A(this,wt,Jm).call(this)}rotate(t){}resize(){}serializeDeleted(){var t;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((t=this._initialData)==null?void 0:t.popupRef)||""}}serialize(t=!1,e=null){ue("An editor must be serializable")}static async deserialize(t,e,s){const i=new this.prototype.constructor({parent:e,id:e.getNextId(),uiManager:s});i.rotation=t.rotation,b(i,Ca,t.accessibilityData),i._isCopy=t.isCopy||!1;const[r,o]=i.pageDimensions,[a,c,h,u]=i.getRectInCurrentCoords(t.rect,o);return i.x=a/r,i.y=c/o,i.width=h/r,i.height=u/o,i}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var t,e;if((t=l(this,go))==null||t.abort(),b(this,go,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),l(this,In)&&(clearTimeout(l(this,In)),b(this,In,null)),A(this,wt,Hh).call(this),this.removeEditToolbar(),l(this,Oi)){for(const s of l(this,Oi).values())clearTimeout(s);b(this,Oi,null)}this.parent=null,(e=l(this,Ia))==null||e.destroy(),b(this,Ia,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(A(this,wt,L0).call(this),l(this,us).classList.remove("hidden"))}get toolbarPosition(){return null}keydown(t){if(!this.isResizable||t.target!==this.div||t.key!=="Enter")return;this._uiManager.setSelected(this),b(this,cr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const e=l(this,us).children;if(!l(this,Ki)){b(this,Ki,Array.from(e));const o=A(this,wt,$0).bind(this),a=A(this,wt,B0).bind(this),c=this._uiManager._signal;for(const h of l(this,Ki)){const u=h.getAttribute("data-resizer-name");h.setAttribute("role","spinbutton"),h.addEventListener("keydown",o,{signal:c}),h.addEventListener("blur",a,{signal:c}),h.addEventListener("focus",A(this,wt,H0).bind(this,u),{signal:c}),h.setAttribute("data-l10n-id",Ot._l10nResizer[u])}}const s=l(this,Ki)[0];let i=0;for(const o of e){if(o===s)break;i++}const r=(360-this.rotation+this.parentRotation)%360/90*(l(this,Ki).length/4);if(r!==i){if(r<i)for(let a=0;a<i-r;a++)l(this,us).append(l(this,us).firstChild);else if(r>i)for(let a=0;a<r-i;a++)l(this,us).firstChild.before(l(this,us).lastChild);let o=0;for(const a of e){const h=l(this,Ki)[o++].getAttribute("data-resizer-name");a.setAttribute("data-l10n-id",Ot._l10nResizer[h])}}A(this,wt,Zm).call(this,0),b(this,hr,!0),l(this,us).firstChild.focus({focusVisible:!0}),t.preventDefault(),t.stopImmediatePropagation()}_resizeWithKeyboard(t,e){l(this,hr)&&A(this,wt,Ym).call(this,l(this,$u),{deltaX:t,deltaY:e,fromKeyboard:!0})}_stopResizingWithKeyboard(){A(this,wt,Hh).call(this),this.div.focus()}select(){var t,e,s;if(this.makeResizable(),(t=this.div)==null||t.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var i,r;(i=this.div)!=null&&i.classList.contains("selectedEditor")&&((r=this._editToolbar)==null||r.show())});return}(e=this._editToolbar)==null||e.show(),(s=l(this,Ae))==null||s.toggleAltTextBadge(!1)}unselect(){var t,e,s,i,r;(t=l(this,us))==null||t.classList.add("hidden"),(e=this.div)==null||e.classList.remove("selectedEditor"),(s=this.div)!=null&&s.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(i=this._editToolbar)==null||i.hide(),(r=l(this,Ae))==null||r.toggleAltTextBadge(!0)}updateParams(t,e){}disableEditing(){}enableEditing(){}enterInEditMode(){}getElementForAltText(){return this.div}get contentDiv(){return this.div}get isEditing(){return l(this,Bu)}set isEditing(t){b(this,Bu,t),this.parent&&(t?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(t,e){b(this,Ta,!0);const s=t/e,{style:i}=this.div;i.aspectRatio=s,i.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(t,e=!1){if(e){l(this,Oi)||b(this,Oi,new Map);const{action:s}=t;let i=l(this,Oi).get(s);i&&clearTimeout(i),i=setTimeout(()=>{this._reportTelemetry(t),l(this,Oi).delete(s),l(this,Oi).size===0&&b(this,Oi,null)},Ot._telemetryTimeout),l(this,Oi).set(s,i);return}t.type||(t.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:t}})}show(t=this._isVisible){this.div.classList.toggle("hidden",!t),this._isVisible=t}enable(){this.div&&(this.div.tabIndex=0),b(this,Ac,!1)}disable(){this.div&&(this.div.tabIndex=-1),b(this,Ac,!0)}renderAnnotationElement(t){let e=t.container.querySelector(".annotationContent");if(!e)e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),t.container.prepend(e);else if(e.nodeName==="CANVAS"){const s=e;e=document.createElement("div"),e.classList.add("annotationContent",this.editorType),s.before(e)}return e}resetAnnotationElement(t){const{firstChild:e}=t.container;(e==null?void 0:e.nodeName)==="DIV"&&e.classList.contains("annotationContent")&&e.remove()}};Ca=new WeakMap,Ki=new WeakMap,Ae=new WeakMap,Ac=new WeakMap,po=new WeakMap,Fu=new WeakMap,Ta=new WeakMap,us=new WeakMap,Pa=new WeakMap,cr=new WeakMap,go=new WeakMap,$u=new WeakMap,Ra=new WeakMap,ci=new WeakMap,Bu=new WeakMap,ka=new WeakMap,hr=new WeakMap,In=new WeakMap,Ec=new WeakMap,Sc=new WeakMap,Oi=new WeakMap,Ia=new WeakMap,Hu=new WeakMap,Fp=new WeakMap,wt=new WeakSet,Gm=function([t,e],s,i){[s,i]=this.screenToPageTranslation(s,i),this.x+=s/t,this.y+=i/e,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},ju=new WeakSet,Xm=function(t,e,s){switch(s){case 90:return[e,-t];case 180:return[-t,-e];case 270:return[-e,t];default:return[t,e]}},Vf=function(t){switch(t){case 90:{const[e,s]=this.pageDimensions;return[0,-e/s,s/e,0]}case 180:return[-1,0,0,-1];case 270:{const[e,s]=this.pageDimensions;return[0,e/s,-s/e,0]}default:return[1,0,0,1]}},L0=function(){if(l(this,us))return;b(this,us,document.createElement("div")),l(this,us).classList.add("resizers");const t=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],e=this._uiManager._signal;for(const s of t){const i=document.createElement("div");l(this,us).append(i),i.classList.add("resizer",s),i.setAttribute("data-resizer-name",s),i.addEventListener("pointerdown",A(this,wt,M0).bind(this,s),{signal:e}),i.addEventListener("contextmenu",dn,{signal:e}),i.tabIndex=-1}this.div.prepend(l(this,us))},M0=function(t,e){var u;e.preventDefault();const{isMac:s}=ys.platform;if(e.button!==0||e.ctrlKey&&s)return;(u=l(this,Ae))==null||u.toggle(!1);const i=this._isDraggable;this._isDraggable=!1,b(this,Pa,[e.screenX,e.screenY]);const r=new AbortController,o=this._uiManager.combinedSignal(r);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",A(this,wt,Ym).bind(this,t),{passive:!0,capture:!0,signal:o}),window.addEventListener("touchmove",Ue,{passive:!1,signal:o}),window.addEventListener("contextmenu",dn,{signal:o}),b(this,cr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const a=this.parent.div.style.cursor,c=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(e.target).cursor;const h=()=>{var f;r.abort(),this.parent.togglePointerEvents(!0),(f=l(this,Ae))==null||f.toggle(!0),this._isDraggable=i,this.parent.div.style.cursor=a,this.div.style.cursor=c,A(this,wt,Uf).call(this)};window.addEventListener("pointerup",h,{signal:o}),window.addEventListener("blur",h,{signal:o})},Km=function(t,e,s,i){this.width=s,this.height=i,this.x=t,this.y=e;const[r,o]=this.parentDimensions;this.setDims(r*s,o*i),this.fixAndSetPosition(),this._onResized()},Uf=function(){if(!l(this,cr))return;const{savedX:t,savedY:e,savedWidth:s,savedHeight:i}=l(this,cr);b(this,cr,null);const r=this.x,o=this.y,a=this.width,c=this.height;r===t&&o===e&&a===s&&c===i||this.addCommands({cmd:A(this,wt,Km).bind(this,r,o,a,c),undo:A(this,wt,Km).bind(this,t,e,s,i),mustExec:!0})},Ym=function(t,e){const[s,i]=this.parentDimensions,r=this.x,o=this.y,a=this.width,c=this.height,h=Ot.MIN_SIZE/s,u=Ot.MIN_SIZE/i,f=A(this,wt,Vf).call(this,this.rotation),p=(Q,X)=>[f[0]*Q+f[2]*X,f[1]*Q+f[3]*X],g=A(this,wt,Vf).call(this,360-this.rotation),v=(Q,X)=>[g[0]*Q+g[2]*X,g[1]*Q+g[3]*X];let _,x,S=!1,C=!1;switch(t){case"topLeft":S=!0,_=(Q,X)=>[0,0],x=(Q,X)=>[Q,X];break;case"topMiddle":_=(Q,X)=>[Q/2,0],x=(Q,X)=>[Q/2,X];break;case"topRight":S=!0,_=(Q,X)=>[Q,0],x=(Q,X)=>[0,X];break;case"middleRight":C=!0,_=(Q,X)=>[Q,X/2],x=(Q,X)=>[0,X/2];break;case"bottomRight":S=!0,_=(Q,X)=>[Q,X],x=(Q,X)=>[0,0];break;case"bottomMiddle":_=(Q,X)=>[Q/2,X],x=(Q,X)=>[Q/2,0];break;case"bottomLeft":S=!0,_=(Q,X)=>[0,X],x=(Q,X)=>[Q,0];break;case"middleLeft":C=!0,_=(Q,X)=>[0,X/2],x=(Q,X)=>[Q,X/2];break}const T=_(a,c),R=x(a,c);let I=p(...R);const F=Ot._round(r+I[0]),N=Ot._round(o+I[1]);let H=1,V=1,Y,Z;if(e.fromKeyboard)({deltaX:Y,deltaY:Z}=e);else{const{screenX:Q,screenY:X}=e,[Ct,Le]=l(this,Pa);[Y,Z]=this.screenToPageTranslation(Q-Ct,X-Le),l(this,Pa)[0]=Q,l(this,Pa)[1]=X}if([Y,Z]=v(Y/s,Z/i),S){const Q=Math.hypot(a,c);H=V=Math.max(Math.min(Math.hypot(R[0]-T[0]-Y,R[1]-T[1]-Z)/Q,1/a,1/c),h/a,u/c)}else C?H=zs(Math.abs(R[0]-T[0]-Y),h,1)/a:V=zs(Math.abs(R[1]-T[1]-Z),u,1)/c;const vt=Ot._round(a*H),At=Ot._round(c*V);I=p(...x(vt,At));const St=F-I[0],fe=N-I[1];l(this,ci)||b(this,ci,[this.x,this.y,this.width,this.height]),this.width=vt,this.height=At,this.x=St,this.y=fe,this.setDims(s*vt,i*At),this.fixAndSetPosition(),this._onResizing()},D0=function(){var t;b(this,cr,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(t=l(this,Ae))==null||t.toggle(!1),this.parent.togglePointerEvents(!1)},O0=function(t,e,s){let r=.7*(s/e)+1-.7;if(r===1)return;const o=A(this,wt,Vf).call(this,this.rotation),a=(F,N)=>[o[0]*F+o[2]*N,o[1]*F+o[3]*N],[c,h]=this.parentDimensions,u=this.x,f=this.y,p=this.width,g=this.height,v=Ot.MIN_SIZE/c,_=Ot.MIN_SIZE/h;r=Math.max(Math.min(r,1/p,1/g),v/p,_/g);const x=Ot._round(p*r),S=Ot._round(g*r);if(x===p&&S===g)return;l(this,ci)||b(this,ci,[u,f,p,g]);const C=a(p/2,g/2),T=Ot._round(u+C[0]),R=Ot._round(f+C[1]),I=a(x/2,S/2);this.x=T-I[0],this.y=R-I[1],this.width=x,this.height=S,this.setDims(c*x,h*S),this.fixAndSetPosition(),this._onResizing()},N0=function(){var t;(t=l(this,Ae))==null||t.toggle(!0),this.parent.togglePointerEvents(!0),A(this,wt,Uf).call(this)},Qm=function(t){const{isMac:e}=ys.platform;t.ctrlKey&&!e||t.shiftKey||t.metaKey&&e?this.parent.toggleSelected(this):this.parent.setSelected(this)},F0=function(t){const{isSelected:e}=this;this._uiManager.setUpDragSession();let s=!1;const i=new AbortController,r=this._uiManager.combinedSignal(i),o={capture:!0,passive:!1,signal:r},a=h=>{i.abort(),b(this,po,null),b(this,Ra,!1),this._uiManager.endDragSession()||A(this,wt,Qm).call(this,h),s&&this._onStopDragging()};e&&(b(this,Ec,t.clientX),b(this,Sc,t.clientY),b(this,po,t.pointerId),b(this,Fu,t.pointerType),window.addEventListener("pointermove",h=>{s||(s=!0,this._onStartDragging());const{clientX:u,clientY:f,pointerId:p}=h;if(p!==l(this,po)){Ue(h);return}const[g,v]=this.screenToPageTranslation(u-l(this,Ec),f-l(this,Sc));b(this,Ec,u),b(this,Sc,f),this._uiManager.dragSelectedEditors(g,v)},o),window.addEventListener("touchmove",Ue,o),window.addEventListener("pointerdown",h=>{h.pointerType===l(this,Fu)&&(l(this,Ia)||h.isPrimary)&&a(h),Ue(h)},o));const c=h=>{if(!l(this,po)||l(this,po)===h.pointerId){a(h);return}Ue(h)};window.addEventListener("pointerup",c,{signal:r}),window.addEventListener("blur",c,{signal:r})},Jm=function(){if(l(this,go)||!this.div)return;b(this,go,new AbortController);const t=this._uiManager.combinedSignal(l(this,go));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:t}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:t})},$0=function(t){Ot._resizerKeyboardManager.exec(this,t)},B0=function(t){var e;l(this,hr)&&((e=t.relatedTarget)==null?void 0:e.parentNode)!==l(this,us)&&A(this,wt,Hh).call(this)},H0=function(t){b(this,$u,l(this,hr)?t:"")},Zm=function(t){if(l(this,Ki))for(const e of l(this,Ki))e.tabIndex=t},Hh=function(){b(this,hr,!1),A(this,wt,Zm).call(this,-1),A(this,wt,Uf).call(this)},w(Ot,ju),J(Ot,"_l10n",null),J(Ot,"_l10nResizer",null),J(Ot,"_borderLineWidth",-1),J(Ot,"_colorManager",new Hm),J(Ot,"_zIndex",1),J(Ot,"_telemetryTimeout",1e3);let ye=Ot;class SR extends ye{constructor(t){super(t),this.annotationElementId=t.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const dw=3285377520,Ii=4294901760,yn=65535;class j0{constructor(t){this.h1=t?t&4294967295:dw,this.h2=t?t&4294967295:dw}update(t){let e,s;if(typeof t=="string"){e=new Uint8Array(t.length*2),s=0;for(let _=0,x=t.length;_<x;_++){const S=t.charCodeAt(_);S<=255?e[s++]=S:(e[s++]=S>>>8,e[s++]=S&255)}}else if(ArrayBuffer.isView(t))e=t.slice(),s=e.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const i=s>>2,r=s-i*4,o=new Uint32Array(e.buffer,0,i);let a=0,c=0,h=this.h1,u=this.h2;const f=3432918353,p=461845907,g=f&yn,v=p&yn;for(let _=0;_<i;_++)_&1?(a=o[_],a=a*f&Ii|a*g&yn,a=a<<15|a>>>17,a=a*p&Ii|a*v&yn,h^=a,h=h<<13|h>>>19,h=h*5+3864292196):(c=o[_],c=c*f&Ii|c*g&yn,c=c<<15|c>>>17,c=c*p&Ii|c*v&yn,u^=c,u=u<<13|u>>>19,u=u*5+3864292196);switch(a=0,r){case 3:a^=e[i*4+2]<<16;case 2:a^=e[i*4+1]<<8;case 1:a^=e[i*4],a=a*f&Ii|a*g&yn,a=a<<15|a>>>17,a=a*p&Ii|a*v&yn,i&1?h^=a:u^=a}this.h1=h,this.h2=u}hexdigest(){let t=this.h1,e=this.h2;return t^=e>>>1,t=t*3981806797&Ii|t*36045&yn,e=e*4283543511&Ii|((e<<16|t>>>16)*2950163797&Ii)>>>16,t^=e>>>1,t=t*444984403&Ii|t*60499&yn,e=e*3301882366&Ii|((e<<16|t>>>16)*3120437893&Ii)>>>16,t^=e>>>1,(t>>>0).toString(16).padStart(8,"0")+(e>>>0).toString(16).padStart(8,"0")}}const tb=Object.freeze({map:null,hash:"",transfer:void 0});var La,Ma,ds,$p,V0;class x_{constructor(){w(this,$p);w(this,La,!1);w(this,Ma,null);w(this,ds,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(t,e){const s=l(this,ds).get(t);return s===void 0?e:Object.assign(e,s)}getRawValue(t){return l(this,ds).get(t)}remove(t){if(l(this,ds).delete(t),l(this,ds).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const e of l(this,ds).values())if(e instanceof ye)return;this.onAnnotationEditor(null)}}setValue(t,e){const s=l(this,ds).get(t);let i=!1;if(s!==void 0)for(const[r,o]of Object.entries(e))s[r]!==o&&(i=!0,s[r]=o);else i=!0,l(this,ds).set(t,e);i&&A(this,$p,V0).call(this),e instanceof ye&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(e.constructor._type)}has(t){return l(this,ds).has(t)}get size(){return l(this,ds).size}resetModified(){l(this,La)&&(b(this,La,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new U0(this)}get serializable(){if(l(this,ds).size===0)return tb;const t=new Map,e=new j0,s=[],i=Object.create(null);let r=!1;for(const[o,a]of l(this,ds)){const c=a instanceof ye?a.serialize(!1,i):a;c&&(t.set(o,c),e.update(`${o}:${JSON.stringify(c)}`),r||(r=!!c.bitmap))}if(r)for(const o of t.values())o.bitmap&&s.push(o.bitmap);return t.size>0?{map:t,hash:e.hexdigest(),transfer:s}:tb}get editorStats(){let t=null;const e=new Map;for(const s of l(this,ds).values()){if(!(s instanceof ye))continue;const i=s.telemetryFinalData;if(!i)continue;const{type:r}=i;e.has(r)||e.set(r,Object.getPrototypeOf(s).constructor),t||(t=Object.create(null));const o=t[r]||(t[r]=new Map);for(const[a,c]of Object.entries(i)){if(a==="type")continue;let h=o.get(a);h||(h=new Map,o.set(a,h));const u=h.get(c)??0;h.set(c,u+1)}}for(const[s,i]of e)t[s]=i.computeTelemetryFinalData(t[s]);return t}resetModifiedIds(){b(this,Ma,null)}get modifiedIds(){if(l(this,Ma))return l(this,Ma);const t=[];for(const e of l(this,ds).values())!(e instanceof ye)||!e.annotationElementId||!e.serialize()||t.push(e.annotationElementId);return b(this,Ma,{ids:new Set(t),hash:t.join(",")})}[Symbol.iterator](){return l(this,ds).entries()}}La=new WeakMap,Ma=new WeakMap,ds=new WeakMap,$p=new WeakSet,V0=function(){l(this,La)||(b(this,La,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Vu;class U0 extends x_{constructor(e){super();w(this,Vu);const{map:s,hash:i,transfer:r}=e.serializable,o=structuredClone(s,r?{transfer:r}:null);b(this,Vu,{map:o,hash:i,transfer:r})}get print(){ue("Should not call PrintAnnotationStorage.print")}get serializable(){return l(this,Vu)}get modifiedIds(){return jt(this,"modifiedIds",{ids:new Set,hash:""})}}Vu=new WeakMap;var xc;class xR{constructor({ownerDocument:t=globalThis.document,styleElement:e=null}){w(this,xc,new Set);this._document=t,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(t){this.nativeFontFaces.add(t),this._document.fonts.add(t)}removeNativeFontFace(t){this.nativeFontFaces.delete(t),this._document.fonts.delete(t)}insertRule(t){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const e=this.styleElement.sheet;e.insertRule(t,e.cssRules.length)}clear(){for(const t of this.nativeFontFaces)this._document.fonts.delete(t);this.nativeFontFaces.clear(),l(this,xc).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:t,disableFontFace:e,_inspectFont:s}){if(!(!t||l(this,xc).has(t.loadedName))){if(ze(!e,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:i,src:r,style:o}=t,a=new FontFace(i,r,o);this.addNativeFontFace(a);try{await a.load(),l(this,xc).add(i),s==null||s(t)}catch{kt(`Cannot load system font: ${t.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}ue("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(t){if(t.attached||t.missingFile&&!t.systemFontInfo)return;if(t.attached=!0,t.systemFontInfo){await this.loadSystemFont(t);return}if(this.isFontLoadingAPISupported){const s=t.createNativeFontFace();if(s){this.addNativeFontFace(s);try{await s.loaded}catch(i){throw kt(`Failed to load font '${s.family}': '${i}'.`),t.disableFontFace=!0,i}}return}const e=t.createFontFaceRule();if(e){if(this.insertRule(e),this.isSyncFontLoadingSupported)return;await new Promise(s=>{const i=this._queueLoadingCallback(s);this._prepareFontLoadEvent(t,i)})}}get isFontLoadingAPISupported(){var e;const t=!!((e=this._document)!=null&&e.fonts);return jt(this,"isFontLoadingAPISupported",t)}get isSyncFontLoadingSupported(){return jt(this,"isSyncFontLoadingSupported",Us||ys.platform.isFirefox)}_queueLoadingCallback(t){function e(){for(ze(!i.done,"completeRequest() cannot be called twice."),i.done=!0;s.length>0&&s[0].done;){const r=s.shift();setTimeout(r.callback,0)}}const{loadingRequests:s}=this,i={done:!1,complete:e,callback:t};return s.push(i),i}get _loadTestFont(){const t=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return jt(this,"_loadTestFont",t)}_prepareFontLoadEvent(t,e){function s(R,I){return R.charCodeAt(I)<<24|R.charCodeAt(I+1)<<16|R.charCodeAt(I+2)<<8|R.charCodeAt(I+3)&255}function i(R,I,F,N){const H=R.substring(0,I),V=R.substring(I+F);return H+N+V}let r,o;const a=this._document.createElement("canvas");a.width=1,a.height=1;const c=a.getContext("2d");let h=0;function u(R,I){if(++h>30){kt("Load test font never loaded."),I();return}if(c.font="30px "+R,c.fillText(".",0,20),c.getImageData(0,0,1,1).data[3]>0){I();return}setTimeout(u.bind(null,R,I))}const f=`lt${Date.now()}${this.loadTestFontId++}`;let p=this._loadTestFont;p=i(p,976,f.length,f);const v=16,_=1482184792;let x=s(p,v);for(r=0,o=f.length-3;r<o;r+=4)x=x-_+s(f,r)|0;r<f.length&&(x=x-_+s(f+"XXX",r)|0),p=i(p,v,4,hR(x));const S=`url(data:font/opentype;base64,${btoa(p)});`,C=`@font-face {font-family:"${f}";src:${S}}`;this.insertRule(C);const T=this._document.createElement("div");T.style.visibility="hidden",T.style.width=T.style.height="10px",T.style.position="absolute",T.style.top=T.style.left="0px";for(const R of[t.loadedName,f]){const I=this._document.createElement("span");I.textContent="Hi",I.style.fontFamily=R,T.append(I)}this._document.body.append(T),u(f,()=>{T.remove(),e.complete()})}}xc=new WeakMap;class CR{constructor(t,e=null){this.compiledGlyphs=Object.create(null);for(const s in t)this[s]=t[s];this._inspectFont=e}createNativeFontFace(){var e;if(!this.data||this.disableFontFace)return null;let t;if(!this.cssFontInfo)t=new FontFace(this.loadedName,this.data,{});else{const s={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(s.style=`oblique ${this.cssFontInfo.italicAngle}deg`),t=new FontFace(this.cssFontInfo.fontFamily,this.data,s)}return(e=this._inspectFont)==null||e.call(this,this),t}createFontFaceRule(){var s;if(!this.data||this.disableFontFace)return null;const t=`url(data:${this.mimetype};base64,${h0(this.data)});`;let e;if(!this.cssFontInfo)e=`@font-face {font-family:"${this.loadedName}";src:${t}}`;else{let i=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(i+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),e=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${i}src:${t}}`}return(s=this._inspectFont)==null||s.call(this,this,t),e}getPathGenerator(t,e){if(this.compiledGlyphs[e]!==void 0)return this.compiledGlyphs[e];const s=this.loadedName+"_path_"+e;let i;try{i=t.get(s)}catch(o){kt(`getPathGenerator - ignoring character: "${o}".`)}const r=new Path2D(i||"");return this.fontExtraProperties||t.delete(s),this.compiledGlyphs[e]=r}}const Ef={DATA:1,ERROR:2},je={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function fw(){}function Xs(n){if(n instanceof Vo||n instanceof Om||n instanceof cw||n instanceof Sp||n instanceof dm)return n;switch(n instanceof Error||typeof n=="object"&&n!==null||ue('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),n.name){case"AbortException":return new Vo(n.message);case"InvalidPDFException":return new Om(n.message);case"PasswordException":return new cw(n.message,n.code);case"ResponseException":return new Sp(n.message,n.status,n.missing);case"UnknownErrorException":return new dm(n.message,n.details)}return new dm(n.message,n.toString())}var Cc,Vi,z0,W0,q0,zf;class jh{constructor(t,e,s){w(this,Vi);w(this,Cc,new AbortController);this.sourceName=t,this.targetName=e,this.comObj=s,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),s.addEventListener("message",A(this,Vi,z0).bind(this),{signal:l(this,Cc).signal})}on(t,e){const s=this.actionHandler;if(s[t])throw new Error(`There is already an actionName called "${t}"`);s[t]=e}send(t,e,s){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,data:e},s)}sendWithPromise(t,e,s){const i=this.callbackId++,r=Promise.withResolvers();this.callbackCapabilities[i]=r;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:t,callbackId:i,data:e},s)}catch(o){r.reject(o)}return r.promise}sendWithStream(t,e,s,i){const r=this.streamId++,o=this.sourceName,a=this.targetName,c=this.comObj;return new ReadableStream({start:h=>{const u=Promise.withResolvers();return this.streamControllers[r]={controller:h,startCall:u,pullCall:null,cancelCall:null,isClosed:!1},c.postMessage({sourceName:o,targetName:a,action:t,streamId:r,data:e,desiredSize:h.desiredSize},i),u.promise},pull:h=>{const u=Promise.withResolvers();return this.streamControllers[r].pullCall=u,c.postMessage({sourceName:o,targetName:a,stream:je.PULL,streamId:r,desiredSize:h.desiredSize}),u.promise},cancel:h=>{ze(h instanceof Error,"cancel must have a valid reason");const u=Promise.withResolvers();return this.streamControllers[r].cancelCall=u,this.streamControllers[r].isClosed=!0,c.postMessage({sourceName:o,targetName:a,stream:je.CANCEL,streamId:r,reason:Xs(h)}),u.promise}},s)}destroy(){var t;(t=l(this,Cc))==null||t.abort(),b(this,Cc,null)}}Cc=new WeakMap,Vi=new WeakSet,z0=function({data:t}){if(t.targetName!==this.sourceName)return;if(t.stream){A(this,Vi,q0).call(this,t);return}if(t.callback){const s=t.callbackId,i=this.callbackCapabilities[s];if(!i)throw new Error(`Cannot resolve callback ${s}`);if(delete this.callbackCapabilities[s],t.callback===Ef.DATA)i.resolve(t.data);else if(t.callback===Ef.ERROR)i.reject(Xs(t.reason));else throw new Error("Unexpected callback case");return}const e=this.actionHandler[t.action];if(!e)throw new Error(`Unknown action from worker: ${t.action}`);if(t.callbackId){const s=this.sourceName,i=t.sourceName,r=this.comObj;Promise.try(e,t.data).then(function(o){r.postMessage({sourceName:s,targetName:i,callback:Ef.DATA,callbackId:t.callbackId,data:o})},function(o){r.postMessage({sourceName:s,targetName:i,callback:Ef.ERROR,callbackId:t.callbackId,reason:Xs(o)})});return}if(t.streamId){A(this,Vi,W0).call(this,t);return}e(t.data)},W0=function(t){const e=t.streamId,s=this.sourceName,i=t.sourceName,r=this.comObj,o=this,a=this.actionHandler[t.action],c={enqueue(h,u=1,f){if(this.isCancelled)return;const p=this.desiredSize;this.desiredSize-=u,p>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),r.postMessage({sourceName:s,targetName:i,stream:je.ENQUEUE,streamId:e,chunk:h},f)},close(){this.isCancelled||(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:i,stream:je.CLOSE,streamId:e}),delete o.streamSinks[e])},error(h){ze(h instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,r.postMessage({sourceName:s,targetName:i,stream:je.ERROR,streamId:e,reason:Xs(h)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:t.desiredSize,ready:null};c.sinkCapability.resolve(),c.ready=c.sinkCapability.promise,this.streamSinks[e]=c,Promise.try(a,t.data,c).then(function(){r.postMessage({sourceName:s,targetName:i,stream:je.START_COMPLETE,streamId:e,success:!0})},function(h){r.postMessage({sourceName:s,targetName:i,stream:je.START_COMPLETE,streamId:e,reason:Xs(h)})})},q0=function(t){const e=t.streamId,s=this.sourceName,i=t.sourceName,r=this.comObj,o=this.streamControllers[e],a=this.streamSinks[e];switch(t.stream){case je.START_COMPLETE:t.success?o.startCall.resolve():o.startCall.reject(Xs(t.reason));break;case je.PULL_COMPLETE:t.success?o.pullCall.resolve():o.pullCall.reject(Xs(t.reason));break;case je.PULL:if(!a){r.postMessage({sourceName:s,targetName:i,stream:je.PULL_COMPLETE,streamId:e,success:!0});break}a.desiredSize<=0&&t.desiredSize>0&&a.sinkCapability.resolve(),a.desiredSize=t.desiredSize,Promise.try(a.onPull||fw).then(function(){r.postMessage({sourceName:s,targetName:i,stream:je.PULL_COMPLETE,streamId:e,success:!0})},function(h){r.postMessage({sourceName:s,targetName:i,stream:je.PULL_COMPLETE,streamId:e,reason:Xs(h)})});break;case je.ENQUEUE:if(ze(o,"enqueue should have stream controller"),o.isClosed)break;o.controller.enqueue(t.chunk);break;case je.CLOSE:if(ze(o,"close should have stream controller"),o.isClosed)break;o.isClosed=!0,o.controller.close(),A(this,Vi,zf).call(this,o,e);break;case je.ERROR:ze(o,"error should have stream controller"),o.controller.error(Xs(t.reason)),A(this,Vi,zf).call(this,o,e);break;case je.CANCEL_COMPLETE:t.success?o.cancelCall.resolve():o.cancelCall.reject(Xs(t.reason)),A(this,Vi,zf).call(this,o,e);break;case je.CANCEL:if(!a)break;const c=Xs(t.reason);Promise.try(a.onCancel||fw,c).then(function(){r.postMessage({sourceName:s,targetName:i,stream:je.CANCEL_COMPLETE,streamId:e,success:!0})},function(h){r.postMessage({sourceName:s,targetName:i,stream:je.CANCEL_COMPLETE,streamId:e,reason:Xs(h)})}),a.sinkCapability.reject(c),a.isCancelled=!0,delete this.streamSinks[e];break;default:throw new Error("Unexpected stream case")}},zf=async function(t,e){var s,i,r;await Promise.allSettled([(s=t.startCall)==null?void 0:s.promise,(i=t.pullCall)==null?void 0:i.promise,(r=t.cancelCall)==null?void 0:r.promise]),delete this.streamControllers[e]};var Uu;class G0{constructor({enableHWA:t=!1}){w(this,Uu,!1);b(this,Uu,t)}create(t,e){if(t<=0||e<=0)throw new Error("Invalid canvas size");const s=this._createCanvas(t,e);return{canvas:s,context:s.getContext("2d",{willReadFrequently:!l(this,Uu)})}}reset(t,e,s){if(!t.canvas)throw new Error("Canvas is not specified");if(e<=0||s<=0)throw new Error("Invalid canvas size");t.canvas.width=e,t.canvas.height=s}destroy(t){if(!t.canvas)throw new Error("Canvas is not specified");t.canvas.width=0,t.canvas.height=0,t.canvas=null,t.context=null}_createCanvas(t,e){ue("Abstract method `_createCanvas` called.")}}Uu=new WeakMap;class TR extends G0{constructor({ownerDocument:t=globalThis.document,enableHWA:e=!1}){super({enableHWA:e}),this._document=t}_createCanvas(t,e){const s=this._document.createElement("canvas");return s.width=t,s.height=e,s}}class X0{constructor({baseUrl:t=null,isCompressed:e=!0}){this.baseUrl=t,this.isCompressed=e}async fetch({name:t}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!t)throw new Error("CMap name must be specified.");const e=this.baseUrl+t+(this.isCompressed?".bcmap":"");return this._fetch(e).then(s=>({cMapData:s,isCompressed:this.isCompressed})).catch(s=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${e}`)})}async _fetch(t){ue("Abstract method `_fetch` called.")}}class pw extends X0{async _fetch(t){const e=await Gd(t,this.isCompressed?"arraybuffer":"text");return e instanceof ArrayBuffer?new Uint8Array(e):qd(e)}}class K0{addFilter(t){return"none"}addHCMFilter(t,e){return"none"}addAlphaFilter(t){return"none"}addLuminosityFilter(t){return"none"}addHighlightHCMFilter(t,e,s,i,r){return"none"}destroy(t=!1){}}var Da,Tc,ur,dr,Ss,Oa,Na,lt,As,Vh,Xl,Wf,Kl,Y0,eb,Yl,Uh,zh,sb,Wh;class PR extends K0{constructor({docId:e,ownerDocument:s=globalThis.document}){super();w(this,lt);w(this,Da);w(this,Tc);w(this,ur);w(this,dr);w(this,Ss);w(this,Oa);w(this,Na,0);b(this,dr,e),b(this,Ss,s)}addFilter(e){if(!e)return"none";let s=l(this,lt,As).get(e);if(s)return s;const[i,r,o]=A(this,lt,Wf).call(this,e),a=e.length===1?i:`${i}${r}${o}`;if(s=l(this,lt,As).get(a),s)return l(this,lt,As).set(e,s),s;const c=`g_${l(this,dr)}_transfer_map_${Ns(this,Na)._++}`,h=A(this,lt,Kl).call(this,c);l(this,lt,As).set(e,h),l(this,lt,As).set(a,h);const u=A(this,lt,Yl).call(this,c);return A(this,lt,zh).call(this,i,r,o,u),h}addHCMFilter(e,s){var v;const i=`${e}-${s}`,r="base";let o=l(this,lt,Vh).get(r);if((o==null?void 0:o.key)===i||(o?((v=o.filter)==null||v.remove(),o.key=i,o.url="none",o.filter=null):(o={key:i,url:"none",filter:null},l(this,lt,Vh).set(r,o)),!e||!s))return o.url;const a=A(this,lt,Wh).call(this,e);e=pt.makeHexColor(...a);const c=A(this,lt,Wh).call(this,s);if(s=pt.makeHexColor(...c),l(this,lt,Xl).style.color="",e==="#000000"&&s==="#ffffff"||e===s)return o.url;const h=new Array(256);for(let _=0;_<=255;_++){const x=_/255;h[_]=x<=.03928?x/12.92:((x+.055)/1.055)**2.4}const u=h.join(","),f=`g_${l(this,dr)}_hcm_filter`,p=o.filter=A(this,lt,Yl).call(this,f);A(this,lt,zh).call(this,u,u,u,p),A(this,lt,eb).call(this,p);const g=(_,x)=>{const S=a[_]/255,C=c[_]/255,T=new Array(x+1);for(let R=0;R<=x;R++)T[R]=S+R/x*(C-S);return T.join(",")};return A(this,lt,zh).call(this,g(0,5),g(1,5),g(2,5),p),o.url=A(this,lt,Kl).call(this,f),o.url}addAlphaFilter(e){let s=l(this,lt,As).get(e);if(s)return s;const[i]=A(this,lt,Wf).call(this,[e]),r=`alpha_${i}`;if(s=l(this,lt,As).get(r),s)return l(this,lt,As).set(e,s),s;const o=`g_${l(this,dr)}_alpha_map_${Ns(this,Na)._++}`,a=A(this,lt,Kl).call(this,o);l(this,lt,As).set(e,a),l(this,lt,As).set(r,a);const c=A(this,lt,Yl).call(this,o);return A(this,lt,sb).call(this,i,c),a}addLuminosityFilter(e){let s=l(this,lt,As).get(e||"luminosity");if(s)return s;let i,r;if(e?([i]=A(this,lt,Wf).call(this,[e]),r=`luminosity_${i}`):r="luminosity",s=l(this,lt,As).get(r),s)return l(this,lt,As).set(e,s),s;const o=`g_${l(this,dr)}_luminosity_map_${Ns(this,Na)._++}`,a=A(this,lt,Kl).call(this,o);l(this,lt,As).set(e,a),l(this,lt,As).set(r,a);const c=A(this,lt,Yl).call(this,o);return A(this,lt,Y0).call(this,c),e&&A(this,lt,sb).call(this,i,c),a}addHighlightHCMFilter(e,s,i,r,o){var C;const a=`${s}-${i}-${r}-${o}`;let c=l(this,lt,Vh).get(e);if((c==null?void 0:c.key)===a||(c?((C=c.filter)==null||C.remove(),c.key=a,c.url="none",c.filter=null):(c={key:a,url:"none",filter:null},l(this,lt,Vh).set(e,c)),!s||!i))return c.url;const[h,u]=[s,i].map(A(this,lt,Wh).bind(this));let f=Math.round(.2126*h[0]+.7152*h[1]+.0722*h[2]),p=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),[g,v]=[r,o].map(A(this,lt,Wh).bind(this));p<f&&([f,p,g,v]=[p,f,v,g]),l(this,lt,Xl).style.color="";const _=(T,R,I)=>{const F=new Array(256),N=(p-f)/I,H=T/255,V=(R-T)/(255*I);let Y=0;for(let Z=0;Z<=I;Z++){const vt=Math.round(f+Z*N),At=H+Z*V;for(let St=Y;St<=vt;St++)F[St]=At;Y=vt+1}for(let Z=Y;Z<256;Z++)F[Z]=F[Y-1];return F.join(",")},x=`g_${l(this,dr)}_hcm_${e}_filter`,S=c.filter=A(this,lt,Yl).call(this,x);return A(this,lt,eb).call(this,S),A(this,lt,zh).call(this,_(g[0],v[0],5),_(g[1],v[1],5),_(g[2],v[2],5),S),c.url=A(this,lt,Kl).call(this,x),c.url}destroy(e=!1){var s,i,r,o;e&&((s=l(this,Oa))!=null&&s.size)||((i=l(this,ur))==null||i.parentNode.parentNode.remove(),b(this,ur,null),(r=l(this,Tc))==null||r.clear(),b(this,Tc,null),(o=l(this,Oa))==null||o.clear(),b(this,Oa,null),b(this,Na,0))}}Da=new WeakMap,Tc=new WeakMap,ur=new WeakMap,dr=new WeakMap,Ss=new WeakMap,Oa=new WeakMap,Na=new WeakMap,lt=new WeakSet,As=function(){return l(this,Tc)||b(this,Tc,new Map)},Vh=function(){return l(this,Oa)||b(this,Oa,new Map)},Xl=function(){if(!l(this,ur)){const e=l(this,Ss).createElement("div"),{style:s}=e;s.visibility="hidden",s.contain="strict",s.width=s.height=0,s.position="absolute",s.top=s.left=0,s.zIndex=-1;const i=l(this,Ss).createElementNS(Yn,"svg");i.setAttribute("width",0),i.setAttribute("height",0),b(this,ur,l(this,Ss).createElementNS(Yn,"defs")),e.append(i),i.append(l(this,ur)),l(this,Ss).body.append(e)}return l(this,ur)},Wf=function(e){if(e.length===1){const h=e[0],u=new Array(256);for(let p=0;p<256;p++)u[p]=h[p]/255;const f=u.join(",");return[f,f,f]}const[s,i,r]=e,o=new Array(256),a=new Array(256),c=new Array(256);for(let h=0;h<256;h++)o[h]=s[h]/255,a[h]=i[h]/255,c[h]=r[h]/255;return[o.join(","),a.join(","),c.join(",")]},Kl=function(e){if(l(this,Da)===void 0){b(this,Da,"");const s=l(this,Ss).URL;s!==l(this,Ss).baseURI&&(mg(s)?kt('#createUrl: ignore "data:"-URL for performance reasons.'):b(this,Da,a0(s,"")))}return`url(${l(this,Da)}#${e})`},Y0=function(e){const s=l(this,Ss).createElementNS(Yn,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),e.append(s)},eb=function(e){const s=l(this,Ss).createElementNS(Yn,"feColorMatrix");s.setAttribute("type","matrix"),s.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),e.append(s)},Yl=function(e){const s=l(this,Ss).createElementNS(Yn,"filter");return s.setAttribute("color-interpolation-filters","sRGB"),s.setAttribute("id",e),l(this,lt,Xl).append(s),s},Uh=function(e,s,i){const r=l(this,Ss).createElementNS(Yn,s);r.setAttribute("type","discrete"),r.setAttribute("tableValues",i),e.append(r)},zh=function(e,s,i,r){const o=l(this,Ss).createElementNS(Yn,"feComponentTransfer");r.append(o),A(this,lt,Uh).call(this,o,"feFuncR",e),A(this,lt,Uh).call(this,o,"feFuncG",s),A(this,lt,Uh).call(this,o,"feFuncB",i)},sb=function(e,s){const i=l(this,Ss).createElementNS(Yn,"feComponentTransfer");s.append(i),A(this,lt,Uh).call(this,i,"feFuncA",e)},Wh=function(e){return l(this,lt,Xl).style.color=e,E_(getComputedStyle(l(this,lt,Xl)).getPropertyValue("color"))};class Q0{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!t)throw new Error("Font filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(s=>{throw new Error(`Unable to load font data at: ${e}`)})}async _fetch(t){ue("Abstract method `_fetch` called.")}}class gw extends Q0{async _fetch(t){const e=await Gd(t,"arraybuffer");return new Uint8Array(e)}}class J0{constructor({baseUrl:t=null}){this.baseUrl=t}async fetch({filename:t}){if(!this.baseUrl)throw new Error("Ensure that the `wasmUrl` API parameter is provided.");if(!t)throw new Error("Wasm filename must be specified.");const e=`${this.baseUrl}${t}`;return this._fetch(e).catch(s=>{throw new Error(`Unable to load wasm data at: ${e}`)})}async _fetch(t){ue("Abstract method `_fetch` called.")}}class mw extends J0{async _fetch(t){const e=await Gd(t,"arraybuffer");return new Uint8Array(e)}}Us&&kt("Please use the `legacy` build in Node.js environments.");async function C_(n){const e=await process.getBuiltinModule("fs").promises.readFile(n);return new Uint8Array(e)}class RR extends K0{}class kR extends G0{_createCanvas(t,e){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(t,e)}}class IR extends X0{async _fetch(t){return C_(t)}}class LR extends Q0{async _fetch(t){return C_(t)}}class MR extends J0{async _fetch(t){return C_(t)}}const gs={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function ib(n,t){if(!t)return;const e=t[2]-t[0],s=t[3]-t[1],i=new Path2D;i.rect(t[0],t[1],e,s),n.clip(i)}class T_{isModifyingCurrentTransform(){return!1}getPattern(){ue("Abstract method `getPattern` called.")}}class DR extends T_{constructor(t){super(),this._type=t[1],this._bbox=t[2],this._colorStops=t[3],this._p0=t[4],this._p1=t[5],this._r0=t[6],this._r1=t[7],this.matrix=null}_createGradient(t){let e;this._type==="axial"?e=t.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(e=t.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const s of this._colorStops)e.addColorStop(s[0],s[1]);return e}getPattern(t,e,s,i){let r;if(i===gs.STROKE||i===gs.FILL){const o=e.current.getClippedPathBoundingBox(i,ke(t))||[0,0,0,0],a=Math.ceil(o[2]-o[0])||1,c=Math.ceil(o[3]-o[1])||1,h=e.cachedCanvases.getCanvas("pattern",a,c),u=h.context;u.clearRect(0,0,u.canvas.width,u.canvas.height),u.beginPath(),u.rect(0,0,u.canvas.width,u.canvas.height),u.translate(-o[0],-o[1]),s=pt.transform(s,[1,0,0,1,o[0],o[1]]),u.transform(...e.baseTransform),this.matrix&&u.transform(...this.matrix),ib(u,this._bbox),u.fillStyle=this._createGradient(u),u.fill(),r=t.createPattern(h.canvas,"no-repeat");const f=new DOMMatrix(s);r.setTransform(f)}else ib(t,this._bbox),r=this._createGradient(t);return r}}function gm(n,t,e,s,i,r,o,a){const c=t.coords,h=t.colors,u=n.data,f=n.width*4;let p;c[e+1]>c[s+1]&&(p=e,e=s,s=p,p=r,r=o,o=p),c[s+1]>c[i+1]&&(p=s,s=i,i=p,p=o,o=a,a=p),c[e+1]>c[s+1]&&(p=e,e=s,s=p,p=r,r=o,o=p);const g=(c[e]+t.offsetX)*t.scaleX,v=(c[e+1]+t.offsetY)*t.scaleY,_=(c[s]+t.offsetX)*t.scaleX,x=(c[s+1]+t.offsetY)*t.scaleY,S=(c[i]+t.offsetX)*t.scaleX,C=(c[i+1]+t.offsetY)*t.scaleY;if(v>=C)return;const T=h[r],R=h[r+1],I=h[r+2],F=h[o],N=h[o+1],H=h[o+2],V=h[a],Y=h[a+1],Z=h[a+2],vt=Math.round(v),At=Math.round(C);let St,fe,Q,X,Ct,Le,z,Ee;for(let Vt=vt;Vt<=At;Vt++){if(Vt<x){const $=Vt<v?0:(v-Vt)/(v-x);St=g-(g-_)*$,fe=T-(T-F)*$,Q=R-(R-N)*$,X=I-(I-H)*$}else{let $;Vt>C?$=1:x===C?$=0:$=(x-Vt)/(x-C),St=_-(_-S)*$,fe=F-(F-V)*$,Q=N-(N-Y)*$,X=H-(H-Z)*$}let Kt;Vt<v?Kt=0:Vt>C?Kt=1:Kt=(v-Vt)/(v-C),Ct=g-(g-S)*Kt,Le=T-(T-V)*Kt,z=R-(R-Y)*Kt,Ee=I-(I-Z)*Kt;const Pe=Math.round(Math.min(St,Ct)),Ge=Math.round(Math.max(St,Ct));let Wt=f*Vt+Pe*4;for(let $=Pe;$<=Ge;$++)Kt=(St-$)/(St-Ct),Kt<0?Kt=0:Kt>1&&(Kt=1),u[Wt++]=fe-(fe-Le)*Kt|0,u[Wt++]=Q-(Q-z)*Kt|0,u[Wt++]=X-(X-Ee)*Kt|0,u[Wt++]=255}}function OR(n,t,e){const s=t.coords,i=t.colors;let r,o;switch(t.type){case"lattice":const a=t.verticesPerRow,c=Math.floor(s.length/a)-1,h=a-1;for(r=0;r<c;r++){let u=r*a;for(let f=0;f<h;f++,u++)gm(n,e,s[u],s[u+1],s[u+a],i[u],i[u+1],i[u+a]),gm(n,e,s[u+a+1],s[u+1],s[u+a],i[u+a+1],i[u+1],i[u+a])}break;case"triangles":for(r=0,o=s.length;r<o;r+=3)gm(n,e,s[r],s[r+1],s[r+2],i[r],i[r+1],i[r+2]);break;default:throw new Error("illegal figure")}}class NR extends T_{constructor(t){super(),this._coords=t[2],this._colors=t[3],this._figures=t[4],this._bounds=t[5],this._bbox=t[6],this._background=t[7],this.matrix=null}_createMeshCanvas(t,e,s){const a=Math.floor(this._bounds[0]),c=Math.floor(this._bounds[1]),h=Math.ceil(this._bounds[2])-a,u=Math.ceil(this._bounds[3])-c,f=Math.min(Math.ceil(Math.abs(h*t[0]*1.1)),3e3),p=Math.min(Math.ceil(Math.abs(u*t[1]*1.1)),3e3),g=h/f,v=u/p,_={coords:this._coords,colors:this._colors,offsetX:-a,offsetY:-c,scaleX:1/g,scaleY:1/v},x=f+2*2,S=p+2*2,C=s.getCanvas("mesh",x,S),T=C.context,R=T.createImageData(f,p);if(e){const F=R.data;for(let N=0,H=F.length;N<H;N+=4)F[N]=e[0],F[N+1]=e[1],F[N+2]=e[2],F[N+3]=255}for(const F of this._figures)OR(R,F,_);return T.putImageData(R,2,2),{canvas:C.canvas,offsetX:a-2*g,offsetY:c-2*v,scaleX:g,scaleY:v}}isModifyingCurrentTransform(){return!0}getPattern(t,e,s,i){ib(t,this._bbox);const r=new Float32Array(2);if(i===gs.SHADING)pt.singularValueDecompose2dScale(ke(t),r);else if(this.matrix){pt.singularValueDecompose2dScale(this.matrix,r);const[a,c]=r;pt.singularValueDecompose2dScale(e.baseTransform,r),r[0]*=a,r[1]*=c}else pt.singularValueDecompose2dScale(e.baseTransform,r);const o=this._createMeshCanvas(r,i===gs.SHADING?null:this._background,e.cachedCanvases);return i!==gs.SHADING&&(t.setTransform(...e.baseTransform),this.matrix&&t.transform(...this.matrix)),t.translate(o.offsetX,o.offsetY),t.scale(o.scaleX,o.scaleY),t.createPattern(o.canvas,"no-repeat")}}class FR extends T_{getPattern(){return"hotpink"}}function $R(n){switch(n[0]){case"RadialAxial":return new DR(n);case"Mesh":return new NR(n);case"Dummy":return new FR}throw new Error(`Unknown IR type: ${n[0]}`)}const bw={COLORED:1,UNCOLORED:2},Bp=class Bp{constructor(t,e,s,i){this.color=t[1],this.operatorList=t[2],this.matrix=t[3],this.bbox=t[4],this.xstep=t[5],this.ystep=t[6],this.paintType=t[7],this.tilingType=t[8],this.ctx=e,this.canvasGraphicsFactory=s,this.baseTransform=i}createPatternCanvas(t){const{bbox:e,operatorList:s,paintType:i,tilingType:r,color:o,canvasGraphicsFactory:a}=this;let{xstep:c,ystep:h}=this;c=Math.abs(c),h=Math.abs(h),gg("TilingType: "+r);const u=e[0],f=e[1],p=e[2],g=e[3],v=p-u,_=g-f,x=new Float32Array(2);pt.singularValueDecompose2dScale(this.matrix,x);const[S,C]=x;pt.singularValueDecompose2dScale(this.baseTransform,x);const T=S*x[0],R=C*x[1];let I=v,F=_,N=!1,H=!1;const V=Math.ceil(c*T),Y=Math.ceil(h*R),Z=Math.ceil(v*T),vt=Math.ceil(_*R);V>=Z?I=c:N=!0,Y>=vt?F=h:H=!0;const At=this.getSizeAndScale(I,this.ctx.canvas.width,T),St=this.getSizeAndScale(F,this.ctx.canvas.height,R),fe=t.cachedCanvases.getCanvas("pattern",At.size,St.size),Q=fe.context,X=a.createCanvasGraphics(Q);if(X.groupLevel=t.groupLevel,this.setFillAndStrokeStyleToContext(X,i,o),Q.translate(-At.scale*u,-St.scale*f),X.transform(At.scale,0,0,St.scale,0,0),Q.save(),this.clipBbox(X,u,f,p,g),X.baseTransform=ke(X.ctx),X.executeOperatorList(s),X.endDrawing(),Q.restore(),N||H){const Ct=fe.canvas;N&&(I=c),H&&(F=h);const Le=this.getSizeAndScale(I,this.ctx.canvas.width,T),z=this.getSizeAndScale(F,this.ctx.canvas.height,R),Ee=Le.size,Vt=z.size,Kt=t.cachedCanvases.getCanvas("pattern-workaround",Ee,Vt),Pe=Kt.context,Ge=N?Math.floor(v/c):0,Wt=H?Math.floor(_/h):0;for(let $=0;$<=Ge;$++)for(let j=0;j<=Wt;j++)Pe.drawImage(Ct,Ee*$,Vt*j,Ee,Vt,0,0,Ee,Vt);return{canvas:Kt.canvas,scaleX:Le.scale,scaleY:z.scale,offsetX:u,offsetY:f}}return{canvas:fe.canvas,scaleX:At.scale,scaleY:St.scale,offsetX:u,offsetY:f}}getSizeAndScale(t,e,s){const i=Math.max(Bp.MAX_PATTERN_SIZE,e);let r=Math.ceil(t*s);return r>=i?r=i:s=r/t,{scale:s,size:r}}clipBbox(t,e,s,i,r){const o=i-e,a=r-s;t.ctx.rect(e,s,o,a),pt.axialAlignedBoundingBox([e,s,i,r],ke(t.ctx),t.current.minMax),t.clip(),t.endPath()}setFillAndStrokeStyleToContext(t,e,s){const i=t.ctx,r=t.current;switch(e){case bw.COLORED:const o=this.ctx;i.fillStyle=o.fillStyle,i.strokeStyle=o.strokeStyle,r.fillColor=o.fillStyle,r.strokeColor=o.strokeStyle;break;case bw.UNCOLORED:const a=pt.makeHexColor(s[0],s[1],s[2]);i.fillStyle=a,i.strokeStyle=a,r.fillColor=a,r.strokeColor=a;break;default:throw new cR(`Unsupported paint type: ${e}`)}}isModifyingCurrentTransform(){return!1}getPattern(t,e,s,i){let r=s;i!==gs.SHADING&&(r=pt.transform(r,e.baseTransform),this.matrix&&(r=pt.transform(r,this.matrix)));const o=this.createPatternCanvas(e);let a=new DOMMatrix(r);a=a.translate(o.offsetX,o.offsetY),a=a.scale(1/o.scaleX,1/o.scaleY);const c=t.createPattern(o.canvas,"repeat");return c.setTransform(a),c}};J(Bp,"MAX_PATTERN_SIZE",3e3);let nb=Bp;function BR({src:n,srcPos:t=0,dest:e,width:s,height:i,nonBlackColor:r=4294967295,inverseDecode:o=!1}){const a=ys.isLittleEndian?4278190080:255,[c,h]=o?[r,a]:[a,r],u=s>>3,f=s&7,p=n.length;e=new Uint32Array(e.buffer);let g=0;for(let v=0;v<i;v++){for(const x=t+u;t<x;t++){const S=t<p?n[t]:255;e[g++]=S&128?h:c,e[g++]=S&64?h:c,e[g++]=S&32?h:c,e[g++]=S&16?h:c,e[g++]=S&8?h:c,e[g++]=S&4?h:c,e[g++]=S&2?h:c,e[g++]=S&1?h:c}if(f===0)continue;const _=t<p?n[t++]:255;for(let x=0;x<f;x++)e[g++]=_&1<<7-x?h:c}return{srcPos:t,destPos:g}}const _w=16,vw=100,HR=15,yw=10,Zs=16,mm=new DOMMatrix,wi=new Float32Array(2),tc=new Float32Array([1/0,1/0,-1/0,-1/0]);function jR(n,t){if(n._removeMirroring)throw new Error("Context is already forwarding operations.");n.__originalSave=n.save,n.__originalRestore=n.restore,n.__originalRotate=n.rotate,n.__originalScale=n.scale,n.__originalTranslate=n.translate,n.__originalTransform=n.transform,n.__originalSetTransform=n.setTransform,n.__originalResetTransform=n.resetTransform,n.__originalClip=n.clip,n.__originalMoveTo=n.moveTo,n.__originalLineTo=n.lineTo,n.__originalBezierCurveTo=n.bezierCurveTo,n.__originalRect=n.rect,n.__originalClosePath=n.closePath,n.__originalBeginPath=n.beginPath,n._removeMirroring=()=>{n.save=n.__originalSave,n.restore=n.__originalRestore,n.rotate=n.__originalRotate,n.scale=n.__originalScale,n.translate=n.__originalTranslate,n.transform=n.__originalTransform,n.setTransform=n.__originalSetTransform,n.resetTransform=n.__originalResetTransform,n.clip=n.__originalClip,n.moveTo=n.__originalMoveTo,n.lineTo=n.__originalLineTo,n.bezierCurveTo=n.__originalBezierCurveTo,n.rect=n.__originalRect,n.closePath=n.__originalClosePath,n.beginPath=n.__originalBeginPath,delete n._removeMirroring},n.save=function(){t.save(),this.__originalSave()},n.restore=function(){t.restore(),this.__originalRestore()},n.translate=function(e,s){t.translate(e,s),this.__originalTranslate(e,s)},n.scale=function(e,s){t.scale(e,s),this.__originalScale(e,s)},n.transform=function(e,s,i,r,o,a){t.transform(e,s,i,r,o,a),this.__originalTransform(e,s,i,r,o,a)},n.setTransform=function(e,s,i,r,o,a){t.setTransform(e,s,i,r,o,a),this.__originalSetTransform(e,s,i,r,o,a)},n.resetTransform=function(){t.resetTransform(),this.__originalResetTransform()},n.rotate=function(e){t.rotate(e),this.__originalRotate(e)},n.clip=function(e){t.clip(e),this.__originalClip(e)},n.moveTo=function(e,s){t.moveTo(e,s),this.__originalMoveTo(e,s)},n.lineTo=function(e,s){t.lineTo(e,s),this.__originalLineTo(e,s)},n.bezierCurveTo=function(e,s,i,r,o,a){t.bezierCurveTo(e,s,i,r,o,a),this.__originalBezierCurveTo(e,s,i,r,o,a)},n.rect=function(e,s,i,r){t.rect(e,s,i,r),this.__originalRect(e,s,i,r)},n.closePath=function(){t.closePath(),this.__originalClosePath()},n.beginPath=function(){t.beginPath(),this.__originalBeginPath()}}class VR{constructor(t){this.canvasFactory=t,this.cache=Object.create(null)}getCanvas(t,e,s){let i;return this.cache[t]!==void 0?(i=this.cache[t],this.canvasFactory.reset(i,e,s)):(i=this.canvasFactory.create(e,s),this.cache[t]=i),i}delete(t){delete this.cache[t]}clear(){for(const t in this.cache){const e=this.cache[t];this.canvasFactory.destroy(e),delete this.cache[t]}}}function Sf(n,t,e,s,i,r,o,a,c,h){const[u,f,p,g,v,_]=ke(n);if(f===0&&p===0){const C=o*u+v,T=Math.round(C),R=a*g+_,I=Math.round(R),F=(o+c)*u+v,N=Math.abs(Math.round(F)-T)||1,H=(a+h)*g+_,V=Math.abs(Math.round(H)-I)||1;return n.setTransform(Math.sign(u),0,0,Math.sign(g),T,I),n.drawImage(t,e,s,i,r,0,0,N,V),n.setTransform(u,f,p,g,v,_),[N,V]}if(u===0&&g===0){const C=a*p+v,T=Math.round(C),R=o*f+_,I=Math.round(R),F=(a+h)*p+v,N=Math.abs(Math.round(F)-T)||1,H=(o+c)*f+_,V=Math.abs(Math.round(H)-I)||1;return n.setTransform(0,Math.sign(f),Math.sign(p),0,T,I),n.drawImage(t,e,s,i,r,0,0,V,N),n.setTransform(u,f,p,g,v,_),[V,N]}n.drawImage(t,e,s,i,r,o,a,c,h);const x=Math.hypot(u,f),S=Math.hypot(p,g);return[x*c,S*h]}class ww{constructor(t,e){J(this,"alphaIsShape",!1);J(this,"fontSize",0);J(this,"fontSizeScale",1);J(this,"textMatrix",null);J(this,"textMatrixScale",1);J(this,"fontMatrix",Dm);J(this,"leading",0);J(this,"x",0);J(this,"y",0);J(this,"lineX",0);J(this,"lineY",0);J(this,"charSpacing",0);J(this,"wordSpacing",0);J(this,"textHScale",1);J(this,"textRenderingMode",ws.FILL);J(this,"textRise",0);J(this,"fillColor","#000000");J(this,"strokeColor","#000000");J(this,"patternFill",!1);J(this,"patternStroke",!1);J(this,"fillAlpha",1);J(this,"strokeAlpha",1);J(this,"lineWidth",1);J(this,"activeSMask",null);J(this,"transferMaps","none");this.clipBox=new Float32Array([0,0,t,e]),this.minMax=tc.slice()}clone(){const t=Object.create(this);return t.clipBox=this.clipBox.slice(),t.minMax=this.minMax.slice(),t}getPathBoundingBox(t=gs.FILL,e=null){const s=this.minMax.slice();if(t===gs.STROKE){e||ue("Stroke bounding box must include transform."),pt.singularValueDecompose2dScale(e,wi);const i=wi[0]*this.lineWidth/2,r=wi[1]*this.lineWidth/2;s[0]-=i,s[1]-=r,s[2]+=i,s[3]+=r}return s}updateClipFromPath(){const t=pt.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(t||[0,0,0,0])}isEmptyClip(){return this.minMax[0]===1/0}startNewPathAndClipBox(t){this.clipBox.set(t,0),this.minMax.set(tc,0)}getClippedPathBoundingBox(t=gs.FILL,e=null){return pt.intersect(this.clipBox,this.getPathBoundingBox(t,e))}}function Aw(n,t){if(t instanceof ImageData){n.putImageData(t,0,0);return}const e=t.height,s=t.width,i=e%Zs,r=(e-i)/Zs,o=i===0?r:r+1,a=n.createImageData(s,Zs);let c=0,h;const u=t.data,f=a.data;let p,g,v,_;if(t.kind===Of.GRAYSCALE_1BPP){const x=u.byteLength,S=new Uint32Array(f.buffer,0,f.byteLength>>2),C=S.length,T=s+7>>3,R=4294967295,I=ys.isLittleEndian?4278190080:255;for(p=0;p<o;p++){for(v=p<r?Zs:i,h=0,g=0;g<v;g++){const F=x-c;let N=0;const H=F>T?s:F*8-7,V=H&-8;let Y=0,Z=0;for(;N<V;N+=8)Z=u[c++],S[h++]=Z&128?R:I,S[h++]=Z&64?R:I,S[h++]=Z&32?R:I,S[h++]=Z&16?R:I,S[h++]=Z&8?R:I,S[h++]=Z&4?R:I,S[h++]=Z&2?R:I,S[h++]=Z&1?R:I;for(;N<H;N++)Y===0&&(Z=u[c++],Y=128),S[h++]=Z&Y?R:I,Y>>=1}for(;h<C;)S[h++]=0;n.putImageData(a,0,p*Zs)}}else if(t.kind===Of.RGBA_32BPP){for(g=0,_=s*Zs*4,p=0;p<r;p++)f.set(u.subarray(c,c+_)),c+=_,n.putImageData(a,0,g),g+=Zs;p<o&&(_=s*i*4,f.set(u.subarray(c,c+_)),n.putImageData(a,0,g))}else if(t.kind===Of.RGB_24BPP)for(v=Zs,_=s*v,p=0;p<o;p++){for(p>=r&&(v=i,_=s*v),h=0,g=_;g--;)f[h++]=u[c++],f[h++]=u[c++],f[h++]=u[c++],f[h++]=255;n.putImageData(a,0,p*Zs)}else throw new Error(`bad image kind: ${t.kind}`)}function Ew(n,t){if(t.bitmap){n.drawImage(t.bitmap,0,0);return}const e=t.height,s=t.width,i=e%Zs,r=(e-i)/Zs,o=i===0?r:r+1,a=n.createImageData(s,Zs);let c=0;const h=t.data,u=a.data;for(let f=0;f<o;f++){const p=f<r?Zs:i;({srcPos:c}=BR({src:h,srcPos:c,dest:u,width:s,height:p,nonBlackColor:0})),n.putImageData(a,0,f*Zs)}}function Lh(n,t){const e=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const s of e)n[s]!==void 0&&(t[s]=n[s]);n.setLineDash!==void 0&&(t.setLineDash(n.getLineDash()),t.lineDashOffset=n.lineDashOffset)}function xf(n){n.strokeStyle=n.fillStyle="#000000",n.fillRule="nonzero",n.globalAlpha=1,n.lineWidth=1,n.lineCap="butt",n.lineJoin="miter",n.miterLimit=10,n.globalCompositeOperation="source-over",n.font="10px sans-serif",n.setLineDash!==void 0&&(n.setLineDash([]),n.lineDashOffset=0);const{filter:t}=n;t!=="none"&&t!==""&&(n.filter="none")}function Sw(n,t){if(t)return!0;pt.singularValueDecompose2dScale(n,wi);const e=Math.fround(Fr.pixelRatio*Uo.PDF_TO_CSS_UNITS);return wi[0]<=e&&wi[1]<=e}const UR=["butt","round","square"],zR=["miter","round","bevel"],WR={},xw={};var fn,rb,ob,ab;const D_=class D_{constructor(t,e,s,i,r,{optionalContentConfig:o,markedContentStack:a=null},c,h){w(this,fn);this.ctx=t,this.current=new ww(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=e,this.objs=s,this.canvasFactory=i,this.filterFactory=r,this.groupStack=[],this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=a||[],this.optionalContentConfig=o,this.cachedCanvases=new VR(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=c,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=h,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(t,e=null){return typeof t=="string"?t.startsWith("g_")?this.commonObjs.get(t):this.objs.get(t):e}beginDrawing({transform:t,viewport:e,transparency:s=!1,background:i=null}){const r=this.ctx.canvas.width,o=this.ctx.canvas.height,a=this.ctx.fillStyle;if(this.ctx.fillStyle=i||"#ffffff",this.ctx.fillRect(0,0,r,o),this.ctx.fillStyle=a,s){const c=this.cachedCanvases.getCanvas("transparent",r,o);this.compositeCtx=this.ctx,this.transparentCanvas=c.canvas,this.ctx=c.context,this.ctx.save(),this.ctx.transform(...ke(this.compositeCtx))}this.ctx.save(),xf(this.ctx),t&&(this.ctx.transform(...t),this.outputScaleX=t[0],this.outputScaleY=t[0]),this.ctx.transform(...e.transform),this.viewportScale=e.scale,this.baseTransform=ke(this.ctx)}executeOperatorList(t,e,s,i){const r=t.argsArray,o=t.fnArray;let a=e||0;const c=r.length;if(c===a)return a;const h=c-a>yw&&typeof s=="function",u=h?Date.now()+HR:0;let f=0;const p=this.commonObjs,g=this.objs;let v;for(;;){if(i!==void 0&&a===i.nextBreakPoint)return i.breakIt(a,s),a;if(v=o[a],v!==Ep.dependency)this[v].apply(this,r[a]);else for(const _ of r[a]){const x=_.startsWith("g_")?p:g;if(!x.has(_))return x.get(_,s),a}if(a++,a===c)return a;if(h&&++f>yw){if(Date.now()>u)return s(),a;f=0}}}endDrawing(){A(this,fn,rb).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const t of this._cachedBitmapsMap.values()){for(const e of t.values())typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement&&(e.width=e.height=0);t.clear()}this._cachedBitmapsMap.clear(),A(this,fn,ob).call(this)}_scaleImage(t,e){const s=t.width??t.displayWidth,i=t.height??t.displayHeight;let r=Math.max(Math.hypot(e[0],e[1]),1),o=Math.max(Math.hypot(e[2],e[3]),1),a=s,c=i,h="prescale1",u,f;for(;r>2&&a>1||o>2&&c>1;){let p=a,g=c;r>2&&a>1&&(p=a>=16384?Math.floor(a/2)-1||1:Math.ceil(a/2),r/=a/p),o>2&&c>1&&(g=c>=16384?Math.floor(c/2)-1||1:Math.ceil(c)/2,o/=c/g),u=this.cachedCanvases.getCanvas(h,p,g),f=u.context,f.clearRect(0,0,p,g),f.drawImage(t,0,0,a,c,0,0,p,g),t=u.canvas,a=p,c=g,h=h==="prescale1"?"prescale2":"prescale1"}return{img:t,paintWidth:a,paintHeight:c}}_createMaskCanvas(t){const e=this.ctx,{width:s,height:i}=t,r=this.current.fillColor,o=this.current.patternFill,a=ke(e);let c,h,u,f;if((t.bitmap||t.data)&&t.count>1){const V=t.bitmap||t.data.buffer;h=JSON.stringify(o?a:[a.slice(0,4),r]),c=this._cachedBitmapsMap.get(V),c||(c=new Map,this._cachedBitmapsMap.set(V,c));const Y=c.get(h);if(Y&&!o){const Z=Math.round(Math.min(a[0],a[2])+a[4]),vt=Math.round(Math.min(a[1],a[3])+a[5]);return{canvas:Y,offsetX:Z,offsetY:vt}}u=Y}u||(f=this.cachedCanvases.getCanvas("maskCanvas",s,i),Ew(f.context,t));let p=pt.transform(a,[1/s,0,0,-1/i,0,0]);p=pt.transform(p,[1,0,0,1,0,-i]);const g=tc.slice();pt.axialAlignedBoundingBox([0,0,s,i],p,g);const[v,_,x,S]=g,C=Math.round(x-v)||1,T=Math.round(S-_)||1,R=this.cachedCanvases.getCanvas("fillCanvas",C,T),I=R.context,F=v,N=_;I.translate(-F,-N),I.transform(...p),u||(u=this._scaleImage(f.canvas,vn(I)),u=u.img,c&&o&&c.set(h,u)),I.imageSmoothingEnabled=Sw(ke(I),t.interpolate),Sf(I,u,0,0,u.width,u.height,0,0,s,i),I.globalCompositeOperation="source-in";const H=pt.transform(vn(I),[1,0,0,1,-F,-N]);return I.fillStyle=o?r.getPattern(e,this,H,gs.FILL):r,I.fillRect(0,0,s,i),c&&!o&&(this.cachedCanvases.delete("fillCanvas"),c.set(h,R.canvas)),{canvas:R.canvas,offsetX:Math.round(F),offsetY:Math.round(N)}}setLineWidth(t){t!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=t,this.ctx.lineWidth=t}setLineCap(t){this.ctx.lineCap=UR[t]}setLineJoin(t){this.ctx.lineJoin=zR[t]}setMiterLimit(t){this.ctx.miterLimit=t}setDash(t,e){const s=this.ctx;s.setLineDash!==void 0&&(s.setLineDash(t),s.lineDashOffset=e)}setRenderingIntent(t){}setFlatness(t){}setGState(t){for(const[e,s]of t)switch(e){case"LW":this.setLineWidth(s);break;case"LC":this.setLineCap(s);break;case"LJ":this.setLineJoin(s);break;case"ML":this.setMiterLimit(s);break;case"D":this.setDash(s[0],s[1]);break;case"RI":this.setRenderingIntent(s);break;case"FL":this.setFlatness(s);break;case"Font":this.setFont(s[0],s[1]);break;case"CA":this.current.strokeAlpha=s;break;case"ca":this.ctx.globalAlpha=this.current.fillAlpha=s;break;case"BM":this.ctx.globalCompositeOperation=s;break;case"SMask":this.current.activeSMask=s?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(s);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const t=this.inSMaskMode;this.current.activeSMask&&!t?this.beginSMaskMode():!this.current.activeSMask&&t&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const t=this.ctx.canvas.width,e=this.ctx.canvas.height,s="smaskGroupAt"+this.groupLevel,i=this.cachedCanvases.getCanvas(s,t,e);this.suspendedCtx=this.ctx;const r=this.ctx=i.context;r.setTransform(this.suspendedCtx.getTransform()),Lh(this.suspendedCtx,r),jR(r,this.suspendedCtx),this.setGState([["BM","source-over"]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),Lh(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(t){if(!this.current.activeSMask)return;t?(t[0]=Math.floor(t[0]),t[1]=Math.floor(t[1]),t[2]=Math.ceil(t[2]),t[3]=Math.ceil(t[3])):t=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const e=this.current.activeSMask,s=this.suspendedCtx;this.composeSMask(s,e,this.ctx,t),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(t,e,s,i){const r=i[0],o=i[1],a=i[2]-r,c=i[3]-o;a===0||c===0||(this.genericComposeSMask(e.context,s,a,c,e.subtype,e.backdrop,e.transferMap,r,o,e.offsetX,e.offsetY),t.save(),t.globalAlpha=1,t.globalCompositeOperation="source-over",t.setTransform(1,0,0,1,0,0),t.drawImage(s.canvas,0,0),t.restore())}genericComposeSMask(t,e,s,i,r,o,a,c,h,u,f){let p=t.canvas,g=c-u,v=h-f;if(o){const x=pt.makeHexColor(...o);if(g<0||v<0||g+s>p.width||v+i>p.height){const S=this.cachedCanvases.getCanvas("maskExtension",s,i),C=S.context;C.drawImage(p,-g,-v),C.globalCompositeOperation="destination-atop",C.fillStyle=x,C.fillRect(0,0,s,i),C.globalCompositeOperation="source-over",p=S.canvas,g=v=0}else{t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0);const S=new Path2D;S.rect(g,v,s,i),t.clip(S),t.globalCompositeOperation="destination-atop",t.fillStyle=x,t.fillRect(g,v,s,i),t.restore()}}e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0),r==="Alpha"&&a?e.filter=this.filterFactory.addAlphaFilter(a):r==="Luminosity"&&(e.filter=this.filterFactory.addLuminosityFilter(a));const _=new Path2D;_.rect(c,h,s,i),e.clip(_),e.globalCompositeOperation="destination-in",e.drawImage(p,g,v,s,i,c,h,s,i),e.restore()}save(){this.inSMaskMode&&Lh(this.ctx,this.suspendedCtx),this.ctx.save();const t=this.current;this.stateStack.push(t),this.current=t.clone()}restore(){if(this.stateStack.length===0){this.inSMaskMode&&this.endSMaskMode();return}this.current=this.stateStack.pop(),this.ctx.restore(),this.inSMaskMode&&Lh(this.suspendedCtx,this.ctx),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}transform(t,e,s,i,r,o){this.ctx.transform(t,e,s,i,r,o),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(t,e,s){let[i]=e;if(!s){i||(i=e[0]=new Path2D),this[t](i);return}if(!(i instanceof Path2D)){const r=e[0]=new Path2D;for(let o=0,a=i.length;o<a;)switch(i[o++]){case Af.moveTo:r.moveTo(i[o++],i[o++]);break;case Af.lineTo:r.lineTo(i[o++],i[o++]);break;case Af.curveTo:r.bezierCurveTo(i[o++],i[o++],i[o++],i[o++],i[o++],i[o++]);break;case Af.closePath:r.closePath();break;default:kt(`Unrecognized drawing path operator: ${i[o-1]}`);break}i=r}pt.axialAlignedBoundingBox(s,ke(this.ctx),this.current.minMax),this[t](i)}closePath(){this.ctx.closePath()}stroke(t,e=!0){const s=this.ctx,i=this.current.strokeColor;if(s.globalAlpha=this.current.strokeAlpha,this.contentVisible)if(typeof i=="object"&&(i!=null&&i.getPattern)){const r=i.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.strokeStyle=i.getPattern(s,this,vn(s),gs.STROKE),r){const o=new Path2D;o.addPath(t,s.getTransform().invertSelf().multiplySelf(r)),t=o}this.rescaleAndStroke(t,!1),s.restore()}else this.rescaleAndStroke(t,!0);e&&this.consumePath(t,this.current.getClippedPathBoundingBox(gs.STROKE,ke(this.ctx))),s.globalAlpha=this.current.fillAlpha}closeStroke(t){this.stroke(t)}fill(t,e=!0){const s=this.ctx,i=this.current.fillColor,r=this.current.patternFill;let o=!1;if(r){const c=i.isModifyingCurrentTransform()?s.getTransform():null;if(s.save(),s.fillStyle=i.getPattern(s,this,vn(s),gs.FILL),c){const h=new Path2D;h.addPath(t,s.getTransform().invertSelf().multiplySelf(c)),t=h}o=!0}const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(s.fill(t,"evenodd"),this.pendingEOFill=!1):s.fill(t)),o&&s.restore(),e&&this.consumePath(t,a)}eoFill(t){this.pendingEOFill=!0,this.fill(t)}fillStroke(t){this.fill(t,!1),this.stroke(t,!1),this.consumePath(t)}eoFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}closeFillStroke(t){this.fillStroke(t)}closeEOFillStroke(t){this.pendingEOFill=!0,this.fillStroke(t)}endPath(t){this.consumePath(t)}rawFillPath(t){this.ctx.fill(t)}clip(){this.pendingClip=WR}eoClip(){this.pendingClip=xw}beginText(){this.current.textMatrix=null,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const t=this.pendingTextPaths,e=this.ctx;if(t===void 0)return;const s=new Path2D,i=e.getTransform().invertSelf();for(const{transform:r,x:o,y:a,fontSize:c,path:h}of t)s.addPath(h,new DOMMatrix(r).preMultiplySelf(i).translate(o,a).scale(c,-c));e.clip(s),delete this.pendingTextPaths}setCharSpacing(t){this.current.charSpacing=t}setWordSpacing(t){this.current.wordSpacing=t}setHScale(t){this.current.textHScale=t/100}setLeading(t){this.current.leading=-t}setFont(t,e){var u;const s=this.commonObjs.get(t),i=this.current;if(!s)throw new Error(`Can't find font for ${t}`);if(i.fontMatrix=s.fontMatrix||Dm,(i.fontMatrix[0]===0||i.fontMatrix[3]===0)&&kt("Invalid font matrix for font "+t),e<0?(e=-e,i.fontDirection=-1):i.fontDirection=1,this.current.font=s,this.current.fontSize=e,s.isType3Font)return;const r=s.loadedName||"sans-serif",o=((u=s.systemFontInfo)==null?void 0:u.css)||`"${r}", ${s.fallbackName}`;let a="normal";s.black?a="900":s.bold&&(a="bold");const c=s.italic?"italic":"normal";let h=e;e<_w?h=_w:e>vw&&(h=vw),this.current.fontSizeScale=e/h,this.ctx.font=`${c} ${a} ${h}px ${o}`}setTextRenderingMode(t){this.current.textRenderingMode=t}setTextRise(t){this.current.textRise=t}moveText(t,e){this.current.x=this.current.lineX+=t,this.current.y=this.current.lineY+=e}setLeadingMoveText(t,e){this.setLeading(-e),this.moveText(t,e)}setTextMatrix(t){const{current:e}=this;e.textMatrix=t,e.textMatrixScale=Math.hypot(t[0],t[1]),e.x=e.lineX=0,e.y=e.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(t,e,s,i,r){const o=this.ctx,a=this.current,c=a.font,h=a.textRenderingMode,u=a.fontSize/a.fontSizeScale,f=h&ws.FILL_STROKE_MASK,p=!!(h&ws.ADD_TO_PATH_FLAG),g=a.patternFill&&!c.missingFile,v=a.patternStroke&&!c.missingFile;let _;if((c.disableFontFace||p||g||v)&&(_=c.getPathGenerator(this.commonObjs,t)),c.disableFontFace||g||v){o.save(),o.translate(e,s),o.scale(u,-u);let x;if((f===ws.FILL||f===ws.FILL_STROKE)&&(i?(x=o.getTransform(),o.setTransform(...i),o.fill(A(this,fn,ab).call(this,_,x,i))):o.fill(_)),f===ws.STROKE||f===ws.FILL_STROKE)if(r){x||(x=o.getTransform()),o.setTransform(...r);const{a:S,b:C,c:T,d:R}=x,I=pt.inverseTransform(r),F=pt.transform([S,C,T,R,0,0],I);pt.singularValueDecompose2dScale(F,wi),o.lineWidth*=Math.max(wi[0],wi[1])/u,o.stroke(A(this,fn,ab).call(this,_,x,r))}else o.lineWidth/=u,o.stroke(_);o.restore()}else(f===ws.FILL||f===ws.FILL_STROKE)&&o.fillText(t,e,s),(f===ws.STROKE||f===ws.FILL_STROKE)&&o.strokeText(t,e,s);p&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:ke(o),x:e,y:s,fontSize:u,path:_})}get isFontSubpixelAAEnabled(){const{context:t}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);t.scale(1.5,1),t.fillText("I",0,10);const e=t.getImageData(0,0,10,10).data;let s=!1;for(let i=3;i<e.length;i+=4)if(e[i]>0&&e[i]<255){s=!0;break}return jt(this,"isFontSubpixelAAEnabled",s)}showText(t){const e=this.current,s=e.font;if(s.isType3Font)return this.showType3Text(t);const i=e.fontSize;if(i===0)return;const r=this.ctx,o=e.fontSizeScale,a=e.charSpacing,c=e.wordSpacing,h=e.fontDirection,u=e.textHScale*h,f=t.length,p=s.vertical,g=p?1:-1,v=s.defaultVMetrics,_=i*e.fontMatrix[0],x=e.textRenderingMode===ws.FILL&&!s.disableFontFace&&!e.patternFill;r.save(),e.textMatrix&&r.transform(...e.textMatrix),r.translate(e.x,e.y+e.textRise),h>0?r.scale(u,-1):r.scale(u,1);let S,C;if(e.patternFill){r.save();const N=e.fillColor.getPattern(r,this,vn(r),gs.FILL);S=ke(r),r.restore(),r.fillStyle=N}if(e.patternStroke){r.save();const N=e.strokeColor.getPattern(r,this,vn(r),gs.STROKE);C=ke(r),r.restore(),r.strokeStyle=N}let T=e.lineWidth;const R=e.textMatrixScale;if(R===0||T===0){const N=e.textRenderingMode&ws.FILL_STROKE_MASK;(N===ws.STROKE||N===ws.FILL_STROKE)&&(T=this.getSinglePixelWidth())}else T/=R;if(o!==1&&(r.scale(o,o),T/=o),r.lineWidth=T,s.isInvalidPDFjsFont){const N=[];let H=0;for(const V of t)N.push(V.unicode),H+=V.width;r.fillText(N.join(""),0,0),e.x+=H*_*u,r.restore(),this.compose();return}let I=0,F;for(F=0;F<f;++F){const N=t[F];if(typeof N=="number"){I+=g*N*i/1e3;continue}let H=!1;const V=(N.isSpace?c:0)+a,Y=N.fontChar,Z=N.accent;let vt,At,St=N.width;if(p){const Q=N.vmetric||v,X=-(N.vmetric?Q[1]:St*.5)*_,Ct=Q[2]*_;St=Q?-Q[0]:St,vt=X/o,At=(I+Ct)/o}else vt=I/o,At=0;if(s.remeasure&&St>0){const Q=r.measureText(Y).width*1e3/i*o;if(St<Q&&this.isFontSubpixelAAEnabled){const X=St/Q;H=!0,r.save(),r.scale(X,1),vt/=X}else St!==Q&&(vt+=(St-Q)/2e3*i/o)}if(this.contentVisible&&(N.isInFont||s.missingFile)){if(x&&!Z)r.fillText(Y,vt,At);else if(this.paintChar(Y,vt,At,S,C),Z){const Q=vt+i*Z.offset.x/o,X=At-i*Z.offset.y/o;this.paintChar(Z.fontChar,Q,X,S,C)}}const fe=p?St*_-V*h:St*_+V*h;I+=fe,H&&r.restore()}p?e.y-=I:e.x+=I*u,r.restore(),this.compose()}showType3Text(t){const e=this.ctx,s=this.current,i=s.font,r=s.fontSize,o=s.fontDirection,a=i.vertical?1:-1,c=s.charSpacing,h=s.wordSpacing,u=s.textHScale*o,f=s.fontMatrix||Dm,p=t.length,g=s.textRenderingMode===ws.INVISIBLE;let v,_,x,S;if(!(g||r===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,e.save(),s.textMatrix&&e.transform(...s.textMatrix),e.translate(s.x,s.y+s.textRise),e.scale(u,o),v=0;v<p;++v){if(_=t[v],typeof _=="number"){S=a*_*r/1e3,this.ctx.translate(S,0),s.x+=S*u;continue}const C=(_.isSpace?h:0)+c,T=i.charProcOperatorList[_.operatorListId];T?this.contentVisible&&(this.save(),e.scale(r,r),e.transform(...f),this.executeOperatorList(T),this.restore()):kt(`Type3 character "${_.operatorListId}" is not available.`);const R=[_.width,0];pt.applyTransform(R,f),x=R[0]*r+C,e.translate(x,0),s.x+=x*u}e.restore()}}setCharWidth(t,e){}setCharWidthAndBounds(t,e,s,i,r,o){const a=new Path2D;a.rect(s,i,r-s,o-i),this.ctx.clip(a),this.endPath()}getColorN_Pattern(t){let e;if(t[0]==="TilingPattern"){const s=this.baseTransform||ke(this.ctx),i={createCanvasGraphics:r=>new D_(r,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};e=new nb(t,this.ctx,i,s)}else e=this._getPattern(t[1],t[2]);return e}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(t,e,s){this.ctx.strokeStyle=this.current.strokeColor=pt.makeHexColor(t,e,s),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(t,e,s){this.ctx.fillStyle=this.current.fillColor=pt.makeHexColor(t,e,s),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(t,e=null){let s;return this.cachedPatterns.has(t)?s=this.cachedPatterns.get(t):(s=$R(this.getObject(t)),this.cachedPatterns.set(t,s)),e&&(s.matrix=e),s}shadingFill(t){if(!this.contentVisible)return;const e=this.ctx;this.save();const s=this._getPattern(t);e.fillStyle=s.getPattern(e,this,vn(e),gs.SHADING);const i=vn(e);if(i){const{width:r,height:o}=e.canvas,a=tc.slice();pt.axialAlignedBoundingBox([0,0,r,o],i,a);const[c,h,u,f]=a;this.ctx.fillRect(c,h,u-c,f-h)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){ue("Should not call beginInlineImage")}beginImageData(){ue("Should not call beginImageData")}paintFormXObjectBegin(t,e){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),t&&this.transform(...t),this.baseTransform=ke(this.ctx),e)){pt.axialAlignedBoundingBox(e,this.baseTransform,this.current.minMax);const[s,i,r,o]=e,a=new Path2D;a.rect(s,i,r-s,o-i),this.ctx.clip(a),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(t){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const e=this.ctx;t.isolated||gg("TODO: Support non-isolated groups."),t.knockout&&kt("Knockout groups not supported.");const s=ke(e);if(t.matrix&&e.transform(...t.matrix),!t.bbox)throw new Error("Bounding box is required.");let i=tc.slice();pt.axialAlignedBoundingBox(t.bbox,ke(e),i);const r=[0,0,e.canvas.width,e.canvas.height];i=pt.intersect(i,r)||[0,0,0,0];const o=Math.floor(i[0]),a=Math.floor(i[1]),c=Math.max(Math.ceil(i[2])-o,1),h=Math.max(Math.ceil(i[3])-a,1);this.current.startNewPathAndClipBox([0,0,c,h]);let u="groupAt"+this.groupLevel;t.smask&&(u+="_smask_"+this.smaskCounter++%2);const f=this.cachedCanvases.getCanvas(u,c,h),p=f.context;p.translate(-o,-a),p.transform(...s);let g=new Path2D;const[v,_,x,S]=t.bbox;if(g.rect(v,_,x-v,S-_),t.matrix){const C=new Path2D;C.addPath(g,new DOMMatrix(t.matrix)),g=C}p.clip(g),t.smask?this.smaskStack.push({canvas:f.canvas,context:p,offsetX:o,offsetY:a,subtype:t.smask.subtype,backdrop:t.smask.backdrop,transferMap:t.smask.transferMap||null,startTransformInverse:null}):(e.setTransform(1,0,0,1,0,0),e.translate(o,a),e.save()),Lh(e,p),this.ctx=p,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(e),this.groupLevel++}endGroup(t){if(!this.contentVisible)return;this.groupLevel--;const e=this.ctx,s=this.groupStack.pop();if(this.ctx=s,this.ctx.imageSmoothingEnabled=!1,t.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const i=ke(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...i);const r=tc.slice();pt.axialAlignedBoundingBox([0,0,e.canvas.width,e.canvas.height],i,r),this.ctx.drawImage(e.canvas,0,0),this.ctx.restore(),this.compose(r)}}beginAnnotation(t,e,s,i,r){if(A(this,fn,rb).call(this),xf(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),e){const o=e[2]-e[0],a=e[3]-e[1];if(r&&this.annotationCanvasMap){s=s.slice(),s[4]-=e[0],s[5]-=e[1],e=e.slice(),e[0]=e[1]=0,e[2]=o,e[3]=a,pt.singularValueDecompose2dScale(ke(this.ctx),wi);const{viewportScale:c}=this,h=Math.ceil(o*this.outputScaleX*c),u=Math.ceil(a*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(h,u);const{canvas:f,context:p}=this.annotationCanvas;this.annotationCanvasMap.set(t,f),this.annotationCanvas.savedCtx=this.ctx,this.ctx=p,this.ctx.save(),this.ctx.setTransform(wi[0],0,0,-wi[1],0,a*wi[1]),xf(this.ctx)}else{xf(this.ctx),this.endPath();const c=new Path2D;c.rect(e[0],e[1],o,a),this.ctx.clip(c)}}this.current=new ww(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...s),this.transform(...i)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),A(this,fn,ob).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(t){if(!this.contentVisible)return;const e=t.count;t=this.getObject(t.data,t),t.count=e;const s=this.ctx,i=this._createMaskCanvas(t),r=i.canvas;s.save(),s.setTransform(1,0,0,1,0,0),s.drawImage(r,i.offsetX,i.offsetY),s.restore(),this.compose()}paintImageMaskXObjectRepeat(t,e,s=0,i=0,r,o){if(!this.contentVisible)return;t=this.getObject(t.data,t);const a=this.ctx;a.save();const c=ke(a);a.transform(e,s,i,r,0,0);const h=this._createMaskCanvas(t);a.setTransform(1,0,0,1,h.offsetX-c[4],h.offsetY-c[5]);for(let u=0,f=o.length;u<f;u+=2){const p=pt.transform(c,[e,s,i,r,o[u],o[u+1]]);a.drawImage(h.canvas,p[4],p[5])}a.restore(),this.compose()}paintImageMaskXObjectGroup(t){if(!this.contentVisible)return;const e=this.ctx,s=this.current.fillColor,i=this.current.patternFill;for(const r of t){const{data:o,width:a,height:c,transform:h}=r,u=this.cachedCanvases.getCanvas("maskCanvas",a,c),f=u.context;f.save();const p=this.getObject(o,r);Ew(f,p),f.globalCompositeOperation="source-in",f.fillStyle=i?s.getPattern(f,this,vn(e),gs.FILL):s,f.fillRect(0,0,a,c),f.restore(),e.save(),e.transform(...h),e.scale(1,-1),Sf(e,u.canvas,0,0,a,c,0,-1,1,1),e.restore()}this.compose()}paintImageXObject(t){if(!this.contentVisible)return;const e=this.getObject(t);if(!e){kt("Dependent image isn't ready yet");return}this.paintInlineImageXObject(e)}paintImageXObjectRepeat(t,e,s,i){if(!this.contentVisible)return;const r=this.getObject(t);if(!r){kt("Dependent image isn't ready yet");return}const o=r.width,a=r.height,c=[];for(let h=0,u=i.length;h<u;h+=2)c.push({transform:[e,0,0,s,i[h],i[h+1]],x:0,y:0,w:o,h:a});this.paintInlineImageXObjectGroup(r,c)}applyTransferMapsToCanvas(t){return this.current.transferMaps!=="none"&&(t.filter=this.current.transferMaps,t.drawImage(t.canvas,0,0),t.filter="none"),t.canvas}applyTransferMapsToBitmap(t){if(this.current.transferMaps==="none")return t.bitmap;const{bitmap:e,width:s,height:i}=t,r=this.cachedCanvases.getCanvas("inlineImage",s,i),o=r.context;return o.filter=this.current.transferMaps,o.drawImage(e,0,0),o.filter="none",r.canvas}paintInlineImageXObject(t){if(!this.contentVisible)return;const e=t.width,s=t.height,i=this.ctx;this.save();const{filter:r}=i;r!=="none"&&r!==""&&(i.filter="none"),i.scale(1/e,-1/s);let o;if(t.bitmap)o=this.applyTransferMapsToBitmap(t);else if(typeof HTMLElement=="function"&&t instanceof HTMLElement||!t.data)o=t;else{const h=this.cachedCanvases.getCanvas("inlineImage",e,s).context;Aw(h,t),o=this.applyTransferMapsToCanvas(h)}const a=this._scaleImage(o,vn(i));i.imageSmoothingEnabled=Sw(ke(i),t.interpolate),Sf(i,a.img,0,0,a.paintWidth,a.paintHeight,0,-s,e,s),this.compose(),this.restore()}paintInlineImageXObjectGroup(t,e){if(!this.contentVisible)return;const s=this.ctx;let i;if(t.bitmap)i=t.bitmap;else{const r=t.width,o=t.height,c=this.cachedCanvases.getCanvas("inlineImage",r,o).context;Aw(c,t),i=this.applyTransferMapsToCanvas(c)}for(const r of e)s.save(),s.transform(...r.transform),s.scale(1,-1),Sf(s,i,r.x,r.y,r.w,r.h,0,-1,1,1),s.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(t){}markPointProps(t,e){}beginMarkedContent(t){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(t,e){t==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(e)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(t,e){const s=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const i=this.ctx;this.pendingClip&&(s||(this.pendingClip===xw?i.clip(t,"evenodd"):i.clip(t)),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox)}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const t=ke(this.ctx);if(t[1]===0&&t[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(t[0]),Math.abs(t[3]));else{const e=Math.abs(t[0]*t[3]-t[2]*t[1]),s=Math.hypot(t[0],t[2]),i=Math.hypot(t[1],t[3]);this._cachedGetSinglePixelWidth=Math.max(s,i)/e}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:t}=this.current,{a:e,b:s,c:i,d:r}=this.ctx.getTransform();let o,a;if(s===0&&i===0){const c=Math.abs(e),h=Math.abs(r);if(c===h)if(t===0)o=a=1/c;else{const u=c*t;o=a=u<1?1/u:1}else if(t===0)o=1/c,a=1/h;else{const u=c*t,f=h*t;o=u<1?1/u:1,a=f<1?1/f:1}}else{const c=Math.abs(e*r-s*i),h=Math.hypot(e,s),u=Math.hypot(i,r);if(t===0)o=u/c,a=h/c;else{const f=t*c;o=u>f?u/f:1,a=h>f?h/f:1}}this._cachedScaleForStroking[0]=o,this._cachedScaleForStroking[1]=a}return this._cachedScaleForStroking}rescaleAndStroke(t,e){const{ctx:s,current:{lineWidth:i}}=this,[r,o]=this.getScaleForStroking();if(r===o){s.lineWidth=(i||1)*r,s.stroke(t);return}const a=s.getLineDash();e&&s.save(),s.scale(r,o),mm.a=1/r,mm.d=1/o;const c=new Path2D;if(c.addPath(t,mm),a.length>0){const h=Math.max(r,o);s.setLineDash(a.map(u=>u/h)),s.lineDashOffset/=h}s.lineWidth=i||1,s.stroke(c),e&&s.restore()}isContentVisible(){for(let t=this.markedContentStack.length-1;t>=0;t--)if(!this.markedContentStack[t].visible)return!1;return!0}};fn=new WeakSet,rb=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},ob=function(){if(this.pageColors){const t=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(t!=="none"){const e=this.ctx.filter;this.ctx.filter=t,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=e}}},ab=function(t,e,s){const i=new Path2D;return i.addPath(t,new DOMMatrix(s).invertSelf().multiplySelf(e)),i};let lc=D_;for(const n in Ep)lc.prototype[n]!==void 0&&(lc.prototype[Ep[n]]=lc.prototype[n]);var zu,Wu;class Hn{static get workerPort(){return l(this,zu)}static set workerPort(t){if(!(typeof Worker<"u"&&t instanceof Worker)&&t!==null)throw new Error("Invalid `workerPort` type.");b(this,zu,t)}static get workerSrc(){return l(this,Wu)}static set workerSrc(t){if(typeof t!="string")throw new Error("Invalid `workerSrc` type.");b(this,Wu,t)}}zu=new WeakMap,Wu=new WeakMap,w(Hn,zu,null),w(Hn,Wu,"");var Pc,qu;class qR{constructor({parsedData:t,rawData:e}){w(this,Pc);w(this,qu);b(this,Pc,t),b(this,qu,e)}getRaw(){return l(this,qu)}get(t){return l(this,Pc).get(t)??null}[Symbol.iterator](){return l(this,Pc).entries()}}Pc=new WeakMap,qu=new WeakMap;const Ql=Symbol("INTERNAL");var Gu,Xu,Ku,Rc;class GR{constructor(t,{name:e,intent:s,usage:i,rbGroups:r}){w(this,Gu,!1);w(this,Xu,!1);w(this,Ku,!1);w(this,Rc,!0);b(this,Gu,!!(t&yi.DISPLAY)),b(this,Xu,!!(t&yi.PRINT)),this.name=e,this.intent=s,this.usage=i,this.rbGroups=r}get visible(){if(l(this,Ku))return l(this,Rc);if(!l(this,Rc))return!1;const{print:t,view:e}=this.usage;return l(this,Gu)?(e==null?void 0:e.viewState)!=="OFF":l(this,Xu)?(t==null?void 0:t.printState)!=="OFF":!0}_setVisible(t,e,s=!1){t!==Ql&&ue("Internal method `_setVisible` called."),b(this,Ku,s),b(this,Rc,e)}}Gu=new WeakMap,Xu=new WeakMap,Ku=new WeakMap,Rc=new WeakMap;var mo,ce,kc,Ic,Yu,lb;class XR{constructor(t,e=yi.DISPLAY){w(this,Yu);w(this,mo,null);w(this,ce,new Map);w(this,kc,null);w(this,Ic,null);if(this.renderingIntent=e,this.name=null,this.creator=null,t!==null){this.name=t.name,this.creator=t.creator,b(this,Ic,t.order);for(const s of t.groups)l(this,ce).set(s.id,new GR(e,s));if(t.baseState==="OFF")for(const s of l(this,ce).values())s._setVisible(Ql,!1);for(const s of t.on)l(this,ce).get(s)._setVisible(Ql,!0);for(const s of t.off)l(this,ce).get(s)._setVisible(Ql,!1);b(this,kc,this.getHash())}}isVisible(t){if(l(this,ce).size===0)return!0;if(!t)return gg("Optional content group not defined."),!0;if(t.type==="OCG")return l(this,ce).has(t.id)?l(this,ce).get(t.id).visible:(kt(`Optional content group not found: ${t.id}`),!0);if(t.type==="OCMD"){if(t.expression)return A(this,Yu,lb).call(this,t.expression);if(!t.policy||t.policy==="AnyOn"){for(const e of t.ids){if(!l(this,ce).has(e))return kt(`Optional content group not found: ${e}`),!0;if(l(this,ce).get(e).visible)return!0}return!1}else if(t.policy==="AllOn"){for(const e of t.ids){if(!l(this,ce).has(e))return kt(`Optional content group not found: ${e}`),!0;if(!l(this,ce).get(e).visible)return!1}return!0}else if(t.policy==="AnyOff"){for(const e of t.ids){if(!l(this,ce).has(e))return kt(`Optional content group not found: ${e}`),!0;if(!l(this,ce).get(e).visible)return!0}return!1}else if(t.policy==="AllOff"){for(const e of t.ids){if(!l(this,ce).has(e))return kt(`Optional content group not found: ${e}`),!0;if(l(this,ce).get(e).visible)return!1}return!0}return kt(`Unknown optional content policy ${t.policy}.`),!0}return kt(`Unknown group type ${t.type}.`),!0}setVisibility(t,e=!0,s=!0){var r;const i=l(this,ce).get(t);if(!i){kt(`Optional content group not found: ${t}`);return}if(s&&e&&i.rbGroups.length)for(const o of i.rbGroups)for(const a of o)a!==t&&((r=l(this,ce).get(a))==null||r._setVisible(Ql,!1,!0));i._setVisible(Ql,!!e,!0),b(this,mo,null)}setOCGState({state:t,preserveRB:e}){let s;for(const i of t){switch(i){case"ON":case"OFF":case"Toggle":s=i;continue}const r=l(this,ce).get(i);if(r)switch(s){case"ON":this.setVisibility(i,!0,e);break;case"OFF":this.setVisibility(i,!1,e);break;case"Toggle":this.setVisibility(i,!r.visible,e);break}}b(this,mo,null)}get hasInitialVisibility(){return l(this,kc)===null||this.getHash()===l(this,kc)}getOrder(){return l(this,ce).size?l(this,Ic)?l(this,Ic).slice():[...l(this,ce).keys()]:null}getGroup(t){return l(this,ce).get(t)||null}getHash(){if(l(this,mo)!==null)return l(this,mo);const t=new j0;for(const[e,s]of l(this,ce))t.update(`${e}:${s.visible}`);return b(this,mo,t.hexdigest())}[Symbol.iterator](){return l(this,ce).entries()}}mo=new WeakMap,ce=new WeakMap,kc=new WeakMap,Ic=new WeakMap,Yu=new WeakSet,lb=function(t){const e=t.length;if(e<2)return!0;const s=t[0];for(let i=1;i<e;i++){const r=t[i];let o;if(Array.isArray(r))o=A(this,Yu,lb).call(this,r);else if(l(this,ce).has(r))o=l(this,ce).get(r).visible;else return kt(`Optional content group not found: ${r}`),!0;switch(s){case"And":if(!o)return!1;break;case"Or":if(o)return!0;break;case"Not":return!o;default:return!0}}return s==="And"};class KR{constructor(t,{disableRange:e=!1,disableStream:s=!1}){ze(t,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:i,initialData:r,progressiveDone:o,contentDispositionFilename:a}=t;if(this._queuedChunks=[],this._progressiveDone=o,this._contentDispositionFilename=a,(r==null?void 0:r.length)>0){const c=r instanceof Uint8Array&&r.byteLength===r.buffer.byteLength?r.buffer:new Uint8Array(r).buffer;this._queuedChunks.push(c)}this._pdfDataRangeTransport=t,this._isStreamingSupported=!s,this._isRangeSupported=!e,this._contentLength=i,this._fullRequestReader=null,this._rangeReaders=[],t.addRangeListener((c,h)=>{this._onReceiveData({begin:c,chunk:h})}),t.addProgressListener((c,h)=>{this._onProgress({loaded:c,total:h})}),t.addProgressiveReadListener(c=>{this._onReceiveData({chunk:c})}),t.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),t.transportReady()}_onReceiveData({begin:t,chunk:e}){const s=e instanceof Uint8Array&&e.byteLength===e.buffer.byteLength?e.buffer:new Uint8Array(e).buffer;if(t===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(s):this._queuedChunks.push(s);else{const i=this._rangeReaders.some(function(r){return r._begin!==t?!1:(r._enqueue(s),!0)});ze(i,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}_onProgress(t){var e,s,i,r;t.total===void 0?(s=(e=this._rangeReaders[0])==null?void 0:e.onProgress)==null||s.call(e,{loaded:t.loaded}):(r=(i=this._fullRequestReader)==null?void 0:i.onProgress)==null||r.call(i,{loaded:t.loaded,total:t.total})}_onProgressiveDone(){var t;(t=this._fullRequestReader)==null||t.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(t){const e=this._rangeReaders.indexOf(t);e>=0&&this._rangeReaders.splice(e,1)}getFullReader(){ze(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const t=this._queuedChunks;return this._queuedChunks=null,new YR(this,t,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new QR(this,t,e);return this._pdfDataRangeTransport.requestDataRange(t,e),this._rangeReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeReaders.slice(0))s.cancel(t);this._pdfDataRangeTransport.abort()}}class YR{constructor(t,e,s=!1,i=null){this._stream=t,this._done=s||!1,this._filename=w_(i)?i:null,this._queuedChunks=e||[],this._loaded=0;for(const r of this._queuedChunks)this._loaded+=r.byteLength;this._requests=[],this._headersReady=Promise.resolve(),t._fullRequestReader=this,this.onProgress=null}_enqueue(t){this._done||(this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunks.push(t),this._loaded+=t.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class QR{constructor(t,e,s){this._stream=t,this._begin=e,this._end=s,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(t){if(!this._done){if(this._requests.length===0)this._queuedChunk=t;else{this._requests.shift().resolve({value:t,done:!1});for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function JR(n){let t=!0,e=s("filename\\*","i").exec(n);if(e){e=e[1];let u=a(e);return u=unescape(u),u=c(u),u=h(u),r(u)}if(e=o(n),e){const u=h(e);return r(u)}if(e=s("filename","i").exec(n),e){e=e[1];let u=a(e);return u=h(u),r(u)}function s(u,f){return new RegExp("(?:^|;)\\s*"+u+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',f)}function i(u,f){if(u){if(!/^[\x00-\xFF]+$/.test(f))return f;try{const p=new TextDecoder(u,{fatal:!0}),g=qd(f);f=p.decode(g),t=!1}catch{}}return f}function r(u){return t&&/[\x80-\xff]/.test(u)&&(u=i("utf-8",u),t&&(u=i("iso-8859-1",u))),u}function o(u){const f=[];let p;const g=s("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(p=g.exec(u))!==null;){let[,_,x,S]=p;if(_=parseInt(_,10),_ in f){if(_===0)break;continue}f[_]=[x,S]}const v=[];for(let _=0;_<f.length&&_ in f;++_){let[x,S]=f[_];S=a(S),x&&(S=unescape(S),_===0&&(S=c(S))),v.push(S)}return v.join("")}function a(u){if(u.startsWith('"')){const f=u.slice(1).split('\\"');for(let p=0;p<f.length;++p){const g=f[p].indexOf('"');g!==-1&&(f[p]=f[p].slice(0,g),f.length=p+1),f[p]=f[p].replaceAll(/\\(.)/g,"$1")}u=f.join('"')}return u}function c(u){const f=u.indexOf("'");if(f===-1)return u;const p=u.slice(0,f),v=u.slice(f+1).replace(/^[^']*'/,"");return i(p,v)}function h(u){return!u.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(u)?u:u.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(f,p,g,v){if(g==="q"||g==="Q")return v=v.replaceAll("_"," "),v=v.replaceAll(/=([0-9a-fA-F]{2})/g,function(_,x){return String.fromCharCode(parseInt(x,16))}),i(p,v);try{v=atob(v)}catch{}return i(p,v)})}return""}function Z0(n,t){const e=new Headers;if(!n||!t||typeof t!="object")return e;for(const s in t){const i=t[s];i!==void 0&&e.append(s,i)}return e}function bg(n){var t;return((t=URL.parse(n))==null?void 0:t.origin)??null}function tE({responseHeaders:n,isHttp:t,rangeChunkSize:e,disableRange:s}){const i={allowRangeRequests:!1,suggestedLength:void 0},r=parseInt(n.get("Content-Length"),10);return!Number.isInteger(r)||(i.suggestedLength=r,r<=2*e)||s||!t||n.get("Accept-Ranges")!=="bytes"||(n.get("Content-Encoding")||"identity")!=="identity"||(i.allowRangeRequests=!0),i}function eE(n){const t=n.get("Content-Disposition");if(t){let e=JR(t);if(e.includes("%"))try{e=decodeURIComponent(e)}catch{}if(w_(e))return e}return null}function Yd(n,t){return new Sp(`Unexpected server response (${n}) while retrieving PDF "${t}".`,n,n===404||n===0&&t.startsWith("file:"))}function sE(n){return n===200||n===206}function iE(n,t,e){return{method:"GET",headers:n,signal:e.signal,mode:"cors",credentials:t?"include":"same-origin",redirect:"follow"}}function nE(n){return n instanceof Uint8Array?n.buffer:n instanceof ArrayBuffer?n:(kt(`getArrayBuffer - unexpected data format: ${n}`),new Uint8Array(n).buffer)}class Cw{constructor(t){J(this,"_responseOrigin",null);this.source=t,this.isHttp=/^https?:/i.test(t.url),this.headers=Z0(this.isHttp,t.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return ze(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new ZR(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new tk(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class ZR{constructor(t){this._stream=t,this._reader=null,this._loaded=0,this._filename=null;const e=t.source;this._withCredentials=e.withCredentials||!1,this._contentLength=e.length,this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange;const s=new Headers(t.headers),i=e.url;fetch(i,iE(s,this._withCredentials,this._abortController)).then(r=>{if(t._responseOrigin=bg(r.url),!sE(r.status))throw Yd(r.status,i);this._reader=r.body.getReader(),this._headersCapability.resolve();const o=r.headers,{allowRangeRequests:a,suggestedLength:c}=tE({responseHeaders:o,isHttp:t.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=a,this._contentLength=c||this._contentLength,this._filename=eE(o),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Vo("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._headersCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:nE(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}class tk{constructor(t,e,s){this._stream=t,this._reader=null,this._loaded=0;const i=t.source;this._withCredentials=i.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!i.disableStream,this._abortController=new AbortController;const r=new Headers(t.headers);r.append("Range",`bytes=${e}-${s-1}`);const o=i.url;fetch(o,iE(r,this._withCredentials,this._abortController)).then(a=>{const c=bg(a.url);if(c!==t._responseOrigin)throw new Error(`Expected range response-origin "${c}" to match "${t._responseOrigin}".`);if(!sE(a.status))throw Yd(a.status,o);this._readCapability.resolve(),this._reader=a.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;await this._readCapability.promise;const{value:t,done:e}=await this._reader.read();return e?{value:t,done:e}:(this._loaded+=t.byteLength,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:nE(t),done:!1})}cancel(t){var e;(e=this._reader)==null||e.cancel(t),this._abortController.abort()}}const bm=200,_m=206;function ek(n){const t=n.response;return typeof t!="string"?t:qd(t).buffer}class sk{constructor({url:t,httpHeaders:e,withCredentials:s}){J(this,"_responseOrigin",null);this.url=t,this.isHttp=/^https?:/i.test(t),this.headers=Z0(this.isHttp,e),this.withCredentials=s||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(t){const e=new XMLHttpRequest,s=this.currXhrId++,i=this.pendingRequests[s]={xhr:e};e.open("GET",this.url),e.withCredentials=this.withCredentials;for(const[r,o]of this.headers)e.setRequestHeader(r,o);return this.isHttp&&"begin"in t&&"end"in t?(e.setRequestHeader("Range",`bytes=${t.begin}-${t.end-1}`),i.expectedStatus=_m):i.expectedStatus=bm,e.responseType="arraybuffer",ze(t.onError,"Expected `onError` callback to be provided."),e.onerror=()=>{t.onError(e.status)},e.onreadystatechange=this.onStateChange.bind(this,s),e.onprogress=this.onProgress.bind(this,s),i.onHeadersReceived=t.onHeadersReceived,i.onDone=t.onDone,i.onError=t.onError,i.onProgress=t.onProgress,e.send(null),s}onProgress(t,e){var i;const s=this.pendingRequests[t];s&&((i=s.onProgress)==null||i.call(s,e))}onStateChange(t,e){const s=this.pendingRequests[t];if(!s)return;const i=s.xhr;if(i.readyState>=2&&s.onHeadersReceived&&(s.onHeadersReceived(),delete s.onHeadersReceived),i.readyState!==4||!(t in this.pendingRequests))return;if(delete this.pendingRequests[t],i.status===0&&this.isHttp){s.onError(i.status);return}const r=i.status||bm;if(!(r===bm&&s.expectedStatus===_m)&&r!==s.expectedStatus){s.onError(i.status);return}const a=ek(i);if(r===_m){const c=i.getResponseHeader("Content-Range"),h=/bytes (\d+)-(\d+)\/(\d+)/.exec(c);h?s.onDone({begin:parseInt(h[1],10),chunk:a}):(kt('Missing or invalid "Content-Range" header.'),s.onError(0))}else a?s.onDone({begin:0,chunk:a}):s.onError(i.status)}getRequestXhr(t){return this.pendingRequests[t].xhr}isPendingRequest(t){return t in this.pendingRequests}abortRequest(t){const e=this.pendingRequests[t].xhr;delete this.pendingRequests[t],e.abort()}}class ik{constructor(t){this._source=t,this._manager=new sk(t),this._rangeChunkSize=t.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(t){const e=this._rangeRequestReaders.indexOf(t);e>=0&&this._rangeRequestReaders.splice(e,1)}getFullReader(){return ze(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new nk(this._manager,this._source),this._fullRequestReader}getRangeReader(t,e){const s=new rk(this._manager,t,e);return s.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class nk{constructor(t,e){this._manager=t,this._url=e.url,this._fullRequestId=t.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=e.disableRange||!1,this._contentLength=e.length,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const t=this._fullRequestId,e=this._manager.getRequestXhr(t);this._manager._responseOrigin=bg(e.responseURL);const s=e.getAllResponseHeaders(),i=new Headers(s?s.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(a=>{const[c,...h]=a.split(": ");return[c,h.join(": ")]}):[]),{allowRangeRequests:r,suggestedLength:o}=tE({responseHeaders:i,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});r&&(this._isRangeSupported=!0),this._contentLength=o||this._contentLength,this._filename=eE(i),this._isRangeSupported&&this._manager.abortRequest(t),this._headersCapability.resolve()}_onDone(t){if(t&&(this._requests.length>0?this._requests.shift().resolve({value:t.chunk,done:!1}):this._cachedChunks.push(t.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(t){this._storedError=Yd(t,this._url),this._headersCapability.reject(this._storedError);for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(t){var e;(e=this.onProgress)==null||e.call(this,{loaded:t.loaded,total:t.lengthComputable?t.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0,this._headersCapability.reject(t);for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class rk{constructor(t,e,s){this._manager=t,this._url=t.url,this._requestId=t.request({begin:e,end:s,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var e;const t=bg((e=this._manager.getRequestXhr(this._requestId))==null?void 0:e.responseURL);t!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${t}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var t;(t=this.onClosed)==null||t.call(this,this)}_onDone(t){const e=t.chunk;this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunk=e,this._done=!0;for(const s of this._requests)s.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(t){this._storedError??(this._storedError=Yd(t,this._url));for(const e of this._requests)e.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(t){var e;this.isStreamingSupported||(e=this.onProgress)==null||e.call(this,{loaded:t.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const e=this._queuedChunk;return this._queuedChunk=null,{value:e,done:!1}}if(this._done)return{value:void 0,done:!0};const t=Promise.withResolvers();return this._requests.push(t),t.promise}cancel(t){this._done=!0;for(const e of this._requests)e.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const ok=/^[a-z][a-z0-9\-+.]+:/i;function ak(n){if(ok.test(n))return new URL(n);const t=process.getBuiltinModule("url");return new URL(t.pathToFileURL(n))}class lk{constructor(t){this.source=t,this.url=ak(t.url),ze(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var t;return((t=this._fullRequestReader)==null?void 0:t._loaded)??0}getFullReader(){return ze(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new ck(this),this._fullRequestReader}getRangeReader(t,e){if(e<=this._progressiveDataLength)return null;const s=new hk(this,t,e);return this._rangeRequestReaders.push(s),s}cancelAllRequests(t){var e;(e=this._fullRequestReader)==null||e.cancel(t);for(const s of this._rangeRequestReaders.slice(0))s.cancel(t)}}class ck{constructor(t){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null;const e=t.source;this._contentLength=e.length,this._loaded=0,this._filename=null,this._disableRange=e.disableRange||!1,this._rangeChunkSize=e.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!e.disableStream,this._isRangeSupported=!e.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const s=process.getBuiltinModule("fs");s.promises.lstat(this._url).then(i=>{this._contentLength=i.size,this._setReadableStream(s.createReadStream(this._url)),this._headersCapability.resolve()},i=>{i.code==="ENOENT"&&(i=Yd(0,this._url.href)),this._storedError=i,this._headersCapability.reject(i)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Vo("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class hk{constructor(t,e,s){this._url=t.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const i=t.source;this._isStreamingSupported=!i.disableStream;const r=process.getBuiltinModule("fs");this._setReadableStream(r.createReadStream(this._url,{start:e,end:s-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var s;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const t=this._readableStream.read();return t===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=t.length,(s=this.onProgress)==null||s.call(this,{loaded:this._loaded}),{value:new Uint8Array(t).buffer,done:!1})}cancel(t){if(!this._readableStream){this._error(t);return}this._readableStream.destroy(t)}_error(t){this._storedError=t,this._readCapability.resolve()}_setReadableStream(t){this._readableStream=t,t.on("readable",()=>{this._readCapability.resolve()}),t.on("end",()=>{t.destroy(),this._done=!0,this._readCapability.resolve()}),t.on("error",e=>{this._error(e)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const uk=1e5,Tw=30;var Lw,bo,Qs,Qu,Ju,Fa,fr,Zu,td,$a,Lc,Mc,_o,Dc,ed,Oc,Ba,sd,id,Nc,Ha,nd,vo,Fc,$r,rE,oE,cb,Si,qf,hb,aE,lE;const Ke=class Ke{constructor({textContentSource:t,container:e,viewport:s}){w(this,$r);w(this,bo,Promise.withResolvers());w(this,Qs,null);w(this,Qu,!1);w(this,Ju,!!((Lw=globalThis.FontInspector)!=null&&Lw.enabled));w(this,Fa,null);w(this,fr,null);w(this,Zu,0);w(this,td,0);w(this,$a,null);w(this,Lc,null);w(this,Mc,0);w(this,_o,0);w(this,Dc,Object.create(null));w(this,ed,[]);w(this,Oc,null);w(this,Ba,[]);w(this,sd,new WeakMap);w(this,id,null);var c;if(t instanceof ReadableStream)b(this,Oc,t);else if(typeof t=="object")b(this,Oc,new ReadableStream({start(h){h.enqueue(t),h.close()}}));else throw new Error('No "textContentSource" parameter specified.');b(this,Qs,b(this,Lc,e)),b(this,_o,s.scale*Fr.pixelRatio),b(this,Mc,s.rotation),b(this,fr,{div:null,properties:null,ctx:null});const{pageWidth:i,pageHeight:r,pageX:o,pageY:a}=s.rawDims;b(this,id,[1,0,0,-1,-o,a+r]),b(this,td,i),b(this,Zu,r),A(c=Ke,Si,aE).call(c),yl(e,s),l(this,bo).promise.finally(()=>{l(Ke,Fc).delete(this),b(this,fr,null),b(this,Dc,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:t,isFirefox:e}=ys.platform;return jt(this,"fontFamilyMap",new Map([["sans-serif",`${t&&e?"Calibri, ":""}sans-serif`],["monospace",`${t&&e?"Lucida Console, ":""}monospace`]]))}render(){const t=()=>{l(this,$a).read().then(({value:e,done:s})=>{if(s){l(this,bo).resolve();return}l(this,Fa)??b(this,Fa,e.lang),Object.assign(l(this,Dc),e.styles),A(this,$r,rE).call(this,e.items),t()},l(this,bo).reject)};return b(this,$a,l(this,Oc).getReader()),l(Ke,Fc).add(this),t(),l(this,bo).promise}update({viewport:t,onBefore:e=null}){var r;const s=t.scale*Fr.pixelRatio,i=t.rotation;if(i!==l(this,Mc)&&(e==null||e(),b(this,Mc,i),yl(l(this,Lc),{rotation:i})),s!==l(this,_o)){e==null||e(),b(this,_o,s);const o={div:null,properties:null,ctx:A(r=Ke,Si,qf).call(r,l(this,Fa))};for(const a of l(this,Ba))o.properties=l(this,sd).get(a),o.div=a,A(this,$r,cb).call(this,o)}}cancel(){var e;const t=new Vo("TextLayer task cancelled.");(e=l(this,$a))==null||e.cancel(t).catch(()=>{}),b(this,$a,null),l(this,bo).reject(t)}get textDivs(){return l(this,Ba)}get textContentItemsStr(){return l(this,ed)}static cleanup(){if(!(l(this,Fc).size>0)){l(this,Nc).clear();for(const{canvas:t}of l(this,Ha).values())t.remove();l(this,Ha).clear()}}};bo=new WeakMap,Qs=new WeakMap,Qu=new WeakMap,Ju=new WeakMap,Fa=new WeakMap,fr=new WeakMap,Zu=new WeakMap,td=new WeakMap,$a=new WeakMap,Lc=new WeakMap,Mc=new WeakMap,_o=new WeakMap,Dc=new WeakMap,ed=new WeakMap,Oc=new WeakMap,Ba=new WeakMap,sd=new WeakMap,id=new WeakMap,Nc=new WeakMap,Ha=new WeakMap,nd=new WeakMap,vo=new WeakMap,Fc=new WeakMap,$r=new WeakSet,rE=function(t){var i,r;if(l(this,Qu))return;(r=l(this,fr)).ctx??(r.ctx=A(i=Ke,Si,qf).call(i,l(this,Fa)));const e=l(this,Ba),s=l(this,ed);for(const o of t){if(e.length>uk){kt("Ignoring additional textDivs for performance reasons."),b(this,Qu,!0);return}if(o.str===void 0){if(o.type==="beginMarkedContentProps"||o.type==="beginMarkedContent"){const a=l(this,Qs);b(this,Qs,document.createElement("span")),l(this,Qs).classList.add("markedContent"),o.id!==null&&l(this,Qs).setAttribute("id",`${o.id}`),a.append(l(this,Qs))}else o.type==="endMarkedContent"&&b(this,Qs,l(this,Qs).parentNode);continue}s.push(o.str),A(this,$r,oE).call(this,o)}},oE=function(t){var _;const e=document.createElement("span"),s={angle:0,canvasWidth:0,hasText:t.str!=="",hasEOL:t.hasEOL,fontSize:0};l(this,Ba).push(e);const i=pt.transform(l(this,id),t.transform);let r=Math.atan2(i[1],i[0]);const o=l(this,Dc)[t.fontName];o.vertical&&(r+=Math.PI/2);let a=l(this,Ju)&&o.fontSubstitution||o.fontFamily;a=Ke.fontFamilyMap.get(a)||a;const c=Math.hypot(i[2],i[3]),h=c*A(_=Ke,Si,lE).call(_,a,o,l(this,Fa));let u,f;r===0?(u=i[4],f=i[5]-h):(u=i[4]+h*Math.sin(r),f=i[5]-h*Math.cos(r));const p="calc(var(--total-scale-factor) *",g=e.style;l(this,Qs)===l(this,Lc)?(g.left=`${(100*u/l(this,td)).toFixed(2)}%`,g.top=`${(100*f/l(this,Zu)).toFixed(2)}%`):(g.left=`${p}${u.toFixed(2)}px)`,g.top=`${p}${f.toFixed(2)}px)`),g.fontSize=`${p}${(l(Ke,vo)*c).toFixed(2)}px)`,g.fontFamily=a,s.fontSize=c,e.setAttribute("role","presentation"),e.textContent=t.str,e.dir=t.dir,l(this,Ju)&&(e.dataset.fontName=o.fontSubstitutionLoadedName||t.fontName),r!==0&&(s.angle=r*(180/Math.PI));let v=!1;if(t.str.length>1)v=!0;else if(t.str!==" "&&t.transform[0]!==t.transform[3]){const x=Math.abs(t.transform[0]),S=Math.abs(t.transform[3]);x!==S&&Math.max(x,S)/Math.min(x,S)>1.5&&(v=!0)}if(v&&(s.canvasWidth=o.vertical?t.height:t.width),l(this,sd).set(e,s),l(this,fr).div=e,l(this,fr).properties=s,A(this,$r,cb).call(this,l(this,fr)),s.hasText&&l(this,Qs).append(e),s.hasEOL){const x=document.createElement("br");x.setAttribute("role","presentation"),l(this,Qs).append(x)}},cb=function(t){var a;const{div:e,properties:s,ctx:i}=t,{style:r}=e;let o="";if(l(Ke,vo)>1&&(o=`scale(${1/l(Ke,vo)})`),s.canvasWidth!==0&&s.hasText){const{fontFamily:c}=r,{canvasWidth:h,fontSize:u}=s;A(a=Ke,Si,hb).call(a,i,u*l(this,_o),c);const{width:f}=i.measureText(e.textContent);f>0&&(o=`scaleX(${h*l(this,_o)/f}) ${o}`)}s.angle!==0&&(o=`rotate(${s.angle}deg) ${o}`),o.length>0&&(r.transform=o)},Si=new WeakSet,qf=function(t=null){let e=l(this,Ha).get(t||(t=""));if(!e){const s=document.createElement("canvas");s.className="hiddenCanvasElement",s.lang=t,document.body.append(s),e=s.getContext("2d",{alpha:!1,willReadFrequently:!0}),l(this,Ha).set(t,e),l(this,nd).set(e,{size:0,family:""})}return e},hb=function(t,e,s){const i=l(this,nd).get(t);e===i.size&&s===i.family||(t.font=`${e}px ${s}`,i.size=e,i.family=s)},aE=function(){if(l(this,vo)!==null)return;const t=document.createElement("div");t.style.opacity=0,t.style.lineHeight=1,t.style.fontSize="1px",t.style.position="absolute",t.textContent="X",document.body.append(t),b(this,vo,t.getBoundingClientRect().height),t.remove()},lE=function(t,e,s){const i=l(this,Nc).get(t);if(i)return i;const r=A(this,Si,qf).call(this,s);r.canvas.width=r.canvas.height=Tw,A(this,Si,hb).call(this,r,Tw,t);const o=r.measureText(""),a=o.fontBoundingBoxAscent,c=Math.abs(o.fontBoundingBoxDescent);r.canvas.width=r.canvas.height=0;let h=.8;return a?h=a/(a+c):(ys.platform.isFirefox&&kt("Enable the `dom.textMetrics.fontBoundingBox.enabled` preference in `about:config` to improve TextLayer rendering."),e.ascent?h=e.ascent:e.descent&&(h=1+e.descent)),l(this,Nc).set(t,h),h},w(Ke,Si),w(Ke,Nc,new Map),w(Ke,Ha,new Map),w(Ke,nd,new WeakMap),w(Ke,vo,null),w(Ke,Fc,new Set);let mu=Ke;class bu{static textContent(t){const e=[],s={items:e,styles:Object.create(null)};function i(r){var c;if(!r)return;let o=null;const a=r.name;if(a==="#text")o=r.value;else if(bu.shouldBuildText(a))(c=r==null?void 0:r.attributes)!=null&&c.textContent?o=r.attributes.textContent:r.value&&(o=r.value);else return;if(o!==null&&e.push({str:o}),!!r.children)for(const h of r.children)i(h)}return i(t),s}static shouldBuildText(t){return!(t==="textarea"||t==="input"||t==="option"||t==="select")}}const dk=65536,fk=100;function cE(n={}){typeof n=="string"||n instanceof URL?n={url:n}:(n instanceof ArrayBuffer||ArrayBuffer.isView(n))&&(n={data:n});const t=new db,{docId:e}=t,s=n.url?pk(n.url):null,i=n.data?gk(n.data):null,r=n.httpHeaders||null,o=n.withCredentials===!0,a=n.password??null,c=n.range instanceof hE?n.range:null,h=Number.isInteger(n.rangeChunkSize)&&n.rangeChunkSize>0?n.rangeChunkSize:dk;let u=n.worker instanceof cc?n.worker:null;const f=n.verbosity,p=typeof n.docBaseUrl=="string"&&!mg(n.docBaseUrl)?n.docBaseUrl:null,g=Cf(n.cMapUrl),v=n.cMapPacked!==!1,_=n.CMapReaderFactory||(Us?IR:pw),x=Cf(n.iccUrl),S=Cf(n.standardFontDataUrl),C=n.StandardFontDataFactory||(Us?LR:gw),T=Cf(n.wasmUrl),R=n.WasmFactory||(Us?MR:mw),I=n.stopAtErrors!==!0,F=Number.isInteger(n.maxImageSize)&&n.maxImageSize>-1?n.maxImageSize:-1,N=n.isEvalSupported!==!1,H=typeof n.isOffscreenCanvasSupported=="boolean"?n.isOffscreenCanvasSupported:!Us,V=typeof n.isImageDecoderSupported=="boolean"?n.isImageDecoderSupported:!Us&&(ys.platform.isFirefox||!globalThis.chrome),Y=Number.isInteger(n.canvasMaxAreaInBytes)?n.canvasMaxAreaInBytes:-1,Z=typeof n.disableFontFace=="boolean"?n.disableFontFace:Us,vt=n.fontExtraProperties===!0,At=n.enableXfa===!0,St=n.ownerDocument||globalThis.document,fe=n.disableRange===!0,Q=n.disableStream===!0,X=n.disableAutoFetch===!0,Ct=n.pdfBug===!0,Le=n.CanvasFactory||(Us?kR:TR),z=n.FilterFactory||(Us?RR:PR),Ee=n.enableHWA===!0,Vt=n.useWasm!==!1,Kt=c?c.length:n.length??NaN,Pe=typeof n.useSystemFonts=="boolean"?n.useSystemFonts:!Us&&!Z,Ge=typeof n.useWorkerFetch=="boolean"?n.useWorkerFetch:!!(_===pw&&C===gw&&R===mw&&g&&S&&T&&Gl(g,document.baseURI)&&Gl(S,document.baseURI)&&Gl(T,document.baseURI)),Wt=null;oR(f);const $={canvasFactory:new Le({ownerDocument:St,enableHWA:Ee}),filterFactory:new z({docId:e,ownerDocument:St}),cMapReaderFactory:Ge?null:new _({baseUrl:g,isCompressed:v}),standardFontDataFactory:Ge?null:new C({baseUrl:S}),wasmFactory:Ge?null:new R({baseUrl:T})};if(!u){const ht={verbosity:f,port:Hn.workerPort};u=ht.port?cc.fromPort(ht):new cc(ht),t._worker=u}const j={docId:e,apiVersion:"5.2.133",data:i,password:a,disableAutoFetch:X,rangeChunkSize:h,length:Kt,docBaseUrl:p,enableXfa:At,evaluatorOptions:{maxImageSize:F,disableFontFace:Z,ignoreErrors:I,isEvalSupported:N,isOffscreenCanvasSupported:H,isImageDecoderSupported:V,canvasMaxAreaInBytes:Y,fontExtraProperties:vt,useSystemFonts:Pe,useWasm:Vt,useWorkerFetch:Ge,cMapUrl:g,iccUrl:x,standardFontDataUrl:S,wasmUrl:T}},it={ownerDocument:St,pdfBug:Ct,styleElement:Wt,loadingParams:{disableAutoFetch:X,enableXfa:At}};return u.promise.then(function(){if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const ht=u.messageHandler.sendWithPromise("GetDocRequest",j,i?[i.buffer]:null);let qt;if(c)qt=new KR(c,{disableRange:fe,disableStream:Q});else if(!i){if(!s)throw new Error("getDocument - no `url` parameter provided.");let P;if(Us)if(Gl(s)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");P=Cw}else P=lk;else P=Gl(s)?Cw:ik;qt=new P({url:s,length:Kt,httpHeaders:r,withCredentials:o,rangeChunkSize:h,disableRange:fe,disableStream:Q})}return ht.then(P=>{if(t.destroyed)throw new Error("Loading aborted");if(u.destroyed)throw new Error("Worker was destroyed");const k=new jh(e,P,u.port),O=new wk(k,t,qt,it,$);t._transport=O,k.send("Ready",null)})}).catch(t._capability.reject),t}function pk(n){if(n instanceof URL)return n.href;if(typeof n=="string"){if(Us)return n;const t=URL.parse(n,window.location);if(t)return t.href}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function gk(n){if(Us&&typeof Buffer<"u"&&n instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(n instanceof Uint8Array&&n.byteLength===n.buffer.byteLength)return n;if(typeof n=="string")return qd(n);if(n instanceof ArrayBuffer||ArrayBuffer.isView(n)||typeof n=="object"&&!isNaN(n==null?void 0:n.length))return new Uint8Array(n);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function Cf(n){if(typeof n!="string")return null;if(n.endsWith("/"))return n;throw new Error(`Invalid factory url: "${n}" must include trailing slash.`)}const ub=n=>typeof n=="object"&&Number.isInteger(n==null?void 0:n.num)&&n.num>=0&&Number.isInteger(n==null?void 0:n.gen)&&n.gen>=0,mk=n=>typeof n=="object"&&typeof(n==null?void 0:n.name)=="string",bk=gR.bind(null,ub,mk);var Hp;const jp=class jp{constructor(){J(this,"_capability",Promise.withResolvers());J(this,"_transport",null);J(this,"_worker",null);J(this,"docId",`d${Ns(jp,Hp)._++}`);J(this,"destroyed",!1);J(this,"onPassword",null);J(this,"onProgress",null)}get promise(){return this._capability.promise}async destroy(){var t,e,s,i;this.destroyed=!0;try{(t=this._worker)!=null&&t.port&&(this._worker._pendingDestroy=!0),await((e=this._transport)==null?void 0:e.destroy())}catch(r){throw(s=this._worker)!=null&&s.port&&delete this._worker._pendingDestroy,r}this._transport=null,(i=this._worker)==null||i.destroy(),this._worker=null}async getData(){return this._transport.getData()}};Hp=new WeakMap,w(jp,Hp,0);let db=jp;class hE{constructor(t,e,s=!1,i=null){this.length=t,this.initialData=e,this.progressiveDone=s,this.contentDispositionFilename=i,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(t){this._rangeListeners.push(t)}addProgressListener(t){this._progressListeners.push(t)}addProgressiveReadListener(t){this._progressiveReadListeners.push(t)}addProgressiveDoneListener(t){this._progressiveDoneListeners.push(t)}onDataRange(t,e){for(const s of this._rangeListeners)s(t,e)}onDataProgress(t,e){this._readyCapability.promise.then(()=>{for(const s of this._progressListeners)s(t,e)})}onDataProgressiveRead(t){this._readyCapability.promise.then(()=>{for(const e of this._progressiveReadListeners)e(t)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const t of this._progressiveDoneListeners)t()})}transportReady(){this._readyCapability.resolve()}requestDataRange(t,e){ue("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class _k{constructor(t,e){this._pdfInfo=t,this._transport=e}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return jt(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(t){return this._transport.getPage(t)}getPageIndex(t){return this._transport.getPageIndex(t)}getDestinations(){return this._transport.getDestinations()}getDestination(t){return this._transport.getDestination(t)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getOptionalContentConfig(e)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(t=!1){return this._transport.startCleanup(t||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(t){return this._transport.cachedPageNumber(t)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var pr,ja,qh;class vk{constructor(t,e,s,i=!1){w(this,ja);w(this,pr,!1);this._pageIndex=t,this._pageInfo=e,this._transport=s,this._stats=i?new uw:null,this._pdfBug=i,this.commonObjs=s.commonObjs,this.objs=new uE,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:t,rotation:e=this.rotate,offsetX:s=0,offsetY:i=0,dontFlip:r=!1}={}){return new Xd({viewBox:this.view,userUnit:this.userUnit,scale:t,rotation:e,offsetX:s,offsetY:i,dontFlip:r})}getAnnotations({intent:t="display"}={}){const{renderingIntent:e}=this._transport.getRenderingIntent(t);return this._transport.getAnnotations(this._pageIndex,e)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return jt(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var t;return((t=this._transport._htmlForXfa)==null?void 0:t.children[this._pageIndex])||null}render({canvasContext:t,viewport:e,intent:s="display",annotationMode:i=Zr.ENABLE,transform:r=null,background:o=null,optionalContentConfigPromise:a=null,annotationCanvasMap:c=null,pageColors:h=null,printAnnotationStorage:u=null,isEditing:f=!1}){var R,I;(R=this._stats)==null||R.time("Overall");const p=this._transport.getRenderingIntent(s,i,u,f),{renderingIntent:g,cacheKey:v}=p;b(this,pr,!1),a||(a=this._transport.getOptionalContentConfig(g));let _=this._intentStates.get(v);_||(_=Object.create(null),this._intentStates.set(v,_)),_.streamReaderCancelTimeout&&(clearTimeout(_.streamReaderCancelTimeout),_.streamReaderCancelTimeout=null);const x=!!(g&yi.PRINT);_.displayReadyCapability||(_.displayReadyCapability=Promise.withResolvers(),_.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(I=this._stats)==null||I.time("Page Request"),this._pumpOperatorList(p));const S=F=>{var N;_.renderTasks.delete(C),x&&b(this,pr,!0),A(this,ja,qh).call(this),F?(C.capability.reject(F),this._abortOperatorList({intentState:_,reason:F instanceof Error?F:new Error(F)})):C.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(N=globalThis.Stats)!=null&&N.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},C=new pb({callback:S,params:{canvasContext:t,viewport:e,transform:r,background:o},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:c,operatorList:_.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!x,pdfBug:this._pdfBug,pageColors:h});(_.renderTasks||(_.renderTasks=new Set)).add(C);const T=C.task;return Promise.all([_.displayReadyCapability.promise,a]).then(([F,N])=>{var H;if(this.destroyed){S();return}if((H=this._stats)==null||H.time("Rendering"),!(N.renderingIntent&g))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");C.initializeGraphics({transparency:F,optionalContentConfig:N}),C.operatorListChanged()}).catch(S),T}getOperatorList({intent:t="display",annotationMode:e=Zr.ENABLE,printAnnotationStorage:s=null,isEditing:i=!1}={}){var h;function r(){a.operatorList.lastChunk&&(a.opListReadCapability.resolve(a.operatorList),a.renderTasks.delete(c))}const o=this._transport.getRenderingIntent(t,e,s,i,!0);let a=this._intentStates.get(o.cacheKey);a||(a=Object.create(null),this._intentStates.set(o.cacheKey,a));let c;return a.opListReadCapability||(c=Object.create(null),c.operatorListChanged=r,a.opListReadCapability=Promise.withResolvers(),(a.renderTasks||(a.renderTasks=new Set)).add(c),a.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(h=this._stats)==null||h.time("Page Request"),this._pumpOperatorList(o)),a.opListReadCapability.promise}streamTextContent({includeMarkedContent:t=!1,disableNormalization:e=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:t===!0,disableNormalization:e===!0},{highWaterMark:100,size(i){return i.items.length}})}getTextContent(t={}){if(this._transport._htmlForXfa)return this.getXfa().then(s=>bu.textContent(s));const e=this.streamTextContent(t);return new Promise(function(s,i){function r(){o.read().then(function({value:c,done:h}){if(h){s(a);return}a.lang??(a.lang=c.lang),Object.assign(a.styles,c.styles),a.items.push(...c.items),r()},i)}const o=e.getReader(),a={items:[],styles:Object.create(null),lang:null};r()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const t=[];for(const e of this._intentStates.values())if(this._abortOperatorList({intentState:e,reason:new Error("Page was destroyed."),force:!0}),!e.opListReadCapability)for(const s of e.renderTasks)t.push(s.completed),s.cancel();return this.objs.clear(),b(this,pr,!1),Promise.all(t)}cleanup(t=!1){b(this,pr,!0);const e=A(this,ja,qh).call(this);return t&&e&&this._stats&&(this._stats=new uw),e}_startRenderPage(t,e){var i,r;const s=this._intentStates.get(e);s&&((i=this._stats)==null||i.timeEnd("Page Request"),(r=s.displayReadyCapability)==null||r.resolve(t))}_renderPageChunk(t,e){for(let s=0,i=t.length;s<i;s++)e.operatorList.fnArray.push(t.fnArray[s]),e.operatorList.argsArray.push(t.argsArray[s]);e.operatorList.lastChunk=t.lastChunk,e.operatorList.separateAnnots=t.separateAnnots;for(const s of e.renderTasks)s.operatorListChanged();t.lastChunk&&A(this,ja,qh).call(this)}_pumpOperatorList({renderingIntent:t,cacheKey:e,annotationStorageSerializable:s,modifiedIds:i}){const{map:r,transfer:o}=s,c=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:t,cacheKey:e,annotationStorage:r,modifiedIds:i},o).getReader(),h=this._intentStates.get(e);h.streamReader=c;const u=()=>{c.read().then(({value:f,done:p})=>{if(p){h.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(f,h),u())},f=>{if(h.streamReader=null,!this._transport.destroyed){if(h.operatorList){h.operatorList.lastChunk=!0;for(const p of h.renderTasks)p.operatorListChanged();A(this,ja,qh).call(this)}if(h.displayReadyCapability)h.displayReadyCapability.reject(f);else if(h.opListReadCapability)h.opListReadCapability.reject(f);else throw f}})};u()}_abortOperatorList({intentState:t,reason:e,force:s=!1}){if(t.streamReader){if(t.streamReaderCancelTimeout&&(clearTimeout(t.streamReaderCancelTimeout),t.streamReaderCancelTimeout=null),!s){if(t.renderTasks.size>0)return;if(e instanceof y_){let i=fk;e.extraDelay>0&&e.extraDelay<1e3&&(i+=e.extraDelay),t.streamReaderCancelTimeout=setTimeout(()=>{t.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:t,reason:e,force:!0})},i);return}}if(t.streamReader.cancel(new Vo(e.message)).catch(()=>{}),t.streamReader=null,!this._transport.destroyed){for(const[i,r]of this._intentStates)if(r===t){this._intentStates.delete(i);break}this.cleanup()}}}get stats(){return this._stats}}pr=new WeakMap,ja=new WeakSet,qh=function(){if(!l(this,pr)||this.destroyed)return!1;for(const{renderTasks:t,operatorList:e}of this._intentStates.values())if(t.size>0||!e.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),b(this,pr,!1),!0};var gr,Vp;class yk{constructor(){w(this,gr,new Map);w(this,Vp,Promise.resolve())}postMessage(t,e){const s={data:structuredClone(t,e?{transfer:e}:null)};l(this,Vp).then(()=>{for(const[i]of l(this,gr))i.call(this,s)})}addEventListener(t,e,s=null){let i=null;if((s==null?void 0:s.signal)instanceof AbortSignal){const{signal:r}=s;if(r.aborted){kt("LoopbackPort - cannot use an `aborted` signal.");return}const o=()=>this.removeEventListener(t,e);i=()=>r.removeEventListener("abort",o),r.addEventListener("abort",o)}l(this,gr).set(e,i)}removeEventListener(t,e){const s=l(this,gr).get(e);s==null||s(),l(this,gr).delete(e)}terminate(){for(const[,t]of l(this,gr))t==null||t();l(this,gr).clear()}}gr=new WeakMap,Vp=new WeakMap;var Up,Va,Ua,$c,Gf,Bc,Xf;const Se=class Se{constructor({name:t=null,port:e=null,verbosity:s=aR()}={}){w(this,$c);var i;if(this.name=t,this.destroyed=!1,this.verbosity=s,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,e){if((i=l(Se,Ua))!=null&&i.has(e))throw new Error("Cannot use more than one PDFWorker per port.");(l(Se,Ua)||b(Se,Ua,new WeakMap)).set(e,this),this._initializeFromPort(e);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(t){this._port=t,this._messageHandler=new jh("main","worker",t),this._messageHandler.on("ready",function(){}),A(this,$c,Gf).call(this)}_initialize(){if(l(Se,Va)||l(Se,Bc,Xf)){this._setupFakeWorker();return}let{workerSrc:t}=Se;try{Se._isSameOrigin(window.location,t)||(t=Se._createCDNWrapper(new URL(t,window.location).href));const e=new Worker(t,{type:"module"}),s=new jh("main","worker",e),i=()=>{r.abort(),s.destroy(),e.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},r=new AbortController;e.addEventListener("error",()=>{this._webWorker||i()},{signal:r.signal}),s.on("test",a=>{if(r.abort(),this.destroyed||!a){i();return}this._messageHandler=s,this._port=e,this._webWorker=e,A(this,$c,Gf).call(this)}),s.on("ready",a=>{if(r.abort(),this.destroyed){i();return}try{o()}catch{this._setupFakeWorker()}});const o=()=>{const a=new Uint8Array;s.send("test",a,[a.buffer])};o();return}catch{gg("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){l(Se,Va)||(kt("Setting up fake worker."),b(Se,Va,!0)),Se._setupFakeWorkerGlobal.then(t=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const e=new yk;this._port=e;const s=`fake${Ns(Se,Up)._++}`,i=new jh(s+"_worker",s,e);t.setup(i,e),this._messageHandler=new jh(s,s+"_worker",e),A(this,$c,Gf).call(this)}).catch(t=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${t.message}".`))})}destroy(){var t,e,s;this.destroyed=!0,(t=this._webWorker)==null||t.terminate(),this._webWorker=null,(e=l(Se,Ua))==null||e.delete(this._port),this._port=null,(s=this._messageHandler)==null||s.destroy(),this._messageHandler=null}static fromPort(t){var s;if(!(t!=null&&t.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const e=(s=l(this,Ua))==null?void 0:s.get(t.port);if(e){if(e._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return e}return new Se(t)}static get workerSrc(){if(Hn.workerSrc)return Hn.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return jt(this,"_setupFakeWorkerGlobal",(async()=>l(this,Bc,Xf)?l(this,Bc,Xf):(await import(this.workerSrc)).WorkerMessageHandler)())}};Up=new WeakMap,Va=new WeakMap,Ua=new WeakMap,$c=new WeakSet,Gf=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Bc=new WeakSet,Xf=function(){var t;try{return((t=globalThis.pdfjsWorker)==null?void 0:t.WorkerMessageHandler)||null}catch{return null}},w(Se,Bc),w(Se,Up,0),w(Se,Va,!1),w(Se,Ua),Us&&(b(Se,Va,!0),Hn.workerSrc||(Hn.workerSrc="./pdf.worker.mjs")),Se._isSameOrigin=(t,e)=>{const s=URL.parse(t);if(!(s!=null&&s.origin)||s.origin==="null")return!1;const i=new URL(e,s);return s.origin===i.origin},Se._createCDNWrapper=t=>{const e=`await import("${t}");`;return URL.createObjectURL(new Blob([e],{type:"text/javascript"}))};let cc=Se;var mr,Ln,Hc,jc,br,za,Gh;class wk{constructor(t,e,s,i,r){w(this,za);w(this,mr,new Map);w(this,Ln,new Map);w(this,Hc,new Map);w(this,jc,new Map);w(this,br,null);this.messageHandler=t,this.loadingTask=e,this.commonObjs=new uE,this.fontLoader=new xR({ownerDocument:i.ownerDocument,styleElement:i.styleElement}),this.loadingParams=i.loadingParams,this._params=i,this.canvasFactory=r.canvasFactory,this.filterFactory=r.filterFactory,this.cMapReaderFactory=r.cMapReaderFactory,this.standardFontDataFactory=r.standardFontDataFactory,this.wasmFactory=r.wasmFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=s,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return jt(this,"annotationStorage",new x_)}getRenderingIntent(t,e=Zr.ENABLE,s=null,i=!1,r=!1){let o=yi.DISPLAY,a=tb;switch(t){case"any":o=yi.ANY;break;case"display":break;case"print":o=yi.PRINT;break;default:kt(`getRenderingIntent - invalid intent: ${t}`)}const c=o&yi.PRINT&&s instanceof U0?s:this.annotationStorage;switch(e){case Zr.DISABLE:o+=yi.ANNOTATIONS_DISABLE;break;case Zr.ENABLE:break;case Zr.ENABLE_FORMS:o+=yi.ANNOTATIONS_FORMS;break;case Zr.ENABLE_STORAGE:o+=yi.ANNOTATIONS_STORAGE,a=c.serializable;break;default:kt(`getRenderingIntent - invalid annotationMode: ${e}`)}i&&(o+=yi.IS_EDITING),r&&(o+=yi.OPLIST);const{ids:h,hash:u}=c.modifiedIds,f=[o,a.hash,u];return{renderingIntent:o,cacheKey:f.join("_"),annotationStorageSerializable:a,modifiedIds:h}}destroy(){var s;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(s=l(this,br))==null||s.reject(new Error("Worker was destroyed during onPassword callback"));const t=[];for(const i of l(this,Ln).values())t.push(i._destroy());l(this,Ln).clear(),l(this,Hc).clear(),l(this,jc).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const e=this.messageHandler.sendWithPromise("Terminate",null);return t.push(e),Promise.all(t).then(()=>{var i,r;this.commonObjs.clear(),this.fontLoader.clear(),l(this,mr).clear(),this.filterFactory.destroy(),mu.cleanup(),(i=this._networkStream)==null||i.cancelAllRequests(new Vo("Worker was terminated.")),(r=this.messageHandler)==null||r.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:t,loadingTask:e}=this;t.on("GetReader",(s,i)=>{ze(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=r=>{this._lastProgress={loaded:r.loaded,total:r.total}},i.onPull=()=>{this._fullReader.read().then(function({value:r,done:o}){if(o){i.close();return}ze(r instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(r),1,[r])}).catch(r=>{i.error(r)})},i.onCancel=r=>{this._fullReader.cancel(r),i.ready.catch(o=>{if(!this.destroyed)throw o})}}),t.on("ReaderHeadersReady",async s=>{var a;await this._fullReader.headersReady;const{isStreamingSupported:i,isRangeSupported:r,contentLength:o}=this._fullReader;return(!i||!r)&&(this._lastProgress&&((a=e.onProgress)==null||a.call(e,this._lastProgress)),this._fullReader.onProgress=c=>{var h;(h=e.onProgress)==null||h.call(e,{loaded:c.loaded,total:c.total})}),{isStreamingSupported:i,isRangeSupported:r,contentLength:o}}),t.on("GetRangeReader",(s,i)=>{ze(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const r=this._networkStream.getRangeReader(s.begin,s.end);if(!r){i.close();return}i.onPull=()=>{r.read().then(function({value:o,done:a}){if(a){i.close();return}ze(o instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),i.enqueue(new Uint8Array(o),1,[o])}).catch(o=>{i.error(o)})},i.onCancel=o=>{r.cancel(o),i.ready.catch(a=>{if(!this.destroyed)throw a})}}),t.on("GetDoc",({pdfInfo:s})=>{this._numPages=s.numPages,this._htmlForXfa=s.htmlForXfa,delete s.htmlForXfa,e._capability.resolve(new _k(s,this))}),t.on("DocException",s=>{e._capability.reject(Xs(s))}),t.on("PasswordRequest",s=>{b(this,br,Promise.withResolvers());try{if(!e.onPassword)throw Xs(s);const i=r=>{r instanceof Error?l(this,br).reject(r):l(this,br).resolve({password:r})};e.onPassword(i,s.code)}catch(i){l(this,br).reject(i)}return l(this,br).promise}),t.on("DataLoaded",s=>{var i;(i=e.onProgress)==null||i.call(e,{loaded:s.length,total:s.length}),this.downloadInfoCapability.resolve(s)}),t.on("StartRenderPage",s=>{if(this.destroyed)return;l(this,Ln).get(s.pageIndex)._startRenderPage(s.transparency,s.cacheKey)}),t.on("commonobj",([s,i,r])=>{var o;if(this.destroyed||this.commonObjs.has(s))return null;switch(i){case"Font":if("error"in r){const u=r.error;kt(`Error during font loading: ${u}`),this.commonObjs.resolve(s,u);break}const a=this._params.pdfBug&&((o=globalThis.FontInspector)!=null&&o.enabled)?(u,f)=>globalThis.FontInspector.fontAdded(u,f):null,c=new CR(r,a);this.fontLoader.bind(c).catch(()=>t.sendWithPromise("FontFallback",{id:s})).finally(()=>{!c.fontExtraProperties&&c.data&&(c.data=null),this.commonObjs.resolve(s,c)});break;case"CopyLocalImage":const{imageRef:h}=r;ze(h,"The imageRef must be defined.");for(const u of l(this,Ln).values())for(const[,f]of u.objs)if((f==null?void 0:f.ref)===h)return f.dataLen?(this.commonObjs.resolve(s,structuredClone(f)),f.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(s,r);break;default:throw new Error(`Got unknown common object type ${i}`)}return null}),t.on("obj",([s,i,r,o])=>{var c;if(this.destroyed)return;const a=l(this,Ln).get(i);if(!a.objs.has(s)){if(a._intentStates.size===0){(c=o==null?void 0:o.bitmap)==null||c.close();return}switch(r){case"Image":case"Pattern":a.objs.resolve(s,o);break;default:throw new Error(`Got unknown object type ${r}`)}}}),t.on("DocProgress",s=>{var i;this.destroyed||(i=e.onProgress)==null||i.call(e,{loaded:s.loaded,total:s.total})}),t.on("FetchBinaryData",async s=>{if(this.destroyed)throw new Error("Worker was destroyed.");const i=this[s.type];if(!i)throw new Error(`${s.type} not initialized, see the \`useWorkerFetch\` parameter.`);return i.fetch(s)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var s;this.annotationStorage.size<=0&&kt("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:t,transfer:e}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:t,filename:((s=this._fullReader)==null?void 0:s.filename)??null},e).finally(()=>{this.annotationStorage.resetModified()})}getPage(t){if(!Number.isInteger(t)||t<=0||t>this._numPages)return Promise.reject(new Error("Invalid page request."));const e=t-1,s=l(this,Hc).get(e);if(s)return s;const i=this.messageHandler.sendWithPromise("GetPage",{pageIndex:e}).then(r=>{if(this.destroyed)throw new Error("Transport destroyed");r.refStr&&l(this,jc).set(r.refStr,t);const o=new vk(e,r,this,this._params.pdfBug);return l(this,Ln).set(e,o),o});return l(this,Hc).set(e,i),i}getPageIndex(t){return ub(t)?this.messageHandler.sendWithPromise("GetPageIndex",{num:t.num,gen:t.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(t,e){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:t,intent:e})}getFieldObjects(){return A(this,za,Gh).call(this,"GetFieldObjects")}hasJSActions(){return A(this,za,Gh).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(t){return typeof t!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:t})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return A(this,za,Gh).call(this,"GetDocJSActions")}getPageJSActions(t){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:t})}getStructTree(t){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:t})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(t){return A(this,za,Gh).call(this,"GetOptionalContentConfig").then(e=>new XR(e,t))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const t="GetMetadata",e=l(this,mr).get(t);if(e)return e;const s=this.messageHandler.sendWithPromise(t,null).then(i=>{var r,o;return{info:i[0],metadata:i[1]?new qR(i[1]):null,contentDispositionFilename:((r=this._fullReader)==null?void 0:r.filename)??null,contentLength:((o=this._fullReader)==null?void 0:o.contentLength)??null}});return l(this,mr).set(t,s),s}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(t=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const e of l(this,Ln).values())if(!e.cleanup())throw new Error(`startCleanup: Page ${e.pageNumber} is currently rendering.`);this.commonObjs.clear(),t||this.fontLoader.clear(),l(this,mr).clear(),this.filterFactory.destroy(!0),mu.cleanup()}}cachedPageNumber(t){if(!ub(t))return null;const e=t.gen===0?`${t.num}R`:`${t.num}R${t.gen}`;return l(this,jc).get(e)??null}}mr=new WeakMap,Ln=new WeakMap,Hc=new WeakMap,jc=new WeakMap,br=new WeakMap,za=new WeakSet,Gh=function(t,e=null){const s=l(this,mr).get(t);if(s)return s;const i=this.messageHandler.sendWithPromise(t,e);return l(this,mr).set(t,i),i};const Mh=Symbol("INITIAL_DATA");var hi,rd,fb;class uE{constructor(){w(this,rd);w(this,hi,Object.create(null))}get(t,e=null){if(e){const i=A(this,rd,fb).call(this,t);return i.promise.then(()=>e(i.data)),null}const s=l(this,hi)[t];if(!s||s.data===Mh)throw new Error(`Requesting object that isn't resolved yet ${t}.`);return s.data}has(t){const e=l(this,hi)[t];return!!e&&e.data!==Mh}delete(t){const e=l(this,hi)[t];return!e||e.data===Mh?!1:(delete l(this,hi)[t],!0)}resolve(t,e=null){const s=A(this,rd,fb).call(this,t);s.data=e,s.resolve()}clear(){var t;for(const e in l(this,hi)){const{data:s}=l(this,hi)[e];(t=s==null?void 0:s.bitmap)==null||t.close()}b(this,hi,Object.create(null))}*[Symbol.iterator](){for(const t in l(this,hi)){const{data:e}=l(this,hi)[t];e!==Mh&&(yield[t,e])}}}hi=new WeakMap,rd=new WeakSet,fb=function(t){var e;return(e=l(this,hi))[t]||(e[t]={...Promise.withResolvers(),data:Mh})};var yo;class Ak{constructor(t){w(this,yo,null);J(this,"onContinue",null);J(this,"onError",null);b(this,yo,t)}get promise(){return l(this,yo).capability.promise}cancel(t=0){l(this,yo).cancel(null,t)}get separateAnnots(){const{separateAnnots:t}=l(this,yo).operatorList;if(!t)return!1;const{annotationCanvasMap:e}=l(this,yo);return t.form||t.canvas&&(e==null?void 0:e.size)>0}}yo=new WeakMap;var wo,Wa;const fa=class fa{constructor({callback:t,params:e,objs:s,commonObjs:i,annotationCanvasMap:r,operatorList:o,pageIndex:a,canvasFactory:c,filterFactory:h,useRequestAnimationFrame:u=!1,pdfBug:f=!1,pageColors:p=null}){w(this,wo,null);this.callback=t,this.params=e,this.objs=s,this.commonObjs=i,this.annotationCanvasMap=r,this.operatorListIdx=null,this.operatorList=o,this._pageIndex=a,this.canvasFactory=c,this.filterFactory=h,this._pdfBug=f,this.pageColors=p,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=u===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new Ak(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=e.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:t=!1,optionalContentConfig:e}){var a,c;if(this.cancelled)return;if(this._canvas){if(l(fa,Wa).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");l(fa,Wa).add(this._canvas)}this._pdfBug&&((a=globalThis.StepperManager)!=null&&a.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:s,viewport:i,transform:r,background:o}=this.params;this.gfx=new lc(s,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:e},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:r,viewport:i,transparency:t,background:o}),this.operatorListIdx=0,this.graphicsReady=!0,(c=this.graphicsReadyCallback)==null||c.call(this)}cancel(t=null,e=0){var s,i,r;this.running=!1,this.cancelled=!0,(s=this.gfx)==null||s.endDrawing(),l(this,wo)&&(window.cancelAnimationFrame(l(this,wo)),b(this,wo,null)),l(fa,Wa).delete(this._canvas),t||(t=new y_(`Rendering cancelled, page ${this._pageIndex+1}`,e)),this.callback(t),(r=(i=this.task).onError)==null||r.call(i,t)}operatorListChanged(){var t;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(t=this.stepper)==null||t.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?b(this,wo,window.requestAnimationFrame(()=>{b(this,wo,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),l(fa,Wa).delete(this._canvas),this.callback())))}};wo=new WeakMap,Wa=new WeakMap,w(fa,Wa,new WeakSet);let pb=fa;const Ek="5.2.133",Sk="4f7761353";function Pw(n){return Math.floor(Math.max(0,Math.min(1,n))*255).toString(16).padStart(2,"0")}function Dh(n){return Math.max(0,Math.min(255,255*n))}class Rw{static CMYK_G([t,e,s,i]){return["G",1-Math.min(1,.3*t+.59*s+.11*e+i)]}static G_CMYK([t]){return["CMYK",0,0,0,1-t]}static G_RGB([t]){return["RGB",t,t,t]}static G_rgb([t]){return t=Dh(t),[t,t,t]}static G_HTML([t]){const e=Pw(t);return`#${e}${e}${e}`}static RGB_G([t,e,s]){return["G",.3*t+.59*e+.11*s]}static RGB_rgb(t){return t.map(Dh)}static RGB_HTML(t){return`#${t.map(Pw).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([t,e,s,i]){return["RGB",1-Math.min(1,t+i),1-Math.min(1,s+i),1-Math.min(1,e+i)]}static CMYK_rgb([t,e,s,i]){return[Dh(1-Math.min(1,t+i)),Dh(1-Math.min(1,s+i)),Dh(1-Math.min(1,e+i))]}static CMYK_HTML(t){const e=this.CMYK_RGB(t).slice(1);return this.RGB_HTML(e)}static RGB_CMYK([t,e,s]){const i=1-t,r=1-e,o=1-s,a=Math.min(i,r,o);return["CMYK",i,r,o,a]}}class xk{create(t,e,s=!1){if(t<=0||e<=0)throw new Error("Invalid SVG dimensions");const i=this._createSVG("svg:svg");return i.setAttribute("version","1.1"),s||(i.setAttribute("width",`${t}px`),i.setAttribute("height",`${e}px`)),i.setAttribute("preserveAspectRatio","none"),i.setAttribute("viewBox",`0 0 ${t} ${e}`),i}createElement(t){if(typeof t!="string")throw new Error("Invalid SVG element type");return this._createSVG(t)}_createSVG(t){ue("Abstract method `_createSVG` called.")}}class Tp extends xk{_createSVG(t){return document.createElementNS(Yn,t)}}class dE{static setupStorage(t,e,s,i,r){const o=i.getValue(e,{value:null});switch(s.name){case"textarea":if(o.value!==null&&(t.textContent=o.value),r==="print")break;t.addEventListener("input",a=>{i.setValue(e,{value:a.target.value})});break;case"input":if(s.attributes.type==="radio"||s.attributes.type==="checkbox"){if(o.value===s.attributes.xfaOn?t.setAttribute("checked",!0):o.value===s.attributes.xfaOff&&t.removeAttribute("checked"),r==="print")break;t.addEventListener("change",a=>{i.setValue(e,{value:a.target.checked?a.target.getAttribute("xfaOn"):a.target.getAttribute("xfaOff")})})}else{if(o.value!==null&&t.setAttribute("value",o.value),r==="print")break;t.addEventListener("input",a=>{i.setValue(e,{value:a.target.value})})}break;case"select":if(o.value!==null){t.setAttribute("value",o.value);for(const a of s.children)a.attributes.value===o.value?a.attributes.selected=!0:a.attributes.hasOwnProperty("selected")&&delete a.attributes.selected}t.addEventListener("input",a=>{const c=a.target.options,h=c.selectedIndex===-1?"":c[c.selectedIndex].value;i.setValue(e,{value:h})});break}}static setAttributes({html:t,element:e,storage:s=null,intent:i,linkService:r}){const{attributes:o}=e,a=t instanceof HTMLAnchorElement;o.type==="radio"&&(o.name=`${o.name}-${i}`);for(const[c,h]of Object.entries(o))if(h!=null)switch(c){case"class":h.length&&t.setAttribute(c,h.join(" "));break;case"dataId":break;case"id":t.setAttribute("data-element-id",h);break;case"style":Object.assign(t.style,h);break;case"textContent":t.textContent=h;break;default:(!a||c!=="href"&&c!=="newWindow")&&t.setAttribute(c,h)}a&&r.addLinkAttributes(t,o.href,o.newWindow),s&&o.dataId&&this.setupStorage(t,o.dataId,e,s)}static render(t){var f,p;const e=t.annotationStorage,s=t.linkService,i=t.xfaHtml,r=t.intent||"display",o=document.createElement(i.name);i.attributes&&this.setAttributes({html:o,element:i,intent:r,linkService:s});const a=r!=="richText",c=t.div;if(c.append(o),t.viewport){const g=`matrix(${t.viewport.transform.join(",")})`;c.style.transform=g}a&&c.setAttribute("class","xfaLayer xfaFont");const h=[];if(i.children.length===0){if(i.value){const g=document.createTextNode(i.value);o.append(g),a&&bu.shouldBuildText(i.name)&&h.push(g)}return{textDivs:h}}const u=[[i,-1,o]];for(;u.length>0;){const[g,v,_]=u.at(-1);if(v+1===g.children.length){u.pop();continue}const x=g.children[++u.at(-1)[1]];if(x===null)continue;const{name:S}=x;if(S==="#text"){const T=document.createTextNode(x.value);h.push(T),_.append(T);continue}const C=(f=x==null?void 0:x.attributes)!=null&&f.xmlns?document.createElementNS(x.attributes.xmlns,S):document.createElement(S);if(_.append(C),x.attributes&&this.setAttributes({html:C,element:x,storage:e,intent:r,linkService:s}),((p=x.children)==null?void 0:p.length)>0)u.push([x,-1,C]);else if(x.value){const T=document.createTextNode(x.value);a&&bu.shouldBuildText(S)&&h.push(T),C.append(T)}}for(const g of c.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))g.setAttribute("readOnly",!0);return{textDivs:h}}static update(t){const e=`matrix(${t.viewport.transform.join(",")})`;t.div.style.transform=e,t.div.hidden=!1}}const Qd=1e3,Ck=9,Al=new WeakSet;class kw{static create(t){switch(t.data.annotationType){case Ve.LINK:return new fE(t);case Ve.TEXT:return new Tk(t);case Ve.WIDGET:switch(t.data.fieldType){case"Tx":return new Pk(t);case"Btn":return t.data.radioButton?new mE(t):t.data.checkBox?new kk(t):new Ik(t);case"Ch":return new Lk(t);case"Sig":return new Rk(t)}return new xl(t);case Ve.POPUP:return new mb(t);case Ve.FREETEXT:return new wE(t);case Ve.LINE:return new Dk(t);case Ve.SQUARE:return new Ok(t);case Ve.CIRCLE:return new Nk(t);case Ve.POLYLINE:return new AE(t);case Ve.CARET:return new $k(t);case Ve.INK:return new P_(t);case Ve.POLYGON:return new Fk(t);case Ve.HIGHLIGHT:return new EE(t);case Ve.UNDERLINE:return new Bk(t);case Ve.SQUIGGLY:return new Hk(t);case Ve.STRIKEOUT:return new jk(t);case Ve.STAMP:return new SE(t);case Ve.FILEATTACHMENT:return new Vk(t);default:return new He(t)}}}var qa,Vc,Uc,od,gb;const O_=class O_{constructor(t,{isRenderable:e=!1,ignoreBorder:s=!1,createQuadrilaterals:i=!1}={}){w(this,od);w(this,qa,null);w(this,Vc,!1);w(this,Uc,null);this.isRenderable=e,this.data=t.data,this.layer=t.layer,this.linkService=t.linkService,this.downloadManager=t.downloadManager,this.imageResourcesPath=t.imageResourcesPath,this.renderForms=t.renderForms,this.svgFactory=t.svgFactory,this.annotationStorage=t.annotationStorage,this.enableScripting=t.enableScripting,this.hasJSActions=t.hasJSActions,this._fieldObjects=t.fieldObjects,this.parent=t.parent,e&&(this.container=this._createContainer(s)),i&&this._createQuadrilaterals()}static _hasPopupData({titleObj:t,contentsObj:e,richText:s}){return!!(t!=null&&t.str||e!=null&&e.str||s!=null&&s.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return O_._hasPopupData(this.data)}updateEdited(t){var s;if(!this.container)return;l(this,qa)||b(this,qa,{rect:this.data.rect.slice(0)});const{rect:e}=t;e&&A(this,od,gb).call(this,e),(s=l(this,Uc))==null||s.popup.updateEdited(t)}resetEdited(){var t;l(this,qa)&&(A(this,od,gb).call(this,l(this,qa).rect),(t=l(this,Uc))==null||t.popup.resetEdited(),b(this,qa,null))}_createContainer(t){const{data:e,parent:{page:s,viewport:i}}=this,r=document.createElement("section");r.setAttribute("data-annotation-id",e.id),this instanceof xl||(r.tabIndex=Qd);const{style:o}=r;if(o.zIndex=this.parent.zIndex++,e.alternativeText&&(r.title=e.alternativeText),e.noRotate&&r.classList.add("norotate"),!e.rect||this instanceof mb){const{rotation:_}=e;return!e.hasOwnCanvas&&_!==0&&this.setRotation(_,r),r}const{width:a,height:c}=this;if(!t&&e.borderStyle.width>0){o.borderWidth=`${e.borderStyle.width}px`;const _=e.borderStyle.horizontalCornerRadius,x=e.borderStyle.verticalCornerRadius;if(_>0||x>0){const C=`calc(${_}px * var(--total-scale-factor)) / calc(${x}px * var(--total-scale-factor))`;o.borderRadius=C}else if(this instanceof mE){const C=`calc(${a}px * var(--total-scale-factor)) / calc(${c}px * var(--total-scale-factor))`;o.borderRadius=C}switch(e.borderStyle.style){case ql.SOLID:o.borderStyle="solid";break;case ql.DASHED:o.borderStyle="dashed";break;case ql.BEVELED:kt("Unimplemented border style: beveled");break;case ql.INSET:kt("Unimplemented border style: inset");break;case ql.UNDERLINE:o.borderBottomStyle="solid";break}const S=e.borderColor||null;S?(b(this,Vc,!0),o.borderColor=pt.makeHexColor(S[0]|0,S[1]|0,S[2]|0)):o.borderWidth=0}const h=pt.normalizeRect([e.rect[0],s.view[3]-e.rect[1]+s.view[1],e.rect[2],s.view[3]-e.rect[3]+s.view[1]]),{pageWidth:u,pageHeight:f,pageX:p,pageY:g}=i.rawDims;o.left=`${100*(h[0]-p)/u}%`,o.top=`${100*(h[1]-g)/f}%`;const{rotation:v}=e;return e.hasOwnCanvas||v===0?(o.width=`${100*a/u}%`,o.height=`${100*c/f}%`):this.setRotation(v,r),r}setRotation(t,e=this.container){if(!this.data.rect)return;const{pageWidth:s,pageHeight:i}=this.parent.viewport.rawDims;let{width:r,height:o}=this;t%180!==0&&([r,o]=[o,r]),e.style.width=`${100*r/s}%`,e.style.height=`${100*o/i}%`,e.setAttribute("data-main-rotation",(360-t)%360)}get _commonActions(){const t=(e,s,i)=>{const r=i.detail[e],o=r[0],a=r.slice(1);i.target.style[s]=Rw[`${o}_HTML`](a),this.annotationStorage.setValue(this.data.id,{[s]:Rw[`${o}_rgb`](a)})};return jt(this,"_commonActions",{display:e=>{const{display:s}=e.detail,i=s%2===1;this.container.style.visibility=i?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:i,noPrint:s===1||s===2})},print:e=>{this.annotationStorage.setValue(this.data.id,{noPrint:!e.detail.print})},hidden:e=>{const{hidden:s}=e.detail;this.container.style.visibility=s?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:s,noView:s})},focus:e=>{setTimeout(()=>e.target.focus({preventScroll:!1}),0)},userName:e=>{e.target.title=e.detail.userName},readonly:e=>{e.target.disabled=e.detail.readonly},required:e=>{this._setRequired(e.target,e.detail.required)},bgColor:e=>{t("bgColor","backgroundColor",e)},fillColor:e=>{t("fillColor","backgroundColor",e)},fgColor:e=>{t("fgColor","color",e)},textColor:e=>{t("textColor","color",e)},borderColor:e=>{t("borderColor","borderColor",e)},strokeColor:e=>{t("strokeColor","borderColor",e)},rotation:e=>{const s=e.detail.rotation;this.setRotation(s),this.annotationStorage.setValue(this.data.id,{rotation:s})}})}_dispatchEventFromSandbox(t,e){const s=this._commonActions;for(const i of Object.keys(e.detail)){const r=t[i]||s[i];r==null||r(e)}}_setDefaultPropertiesFromJS(t){if(!this.enableScripting)return;const e=this.annotationStorage.getRawValue(this.data.id);if(!e)return;const s=this._commonActions;for(const[i,r]of Object.entries(e)){const o=s[i];if(o){const a={detail:{[i]:r},target:t};o(a),delete e[i]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:t}=this.data;if(!t)return;const[e,s,i,r]=this.data.rect.map(_=>Math.fround(_));if(t.length===8){const[_,x,S,C]=t.subarray(2,6);if(i===_&&r===x&&e===S&&s===C)return}const{style:o}=this.container;let a;if(l(this,Vc)){const{borderColor:_,borderWidth:x}=o;o.borderWidth=0,a=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${_}" stroke-width="${x}">`],this.container.classList.add("hasBorder")}const c=i-e,h=r-s,{svgFactory:u}=this,f=u.createElement("svg");f.classList.add("quadrilateralsContainer"),f.setAttribute("width",0),f.setAttribute("height",0);const p=u.createElement("defs");f.append(p);const g=u.createElement("clipPath"),v=`clippath_${this.data.id}`;g.setAttribute("id",v),g.setAttribute("clipPathUnits","objectBoundingBox"),p.append(g);for(let _=2,x=t.length;_<x;_+=8){const S=t[_],C=t[_+1],T=t[_+2],R=t[_+3],I=u.createElement("rect"),F=(T-e)/c,N=(r-C)/h,H=(S-T)/c,V=(C-R)/h;I.setAttribute("x",F),I.setAttribute("y",N),I.setAttribute("width",H),I.setAttribute("height",V),g.append(I),a==null||a.push(`<rect vector-effect="non-scaling-stroke" x="${F}" y="${N}" width="${H}" height="${V}"/>`)}l(this,Vc)&&(a.push("</g></svg>')"),o.backgroundImage=a.join("")),this.container.append(f),this.container.style.clipPath=`url(#${v})`}_createPopup(){const{data:t}=this,e=b(this,Uc,new mb({data:{color:t.color,titleObj:t.titleObj,modificationDate:t.modificationDate,contentsObj:t.contentsObj,richText:t.richText,parentRect:t.rect,borderStyle:0,id:`popup_${t.id}`,rotation:t.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(e.render())}render(){ue("Abstract method `AnnotationElement.render` called")}_getElementsByName(t,e=null){const s=[];if(this._fieldObjects){const i=this._fieldObjects[t];if(i)for(const{page:r,id:o,exportValues:a}of i){if(r===-1||o===e)continue;const c=typeof a=="string"?a:null,h=document.querySelector(`[data-element-id="${o}"]`);if(h&&!Al.has(h)){kt(`_getElementsByName - element not allowed: ${o}`);continue}s.push({id:o,exportValue:c,domElement:h})}return s}for(const i of document.getElementsByName(t)){const{exportValue:r}=i,o=i.getAttribute("data-element-id");o!==e&&Al.has(i)&&s.push({id:o,exportValue:r,domElement:i})}return s}show(){var t;this.container&&(this.container.hidden=!1),(t=this.popup)==null||t.maybeShow()}hide(){var t;this.container&&(this.container.hidden=!0),(t=this.popup)==null||t.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const t=this.getElementsToTriggerPopup();if(Array.isArray(t))for(const e of t)e.classList.add("highlightArea");else t.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:t,data:{id:e}}=this;this.container.addEventListener("dblclick",()=>{var s;(s=this.linkService.eventBus)==null||s.dispatch("switchannotationeditormode",{source:this,mode:t,editId:e})})}get width(){return this.data.rect[2]-this.data.rect[0]}get height(){return this.data.rect[3]-this.data.rect[1]}};qa=new WeakMap,Vc=new WeakMap,Uc=new WeakMap,od=new WeakSet,gb=function(t){const{container:{style:e},data:{rect:s,rotation:i},parent:{viewport:{rawDims:{pageWidth:r,pageHeight:o,pageX:a,pageY:c}}}}=this;s==null||s.splice(0,4,...t),e.left=`${100*(t[0]-a)/r}%`,e.top=`${100*(o-t[3]+c)/o}%`,i===0?(e.width=`${100*(t[2]-t[0])/r}%`,e.height=`${100*(t[3]-t[1])/o}%`):this.setRotation(i)};let He=O_;var Ai,la,pE,gE;class fE extends He{constructor(e,s=null){super(e,{isRenderable:!0,ignoreBorder:!!(s!=null&&s.ignoreBorder),createQuadrilaterals:!0});w(this,Ai);this.isTooltipOnly=e.data.isTooltipOnly}render(){const{data:e,linkService:s}=this,i=document.createElement("a");i.setAttribute("data-element-id",e.id);let r=!1;return e.url?(s.addLinkAttributes(i,e.url,e.newWindow),r=!0):e.action?(this._bindNamedAction(i,e.action),r=!0):e.attachment?(A(this,Ai,pE).call(this,i,e.attachment,e.attachmentDest),r=!0):e.setOCGState?(A(this,Ai,gE).call(this,i,e.setOCGState),r=!0):e.dest?(this._bindLink(i,e.dest),r=!0):(e.actions&&(e.actions.Action||e.actions["Mouse Up"]||e.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(i,e),r=!0),e.resetForm?(this._bindResetFormAction(i,e.resetForm),r=!0):this.isTooltipOnly&&!r&&(this._bindLink(i,""),r=!0)),this.container.classList.add("linkAnnotation"),r&&this.container.append(i),this.container}_bindLink(e,s){e.href=this.linkService.getDestinationHash(s),e.onclick=()=>(s&&this.linkService.goToDestination(s),!1),(s||s==="")&&A(this,Ai,la).call(this)}_bindNamedAction(e,s){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeNamedAction(s),!1),A(this,Ai,la).call(this)}_bindJSAction(e,s){e.href=this.linkService.getAnchorUrl("");const i=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const r of Object.keys(s.actions)){const o=i.get(r);o&&(e[o]=()=>{var a;return(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:s.id,name:r}}),!1})}e.onclick||(e.onclick=()=>!1),A(this,Ai,la).call(this)}_bindResetFormAction(e,s){const i=e.onclick;if(i||(e.href=this.linkService.getAnchorUrl("")),A(this,Ai,la).call(this),!this._fieldObjects){kt('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),i||(e.onclick=()=>!1);return}e.onclick=()=>{var f;i==null||i();const{fields:r,refs:o,include:a}=s,c=[];if(r.length!==0||o.length!==0){const p=new Set(o);for(const g of r){const v=this._fieldObjects[g]||[];for(const{id:_}of v)p.add(_)}for(const g of Object.values(this._fieldObjects))for(const v of g)p.has(v.id)===a&&c.push(v)}else for(const p of Object.values(this._fieldObjects))c.push(...p);const h=this.annotationStorage,u=[];for(const p of c){const{id:g}=p;switch(u.push(g),p.type){case"text":{const _=p.defaultValue||"";h.setValue(g,{value:_});break}case"checkbox":case"radiobutton":{const _=p.defaultValue===p.exportValues;h.setValue(g,{value:_});break}case"combobox":case"listbox":{const _=p.defaultValue||"";h.setValue(g,{value:_});break}default:continue}const v=document.querySelector(`[data-element-id="${g}"]`);if(v){if(!Al.has(v)){kt(`_bindResetFormAction - element not allowed: ${g}`);continue}}else continue;v.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((f=this.linkService.eventBus)==null||f.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:u,name:"ResetForm"}})),!1}}}Ai=new WeakSet,la=function(){this.container.setAttribute("data-internal-link","")},pE=function(e,s,i=null){e.href=this.linkService.getAnchorUrl(""),s.description&&(e.title=s.description),e.onclick=()=>{var r;return(r=this.downloadManager)==null||r.openOrDownloadData(s.content,s.filename,i),!1},A(this,Ai,la).call(this)},gE=function(e,s){e.href=this.linkService.getAnchorUrl(""),e.onclick=()=>(this.linkService.executeSetOCGState(s),!1),A(this,Ai,la).call(this)};class Tk extends He{constructor(t){super(t,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const t=document.createElement("img");return t.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",t.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),t.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(t),this.container}}class xl extends He{render(){return this.container}showElementAndHideCanvas(t){var e;this.data.hasOwnCanvas&&(((e=t.previousSibling)==null?void 0:e.nodeName)==="CANVAS"&&(t.previousSibling.hidden=!0),t.hidden=!1)}_getKeyModifier(t){return ys.platform.isMac?t.metaKey:t.ctrlKey}_setEventListener(t,e,s,i,r){s.includes("mouse")?t.addEventListener(s,o=>{var a;(a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(o),shift:o.shiftKey,modifier:this._getKeyModifier(o)}})}):t.addEventListener(s,o=>{var a;if(s==="blur"){if(!e.focused||!o.relatedTarget)return;e.focused=!1}else if(s==="focus"){if(e.focused)return;e.focused=!0}r&&((a=this.linkService.eventBus)==null||a.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:i,value:r(o)}}))})}_setEventListeners(t,e,s,i){var r,o,a;for(const[c,h]of s)(h==="Action"||(r=this.data.actions)!=null&&r[h])&&((h==="Focus"||h==="Blur")&&(e||(e={focused:!1})),this._setEventListener(t,e,c,h,i),h==="Focus"&&!((o=this.data.actions)!=null&&o.Blur)?this._setEventListener(t,e,"blur","Blur",null):h==="Blur"&&!((a=this.data.actions)!=null&&a.Focus)&&this._setEventListener(t,e,"focus","Focus",null))}_setBackgroundColor(t){const e=this.data.backgroundColor||null;t.style.backgroundColor=e===null?"transparent":pt.makeHexColor(e[0],e[1],e[2])}_setTextStyle(t){const e=["left","center","right"],{fontColor:s}=this.data.defaultAppearanceData,i=this.data.defaultAppearanceData.fontSize||Ck,r=t.style;let o;const a=2,c=h=>Math.round(10*h)/10;if(this.data.multiLine){const h=Math.abs(this.data.rect[3]-this.data.rect[1]-a),u=Math.round(h/(um*i))||1,f=h/u;o=Math.min(i,c(f/um))}else{const h=Math.abs(this.data.rect[3]-this.data.rect[1]-a);o=Math.min(i,c(h/um))}r.fontSize=`calc(${o}px * var(--total-scale-factor))`,r.color=pt.makeHexColor(s[0],s[1],s[2]),this.data.textAlignment!==null&&(r.textAlign=e[this.data.textAlignment])}_setRequired(t,e){e?t.setAttribute("required",!0):t.removeAttribute("required"),t.setAttribute("aria-required",e)}}class Pk extends xl{constructor(t){const e=t.renderForms||t.data.hasOwnCanvas||!t.data.hasAppearance&&!!t.data.fieldValue;super(t,{isRenderable:e})}setPropertyOnSiblings(t,e,s,i){const r=this.annotationStorage;for(const o of this._getElementsByName(t.name,t.id))o.domElement&&(o.domElement[e]=s),r.setValue(o.id,{[i]:s})}render(){var i,r;const t=this.annotationStorage,e=this.data.id;this.container.classList.add("textWidgetAnnotation");let s=null;if(this.renderForms){const o=t.getValue(e,{value:this.data.fieldValue});let a=o.value||"";const c=t.getValue(e,{charLimit:this.data.maxLen}).charLimit;c&&a.length>c&&(a=a.slice(0,c));let h=o.formattedValue||((i=this.data.textContent)==null?void 0:i.join(`
`))||null;h&&this.data.comb&&(h=h.replaceAll(/\s+/g,""));const u={userValue:a,formattedValue:h,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(s=document.createElement("textarea"),s.textContent=h??a,this.data.doNotScroll&&(s.style.overflowY="hidden")):(s=document.createElement("input"),s.type=this.data.password?"password":"text",s.setAttribute("value",h??a),this.data.doNotScroll&&(s.style.overflowX="hidden")),this.data.hasOwnCanvas&&(s.hidden=!0),Al.add(s),s.setAttribute("data-element-id",e),s.disabled=this.data.readOnly,s.name=this.data.fieldName,s.tabIndex=Qd,this._setRequired(s,this.data.required),c&&(s.maxLength=c),s.addEventListener("input",p=>{t.setValue(e,{value:p.target.value}),this.setPropertyOnSiblings(s,"value",p.target.value,"value"),u.formattedValue=null}),s.addEventListener("resetform",p=>{const g=this.data.defaultFieldValue??"";s.value=u.userValue=g,u.formattedValue=null});let f=p=>{const{formattedValue:g}=u;g!=null&&(p.target.value=g),p.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){s.addEventListener("focus",g=>{var _;if(u.focused)return;const{target:v}=g;u.userValue&&(v.value=u.userValue),u.lastCommittedValue=v.value,u.commitKey=1,(_=this.data.actions)!=null&&_.Focus||(u.focused=!0)}),s.addEventListener("updatefromsandbox",g=>{this.showElementAndHideCanvas(g.target);const v={value(_){u.userValue=_.detail.value??"",t.setValue(e,{value:u.userValue.toString()}),_.target.value=u.userValue},formattedValue(_){const{formattedValue:x}=_.detail;u.formattedValue=x,x!=null&&_.target!==document.activeElement&&(_.target.value=x),t.setValue(e,{formattedValue:x})},selRange(_){_.target.setSelectionRange(..._.detail.selRange)},charLimit:_=>{var T;const{charLimit:x}=_.detail,{target:S}=_;if(x===0){S.removeAttribute("maxLength");return}S.setAttribute("maxLength",x);let C=u.userValue;!C||C.length<=x||(C=C.slice(0,x),S.value=u.userValue=C,t.setValue(e,{value:C}),(T=this.linkService.eventBus)==null||T.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:C,willCommit:!0,commitKey:1,selStart:S.selectionStart,selEnd:S.selectionEnd}}))}};this._dispatchEventFromSandbox(v,g)}),s.addEventListener("keydown",g=>{var x;u.commitKey=1;let v=-1;if(g.key==="Escape"?v=0:g.key==="Enter"&&!this.data.multiLine?v=2:g.key==="Tab"&&(u.commitKey=3),v===-1)return;const{value:_}=g.target;u.lastCommittedValue!==_&&(u.lastCommittedValue=_,u.userValue=_,(x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:_,willCommit:!0,commitKey:v,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}}))});const p=f;f=null,s.addEventListener("blur",g=>{var _,x;if(!u.focused||!g.relatedTarget)return;(_=this.data.actions)!=null&&_.Blur||(u.focused=!1);const{value:v}=g.target;u.userValue=v,u.lastCommittedValue!==v&&((x=this.linkService.eventBus)==null||x.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:v,willCommit:!0,commitKey:u.commitKey,selStart:g.target.selectionStart,selEnd:g.target.selectionEnd}})),p(g)}),(r=this.data.actions)!=null&&r.Keystroke&&s.addEventListener("beforeinput",g=>{var I;u.lastCommittedValue=null;const{data:v,target:_}=g,{value:x,selectionStart:S,selectionEnd:C}=_;let T=S,R=C;switch(g.inputType){case"deleteWordBackward":{const F=x.substring(0,S).match(/\w*[^\w]*$/);F&&(T-=F[0].length);break}case"deleteWordForward":{const F=x.substring(S).match(/^[^\w]*\w*/);F&&(R+=F[0].length);break}case"deleteContentBackward":S===C&&(T-=1);break;case"deleteContentForward":S===C&&(R+=1);break}g.preventDefault(),(I=this.linkService.eventBus)==null||I.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:x,change:v||"",willCommit:!1,selStart:T,selEnd:R}})}),this._setEventListeners(s,u,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],g=>g.target.value)}if(f&&s.addEventListener("blur",f),this.data.comb){const g=(this.data.rect[2]-this.data.rect[0])/c;s.classList.add("comb"),s.style.letterSpacing=`calc(${g}px * var(--total-scale-factor) - 1ch)`}}else s=document.createElement("div"),s.textContent=this.data.fieldValue,s.style.verticalAlign="middle",s.style.display="table-cell",this.data.hasOwnCanvas&&(s.hidden=!0);return this._setTextStyle(s),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class Rk extends xl{constructor(t){super(t,{isRenderable:!!t.data.hasOwnCanvas})}}class kk extends xl{constructor(t){super(t,{isRenderable:t.renderForms})}render(){const t=this.annotationStorage,e=this.data,s=e.id;let i=t.getValue(s,{value:e.exportValue===e.fieldValue}).value;typeof i=="string"&&(i=i!=="Off",t.setValue(s,{value:i})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const r=document.createElement("input");return Al.add(r),r.setAttribute("data-element-id",s),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="checkbox",r.name=e.fieldName,i&&r.setAttribute("checked",!0),r.setAttribute("exportValue",e.exportValue),r.tabIndex=Qd,r.addEventListener("change",o=>{const{name:a,checked:c}=o.target;for(const h of this._getElementsByName(a,s)){const u=c&&h.exportValue===e.exportValue;h.domElement&&(h.domElement.checked=u),t.setValue(h.id,{value:u})}t.setValue(s,{value:c})}),r.addEventListener("resetform",o=>{const a=e.defaultFieldValue||"Off";o.target.checked=a===e.exportValue}),this.enableScripting&&this.hasJSActions&&(r.addEventListener("updatefromsandbox",o=>{const a={value(c){c.target.checked=c.detail.value!=="Off",t.setValue(s,{value:c.target.checked})}};this._dispatchEventFromSandbox(a,o)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class mE extends xl{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const t=this.annotationStorage,e=this.data,s=e.id;let i=t.getValue(s,{value:e.fieldValue===e.buttonValue}).value;if(typeof i=="string"&&(i=i!==e.buttonValue,t.setValue(s,{value:i})),i)for(const o of this._getElementsByName(e.fieldName,s))t.setValue(o.id,{value:!1});const r=document.createElement("input");if(Al.add(r),r.setAttribute("data-element-id",s),r.disabled=e.readOnly,this._setRequired(r,this.data.required),r.type="radio",r.name=e.fieldName,i&&r.setAttribute("checked",!0),r.tabIndex=Qd,r.addEventListener("change",o=>{const{name:a,checked:c}=o.target;for(const h of this._getElementsByName(a,s))t.setValue(h.id,{value:!1});t.setValue(s,{value:c})}),r.addEventListener("resetform",o=>{const a=e.defaultFieldValue;o.target.checked=a!=null&&a===e.buttonValue}),this.enableScripting&&this.hasJSActions){const o=e.buttonValue;r.addEventListener("updatefromsandbox",a=>{const c={value:h=>{const u=o===h.detail.value;for(const f of this._getElementsByName(h.target.name)){const p=u&&f.id===s;f.domElement&&(f.domElement.checked=p),t.setValue(f.id,{value:p})}}};this._dispatchEventFromSandbox(c,a)}),this._setEventListeners(r,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)}return this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class Ik extends fE{constructor(t){super(t,{ignoreBorder:t.data.hasAppearance})}render(){const t=super.render();t.classList.add("buttonWidgetAnnotation","pushButton");const e=t.lastChild;return this.enableScripting&&this.hasJSActions&&e&&(this._setDefaultPropertiesFromJS(e),e.addEventListener("updatefromsandbox",s=>{this._dispatchEventFromSandbox({},s)})),t}}class Lk extends xl{constructor(t){super(t,{isRenderable:t.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const t=this.annotationStorage,e=this.data.id,s=t.getValue(e,{value:this.data.fieldValue}),i=document.createElement("select");Al.add(i),i.setAttribute("data-element-id",e),i.disabled=this.data.readOnly,this._setRequired(i,this.data.required),i.name=this.data.fieldName,i.tabIndex=Qd;let r=this.data.combo&&this.data.options.length>0;this.data.combo||(i.size=this.data.options.length,this.data.multiSelect&&(i.multiple=!0)),i.addEventListener("resetform",u=>{const f=this.data.defaultFieldValue;for(const p of i.options)p.selected=p.value===f});for(const u of this.data.options){const f=document.createElement("option");f.textContent=u.displayValue,f.value=u.exportValue,s.value.includes(u.exportValue)&&(f.setAttribute("selected",!0),r=!1),i.append(f)}let o=null;if(r){const u=document.createElement("option");u.value=" ",u.setAttribute("hidden",!0),u.setAttribute("selected",!0),i.prepend(u),o=()=>{u.remove(),i.removeEventListener("input",o),o=null},i.addEventListener("input",o)}const a=u=>{const f=u?"value":"textContent",{options:p,multiple:g}=i;return g?Array.prototype.filter.call(p,v=>v.selected).map(v=>v[f]):p.selectedIndex===-1?null:p[p.selectedIndex][f]};let c=a(!1);const h=u=>{const f=u.target.options;return Array.prototype.map.call(f,p=>({displayValue:p.textContent,exportValue:p.value}))};return this.enableScripting&&this.hasJSActions?(i.addEventListener("updatefromsandbox",u=>{const f={value(p){o==null||o();const g=p.detail.value,v=new Set(Array.isArray(g)?g:[g]);for(const _ of i.options)_.selected=v.has(_.value);t.setValue(e,{value:a(!0)}),c=a(!1)},multipleSelection(p){i.multiple=!0},remove(p){const g=i.options,v=p.detail.remove;g[v].selected=!1,i.remove(v),g.length>0&&Array.prototype.findIndex.call(g,x=>x.selected)===-1&&(g[0].selected=!0),t.setValue(e,{value:a(!0),items:h(p)}),c=a(!1)},clear(p){for(;i.length!==0;)i.remove(0);t.setValue(e,{value:null,items:[]}),c=a(!1)},insert(p){const{index:g,displayValue:v,exportValue:_}=p.detail.insert,x=i.children[g],S=document.createElement("option");S.textContent=v,S.value=_,x?x.before(S):i.append(S),t.setValue(e,{value:a(!0),items:h(p)}),c=a(!1)},items(p){const{items:g}=p.detail;for(;i.length!==0;)i.remove(0);for(const v of g){const{displayValue:_,exportValue:x}=v,S=document.createElement("option");S.textContent=_,S.value=x,i.append(S)}i.options.length>0&&(i.options[0].selected=!0),t.setValue(e,{value:a(!0),items:h(p)}),c=a(!1)},indices(p){const g=new Set(p.detail.indices);for(const v of p.target.options)v.selected=g.has(v.index);t.setValue(e,{value:a(!0)}),c=a(!1)},editable(p){p.target.disabled=!p.detail.editable}};this._dispatchEventFromSandbox(f,u)}),i.addEventListener("input",u=>{var g;const f=a(!0),p=a(!1);t.setValue(e,{value:f}),u.preventDefault(),(g=this.linkService.eventBus)==null||g.dispatch("dispatcheventinsandbox",{source:this,detail:{id:e,name:"Keystroke",value:c,change:p,changeEx:f,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(i,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],u=>u.target.value)):i.addEventListener("input",function(u){t.setValue(e,{value:a(!0)})}),this.data.combo&&this._setTextStyle(i),this._setBackgroundColor(i),this._setDefaultPropertiesFromJS(i),this.container.append(i),this.container}}class mb extends He{constructor(t){const{data:e,elements:s}=t;super(t,{isRenderable:He._hasPopupData(e)}),this.elements=s,this.popup=null}render(){this.container.classList.add("popupAnnotation");const t=this.popup=new Mk({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),e=[];for(const s of this.elements)s.popup=t,s.container.ariaHasPopup="dialog",e.push(s.data.id),s.addHighlightArea();return this.container.setAttribute("aria-controls",e.map(s=>`${v_}${s}`).join(",")),this.container}}var zc,zp,Wp,Wc,qc,De,_r,Gc,ad,ld,Xc,vr,Yi,yr,cd,wr,hd,Ga,Xa,de,Kf,bb,bE,_E,vE,yE,Yf,Qf,_b;class Mk{constructor({container:t,color:e,elements:s,titleObj:i,modificationDate:r,contentsObj:o,richText:a,parent:c,rect:h,parentRect:u,open:f}){w(this,de);w(this,zc,A(this,de,vE).bind(this));w(this,zp,A(this,de,_b).bind(this));w(this,Wp,A(this,de,Qf).bind(this));w(this,Wc,A(this,de,Yf).bind(this));w(this,qc,null);w(this,De,null);w(this,_r,null);w(this,Gc,null);w(this,ad,null);w(this,ld,null);w(this,Xc,null);w(this,vr,!1);w(this,Yi,null);w(this,yr,null);w(this,cd,null);w(this,wr,null);w(this,hd,null);w(this,Ga,null);w(this,Xa,!1);var p;b(this,De,t),b(this,hd,i),b(this,_r,o),b(this,wr,a),b(this,ld,c),b(this,qc,e),b(this,cd,h),b(this,Xc,u),b(this,ad,s),b(this,Gc,A_.toDateObject(r)),this.trigger=s.flatMap(g=>g.getElementsToTriggerPopup());for(const g of this.trigger)g.addEventListener("click",l(this,Wc)),g.addEventListener("mouseenter",l(this,Wp)),g.addEventListener("mouseleave",l(this,zp)),g.classList.add("popupTriggerArea");for(const g of s)(p=g.container)==null||p.addEventListener("keydown",l(this,zc));l(this,De).hidden=!0,f&&A(this,de,Yf).call(this)}render(){if(l(this,Yi))return;const t=b(this,Yi,document.createElement("div"));if(t.className="popup",l(this,qc)){const r=t.style.outlineColor=pt.makeHexColor(...l(this,qc));t.style.backgroundColor=`color-mix(in srgb, ${r} 30%, white)`}const e=document.createElement("span");e.className="header";const s=document.createElement("h1");if(e.append(s),{dir:s.dir,str:s.textContent}=l(this,hd),t.append(e),l(this,Gc)){const r=document.createElement("span");r.classList.add("popupDate"),r.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),r.setAttribute("data-l10n-args",JSON.stringify({dateObj:l(this,Gc).valueOf()})),e.append(r)}const i=l(this,de,Kf);if(i)dE.render({xfaHtml:i,intent:"richText",div:t}),t.lastChild.classList.add("richText","popupContent");else{const r=this._formatContents(l(this,_r));t.append(r)}l(this,De).append(t)}_formatContents({str:t,dir:e}){const s=document.createElement("p");s.classList.add("popupContent"),s.dir=e;const i=t.split(/(?:\r\n?|\n)/);for(let r=0,o=i.length;r<o;++r){const a=i[r];s.append(document.createTextNode(a)),r<o-1&&s.append(document.createElement("br"))}return s}updateEdited({rect:t,popupContent:e}){var s;l(this,Ga)||b(this,Ga,{contentsObj:l(this,_r),richText:l(this,wr)}),t&&b(this,yr,null),e&&(b(this,wr,A(this,de,_E).call(this,e)),b(this,_r,null)),(s=l(this,Yi))==null||s.remove(),b(this,Yi,null)}resetEdited(){var t;l(this,Ga)&&({contentsObj:Ns(this,_r)._,richText:Ns(this,wr)._}=l(this,Ga),b(this,Ga,null),(t=l(this,Yi))==null||t.remove(),b(this,Yi,null),b(this,yr,null))}forceHide(){b(this,Xa,this.isVisible),l(this,Xa)&&(l(this,De).hidden=!0)}maybeShow(){l(this,Xa)&&(l(this,Yi)||A(this,de,Qf).call(this),b(this,Xa,!1),l(this,De).hidden=!1)}get isVisible(){return l(this,De).hidden===!1}}zc=new WeakMap,zp=new WeakMap,Wp=new WeakMap,Wc=new WeakMap,qc=new WeakMap,De=new WeakMap,_r=new WeakMap,Gc=new WeakMap,ad=new WeakMap,ld=new WeakMap,Xc=new WeakMap,vr=new WeakMap,Yi=new WeakMap,yr=new WeakMap,cd=new WeakMap,wr=new WeakMap,hd=new WeakMap,Ga=new WeakMap,Xa=new WeakMap,de=new WeakSet,Kf=function(){const t=l(this,wr),e=l(this,_r);return t!=null&&t.str&&(!(e!=null&&e.str)||e.str===t.str)&&l(this,wr).html||null},bb=function(){var t,e,s;return((s=(e=(t=l(this,de,Kf))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:s.fontSize)||0},bE=function(){var t,e,s;return((s=(e=(t=l(this,de,Kf))==null?void 0:t.attributes)==null?void 0:e.style)==null?void 0:s.color)||null},_E=function(t){const e=[],s={str:t,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:e}]}},i={style:{color:l(this,de,bE),fontSize:l(this,de,bb)?`calc(${l(this,de,bb)}px * var(--total-scale-factor))`:""}};for(const r of t.split(`
`))e.push({name:"span",value:r,attributes:i});return s},vE=function(t){t.altKey||t.shiftKey||t.ctrlKey||t.metaKey||(t.key==="Enter"||t.key==="Escape"&&l(this,vr))&&A(this,de,Yf).call(this)},yE=function(){if(l(this,yr)!==null)return;const{page:{view:t},viewport:{rawDims:{pageWidth:e,pageHeight:s,pageX:i,pageY:r}}}=l(this,ld);let o=!!l(this,Xc),a=o?l(this,Xc):l(this,cd);for(const v of l(this,ad))if(!a||pt.intersect(v.data.rect,a)!==null){a=v.data.rect,o=!0;break}const c=pt.normalizeRect([a[0],t[3]-a[1]+t[1],a[2],t[3]-a[3]+t[1]]),u=o?a[2]-a[0]+5:0,f=c[0]+u,p=c[1];b(this,yr,[100*(f-i)/e,100*(p-r)/s]);const{style:g}=l(this,De);g.left=`${l(this,yr)[0]}%`,g.top=`${l(this,yr)[1]}%`},Yf=function(){b(this,vr,!l(this,vr)),l(this,vr)?(A(this,de,Qf).call(this),l(this,De).addEventListener("click",l(this,Wc)),l(this,De).addEventListener("keydown",l(this,zc))):(A(this,de,_b).call(this),l(this,De).removeEventListener("click",l(this,Wc)),l(this,De).removeEventListener("keydown",l(this,zc)))},Qf=function(){l(this,Yi)||this.render(),this.isVisible?l(this,vr)&&l(this,De).classList.add("focused"):(A(this,de,yE).call(this),l(this,De).hidden=!1,l(this,De).style.zIndex=parseInt(l(this,De).style.zIndex)+1e3)},_b=function(){l(this,De).classList.remove("focused"),!(l(this,vr)||!this.isVisible)&&(l(this,De).hidden=!0,l(this,De).style.zIndex=parseInt(l(this,De).style.zIndex)-1e3)};class wE extends He{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.textContent=t.data.textContent,this.textPosition=t.data.textPosition,this.annotationEditorType=Tt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const t=document.createElement("div");t.classList.add("annotationTextContent"),t.setAttribute("role","comment");for(const e of this.textContent){const s=document.createElement("span");s.textContent=e,t.append(s)}this.container.append(t)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var ud;class Dk extends He{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,ud,null)}render(){this.container.classList.add("lineAnnotation");const{data:e,width:s,height:i}=this,r=this.svgFactory.create(s,i,!0),o=b(this,ud,this.svgFactory.createElement("svg:line"));return o.setAttribute("x1",e.rect[2]-e.lineCoordinates[0]),o.setAttribute("y1",e.rect[3]-e.lineCoordinates[1]),o.setAttribute("x2",e.rect[2]-e.lineCoordinates[2]),o.setAttribute("y2",e.rect[3]-e.lineCoordinates[3]),o.setAttribute("stroke-width",e.borderStyle.width||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),r.append(o),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,ud)}addHighlightArea(){this.container.classList.add("highlightArea")}}ud=new WeakMap;var dd;class Ok extends He{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,dd,null)}render(){this.container.classList.add("squareAnnotation");const{data:e,width:s,height:i}=this,r=this.svgFactory.create(s,i,!0),o=e.borderStyle.width,a=b(this,dd,this.svgFactory.createElement("svg:rect"));return a.setAttribute("x",o/2),a.setAttribute("y",o/2),a.setAttribute("width",s-o),a.setAttribute("height",i-o),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,dd)}addHighlightArea(){this.container.classList.add("highlightArea")}}dd=new WeakMap;var fd;class Nk extends He{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,fd,null)}render(){this.container.classList.add("circleAnnotation");const{data:e,width:s,height:i}=this,r=this.svgFactory.create(s,i,!0),o=e.borderStyle.width,a=b(this,fd,this.svgFactory.createElement("svg:ellipse"));return a.setAttribute("cx",s/2),a.setAttribute("cy",i/2),a.setAttribute("rx",s/2-o/2),a.setAttribute("ry",i/2-o/2),a.setAttribute("stroke-width",o||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),r.append(a),this.container.append(r),!e.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,fd)}addHighlightArea(){this.container.classList.add("highlightArea")}}fd=new WeakMap;var pd;class AE extends He{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,pd,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,vertices:s,borderStyle:i,popupRef:r},width:o,height:a}=this;if(!s)return this.container;const c=this.svgFactory.create(o,a,!0);let h=[];for(let f=0,p=s.length;f<p;f+=2){const g=s[f]-e[0],v=e[3]-s[f+1];h.push(`${g},${v}`)}h=h.join(" ");const u=b(this,pd,this.svgFactory.createElement(this.svgElementName));return u.setAttribute("points",h),u.setAttribute("stroke-width",i.width||1),u.setAttribute("stroke","transparent"),u.setAttribute("fill","transparent"),c.append(u),this.container.append(c),!r&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return l(this,pd)}addHighlightArea(){this.container.classList.add("highlightArea")}}pd=new WeakMap;class Fk extends AE{constructor(t){super(t),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class $k extends He{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var gd,Ka,md,vb;class P_ extends He{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0});w(this,md);w(this,gd,null);w(this,Ka,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?Tt.HIGHLIGHT:Tt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:e,rotation:s,inkLists:i,borderStyle:r,popupRef:o}}=this,{transform:a,width:c,height:h}=A(this,md,vb).call(this,s,e),u=this.svgFactory.create(c,h,!0),f=b(this,gd,this.svgFactory.createElement("svg:g"));u.append(f),f.setAttribute("stroke-width",r.width||1),f.setAttribute("stroke-linecap","round"),f.setAttribute("stroke-linejoin","round"),f.setAttribute("stroke-miterlimit",10),f.setAttribute("stroke","transparent"),f.setAttribute("fill","transparent"),f.setAttribute("transform",a);for(let p=0,g=i.length;p<g;p++){const v=this.svgFactory.createElement(this.svgElementName);l(this,Ka).push(v),v.setAttribute("points",i[p].join(",")),f.append(v)}return!o&&this.hasPopupData&&this._createPopup(),this.container.append(u),this._editOnDoubleClick(),this.container}updateEdited(e){super.updateEdited(e);const{thickness:s,points:i,rect:r}=e,o=l(this,gd);if(s>=0&&o.setAttribute("stroke-width",s||1),i)for(let a=0,c=l(this,Ka).length;a<c;a++)l(this,Ka)[a].setAttribute("points",i[a].join(","));if(r){const{transform:a,width:c,height:h}=A(this,md,vb).call(this,this.data.rotation,r);o.parentElement.setAttribute("viewBox",`0 0 ${c} ${h}`),o.setAttribute("transform",a)}}getElementsToTriggerPopup(){return l(this,Ka)}addHighlightArea(){this.container.classList.add("highlightArea")}}gd=new WeakMap,Ka=new WeakMap,md=new WeakSet,vb=function(e,s){switch(e){case 90:return{transform:`rotate(90) translate(${-s[0]},${s[1]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};case 180:return{transform:`rotate(180) translate(${-s[2]},${s[1]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]};case 270:return{transform:`rotate(270) translate(${-s[2]},${s[3]}) scale(1,-1)`,width:s[3]-s[1],height:s[2]-s[0]};default:return{transform:`translate(${-s[0]},${s[3]}) scale(1,-1)`,width:s[2]-s[0],height:s[3]-s[1]}}};class EE extends He{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=Tt.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class Bk extends He{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class Hk extends He{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class jk extends He{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class SE extends He{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=Tt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var bd,_d,yb;class Vk extends He{constructor(e){var i;super(e,{isRenderable:!0});w(this,_d);w(this,bd,null);const{file:s}=this.data;this.filename=s.filename,this.content=s.content,(i=this.linkService.eventBus)==null||i.dispatch("fileattachmentannotation",{source:this,...s})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:e,data:s}=this;let i;s.hasAppearance||s.fillAlpha===0?i=document.createElement("div"):(i=document.createElement("img"),i.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(s.name)?"paperclip":"pushpin"}.svg`,s.fillAlpha&&s.fillAlpha<1&&(i.style=`filter: opacity(${Math.round(s.fillAlpha*100)}%);`)),i.addEventListener("dblclick",A(this,_d,yb).bind(this)),b(this,bd,i);const{isMac:r}=ys.platform;return e.addEventListener("keydown",o=>{o.key==="Enter"&&(r?o.metaKey:o.ctrlKey)&&A(this,_d,yb).call(this)}),!s.popupRef&&this.hasPopupData?this._createPopup():i.classList.add("popupTriggerArea"),e.append(i),e}getElementsToTriggerPopup(){return l(this,bd)}addHighlightArea(){this.container.classList.add("highlightArea")}}bd=new WeakMap,_d=new WeakSet,yb=function(){var e;(e=this.downloadManager)==null||e.openOrDownloadData(this.content,this.filename)};var vd,Ya,Ao,yd,qo,Ab,Eb;const N_=class N_{constructor({div:t,accessibilityManager:e,annotationCanvasMap:s,annotationEditorUIManager:i,page:r,viewport:o,structTreeLayer:a}){w(this,qo);w(this,vd,null);w(this,Ya,null);w(this,Ao,new Map);w(this,yd,null);this.div=t,b(this,vd,e),b(this,Ya,s),b(this,yd,a||null),this.page=r,this.viewport=o,this.zIndex=0,this._annotationEditorUIManager=i}hasEditableAnnotations(){return l(this,Ao).size>0}async render(t){var o;const{annotations:e}=t,s=this.div;yl(s,this.viewport);const i=new Map,r={data:null,layer:s,linkService:t.linkService,downloadManager:t.downloadManager,imageResourcesPath:t.imageResourcesPath||"",renderForms:t.renderForms!==!1,svgFactory:new Tp,annotationStorage:t.annotationStorage||new x_,enableScripting:t.enableScripting===!0,hasJSActions:t.hasJSActions,fieldObjects:t.fieldObjects,parent:this,elements:null};for(const a of e){if(a.noHTML)continue;const c=a.annotationType===Ve.POPUP;if(c){const f=i.get(a.id);if(!f)continue;r.elements=f}else if(a.rect[2]===a.rect[0]||a.rect[3]===a.rect[1])continue;r.data=a;const h=kw.create(r);if(!h.isRenderable)continue;if(!c&&a.popupRef){const f=i.get(a.popupRef);f?f.push(h):i.set(a.popupRef,[h])}const u=h.render();a.hidden&&(u.style.visibility="hidden"),await A(this,qo,Ab).call(this,u,a.id),h._isEditable&&(l(this,Ao).set(h.data.id,h),(o=this._annotationEditorUIManager)==null||o.renderAnnotationElement(h))}A(this,qo,Eb).call(this)}async addLinkAnnotations(t,e){const s={data:null,layer:this.div,linkService:e,svgFactory:new Tp,parent:this};for(const i of t){i.borderStyle||(i.borderStyle=N_._defaultBorderStyle),s.data=i;const r=kw.create(s);if(!r.isRenderable)continue;const o=r.render();await A(this,qo,Ab).call(this,o,i.id)}}update({viewport:t}){const e=this.div;this.viewport=t,yl(e,{rotation:t.rotation}),A(this,qo,Eb).call(this),e.hidden=!1}getEditableAnnotations(){return Array.from(l(this,Ao).values())}getEditableAnnotation(t){return l(this,Ao).get(t)}static get _defaultBorderStyle(){return jt(this,"_defaultBorderStyle",Object.freeze({width:1,rawWidth:1,style:ql.SOLID,dashArray:[3],horizontalCornerRadius:0,verticalCornerRadius:0}))}};vd=new WeakMap,Ya=new WeakMap,Ao=new WeakMap,yd=new WeakMap,qo=new WeakSet,Ab=async function(t,e){var o,a;const s=t.firstChild||t,i=s.id=`${v_}${e}`,r=await((o=l(this,yd))==null?void 0:o.getAriaAttributes(i));if(r)for(const[c,h]of r)s.setAttribute(c,h);this.div.append(t),(a=l(this,vd))==null||a.moveElementInDOM(this.div,t,s,!1)},Eb=function(){var e;if(!l(this,Ya))return;const t=this.div;for(const[s,i]of l(this,Ya)){const r=t.querySelector(`[data-annotation-id="${s}"]`);if(!r)continue;i.className="annotationContent";const{firstChild:o}=r;o?o.nodeName==="CANVAS"?o.replaceWith(i):o.classList.contains("annotationContent")?o.after(i):o.before(i):r.append(i);const a=l(this,Ao).get(s);a&&(a._hasNoCanvas?((e=this._annotationEditorUIManager)==null||e.setMissingCanvas(s,r.id,i),a._hasNoCanvas=!1):a.canvas=i)}l(this,Ya).clear()};let wb=N_;const Tf=/\r\n?|\n/g;var Qi,ui,wd,Qa,di,We,xE,CE,TE,Jf,Dr,Zf,tp,PE,xb,RE;const be=class be extends ye{constructor(e){super({...e,name:"freeTextEditor"});w(this,We);w(this,Qi);w(this,ui,"");w(this,wd,`${this.id}-editor`);w(this,Qa,null);w(this,di);b(this,Qi,e.color||be._defaultColor||ye._defaultLineColor),b(this,di,e.fontSize||be._defaultFontSize)}static get _keyboardManager(){const e=be.prototype,s=o=>o.isEmpty(),i=wl.TRANSLATE_SMALL,r=wl.TRANSLATE_BIG;return jt(this,"_keyboardManager",new Kd([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],e.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],e.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],e._translateEmpty,{args:[-i,0],checker:s}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e._translateEmpty,{args:[-r,0],checker:s}],[["ArrowRight","mac+ArrowRight"],e._translateEmpty,{args:[i,0],checker:s}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e._translateEmpty,{args:[r,0],checker:s}],[["ArrowUp","mac+ArrowUp"],e._translateEmpty,{args:[0,-i],checker:s}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e._translateEmpty,{args:[0,-r],checker:s}],[["ArrowDown","mac+ArrowDown"],e._translateEmpty,{args:[0,i],checker:s}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e._translateEmpty,{args:[0,r],checker:s}]]))}static initialize(e,s){ye.initialize(e,s);const i=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(i.getPropertyValue("--freetext-padding"))}static updateDefaultParams(e,s){switch(e){case zt.FREETEXT_SIZE:be._defaultFontSize=s;break;case zt.FREETEXT_COLOR:be._defaultColor=s;break}}updateParams(e,s){switch(e){case zt.FREETEXT_SIZE:A(this,We,xE).call(this,s);break;case zt.FREETEXT_COLOR:A(this,We,CE).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[zt.FREETEXT_SIZE,be._defaultFontSize],[zt.FREETEXT_COLOR,be._defaultColor||ye._defaultLineColor]]}get propertiesToUpdate(){return[[zt.FREETEXT_SIZE,l(this,di)],[zt.FREETEXT_COLOR,l(this,Qi)]]}_translateEmpty(e,s){this._uiManager.translateSelectedEditors(e,s,!0)}getInitialTranslation(){const e=this.parentScale;return[-be._internalPadding*e,-(be._internalPadding+l(this,di))*e]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(Tt.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),b(this,Qa,new AbortController);const e=this._uiManager.combinedSignal(l(this,Qa));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:e}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:e}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:e}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:e}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:e})}disableEditMode(){var e;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",l(this,wd)),this._isDraggable=!0,(e=l(this,Qa))==null||e.abort(),b(this,Qa,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(e){this._focusEventsAllowed&&(super.focusin(e),e.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(e){var s;this.width||(this.enableEditMode(),e&&this.editorDiv.focus(),(s=this._initialOptions)!=null&&s.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const e=l(this,ui),s=b(this,ui,A(this,We,TE).call(this).trimEnd());if(e===s)return;const i=r=>{if(b(this,ui,r),!r){this.remove();return}A(this,We,tp).call(this),this._uiManager.rebuild(this),A(this,We,Jf).call(this)};this.addCommands({cmd:()=>{i(s)},undo:()=>{i(e)},mustExec:!1}),A(this,We,Jf).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(e){this.enterInEditMode()}keydown(e){e.target===this.div&&e.key==="Enter"&&(this.enterInEditMode(),e.preventDefault())}editorDivKeydown(e){be._keyboardManager.exec(this,e)}editorDivFocus(e){this.isEditing=!0}editorDivBlur(e){this.isEditing=!1}editorDivInput(e){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let e,s;(this._isCopy||this.annotationElementId)&&(e=this.x,s=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",l(this,wd)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:i}=this.editorDiv;if(i.fontSize=`calc(${l(this,di)}px * var(--total-scale-factor))`,i.color=l(this,Qi),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),S_(this,this.div,["dblclick","keydown"]),this._isCopy||this.annotationElementId){const[r,o]=this.parentDimensions;if(this.annotationElementId){const{position:a}=this._initialData;let[c,h]=this.getInitialTranslation();[c,h]=this.pageTranslationToScreen(c,h);const[u,f]=this.pageDimensions,[p,g]=this.pageTranslation;let v,_;switch(this.rotation){case 0:v=e+(a[0]-p)/u,_=s+this.height-(a[1]-g)/f;break;case 90:v=e+(a[0]-p)/u,_=s-(a[1]-g)/f,[c,h]=[h,-c];break;case 180:v=e-this.width+(a[0]-p)/u,_=s-(a[1]-g)/f,[c,h]=[-c,-h];break;case 270:v=e+(a[0]-p-this.height*f)/u,_=s+(a[1]-g-this.width*u)/f,[c,h]=[-h,c];break}this.setAt(v*r,_*o,c,h)}else this._moveAfterPaste(e,s);A(this,We,tp).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(e){var v,_,x;const s=e.clipboardData||window.clipboardData,{types:i}=s;if(i.length===1&&i[0]==="text/plain")return;e.preventDefault();const r=A(v=be,Dr,xb).call(v,s.getData("text")||"").replaceAll(Tf,`
`);if(!r)return;const o=window.getSelection();if(!o.rangeCount)return;this.editorDiv.normalize(),o.deleteFromDocument();const a=o.getRangeAt(0);if(!r.includes(`
`)){a.insertNode(document.createTextNode(r)),this.editorDiv.normalize(),o.collapseToStart();return}const{startContainer:c,startOffset:h}=a,u=[],f=[];if(c.nodeType===Node.TEXT_NODE){const S=c.parentElement;if(f.push(c.nodeValue.slice(h).replaceAll(Tf,"")),S!==this.editorDiv){let C=u;for(const T of this.editorDiv.childNodes){if(T===S){C=f;continue}C.push(A(_=be,Dr,Zf).call(_,T))}}u.push(c.nodeValue.slice(0,h).replaceAll(Tf,""))}else if(c===this.editorDiv){let S=u,C=0;for(const T of this.editorDiv.childNodes)C++===h&&(S=f),S.push(A(x=be,Dr,Zf).call(x,T))}b(this,ui,`${u.join(`
`)}${r}${f.join(`
`)}`),A(this,We,tp).call(this);const p=new Range;let g=Math.sumPrecise(u.map(S=>S.length));for(const{firstChild:S}of this.editorDiv.childNodes)if(S.nodeType===Node.TEXT_NODE){const C=S.nodeValue.length;if(g<=C){p.setStart(S,g),p.setEnd(S,g);break}g-=C}o.removeAllRanges(),o.addRange(p)}get contentDiv(){return this.editorDiv}static async deserialize(e,s,i){var a;let r=null;if(e instanceof wE){const{data:{defaultAppearanceData:{fontSize:c,fontColor:h},rect:u,rotation:f,id:p,popupRef:g},textContent:v,textPosition:_,parent:{page:{pageNumber:x}}}=e;if(!v||v.length===0)return null;r=e={annotationType:Tt.FREETEXT,color:Array.from(h),fontSize:c,value:v.join(`
`),position:_,pageIndex:x-1,rect:u.slice(0),rotation:f,id:p,deleted:!1,popupRef:g}}const o=await super.deserialize(e,s,i);return b(o,di,e.fontSize),b(o,Qi,pt.makeHexColor(...e.color)),b(o,ui,A(a=be,Dr,xb).call(a,e.value)),o.annotationElementId=e.id||null,o._initialData=r,o}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const s=be._internalPadding*this.parentScale,i=this.getRect(s,s),r=ye._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:l(this,Qi)),o={annotationType:Tt.FREETEXT,color:r,fontSize:l(this,di),value:A(this,We,PE).call(this),pageIndex:this.pageIndex,rect:i,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(o.isCopy=!0,o):this.annotationElementId&&!A(this,We,RE).call(this,o)?null:(o.id=this.annotationElementId,o)}renderAnnotationElement(e){const s=super.renderAnnotationElement(e);if(this.deleted)return s;const{style:i}=s;i.fontSize=`calc(${l(this,di)}px * var(--total-scale-factor))`,i.color=l(this,Qi),s.replaceChildren();for(const o of l(this,ui).split(`
`)){const a=document.createElement("div");a.append(o?document.createTextNode(o):document.createElement("br")),s.append(a)}const r=be._internalPadding*this.parentScale;return e.updateEdited({rect:this.getRect(r,r),popupContent:l(this,ui)}),s}resetAnnotationElement(e){super.resetAnnotationElement(e),e.resetEdited()}};Qi=new WeakMap,ui=new WeakMap,wd=new WeakMap,Qa=new WeakMap,di=new WeakMap,We=new WeakSet,xE=function(e){const s=r=>{this.editorDiv.style.fontSize=`calc(${r}px * var(--total-scale-factor))`,this.translate(0,-(r-l(this,di))*this.parentScale),b(this,di,r),A(this,We,Jf).call(this)},i=l(this,di);this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:zt.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},CE=function(e){const s=r=>{b(this,Qi,this.editorDiv.style.color=r)},i=l(this,Qi);this.addCommands({cmd:s.bind(this,e),undo:s.bind(this,i),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:zt.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},TE=function(){var i;const e=[];this.editorDiv.normalize();let s=null;for(const r of this.editorDiv.childNodes)(s==null?void 0:s.nodeType)===Node.TEXT_NODE&&r.nodeName==="BR"||(e.push(A(i=be,Dr,Zf).call(i,r)),s=r);return e.join(`
`)},Jf=function(){const[e,s]=this.parentDimensions;let i;if(this.isAttachedToDOM)i=this.div.getBoundingClientRect();else{const{currentLayer:r,div:o}=this,a=o.style.display,c=o.classList.contains("hidden");o.classList.remove("hidden"),o.style.display="hidden",r.div.append(this.div),i=o.getBoundingClientRect(),o.remove(),o.style.display=a,o.classList.toggle("hidden",c)}this.rotation%180===this.parentRotation%180?(this.width=i.width/e,this.height=i.height/s):(this.width=i.height/e,this.height=i.width/s),this.fixAndSetPosition()},Dr=new WeakSet,Zf=function(e){return(e.nodeType===Node.TEXT_NODE?e.nodeValue:e.innerText).replaceAll(Tf,"")},tp=function(){if(this.editorDiv.replaceChildren(),!!l(this,ui))for(const e of l(this,ui).split(`
`)){const s=document.createElement("div");s.append(e?document.createTextNode(e):document.createElement("br")),this.editorDiv.append(s)}},PE=function(){return l(this,ui).replaceAll(" "," ")},xb=function(e){return e.replaceAll(" "," ")},RE=function(e){const{value:s,fontSize:i,color:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||e.value!==s||e.fontSize!==i||e.color.some((a,c)=>a!==r[c])||e.pageIndex!==o},w(be,Dr),J(be,"_freeTextDefaultContent",""),J(be,"_internalPadding",0),J(be,"_defaultColor",null),J(be,"_defaultFontSize",10),J(be,"_type","freetext"),J(be,"_editorType",Tt.FREETEXT);let Sb=be;class ct{toSVGPath(){ue("Abstract method `toSVGPath` must be implemented.")}get box(){ue("Abstract getter `box` must be implemented.")}serialize(t,e){ue("Abstract method `serialize` must be implemented.")}static _rescale(t,e,s,i,r,o){o||(o=new Float32Array(t.length));for(let a=0,c=t.length;a<c;a+=2)o[a]=e+t[a]*i,o[a+1]=s+t[a+1]*r;return o}static _rescaleAndSwap(t,e,s,i,r,o){o||(o=new Float32Array(t.length));for(let a=0,c=t.length;a<c;a+=2)o[a]=e+t[a+1]*i,o[a+1]=s+t[a]*r;return o}static _translate(t,e,s,i){i||(i=new Float32Array(t.length));for(let r=0,o=t.length;r<o;r+=2)i[r]=e+t[r],i[r+1]=s+t[r+1];return i}static svgRound(t){return Math.round(t*1e4)}static _normalizePoint(t,e,s,i,r){switch(r){case 90:return[1-e/s,t/i];case 180:return[1-t/s,1-e/i];case 270:return[e/s,1-t/i];default:return[t/s,e/i]}}static _normalizePagePoint(t,e,s){switch(s){case 90:return[1-e,t];case 180:return[1-t,1-e];case 270:return[e,1-t];default:return[t,e]}}static createBezierPoints(t,e,s,i,r,o){return[(t+5*s)/6,(e+5*i)/6,(5*s+r)/6,(5*i+o)/6,(s+r)/2,(i+o)/2]}}J(ct,"PRECISION",1e-4);var fi,Ji,Kc,Yc,Mn,Bt,Ja,Za,Ad,Ed,Qc,Jc,Eo,Sd,qp,Gp,ts,Xh,kE,IE,LE,ME,DE,OE;const er=class er{constructor({x:t,y:e},s,i,r,o,a=0){w(this,ts);w(this,fi);w(this,Ji,[]);w(this,Kc);w(this,Yc);w(this,Mn,[]);w(this,Bt,new Float32Array(18));w(this,Ja);w(this,Za);w(this,Ad);w(this,Ed);w(this,Qc);w(this,Jc);w(this,Eo,[]);b(this,fi,s),b(this,Jc,r*i),b(this,Yc,o),l(this,Bt).set([NaN,NaN,NaN,NaN,t,e],6),b(this,Kc,a),b(this,Ed,l(er,Sd)*i),b(this,Ad,l(er,Gp)*i),b(this,Qc,i),l(this,Eo).push(t,e)}isEmpty(){return isNaN(l(this,Bt)[8])}add({x:t,y:e}){var V;b(this,Ja,t),b(this,Za,e);const[s,i,r,o]=l(this,fi);let[a,c,h,u]=l(this,Bt).subarray(8,12);const f=t-h,p=e-u,g=Math.hypot(f,p);if(g<l(this,Ad))return!1;const v=g-l(this,Ed),_=v/g,x=_*f,S=_*p;let C=a,T=c;a=h,c=u,h+=x,u+=S,(V=l(this,Eo))==null||V.push(t,e);const R=-S/v,I=x/v,F=R*l(this,Jc),N=I*l(this,Jc);return l(this,Bt).set(l(this,Bt).subarray(2,8),0),l(this,Bt).set([h+F,u+N],4),l(this,Bt).set(l(this,Bt).subarray(14,18),12),l(this,Bt).set([h-F,u-N],16),isNaN(l(this,Bt)[6])?(l(this,Mn).length===0&&(l(this,Bt).set([a+F,c+N],2),l(this,Mn).push(NaN,NaN,NaN,NaN,(a+F-s)/r,(c+N-i)/o),l(this,Bt).set([a-F,c-N],14),l(this,Ji).push(NaN,NaN,NaN,NaN,(a-F-s)/r,(c-N-i)/o)),l(this,Bt).set([C,T,a,c,h,u],6),!this.isEmpty()):(l(this,Bt).set([C,T,a,c,h,u],6),Math.abs(Math.atan2(T-c,C-a)-Math.atan2(S,x))<Math.PI/2?([a,c,h,u]=l(this,Bt).subarray(2,6),l(this,Mn).push(NaN,NaN,NaN,NaN,((a+h)/2-s)/r,((c+u)/2-i)/o),[a,c,C,T]=l(this,Bt).subarray(14,18),l(this,Ji).push(NaN,NaN,NaN,NaN,((C+a)/2-s)/r,((T+c)/2-i)/o),!0):([C,T,a,c,h,u]=l(this,Bt).subarray(0,6),l(this,Mn).push(((C+5*a)/6-s)/r,((T+5*c)/6-i)/o,((5*a+h)/6-s)/r,((5*c+u)/6-i)/o,((a+h)/2-s)/r,((c+u)/2-i)/o),[h,u,a,c,C,T]=l(this,Bt).subarray(12,18),l(this,Ji).push(((C+5*a)/6-s)/r,((T+5*c)/6-i)/o,((5*a+h)/6-s)/r,((5*c+u)/6-i)/o,((a+h)/2-s)/r,((c+u)/2-i)/o),!0))}toSVGPath(){if(this.isEmpty())return"";const t=l(this,Mn),e=l(this,Ji);if(isNaN(l(this,Bt)[6])&&!this.isEmpty())return A(this,ts,kE).call(this);const s=[];s.push(`M${t[4]} ${t[5]}`);for(let i=6;i<t.length;i+=6)isNaN(t[i])?s.push(`L${t[i+4]} ${t[i+5]}`):s.push(`C${t[i]} ${t[i+1]} ${t[i+2]} ${t[i+3]} ${t[i+4]} ${t[i+5]}`);A(this,ts,LE).call(this,s);for(let i=e.length-6;i>=6;i-=6)isNaN(e[i])?s.push(`L${e[i+4]} ${e[i+5]}`):s.push(`C${e[i]} ${e[i+1]} ${e[i+2]} ${e[i+3]} ${e[i+4]} ${e[i+5]}`);return A(this,ts,IE).call(this,s),s.join(" ")}newFreeDrawOutline(t,e,s,i,r,o){return new NE(t,e,s,i,r,o)}getOutlines(){var f;const t=l(this,Mn),e=l(this,Ji),s=l(this,Bt),[i,r,o,a]=l(this,fi),c=new Float32Array((((f=l(this,Eo))==null?void 0:f.length)??0)+2);for(let p=0,g=c.length-2;p<g;p+=2)c[p]=(l(this,Eo)[p]-i)/o,c[p+1]=(l(this,Eo)[p+1]-r)/a;if(c[c.length-2]=(l(this,Ja)-i)/o,c[c.length-1]=(l(this,Za)-r)/a,isNaN(s[6])&&!this.isEmpty())return A(this,ts,ME).call(this,c);const h=new Float32Array(l(this,Mn).length+24+l(this,Ji).length);let u=t.length;for(let p=0;p<u;p+=2){if(isNaN(t[p])){h[p]=h[p+1]=NaN;continue}h[p]=t[p],h[p+1]=t[p+1]}u=A(this,ts,OE).call(this,h,u);for(let p=e.length-6;p>=6;p-=6)for(let g=0;g<6;g+=2){if(isNaN(e[p+g])){h[u]=h[u+1]=NaN,u+=2;continue}h[u]=e[p+g],h[u+1]=e[p+g+1],u+=2}return A(this,ts,DE).call(this,h,u),this.newFreeDrawOutline(h,c,l(this,fi),l(this,Qc),l(this,Kc),l(this,Yc))}};fi=new WeakMap,Ji=new WeakMap,Kc=new WeakMap,Yc=new WeakMap,Mn=new WeakMap,Bt=new WeakMap,Ja=new WeakMap,Za=new WeakMap,Ad=new WeakMap,Ed=new WeakMap,Qc=new WeakMap,Jc=new WeakMap,Eo=new WeakMap,Sd=new WeakMap,qp=new WeakMap,Gp=new WeakMap,ts=new WeakSet,Xh=function(){const t=l(this,Bt).subarray(4,6),e=l(this,Bt).subarray(16,18),[s,i,r,o]=l(this,fi);return[(l(this,Ja)+(t[0]-e[0])/2-s)/r,(l(this,Za)+(t[1]-e[1])/2-i)/o,(l(this,Ja)+(e[0]-t[0])/2-s)/r,(l(this,Za)+(e[1]-t[1])/2-i)/o]},kE=function(){const[t,e,s,i]=l(this,fi),[r,o,a,c]=A(this,ts,Xh).call(this);return`M${(l(this,Bt)[2]-t)/s} ${(l(this,Bt)[3]-e)/i} L${(l(this,Bt)[4]-t)/s} ${(l(this,Bt)[5]-e)/i} L${r} ${o} L${a} ${c} L${(l(this,Bt)[16]-t)/s} ${(l(this,Bt)[17]-e)/i} L${(l(this,Bt)[14]-t)/s} ${(l(this,Bt)[15]-e)/i} Z`},IE=function(t){const e=l(this,Ji);t.push(`L${e[4]} ${e[5]} Z`)},LE=function(t){const[e,s,i,r]=l(this,fi),o=l(this,Bt).subarray(4,6),a=l(this,Bt).subarray(16,18),[c,h,u,f]=A(this,ts,Xh).call(this);t.push(`L${(o[0]-e)/i} ${(o[1]-s)/r} L${c} ${h} L${u} ${f} L${(a[0]-e)/i} ${(a[1]-s)/r}`)},ME=function(t){const e=l(this,Bt),[s,i,r,o]=l(this,fi),[a,c,h,u]=A(this,ts,Xh).call(this),f=new Float32Array(36);return f.set([NaN,NaN,NaN,NaN,(e[2]-s)/r,(e[3]-i)/o,NaN,NaN,NaN,NaN,(e[4]-s)/r,(e[5]-i)/o,NaN,NaN,NaN,NaN,a,c,NaN,NaN,NaN,NaN,h,u,NaN,NaN,NaN,NaN,(e[16]-s)/r,(e[17]-i)/o,NaN,NaN,NaN,NaN,(e[14]-s)/r,(e[15]-i)/o],0),this.newFreeDrawOutline(f,t,l(this,fi),l(this,Qc),l(this,Kc),l(this,Yc))},DE=function(t,e){const s=l(this,Ji);return t.set([NaN,NaN,NaN,NaN,s[4],s[5]],e),e+=6},OE=function(t,e){const s=l(this,Bt).subarray(4,6),i=l(this,Bt).subarray(16,18),[r,o,a,c]=l(this,fi),[h,u,f,p]=A(this,ts,Xh).call(this);return t.set([NaN,NaN,NaN,NaN,(s[0]-r)/a,(s[1]-o)/c,NaN,NaN,NaN,NaN,h,u,NaN,NaN,NaN,NaN,f,p,NaN,NaN,NaN,NaN,(i[0]-r)/a,(i[1]-o)/c],e),e+=24},w(er,Sd,8),w(er,qp,2),w(er,Gp,l(er,Sd)+l(er,qp));let Pp=er;var Zc,tl,Ar,xd,pi,Cd,$e,Xp,FE;class NE extends ct{constructor(e,s,i,r,o,a){super();w(this,Xp);w(this,Zc);w(this,tl,new Float32Array(4));w(this,Ar);w(this,xd);w(this,pi);w(this,Cd);w(this,$e);b(this,$e,e),b(this,pi,s),b(this,Zc,i),b(this,Cd,r),b(this,Ar,o),b(this,xd,a),this.lastPoint=[NaN,NaN],A(this,Xp,FE).call(this,a);const[c,h,u,f]=l(this,tl);for(let p=0,g=e.length;p<g;p+=2)e[p]=(e[p]-c)/u,e[p+1]=(e[p+1]-h)/f;for(let p=0,g=s.length;p<g;p+=2)s[p]=(s[p]-c)/u,s[p+1]=(s[p+1]-h)/f}toSVGPath(){const e=[`M${l(this,$e)[4]} ${l(this,$e)[5]}`];for(let s=6,i=l(this,$e).length;s<i;s+=6){if(isNaN(l(this,$e)[s])){e.push(`L${l(this,$e)[s+4]} ${l(this,$e)[s+5]}`);continue}e.push(`C${l(this,$e)[s]} ${l(this,$e)[s+1]} ${l(this,$e)[s+2]} ${l(this,$e)[s+3]} ${l(this,$e)[s+4]} ${l(this,$e)[s+5]}`)}return e.push("Z"),e.join(" ")}serialize([e,s,i,r],o){const a=i-e,c=r-s;let h,u;switch(o){case 0:h=ct._rescale(l(this,$e),e,r,a,-c),u=ct._rescale(l(this,pi),e,r,a,-c);break;case 90:h=ct._rescaleAndSwap(l(this,$e),e,s,a,c),u=ct._rescaleAndSwap(l(this,pi),e,s,a,c);break;case 180:h=ct._rescale(l(this,$e),i,s,-a,c),u=ct._rescale(l(this,pi),i,s,-a,c);break;case 270:h=ct._rescaleAndSwap(l(this,$e),i,r,-a,-c),u=ct._rescaleAndSwap(l(this,pi),i,r,-a,-c);break}return{outline:Array.from(h),points:[Array.from(u)]}}get box(){return l(this,tl)}newOutliner(e,s,i,r,o,a=0){return new Pp(e,s,i,r,o,a)}getNewOutline(e,s){const[i,r,o,a]=l(this,tl),[c,h,u,f]=l(this,Zc),p=o*u,g=a*f,v=i*u+c,_=r*f+h,x=this.newOutliner({x:l(this,pi)[0]*p+v,y:l(this,pi)[1]*g+_},l(this,Zc),l(this,Cd),e,l(this,xd),s??l(this,Ar));for(let S=2;S<l(this,pi).length;S+=2)x.add({x:l(this,pi)[S]*p+v,y:l(this,pi)[S+1]*g+_});return x.getOutlines()}}Zc=new WeakMap,tl=new WeakMap,Ar=new WeakMap,xd=new WeakMap,pi=new WeakMap,Cd=new WeakMap,$e=new WeakMap,Xp=new WeakSet,FE=function(e){const s=l(this,$e);let i=s[4],r=s[5];const o=[i,r,i,r];let a=i,c=r;const h=e?Math.max:Math.min;for(let f=6,p=s.length;f<p;f+=6){const g=s[f+4],v=s[f+5];if(isNaN(s[f]))pt.pointBoundingBox(g,v,o),c<v?(a=g,c=v):c===v&&(a=h(a,g));else{const _=[1/0,1/0,-1/0,-1/0];pt.bezierBoundingBox(i,r,...s.slice(f,f+6),_),pt.rectBoundingBox(..._,o),c<_[3]?(a=_[2],c=_[3]):c===_[3]&&(a=h(a,_[2]))}i=g,r=v}const u=l(this,tl);u[0]=o[0]-l(this,Ar),u[1]=o[1]-l(this,Ar),u[2]=o[2]-o[0]+2*l(this,Ar),u[3]=o[3]-o[1]+2*l(this,Ar),this.lastPoint=[a,c]};var Td,Pd,So,Zi,Gs,$E,ep,BE,HE,Tb;class Cb{constructor(t,e=0,s=0,i=!0){w(this,Gs);w(this,Td);w(this,Pd);w(this,So,[]);w(this,Zi,[]);const r=[1/0,1/0,-1/0,-1/0],o=10**-4;for(const{x:g,y:v,width:_,height:x}of t){const S=Math.floor((g-e)/o)*o,C=Math.ceil((g+_+e)/o)*o,T=Math.floor((v-e)/o)*o,R=Math.ceil((v+x+e)/o)*o,I=[S,T,R,!0],F=[C,T,R,!1];l(this,So).push(I,F),pt.rectBoundingBox(S,T,C,R,r)}const a=r[2]-r[0]+2*s,c=r[3]-r[1]+2*s,h=r[0]-s,u=r[1]-s,f=l(this,So).at(i?-1:-2),p=[f[0],f[2]];for(const g of l(this,So)){const[v,_,x]=g;g[0]=(v-h)/a,g[1]=(_-u)/c,g[2]=(x-u)/c}b(this,Td,new Float32Array([h,u,a,c])),b(this,Pd,p)}getOutlines(){l(this,So).sort((e,s)=>e[0]-s[0]||e[1]-s[1]||e[2]-s[2]);const t=[];for(const e of l(this,So))e[3]?(t.push(...A(this,Gs,Tb).call(this,e)),A(this,Gs,BE).call(this,e)):(A(this,Gs,HE).call(this,e),t.push(...A(this,Gs,Tb).call(this,e)));return A(this,Gs,$E).call(this,t)}}Td=new WeakMap,Pd=new WeakMap,So=new WeakMap,Zi=new WeakMap,Gs=new WeakSet,$E=function(t){const e=[],s=new Set;for(const o of t){const[a,c,h]=o;e.push([a,c,o],[a,h,o])}e.sort((o,a)=>o[1]-a[1]||o[0]-a[0]);for(let o=0,a=e.length;o<a;o+=2){const c=e[o][2],h=e[o+1][2];c.push(h),h.push(c),s.add(c),s.add(h)}const i=[];let r;for(;s.size>0;){const o=s.values().next().value;let[a,c,h,u,f]=o;s.delete(o);let p=a,g=c;for(r=[a,h],i.push(r);;){let v;if(s.has(u))v=u;else if(s.has(f))v=f;else break;s.delete(v),[a,c,h,u,f]=v,p!==a&&(r.push(p,g,a,g===c?c:h),p=a),g=g===c?h:c}r.push(p,g)}return new Uk(i,l(this,Td),l(this,Pd))},ep=function(t){const e=l(this,Zi);let s=0,i=e.length-1;for(;s<=i;){const r=s+i>>1,o=e[r][0];if(o===t)return r;o<t?s=r+1:i=r-1}return i+1},BE=function([,t,e]){const s=A(this,Gs,ep).call(this,t);l(this,Zi).splice(s,0,[t,e])},HE=function([,t,e]){const s=A(this,Gs,ep).call(this,t);for(let i=s;i<l(this,Zi).length;i++){const[r,o]=l(this,Zi)[i];if(r!==t)break;if(r===t&&o===e){l(this,Zi).splice(i,1);return}}for(let i=s-1;i>=0;i--){const[r,o]=l(this,Zi)[i];if(r!==t)break;if(r===t&&o===e){l(this,Zi).splice(i,1);return}}},Tb=function(t){const[e,s,i]=t,r=[[e,s,i]],o=A(this,Gs,ep).call(this,i);for(let a=0;a<o;a++){const[c,h]=l(this,Zi)[a];for(let u=0,f=r.length;u<f;u++){const[,p,g]=r[u];if(!(h<=p||g<=c)){if(p>=c){if(g>h)r[u][1]=h;else{if(f===1)return[];r.splice(u,1),u--,f--}continue}r[u][2]=c,g>h&&r.push([e,h,g])}}}return r};var Rd,th;class Uk extends ct{constructor(e,s,i){super();w(this,Rd);w(this,th);b(this,th,e),b(this,Rd,s),this.lastPoint=i}toSVGPath(){const e=[];for(const s of l(this,th)){let[i,r]=s;e.push(`M${i} ${r}`);for(let o=2;o<s.length;o+=2){const a=s[o],c=s[o+1];a===i?(e.push(`V${c}`),r=c):c===r&&(e.push(`H${a}`),i=a)}e.push("Z")}return e.join(" ")}serialize([e,s,i,r],o){const a=[],c=i-e,h=r-s;for(const u of l(this,th)){const f=new Array(u.length);for(let p=0;p<u.length;p+=2)f[p]=e+u[p]*c,f[p+1]=r-u[p+1]*h;a.push(f)}return a}get box(){return l(this,Rd)}get classNamesForOutlining(){return["highlightOutline"]}}Rd=new WeakMap,th=new WeakMap;class Pb extends Pp{newFreeDrawOutline(t,e,s,i,r,o){return new zk(t,e,s,i,r,o)}}class zk extends NE{newOutliner(t,e,s,i,r,o=0){return new Pb(t,e,s,i,r,o)}}var tn,el,eh,Je,kd,sh,Id,Ld,xo,en,ih,Md,he,Rb,kb,Ib,ca,jE,Gr;const Ks=class Ks{constructor({editor:t=null,uiManager:e=null}){w(this,he);w(this,tn,null);w(this,el,null);w(this,eh);w(this,Je,null);w(this,kd,!1);w(this,sh,!1);w(this,Id,null);w(this,Ld);w(this,xo,null);w(this,en,null);w(this,ih);var s;t?(b(this,sh,!1),b(this,ih,zt.HIGHLIGHT_COLOR),b(this,Id,t)):(b(this,sh,!0),b(this,ih,zt.HIGHLIGHT_DEFAULT_COLOR)),b(this,en,(t==null?void 0:t._uiManager)||e),b(this,Ld,l(this,en)._eventBus),b(this,eh,(t==null?void 0:t.color)||((s=l(this,en))==null?void 0:s.highlightColors.values().next().value)||"#FFFF98"),l(Ks,Md)||b(Ks,Md,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return jt(this,"_keyboardManager",new Kd([[["Escape","mac+Escape"],Ks.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],Ks.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],Ks.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],Ks.prototype._moveToPrevious],[["Home","mac+Home"],Ks.prototype._moveToBeginning],[["End","mac+End"],Ks.prototype._moveToEnd]]))}renderButton(){const t=b(this,tn,document.createElement("button"));t.className="colorPicker",t.tabIndex="0",t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),t.setAttribute("aria-haspopup",!0);const e=l(this,en)._signal;t.addEventListener("click",A(this,he,ca).bind(this),{signal:e}),t.addEventListener("keydown",A(this,he,Ib).bind(this),{signal:e});const s=b(this,el,document.createElement("span"));return s.className="swatch",s.setAttribute("aria-hidden",!0),s.style.backgroundColor=l(this,eh),t.append(s),t}renderMainDropdown(){const t=b(this,Je,A(this,he,Rb).call(this));return t.setAttribute("aria-orientation","horizontal"),t.setAttribute("aria-labelledby","highlightColorPickerLabel"),t}_colorSelectFromKeyboard(t){if(t.target===l(this,tn)){A(this,he,ca).call(this,t);return}const e=t.target.getAttribute("data-color");e&&A(this,he,kb).call(this,e,t)}_moveToNext(t){var e,s;if(!l(this,he,Gr)){A(this,he,ca).call(this,t);return}if(t.target===l(this,tn)){(e=l(this,Je).firstChild)==null||e.focus();return}(s=t.target.nextSibling)==null||s.focus()}_moveToPrevious(t){var e,s;if(t.target===((e=l(this,Je))==null?void 0:e.firstChild)||t.target===l(this,tn)){l(this,he,Gr)&&this._hideDropdownFromKeyboard();return}l(this,he,Gr)||A(this,he,ca).call(this,t),(s=t.target.previousSibling)==null||s.focus()}_moveToBeginning(t){var e;if(!l(this,he,Gr)){A(this,he,ca).call(this,t);return}(e=l(this,Je).firstChild)==null||e.focus()}_moveToEnd(t){var e;if(!l(this,he,Gr)){A(this,he,ca).call(this,t);return}(e=l(this,Je).lastChild)==null||e.focus()}hideDropdown(){var t,e;(t=l(this,Je))==null||t.classList.add("hidden"),(e=l(this,xo))==null||e.abort(),b(this,xo,null)}_hideDropdownFromKeyboard(){var t;if(!l(this,sh)){if(!l(this,he,Gr)){(t=l(this,Id))==null||t.unselect();return}this.hideDropdown(),l(this,tn).focus({preventScroll:!0,focusVisible:l(this,kd)})}}updateColor(t){if(l(this,el)&&(l(this,el).style.backgroundColor=t),!l(this,Je))return;const e=l(this,en).highlightColors.values();for(const s of l(this,Je).children)s.setAttribute("aria-selected",e.next().value===t)}destroy(){var t,e;(t=l(this,tn))==null||t.remove(),b(this,tn,null),b(this,el,null),(e=l(this,Je))==null||e.remove(),b(this,Je,null)}};tn=new WeakMap,el=new WeakMap,eh=new WeakMap,Je=new WeakMap,kd=new WeakMap,sh=new WeakMap,Id=new WeakMap,Ld=new WeakMap,xo=new WeakMap,en=new WeakMap,ih=new WeakMap,Md=new WeakMap,he=new WeakSet,Rb=function(){const t=document.createElement("div"),e=l(this,en)._signal;t.addEventListener("contextmenu",dn,{signal:e}),t.className="dropdown",t.role="listbox",t.setAttribute("aria-multiselectable",!1),t.setAttribute("aria-orientation","vertical"),t.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[s,i]of l(this,en).highlightColors){const r=document.createElement("button");r.tabIndex="0",r.role="option",r.setAttribute("data-color",i),r.title=s,r.setAttribute("data-l10n-id",l(Ks,Md)[s]);const o=document.createElement("span");r.append(o),o.className="swatch",o.style.backgroundColor=i,r.setAttribute("aria-selected",i===l(this,eh)),r.addEventListener("click",A(this,he,kb).bind(this,i),{signal:e}),t.append(r)}return t.addEventListener("keydown",A(this,he,Ib).bind(this),{signal:e}),t},kb=function(t,e){e.stopPropagation(),l(this,Ld).dispatch("switchannotationeditorparams",{source:this,type:l(this,ih),value:t})},Ib=function(t){Ks._keyboardManager.exec(this,t)},ca=function(t){if(l(this,he,Gr)){this.hideDropdown();return}if(b(this,kd,t.detail===0),l(this,xo)||(b(this,xo,new AbortController),window.addEventListener("pointerdown",A(this,he,jE).bind(this),{signal:l(this,en).combinedSignal(l(this,xo))})),l(this,Je)){l(this,Je).classList.remove("hidden");return}const e=b(this,Je,A(this,he,Rb).call(this));l(this,tn).append(e)},jE=function(t){var e;(e=l(this,Je))!=null&&e.contains(t.target)||this.hideDropdown()},Gr=function(){return l(this,Je)&&!l(this,Je).classList.contains("hidden")},w(Ks,Md,null);let Rp=Ks;var nh,Dd,Er,sl,rh,Js,Od,Nd,il,Ni,gi,fs,oh,Sr,xs,ah,Fi,Fd,Lt,Lb,sp,VE,UE,zE,Mb,ha,Hi,Jl,WE,ip,Kh,qE,GE,XE,KE,YE;const Zt=class Zt extends ye{constructor(e){super({...e,name:"highlightEditor"});w(this,Lt);w(this,nh,null);w(this,Dd,0);w(this,Er);w(this,sl,null);w(this,rh,null);w(this,Js,null);w(this,Od,null);w(this,Nd,0);w(this,il,null);w(this,Ni,null);w(this,gi,null);w(this,fs,!1);w(this,oh,null);w(this,Sr);w(this,xs,null);w(this,ah,"");w(this,Fi);w(this,Fd,"");this.color=e.color||Zt._defaultColor,b(this,Fi,e.thickness||Zt._defaultThickness),b(this,Sr,e.opacity||Zt._defaultOpacity),b(this,Er,e.boxes||null),b(this,Fd,e.methodOfCreation||""),b(this,ah,e.text||""),this._isDraggable=!1,this.defaultL10nId="pdfjs-editor-highlight-editor",e.highlightId>-1?(b(this,fs,!0),A(this,Lt,sp).call(this,e),A(this,Lt,ha).call(this)):l(this,Er)&&(b(this,nh,e.anchorNode),b(this,Dd,e.anchorOffset),b(this,Od,e.focusNode),b(this,Nd,e.focusOffset),A(this,Lt,Lb).call(this),A(this,Lt,ha).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const e=Zt.prototype;return jt(this,"_keyboardManager",new Kd([[["ArrowLeft","mac+ArrowLeft"],e._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],e._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],e._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],e._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:l(this,fs)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:l(this,Fi),methodOfCreation:l(this,Fd)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(e){return{numberOfColors:e.get("color").size}}static initialize(e,s){var i;ye.initialize(e,s),Zt._defaultColor||(Zt._defaultColor=((i=s.highlightColors)==null?void 0:i.values().next().value)||"#fff066")}static updateDefaultParams(e,s){switch(e){case zt.HIGHLIGHT_DEFAULT_COLOR:Zt._defaultColor=s;break;case zt.HIGHLIGHT_THICKNESS:Zt._defaultThickness=s;break}}translateInPage(e,s){}get toolbarPosition(){return l(this,oh)}updateParams(e,s){switch(e){case zt.HIGHLIGHT_COLOR:A(this,Lt,VE).call(this,s);break;case zt.HIGHLIGHT_THICKNESS:A(this,Lt,UE).call(this,s);break}}static get defaultPropertiesToUpdate(){return[[zt.HIGHLIGHT_DEFAULT_COLOR,Zt._defaultColor],[zt.HIGHLIGHT_THICKNESS,Zt._defaultThickness]]}get propertiesToUpdate(){return[[zt.HIGHLIGHT_COLOR,this.color||Zt._defaultColor],[zt.HIGHLIGHT_THICKNESS,l(this,Fi)||Zt._defaultThickness],[zt.HIGHLIGHT_FREE,l(this,fs)]]}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.highlightColors&&(b(this,rh,new Rp({editor:this})),e.addColorPicker(l(this,rh))),e):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(A(this,Lt,Kh).call(this))}getBaseTranslation(){return[0,0]}getRect(e,s){return super.getRect(e,s,A(this,Lt,Kh).call(this))}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),e&&this.div.focus()}remove(){A(this,Lt,Mb).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(A(this,Lt,ha).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var i;let s=!1;this.parent&&!e?A(this,Lt,Mb).call(this):e&&(A(this,Lt,ha).call(this,e),s=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(e),this.show(this._isVisible),s&&this.select()}rotate(e){var r,o,a;const{drawLayer:s}=this.parent;let i;l(this,fs)?(e=(e-this.rotation+360)%360,i=A(r=Zt,Hi,Jl).call(r,l(this,Ni).box,e)):i=A(o=Zt,Hi,Jl).call(o,[this.x,this.y,this.width,this.height],e),s.updateProperties(l(this,gi),{bbox:i,root:{"data-main-rotation":e}}),s.updateProperties(l(this,xs),{bbox:A(a=Zt,Hi,Jl).call(a,l(this,Js).box,e),root:{"data-main-rotation":e}})}render(){if(this.div)return this.div;const e=super.render();l(this,ah)&&(e.setAttribute("aria-label",l(this,ah)),e.setAttribute("role","mark")),l(this,fs)?e.classList.add("free"):this.div.addEventListener("keydown",A(this,Lt,WE).bind(this),{signal:this._uiManager._signal});const s=b(this,il,document.createElement("div"));e.append(s),s.setAttribute("aria-hidden","true"),s.className="internal",s.style.clipPath=l(this,sl);const[i,r]=this.parentDimensions;return this.setDims(this.width*i,this.height*r),S_(this,l(this,il),["pointerover","pointerleave"]),this.enableEditing(),e}pointerover(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(l(this,xs),{rootClass:{hovered:!0}})}pointerleave(){var e;this.isSelected||(e=this.parent)==null||e.drawLayer.updateProperties(l(this,xs),{rootClass:{hovered:!1}})}_moveCaret(e){switch(this.parent.unselect(this),e){case 0:case 2:A(this,Lt,ip).call(this,!0);break;case 1:case 3:A(this,Lt,ip).call(this,!1);break}}select(){var e;super.select(),l(this,xs)&&((e=this.parent)==null||e.drawLayer.updateProperties(l(this,xs),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var e;super.unselect(),l(this,xs)&&((e=this.parent)==null||e.drawLayer.updateProperties(l(this,xs),{rootClass:{selected:!1}}),l(this,fs)||A(this,Lt,ip).call(this,!1))}get _mustFixPosition(){return!l(this,fs)}show(e=this._isVisible){super.show(e),this.parent&&(this.parent.drawLayer.updateProperties(l(this,gi),{rootClass:{hidden:!e}}),this.parent.drawLayer.updateProperties(l(this,xs),{rootClass:{hidden:!e}}))}static startHighlighting(e,s,{target:i,x:r,y:o}){const{x:a,y:c,width:h,height:u}=i.getBoundingClientRect(),f=new AbortController,p=e.combinedSignal(f),g=v=>{f.abort(),A(this,Hi,KE).call(this,e,v)};window.addEventListener("blur",g,{signal:p}),window.addEventListener("pointerup",g,{signal:p}),window.addEventListener("pointerdown",Ue,{capture:!0,passive:!1,signal:p}),window.addEventListener("contextmenu",dn,{signal:p}),i.addEventListener("pointermove",A(this,Hi,XE).bind(this,e),{signal:p}),this._freeHighlight=new Pb({x:r,y:o},[a,c,h,u],e.scale,this._defaultThickness/2,s,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=e.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(e,s,i){var _,x,S,C;let r=null;if(e instanceof EE){const{data:{quadPoints:T,rect:R,rotation:I,id:F,color:N,opacity:H,popupRef:V},parent:{page:{pageNumber:Y}}}=e;r=e={annotationType:Tt.HIGHLIGHT,color:Array.from(N),opacity:H,quadPoints:T,boxes:null,pageIndex:Y-1,rect:R.slice(0),rotation:I,id:F,deleted:!1,popupRef:V}}else if(e instanceof P_){const{data:{inkLists:T,rect:R,rotation:I,id:F,color:N,borderStyle:{rawWidth:H},popupRef:V},parent:{page:{pageNumber:Y}}}=e;r=e={annotationType:Tt.HIGHLIGHT,color:Array.from(N),thickness:H,inkLists:T,boxes:null,pageIndex:Y-1,rect:R.slice(0),rotation:I,id:F,deleted:!1,popupRef:V}}const{color:o,quadPoints:a,inkLists:c,opacity:h}=e,u=await super.deserialize(e,s,i);u.color=pt.makeHexColor(...o),b(u,Sr,h||1),c&&b(u,Fi,e.thickness),u.annotationElementId=e.id||null,u._initialData=r;const[f,p]=u.pageDimensions,[g,v]=u.pageTranslation;if(a){const T=b(u,Er,[]);for(let R=0;R<a.length;R+=8)T.push({x:(a[R]-g)/f,y:1-(a[R+1]-v)/p,width:(a[R+2]-a[R])/f,height:(a[R+1]-a[R+5])/p});A(_=u,Lt,Lb).call(_),A(x=u,Lt,ha).call(x),u.rotate(u.rotation)}else if(c){b(u,fs,!0);const T=c[0],R={x:T[0]-g,y:p-(T[1]-v)},I=new Pb(R,[0,0,f,p],1,l(u,Fi)/2,!0,.001);for(let H=0,V=T.length;H<V;H+=2)R.x=T[H]-g,R.y=p-(T[H+1]-v),I.add(R);const{id:F,clipPathId:N}=s.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:u.color,"fill-opacity":u._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:I.toSVGPath()}},!0,!0);A(S=u,Lt,sp).call(S,{highlightOutlines:I.getOutlines(),highlightId:F,clipPathId:N}),A(C=u,Lt,ha).call(C),u.rotate(u.parentRotation)}return u}serialize(e=!1){if(this.isEmpty()||e)return null;if(this.deleted)return this.serializeDeleted();const s=this.getRect(0,0),i=ye._colorManager.convert(this.color),r={annotationType:Tt.HIGHLIGHT,color:i,opacity:l(this,Sr),thickness:l(this,Fi),quadPoints:A(this,Lt,qE).call(this),outlines:A(this,Lt,GE).call(this,s),pageIndex:this.pageIndex,rect:s,rotation:A(this,Lt,Kh).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!A(this,Lt,YE).call(this,r)?null:(r.id=this.annotationElementId,r)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};nh=new WeakMap,Dd=new WeakMap,Er=new WeakMap,sl=new WeakMap,rh=new WeakMap,Js=new WeakMap,Od=new WeakMap,Nd=new WeakMap,il=new WeakMap,Ni=new WeakMap,gi=new WeakMap,fs=new WeakMap,oh=new WeakMap,Sr=new WeakMap,xs=new WeakMap,ah=new WeakMap,Fi=new WeakMap,Fd=new WeakMap,Lt=new WeakSet,Lb=function(){const e=new Cb(l(this,Er),.001);b(this,Ni,e.getOutlines()),[this.x,this.y,this.width,this.height]=l(this,Ni).box;const s=new Cb(l(this,Er),.0025,.001,this._uiManager.direction==="ltr");b(this,Js,s.getOutlines());const{lastPoint:i}=l(this,Js);b(this,oh,[(i[0]-this.x)/this.width,(i[1]-this.y)/this.height])},sp=function({highlightOutlines:e,highlightId:s,clipPathId:i}){var f,p;if(b(this,Ni,e),b(this,Js,e.getNewOutline(l(this,Fi)/2+1.5,.0025)),s>=0)b(this,gi,s),b(this,sl,i),this.parent.drawLayer.finalizeDraw(s,{bbox:e.box,path:{d:e.toSVGPath()}}),b(this,xs,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:l(this,Js).box,path:{d:l(this,Js).toSVGPath()}},!0));else if(this.parent){const g=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(l(this,gi),{bbox:A(f=Zt,Hi,Jl).call(f,l(this,Ni).box,(g-this.rotation+360)%360),path:{d:e.toSVGPath()}}),this.parent.drawLayer.updateProperties(l(this,xs),{bbox:A(p=Zt,Hi,Jl).call(p,l(this,Js).box,g),path:{d:l(this,Js).toSVGPath()}})}const[o,a,c,h]=e.box;switch(this.rotation){case 0:this.x=o,this.y=a,this.width=c,this.height=h;break;case 90:{const[g,v]=this.parentDimensions;this.x=a,this.y=1-o,this.width=c*v/g,this.height=h*g/v;break}case 180:this.x=1-o,this.y=1-a,this.width=c,this.height=h;break;case 270:{const[g,v]=this.parentDimensions;this.x=1-a,this.y=o,this.width=c*v/g,this.height=h*g/v;break}}const{lastPoint:u}=l(this,Js);b(this,oh,[(u[0]-o)/c,(u[1]-a)/h])},VE=function(e){const s=(o,a)=>{var c,h;this.color=o,b(this,Sr,a),(c=this.parent)==null||c.drawLayer.updateProperties(l(this,gi),{root:{fill:o,"fill-opacity":a}}),(h=l(this,rh))==null||h.updateColor(o)},i=this.color,r=l(this,Sr);this.addCommands({cmd:s.bind(this,e,Zt._defaultOpacity),undo:s.bind(this,i,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:zt.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(e)},!0)},UE=function(e){const s=l(this,Fi),i=r=>{b(this,Fi,r),A(this,Lt,zE).call(this,r)};this.addCommands({cmd:i.bind(this,e),undo:i.bind(this,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:zt.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:e},!0)},zE=function(e){if(!l(this,fs))return;A(this,Lt,sp).call(this,{highlightOutlines:l(this,Ni).getNewOutline(e/2)}),this.fixAndSetPosition();const[s,i]=this.parentDimensions;this.setDims(this.width*s,this.height*i)},Mb=function(){l(this,gi)===null||!this.parent||(this.parent.drawLayer.remove(l(this,gi)),b(this,gi,null),this.parent.drawLayer.remove(l(this,xs)),b(this,xs,null))},ha=function(e=this.parent){l(this,gi)===null&&({id:Ns(this,gi)._,clipPathId:Ns(this,sl)._}=e.drawLayer.draw({bbox:l(this,Ni).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":l(this,Sr)},rootClass:{highlight:!0,free:l(this,fs)},path:{d:l(this,Ni).toSVGPath()}},!1,!0),b(this,xs,e.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:l(this,fs)},bbox:l(this,Js).box,path:{d:l(this,Js).toSVGPath()}},l(this,fs))),l(this,il)&&(l(this,il).style.clipPath=l(this,sl)))},Hi=new WeakSet,Jl=function([e,s,i,r],o){switch(o){case 90:return[1-s-r,e,r,i];case 180:return[1-e-i,1-s-r,i,r];case 270:return[s,1-e-i,r,i]}return[e,s,i,r]},WE=function(e){Zt._keyboardManager.exec(this,e)},ip=function(e){if(!l(this,nh))return;const s=window.getSelection();e?s.setPosition(l(this,nh),l(this,Dd)):s.setPosition(l(this,Od),l(this,Nd))},Kh=function(){return l(this,fs)?this.rotation:0},qE=function(){if(l(this,fs))return null;const[e,s]=this.pageDimensions,[i,r]=this.pageTranslation,o=l(this,Er),a=new Float32Array(o.length*8);let c=0;for(const{x:h,y:u,width:f,height:p}of o){const g=h*e+i,v=(1-u)*s+r;a[c]=a[c+4]=g,a[c+1]=a[c+3]=v,a[c+2]=a[c+6]=g+f*e,a[c+5]=a[c+7]=v-p*s,c+=8}return a},GE=function(e){return l(this,Ni).serialize(e,A(this,Lt,Kh).call(this))},XE=function(e,s){this._freeHighlight.add(s)&&e.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},KE=function(e,s){this._freeHighlight.isEmpty()?e.drawLayer.remove(this._freeHighlightId):e.createAndAddNewEditor(s,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},YE=function(e){const{color:s}=this._initialData;return e.color.some((i,r)=>i!==s[r])},w(Zt,Hi),J(Zt,"_defaultColor",null),J(Zt,"_defaultOpacity",1),J(Zt,"_defaultThickness",12),J(Zt,"_type","highlight"),J(Zt,"_editorType",Tt.HIGHLIGHT),J(Zt,"_freeHighlightId",-1),J(Zt,"_freeHighlight",null),J(Zt,"_freeHighlightClipId","");let kp=Zt;var nl;class QE{constructor(){w(this,nl,Object.create(null))}updateProperty(t,e){this[t]=e,this.updateSVGProperty(t,e)}updateProperties(t){if(t)for(const[e,s]of Object.entries(t))e.startsWith("_")||this.updateProperty(e,s)}updateSVGProperty(t,e){l(this,nl)[t]=e}toSVGProperties(){const t=l(this,nl);return b(this,nl,Object.create(null)),{root:t}}reset(){b(this,nl,Object.create(null))}updateAll(t=this){this.updateProperties(t)}clone(){ue("Not implemented")}}nl=new WeakMap;var mi,lh,ns,rl,ol,Co,To,Po,al,Gt,Db,Ob,Nb,Yh,JE,np,Qh,Zl;const ft=class ft extends ye{constructor(e){super(e);w(this,Gt);w(this,mi,null);w(this,lh);J(this,"_drawId",null);b(this,lh,e.mustBeCommitted||!1),this._addOutlines(e)}_addOutlines(e){e.drawOutlines&&(A(this,Gt,Db).call(this,e),A(this,Gt,Yh).call(this))}static _mergeSVGProperties(e,s){const i=new Set(Object.keys(e));for(const[r,o]of Object.entries(s))i.has(r)?Object.assign(e[r],o):e[r]=o;return e}static getDefaultDrawingOptions(e){ue("Not implemented")}static get typesMap(){ue("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(e,s){const i=this.typesMap.get(e);i&&this._defaultDrawingOptions.updateProperty(i,s),this._currentParent&&(l(ft,ns).updateProperty(i,s),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(e,s){const i=this.constructor.typesMap.get(e);i&&this._updateProperty(e,i,s)}static get defaultPropertiesToUpdate(){const e=[],s=this._defaultDrawingOptions;for(const[i,r]of this.typesMap)e.push([i,s[r]]);return e}get propertiesToUpdate(){const e=[],{_drawingOptions:s}=this;for(const[i,r]of this.constructor.typesMap)e.push([i,s[r]]);return e}_updateProperty(e,s,i){const r=this._drawingOptions,o=r[s],a=c=>{var u;r.updateProperty(s,c);const h=l(this,mi).updateProperty(s,c);h&&A(this,Gt,Qh).call(this,h),(u=this.parent)==null||u.drawLayer.updateProperties(this._drawId,r.toSVGProperties())};this.addCommands({cmd:a.bind(this,i),undo:a.bind(this,o),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:e,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,ft._mergeSVGProperties(l(this,mi).getPathResizingSVGProperties(A(this,Gt,np).call(this)),{bbox:A(this,Gt,Zl).call(this)}))}_onResized(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,ft._mergeSVGProperties(l(this,mi).getPathResizedSVGProperties(A(this,Gt,np).call(this)),{bbox:A(this,Gt,Zl).call(this)}))}_onTranslating(e,s){var i;(i=this.parent)==null||i.drawLayer.updateProperties(this._drawId,{bbox:A(this,Gt,Zl).call(this)})}_onTranslated(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,ft._mergeSVGProperties(l(this,mi).getPathTranslatedSVGProperties(A(this,Gt,np).call(this),this.parentDimensions),{bbox:A(this,Gt,Zl).call(this)}))}_onStartDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var e;(e=this.parent)==null||e.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(e){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,l(this,lh)&&(b(this,lh,!1),this.commit(),this.parent.setSelected(this),e&&this.isOnScreen&&this.div.focus())}remove(){A(this,Gt,Nb).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(A(this,Gt,Yh).call(this),A(this,Gt,Qh).call(this,l(this,mi).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(e){var i;let s=!1;this.parent&&!e?(this._uiManager.removeShouldRescale(this),A(this,Gt,Nb).call(this)):e&&(this._uiManager.addShouldRescale(this),A(this,Gt,Yh).call(this,e),s=!this.parent&&((i=this.div)==null?void 0:i.classList.contains("selectedEditor"))),super.setParent(e),s&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,ft._mergeSVGProperties({bbox:A(this,Gt,Zl).call(this)},l(this,mi).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&A(this,Gt,Qh).call(this,l(this,mi).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;let e,s;this._isCopy&&(e=this.x,s=this.y);const i=super.render();i.classList.add("draw");const r=document.createElement("div");i.append(r),r.setAttribute("aria-hidden","true"),r.className="internal";const[o,a]=this.parentDimensions;return this.setDims(this.width*o,this.height*a),this._uiManager.addShouldRescale(this),this.disableEditing(),this._isCopy&&this._moveAfterPaste(e,s),i}static createDrawerInstance(e,s,i,r,o){ue("Not implemented")}static startDrawing(e,s,i,r){var x;const{target:o,offsetX:a,offsetY:c,pointerId:h,pointerType:u}=r;if(l(ft,To)&&l(ft,To)!==u)return;const{viewport:{rotation:f}}=e,{width:p,height:g}=o.getBoundingClientRect(),v=b(ft,rl,new AbortController),_=e.combinedSignal(v);if(l(ft,Co)||b(ft,Co,h),l(ft,To)??b(ft,To,u),window.addEventListener("pointerup",S=>{var C;l(ft,Co)===S.pointerId?this._endDraw(S):(C=l(ft,Po))==null||C.delete(S.pointerId)},{signal:_}),window.addEventListener("pointercancel",S=>{var C;l(ft,Co)===S.pointerId?this._currentParent.endDrawingSession():(C=l(ft,Po))==null||C.delete(S.pointerId)},{signal:_}),window.addEventListener("pointerdown",S=>{l(ft,To)===S.pointerType&&((l(ft,Po)||b(ft,Po,new Set)).add(S.pointerId),l(ft,ns).isCancellable()&&(l(ft,ns).removeLastElement(),l(ft,ns).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:_}),window.addEventListener("contextmenu",dn,{signal:_}),o.addEventListener("pointermove",this._drawMove.bind(this),{signal:_}),o.addEventListener("touchmove",S=>{S.timeStamp===l(ft,al)&&Ue(S)},{signal:_}),e.toggleDrawing(),(x=s._editorUndoBar)==null||x.hide(),l(ft,ns)){e.drawLayer.updateProperties(this._currentDrawId,l(ft,ns).startNew(a,c,p,g,f));return}s.updateUIForDefaultProperties(this),b(ft,ns,this.createDrawerInstance(a,c,p,g,f)),b(ft,ol,this.getDefaultDrawingOptions()),this._currentParent=e,{id:this._currentDrawId}=e.drawLayer.draw(this._mergeSVGProperties(l(ft,ol).toSVGProperties(),l(ft,ns).defaultSVGProperties),!0,!1)}static _drawMove(e){var o;if(b(ft,al,-1),!l(ft,ns))return;const{offsetX:s,offsetY:i,pointerId:r}=e;if(l(ft,Co)===r){if(((o=l(ft,Po))==null?void 0:o.size)>=1){this._endDraw(e);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,l(ft,ns).add(s,i)),b(ft,al,e.timeStamp),Ue(e)}}static _cleanup(e){e&&(this._currentDrawId=-1,this._currentParent=null,b(ft,ns,null),b(ft,ol,null),b(ft,To,null),b(ft,al,NaN)),l(ft,rl)&&(l(ft,rl).abort(),b(ft,rl,null),b(ft,Co,NaN),b(ft,Po,null))}static _endDraw(e){const s=this._currentParent;if(s){if(s.toggleDrawing(!0),this._cleanup(!1),(e==null?void 0:e.target)===s.div&&s.drawLayer.updateProperties(this._currentDrawId,l(ft,ns).end(e.offsetX,e.offsetY)),this.supportMultipleDrawings){const i=l(ft,ns),r=this._currentDrawId,o=i.getLastElement();s.addCommands({cmd:()=>{s.drawLayer.updateProperties(r,i.setLastElement(o))},undo:()=>{s.drawLayer.updateProperties(r,i.removeLastElement())},mustExec:!1,type:zt.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(e){const s=this._currentParent;if(!s)return null;if(s.toggleDrawing(!0),s.cleanUndoStack(zt.DRAW_STEP),!l(ft,ns).isEmpty()){const{pageDimensions:[i,r],scale:o}=s,a=s.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:l(ft,ns).getOutlines(i*o,r*o,o,this._INNER_MARGIN),drawingOptions:l(ft,ol),mustBeCommitted:!e});return this._cleanup(!0),a}return s.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(e){}static deserializeDraw(e,s,i,r,o,a){ue("Not implemented")}static async deserialize(e,s,i){var f,p;const{rawDims:{pageWidth:r,pageHeight:o,pageX:a,pageY:c}}=s.viewport,h=this.deserializeDraw(a,c,r,o,this._INNER_MARGIN,e),u=await super.deserialize(e,s,i);return u.createDrawingOptions(e),A(f=u,Gt,Db).call(f,{drawOutlines:h}),A(p=u,Gt,Yh).call(p),u.onScaleChanging(),u.rotate(),u}serializeDraw(e){const[s,i]=this.pageTranslation,[r,o]=this.pageDimensions;return l(this,mi).serialize([s,i,r,o],e)}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};mi=new WeakMap,lh=new WeakMap,ns=new WeakMap,rl=new WeakMap,ol=new WeakMap,Co=new WeakMap,To=new WeakMap,Po=new WeakMap,al=new WeakMap,Gt=new WeakSet,Db=function({drawOutlines:e,drawId:s,drawingOptions:i}){b(this,mi,e),this._drawingOptions||(this._drawingOptions=i),s>=0?(this._drawId=s,this.parent.drawLayer.finalizeDraw(s,e.defaultProperties)):this._drawId=A(this,Gt,Ob).call(this,e,this.parent),A(this,Gt,Qh).call(this,e.box)},Ob=function(e,s){const{id:i}=s.drawLayer.draw(ft._mergeSVGProperties(this._drawingOptions.toSVGProperties(),e.defaultSVGProperties),!1,!1);return i},Nb=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Yh=function(e=this.parent){if(!(this._drawId!==null&&this.parent===e)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,e.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=A(this,Gt,Ob).call(this,l(this,mi),e)}},JE=function([e,s,i,r]){const{parentDimensions:[o,a],rotation:c}=this;switch(c){case 90:return[s,1-e,i*(a/o),r*(o/a)];case 180:return[1-e,1-s,i,r];case 270:return[1-s,e,i*(a/o),r*(o/a)];default:return[e,s,i,r]}},np=function(){const{x:e,y:s,width:i,height:r,parentDimensions:[o,a],rotation:c}=this;switch(c){case 90:return[1-s,e,i*(o/a),r*(a/o)];case 180:return[1-e,1-s,i,r];case 270:return[s,1-e,i*(o/a),r*(a/o)];default:return[e,s,i,r]}},Qh=function(e){if([this.x,this.y,this.width,this.height]=A(this,Gt,JE).call(this,e),this.div){this.fixAndSetPosition();const[s,i]=this.parentDimensions;this.setDims(this.width*s,this.height*i)}this._onResized()},Zl=function(){const{x:e,y:s,width:i,height:r,rotation:o,parentRotation:a,parentDimensions:[c,h]}=this;switch((o*4+a)/90){case 1:return[1-s-r,e,r,i];case 2:return[1-e-i,1-s-r,i,r];case 3:return[s,1-e-i,r,i];case 4:return[e,s-i*(c/h),r*(h/c),i*(c/h)];case 5:return[1-s,e,i*(c/h),r*(h/c)];case 6:return[1-e-r*(h/c),1-s,r*(h/c),i*(c/h)];case 7:return[s-i*(c/h),1-e-r*(h/c),i*(c/h),r*(h/c)];case 8:return[e-i,s-r,i,r];case 9:return[1-s,e-i,r,i];case 10:return[1-e,1-s,i,r];case 11:return[s-r,1-e,r,i];case 12:return[e-r*(h/c),s,r*(h/c),i*(c/h)];case 13:return[1-s-i*(c/h),e-r*(h/c),i*(c/h),r*(h/c)];case 14:return[1-e,1-s-i*(c/h),r*(h/c),i*(c/h)];case 15:return[s,1-e,i*(c/h),r*(h/c)];default:return[e,s,i,r]}},J(ft,"_currentDrawId",-1),J(ft,"_currentParent",null),w(ft,ns,null),w(ft,rl,null),w(ft,ol,null),w(ft,Co,NaN),w(ft,To,null),w(ft,Po,null),w(ft,al,NaN),J(ft,"_INNER_MARGIN",3);let Ip=ft;var Dn,rs,os,ll,ch,Hs,ps,$i,cl,hl,ul,hh,rp;class Wk{constructor(t,e,s,i,r,o){w(this,hh);w(this,Dn,new Float64Array(6));w(this,rs);w(this,os);w(this,ll);w(this,ch);w(this,Hs);w(this,ps,"");w(this,$i,0);w(this,cl,new Jd);w(this,hl);w(this,ul);b(this,hl,s),b(this,ul,i),b(this,ll,r),b(this,ch,o),[t,e]=A(this,hh,rp).call(this,t,e);const a=b(this,rs,[NaN,NaN,NaN,NaN,t,e]);b(this,Hs,[t,e]),b(this,os,[{line:a,points:l(this,Hs)}]),l(this,Dn).set(a,0)}updateProperty(t,e){t==="stroke-width"&&b(this,ch,e)}isEmpty(){return!l(this,os)||l(this,os).length===0}isCancellable(){return l(this,Hs).length<=10}add(t,e){[t,e]=A(this,hh,rp).call(this,t,e);const[s,i,r,o]=l(this,Dn).subarray(2,6),a=t-r,c=e-o;return Math.hypot(l(this,hl)*a,l(this,ul)*c)<=2?null:(l(this,Hs).push(t,e),isNaN(s)?(l(this,Dn).set([r,o,t,e],2),l(this,rs).push(NaN,NaN,NaN,NaN,t,e),{path:{d:this.toSVGPath()}}):(isNaN(l(this,Dn)[0])&&l(this,rs).splice(6,6),l(this,Dn).set([s,i,r,o,t,e],0),l(this,rs).push(...ct.createBezierPoints(s,i,r,o,t,e)),{path:{d:this.toSVGPath()}}))}end(t,e){const s=this.add(t,e);return s||(l(this,Hs).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(t,e,s,i,r){b(this,hl,s),b(this,ul,i),b(this,ll,r),[t,e]=A(this,hh,rp).call(this,t,e);const o=b(this,rs,[NaN,NaN,NaN,NaN,t,e]);b(this,Hs,[t,e]);const a=l(this,os).at(-1);return a&&(a.line=new Float32Array(a.line),a.points=new Float32Array(a.points)),l(this,os).push({line:o,points:l(this,Hs)}),l(this,Dn).set(o,0),b(this,$i,0),this.toSVGPath(),null}getLastElement(){return l(this,os).at(-1)}setLastElement(t){return l(this,os)?(l(this,os).push(t),b(this,rs,t.line),b(this,Hs,t.points),b(this,$i,0),{path:{d:this.toSVGPath()}}):l(this,cl).setLastElement(t)}removeLastElement(){if(!l(this,os))return l(this,cl).removeLastElement();l(this,os).pop(),b(this,ps,"");for(let t=0,e=l(this,os).length;t<e;t++){const{line:s,points:i}=l(this,os)[t];b(this,rs,s),b(this,Hs,i),b(this,$i,0),this.toSVGPath()}return{path:{d:l(this,ps)}}}toSVGPath(){const t=ct.svgRound(l(this,rs)[4]),e=ct.svgRound(l(this,rs)[5]);if(l(this,Hs).length===2)return b(this,ps,`${l(this,ps)} M ${t} ${e} Z`),l(this,ps);if(l(this,Hs).length<=6){const i=l(this,ps).lastIndexOf("M");b(this,ps,`${l(this,ps).slice(0,i)} M ${t} ${e}`),b(this,$i,6)}if(l(this,Hs).length===4){const i=ct.svgRound(l(this,rs)[10]),r=ct.svgRound(l(this,rs)[11]);return b(this,ps,`${l(this,ps)} L ${i} ${r}`),b(this,$i,12),l(this,ps)}const s=[];l(this,$i)===0&&(s.push(`M ${t} ${e}`),b(this,$i,6));for(let i=l(this,$i),r=l(this,rs).length;i<r;i+=6){const[o,a,c,h,u,f]=l(this,rs).slice(i,i+6).map(ct.svgRound);s.push(`C${o} ${a} ${c} ${h} ${u} ${f}`)}return b(this,ps,l(this,ps)+s.join(" ")),b(this,$i,l(this,rs).length),l(this,ps)}getOutlines(t,e,s,i){const r=l(this,os).at(-1);return r.line=new Float32Array(r.line),r.points=new Float32Array(r.points),l(this,cl).build(l(this,os),t,e,s,l(this,ll),l(this,ch),i),b(this,Dn,null),b(this,rs,null),b(this,os,null),b(this,ps,null),l(this,cl)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Dn=new WeakMap,rs=new WeakMap,os=new WeakMap,ll=new WeakMap,ch=new WeakMap,Hs=new WeakMap,ps=new WeakMap,$i=new WeakMap,cl=new WeakMap,hl=new WeakMap,ul=new WeakMap,hh=new WeakSet,rp=function(t,e){return ct._normalizePoint(t,e,l(this,hl),l(this,ul),l(this,ll))};var js,$d,Bd,bi,On,Nn,uh,dh,dl,ms,Jn,ZE,tS,eS;class Jd extends ct{constructor(){super(...arguments);w(this,ms);w(this,js);w(this,$d,0);w(this,Bd);w(this,bi);w(this,On);w(this,Nn);w(this,uh);w(this,dh);w(this,dl)}build(e,s,i,r,o,a,c){b(this,On,s),b(this,Nn,i),b(this,uh,r),b(this,dh,o),b(this,dl,a),b(this,Bd,c??0),b(this,bi,e),A(this,ms,tS).call(this)}get thickness(){return l(this,dl)}setLastElement(e){return l(this,bi).push(e),{path:{d:this.toSVGPath()}}}removeLastElement(){return l(this,bi).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const e=[];for(const{line:s}of l(this,bi)){if(e.push(`M${ct.svgRound(s[4])} ${ct.svgRound(s[5])}`),s.length===6){e.push("Z");continue}if(s.length===12&&isNaN(s[6])){e.push(`L${ct.svgRound(s[10])} ${ct.svgRound(s[11])}`);continue}for(let i=6,r=s.length;i<r;i+=6){const[o,a,c,h,u,f]=s.subarray(i,i+6).map(ct.svgRound);e.push(`C${o} ${a} ${c} ${h} ${u} ${f}`)}}return e.join("")}serialize([e,s,i,r],o){const a=[],c=[],[h,u,f,p]=A(this,ms,ZE).call(this);let g,v,_,x,S,C,T,R,I;switch(l(this,dh)){case 0:I=ct._rescale,g=e,v=s+r,_=i,x=-r,S=e+h*i,C=s+(1-u-p)*r,T=e+(h+f)*i,R=s+(1-u)*r;break;case 90:I=ct._rescaleAndSwap,g=e,v=s,_=i,x=r,S=e+u*i,C=s+h*r,T=e+(u+p)*i,R=s+(h+f)*r;break;case 180:I=ct._rescale,g=e+i,v=s,_=-i,x=r,S=e+(1-h-f)*i,C=s+u*r,T=e+(1-h)*i,R=s+(u+p)*r;break;case 270:I=ct._rescaleAndSwap,g=e+i,v=s+r,_=-i,x=-r,S=e+(1-u-p)*i,C=s+(1-h-f)*r,T=e+(1-u)*i,R=s+(1-h)*r;break}for(const{line:F,points:N}of l(this,bi))a.push(I(F,g,v,_,x,o?new Array(F.length):null)),c.push(I(N,g,v,_,x,o?new Array(N.length):null));return{lines:a,points:c,rect:[S,C,T,R]}}static deserialize(e,s,i,r,o,{paths:{lines:a,points:c},rotation:h,thickness:u}){const f=[];let p,g,v,_,x;switch(h){case 0:x=ct._rescale,p=-e/i,g=s/r+1,v=1/i,_=-1/r;break;case 90:x=ct._rescaleAndSwap,p=-s/r,g=-e/i,v=1/r,_=1/i;break;case 180:x=ct._rescale,p=e/i+1,g=-s/r,v=-1/i,_=1/r;break;case 270:x=ct._rescaleAndSwap,p=s/r+1,g=e/i+1,v=-1/r,_=-1/i;break}if(!a){a=[];for(const C of c){const T=C.length;if(T===2){a.push(new Float32Array([NaN,NaN,NaN,NaN,C[0],C[1]]));continue}if(T===4){a.push(new Float32Array([NaN,NaN,NaN,NaN,C[0],C[1],NaN,NaN,NaN,NaN,C[2],C[3]]));continue}const R=new Float32Array(3*(T-2));a.push(R);let[I,F,N,H]=C.subarray(0,4);R.set([NaN,NaN,NaN,NaN,I,F],0);for(let V=4;V<T;V+=2){const Y=C[V],Z=C[V+1];R.set(ct.createBezierPoints(I,F,N,H,Y,Z),(V-2)*3),[I,F,N,H]=[N,H,Y,Z]}}}for(let C=0,T=a.length;C<T;C++)f.push({line:x(a[C].map(R=>R??NaN),p,g,v,_),points:x(c[C].map(R=>R??NaN),p,g,v,_)});const S=new this.prototype.constructor;return S.build(f,i,r,1,h,u,o),S}get box(){return l(this,js)}updateProperty(e,s){return e==="stroke-width"?A(this,ms,eS).call(this,s):null}updateParentDimensions([e,s],i){const[r,o]=A(this,ms,Jn).call(this);b(this,On,e),b(this,Nn,s),b(this,uh,i);const[a,c]=A(this,ms,Jn).call(this),h=a-r,u=c-o,f=l(this,js);return f[0]-=h,f[1]-=u,f[2]+=2*h,f[3]+=2*u,f}updateRotation(e){return b(this,$d,e),{path:{transform:this.rotationTransform}}}get viewBox(){return l(this,js).map(ct.svgRound).join(" ")}get defaultProperties(){const[e,s]=l(this,js);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ct.svgRound(e)} ${ct.svgRound(s)}`}}}get rotationTransform(){const[,,e,s]=l(this,js);let i=0,r=0,o=0,a=0,c=0,h=0;switch(l(this,$d)){case 90:r=s/e,o=-e/s,c=e;break;case 180:i=-1,a=-1,c=e,h=s;break;case 270:r=-s/e,o=e/s,h=s;break;default:return""}return`matrix(${i} ${r} ${o} ${a} ${ct.svgRound(c)} ${ct.svgRound(h)})`}getPathResizingSVGProperties([e,s,i,r]){const[o,a]=A(this,ms,Jn).call(this),[c,h,u,f]=l(this,js);if(Math.abs(u-o)<=ct.PRECISION||Math.abs(f-a)<=ct.PRECISION){const x=e+i/2-(c+u/2),S=s+r/2-(h+f/2);return{path:{"transform-origin":`${ct.svgRound(e)} ${ct.svgRound(s)}`,transform:`${this.rotationTransform} translate(${x} ${S})`}}}const p=(i-2*o)/(u-2*o),g=(r-2*a)/(f-2*a),v=u/i,_=f/r;return{path:{"transform-origin":`${ct.svgRound(c)} ${ct.svgRound(h)}`,transform:`${this.rotationTransform} scale(${v} ${_}) translate(${ct.svgRound(o)} ${ct.svgRound(a)}) scale(${p} ${g}) translate(${ct.svgRound(-o)} ${ct.svgRound(-a)})`}}}getPathResizedSVGProperties([e,s,i,r]){const[o,a]=A(this,ms,Jn).call(this),c=l(this,js),[h,u,f,p]=c;if(c[0]=e,c[1]=s,c[2]=i,c[3]=r,Math.abs(f-o)<=ct.PRECISION||Math.abs(p-a)<=ct.PRECISION){const S=e+i/2-(h+f/2),C=s+r/2-(u+p/2);for(const{line:T,points:R}of l(this,bi))ct._translate(T,S,C,T),ct._translate(R,S,C,R);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ct.svgRound(e)} ${ct.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const g=(i-2*o)/(f-2*o),v=(r-2*a)/(p-2*a),_=-g*(h+o)+e+o,x=-v*(u+a)+s+a;if(g!==1||v!==1||_!==0||x!==0)for(const{line:S,points:C}of l(this,bi))ct._rescale(S,_,x,g,v,S),ct._rescale(C,_,x,g,v,C);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${ct.svgRound(e)} ${ct.svgRound(s)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([e,s],i){const[r,o]=i,a=l(this,js),c=e-a[0],h=s-a[1];if(l(this,On)===r&&l(this,Nn)===o)for(const{line:u,points:f}of l(this,bi))ct._translate(u,c,h,u),ct._translate(f,c,h,f);else{const u=l(this,On)/r,f=l(this,Nn)/o;b(this,On,r),b(this,Nn,o);for(const{line:p,points:g}of l(this,bi))ct._rescale(p,c,h,u,f,p),ct._rescale(g,c,h,u,f,g);a[2]*=u,a[3]*=f}return a[0]=e,a[1]=s,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${ct.svgRound(e)} ${ct.svgRound(s)}`}}}get defaultSVGProperties(){const e=l(this,js);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${ct.svgRound(e[0])} ${ct.svgRound(e[1])}`,transform:this.rotationTransform||null},bbox:e}}}js=new WeakMap,$d=new WeakMap,Bd=new WeakMap,bi=new WeakMap,On=new WeakMap,Nn=new WeakMap,uh=new WeakMap,dh=new WeakMap,dl=new WeakMap,ms=new WeakSet,Jn=function(e=l(this,dl)){const s=l(this,Bd)+e/2*l(this,uh);return l(this,dh)%180===0?[s/l(this,On),s/l(this,Nn)]:[s/l(this,Nn),s/l(this,On)]},ZE=function(){const[e,s,i,r]=l(this,js),[o,a]=A(this,ms,Jn).call(this,0);return[e+o,s+a,i-2*o,r-2*a]},tS=function(){const e=b(this,js,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:r}of l(this,bi)){if(r.length<=12){for(let c=4,h=r.length;c<h;c+=6)pt.pointBoundingBox(r[c],r[c+1],e);continue}let o=r[4],a=r[5];for(let c=6,h=r.length;c<h;c+=6){const[u,f,p,g,v,_]=r.subarray(c,c+6);pt.bezierBoundingBox(o,a,u,f,p,g,v,_,e),o=v,a=_}}const[s,i]=A(this,ms,Jn).call(this);e[0]=zs(e[0]-s,0,1),e[1]=zs(e[1]-i,0,1),e[2]=zs(e[2]+s,0,1),e[3]=zs(e[3]+i,0,1),e[2]-=e[0],e[3]-=e[1]},eS=function(e){const[s,i]=A(this,ms,Jn).call(this);b(this,dl,e);const[r,o]=A(this,ms,Jn).call(this),[a,c]=[r-s,o-i],h=l(this,js);return h[0]-=a,h[1]-=c,h[2]+=2*a,h[3]+=2*c,h};class _g extends QE{constructor(t){super(),this._viewParameters=t,super.updateProperties({fill:"none",stroke:ye._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,e){t==="stroke-width"&&(e??(e=this["stroke-width"]),e*=this._viewParameters.realScale),super.updateSVGProperty(t,e)}clone(){const t=new _g(this._viewParameters);return t.updateAll(this),t}}var Kp,sS;const sc=class sc extends Ip{constructor(e){super({...e,name:"inkEditor"});w(this,Kp);this._willKeepAspectRatio=!0,this.defaultL10nId="pdfjs-editor-ink-editor"}static initialize(e,s){ye.initialize(e,s),this._defaultDrawingOptions=new _g(s.viewParameters)}static getDefaultDrawingOptions(e){const s=this._defaultDrawingOptions.clone();return s.updateProperties(e),s}static get supportMultipleDrawings(){return!0}static get typesMap(){return jt(this,"typesMap",new Map([[zt.INK_THICKNESS,"stroke-width"],[zt.INK_COLOR,"stroke"],[zt.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(e,s,i,r,o){return new Wk(e,s,i,r,o,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(e,s,i,r,o,a){return Jd.deserialize(e,s,i,r,o,a)}static async deserialize(e,s,i){let r=null;if(e instanceof P_){const{data:{inkLists:a,rect:c,rotation:h,id:u,color:f,opacity:p,borderStyle:{rawWidth:g},popupRef:v},parent:{page:{pageNumber:_}}}=e;r=e={annotationType:Tt.INK,color:Array.from(f),thickness:g,opacity:p,paths:{points:a},boxes:null,pageIndex:_-1,rect:c.slice(0),rotation:h,id:u,deleted:!1,popupRef:v}}const o=await super.deserialize(e,s,i);return o.annotationElementId=e.id||null,o._initialData=r,o}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:e,_drawingOptions:s,parent:i}=this;s.updateSVGProperty("stroke-width"),i.drawLayer.updateProperties(e,s.toSVGProperties())}static onScaleChangingWhenDrawing(){const e=this._currentParent;e&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),e.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:e,thickness:s,opacity:i}){this._drawingOptions=sc.getDefaultDrawingOptions({stroke:pt.makeHexColor(...e),"stroke-width":s,"stroke-opacity":i})}serialize(e=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:s,points:i,rect:r}=this.serializeDraw(e),{_drawingOptions:{stroke:o,"stroke-opacity":a,"stroke-width":c}}=this,h={annotationType:Tt.INK,color:ye._colorManager.convert(o),opacity:a,thickness:c,paths:{lines:s,points:i},pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(h.isCopy=!0,h):this.annotationElementId&&!A(this,Kp,sS).call(this,h)?null:(h.id=this.annotationElementId,h)}renderAnnotationElement(e){const{points:s,rect:i}=this.serializeDraw(!1);return e.updateEdited({rect:i,thickness:this._drawingOptions["stroke-width"],points:s}),null}};Kp=new WeakSet,sS=function(e){const{color:s,thickness:i,opacity:r,pageIndex:o}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||e.color.some((a,c)=>a!==s[c])||e.thickness!==i||e.opacity!==r||e.pageIndex!==o},J(sc,"_type","ink"),J(sc,"_editorType",Tt.INK),J(sc,"_defaultDrawingOptions",null);let Fb=sc;class $b extends Jd{toSVGPath(){let t=super.toSVGPath();return t.endsWith("Z")||(t+="Z"),t}}const Pf=8,Oh=3;var fl,se,Bb,sn,iS,nS,Hb,op,rS,oS,aS,jb,Vb,lS;class Lr{static extractContoursFromText(t,{fontFamily:e,fontStyle:s,fontWeight:i},r,o,a,c){let h=new OffscreenCanvas(1,1),u=h.getContext("2d",{alpha:!1});const f=200,p=u.font=`${s} ${i} ${f}px ${e}`,{actualBoundingBoxLeft:g,actualBoundingBoxRight:v,actualBoundingBoxAscent:_,actualBoundingBoxDescent:x,fontBoundingBoxAscent:S,fontBoundingBoxDescent:C,width:T}=u.measureText(t),R=1.5,I=Math.ceil(Math.max(Math.abs(g)+Math.abs(v)||0,T)*R),F=Math.ceil(Math.max(Math.abs(_)+Math.abs(x)||f,Math.abs(S)+Math.abs(C)||f)*R);h=new OffscreenCanvas(I,F),u=h.getContext("2d",{alpha:!0,willReadFrequently:!0}),u.font=p,u.filter="grayscale(1)",u.fillStyle="white",u.fillRect(0,0,I,F),u.fillStyle="black",u.fillText(t,I*(R-1)/2,F*(3-R)/2);const N=A(this,se,jb).call(this,u.getImageData(0,0,I,F).data),H=A(this,se,aS).call(this,N),V=A(this,se,Vb).call(this,H),Y=A(this,se,Hb).call(this,N,I,F,V);return this.processDrawnLines({lines:{curves:Y,width:I,height:F},pageWidth:r,pageHeight:o,rotation:a,innerMargin:c,mustSmooth:!0,areContours:!0})}static process(t,e,s,i,r){const[o,a,c]=A(this,se,lS).call(this,t),[h,u]=A(this,se,oS).call(this,o,a,c,Math.hypot(a,c)*l(this,fl).sigmaSFactor,l(this,fl).sigmaR,l(this,fl).kernelSize),f=A(this,se,Vb).call(this,u),p=A(this,se,Hb).call(this,h,a,c,f);return this.processDrawnLines({lines:{curves:p,width:a,height:c},pageWidth:e,pageHeight:s,rotation:i,innerMargin:r,mustSmooth:!0,areContours:!0})}static processDrawnLines({lines:t,pageWidth:e,pageHeight:s,rotation:i,innerMargin:r,mustSmooth:o,areContours:a}){i%180!==0&&([e,s]=[s,e]);const{curves:c,width:h,height:u}=t,f=t.thickness??0,p=[],g=Math.min(e/h,s/u),v=g/e,_=g/s,x=[];for(const{points:C}of c){const T=o?A(this,se,rS).call(this,C):C;if(!T)continue;x.push(T);const R=T.length,I=new Float32Array(R),F=new Float32Array(3*(R===2?2:R-2));if(p.push({line:F,points:I}),R===2){I[0]=T[0]*v,I[1]=T[1]*_,F.set([NaN,NaN,NaN,NaN,I[0],I[1]],0);continue}let[N,H,V,Y]=T;N*=v,H*=_,V*=v,Y*=_,I.set([N,H,V,Y],0),F.set([NaN,NaN,NaN,NaN,N,H],0);for(let Z=4;Z<R;Z+=2){const vt=I[Z]=T[Z]*v,At=I[Z+1]=T[Z+1]*_;F.set(ct.createBezierPoints(N,H,V,Y,vt,At),(Z-2)*3),[N,H,V,Y]=[V,Y,vt,At]}}if(p.length===0)return null;const S=a?new $b:new Jd;return S.build(p,e,s,1,i,a?0:f,r),{outline:S,newCurves:x,areContours:a,thickness:f,width:h,height:u}}static async compressSignature({outlines:t,areContours:e,thickness:s,width:i,height:r}){let o=1/0,a=-1/0,c=0;for(const T of t){c+=T.length;for(let R=2,I=T.length;R<I;R++){const F=T[R]-T[R-2];o=Math.min(o,F),a=Math.max(a,F)}}let h;o>=-128&&a<=127?h=Int8Array:o>=-32768&&a<=32767?h=Int16Array:h=Int32Array;const u=t.length,f=Pf+Oh*u,p=new Uint32Array(f);let g=0;p[g++]=f*Uint32Array.BYTES_PER_ELEMENT+(c-2*u)*h.BYTES_PER_ELEMENT,p[g++]=0,p[g++]=i,p[g++]=r,p[g++]=e?0:1,p[g++]=Math.max(0,Math.floor(s??0)),p[g++]=u,p[g++]=h.BYTES_PER_ELEMENT;for(const T of t)p[g++]=T.length-2,p[g++]=T[0],p[g++]=T[1];const v=new CompressionStream("deflate-raw"),_=v.writable.getWriter();await _.ready,_.write(p);const x=h.prototype.constructor;for(const T of t){const R=new x(T.length-2);for(let I=2,F=T.length;I<F;I++)R[I-2]=T[I]-T[I-2];_.write(R)}_.close();const S=await new Response(v.readable).arrayBuffer(),C=new Uint8Array(S);return h0(C)}static async decompressSignature(t){try{const e=mR(t),{readable:s,writable:i}=new DecompressionStream("deflate-raw"),r=i.getWriter();await r.ready,r.write(e).then(async()=>{await r.ready,await r.close()}).catch(()=>{});let o=null,a=0;for await(const T of s)o||(o=new Uint8Array(new Uint32Array(T.buffer,0,4)[0])),o.set(T,a),a+=T.length;const c=new Uint32Array(o.buffer,0,o.length>>2),h=c[1];if(h!==0)throw new Error(`Invalid version: ${h}`);const u=c[2],f=c[3],p=c[4]===0,g=c[5],v=c[6],_=c[7],x=[],S=(Pf+Oh*v)*Uint32Array.BYTES_PER_ELEMENT;let C;switch(_){case Int8Array.BYTES_PER_ELEMENT:C=new Int8Array(o.buffer,S);break;case Int16Array.BYTES_PER_ELEMENT:C=new Int16Array(o.buffer,S);break;case Int32Array.BYTES_PER_ELEMENT:C=new Int32Array(o.buffer,S);break}a=0;for(let T=0;T<v;T++){const R=c[Oh*T+Pf],I=new Float32Array(R+2);x.push(I);for(let F=0;F<Oh-1;F++)I[F]=c[Oh*T+Pf+F+1];for(let F=0;F<R;F++)I[F+2]=I[F]+C[a++]}return{areContours:p,thickness:g,outlines:x,width:u,height:f}}catch(e){return kt(`decompressSignature: ${e}`),null}}}fl=new WeakMap,se=new WeakSet,Bb=function(t,e,s,i){return s-=t,i-=e,s===0?i>0?0:4:s===1?i+6:2-i},sn=new WeakMap,iS=function(t,e,s,i,r,o,a){const c=A(this,se,Bb).call(this,s,i,r,o);for(let h=0;h<8;h++){const u=(-h+c-a+16)%8,f=l(this,sn)[2*u],p=l(this,sn)[2*u+1];if(t[(s+f)*e+(i+p)]!==0)return u}return-1},nS=function(t,e,s,i,r,o,a){const c=A(this,se,Bb).call(this,s,i,r,o);for(let h=0;h<8;h++){const u=(h+c+a+16)%8,f=l(this,sn)[2*u],p=l(this,sn)[2*u+1];if(t[(s+f)*e+(i+p)]!==0)return u}return-1},Hb=function(t,e,s,i){const r=t.length,o=new Int32Array(r);for(let u=0;u<r;u++)o[u]=t[u]<=i?1:0;for(let u=1;u<s-1;u++)o[u*e]=o[u*e+e-1]=0;for(let u=0;u<e;u++)o[u]=o[e*s-1-u]=0;let a=1,c;const h=[];for(let u=1;u<s-1;u++){c=1;for(let f=1;f<e-1;f++){const p=u*e+f,g=o[p];if(g===0)continue;let v=u,_=f;if(g===1&&o[p-1]===0)a+=1,_-=1;else if(g>=1&&o[p+1]===0)a+=1,_+=1,g>1&&(c=g);else{g!==1&&(c=Math.abs(g));continue}const x=[f,u],S=_===f+1,C={isHole:S,points:x,id:a,parent:0};h.push(C);let T;for(const Z of h)if(Z.id===c){T=Z;break}T?T.isHole?C.parent=S?T.parent:c:C.parent=S?c:T.parent:C.parent=S?c:0;const R=A(this,se,iS).call(this,o,e,u,f,v,_,0);if(R===-1){o[p]=-a,o[p]!==1&&(c=Math.abs(o[p]));continue}let I=l(this,sn)[2*R],F=l(this,sn)[2*R+1];const N=u+I,H=f+F;v=N,_=H;let V=u,Y=f;for(;;){const Z=A(this,se,nS).call(this,o,e,V,Y,v,_,1);I=l(this,sn)[2*Z],F=l(this,sn)[2*Z+1];const vt=V+I,At=Y+F;x.push(At,vt);const St=V*e+Y;if(o[St+1]===0?o[St]=-a:o[St]===1&&(o[St]=a),vt===u&&At===f&&V===N&&Y===H){o[p]!==1&&(c=Math.abs(o[p]));break}else v=V,_=Y,V=vt,Y=At}}}return h},op=function(t,e,s,i){if(s-e<=4){for(let N=e;N<s-2;N+=2)i.push(t[N],t[N+1]);return}const r=t[e],o=t[e+1],a=t[s-4]-r,c=t[s-3]-o,h=Math.hypot(a,c),u=a/h,f=c/h,p=u*o-f*r,g=c/a,v=1/h,_=Math.atan(g),x=Math.cos(_),S=Math.sin(_),C=v*(Math.abs(x)+Math.abs(S)),T=v*(1-C+C**2),R=Math.max(Math.atan(Math.abs(S+x)*T),Math.atan(Math.abs(S-x)*T));let I=0,F=e;for(let N=e+2;N<s-2;N+=2){const H=Math.abs(p-u*t[N+1]+f*t[N]);H>I&&(F=N,I=H)}I>(h*R)**2?(A(this,se,op).call(this,t,e,F+2,i),A(this,se,op).call(this,t,F,s,i)):i.push(r,o)},rS=function(t){const e=[],s=t.length;return A(this,se,op).call(this,t,0,s,e),e.push(t[s-2],t[s-1]),e.length<=4?null:e},oS=function(t,e,s,i,r,o){const a=new Float32Array(o**2),c=-2*i**2,h=o>>1;for(let _=0;_<o;_++){const x=(_-h)**2;for(let S=0;S<o;S++)a[_*o+S]=Math.exp((x+(S-h)**2)/c)}const u=new Float32Array(256),f=-2*r**2;for(let _=0;_<256;_++)u[_]=Math.exp(_**2/f);const p=t.length,g=new Uint8Array(p),v=new Uint32Array(256);for(let _=0;_<s;_++)for(let x=0;x<e;x++){const S=_*e+x,C=t[S];let T=0,R=0;for(let F=0;F<o;F++){const N=_+F-h;if(!(N<0||N>=s))for(let H=0;H<o;H++){const V=x+H-h;if(V<0||V>=e)continue;const Y=t[N*e+V],Z=a[F*o+H]*u[Math.abs(Y-C)];T+=Y*Z,R+=Z}}const I=g[S]=Math.round(T/R);v[I]++}return[g,v]},aS=function(t){const e=new Uint32Array(256);for(const s of t)e[s]++;return e},jb=function(t){const e=t.length,s=new Uint8ClampedArray(e>>2);let i=-1/0,r=1/0;for(let a=0,c=s.length;a<c;a++){if(t[(a<<2)+3]===0){i=s[a]=255;continue}const u=s[a]=t[a<<2];u>i&&(i=u),u<r&&(r=u)}const o=255/(i-r);for(let a=0;a<e;a++)s[a]=(s[a]-r)*o;return s},Vb=function(t){let e,s=-1/0,i=-1/0;const r=t.findIndex(c=>c!==0);let o=r,a=r;for(e=r;e<256;e++){const c=t[e];c>s&&(e-o>i&&(i=e-o,a=e-1),s=c,o=e)}for(e=a-1;e>=0&&!(t[e]>t[e+1]);e--);return e},lS=function(t){const e=t,{width:s,height:i}=t,{maxDim:r}=l(this,fl);let o=s,a=i;if(s>r||i>r){let p=s,g=i,v=Math.log2(Math.max(s,i)/r);const _=Math.floor(v);v=v===_?_-1:_;for(let S=0;S<v;S++){o=p,a=g,o>r&&(o=Math.ceil(o/2)),a>r&&(a=Math.ceil(a/2));const C=new OffscreenCanvas(o,a);C.getContext("2d").drawImage(t,0,0,p,g,0,0,o,a),p=o,g=a,t!==e&&t.close(),t=C.transferToImageBitmap()}const x=Math.min(r/o,r/a);o=Math.round(o*x),a=Math.round(a*x)}const h=new OffscreenCanvas(o,a).getContext("2d",{willReadFrequently:!0});h.filter="grayscale(1)",h.drawImage(t,0,0,t.width,t.height,0,0,o,a);const u=h.getImageData(0,0,o,a).data;return[A(this,se,jb).call(this,u),o,a]},w(Lr,se),w(Lr,fl,{maxDim:512,sigmaSFactor:.02,sigmaR:25,kernelSize:16}),w(Lr,sn,new Int32Array([0,1,-1,1,-1,0,-1,-1,0,-1,1,-1,1,0,1,1]));class R_ extends QE{constructor(){super(),super.updateProperties({fill:ye._defaultLineColor,"stroke-width":0})}clone(){const t=new R_;return t.updateAll(this),t}}class k_ extends _g{constructor(t){super(t),super.updateProperties({stroke:ye._defaultLineColor,"stroke-width":1})}clone(){const t=new k_(this._viewParameters);return t.updateAll(this),t}}var Ro,_i,ko,Io;const oi=class oi extends Ip{constructor(e){super({...e,mustBeCommitted:!0,name:"signatureEditor"});w(this,Ro,!1);w(this,_i,null);w(this,ko,null);w(this,Io,null);this._willKeepAspectRatio=!0,b(this,ko,e.signatureData||null),b(this,_i,null),this.defaultL10nId="pdfjs-editor-signature-editor1"}static initialize(e,s){ye.initialize(e,s),this._defaultDrawingOptions=new R_,this._defaultDrawnSignatureOptions=new k_(s.viewParameters)}static getDefaultDrawingOptions(e){const s=this._defaultDrawingOptions.clone();return s.updateProperties(e),s}static get supportMultipleDrawings(){return!1}static get typesMap(){return jt(this,"typesMap",new Map)}static get isDrawer(){return!1}get telemetryFinalData(){return{type:"signature",hasDescription:!!l(this,_i)}}static computeTelemetryFinalData(e){const s=e.get("hasDescription");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}get isResizable(){return!0}onScaleChanging(){this._drawId!==null&&super.onScaleChanging()}render(){if(this.div)return this.div;let e,s;const{_isCopy:i}=this;if(i&&(this._isCopy=!1,e=this.x,s=this.y),super.render(),this._drawId===null)if(l(this,ko)){const{lines:r,mustSmooth:o,areContours:a,description:c,uuid:h,heightInPage:u}=l(this,ko),{rawDims:{pageWidth:f,pageHeight:p},rotation:g}=this.parent.viewport,v=Lr.processDrawnLines({lines:r,pageWidth:f,pageHeight:p,rotation:g,innerMargin:oi._INNER_MARGIN,mustSmooth:o,areContours:a});this.addSignature(v,u,c,h)}else this.div.setAttribute("data-l10n-args",JSON.stringify({description:""})),this.div.hidden=!0,this._uiManager.getSignature(this);return i&&(this._isCopy=!0,this._moveAfterPaste(e,s)),this.div}setUuid(e){b(this,Io,e),this.addEditToolbar()}getUuid(){return l(this,Io)}get description(){return l(this,_i)}set description(e){b(this,_i,e),super.addEditToolbar().then(s=>{s==null||s.updateEditSignatureButton(e)})}getSignaturePreview(){const{newCurves:e,areContours:s,thickness:i,width:r,height:o}=l(this,ko),a=Math.max(r,o),c=Lr.processDrawnLines({lines:{curves:e.map(h=>({points:h})),thickness:i,width:r,height:o},pageWidth:a,pageHeight:a,rotation:0,innerMargin:0,mustSmooth:!1,areContours:s});return{areContours:s,outline:c.outline}}async addEditToolbar(){const e=await super.addEditToolbar();return e?(this._uiManager.signatureManager&&l(this,_i)!==null&&(await e.addEditSignatureButton(this._uiManager.signatureManager,l(this,Io),l(this,_i)),e.show()),e):null}addSignature(e,s,i,r){const{x:o,y:a}=this,{outline:c}=b(this,ko,e);b(this,Ro,c instanceof $b),b(this,_i,i),this.div.setAttribute("data-l10n-args",JSON.stringify({description:i}));let h;l(this,Ro)?h=oi.getDefaultDrawingOptions():(h=oi._defaultDrawnSignatureOptions.clone(),h.updateProperties({"stroke-width":c.thickness})),this._addOutlines({drawOutlines:c,drawingOptions:h});const[u,f]=this.parentDimensions,[,p]=this.pageDimensions;let g=s/p;g=g>=1?.5:g,this.width*=g/this.height,this.width>=1&&(g*=.9/this.width,this.width=.9),this.height=g,this.setDims(u*this.width,f*this.height),this.x=o,this.y=a,this.center(),this._onResized(),this.onScaleChanging(),this.rotate(),this._uiManager.addToAnnotationStorage(this),this.setUuid(r),this._reportTelemetry({action:"pdfjs.signature.inserted",data:{hasBeenSaved:!!r,hasDescription:!!i}}),this.div.hidden=!1}getFromImage(e){const{rawDims:{pageWidth:s,pageHeight:i},rotation:r}=this.parent.viewport;return Lr.process(e,s,i,r,oi._INNER_MARGIN)}getFromText(e,s){const{rawDims:{pageWidth:i,pageHeight:r},rotation:o}=this.parent.viewport;return Lr.extractContoursFromText(e,s,i,r,o,oi._INNER_MARGIN)}getDrawnSignature(e){const{rawDims:{pageWidth:s,pageHeight:i},rotation:r}=this.parent.viewport;return Lr.processDrawnLines({lines:e,pageWidth:s,pageHeight:i,rotation:r,innerMargin:oi._INNER_MARGIN,mustSmooth:!1,areContours:!1})}createDrawingOptions({areContours:e,thickness:s}){e?this._drawingOptions=oi.getDefaultDrawingOptions():(this._drawingOptions=oi._defaultDrawnSignatureOptions.clone(),this._drawingOptions.updateProperties({"stroke-width":s}))}serialize(e=!1){if(this.isEmpty())return null;const{lines:s,points:i,rect:r}=this.serializeDraw(e),{_drawingOptions:{"stroke-width":o}}=this,a={annotationType:Tt.SIGNATURE,isSignature:!0,areContours:l(this,Ro),color:[0,0,0],thickness:l(this,Ro)?0:o,pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return e?(a.paths={lines:s,points:i},a.uuid=l(this,Io),a.isCopy=!0):a.lines=s,l(this,_i)&&(a.accessibilityData={type:"Figure",alt:l(this,_i)}),a}static deserializeDraw(e,s,i,r,o,a){return a.areContours?$b.deserialize(e,s,i,r,o,a):Jd.deserialize(e,s,i,r,o,a)}static async deserialize(e,s,i){var o;const r=await super.deserialize(e,s,i);return b(r,Ro,e.areContours),b(r,_i,((o=e.accessibilityData)==null?void 0:o.alt)||""),b(r,Io,e.uuid),r}};Ro=new WeakMap,_i=new WeakMap,ko=new WeakMap,Io=new WeakMap,J(oi,"_type","signature"),J(oi,"_editorType",Tt.SIGNATURE),J(oi,"_defaultDrawingOptions",null);let Ub=oi;var xe,as,Lo,xr,Mo,fh,Cr,pl,Fn,vi,ph,Xt,Jh,Zh,ap,lp,cp,Wb,hp,cS;class zb extends ye{constructor(e){super({...e,name:"stampEditor"});w(this,Xt);w(this,xe,null);w(this,as,null);w(this,Lo,null);w(this,xr,null);w(this,Mo,null);w(this,fh,"");w(this,Cr,null);w(this,pl,!1);w(this,Fn,null);w(this,vi,!1);w(this,ph,!1);b(this,xr,e.bitmapUrl),b(this,Mo,e.bitmapFile),this.defaultL10nId="pdfjs-editor-stamp-editor"}static initialize(e,s){ye.initialize(e,s)}static isHandlingMimeForPasting(e){return Fm.includes(e)}static paste(e,s){s.pasteEditor(Tt.STAMP,{bitmapFile:e.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var e;return{type:"stamp",hasAltText:!!((e=this.altTextData)!=null&&e.altText)}}static computeTelemetryFinalData(e){const s=e.get("hasAltText");return{hasAltText:s.get(!0)??0,hasNoAltText:s.get(!1)??0}}async mlGuessAltText(e=null,s=!0){if(this.hasAltTextData())return null;const{mlManager:i}=this._uiManager;if(!i)throw new Error("No ML.");if(!await i.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:r,width:o,height:a}=e||this.copyCanvas(null,null,!0).imageData,c=await i.guess({name:"altText",request:{data:r,width:o,height:a,channels:r.length/(o*a)}});if(!c)throw new Error("No response from the AI service.");if(c.error)throw new Error("Error from the AI service.");if(c.cancel)return null;if(!c.output)throw new Error("No valid response from the AI service.");const h=c.output;return await this.setGuessedAltText(h),s&&!this.hasAltTextData()&&(this.altTextData={alt:h,decorative:!1}),h}remove(){var e;l(this,as)&&(b(this,xe,null),this._uiManager.imageManager.deleteId(l(this,as)),(e=l(this,Cr))==null||e.remove(),b(this,Cr,null),l(this,Fn)&&(clearTimeout(l(this,Fn)),b(this,Fn,null))),super.remove()}rebuild(){if(!this.parent){l(this,as)&&A(this,Xt,ap).call(this);return}super.rebuild(),this.div!==null&&(l(this,as)&&l(this,Cr)===null&&A(this,Xt,ap).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(e){this._isDraggable=!0,e&&this.div.focus()}isEmpty(){return!(l(this,Lo)||l(this,xe)||l(this,xr)||l(this,Mo)||l(this,as)||l(this,pl))}get isResizable(){return!0}render(){if(this.div)return this.div;let e,s;return this._isCopy&&(e=this.x,s=this.y),super.render(),this.div.hidden=!0,this.addAltTextButton(),l(this,pl)||(l(this,xe)?A(this,Xt,lp).call(this):A(this,Xt,ap).call(this)),this._isCopy&&this._moveAfterPaste(e,s),this._uiManager.addShouldRescale(this),this.div}setCanvas(e,s){const{id:i,bitmap:r}=this._uiManager.imageManager.getFromCanvas(e,s);s.remove(),i&&this._uiManager.imageManager.isValidId(i)&&(b(this,as,i),r&&b(this,xe,r),b(this,pl,!1),A(this,Xt,lp).call(this))}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;l(this,Fn)!==null&&clearTimeout(l(this,Fn)),b(this,Fn,setTimeout(()=>{b(this,Fn,null),A(this,Xt,Wb).call(this)},200))}copyCanvas(e,s,i=!1){var g;e||(e=224);const{width:r,height:o}=l(this,xe),a=new Fr;let c=l(this,xe),h=r,u=o,f=null;if(s){if(r>s||o>s){const H=Math.min(s/r,s/o);h=Math.floor(r*H),u=Math.floor(o*H)}f=document.createElement("canvas");const v=f.width=Math.ceil(h*a.sx),_=f.height=Math.ceil(u*a.sy);l(this,vi)||(c=A(this,Xt,cp).call(this,v,_));const x=f.getContext("2d");x.filter=this._uiManager.hcmFilter;let S="white",C="#cfcfd8";this._uiManager.hcmFilter!=="none"?C="black":(g=window.matchMedia)!=null&&g.call(window,"(prefers-color-scheme: dark)").matches&&(S="#8f8f9d",C="#42414d");const T=15,R=T*a.sx,I=T*a.sy,F=new OffscreenCanvas(R*2,I*2),N=F.getContext("2d");N.fillStyle=S,N.fillRect(0,0,R*2,I*2),N.fillStyle=C,N.fillRect(0,0,R,I),N.fillRect(R,I,R,I),x.fillStyle=x.createPattern(F,"repeat"),x.fillRect(0,0,v,_),x.drawImage(c,0,0,c.width,c.height,0,0,v,_)}let p=null;if(i){let v,_;if(a.symmetric&&c.width<e&&c.height<e)v=c.width,_=c.height;else if(c=l(this,xe),r>e||o>e){const C=Math.min(e/r,e/o);v=Math.floor(r*C),_=Math.floor(o*C),l(this,vi)||(c=A(this,Xt,cp).call(this,v,_))}const S=new OffscreenCanvas(v,_).getContext("2d",{willReadFrequently:!0});S.drawImage(c,0,0,c.width,c.height,0,0,v,_),p={width:v,height:_,data:S.getImageData(0,0,v,_).data}}return{canvas:f,width:h,height:u,imageData:p}}static async deserialize(e,s,i){var x;let r=null,o=!1;if(e instanceof SE){const{data:{rect:S,rotation:C,id:T,structParent:R,popupRef:I},container:F,parent:{page:{pageNumber:N}},canvas:H}=e;let V,Y;H?(delete e.canvas,{id:V,bitmap:Y}=i.imageManager.getFromCanvas(F.id,H),H.remove()):(o=!0,e._hasNoCanvas=!0);const Z=((x=await s._structTree.getAriaAttributes(`${v_}${T}`))==null?void 0:x.get("aria-label"))||"";r=e={annotationType:Tt.STAMP,bitmapId:V,bitmap:Y,pageIndex:N-1,rect:S.slice(0),rotation:C,id:T,deleted:!1,accessibilityData:{decorative:!1,altText:Z},isSvg:!1,structParent:R,popupRef:I}}const a=await super.deserialize(e,s,i),{rect:c,bitmap:h,bitmapUrl:u,bitmapId:f,isSvg:p,accessibilityData:g}=e;o?(i.addMissingCanvas(e.id,a),b(a,pl,!0)):f&&i.imageManager.isValidId(f)?(b(a,as,f),h&&b(a,xe,h)):b(a,xr,u),b(a,vi,p);const[v,_]=a.pageDimensions;return a.width=(c[2]-c[0])/v,a.height=(c[3]-c[1])/_,a.annotationElementId=e.id||null,g&&(a.altTextData=g),a._initialData=r,b(a,ph,!!r),a}serialize(e=!1,s=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const i={annotationType:Tt.STAMP,bitmapId:l(this,as),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:l(this,vi),structTreeParentId:this._structTreeParentId};if(e)return i.bitmapUrl=A(this,Xt,hp).call(this,!0),i.accessibilityData=this.serializeAltText(!0),i.isCopy=!0,i;const{decorative:r,altText:o}=this.serializeAltText(!1);if(!r&&o&&(i.accessibilityData={type:"Figure",alt:o}),this.annotationElementId){const c=A(this,Xt,cS).call(this,i);if(c.isSame)return null;c.isSameAltText?delete i.accessibilityData:i.accessibilityData.structParent=this._initialData.structParent??-1}if(i.id=this.annotationElementId,s===null)return i;s.stamps||(s.stamps=new Map);const a=l(this,vi)?(i.rect[2]-i.rect[0])*(i.rect[3]-i.rect[1]):null;if(!s.stamps.has(l(this,as)))s.stamps.set(l(this,as),{area:a,serialized:i}),i.bitmap=A(this,Xt,hp).call(this,!1);else if(l(this,vi)){const c=s.stamps.get(l(this,as));a>c.area&&(c.area=a,c.serialized.bitmap.close(),c.serialized.bitmap=A(this,Xt,hp).call(this,!1))}return i}renderAnnotationElement(e){return e.updateEdited({rect:this.getRect(0,0)}),null}}xe=new WeakMap,as=new WeakMap,Lo=new WeakMap,xr=new WeakMap,Mo=new WeakMap,fh=new WeakMap,Cr=new WeakMap,pl=new WeakMap,Fn=new WeakMap,vi=new WeakMap,ph=new WeakMap,Xt=new WeakSet,Jh=function(e,s=!1){if(!e){this.remove();return}b(this,xe,e.bitmap),s||(b(this,as,e.id),b(this,vi,e.isSvg)),e.file&&b(this,fh,e.file.name),A(this,Xt,lp).call(this)},Zh=function(){if(b(this,Lo,null),this._uiManager.enableWaiting(!1),!!l(this,Cr)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,xe)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&l(this,xe)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},ap=function(){if(l(this,as)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(l(this,as)).then(i=>A(this,Xt,Jh).call(this,i,!0)).finally(()=>A(this,Xt,Zh).call(this));return}if(l(this,xr)){const i=l(this,xr);b(this,xr,null),this._uiManager.enableWaiting(!0),b(this,Lo,this._uiManager.imageManager.getFromUrl(i).then(r=>A(this,Xt,Jh).call(this,r)).finally(()=>A(this,Xt,Zh).call(this)));return}if(l(this,Mo)){const i=l(this,Mo);b(this,Mo,null),this._uiManager.enableWaiting(!0),b(this,Lo,this._uiManager.imageManager.getFromFile(i).then(r=>A(this,Xt,Jh).call(this,r)).finally(()=>A(this,Xt,Zh).call(this)));return}const e=document.createElement("input");e.type="file",e.accept=Fm.join(",");const s=this._uiManager._signal;b(this,Lo,new Promise(i=>{e.addEventListener("change",async()=>{if(!e.files||e.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const r=await this._uiManager.imageManager.getFromFile(e.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),A(this,Xt,Jh).call(this,r)}i()},{signal:s}),e.addEventListener("cancel",()=>{this.remove(),i()},{signal:s})}).finally(()=>A(this,Xt,Zh).call(this))),e.click()},lp=function(){var f;const{div:e}=this;let{width:s,height:i}=l(this,xe);const[r,o]=this.pageDimensions,a=.75;if(this.width)s=this.width*r,i=this.height*o;else if(s>a*r||i>a*o){const p=Math.min(a*r/s,a*o/i);s*=p,i*=p}const[c,h]=this.parentDimensions;this.setDims(s*c/r,i*h/o),this._uiManager.enableWaiting(!1);const u=b(this,Cr,document.createElement("canvas"));u.setAttribute("role","img"),this.addContainer(u),this.width=s/r,this.height=i/o,(f=this._initialOptions)!=null&&f.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(e.hidden=!1),A(this,Xt,Wb).call(this),l(this,ph)||(this.parent.addUndoableEditor(this),b(this,ph,!0)),this._reportTelemetry({action:"inserted_image"}),l(this,fh)&&this.div.setAttribute("aria-description",l(this,fh))},cp=function(e,s){const{width:i,height:r}=l(this,xe);let o=i,a=r,c=l(this,xe);for(;o>2*e||a>2*s;){const h=o,u=a;o>2*e&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2)),a>2*s&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2));const f=new OffscreenCanvas(o,a);f.getContext("2d").drawImage(c,0,0,h,u,0,0,o,a),c=f.transferToImageBitmap()}return c},Wb=function(){const[e,s]=this.parentDimensions,{width:i,height:r}=this,o=new Fr,a=Math.ceil(i*e*o.sx),c=Math.ceil(r*s*o.sy),h=l(this,Cr);if(!h||h.width===a&&h.height===c)return;h.width=a,h.height=c;const u=l(this,vi)?l(this,xe):A(this,Xt,cp).call(this,a,c),f=h.getContext("2d");f.filter=this._uiManager.hcmFilter,f.drawImage(u,0,0,u.width,u.height,0,0,a,c)},hp=function(e){if(e){if(l(this,vi)){const r=this._uiManager.imageManager.getSvgUrl(l(this,as));if(r)return r}const s=document.createElement("canvas");return{width:s.width,height:s.height}=l(this,xe),s.getContext("2d").drawImage(l(this,xe),0,0),s.toDataURL()}if(l(this,vi)){const[s,i]=this.pageDimensions,r=Math.round(this.width*s*Uo.PDF_TO_CSS_UNITS),o=Math.round(this.height*i*Uo.PDF_TO_CSS_UNITS),a=new OffscreenCanvas(r,o);return a.getContext("2d").drawImage(l(this,xe),0,0,l(this,xe).width,l(this,xe).height,0,0,r,o),a.transferToImageBitmap()}return structuredClone(l(this,xe))},cS=function(e){var a;const{pageIndex:s,accessibilityData:{altText:i}}=this._initialData,r=e.pageIndex===s,o=(((a=e.accessibilityData)==null?void 0:a.alt)||"")===i;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&r&&o,isSameAltText:o}},J(zb,"_type","stamp"),J(zb,"_editorType",Tt.STAMP);var gl,gh,$n,Do,Tr,Bi,Oo,mh,ml,nn,Pr,Cs,Rr,mt,No,Ce,hS,wn,Gb,Xb,up;const qi=class qi{constructor({uiManager:t,pageIndex:e,div:s,structTreeLayer:i,accessibilityManager:r,annotationLayer:o,drawLayer:a,textLayer:c,viewport:h,l10n:u}){w(this,Ce);w(this,gl);w(this,gh,!1);w(this,$n,null);w(this,Do,null);w(this,Tr,null);w(this,Bi,new Map);w(this,Oo,!1);w(this,mh,!1);w(this,ml,!1);w(this,nn,null);w(this,Pr,null);w(this,Cs,null);w(this,Rr,null);w(this,mt);const f=[...l(qi,No).values()];if(!qi._initialized){qi._initialized=!0;for(const p of f)p.initialize(u,t)}t.registerEditorTypes(f),b(this,mt,t),this.pageIndex=e,this.div=s,b(this,gl,r),b(this,$n,o),this.viewport=h,b(this,Cs,c),this.drawLayer=a,this._structTree=i,l(this,mt).addLayer(this)}get isEmpty(){return l(this,Bi).size===0}get isInvisible(){return this.isEmpty&&l(this,mt).getMode()===Tt.NONE}updateToolbar(t){l(this,mt).updateToolbar(t)}updateMode(t=l(this,mt).getMode()){switch(A(this,Ce,up).call(this),t){case Tt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case Tt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case Tt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:e}=this.div;for(const s of l(qi,No).values())e.toggle(`${s._type}Editing`,t===s._editorType);this.div.hidden=!1}hasTextLayer(t){var e;return t===((e=l(this,Cs))==null?void 0:e.div)}setEditingState(t){l(this,mt).setEditingState(t)}addCommands(t){l(this,mt).addCommands(t)}cleanUndoStack(t){l(this,mt).cleanUndoStack(t)}toggleDrawing(t=!1){this.div.classList.toggle("drawing",!t)}togglePointerEvents(t=!1){this.div.classList.toggle("disabled",!t)}toggleAnnotationLayerPointerEvents(t=!1){var e;(e=l(this,$n))==null||e.div.classList.toggle("disabled",!t)}async enable(){b(this,ml,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const t=new Set;for(const s of l(this,Bi).values())s.enableEditing(),s.show(!0),s.annotationElementId&&(l(this,mt).removeChangedExistingAnnotation(s),t.add(s.annotationElementId));if(!l(this,$n)){b(this,ml,!1);return}const e=l(this,$n).getEditableAnnotations();for(const s of e){if(s.hide(),l(this,mt).isDeletedAnnotationElement(s.data.id)||t.has(s.data.id))continue;const i=await this.deserialize(s);i&&(this.addOrRebuild(i),i.enableEditing())}b(this,ml,!1)}disable(){var i;b(this,mh,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const t=new Map,e=new Map;for(const r of l(this,Bi).values())if(r.disableEditing(),!!r.annotationElementId){if(r.serialize()!==null){t.set(r.annotationElementId,r);continue}else e.set(r.annotationElementId,r);(i=this.getEditableAnnotation(r.annotationElementId))==null||i.show(),r.remove()}if(l(this,$n)){const r=l(this,$n).getEditableAnnotations();for(const o of r){const{id:a}=o.data;if(l(this,mt).isDeletedAnnotationElement(a))continue;let c=e.get(a);if(c){c.resetAnnotationElement(o),c.show(!1),o.show();continue}c=t.get(a),c&&(l(this,mt).addChangedExistingAnnotation(c),c.renderAnnotationElement(o)&&c.show(!1)),o.show()}}A(this,Ce,up).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:s}=this.div;for(const r of l(qi,No).values())s.remove(`${r._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),b(this,mh,!1)}getEditableAnnotation(t){var e;return((e=l(this,$n))==null?void 0:e.getEditableAnnotation(t))||null}setActiveEditor(t){l(this,mt).getActive()!==t&&l(this,mt).setActiveEditor(t)}enableTextSelection(){var t;if(this.div.tabIndex=-1,(t=l(this,Cs))!=null&&t.div&&!l(this,Rr)){b(this,Rr,new AbortController);const e=l(this,mt).combinedSignal(l(this,Rr));l(this,Cs).div.addEventListener("pointerdown",A(this,Ce,hS).bind(this),{signal:e}),l(this,Cs).div.classList.add("highlighting")}}disableTextSelection(){var t;this.div.tabIndex=0,(t=l(this,Cs))!=null&&t.div&&l(this,Rr)&&(l(this,Rr).abort(),b(this,Rr,null),l(this,Cs).div.classList.remove("highlighting"))}enableClick(){if(l(this,Do))return;b(this,Do,new AbortController);const t=l(this,mt).combinedSignal(l(this,Do));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:t});const e=this.pointerup.bind(this);this.div.addEventListener("pointerup",e,{signal:t}),this.div.addEventListener("pointercancel",e,{signal:t})}disableClick(){var t;(t=l(this,Do))==null||t.abort(),b(this,Do,null)}attach(t){l(this,Bi).set(t.id,t);const{annotationElementId:e}=t;e&&l(this,mt).isDeletedAnnotationElement(e)&&l(this,mt).removeDeletedAnnotationElement(t)}detach(t){var e;l(this,Bi).delete(t.id),(e=l(this,gl))==null||e.removePointerInTextLayer(t.contentDiv),!l(this,mh)&&t.annotationElementId&&l(this,mt).addDeletedAnnotationElement(t)}remove(t){this.detach(t),l(this,mt).removeEditor(t),t.div.remove(),t.isAttachedToDOM=!1}changeParent(t){var e;t.parent!==this&&(t.parent&&t.annotationElementId&&(l(this,mt).addDeletedAnnotationElement(t.annotationElementId),ye.deleteAnnotationElement(t),t.annotationElementId=null),this.attach(t),(e=t.parent)==null||e.detach(t),t.setParent(this),t.div&&t.isAttachedToDOM&&(t.div.remove(),this.div.append(t.div)))}add(t){if(!(t.parent===this&&t.isAttachedToDOM)){if(this.changeParent(t),l(this,mt).addEditor(t),this.attach(t),!t.isAttachedToDOM){const e=t.render();this.div.append(e),t.isAttachedToDOM=!0}t.fixAndSetPosition(),t.onceAdded(!l(this,ml)),l(this,mt).addToAnnotationStorage(t),t._reportTelemetry(t.telemetryInitialData)}}moveEditorInDOM(t){var s;if(!t.isAttachedToDOM)return;const{activeElement:e}=document;t.div.contains(e)&&!l(this,Tr)&&(t._focusEventsAllowed=!1,b(this,Tr,setTimeout(()=>{b(this,Tr,null),t.div.contains(document.activeElement)?t._focusEventsAllowed=!0:(t.div.addEventListener("focusin",()=>{t._focusEventsAllowed=!0},{once:!0,signal:l(this,mt)._signal}),e.focus())},0))),t._structTreeParentId=(s=l(this,gl))==null?void 0:s.moveElementInDOM(this.div,t.div,t.contentDiv,!0)}addOrRebuild(t){t.needsToBeRebuilt()?(t.parent||(t.parent=this),t.rebuild(),t.show()):this.add(t)}addUndoableEditor(t){const e=()=>t._uiManager.rebuild(t),s=()=>{t.remove()};this.addCommands({cmd:e,undo:s,mustExec:!1})}getNextId(){return l(this,mt).getId()}combinedSignal(t){return l(this,mt).combinedSignal(t)}canCreateNewEmptyEditor(){var t;return(t=l(this,Ce,wn))==null?void 0:t.canCreateNewEmptyEditor()}async pasteEditor(t,e){l(this,mt).updateToolbar(t),await l(this,mt).updateMode(t);const{offsetX:s,offsetY:i}=A(this,Ce,Xb).call(this),r=this.getNextId(),o=A(this,Ce,Gb).call(this,{parent:this,id:r,x:s,y:i,uiManager:l(this,mt),isCentered:!0,...e});o&&this.add(o)}async deserialize(t){var e;return await((e=l(qi,No).get(t.annotationType??t.annotationEditorType))==null?void 0:e.deserialize(t,this,l(this,mt)))||null}createAndAddNewEditor(t,e,s={}){const i=this.getNextId(),r=A(this,Ce,Gb).call(this,{parent:this,id:i,x:t.offsetX,y:t.offsetY,uiManager:l(this,mt),isCentered:e,...s});return r&&this.add(r),r}addNewEditor(t={}){this.createAndAddNewEditor(A(this,Ce,Xb).call(this),!0,t)}setSelected(t){l(this,mt).setSelected(t)}toggleSelected(t){l(this,mt).toggleSelected(t)}unselect(t){l(this,mt).unselect(t)}pointerup(t){var i;const{isMac:e}=ys.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div||!l(this,Oo)||(b(this,Oo,!1),(i=l(this,Ce,wn))!=null&&i.isDrawer&&l(this,Ce,wn).supportMultipleDrawings))return;if(!l(this,gh)){b(this,gh,!0);return}const s=l(this,mt).getMode();if(s===Tt.STAMP||s===Tt.SIGNATURE){l(this,mt).unselectAll();return}this.createAndAddNewEditor(t,!1)}pointerdown(t){var i;if(l(this,mt).getMode()===Tt.HIGHLIGHT&&this.enableTextSelection(),l(this,Oo)){b(this,Oo,!1);return}const{isMac:e}=ys.platform;if(t.button!==0||t.ctrlKey&&e||t.target!==this.div)return;if(b(this,Oo,!0),(i=l(this,Ce,wn))!=null&&i.isDrawer){this.startDrawingSession(t);return}const s=l(this,mt).getActive();b(this,gh,!s||s.isEmpty())}startDrawingSession(t){if(this.div.focus({preventScroll:!0}),l(this,nn)){l(this,Ce,wn).startDrawing(this,l(this,mt),!1,t);return}l(this,mt).setCurrentDrawingSession(this),b(this,nn,new AbortController);const e=l(this,mt).combinedSignal(l(this,nn));this.div.addEventListener("blur",({relatedTarget:s})=>{s&&!this.div.contains(s)&&(b(this,Pr,null),this.commitOrRemove())},{signal:e}),l(this,Ce,wn).startDrawing(this,l(this,mt),!1,t)}pause(t){if(t){const{activeElement:e}=document;this.div.contains(e)&&b(this,Pr,e);return}l(this,Pr)&&setTimeout(()=>{var e;(e=l(this,Pr))==null||e.focus(),b(this,Pr,null)},0)}endDrawingSession(t=!1){return l(this,nn)?(l(this,mt).setCurrentDrawingSession(null),l(this,nn).abort(),b(this,nn,null),b(this,Pr,null),l(this,Ce,wn).endDrawing(t)):null}findNewParent(t,e,s){const i=l(this,mt).findParent(e,s);return i===null||i===this?!1:(i.changeParent(t),!0)}commitOrRemove(){return l(this,nn)?(this.endDrawingSession(),!0):!1}onScaleChanging(){l(this,nn)&&l(this,Ce,wn).onScaleChangingWhenDrawing(this)}destroy(){var t,e;this.commitOrRemove(),((t=l(this,mt).getActive())==null?void 0:t.parent)===this&&(l(this,mt).commitOrRemove(),l(this,mt).setActiveEditor(null)),l(this,Tr)&&(clearTimeout(l(this,Tr)),b(this,Tr,null));for(const s of l(this,Bi).values())(e=l(this,gl))==null||e.removePointerInTextLayer(s.contentDiv),s.setParent(null),s.isAttachedToDOM=!1,s.div.remove();this.div=null,l(this,Bi).clear(),l(this,mt).removeLayer(this)}render({viewport:t}){this.viewport=t,yl(this.div,t);for(const e of l(this,mt).getEditors(this.pageIndex))this.add(e),e.rebuild();this.updateMode()}update({viewport:t}){l(this,mt).commitOrRemove(),A(this,Ce,up).call(this);const e=this.viewport.rotation,s=t.rotation;if(this.viewport=t,yl(this.div,{rotation:s}),e!==s)for(const i of l(this,Bi).values())i.rotate(s)}get pageDimensions(){const{pageWidth:t,pageHeight:e}=this.viewport.rawDims;return[t,e]}get scale(){return l(this,mt).viewParameters.realScale}};gl=new WeakMap,gh=new WeakMap,$n=new WeakMap,Do=new WeakMap,Tr=new WeakMap,Bi=new WeakMap,Oo=new WeakMap,mh=new WeakMap,ml=new WeakMap,nn=new WeakMap,Pr=new WeakMap,Cs=new WeakMap,Rr=new WeakMap,mt=new WeakMap,No=new WeakMap,Ce=new WeakSet,hS=function(t){l(this,mt).unselectAll();const{target:e}=t;if(e===l(this,Cs).div||(e.getAttribute("role")==="img"||e.classList.contains("endOfContent"))&&l(this,Cs).div.contains(e)){const{isMac:s}=ys.platform;if(t.button!==0||t.ctrlKey&&s)return;l(this,mt).showAllEditors("highlight",!0,!0),l(this,Cs).div.classList.add("free"),this.toggleDrawing(),kp.startHighlighting(this,l(this,mt).direction==="ltr",{target:l(this,Cs).div,x:t.x,y:t.y}),l(this,Cs).div.addEventListener("pointerup",()=>{l(this,Cs).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:l(this,mt)._signal}),t.preventDefault()}},wn=function(){return l(qi,No).get(l(this,mt).getMode())},Gb=function(t){const e=l(this,Ce,wn);return e?new e.prototype.constructor(t):null},Xb=function(){const{x:t,y:e,width:s,height:i}=this.div.getBoundingClientRect(),r=Math.max(0,t),o=Math.max(0,e),a=Math.min(window.innerWidth,t+s),c=Math.min(window.innerHeight,e+i),h=(r+a)/2-t,u=(o+c)/2-e,[f,p]=this.viewport.rotation%180===0?[h,u]:[u,h];return{offsetX:f,offsetY:p}},up=function(){for(const t of l(this,Bi).values())t.isEmpty()&&t.remove()},J(qi,"_initialized",!1),w(qi,No,new Map([Sb,Fb,zb,kp,Ub].map(t=>[t._editorType,t])));let qb=qi;var rn,Vs,bl,Hd,Yp,uS,zn,Yb,dS,Qb;const Ye=class Ye{constructor({pageIndex:t}){w(this,zn);w(this,rn,null);w(this,Vs,new Map);w(this,bl,new Map);this.pageIndex=t}setParent(t){if(!l(this,rn)){b(this,rn,t);return}if(l(this,rn)!==t){if(l(this,Vs).size>0)for(const e of l(this,Vs).values())e.remove(),t.append(e);b(this,rn,t)}}static get _svgFactory(){return jt(this,"_svgFactory",new Tp)}draw(t,e=!1,s=!1){const i=Ns(Ye,Hd)._++,r=A(this,zn,Yb).call(this),o=Ye._svgFactory.createElement("defs");r.append(o);const a=Ye._svgFactory.createElement("path");o.append(a);const c=`path_p${this.pageIndex}_${i}`;a.setAttribute("id",c),a.setAttribute("vector-effect","non-scaling-stroke"),e&&l(this,bl).set(i,a);const h=s?A(this,zn,dS).call(this,o,c):null,u=Ye._svgFactory.createElement("use");return r.append(u),u.setAttribute("href",`#${c}`),this.updateProperties(r,t),l(this,Vs).set(i,r),{id:i,clipPathId:`url(#${h})`}}drawOutline(t,e){const s=Ns(Ye,Hd)._++,i=A(this,zn,Yb).call(this),r=Ye._svgFactory.createElement("defs");i.append(r);const o=Ye._svgFactory.createElement("path");r.append(o);const a=`path_p${this.pageIndex}_${s}`;o.setAttribute("id",a),o.setAttribute("vector-effect","non-scaling-stroke");let c;if(e){const f=Ye._svgFactory.createElement("mask");r.append(f),c=`mask_p${this.pageIndex}_${s}`,f.setAttribute("id",c),f.setAttribute("maskUnits","objectBoundingBox");const p=Ye._svgFactory.createElement("rect");f.append(p),p.setAttribute("width","1"),p.setAttribute("height","1"),p.setAttribute("fill","white");const g=Ye._svgFactory.createElement("use");f.append(g),g.setAttribute("href",`#${a}`),g.setAttribute("stroke","none"),g.setAttribute("fill","black"),g.setAttribute("fill-rule","nonzero"),g.classList.add("mask")}const h=Ye._svgFactory.createElement("use");i.append(h),h.setAttribute("href",`#${a}`),c&&h.setAttribute("mask",`url(#${c})`);const u=h.cloneNode();return i.append(u),h.classList.add("mainOutline"),u.classList.add("secondaryOutline"),this.updateProperties(i,t),l(this,Vs).set(s,i),s}finalizeDraw(t,e){l(this,bl).delete(t),this.updateProperties(t,e)}updateProperties(t,e){var c;if(!e)return;const{root:s,bbox:i,rootClass:r,path:o}=e,a=typeof t=="number"?l(this,Vs).get(t):t;if(a){if(s&&A(this,zn,Qb).call(this,a,s),i&&A(c=Ye,Yp,uS).call(c,a,i),r){const{classList:h}=a;for(const[u,f]of Object.entries(r))h.toggle(u,f)}if(o){const u=a.firstChild.firstChild;A(this,zn,Qb).call(this,u,o)}}}updateParent(t,e){if(e===this)return;const s=l(this,Vs).get(t);s&&(l(e,rn).append(s),l(this,Vs).delete(t),l(e,Vs).set(t,s))}remove(t){l(this,bl).delete(t),l(this,rn)!==null&&(l(this,Vs).get(t).remove(),l(this,Vs).delete(t))}destroy(){b(this,rn,null);for(const t of l(this,Vs).values())t.remove();l(this,Vs).clear(),l(this,bl).clear()}};rn=new WeakMap,Vs=new WeakMap,bl=new WeakMap,Hd=new WeakMap,Yp=new WeakSet,uS=function(t,[e,s,i,r]){const{style:o}=t;o.top=`${100*s}%`,o.left=`${100*e}%`,o.width=`${100*i}%`,o.height=`${100*r}%`},zn=new WeakSet,Yb=function(){const t=Ye._svgFactory.create(1,1,!0);return l(this,rn).append(t),t.setAttribute("aria-hidden",!0),t},dS=function(t,e){const s=Ye._svgFactory.createElement("clipPath");t.append(s);const i=`clip_${e}`;s.setAttribute("id",i),s.setAttribute("clipPathUnits","objectBoundingBox");const r=Ye._svgFactory.createElement("use");return s.append(r),r.setAttribute("href",`#${e}`),r.classList.add("clip"),i},Qb=function(t,e){for(const[s,i]of Object.entries(e))i===null?t.removeAttribute(s):t.setAttribute(s,i)},w(Ye,Yp),w(Ye,Hd,0);let Kb=Ye;globalThis.pdfjsTestingUtils={HighlightOutliner:Cb};globalThis.pdfjsLib={AbortException:Vo,AnnotationEditorLayer:qb,AnnotationEditorParamsType:zt,AnnotationEditorType:Tt,AnnotationEditorUIManager:wl,AnnotationLayer:wb,AnnotationMode:Zr,AnnotationType:Ve,build:Sk,ColorPicker:Rp,createValidAbsoluteUrl:o0,DOMSVGFactory:Tp,DrawLayer:Kb,FeatureTest:ys,fetchData:Gd,getDocument:cE,getFilenameFromUrl:bR,getPdfFilenameFromUrl:_R,getUuid:c0,getXfaPageViewport:vR,GlobalWorkerOptions:Hn,ImageKind:Of,InvalidPDFException:Om,isDataScheme:mg,isPdfFile:w_,isValidExplicitDest:bk,MathClamp:zs,noContextMenu:dn,normalizeUnicode:pR,OPS:Ep,OutputScale:Fr,PasswordResponses:rR,PDFDataRangeTransport:hE,PDFDateString:A_,PDFWorker:cc,PermissionFlag:nR,PixelsPerInch:Uo,RenderingCancelledException:y_,ResponseException:Sp,setLayerDimensions:yl,shadow:jt,SignatureExtractor:Lr,stopEvent:Ue,SupportedImageMimeTypes:Fm,TextLayer:mu,TouchManager:Cp,updateUrlHash:a0,Util:pt,VerbosityLevel:fg,version:Ek,XfaLayer:dE};const qk={key:0,class:"position-absolute top-50 start-50 translate-middle"},Gk={key:1,class:"position-absolute top-50 start-50 translate-middle text-center"},Xk={class:"text-muted"},Kk=Br({__name:"PDFThumbnail",props:{pdfPath:{}},setup(n){Hn.workerSrc=new URL("/FigBank/assets/pdf.worker-DHtGXOM1.mjs",import.meta.url).toString();const t=n,e=ve(null),s=ve(null),i=ve(!0),r=ve(!1),o=ve(""),a=f=>{var p,g;return f.name==="InvalidPDFException"?"Le fichier PDF est invalide ou corrompu":(p=f.message)!=null&&p.includes("404")?"Le fichier PDF est introuvable":(g=f.message)!=null&&g.includes("Network")?"Erreur réseau lors du chargement du PDF":"Erreur lors du chargement du PDF"},c=f=>f.startsWith("/pdfs/")?"/FigBank"+f:"/FigBank/pdfs/"+f.replace(/^\//,""),h=async f=>{try{const p=c(f);console.log("Fetching PDF from:",p);const g=await fetch(p);if(!g.ok)throw new Error("Network response was not ok: "+g.status);const v=await g.arrayBuffer();if(v.byteLength===0)throw new Error("Le fichier PDF est vide");return v}catch(p){throw console.error("Error loading PDF:",p),p}},u=async f=>{if(!e.value||!s.value){console.log("Canvas or container not ready");return}try{i.value=!0,r.value=!1,o.value="",console.log("Loading PDF from path:",f);const p=await h(f);console.log("PDF data loaded, size:",p.byteLength);const v=await cE({data:p}).promise;if(v.numPages===0)throw new Error("Le PDF ne contient aucune page");console.log("PDF document loaded, pages:",v.numPages);const _=await v.getPage(1);console.log("First page loaded");const x=s.value.clientWidth,S=_.getViewport({scale:1}),C=x/S.width,T=_.getViewport({scale:C});e.value.width=T.width,e.value.height=T.height;const R=e.value.getContext("2d");if(!R)throw new Error("Impossible d'obtenir le contexte du canvas");console.log("Starting page render"),await _.render({canvasContext:R,viewport:T}).promise,console.log("Page rendered successfully")}catch(p){console.error("Error rendering PDF:",p),r.value=!0,o.value=a(p)}finally{i.value=!1}};return ag(()=>{console.log("Component mounted, starting render for:",t.pdfPath),u(t.pdfPath)}),oc(()=>t.pdfPath,f=>{console.log("PDF path changed, re-rendering:",f),u(f)}),(f,p)=>(Nt(),Ft("div",{class:"pdf-thumbnail",ref_key:"canvasContainer",ref:s},[Kr(M("canvas",{ref_key:"canvas",ref:e,class:"w-100 h-100"},null,512),[[ST,!r.value&&!i.value]]),i.value?(Nt(),Ft("div",qk,p[0]||(p[0]=[M("div",{class:"spinner-border text-primary",role:"status"},[M("span",{class:"visually-hidden"},"Chargement...")],-1)]))):on("",!0),r.value?(Nt(),Ft("div",Gk,[p[1]||(p[1]=M("div",{class:"text-danger mb-2"},[M("i",{class:"bi bi-file-earmark-x fs-1"})],-1)),M("small",Xk,Ze(o.value),1)])):on("",!0)],512))}}),yh=(n,t)=>{const e=n.__vccOpts||n;for(const[s,i]of t)e[s]=i;return e},Yk=yh(Kk,[["__scopeId","data-v-d80e00ec"]]),Qk={class:"container"},Jk={key:0,class:"alert alert-danger",role:"alert"},Zk={key:1,class:"text-center my-5"},tI={class:"row mb-4"},eI={class:"col-12"},sI={class:"card shadow-sm"},iI={class:"card-body"},nI={class:"mb-3"},rI={class:"d-flex gap-3"},oI=["value"],aI={class:"form-check-label"},lI={class:"mb-3"},cI={class:"d-flex gap-3"},hI=["value"],uI={class:"form-check-label"},dI={class:"mb-3"},fI={class:"d-flex gap-3 flex-wrap"},pI=["value"],gI={class:"form-check-label"},mI={class:"mb-3"},bI={class:"d-flex gap-4"},_I={class:"form-check"},vI={class:"form-check"},yI={class:"form-check"},wI={class:"text-center mt-4"},AI={class:"d-inline-block px-4 py-2 rounded-pill bg-success-subtle border border-success"},EI={class:"fw-semibold text-success"},SI={key:0,class:"row row-cols-1 row-cols-sm-2 row-cols-md-3 g-3"},xI={class:"card shadow-sm h-100"},CI={class:"card-body d-flex flex-column"},TI={class:"card-title"},PI={class:"card-text"},RI={class:"mb-2"},kI={class:"mb-2"},II={class:"mb-2"},LI={class:"mb-3"},MI={key:0,class:"badge text-warning-emphasis bg-warning-subtle border border-warning-subtle me-1 mb-1"},DI={key:1,class:"badge text-warning-emphasis bg-warning-subtle border border-warning-subtle me-1 mb-1"},OI={key:2,class:"badge text-warning-emphasis bg-warning-subtle border border-warning-subtle me-1 mb-1"},NI={class:"d-flex justify-content-center mb-2"},FI=["href"],$I={class:"text-center"},BI=["href"],HI={key:1,class:"text-muted small"},jI={key:1,class:"alert alert-info"},VI=Br({__name:"PDFLibrary",setup(n){const t=sR(),e=[{value:"CE1",label:"CE1"},{value:"CE2",label:"CE2"},{value:"CM1",label:"CM1"},{value:"CM2",label:"CM2"},{value:"6EME",label:"6ème"},{value:"5EME",label:"5ème"}],s=["Surface","Ligne","Point"],i=["Ficelle","Règle non informable","Règle informable","Bande de papier","Compas","Gabarit angle droit","Équerre","Autre gabarit","Pochoir"],r=ve([]),o=ve([]),a=ve([]),c=ve(!1),h=ve(!1),u=ve(!1),f=qs(()=>t.documents.filter(p=>{const g=r.value.length===0||p.level.some(T=>r.value.includes(T)),v=o.value.length===0||p.vision.some(T=>o.value.some(R=>R.toLowerCase()===T.toLowerCase())),_=a.value.length===0||p.instruments.some(T=>a.value.some(R=>R.toLowerCase()===T.toLowerCase())),x=!c.value||p.withCost,S=!h.value||p.isScaled,C=!u.value||p.hasRotation;return g&&v&&_&&x&&S&&C}));return qs(()=>{const p=[];if(r.value.length>0){const v=r.value.map(_=>{var x;return(x=e.find(S=>S.value===_))==null?void 0:x.label}).join(" OU ");p.push(`(${v})`)}if(o.value.length>0){const v=o.value.map(_=>_.toLowerCase()).join(" OU ");p.push(`(vision ${v})`)}if(a.value.length>0){const v=a.value.join(" OU ");p.push(`(instrument : ${v})`)}const g=[];return c.value&&g.push("avec coûts"),h.value&&g.push("pas à l'échelle"),u.value&&g.push("avec rotation"),g.length>0&&p.push(`(${g.join(" ET ")})`),p.length===0?"Toutes les situations":`Situations vérifiant : ${p.join(" ET ")}`}),ag(()=>{t.loadDocuments()}),(p,g)=>(Nt(),Ft("div",Qk,[Ie(t).error?(Nt(),Ft("div",Jk,Ze(Ie(t).error),1)):on("",!0),Ie(t).isLoading?(Nt(),Ft("div",Zk,g[6]||(g[6]=[M("div",{class:"spinner-border text-primary",role:"status"},[M("span",{class:"visually-hidden"},"Chargement...")],-1)]))):(Nt(),Ft(ls,{key:2},[M("div",tI,[M("div",eI,[M("div",sI,[M("div",iI,[M("div",nI,[g[7]||(g[7]=M("label",{class:"form-label fw-bold badge text-primary-emphasis bg-primary-subtle border border-primary-subtle px-2"},"Niveau",-1)),M("div",rI,[(Nt(),Ft(ls,null,Wr(e,(v,_)=>M("div",{class:"form-check",key:_},[Kr(M("input",{class:"form-check-input",type:"checkbox",value:v.value,"onUpdate:modelValue":g[0]||(g[0]=x=>r.value=x)},null,8,oI),[[jl,r.value]]),M("label",aI,Ze(v.label),1)])),64))])]),M("div",lI,[g[8]||(g[8]=M("label",{class:"form-label fw-bold badge text-info-emphasis bg-info-subtle border border-info-subtle px-2"},"Vision",-1)),M("div",cI,[(Nt(),Ft(ls,null,Wr(s,(v,_)=>M("div",{class:"form-check",key:_},[Kr(M("input",{class:"form-check-input",type:"checkbox",value:v,"onUpdate:modelValue":g[1]||(g[1]=x=>o.value=x)},null,8,hI),[[jl,o.value]]),M("label",uI,Ze(v),1)])),64))])]),M("div",dI,[g[9]||(g[9]=M("label",{class:"form-label fw-bold badge text-success-emphasis bg-success-subtle border border-success-subtle px-2"},"Instruments",-1)),M("div",fI,[(Nt(),Ft(ls,null,Wr(i,(v,_)=>M("div",{class:"form-check",key:_},[Kr(M("input",{class:"form-check-input",type:"checkbox",value:v,"onUpdate:modelValue":g[2]||(g[2]=x=>a.value=x)},null,8,pI),[[jl,a.value]]),M("label",gI,Ze(v),1)])),64))])]),M("div",mI,[g[13]||(g[13]=M("label",{class:"form-label fw-bold badge text-warning-emphasis bg-warning-subtle border border-warning-subtle px-2"},"Options",-1)),M("div",bI,[M("div",_I,[Kr(M("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":g[3]||(g[3]=v=>c.value=v)},null,512),[[jl,c.value]]),g[10]||(g[10]=M("label",{class:"form-check-label"},"Avec coûts",-1))]),M("div",vI,[Kr(M("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":g[4]||(g[4]=v=>h.value=v)},null,512),[[jl,h.value]]),g[11]||(g[11]=M("label",{class:"form-check-label"},"Amorce pas à l'échelle",-1))]),M("div",yI,[Kr(M("input",{class:"form-check-input",type:"checkbox","onUpdate:modelValue":g[5]||(g[5]=v=>u.value=v)},null,512),[[jl,u.value]]),g[12]||(g[12]=M("label",{class:"form-check-label"},"Amorce avec rotation",-1))])])]),M("div",wI,[M("div",AI,[M("span",EI,Ze(f.value.length)+" situation"+Ze(f.value.length>1?"s":"")+" trouvée"+Ze(f.value.length>1?"s":""),1)])])])])])]),f.value.length?(Nt(),Ft("div",SI,[(Nt(!0),Ft(ls,null,Wr(f.value,v=>(Nt(),Ft("div",{class:"col",key:v.id},[M("div",xI,[Te(Yk,{"pdf-path":v.path,class:"card-img-top"},null,8,["pdf-path"]),M("div",CI,[M("h5",TI,Ze(v.title),1),M("p",PI,Ze(v.description),1),M("div",RI,[(Nt(!0),Ft(ls,null,Wr(v.level,_=>(Nt(),Ft("span",{key:_,class:"badge text-primary-emphasis bg-primary-subtle border border-primary-subtle me-1 mb-1"},Ze(_),1))),128))]),M("div",kI,[(Nt(!0),Ft(ls,null,Wr(v.vision,_=>(Nt(),Ft("span",{key:_,class:"badge text-info-emphasis bg-info-subtle border border-info-subtle me-1 mb-1"},Ze(_),1))),128))]),M("div",II,[(Nt(!0),Ft(ls,null,Wr(v.instruments,_=>(Nt(),Ft("span",{key:_,class:"badge text-success-emphasis bg-success-subtle border border-success-subtle me-1 mb-1"},Ze(_),1))),128))]),M("div",LI,[v.withCost?(Nt(),Ft("span",MI,"Avec coûts")):on("",!0),v.isScaled?(Nt(),Ft("span",DI,"Pas à l'échelle")):on("",!0),v.hasRotation?(Nt(),Ft("span",OI,"Avec rotation")):on("",!0)]),M("div",NI,[M("a",{href:"/FigBank"+v.path,target:"_blank",class:"btn btn-sm btn-outline-primary"},"Ouvrir",8,FI)]),M("div",$I,[v.source_url?(Nt(),Ft("a",{key:0,href:v.source_url,target:"_blank",class:"text-muted small"},Ze(v.source_url_title||"Source"),9,BI)):v.source_url_title?(Nt(),Ft("span",HI,Ze(v.source_url_title),1)):on("",!0)])])])]))),128))])):(Nt(),Ft("div",jI," Aucun document ne correspond aux critères sélectionnés. "))],64))]))}}),UI=yh(VI,[["__scopeId","data-v-a40db02c"]]),zI={class:"d-flex flex-column min-vh-100"},WI={key:0,"data-bs-theme":"dark",class:"fixed-top"},qI={class:"collapse text-bg-dark",id:"navbarHeader"},GI={class:"container"},XI={class:"row"},KI={class:"col-sm-4 offset-md-1 py-4"},YI={class:"list-unstyled"},QI={class:"navbar navbar-dark bg-dark shadow-sm"},JI={class:"container"},ZI={key:1,class:"text-body-secondary py-5 mt-auto"},tL=Br({__name:"App",setup(n){const t=eR(),e=qs(()=>!["howto","license","instruments","contribute"].includes(t.name));return(s,i)=>(Nt(),Ft("div",zI,[e.value?(Nt(),Ft("header",WI,[M("div",qI,[M("div",GI,[M("div",XI,[i[5]||(i[5]=M("div",{class:"col-sm-8 col-md-7 py-4"},[M("h4",{class:"text-white"},"À propos"),M("p",{class:"text-body-secondary"}," Cette banque de figures permet de travailler la restauration de figures géométriques. Vous pouvez filtrer les documents selon différents critères comme le niveau, la vision, les instruments utilisés et d'autres options. ")],-1)),M("div",KI,[M("ul",YI,[M("li",null,[Te(Ie(Wl),{to:"/mode-emploi",class:"text-white",target:"_blank"},{default:Jr(()=>i[0]||(i[0]=[an("Comment ça marche ?")])),_:1,__:[0]})]),M("li",null,[Te(Ie(Wl),{to:"/instruments",class:"text-white",target:"_blank"},{default:Jr(()=>i[1]||(i[1]=[an("Les instruments")])),_:1,__:[1]})]),M("li",null,[Te(Ie(Wl),{to:"/contribuer",class:"text-white",target:"_blank"},{default:Jr(()=>i[2]||(i[2]=[an("Comment contribuer ?")])),_:1,__:[2]})]),M("li",null,[Te(Ie(Wl),{to:"/licence",class:"text-white",target:"_blank"},{default:Jr(()=>i[3]||(i[3]=[an("Licence")])),_:1,__:[3]})]),i[4]||(i[4]=M("li",null,[M("a",{href:"https://arnaud-lierville.github.io/",target:"_blank",class:"text-white"},"Autres outils Maths en classe !")],-1))])])])])]),M("div",QI,[M("div",JI,[Te(Ie(Wl),{to:"/",class:"navbar-brand d-flex align-items-center"},{default:Jr(()=>i[6]||(i[6]=[M("strong",null,"FigBank",-1)])),_:1,__:[6]}),i[7]||(i[7]=M("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarHeader","aria-controls":"navbarHeader","aria-expanded":"false","aria-label":"Toggle navigation"},[M("span",{class:"navbar-toggler-icon"})],-1))])])])):on("",!0),M("main",{class:Vd(["main-content flex-grow-1",{"no-navbar":!e.value}])},[Te(Ie(r0))],2),e.value?(Nt(),Ft("footer",ZI,i[8]||(i[8]=[M("div",{class:"container"},[M("p",{class:"float-end mb-1"},[M("a",{href:"#"},"Retour en haut")]),M("p",{class:"mb-1"},"Cette banque de figures est un outil pédagogique et didactique pour l'enseignement de la géométrie.")],-1)]))):on("",!0)]))}}),eL="modulepreload",sL=function(n){return"/FigBank/"+n},Iw={},iL=function(t,e,s){let i=Promise.resolve();if(e&&e.length>0){let o=function(h){return Promise.all(h.map(u=>Promise.resolve(u).then(f=>({status:"fulfilled",value:f}),f=>({status:"rejected",reason:f}))))};document.getElementsByTagName("link");const a=document.querySelector("meta[property=csp-nonce]"),c=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=o(e.map(h=>{if(h=sL(h),h in Iw)return;Iw[h]=!0;const u=h.endsWith(".css"),f=u?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${f}`))return;const p=document.createElement("link");if(p.rel=u?"stylesheet":eL,u||(p.as="script"),p.crossOrigin="",p.href=h,c&&p.setAttribute("nonce",c),document.head.appendChild(p),u)return new Promise((g,v)=>{p.addEventListener("load",g),p.addEventListener("error",()=>v(new Error(`Unable to preload CSS for ${h}`)))})}))}function r(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&r(a.reason);return t().catch(r)})},nL={class:"album py-5 bg-body-tertiary"},rL=Br({__name:"HomeView",setup(n){return(t,e)=>(Nt(),Ft("div",null,[e[0]||(e[0]=Bo('<section class="py-3 text-center container"><div class="row py-3"><div class="col-lg-6 col-md-8 mx-auto"><h1 class="fw-light">Restauration de figures</h1><p class="lead text-body-secondary"> Explorez la collection de figures géométriques à restaurer. Utilisez les filtres ci-dessous pour trouver les documents adaptés à vos besoins. </p></div></div></section>',1)),M("div",nL,[Te(UI)])]))}}),oL="/FigBank/assets/fleche-carre-CIKwgwNQ.png",aL={class:"container py-5"},lL={class:"row"},cL={class:"col-12"},hL={class:"card shadow-sm mb-4"},uL={class:"card-body"},dL={class:"alert alert-light border mb-4"},fL={class:"row"},pL={class:"col-12 text-center"},gL=["src"],mL={class:"card shadow-sm mb-4"},bL={class:"card-body"},_L={class:"mt-3"},vL=Br({__name:"HowToView",setup(n){return(t,e)=>{const s=bA("RouterLink");return Nt(),Ft("div",aL,[e[10]||(e[10]=M("h1",{class:"mb-4"},"Comment ça marche ?",-1)),M("div",lL,[M("div",cL,[e[7]||(e[7]=M("div",{class:"card shadow-sm mb-4"},[M("div",{class:"card-body"},[M("h2",{class:"h5 mb-3"},"Objectif général"),M("p",null," L'approche vise à assurer une continuité et une progression cohérentes de l'enseignement de la géométrie du cycle 2 au cycle 4, en transformant progressivement le regard des élèves sur les figures géométriques. ")])],-1)),M("div",hL,[M("div",uL,[e[2]||(e[2]=Bo('<h2 class="h5 mb-3" data-v-d93f6bf4>La restauration de figures comme levier pédagogique</h2><div class="mb-4" data-v-d93f6bf4><p data-v-d93f6bf4> La restauration de figures est une activité pédagogique en géométrie qui consiste à compléter une figure partiellement donnée (appelée &quot;amorce&quot;) en utilisant des instruments de tracé (comme la règle, l&#39;équerre, le compas ou des gabarits), sans recourir à des mesures numériques. </p></div><div class="mb-4" data-v-d93f6bf4><h3 class="h6 mb-3" data-v-d93f6bf4>Objectifs principaux :</h3><div class="list-group" data-v-d93f6bf4><div class="list-group-item" data-v-d93f6bf4><strong data-v-d93f6bf4>Faire évoluer le regard des élèves :</strong> passer d&#39;une perception globale (vision &quot;surface&quot;) à une analyse fine des relations géométriques (alignements, égalités, intersections). </div><div class="list-group-item" data-v-d93f6bf4><strong data-v-d93f6bf4>Favoriser le raisonnement géométrique :</strong> les élèves doivent identifier et utiliser les propriétés géométriques implicites dans la figure amorcée pour la compléter correctement. </div><div class="list-group-item" data-v-d93f6bf4><strong data-v-d93f6bf4>Développer des compétences en construction :</strong> cette activité mobilise des gestes précis et des instruments adaptés pour reproduire ou prolonger des traits géométriques. </div></div></div>',3)),M("div",dL,[e[1]||(e[1]=M("h3",{class:"h6 mb-3"},"Exemple :",-1)),M("div",fL,[M("div",pL,[M("img",{src:Ie(oL),alt:"Exemple de restauration de figures",class:"img-fluid rounded shadow-sm example-image"},null,8,gL)]),e[0]||(e[0]=Bo('<div class="col-12 mb-3" data-v-d93f6bf4><p class="mb-2" data-v-d93f6bf4>Matériel fourni :</p><ul class="mb-0" data-v-d93f6bf4><li class="mb-2" data-v-d93f6bf4> Sur la même feuille, la figure-modèle et l&#39;amorce à la même échelle mais orientée différemment (pour éviter le transfert par « glissement » de la figure à restaurer). </li><li class="mb-2" data-v-d93f6bf4> Un gabarit d&#39;angle droit informable (sur lequel on peut prendre et garder des informations pour reporter des longueurs) dont les côtés sont plus longs que ceux du carré. </li><li data-v-d93f6bf4> Ficelle </li></ul><p class="mt-3 text-muted small" data-v-d93f6bf4> Source : <a href="https://lea-geometrie.etab.ac-lille.fr/" target="_blank" rel="noopener noreferrer" data-v-d93f6bf4>LEA Géométrie - Académie de Lille</a></p></div>',1))])])])]),e[8]||(e[8]=Bo('<div class="card shadow-sm mb-4" data-v-d93f6bf4><div class="card-body" data-v-d93f6bf4><h2 class="h5 mb-3" data-v-d93f6bf4>Évolution du regard sur les figures</h2><div class="mb-3" data-v-d93f6bf4><h3 class="h6 text-primary-emphasis bg-primary-subtle p-2 rounded" data-v-d93f6bf4>Cycle 2</h3><p data-v-d93f6bf4> Apprentissage fondé sur la manipulation et la restauration de figures simples (à l&#39;aide de gabarits, descriptions, programmes de construction simples). </p></div><div class="mb-3" data-v-d93f6bf4><h3 class="h6 text-info-emphasis bg-info-subtle p-2 rounded" data-v-d93f6bf4>Cycle 3</h3><p data-v-d93f6bf4> Passage d&#39;une géométrie perceptive à une géométrie instrumentée, puis raisonnée. </p></div><div class="mb-3" data-v-d93f6bf4><h3 class="h6 text-success-emphasis bg-success-subtle p-2 rounded" data-v-d93f6bf4>Cycle 4</h3><p data-v-d93f6bf4> Accès à une géométrie plus abstraite et théorique, reposant sur des relations entre points, droites, segments, angles, etc. </p></div></div></div><div class="card shadow-sm mb-4" data-v-d93f6bf4><div class="card-body" data-v-d93f6bf4><h2 class="h5 mb-3" data-v-d93f6bf4>Trois types de &quot;regards&quot; à développer</h2><ul class="list-unstyled" data-v-d93f6bf4><li class="mb-3" data-v-d93f6bf4><span class="badge text-primary-emphasis bg-primary-subtle" data-v-d93f6bf4>Vision surface</span><p class="mt-2 mb-0" data-v-d93f6bf4>Forme globale, aspect visuel</p></li><li class="mb-3" data-v-d93f6bf4><span class="badge text-info-emphasis bg-info-subtle" data-v-d93f6bf4>Vision lignes</span><p class="mt-2 mb-0" data-v-d93f6bf4>Attention portée aux côtés, segments</p></li><li class="mb-3" data-v-d93f6bf4><span class="badge text-success-emphasis bg-success-subtle" data-v-d93f6bf4>Vision points</span><p class="mt-2 mb-0" data-v-d93f6bf4>Analyse des relations entre points, intersections</p></li></ul><div class="alert alert-info" data-v-d93f6bf4><p class="mb-0" data-v-d93f6bf4> 👉 L&#39;objectif est d&#39;acquérir une flexibilité du regard, c&#39;est-à-dire de savoir mobiliser ces différentes visions selon le contexte. </p></div></div></div>',2)),M("div",mL,[M("div",bL,[e[4]||(e[4]=M("h2",{class:"h5 mb-3"},"Rôle des instruments de géométrie",-1)),e[5]||(e[5]=M("p",null,"Les instruments (règle, équerre, compas, bande de papier) permettent :",-1)),e[6]||(e[6]=M("ul",null,[M("li",null,"de tracer des figures,"),M("li",null,"de vérifier des propriétés géométriques,"),M("li",null,"de mobiliser des relations fondamentales : appartenance, égalité, perpendicularité, parallélisme…")],-1)),M("div",_L,[Te(s,{to:"/instruments",class:"text-decoration-none",target:"_blank"},{default:Jr(()=>e[3]||(e[3]=[an(" 👉 Découvrir tous les instruments et leur utilisation ")])),_:1,__:[3]})])])]),e[9]||(e[9]=M("div",{class:"card shadow-sm"},[M("div",{class:"card-body"},[M("h2",{class:"h5 mb-3"},"Conclusion"),M("p",null,"La restauration de figures :"),M("ul",null,[M("li",null,"est une source de problèmes adaptés à différents niveaux,"),M("li",null,"permet d'introduire des notions géométriques progressivement,"),M("li",null,"favorise le passage du dessin à la figure géométrique.")]),M("p",{class:"mb-0"}," Cette approche repose sur une progression graduelle à partir de la perception intuitive des figures vers une compréhension rigoureuse et abstraite de la géométrie. Le travail sur les restauration, les outils non gradués, et le jeu sur les amorces de figures favorisent l'appropriation des concepts géométriques fondamentaux. ")])],-1))])])])}}}),yL=yh(vL,[["__scopeId","data-v-d93f6bf4"]]),wL={},AL={class:"container py-5"};function EL(n,t){return Nt(),Ft("div",AL,t[0]||(t[0]=[Bo('<h1 class="mb-4">Licence</h1><div class="row"><div class="col-12"><div class="card shadow-sm mb-4"><div class="card-body"><div class="text-center mb-4"><a href="https://creativecommons.org/licenses/by/4.0/deed.fr" target="_blank" rel="license"><img alt="Licence Creative Commons" style="border-width:0;" src="https://i.creativecommons.org/l/by/4.0/88x31.png"></a></div><p> Cet site est mis à disposition selon les termes de la <a href="https://creativecommons.org/licenses/by/4.0/deed.fr" target="_blank">Licence Creative Commons Attribution 4.0 International</a>. </p><h2 class="h5 mt-4 mb-3">Vous êtes autorisé à :</h2><ul><li><strong>Partager</strong> — copier, distribuer et communiquer le matériel par tous moyens et sous tous formats</li><li><strong>Adapter</strong> — remixer, transformer et créer à partir du matériel pour toute utilisation, y compris commerciale</li></ul><h2 class="h5 mt-4 mb-3">Selon les conditions suivantes :</h2><ul><li><strong>Attribution</strong> — Vous devez créditer l&#39;Œuvre, intégrer un lien vers la licence et indiquer si des modifications ont été effectuées à l&#39;Œuvre. Vous devez indiquer ces informations par tous les moyens raisonnables, sans toutefois suggérer que l&#39;Offrant vous soutient ou soutient la façon dont vous avez utilisé son Œuvre. </li><li><strong>Pas de restrictions complémentaires</strong> — Vous n&#39;êtes pas autorisé à appliquer des conditions légales ou des mesures techniques qui restreindraient légalement autrui à utiliser l&#39;Œuvre dans les conditions décrites par la licence. </li></ul><h2 class="h5 mt-4 mb-3">Notes :</h2><ul><li>Vous n&#39;êtes pas dans l&#39;obligation de respecter la licence pour les éléments ou matériel appartenant au domaine public ou dans le cas où l&#39;utilisation que vous souhaitez faire est couverte par une exception.</li><li>Aucune garantie n&#39;est donnée. Il se peut que la licence ne vous donne pas toutes les permissions nécessaires pour votre utilisation. Par exemple, certains droits comme les droits moraux, le droit des données personnelles et le droit à l&#39;image sont susceptibles de limiter votre utilisation.</li></ul></div></div></div></div>',2)]))}const SL=yh(wL,[["render",EL]]),xL="/FigBank/assets/gabarit%20-%20exemple%201-C-Ja61j1.png",CL="/FigBank/assets/gabarit%20-%20exemple%202-DXucNH3D.png",TL="/FigBank/assets/gabarit%20-%20exemple%203-Chh1wVgl.png",PL="/FigBank/assets/gabarit%20-%20exemple%204-coP-T9cZ.png",RL="/FigBank/assets/gabarit%20-%20exemple%205-DNmuAQBx.png",kL="/FigBank/assets/gabarit%20-%20exemple%206-DlwugcoY.png",IL="/FigBank/assets/gabarit%20-%20exemple%207-Dp8Txuq7.png",LL="/FigBank/assets/gabarit%20-%20exemple%208-Cnvk_vqU.png",ML="/FigBank/assets/gabarit%20-%20exemple%209-DqUNh1K1.png",DL="/FigBank/assets/gabarit%20-%20exemple%204-coP-T9cZ.png",OL="/FigBank/assets/Regle-non-informable-RR3Hikmg.png",NL="/FigBank/assets/equerre1-DydbFGJ7.png",FL="/FigBank/assets/equerre2-CLCdw-J7.png",$L="/FigBank/assets/compas-CoSNoTS8.png",BL="/FigBank/assets/ficelle-CEbd2ffs.png",HL="/FigBank/assets/pochoir-CMD66YVv.png",jL={class:"container py-5"},VL={class:"text-center mb-5"},UL={class:"row g-4"},zL={class:"col-md-6"},WL={class:"card h-100"},qL=["src"],GL={class:"col-md-6"},XL={class:"card h-100"},KL={class:"row g-0 p-3 justify-content-center"},YL={class:"col-4"},QL=["src"],JL={class:"col-4"},ZL=["src"],tM={class:"col-md-6"},eM={class:"card h-100"},sM={class:"row g-0 p-3 justify-content-center"},iM={class:"col-6"},nM=["src"],rM={class:"col-12"},oM={class:"card h-100"},aM={class:"card-body"},lM={class:"row g-4"},cM=["src","alt"],hM={class:"col-md-6"},uM={class:"card h-100"},dM={class:"row g-0 p-3 justify-content-center"},fM={class:"col-8"},pM=["src"],gM={class:"col-md-6"},mM={class:"card h-100"},bM={class:"row g-0 p-3 justify-content-center"},_M={class:"col-8"},vM=["src"],yM=Br({__name:"InstrumentsView",setup(n){const t=Array.from({length:9},(e,s)=>new URL(Object.assign({"../assets/tools-img/gabarit - exemple 1.png":xL,"../assets/tools-img/gabarit - exemple 2.png":CL,"../assets/tools-img/gabarit - exemple 3.png":TL,"../assets/tools-img/gabarit - exemple 4.png":PL,"../assets/tools-img/gabarit - exemple 5.png":RL,"../assets/tools-img/gabarit - exemple 6.png":kL,"../assets/tools-img/gabarit - exemple 7.png":IL,"../assets/tools-img/gabarit - exemple 8.png":LL,"../assets/tools-img/gabarit - exemple 9.png":ML})[`../assets/tools-img/gabarit - exemple ${s+1}.png`],import.meta.url).href);return(e,s)=>{const i=bA("RouterLink");return Nt(),Ft("div",jL,[s[10]||(s[10]=M("h1",{class:"text-center mb-3"},"Les instruments de géométrie en restauration de figures",-1)),M("div",VL,[Te(i,{to:"/mode-emploi",class:"text-decoration-none",target:"_blank"},{default:Jr(()=>s[0]||(s[0]=[an(" 👉 En savoir plus sur la restauration de figures ")])),_:1,__:[0]})]),M("div",UL,[M("div",zL,[M("div",WL,[M("img",{src:Ie(OL),class:"card-img-top p-3",alt:"Règle non informable"},null,8,qL),s[1]||(s[1]=M("div",{class:"card-body"},[M("h5",{class:"card-title"},"Règle non informable (RNI)"),M("p",{class:"card-text"},[an(" Une règle non informable est une règle sans graduation, avec un seul bord utile et sur laquelle on ne peut pas écrire et ni reporter de marque."),M("br"),an(" Elle permet uniquement de tracer des lignes droites et de vérifier l'alignement de points. Elle ne permet pas de mesurer des longueurs. ")]),M("p",null,[M("em",null,"On peut fabriquer des RNI avec des intercalaires transparentes en plastique souple.")])],-1))])]),s[8]||(s[8]=Bo('<div class="col-md-6" data-v-f41d15ab><div class="card h-100" data-v-f41d15ab><div class="card-body" data-v-f41d15ab><h5 class="card-title" data-v-f41d15ab>Règle informable (RI)</h5><p class="card-text" data-v-f41d15ab> Une règle informable est une règle sans graduation, avec un seul bord utile sur laquelle on reporter des marques.<br data-v-f41d15ab> Elle permet de tracer des lignes droites et de vérifier l&#39;alignement de points. Elle permet de reporter et comparer des longueurs. </p><p data-v-f41d15ab><em data-v-f41d15ab>On peut fabriquer des RI avec des intercalaires transparentes en carton.</em></p></div></div></div>',1)),M("div",GL,[M("div",XL,[M("div",KL,[M("div",YL,[M("img",{src:Ie(NL),class:"img-fluid rounded equerre-img",alt:"Équerre 1"},null,8,QL)]),M("div",JL,[M("img",{src:Ie(FL),class:"img-fluid rounded equerre-img",alt:"Équerre 2"},null,8,ZL)])]),s[2]||(s[2]=M("div",{class:"card-body"},[M("h5",{class:"card-title"},"Équerre"),M("p",{class:"card-text"}," L'équerre permet de tracer des angles droits (90°) et de vérifier la perpendicularité entre deux droites. ")],-1))])]),M("div",tM,[M("div",eM,[M("div",sM,[M("div",iM,[M("img",{src:Ie($L),class:"img-fluid rounded tool-img",alt:"Compas"},null,8,nM)])]),s[3]||(s[3]=M("div",{class:"card-body"},[M("h5",{class:"card-title"},"Compas"),M("p",{class:"card-text"}," Le compas permet de tracer des cercles et des arcs de cercle. Il permet aussi de reporter des distances et de comparer des longueurs. ")],-1))])]),M("div",rM,[M("div",oM,[M("div",aM,[s[4]||(s[4]=M("h5",{class:"card-title"},"Gabarit",-1)),s[5]||(s[5]=M("p",{class:"card-text mb-4"}," Le gabarit est un modèle qui permet de reproduire des formes géométriques spécifiques. Il est particulièrement utile pour tracer des formes complexes ou répétitives. Voici quelques exemples de gabarits utilisés dans les exercices : ",-1)),M("div",lM,[(Nt(!0),Ft(ls,null,Wr(Ie(t),(r,o)=>(Nt(),Ft("div",{class:"col-md-2 col-sm-3 col-4",key:o},[M("img",{src:r,alt:`Exemple de gabarit ${o+1}`,class:"img-fluid rounded shadow-sm gabarit-img"},null,8,cM)]))),128))])])])]),s[9]||(s[9]=Bo('<div class="col-md-6" data-v-f41d15ab><div class="card h-100" data-v-f41d15ab><div class="row g-0 p-3 justify-content-center" data-v-f41d15ab><div class="col-6" data-v-f41d15ab><img src="'+DL+'" class="img-fluid rounded tool-img" alt="Gabarit angle droit" data-v-f41d15ab></div></div><div class="card-body" data-v-f41d15ab><h5 class="card-title" data-v-f41d15ab>Gabarit angle droit</h5><p class="card-text" data-v-f41d15ab> Le gabarit d&#39;angle droit est un outil qui permet de vérifier ou de tracer des angles droits. </p><p data-v-f41d15ab><em data-v-f41d15ab>On peut fabriquer gabarit d&#39;angle droit en pliant une feuille A4 en deux selon une diagonale, puis encore en deux.</em></p></div></div></div><div class="col-md-6" data-v-f41d15ab><div class="card h-100" data-v-f41d15ab><div class="card-body" data-v-f41d15ab><h5 class="card-title" data-v-f41d15ab>Bande de papier</h5><p class="card-text" data-v-f41d15ab> La bande de papier permet de comparer des longueurs, de reporter des longueurs et elle peut être utilisée par pliage pour construire des milieux. </p></div></div></div>',2)),M("div",hM,[M("div",uM,[M("div",dM,[M("div",fM,[M("img",{src:Ie(BL),class:"img-fluid rounded ficelle-img",alt:"Ficelle"},null,8,pM)])]),s[6]||(s[6]=M("div",{class:"card-body"},[M("h5",{class:"card-title"},"Ficelle"),M("p",{class:"card-text"}," La ficelle permet de vérifier les alignements. ")],-1))])]),M("div",gM,[M("div",mM,[M("div",bM,[M("div",_M,[M("img",{src:Ie(HL),class:"img-fluid rounded pochoir-img",alt:"Pochoir"},null,8,vM)])]),s[7]||(s[7]=M("div",{class:"card-body"},[M("h5",{class:"card-title"},"Pochoir"),M("p",{class:"card-text"}," Le pochoir est un modèle qui permet de reproduire des formes géométriques. Il est utile pour tracer rapidement des formes régulières et pour comprendre les propriétés des figures. ")],-1))])])])])}}}),wM=yh(yM,[["__scopeId","data-v-f41d15ab"]]),AM={class:"container py-5"},EM={class:"row"},SM={class:"col-12"},xM={class:"card shadow-sm mb-4"},CM={class:"card-body"},TM={class:"bg-light p-4 rounded mb-4 position-relative"},PM={key:0},RM={key:1},kM={class:"position-relative"},IM={key:0,class:"text-danger mt-2 small"},LM=Br({__name:"ContributeView",setup(n){const t=ve(!1),e=ve(""),s=ve(""),i=ve(""),r=ve(""),o=ve(!1),a=ve(0),c=ve(0),h=ve(null);let u=null;const f={id:"trapeze-cercle",title:"Trapèze et cercle",description:"Restauration d'une figure combinant trapèze et cercle",path:"/pdfs/Trapeze-cercle.pdf",level:["CM2","6EME"],vision:["Ligne","Point"],instruments:["Compas","Règle non informable","Équerre","Gabarit angle droit"],withCost:!1,isScaled:!1,hasRotation:!1,tags:["trapèze","cercle","géométrie"],source_url:"https://lea-geometrie.etab.ac-lille.fr/",source_url_title:"LéA géométrie"},p={id:"Identifiant unique de la situation (en minuscules, sans espaces ni caractères spéciaux)",title:"Titre de la situation tel qu'il apparaîtra dans l'interface",description:"Brève description de la situation",path:"Chemin vers le fichier PDF dans le dossier public (/pdfs/nom-du-fichier.pdf)",level:"Liste des niveaux concernés (CE1, CE2, CM1, CM2, 6EME, 5EME)",vision:"Liste des types de vision géométrique (Surface, Ligne, Point)",instruments:"Liste des instruments autorisés (Ficelle, Règle non informable, Règle informable, etc.)",withCost:"Indique si la situation inclut des coûts (true/false)",isScaled:"Indique si l'amorce n'est pas à l'échelle (true/false)",hasRotation:"Indique si l'amorce comporte une rotation (true/false)",tags:"Liste de mots-clés pour faciliter la recherche",source_url:"URL de la source (optionnel)",source_url_title:"Titre de la source à afficher (optionnel)"},g=(C,T=2)=>JSON.stringify(C,null,T).replace(/^(\s{2}"[^"]+": \[)([\s\S]*?)(\n\s{2}\])/gm,(I,F,N,H)=>{const V=N.replace(/\n\s{4}/g," ").trim();return`${F}${V}${H}`}).replace(/\n\s{2}],/g,"],");ag(()=>{s.value=g(f)});const v=()=>{try{JSON.parse(s.value),e.value=""}catch{e.value="JSON invalide"}},_=async()=>{try{const C=JSON.parse(s.value),T=g(C);await navigator.clipboard.writeText(T),t.value=!0,setTimeout(()=>{t.value=!1},2e3)}catch{e.value="Impossible de copier : JSON invalide"}},x=C=>{if(!h.value)return;const T=h.value.getBoundingClientRect(),R=h.value.scrollTop,I=h.value.value;h.value.selectionStart,C.clientX-T.left;const F=C.clientY-T.top+R,N=I.split(`
`);let H="",V=0;const Y=24;for(let vt=0;vt<N.length;vt++){if(V<=F&&F<=V+Y){H=N[vt];break}V+=Y}const Z=/"([^"]+)"\s*:/.exec(H);if(Z){const vt=Z[1],At=p[vt];At?(u&&clearTimeout(u),r.value=vt,i.value=At,o.value=!0,a.value=C.clientX-T.left+10,c.value=C.clientY-T.top-20,u=window.setTimeout(()=>{S(),u=null},1500)):S()}else S()},S=()=>{o.value=!1,r.value="",u&&(clearTimeout(u),u=null)};return(C,T)=>(Nt(),Ft("div",AM,[T[4]||(T[4]=M("h1",{class:"mb-4"},"Comment contribuer ?",-1)),M("div",EM,[M("div",SM,[M("div",xM,[M("div",CM,[T[2]||(T[2]=M("p",{class:"lead"}," Pour ajouter une nouvelle situation à la bibliothèque, vous devez fournir un fichier PDF et ses métadonnées au format JSON. Voici la structure à suivre, illustrée par un exemple que vous pouvez modifier : ",-1)),M("div",TM,[M("button",{class:Vd(["btn btn-sm btn-outline-primary position-absolute top-0 end-0 m-2",{"btn-success":t.value}]),onClick:_},[t.value?(Nt(),Ft("span",RM,"Copié !")):(Nt(),Ft("span",PM,"Copier"))],2),M("div",kM,[Kr(M("textarea",{"onUpdate:modelValue":T[0]||(T[0]=R=>s.value=R),class:"form-control code-editor",rows:"20",spellcheck:"false",onInput:v,onMousemove:x,onMouseout:S,ref_key:"textarea",ref:h},null,544),[[BT,s.value]]),o.value?(Nt(),Ft("div",{key:0,class:"custom-tooltip",style:sg({top:c.value+"px",left:a.value+"px"})},[M("strong",null,Ze(r.value),1),an(" : "+Ze(i.value),1)],4)):on("",!0)]),e.value?(Nt(),Ft("div",IM,[T[1]||(T[1]=M("i",{class:"bi bi-exclamation-triangle"},null,-1)),an(" "+Ze(e.value),1)])):on("",!0)]),T[3]||(T[3]=Bo('<h2 class="h5 mt-4 mb-3" data-v-6a5b5c92>Description des champs :</h2><ul class="list-group list-group-flush" data-v-6a5b5c92><li class="list-group-item" data-v-6a5b5c92><strong data-v-6a5b5c92>id</strong> : Identifiant unique de la situation (en minuscules, sans espaces ni caractères spéciaux) </li><li class="list-group-item" data-v-6a5b5c92><strong data-v-6a5b5c92>title</strong> : Titre de la situation tel qu&#39;il apparaîtra dans l&#39;interface </li><li class="list-group-item" data-v-6a5b5c92><strong data-v-6a5b5c92>description</strong> : Brève description de la situation </li><li class="list-group-item" data-v-6a5b5c92><strong data-v-6a5b5c92>path</strong> : Chemin vers le fichier PDF dans le dossier public (/pdfs/nom-du-fichier.pdf) </li><li class="list-group-item" data-v-6a5b5c92><strong data-v-6a5b5c92>level</strong> : Liste des niveaux concernés. Valeurs possibles : <ul class="mt-2" data-v-6a5b5c92><li data-v-6a5b5c92>CE1</li><li data-v-6a5b5c92>CE2</li><li data-v-6a5b5c92>CM1</li><li data-v-6a5b5c92>CM2</li><li data-v-6a5b5c92>6EME</li><li data-v-6a5b5c92>5EME</li></ul></li><li class="list-group-item" data-v-6a5b5c92><strong data-v-6a5b5c92>vision</strong> : Liste des types de vision géométrique. Valeurs possibles : <ul class="mt-2" data-v-6a5b5c92><li data-v-6a5b5c92>Surface</li><li data-v-6a5b5c92>Ligne</li><li data-v-6a5b5c92>Point</li></ul></li><li class="list-group-item" data-v-6a5b5c92><strong data-v-6a5b5c92>instruments</strong> : Liste des instruments autorisés. Valeurs possibles : <ul class="mt-2" data-v-6a5b5c92><li data-v-6a5b5c92>Ficelle</li><li data-v-6a5b5c92>Règle non informable</li><li data-v-6a5b5c92>Règle informable</li><li data-v-6a5b5c92>Bande de papier</li><li data-v-6a5b5c92>Compas</li><li data-v-6a5b5c92>Gabarit angle droit</li><li data-v-6a5b5c92>Équerre</li><li data-v-6a5b5c92>Autre gabarit</li><li data-v-6a5b5c92>Pochoir</li></ul></li><li class="list-group-item" data-v-6a5b5c92><strong data-v-6a5b5c92>withCost</strong> : Indique si la situation inclut des coûts (true/false) </li><li class="list-group-item" data-v-6a5b5c92><strong data-v-6a5b5c92>isScaled</strong> : Indique si l&#39;amorce n&#39;est pas à l&#39;échelle (true/false) </li><li class="list-group-item" data-v-6a5b5c92><strong data-v-6a5b5c92>hasRotation</strong> : Indique si l&#39;amorce comporte une rotation (true/false) </li><li class="list-group-item" data-v-6a5b5c92><strong data-v-6a5b5c92>tags</strong> : Liste de mots-clés pour faciliter la recherche </li><li class="list-group-item" data-v-6a5b5c92><strong data-v-6a5b5c92>source_url</strong> : URL de la source (optionnel) </li><li class="list-group-item" data-v-6a5b5c92><strong data-v-6a5b5c92>source_url_title</strong> : Titre de la source à afficher (optionnel) </li></ul><h2 class="h5 mt-4 mb-3" data-v-6a5b5c92>Comment l&#39;envoyer ?</h2><ol data-v-6a5b5c92><li data-v-6a5b5c92>Votre fichier PDF doit contenir une ou deux pages : <ul data-v-6a5b5c92><li data-v-6a5b5c92>la première page est la situation avec la figure modèle et l&#39;amorce.</li><li data-v-6a5b5c92>La deuxième (optionnelle) donne les outils nécessaires à la situation.</li></ul></li><li data-v-6a5b5c92>Envoyer copier le json dans un mail, joindre le PDF et envoyer à <a href="mailto:figbank@gmail.com" target="_blank" data-v-6a5b5c92>figbank@gmail.com</a></li></ol>',4))])])])])]))}}),MM=yh(LM,[["__scopeId","data-v-6a5b5c92"]]),DM=ZP({history:kP("/FigBank/"),routes:[{path:"/",name:"home",component:rL},{path:"/about",name:"about",component:()=>iL(()=>import("./AboutView-CeOW05w4.js"),__vite__mapDeps([0,1]))},{path:"/mode-emploi",name:"howto",component:yL},{path:"/licence",name:"license",component:SL},{path:"/instruments",name:"instruments",component:wM},{path:"/contribuer",name:"contribute",component:MM}]}),I_=UT(tL);I_.use(qT());I_.use(DM);I_.mount("#app");export{yh as _,M as a,Ft as c,Nt as o};
